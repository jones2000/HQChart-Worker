webpackJsonp([0],[function(t,e,a){(function(t){var e;!function(e,a){t.exports=a()}(0,function(){"use strict";function i(){return er.apply(null,arguments)}function r(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function n(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function s(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function o(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(s(t,e))return!1;return!0}function h(t){return void 0===t}function l(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function u(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function c(t,e){var a,i=[];for(a=0;a<t.length;++a)i.push(e(t[a],a));return i}function d(t,e){for(var a in e)s(e,a)&&(t[a]=e[a]);return s(e,"toString")&&(t.toString=e.toString),s(e,"valueOf")&&(t.valueOf=e.valueOf),t}function f(t,e,a,i){return _e(t,e,a,i,!0).utc()}function m(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function C(t){return null==t._pf&&(t._pf=m()),t._pf}function p(t){if(null==t._isValid){var e=C(t),a=ar.call(e.parsedDateParts,function(t){return null!=t}),i=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&a);if(t._strict&&(i=i&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return i;t._isValid=i}return t._isValid}function D(t){var e=f(NaN);return null!=t?d(C(e),t):C(e).userInvalidated=!0,e}function v(t,e){var a,i,r;if(h(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),h(e._i)||(t._i=e._i),h(e._f)||(t._f=e._f),h(e._l)||(t._l=e._l),h(e._strict)||(t._strict=e._strict),h(e._tzm)||(t._tzm=e._tzm),h(e._isUTC)||(t._isUTC=e._isUTC),h(e._offset)||(t._offset=e._offset),h(e._pf)||(t._pf=C(e)),h(e._locale)||(t._locale=e._locale),ir.length>0)for(a=0;a<ir.length;a++)i=ir[a],r=e[i],h(r)||(t[i]=r);return t}function g(t){v(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===rr&&(rr=!0,i.updateOffset(this),rr=!1)}function S(t){return t instanceof g||null!=t&&null!=t._isAMomentObject}function T(t){!1===i.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function y(t,e){var a=!0;return d(function(){if(null!=i.deprecationHandler&&i.deprecationHandler(null,t),a){var r,n,o,h=[];for(n=0;n<arguments.length;n++){if(r="","object"==typeof arguments[n]){r+="\n["+n+"] ";for(o in arguments[0])s(arguments[0],o)&&(r+=o+": "+arguments[0][o]+", ");r=r.slice(0,-2)}else r=arguments[n];h.push(r)}T(t+"\nArguments: "+Array.prototype.slice.call(h).join("")+"\n"+(new Error).stack),a=!1}return e.apply(this,arguments)},e)}function I(t,e){null!=i.deprecationHandler&&i.deprecationHandler(t,e),nr[t]||(T(e),nr[t]=!0)}function x(t){return"undefined"!=typeof Function&&t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function L(t){var e,a;for(a in t)s(t,a)&&(e=t[a],x(e)?this[a]=e:this["_"+a]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function M(t,e){var a,i=d({},t);for(a in e)s(e,a)&&(n(t[a])&&n(e[a])?(i[a]={},d(i[a],t[a]),d(i[a],e[a])):null!=e[a]?i[a]=e[a]:delete i[a]);for(a in t)s(t,a)&&!s(e,a)&&n(t[a])&&(i[a]=d({},i[a]));return i}function _(t){null!=t&&this.set(t)}function b(t,e,a){var i=this._calendar[t]||this._calendar.sameElse;return x(i)?i.call(e,a):i}function w(t,e,a){var i=""+Math.abs(t),r=e-i.length;return(t>=0?a?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}function F(t,e,a,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),t&&(dr[t]=r),e&&(dr[e[0]]=function(){return w(r.apply(this,arguments),e[1],e[2])}),a&&(dr[a]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function E(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function A(t){var e,a,i=t.match(lr);for(e=0,a=i.length;e<a;e++)dr[i[e]]?i[e]=dr[i[e]]:i[e]=E(i[e]);return function(e){var r,n="";for(r=0;r<a;r++)n+=x(i[r])?i[r].call(e,t):i[r];return n}}function N(t,e){return t.isValid()?(e=O(e,t.localeData()),cr[e]=cr[e]||A(e),cr[e](t)):t.localeData().invalidDate()}function O(t,e){function a(t){return e.longDateFormat(t)||t}var i=5;for(ur.lastIndex=0;i>=0&&ur.test(t);)t=t.replace(ur,a),ur.lastIndex=0,i-=1;return t}function P(t){var e=this._longDateFormat[t],a=this._longDateFormat[t.toUpperCase()];return e||!a?e:(this._longDateFormat[t]=a.match(lr).map(function(t){return"MMMM"===t||"MM"===t||"DD"===t||"dddd"===t?t.slice(1):t}).join(""),this._longDateFormat[t])}function R(){return this._invalidDate}function k(t){return this._ordinal.replace("%d",t)}function B(t,e,a,i){var r=this._relativeTime[a];return x(r)?r(t,e,a,i):r.replace(/%d/i,t)}function Y(t,e){var a=this._relativeTime[t>0?"future":"past"];return x(a)?a(e):a.replace(/%s/i,e)}function H(t,e){var a=t.toLowerCase();pr[a]=pr[a+"s"]=pr[e]=t}function V(t){return"string"==typeof t?pr[t]||pr[t.toLowerCase()]:void 0}function G(t){var e,a,i={};for(a in t)s(t,a)&&(e=V(a))&&(i[e]=t[a]);return i}function W(t,e){Dr[t]=e}function X(t){var e,a=[];for(e in t)s(t,e)&&a.push({unit:e,priority:Dr[e]});return a.sort(function(t,e){return t.priority-e.priority}),a}function U(t){return t%4==0&&t%100!=0||t%400==0}function K(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function j(t){var e=+t,a=0;return 0!==e&&isFinite(e)&&(a=K(e)),a}function z(t,e){return function(a){return null!=a?(q(this,t,a),i.updateOffset(this,e),this):J(this,t)}}function J(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function q(t,e,a){t.isValid()&&!isNaN(a)&&("FullYear"===e&&U(t.year())&&1===t.month()&&29===t.date()?(a=j(a),t._d["set"+(t._isUTC?"UTC":"")+e](a,t.month(),ot(a,t.month()))):t._d["set"+(t._isUTC?"UTC":"")+e](a))}function Z(t){return t=V(t),x(this[t])?this[t]():this}function Q(t,e){if("object"==typeof t){t=G(t);var a,i=X(t);for(a=0;a<i.length;a++)this[i[a].unit](t[i[a].unit])}else if(t=V(t),x(this[t]))return this[t](e);return this}function $(t,e,a){or[t]=x(e)?e:function(t,i){return t&&a?a:e}}function tt(t,e){return s(or,t)?or[t](e._strict,e._locale):new RegExp(et(t))}function et(t){return at(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,a,i,r){return e||a||i||r}))}function at(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function it(t,e){var a,i=e;for("string"==typeof t&&(t=[t]),l(e)&&(i=function(t,a){a[e]=j(t)}),a=0;a<t.length;a++)Rr[t[a]]=i}function rt(t,e){it(t,function(t,a,i,r){i._w=i._w||{},e(t,i._w,i,r)})}function nt(t,e,a){null!=e&&s(Rr,t)&&Rr[t](e,a._a,a,t)}function st(t,e){return(t%e+e)%e}function ot(t,e){if(isNaN(t)||isNaN(e))return NaN;var a=st(e,12);return t+=(e-a)/12,1===a?U(t)?29:28:31-a%7%2}function ht(t,e){return t?r(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||zr).test(e)?"format":"standalone"][t.month()]:r(this._months)?this._months:this._months.standalone}function lt(t,e){return t?r(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[zr.test(e)?"format":"standalone"][t.month()]:r(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ut(t,e,a){var i,r,n,s=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)n=f([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(n,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(n,"").toLocaleLowerCase();return a?"MMM"===e?(r=Pr.call(this._shortMonthsParse,s),-1!==r?r:null):(r=Pr.call(this._longMonthsParse,s),-1!==r?r:null):"MMM"===e?-1!==(r=Pr.call(this._shortMonthsParse,s))?r:(r=Pr.call(this._longMonthsParse,s),-1!==r?r:null):-1!==(r=Pr.call(this._longMonthsParse,s))?r:(r=Pr.call(this._shortMonthsParse,s),-1!==r?r:null)}function ct(t,e,a){var i,r,n;if(this._monthsParseExact)return ut.call(this,t,e,a);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=f([2e3,i]),a&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),a||this._monthsParse[i]||(n="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(n.replace(".",""),"i")),a&&"MMMM"===e&&this._longMonthsParse[i].test(t))return i;if(a&&"MMM"===e&&this._shortMonthsParse[i].test(t))return i;if(!a&&this._monthsParse[i].test(t))return i}}function dt(t,e){var a;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=j(e);else if(e=t.localeData().monthsParse(e),!l(e))return t;return a=Math.min(t.date(),ot(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,a),t}function ft(t){return null!=t?(dt(this,t),i.updateOffset(this,!0),this):J(this,"Month")}function mt(){return ot(this.year(),this.month())}function Ct(t){return this._monthsParseExact?(s(this,"_monthsRegex")||Dt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(s(this,"_monthsShortRegex")||(this._monthsShortRegex=Jr),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function pt(t){return this._monthsParseExact?(s(this,"_monthsRegex")||Dt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(s(this,"_monthsRegex")||(this._monthsRegex=qr),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function Dt(){function t(t,e){return e.length-t.length}var e,a,i=[],r=[],n=[];for(e=0;e<12;e++)a=f([2e3,e]),i.push(this.monthsShort(a,"")),r.push(this.months(a,"")),n.push(this.months(a,"")),n.push(this.monthsShort(a,""));for(i.sort(t),r.sort(t),n.sort(t),e=0;e<12;e++)i[e]=at(i[e]),r[e]=at(r[e]);for(e=0;e<24;e++)n[e]=at(n[e]);this._monthsRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function vt(t){return U(t)?366:365}function gt(){return U(this.year())}function St(t,e,a,i,r,n,s){var o;return t<100&&t>=0?(o=new Date(t+400,e,a,i,r,n,s),isFinite(o.getFullYear())&&o.setFullYear(t)):o=new Date(t,e,a,i,r,n,s),o}function Tt(t){var e,a;return t<100&&t>=0?(a=Array.prototype.slice.call(arguments),a[0]=t+400,e=new Date(Date.UTC.apply(null,a)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function yt(t,e,a){var i=7+e-a;return-(7+Tt(t,0,i).getUTCDay()-e)%7+i-1}function It(t,e,a,i,r){var n,s,o=(7+a-i)%7,h=yt(t,i,r),l=1+7*(e-1)+o+h;return l<=0?(n=t-1,s=vt(n)+l):l>vt(t)?(n=t+1,s=l-vt(t)):(n=t,s=l),{year:n,dayOfYear:s}}function xt(t,e,a){var i,r,n=yt(t.year(),e,a),s=Math.floor((t.dayOfYear()-n-1)/7)+1;return s<1?(r=t.year()-1,i=s+Lt(r,e,a)):s>Lt(t.year(),e,a)?(i=s-Lt(t.year(),e,a),r=t.year()+1):(r=t.year(),i=s),{week:i,year:r}}function Lt(t,e,a){var i=yt(t,e,a),r=yt(t+1,e,a);return(vt(t)-i+r)/7}function Mt(t){return xt(t,this._week.dow,this._week.doy).week}function _t(){return this._week.dow}function bt(){return this._week.doy}function wt(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function Ft(t){var e=xt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function Et(t,e){return"string"!=typeof t?t:isNaN(t)?(t=e.weekdaysParse(t),"number"==typeof t?t:null):parseInt(t,10)}function At(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Nt(t,e){return t.slice(e,7).concat(t.slice(0,e))}function Ot(t,e){var a=r(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?Nt(a,this._week.dow):t?a[t.day()]:a}function Pt(t){return!0===t?Nt(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function Rt(t){return!0===t?Nt(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function kt(t,e,a){var i,r,n,s=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)n=f([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(n,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(n,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(n,"").toLocaleLowerCase();return a?"dddd"===e?(r=Pr.call(this._weekdaysParse,s),-1!==r?r:null):"ddd"===e?(r=Pr.call(this._shortWeekdaysParse,s),-1!==r?r:null):(r=Pr.call(this._minWeekdaysParse,s),-1!==r?r:null):"dddd"===e?-1!==(r=Pr.call(this._weekdaysParse,s))?r:-1!==(r=Pr.call(this._shortWeekdaysParse,s))?r:(r=Pr.call(this._minWeekdaysParse,s),-1!==r?r:null):"ddd"===e?-1!==(r=Pr.call(this._shortWeekdaysParse,s))?r:-1!==(r=Pr.call(this._weekdaysParse,s))?r:(r=Pr.call(this._minWeekdaysParse,s),-1!==r?r:null):-1!==(r=Pr.call(this._minWeekdaysParse,s))?r:-1!==(r=Pr.call(this._weekdaysParse,s))?r:(r=Pr.call(this._shortWeekdaysParse,s),-1!==r?r:null)}function Bt(t,e,a){var i,r,n;if(this._weekdaysParseExact)return kt.call(this,t,e,a);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=f([2e3,1]).day(i),a&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(n="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(n.replace(".",""),"i")),a&&"dddd"===e&&this._fullWeekdaysParse[i].test(t))return i;if(a&&"ddd"===e&&this._shortWeekdaysParse[i].test(t))return i;if(a&&"dd"===e&&this._minWeekdaysParse[i].test(t))return i;if(!a&&this._weekdaysParse[i].test(t))return i}}function Yt(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=Et(t,this.localeData()),this.add(t-e,"d")):e}function Ht(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function Vt(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=At(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7}function Gt(t){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Ut.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(s(this,"_weekdaysRegex")||(this._weekdaysRegex=an),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function Wt(t){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Ut.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=rn),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Xt(t){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Ut.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=nn),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Ut(){function t(t,e){return e.length-t.length}var e,a,i,r,n,s=[],o=[],h=[],l=[];for(e=0;e<7;e++)a=f([2e3,1]).day(e),i=at(this.weekdaysMin(a,"")),r=at(this.weekdaysShort(a,"")),n=at(this.weekdays(a,"")),s.push(i),o.push(r),h.push(n),l.push(i),l.push(r),l.push(n);s.sort(t),o.sort(t),h.sort(t),l.sort(t),this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Kt(){return this.hours()%12||12}function jt(){return this.hours()||24}function zt(t,e){F(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Jt(t,e){return e._meridiemParse}function qt(t){return"p"===(t+"").toLowerCase().charAt(0)}function Zt(t,e,a){return t>11?a?"pm":"PM":a?"am":"AM"}function Qt(t,e){var a,i=Math.min(t.length,e.length);for(a=0;a<i;a+=1)if(t[a]!==e[a])return a;return i}function $t(t){return t?t.toLowerCase().replace("_","-"):t}function te(t){for(var e,a,i,r,n=0;n<t.length;){for(r=$t(t[n]).split("-"),e=r.length,a=$t(t[n+1]),a=a?a.split("-"):null;e>0;){if(i=ee(r.slice(0,e).join("-")))return i;if(a&&a.length>=e&&Qt(r,a)>=e-1)break;e--}n++}return sn}function ee(i){var r=null;if(void 0===un[i]&&void 0!==t&&t&&t.exports)try{r=sn._abbr,e,a(484)("./"+i),ae(r)}catch(t){un[i]=null}return un[i]}function ae(t,e){var a;return t&&(a=h(e)?ne(t):ie(t,e),a?sn=a:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),sn._abbr}function ie(t,e){if(null!==e){var a,i=ln;if(e.abbr=t,null!=un[t])I("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=un[t]._config;else if(null!=e.parentLocale)if(null!=un[e.parentLocale])i=un[e.parentLocale]._config;else{if(null==(a=ee(e.parentLocale)))return cn[e.parentLocale]||(cn[e.parentLocale]=[]),cn[e.parentLocale].push({name:t,config:e}),null;i=a._config}return un[t]=new _(M(i,e)),cn[t]&&cn[t].forEach(function(t){ie(t.name,t.config)}),ae(t),un[t]}return delete un[t],null}function re(t,e){if(null!=e){var a,i,r=ln;null!=un[t]&&null!=un[t].parentLocale?un[t].set(M(un[t]._config,e)):(i=ee(t),null!=i&&(r=i._config),e=M(r,e),null==i&&(e.abbr=t),a=new _(e),a.parentLocale=un[t],un[t]=a),ae(t)}else null!=un[t]&&(null!=un[t].parentLocale?(un[t]=un[t].parentLocale,t===ae()&&ae(t)):null!=un[t]&&delete un[t]);return un[t]}function ne(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return sn;if(!r(t)){if(e=ee(t))return e;t=[t]}return te(t)}function se(){return sr(un)}function oe(t){var e,a=t._a;return a&&-2===C(t).overflow&&(e=a[Br]<0||a[Br]>11?Br:a[Yr]<1||a[Yr]>ot(a[kr],a[Br])?Yr:a[Hr]<0||a[Hr]>24||24===a[Hr]&&(0!==a[Vr]||0!==a[Gr]||0!==a[Wr])?Hr:a[Vr]<0||a[Vr]>59?Vr:a[Gr]<0||a[Gr]>59?Gr:a[Wr]<0||a[Wr]>999?Wr:-1,C(t)._overflowDayOfYear&&(e<kr||e>Yr)&&(e=Yr),C(t)._overflowWeeks&&-1===e&&(e=Xr),C(t)._overflowWeekday&&-1===e&&(e=Ur),C(t).overflow=e),t}function he(t){var e,a,i,r,n,s,o=t._i,h=dn.exec(o)||fn.exec(o);if(h){for(C(t).iso=!0,e=0,a=Cn.length;e<a;e++)if(Cn[e][1].exec(h[1])){r=Cn[e][0],i=!1!==Cn[e][2];break}if(null==r)return void(t._isValid=!1);if(h[3]){for(e=0,a=pn.length;e<a;e++)if(pn[e][1].exec(h[3])){n=(h[2]||" ")+pn[e][0];break}if(null==n)return void(t._isValid=!1)}if(!i&&null!=n)return void(t._isValid=!1);if(h[4]){if(!mn.exec(h[4]))return void(t._isValid=!1);s="Z"}t._f=r+(n||"")+(s||""),Se(t)}else t._isValid=!1}function le(t,e,a,i,r,n){var s=[ue(t),jr.indexOf(e),parseInt(a,10),parseInt(i,10),parseInt(r,10)];return n&&s.push(parseInt(n,10)),s}function ue(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function ce(t){return t.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function de(t,e,a){if(t){if(tn.indexOf(t)!==new Date(e[0],e[1],e[2]).getDay())return C(a).weekdayMismatch=!0,a._isValid=!1,!1}return!0}function fe(t,e,a){if(t)return gn[t];if(e)return 0;var i=parseInt(a,10),r=i%100;return(i-r)/100*60+r}function me(t){var e,a=vn.exec(ce(t._i));if(a){if(e=le(a[4],a[3],a[2],a[5],a[6],a[7]),!de(a[1],e,t))return;t._a=e,t._tzm=fe(a[8],a[9],a[10]),t._d=Tt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),C(t).rfc2822=!0}else t._isValid=!1}function Ce(t){var e=Dn.exec(t._i);if(null!==e)return void(t._d=new Date(+e[1]));he(t),!1===t._isValid&&(delete t._isValid,me(t),!1===t._isValid&&(delete t._isValid,t._strict?t._isValid=!1:i.createFromInputFallback(t)))}function pe(t,e,a){return null!=t?t:null!=e?e:a}function De(t){var e=new Date(i.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function ve(t){var e,a,i,r,n,s=[];if(!t._d){for(i=De(t),t._w&&null==t._a[Yr]&&null==t._a[Br]&&ge(t),null!=t._dayOfYear&&(n=pe(t._a[kr],i[kr]),(t._dayOfYear>vt(n)||0===t._dayOfYear)&&(C(t)._overflowDayOfYear=!0),a=Tt(n,0,t._dayOfYear),t._a[Br]=a.getUTCMonth(),t._a[Yr]=a.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=s[e]=i[e];for(;e<7;e++)t._a[e]=s[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[Hr]&&0===t._a[Vr]&&0===t._a[Gr]&&0===t._a[Wr]&&(t._nextDay=!0,t._a[Hr]=0),t._d=(t._useUTC?Tt:St).apply(null,s),r=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Hr]=24),t._w&&void 0!==t._w.d&&t._w.d!==r&&(C(t).weekdayMismatch=!0)}}function ge(t){var e,a,i,r,n,s,o,h,l;e=t._w,null!=e.GG||null!=e.W||null!=e.E?(n=1,s=4,a=pe(e.GG,t._a[kr],xt(be(),1,4).year),i=pe(e.W,1),((r=pe(e.E,1))<1||r>7)&&(h=!0)):(n=t._locale._week.dow,s=t._locale._week.doy,l=xt(be(),n,s),a=pe(e.gg,t._a[kr],l.year),i=pe(e.w,l.week),null!=e.d?((r=e.d)<0||r>6)&&(h=!0):null!=e.e?(r=e.e+n,(e.e<0||e.e>6)&&(h=!0)):r=n),i<1||i>Lt(a,n,s)?C(t)._overflowWeeks=!0:null!=h?C(t)._overflowWeekday=!0:(o=It(a,i,r,n,s),t._a[kr]=o.year,t._dayOfYear=o.dayOfYear)}function Se(t){if(t._f===i.ISO_8601)return void he(t);if(t._f===i.RFC_2822)return void me(t);t._a=[],C(t).empty=!0;var e,a,r,n,s,o,h=""+t._i,l=h.length,u=0;for(r=O(t._f,t._locale).match(lr)||[],e=0;e<r.length;e++)n=r[e],a=(h.match(tt(n,t))||[])[0],a&&(s=h.substr(0,h.indexOf(a)),s.length>0&&C(t).unusedInput.push(s),h=h.slice(h.indexOf(a)+a.length),u+=a.length),dr[n]?(a?C(t).empty=!1:C(t).unusedTokens.push(n),nt(n,a,t)):t._strict&&!a&&C(t).unusedTokens.push(n);C(t).charsLeftOver=l-u,h.length>0&&C(t).unusedInput.push(h),t._a[Hr]<=12&&!0===C(t).bigHour&&t._a[Hr]>0&&(C(t).bigHour=void 0),C(t).parsedDateParts=t._a.slice(0),C(t).meridiem=t._meridiem,t._a[Hr]=Te(t._locale,t._a[Hr],t._meridiem),o=C(t).era,null!==o&&(t._a[kr]=t._locale.erasConvertYear(o,t._a[kr])),ve(t),oe(t)}function Te(t,e,a){var i;return null==a?e:null!=t.meridiemHour?t.meridiemHour(e,a):null!=t.isPM?(i=t.isPM(a),i&&e<12&&(e+=12),i||12!==e||(e=0),e):e}function ye(t){var e,a,i,r,n,s,o=!1;if(0===t._f.length)return C(t).invalidFormat=!0,void(t._d=new Date(NaN));for(r=0;r<t._f.length;r++)n=0,s=!1,e=v({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[r],Se(e),p(e)&&(s=!0),n+=C(e).charsLeftOver,n+=10*C(e).unusedTokens.length,C(e).score=n,o?n<i&&(i=n,a=e):(null==i||n<i||s)&&(i=n,a=e,s&&(o=!0));d(t,a||e)}function Ie(t){if(!t._d){var e=G(t._i),a=void 0===e.day?e.date:e.day;t._a=c([e.year,e.month,a,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),ve(t)}}function xe(t){var e=new g(oe(Le(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Le(t){var e=t._i,a=t._f;return t._locale=t._locale||ne(t._l),null===e||void 0===a&&""===e?D({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),S(e)?new g(oe(e)):(u(e)?t._d=e:r(a)?ye(t):a?Se(t):Me(t),p(t)||(t._d=null),t))}function Me(t){var e=t._i;h(e)?t._d=new Date(i.now()):u(e)?t._d=new Date(e.valueOf()):"string"==typeof e?Ce(t):r(e)?(t._a=c(e.slice(0),function(t){return parseInt(t,10)}),ve(t)):n(e)?Ie(t):l(e)?t._d=new Date(e):i.createFromInputFallback(t)}function _e(t,e,a,i,s){var h={};return!0!==e&&!1!==e||(i=e,e=void 0),!0!==a&&!1!==a||(i=a,a=void 0),(n(t)&&o(t)||r(t)&&0===t.length)&&(t=void 0),h._isAMomentObject=!0,h._useUTC=h._isUTC=s,h._l=a,h._i=t,h._f=e,h._strict=i,xe(h)}function be(t,e,a,i){return _e(t,e,a,i,!1)}function we(t,e){var a,i;if(1===e.length&&r(e[0])&&(e=e[0]),!e.length)return be();for(a=e[0],i=1;i<e.length;++i)e[i].isValid()&&!e[i][t](a)||(a=e[i]);return a}function Fe(){return we("isBefore",[].slice.call(arguments,0))}function Ee(){return we("isAfter",[].slice.call(arguments,0))}function Ae(t){var e,a,i=!1;for(e in t)if(s(t,e)&&(-1===Pr.call(In,e)||null!=t[e]&&isNaN(t[e])))return!1;for(a=0;a<In.length;++a)if(t[In[a]]){if(i)return!1;parseFloat(t[In[a]])!==j(t[In[a]])&&(i=!0)}return!0}function Ne(){return this._isValid}function Oe(){return ta(NaN)}function Pe(t){var e=G(t),a=e.year||0,i=e.quarter||0,r=e.month||0,n=e.week||e.isoWeek||0,s=e.day||0,o=e.hour||0,h=e.minute||0,l=e.second||0,u=e.millisecond||0;this._isValid=Ae(e),this._milliseconds=+u+1e3*l+6e4*h+1e3*o*60*60,this._days=+s+7*n,this._months=+r+3*i+12*a,this._data={},this._locale=ne(),this._bubble()}function Re(t){return t instanceof Pe}function ke(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Be(t,e,a){var i,r=Math.min(t.length,e.length),n=Math.abs(t.length-e.length),s=0;for(i=0;i<r;i++)(a&&t[i]!==e[i]||!a&&j(t[i])!==j(e[i]))&&s++;return s+n}function Ye(t,e){F(t,0,0,function(){var t=this.utcOffset(),a="+";return t<0&&(t=-t,a="-"),a+w(~~(t/60),2)+e+w(~~t%60,2)})}function He(t,e){var a,i,r,n=(e||"").match(t);return null===n?null:(a=n[n.length-1]||[],i=(a+"").match(xn)||["-",0,0],r=60*i[1]+j(i[2]),0===r?0:"+"===i[0]?r:-r)}function Ve(t,e){var a,r;return e._isUTC?(a=e.clone(),r=(S(t)||u(t)?t.valueOf():be(t).valueOf())-a.valueOf(),a._d.setTime(a._d.valueOf()+r),i.updateOffset(a,!1),a):be(t).local()}function Ge(t){return-Math.round(t._d.getTimezoneOffset())}function We(t,e,a){var r,n=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=He(Ar,t)))return this}else Math.abs(t)<16&&!a&&(t*=60);return!this._isUTC&&e&&(r=Ge(this)),this._offset=t,this._isUTC=!0,null!=r&&this.add(r,"m"),n!==t&&(!e||this._changeInProgress?na(this,ta(t-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?n:Ge(this)}function Xe(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Ue(t){return this.utcOffset(0,t)}function Ke(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Ge(this),"m")),this}function je(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=He(Er,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this}function ze(t){return!!this.isValid()&&(t=t?be(t).utcOffset():0,(this.utcOffset()-t)%60==0)}function Je(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function qe(){if(!h(this._isDSTShifted))return this._isDSTShifted;var t,e={};return v(e,this),e=Le(e),e._a?(t=e._isUTC?f(e._a):be(e._a),this._isDSTShifted=this.isValid()&&Be(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Ze(){return!!this.isValid()&&!this._isUTC}function Qe(){return!!this.isValid()&&this._isUTC}function $e(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function ta(t,e){var a,i,r,n=t,o=null;return Re(t)?n={ms:t._milliseconds,d:t._days,M:t._months}:l(t)||!isNaN(+t)?(n={},e?n[e]=+t:n.milliseconds=+t):(o=Ln.exec(t))?(a="-"===o[1]?-1:1,n={y:0,d:j(o[Yr])*a,h:j(o[Hr])*a,m:j(o[Vr])*a,s:j(o[Gr])*a,ms:j(ke(1e3*o[Wr]))*a}):(o=Mn.exec(t))?(a="-"===o[1]?-1:1,n={y:ea(o[2],a),M:ea(o[3],a),w:ea(o[4],a),d:ea(o[5],a),h:ea(o[6],a),m:ea(o[7],a),s:ea(o[8],a)}):null==n?n={}:"object"==typeof n&&("from"in n||"to"in n)&&(r=ia(be(n.from),be(n.to)),n={},n.ms=r.milliseconds,n.M=r.months),i=new Pe(n),Re(t)&&s(t,"_locale")&&(i._locale=t._locale),Re(t)&&s(t,"_isValid")&&(i._isValid=t._isValid),i}function ea(t,e){var a=t&&parseFloat(t.replace(",","."));return(isNaN(a)?0:a)*e}function aa(t,e){var a={};return a.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(a.months,"M").isAfter(e)&&--a.months,a.milliseconds=+e-+t.clone().add(a.months,"M"),a}function ia(t,e){var a;return t.isValid()&&e.isValid()?(e=Ve(e,t),t.isBefore(e)?a=aa(t,e):(a=aa(e,t),a.milliseconds=-a.milliseconds,a.months=-a.months),a):{milliseconds:0,months:0}}function ra(t,e){return function(a,i){var r,n;return null===i||isNaN(+i)||(I(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=a,a=i,i=n),r=ta(a,i),na(this,r,t),this}}function na(t,e,a,r){var n=e._milliseconds,s=ke(e._days),o=ke(e._months);t.isValid()&&(r=null==r||r,o&&dt(t,J(t,"Month")+o*a),s&&q(t,"Date",J(t,"Date")+s*a),n&&t._d.setTime(t._d.valueOf()+n*a),r&&i.updateOffset(t,s||o))}function sa(t){return"string"==typeof t||t instanceof String}function oa(t){return S(t)||u(t)||sa(t)||l(t)||la(t)||ha(t)||null===t||void 0===t}function ha(t){var e,a,i=n(t)&&!o(t),r=!1,h=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"];for(e=0;e<h.length;e+=1)a=h[e],r=r||s(t,a);return i&&r}function la(t){var e=r(t),a=!1;return e&&(a=0===t.filter(function(e){return!l(e)&&sa(t)}).length),e&&a}function ua(t){var e,a,i=n(t)&&!o(t),r=!1,h=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(e=0;e<h.length;e+=1)a=h[e],r=r||s(t,a);return i&&r}function ca(t,e){var a=t.diff(e,"days",!0);return a<-6?"sameElse":a<-1?"lastWeek":a<0?"lastDay":a<1?"sameDay":a<2?"nextDay":a<7?"nextWeek":"sameElse"}function da(t,e){1===arguments.length&&(arguments[0]?oa(arguments[0])?(t=arguments[0],e=void 0):ua(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var a=t||be(),r=Ve(a,this).startOf("day"),n=i.calendarFormat(this,r)||"sameElse",s=e&&(x(e[n])?e[n].call(this,a):e[n]);return this.format(s||this.localeData().calendar(n,this,be(a)))}function fa(){return new g(this)}function ma(t,e){var a=S(t)?t:be(t);return!(!this.isValid()||!a.isValid())&&(e=V(e)||"millisecond","millisecond"===e?this.valueOf()>a.valueOf():a.valueOf()<this.clone().startOf(e).valueOf())}function Ca(t,e){var a=S(t)?t:be(t);return!(!this.isValid()||!a.isValid())&&(e=V(e)||"millisecond","millisecond"===e?this.valueOf()<a.valueOf():this.clone().endOf(e).valueOf()<a.valueOf())}function pa(t,e,a,i){var r=S(t)?t:be(t),n=S(e)?e:be(e);return!!(this.isValid()&&r.isValid()&&n.isValid())&&(i=i||"()",("("===i[0]?this.isAfter(r,a):!this.isBefore(r,a))&&(")"===i[1]?this.isBefore(n,a):!this.isAfter(n,a)))}function Da(t,e){var a,i=S(t)?t:be(t);return!(!this.isValid()||!i.isValid())&&(e=V(e)||"millisecond","millisecond"===e?this.valueOf()===i.valueOf():(a=i.valueOf(),this.clone().startOf(e).valueOf()<=a&&a<=this.clone().endOf(e).valueOf()))}function va(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function ga(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function Sa(t,e,a){var i,r,n;if(!this.isValid())return NaN;if(i=Ve(t,this),!i.isValid())return NaN;switch(r=6e4*(i.utcOffset()-this.utcOffset()),e=V(e)){case"year":n=Ta(this,i)/12;break;case"month":n=Ta(this,i);break;case"quarter":n=Ta(this,i)/3;break;case"second":n=(this-i)/1e3;break;case"minute":n=(this-i)/6e4;break;case"hour":n=(this-i)/36e5;break;case"day":n=(this-i-r)/864e5;break;case"week":n=(this-i-r)/6048e5;break;default:n=this-i}return a?n:K(n)}function Ta(t,e){if(t.date()<e.date())return-Ta(e,t);var a,i,r=12*(e.year()-t.year())+(e.month()-t.month()),n=t.clone().add(r,"months");return e-n<0?(a=t.clone().add(r-1,"months"),i=(e-n)/(n-a)):(a=t.clone().add(r+1,"months"),i=(e-n)/(a-n)),-(r+i)||0}function ya(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Ia(t){if(!this.isValid())return null;var e=!0!==t,a=e?this.clone().utc():this;return a.year()<0||a.year()>9999?N(a,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):x(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",N(a,"Z")):N(a,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function xa(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t,e,a,i,r="moment",n="";return this.isLocal()||(r=0===this.utcOffset()?"moment.utc":"moment.parseZone",n="Z"),t="["+r+'("]',e=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",a="-MM-DD[T]HH:mm:ss.SSS",i=n+'[")]',this.format(t+e+a+i)}function La(t){t||(t=this.isUtc()?i.defaultFormatUtc:i.defaultFormat);var e=N(this,t);return this.localeData().postformat(e)}function Ma(t,e){return this.isValid()&&(S(t)&&t.isValid()||be(t).isValid())?ta({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function _a(t){return this.from(be(),t)}function ba(t,e){return this.isValid()&&(S(t)&&t.isValid()||be(t).isValid())?ta({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function wa(t){return this.to(be(),t)}function Fa(t){var e;return void 0===t?this._locale._abbr:(e=ne(t),null!=e&&(this._locale=e),this)}function Ea(){return this._locale}function Aa(t,e){return(t%e+e)%e}function Na(t,e,a){return t<100&&t>=0?new Date(t+400,e,a)-Nn:new Date(t,e,a).valueOf()}function Oa(t,e,a){return t<100&&t>=0?Date.UTC(t+400,e,a)-Nn:Date.UTC(t,e,a)}function Pa(t){var e,a;if(void 0===(t=V(t))||"millisecond"===t||!this.isValid())return this;switch(a=this._isUTC?Oa:Na,t){case"year":e=a(this.year(),0,1);break;case"quarter":e=a(this.year(),this.month()-this.month()%3,1);break;case"month":e=a(this.year(),this.month(),1);break;case"week":e=a(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=a(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=a(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=Aa(e+(this._isUTC?0:this.utcOffset()*En),An);break;case"minute":e=this._d.valueOf(),e-=Aa(e,En);break;case"second":e=this._d.valueOf(),e-=Aa(e,Fn)}return this._d.setTime(e),i.updateOffset(this,!0),this}function Ra(t){var e,a;if(void 0===(t=V(t))||"millisecond"===t||!this.isValid())return this;switch(a=this._isUTC?Oa:Na,t){case"year":e=a(this.year()+1,0,1)-1;break;case"quarter":e=a(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=a(this.year(),this.month()+1,1)-1;break;case"week":e=a(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=a(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=a(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=An-Aa(e+(this._isUTC?0:this.utcOffset()*En),An)-1;break;case"minute":e=this._d.valueOf(),e+=En-Aa(e,En)-1;break;case"second":e=this._d.valueOf(),e+=Fn-Aa(e,Fn)-1}return this._d.setTime(e),i.updateOffset(this,!0),this}function ka(){return this._d.valueOf()-6e4*(this._offset||0)}function Ba(){return Math.floor(this.valueOf()/1e3)}function Ya(){return new Date(this.valueOf())}function Ha(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function Va(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Ga(){return this.isValid()?this.toISOString():null}function Wa(){return p(this)}function Xa(){return d({},C(this))}function Ua(){return C(this).overflow}function Ka(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function ja(t,e){var a,r,n,s=this._eras||ne("en")._eras;for(a=0,r=s.length;a<r;++a){switch(typeof s[a].since){case"string":n=i(s[a].since).startOf("day"),s[a].since=n.valueOf()}switch(typeof s[a].until){case"undefined":s[a].until=1/0;break;case"string":n=i(s[a].until).startOf("day").valueOf(),s[a].until=n.valueOf()}}return s}function za(t,e,a){var i,r,n,s,o,h=this.eras();for(t=t.toUpperCase(),i=0,r=h.length;i<r;++i)if(n=h[i].name.toUpperCase(),s=h[i].abbr.toUpperCase(),o=h[i].narrow.toUpperCase(),a)switch(e){case"N":case"NN":case"NNN":if(s===t)return h[i];break;case"NNNN":if(n===t)return h[i];break;case"NNNNN":if(o===t)return h[i]}else if([n,s,o].indexOf(t)>=0)return h[i]}function Ja(t,e){var a=t.since<=t.until?1:-1;return void 0===e?i(t.since).year():i(t.since).year()+(e-t.offset)*a}function qa(){var t,e,a,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t){if(a=this.clone().startOf("day").valueOf(),i[t].since<=a&&a<=i[t].until)return i[t].name;if(i[t].until<=a&&a<=i[t].since)return i[t].name}return""}function Za(){var t,e,a,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t){if(a=this.clone().startOf("day").valueOf(),i[t].since<=a&&a<=i[t].until)return i[t].narrow;if(i[t].until<=a&&a<=i[t].since)return i[t].narrow}return""}function Qa(){var t,e,a,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t){if(a=this.clone().startOf("day").valueOf(),i[t].since<=a&&a<=i[t].until)return i[t].abbr;if(i[t].until<=a&&a<=i[t].since)return i[t].abbr}return""}function $a(){var t,e,a,r,n=this.localeData().eras();for(t=0,e=n.length;t<e;++t)if(a=n[t].since<=n[t].until?1:-1,r=this.clone().startOf("day").valueOf(),n[t].since<=r&&r<=n[t].until||n[t].until<=r&&r<=n[t].since)return(this.year()-i(n[t].since).year())*a+n[t].offset;return this.year()}function ti(t){return s(this,"_erasNameRegex")||oi.call(this),t?this._erasNameRegex:this._erasRegex}function ei(t){return s(this,"_erasAbbrRegex")||oi.call(this),t?this._erasAbbrRegex:this._erasRegex}function ai(t){return s(this,"_erasNarrowRegex")||oi.call(this),t?this._erasNarrowRegex:this._erasRegex}function ii(t,e){return e.erasAbbrRegex(t)}function ri(t,e){return e.erasNameRegex(t)}function ni(t,e){return e.erasNarrowRegex(t)}function si(t,e){return e._eraYearOrdinalRegex||wr}function oi(){var t,e,a=[],i=[],r=[],n=[],s=this.eras();for(t=0,e=s.length;t<e;++t)i.push(at(s[t].name)),a.push(at(s[t].abbr)),r.push(at(s[t].narrow)),n.push(at(s[t].name)),n.push(at(s[t].abbr)),n.push(at(s[t].narrow));this._erasRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+i.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+a.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}function hi(t,e){F(0,[t,t.length],0,e)}function li(t){return Ci.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function ui(t){return Ci.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function ci(){return Lt(this.year(),1,4)}function di(){return Lt(this.isoWeekYear(),1,4)}function fi(){var t=this.localeData()._week;return Lt(this.year(),t.dow,t.doy)}function mi(){var t=this.localeData()._week;return Lt(this.weekYear(),t.dow,t.doy)}function Ci(t,e,a,i,r){var n;return null==t?xt(this,i,r).year:(n=Lt(t,i,r),e>n&&(e=n),pi.call(this,t,e,a,i,r))}function pi(t,e,a,i,r){var n=It(t,e,a,i,r),s=Tt(n.year,0,n.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}function Di(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function vi(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function gi(t,e){e[Wr]=j(1e3*("0."+t))}function Si(){return this._isUTC?"UTC":""}function Ti(){return this._isUTC?"Coordinated Universal Time":""}function yi(t){return be(1e3*t)}function Ii(){return be.apply(null,arguments).parseZone()}function xi(t){return t}function Li(t,e,a,i){var r=ne(),n=f().set(i,e);return r[a](n,t)}function Mi(t,e,a){if(l(t)&&(e=t,t=void 0),t=t||"",null!=e)return Li(t,e,a,"month");var i,r=[];for(i=0;i<12;i++)r[i]=Li(t,i,a,"month");return r}function _i(t,e,a,i){"boolean"==typeof t?(l(e)&&(a=e,e=void 0),e=e||""):(e=t,a=e,t=!1,l(e)&&(a=e,e=void 0),e=e||"");var r,n=ne(),s=t?n._week.dow:0,o=[];if(null!=a)return Li(e,(a+s)%7,i,"day");for(r=0;r<7;r++)o[r]=Li(e,(r+s)%7,i,"day");return o}function bi(t,e){return Mi(t,e,"months")}function wi(t,e){return Mi(t,e,"monthsShort")}function Fi(t,e,a){return _i(t,e,a,"weekdays")}function Ei(t,e,a){return _i(t,e,a,"weekdaysShort")}function Ai(t,e,a){return _i(t,e,a,"weekdaysMin")}function Ni(){var t=this._data;return this._milliseconds=Vn(this._milliseconds),this._days=Vn(this._days),this._months=Vn(this._months),t.milliseconds=Vn(t.milliseconds),t.seconds=Vn(t.seconds),t.minutes=Vn(t.minutes),t.hours=Vn(t.hours),t.months=Vn(t.months),t.years=Vn(t.years),this}function Oi(t,e,a,i){var r=ta(e,a);return t._milliseconds+=i*r._milliseconds,t._days+=i*r._days,t._months+=i*r._months,t._bubble()}function Pi(t,e){return Oi(this,t,e,1)}function Ri(t,e){return Oi(this,t,e,-1)}function ki(t){return t<0?Math.floor(t):Math.ceil(t)}function Bi(){var t,e,a,i,r,n=this._milliseconds,s=this._days,o=this._months,h=this._data;return n>=0&&s>=0&&o>=0||n<=0&&s<=0&&o<=0||(n+=864e5*ki(Hi(o)+s),s=0,o=0),h.milliseconds=n%1e3,t=K(n/1e3),h.seconds=t%60,e=K(t/60),h.minutes=e%60,a=K(e/60),h.hours=a%24,s+=K(a/24),r=K(Yi(s)),o+=r,s-=ki(Hi(r)),i=K(o/12),o%=12,h.days=s,h.months=o,h.years=i,this}function Yi(t){return 4800*t/146097}function Hi(t){return 146097*t/4800}function Vi(t){if(!this.isValid())return NaN;var e,a,i=this._milliseconds;if("month"===(t=V(t))||"quarter"===t||"year"===t)switch(e=this._days+i/864e5,a=this._months+Yi(e),t){case"month":return a;case"quarter":return a/3;case"year":return a/12}else switch(e=this._days+Math.round(Hi(this._months)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return 24*e+i/36e5;case"minute":return 1440*e+i/6e4;case"second":return 86400*e+i/1e3;case"millisecond":return Math.floor(864e5*e)+i;default:throw new Error("Unknown unit "+t)}}function Gi(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*j(this._months/12):NaN}function Wi(t){return function(){return this.as(t)}}function Xi(){return ta(this)}function Ui(t){return t=V(t),this.isValid()?this[t+"s"]():NaN}function Ki(t){return function(){return this.isValid()?this._data[t]:NaN}}function ji(){return K(this.days()/7)}function zi(t,e,a,i,r){return r.relativeTime(e||1,!!a,t,i)}function Ji(t,e,a,i){var r=ta(t).abs(),n=rs(r.as("s")),s=rs(r.as("m")),o=rs(r.as("h")),h=rs(r.as("d")),l=rs(r.as("M")),u=rs(r.as("w")),c=rs(r.as("y")),d=n<=a.ss&&["s",n]||n<a.s&&["ss",n]||s<=1&&["m"]||s<a.m&&["mm",s]||o<=1&&["h"]||o<a.h&&["hh",o]||h<=1&&["d"]||h<a.d&&["dd",h];return null!=a.w&&(d=d||u<=1&&["w"]||u<a.w&&["ww",u]),d=d||l<=1&&["M"]||l<a.M&&["MM",l]||c<=1&&["y"]||["yy",c],d[2]=e,d[3]=+t>0,d[4]=i,zi.apply(null,d)}function qi(t){return void 0===t?rs:"function"==typeof t&&(rs=t,!0)}function Zi(t,e){return void 0!==ns[t]&&(void 0===e?ns[t]:(ns[t]=e,"s"===t&&(ns.ss=e-1),!0))}function Qi(t,e){if(!this.isValid())return this.localeData().invalidDate();var a,i,r=!1,n=ns;return"object"==typeof t&&(e=t,t=!1),"boolean"==typeof t&&(r=t),"object"==typeof e&&(n=Object.assign({},ns,e),null!=e.s&&null==e.ss&&(n.ss=e.s-1)),a=this.localeData(),i=Ji(this,!r,n,a),r&&(i=a.pastFuture(+this,i)),a.postformat(i)}function $i(t){return(t>0)-(t<0)||+t}function tr(){if(!this.isValid())return this.localeData().invalidDate();var t,e,a,i,r,n,s,o,h=ss(this._milliseconds)/1e3,l=ss(this._days),u=ss(this._months),c=this.asSeconds();return c?(t=K(h/60),e=K(t/60),h%=60,t%=60,a=K(u/12),u%=12,i=h?h.toFixed(3).replace(/\.?0+$/,""):"",r=c<0?"-":"",n=$i(this._months)!==$i(c)?"-":"",s=$i(this._days)!==$i(c)?"-":"",o=$i(this._milliseconds)!==$i(c)?"-":"",r+"P"+(a?n+a+"Y":"")+(u?n+u+"M":"")+(l?s+l+"D":"")+(e||t||h?"T":"")+(e?o+e+"H":"")+(t?o+t+"M":"")+(h?o+i+"S":"")):"P0D"}var er,ar;ar=Array.prototype.some?Array.prototype.some:function(t){var e,a=Object(this),i=a.length>>>0;for(e=0;e<i;e++)if(e in a&&t.call(this,a[e],e,a))return!0;return!1};var ir=i.momentProperties=[],rr=!1,nr={};i.suppressDeprecationWarnings=!1,i.deprecationHandler=null;var sr;sr=Object.keys?Object.keys:function(t){var e,a=[];for(e in t)s(t,e)&&a.push(e);return a};var or,hr={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},lr=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ur=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,cr={},dr={},fr={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},mr=/\d{1,2}/,Cr={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},pr={},Dr={},vr=/\d/,gr=/\d\d/,Sr=/\d{3}/,Tr=/\d{4}/,yr=/[+-]?\d{6}/,Ir=/\d\d?/,xr=/\d\d\d\d?/,Lr=/\d\d\d\d\d\d?/,Mr=/\d{1,3}/,_r=/\d{1,4}/,br=/[+-]?\d{1,6}/,wr=/\d+/,Fr=/[+-]?\d+/,Er=/Z|[+-]\d\d:?\d\d/gi,Ar=/Z|[+-]\d\d(?::?\d\d)?/gi,Nr=/[+-]?\d+(\.\d{1,3})?/,Or=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;or={};var Pr,Rr={},kr=0,Br=1,Yr=2,Hr=3,Vr=4,Gr=5,Wr=6,Xr=7,Ur=8;Pr=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},F("M",["MM",2],"Mo",function(){return this.month()+1}),F("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),F("MMMM",0,0,function(t){return this.localeData().months(this,t)}),H("month","M"),W("month",8),$("M",Ir),$("MM",Ir,gr),$("MMM",function(t,e){return e.monthsShortRegex(t)}),$("MMMM",function(t,e){return e.monthsRegex(t)}),it(["M","MM"],function(t,e){e[Br]=j(t)-1}),it(["MMM","MMMM"],function(t,e,a,i){var r=a._locale.monthsParse(t,i,a._strict);null!=r?e[Br]=r:C(a).invalidMonth=t});var Kr="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),jr="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),zr=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Jr=Or,qr=Or;F("Y",0,0,function(){var t=this.year();return t<=9999?w(t,4):"+"+t}),F(0,["YY",2],0,function(){return this.year()%100}),F(0,["YYYY",4],0,"year"),F(0,["YYYYY",5],0,"year"),F(0,["YYYYYY",6,!0],0,"year"),H("year","y"),W("year",1),$("Y",Fr),$("YY",Ir,gr),$("YYYY",_r,Tr),$("YYYYY",br,yr),$("YYYYYY",br,yr),it(["YYYYY","YYYYYY"],kr),it("YYYY",function(t,e){e[kr]=2===t.length?i.parseTwoDigitYear(t):j(t)}),it("YY",function(t,e){e[kr]=i.parseTwoDigitYear(t)}),it("Y",function(t,e){e[kr]=parseInt(t,10)}),i.parseTwoDigitYear=function(t){return j(t)+(j(t)>68?1900:2e3)};var Zr=z("FullYear",!0);F("w",["ww",2],"wo","week"),F("W",["WW",2],"Wo","isoWeek"),H("week","w"),H("isoWeek","W"),W("week",5),W("isoWeek",5),$("w",Ir),$("ww",Ir,gr),$("W",Ir),$("WW",Ir,gr),rt(["w","ww","W","WW"],function(t,e,a,i){e[i.substr(0,1)]=j(t)});var Qr={dow:0,doy:6};F("d",0,"do","day"),F("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),F("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),F("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),F("e",0,0,"weekday"),F("E",0,0,"isoWeekday"),H("day","d"),H("weekday","e"),H("isoWeekday","E"),W("day",11),W("weekday",11),W("isoWeekday",11),$("d",Ir),$("e",Ir),$("E",Ir),$("dd",function(t,e){return e.weekdaysMinRegex(t)}),$("ddd",function(t,e){return e.weekdaysShortRegex(t)}),$("dddd",function(t,e){return e.weekdaysRegex(t)}),rt(["dd","ddd","dddd"],function(t,e,a,i){var r=a._locale.weekdaysParse(t,i,a._strict);null!=r?e.d=r:C(a).invalidWeekday=t}),rt(["d","e","E"],function(t,e,a,i){e[i]=j(t)});var $r="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),tn="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),en="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),an=Or,rn=Or,nn=Or;F("H",["HH",2],0,"hour"),F("h",["hh",2],0,Kt),F("k",["kk",2],0,jt),F("hmm",0,0,function(){return""+Kt.apply(this)+w(this.minutes(),2)}),F("hmmss",0,0,function(){return""+Kt.apply(this)+w(this.minutes(),2)+w(this.seconds(),2)}),F("Hmm",0,0,function(){return""+this.hours()+w(this.minutes(),2)}),F("Hmmss",0,0,function(){return""+this.hours()+w(this.minutes(),2)+w(this.seconds(),2)}),zt("a",!0),zt("A",!1),H("hour","h"),W("hour",13),$("a",Jt),$("A",Jt),$("H",Ir),$("h",Ir),$("k",Ir),$("HH",Ir,gr),$("hh",Ir,gr),$("kk",Ir,gr),$("hmm",xr),$("hmmss",Lr),$("Hmm",xr),$("Hmmss",Lr),it(["H","HH"],Hr),it(["k","kk"],function(t,e,a){var i=j(t);e[Hr]=24===i?0:i}),it(["a","A"],function(t,e,a){a._isPm=a._locale.isPM(t),a._meridiem=t}),it(["h","hh"],function(t,e,a){e[Hr]=j(t),C(a).bigHour=!0}),it("hmm",function(t,e,a){var i=t.length-2;e[Hr]=j(t.substr(0,i)),e[Vr]=j(t.substr(i)),C(a).bigHour=!0}),it("hmmss",function(t,e,a){var i=t.length-4,r=t.length-2;e[Hr]=j(t.substr(0,i)),e[Vr]=j(t.substr(i,2)),e[Gr]=j(t.substr(r)),C(a).bigHour=!0}),it("Hmm",function(t,e,a){var i=t.length-2;e[Hr]=j(t.substr(0,i)),e[Vr]=j(t.substr(i))}),it("Hmmss",function(t,e,a){var i=t.length-4,r=t.length-2;e[Hr]=j(t.substr(0,i)),e[Vr]=j(t.substr(i,2)),e[Gr]=j(t.substr(r))});var sn,on=/[ap]\.?m?\.?/i,hn=z("Hours",!0),ln={calendar:hr,longDateFormat:fr,invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:mr,relativeTime:Cr,months:Kr,monthsShort:jr,week:Qr,weekdays:$r,weekdaysMin:en,weekdaysShort:tn,meridiemParse:on},un={},cn={},dn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,fn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,mn=/Z|[+-]\d\d(?::?\d\d)?/,Cn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],pn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Dn=/^\/?Date\((-?\d+)/i,vn=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,gn={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};i.createFromInputFallback=y("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),i.ISO_8601=function(){},i.RFC_2822=function(){};var Sn=y("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=be.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:D()}),Tn=y("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=be.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:D()}),yn=function(){return Date.now?Date.now():+new Date},In=["year","quarter","month","week","day","hour","minute","second","millisecond"];Ye("Z",":"),Ye("ZZ",""),$("Z",Ar),$("ZZ",Ar),it(["Z","ZZ"],function(t,e,a){a._useUTC=!0,a._tzm=He(Ar,t)});var xn=/([\+\-]|\d\d)/gi;i.updateOffset=function(){};var Ln=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Mn=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;ta.fn=Pe.prototype,ta.invalid=Oe;var _n=ra(1,"add"),bn=ra(-1,"subtract");i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var wn=y("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)}),Fn=1e3,En=60*Fn,An=60*En,Nn=3506328*An;F("N",0,0,"eraAbbr"),F("NN",0,0,"eraAbbr"),F("NNN",0,0,"eraAbbr"),F("NNNN",0,0,"eraName"),F("NNNNN",0,0,"eraNarrow"),F("y",["y",1],"yo","eraYear"),F("y",["yy",2],0,"eraYear"),F("y",["yyy",3],0,"eraYear"),F("y",["yyyy",4],0,"eraYear"),$("N",ii),$("NN",ii),$("NNN",ii),$("NNNN",ri),$("NNNNN",ni),it(["N","NN","NNN","NNNN","NNNNN"],function(t,e,a,i){var r=a._locale.erasParse(t,i,a._strict);r?C(a).era=r:C(a).invalidEra=t}),$("y",wr),$("yy",wr),$("yyy",wr),$("yyyy",wr),$("yo",si),it(["y","yy","yyy","yyyy"],kr),it(["yo"],function(t,e,a,i){var r;a._locale._eraYearOrdinalRegex&&(r=t.match(a._locale._eraYearOrdinalRegex)),a._locale.eraYearOrdinalParse?e[kr]=a._locale.eraYearOrdinalParse(t,r):e[kr]=parseInt(t,10)}),F(0,["gg",2],0,function(){return this.weekYear()%100}),F(0,["GG",2],0,function(){return this.isoWeekYear()%100}),hi("gggg","weekYear"),hi("ggggg","weekYear"),hi("GGGG","isoWeekYear"),hi("GGGGG","isoWeekYear"),H("weekYear","gg"),H("isoWeekYear","GG"),W("weekYear",1),W("isoWeekYear",1),$("G",Fr),$("g",Fr),$("GG",Ir,gr),$("gg",Ir,gr),$("GGGG",_r,Tr),$("gggg",_r,Tr),$("GGGGG",br,yr),$("ggggg",br,yr),rt(["gggg","ggggg","GGGG","GGGGG"],function(t,e,a,i){e[i.substr(0,2)]=j(t)}),rt(["gg","GG"],function(t,e,a,r){e[r]=i.parseTwoDigitYear(t)}),F("Q",0,"Qo","quarter"),H("quarter","Q"),W("quarter",7),$("Q",vr),it("Q",function(t,e){e[Br]=3*(j(t)-1)}),F("D",["DD",2],"Do","date"),H("date","D"),W("date",9),$("D",Ir),$("DD",Ir,gr),$("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),it(["D","DD"],Yr),it("Do",function(t,e){e[Yr]=j(t.match(Ir)[0])});var On=z("Date",!0);F("DDD",["DDDD",3],"DDDo","dayOfYear"),H("dayOfYear","DDD"),W("dayOfYear",4),$("DDD",Mr),$("DDDD",Sr),it(["DDD","DDDD"],function(t,e,a){a._dayOfYear=j(t)}),F("m",["mm",2],0,"minute"),H("minute","m"),W("minute",14),$("m",Ir),$("mm",Ir,gr),it(["m","mm"],Vr);var Pn=z("Minutes",!1);F("s",["ss",2],0,"second"),H("second","s"),W("second",15),$("s",Ir),$("ss",Ir,gr),it(["s","ss"],Gr);var Rn=z("Seconds",!1);F("S",0,0,function(){return~~(this.millisecond()/100)}),F(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),F(0,["SSS",3],0,"millisecond"),F(0,["SSSS",4],0,function(){return 10*this.millisecond()}),F(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),F(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),F(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),F(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),F(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),H("millisecond","ms"),W("millisecond",16),$("S",Mr,vr),$("SS",Mr,gr),$("SSS",Mr,Sr);var kn,Bn;for(kn="SSSS";kn.length<=9;kn+="S")$(kn,wr);for(kn="S";kn.length<=9;kn+="S")it(kn,gi);Bn=z("Milliseconds",!1),F("z",0,0,"zoneAbbr"),F("zz",0,0,"zoneName");var Yn=g.prototype;Yn.add=_n,Yn.calendar=da,Yn.clone=fa,Yn.diff=Sa,Yn.endOf=Ra,Yn.format=La,Yn.from=Ma,Yn.fromNow=_a,Yn.to=ba,Yn.toNow=wa,Yn.get=Z,Yn.invalidAt=Ua,Yn.isAfter=ma,Yn.isBefore=Ca,Yn.isBetween=pa,Yn.isSame=Da,Yn.isSameOrAfter=va,Yn.isSameOrBefore=ga,Yn.isValid=Wa,Yn.lang=wn,Yn.locale=Fa,Yn.localeData=Ea,Yn.max=Tn,Yn.min=Sn,Yn.parsingFlags=Xa,Yn.set=Q,Yn.startOf=Pa,Yn.subtract=bn,Yn.toArray=Ha,Yn.toObject=Va,Yn.toDate=Ya,Yn.toISOString=Ia,Yn.inspect=xa,"undefined"!=typeof Symbol&&null!=Symbol.for&&(Yn[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),Yn.toJSON=Ga,Yn.toString=ya,Yn.unix=Ba,Yn.valueOf=ka,Yn.creationData=Ka,Yn.eraName=qa,Yn.eraNarrow=Za,Yn.eraAbbr=Qa,Yn.eraYear=$a,Yn.year=Zr,Yn.isLeapYear=gt,Yn.weekYear=li,Yn.isoWeekYear=ui,Yn.quarter=Yn.quarters=Di,Yn.month=ft,Yn.daysInMonth=mt,Yn.week=Yn.weeks=wt,Yn.isoWeek=Yn.isoWeeks=Ft,Yn.weeksInYear=fi,Yn.weeksInWeekYear=mi,Yn.isoWeeksInYear=ci,Yn.isoWeeksInISOWeekYear=di,Yn.date=On,Yn.day=Yn.days=Yt,Yn.weekday=Ht,Yn.isoWeekday=Vt,Yn.dayOfYear=vi,Yn.hour=Yn.hours=hn,Yn.minute=Yn.minutes=Pn,Yn.second=Yn.seconds=Rn,Yn.millisecond=Yn.milliseconds=Bn,Yn.utcOffset=We,Yn.utc=Ue,Yn.local=Ke,Yn.parseZone=je,Yn.hasAlignedHourOffset=ze,Yn.isDST=Je,Yn.isLocal=Ze,Yn.isUtcOffset=Qe,Yn.isUtc=$e,Yn.isUTC=$e,Yn.zoneAbbr=Si,Yn.zoneName=Ti,Yn.dates=y("dates accessor is deprecated. Use date instead.",On),Yn.months=y("months accessor is deprecated. Use month instead",ft),Yn.years=y("years accessor is deprecated. Use year instead",Zr),Yn.zone=y("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Xe),Yn.isDSTShifted=y("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",qe);var Hn=_.prototype;Hn.calendar=b,Hn.longDateFormat=P,Hn.invalidDate=R,Hn.ordinal=k,Hn.preparse=xi,Hn.postformat=xi,Hn.relativeTime=B,Hn.pastFuture=Y,Hn.set=L,Hn.eras=ja,Hn.erasParse=za,Hn.erasConvertYear=Ja,Hn.erasAbbrRegex=ei,Hn.erasNameRegex=ti,Hn.erasNarrowRegex=ai,Hn.months=ht,Hn.monthsShort=lt,Hn.monthsParse=ct,Hn.monthsRegex=pt,Hn.monthsShortRegex=Ct,Hn.week=Mt,Hn.firstDayOfYear=bt,Hn.firstDayOfWeek=_t,Hn.weekdays=Ot,Hn.weekdaysMin=Rt,Hn.weekdaysShort=Pt,Hn.weekdaysParse=Bt,Hn.weekdaysRegex=Gt,Hn.weekdaysShortRegex=Wt,Hn.weekdaysMinRegex=Xt,Hn.isPM=qt,Hn.meridiem=Zt,ae("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===j(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),i.lang=y("moment.lang is deprecated. Use moment.locale instead.",ae),i.langData=y("moment.langData is deprecated. Use moment.localeData instead.",ne);var Vn=Math.abs,Gn=Wi("ms"),Wn=Wi("s"),Xn=Wi("m"),Un=Wi("h"),Kn=Wi("d"),jn=Wi("w"),zn=Wi("M"),Jn=Wi("Q"),qn=Wi("y"),Zn=Ki("milliseconds"),Qn=Ki("seconds"),$n=Ki("minutes"),ts=Ki("hours"),es=Ki("days"),as=Ki("months"),is=Ki("years"),rs=Math.round,ns={ss:44,s:45,m:45,h:22,d:26,w:null,M:11},ss=Math.abs,os=Pe.prototype;
//! moment.js
return os.isValid=Ne,os.abs=Ni,os.add=Pi,os.subtract=Ri,os.as=Vi,os.asMilliseconds=Gn,os.asSeconds=Wn,os.asMinutes=Xn,os.asHours=Un,os.asDays=Kn,os.asWeeks=jn,os.asMonths=zn,os.asQuarters=Jn,os.asYears=qn,os.valueOf=Gi,os._bubble=Bi,os.clone=Xi,os.get=Ui,os.milliseconds=Zn,os.seconds=Qn,os.minutes=$n,os.hours=ts,os.days=es,os.weeks=ji,os.months=as,os.years=is,os.humanize=Qi,os.toISOString=tr,os.toString=tr,os.toJSON=tr,os.locale=Fa,os.localeData=Ea,os.toIsoString=y("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",tr),os.lang=wn,F("X",0,0,"unix"),F("x",0,0,"valueOf"),$("x",Fr),$("X",Nr),it("X",function(t,e,a){a._d=new Date(1e3*parseFloat(t))}),it("x",function(t,e,a){a._d=new Date(j(t))}),i.version="2.29.1",function(t){er=t}(be),i.fn=Yn,i.min=Fe,i.max=Ee,i.now=yn,i.utc=f,i.unix=yi,i.months=bi,i.isDate=u,i.locale=ae,i.invalid=D,i.duration=ta,i.isMoment=S,i.weekdays=Fi,i.parseZone=Ii,i.localeData=ne,i.isDuration=Re,i.monthsShort=wi,i.weekdaysMin=Ai,i.defineLocale=ie,i.updateLocale=re,i.locales=se,i.weekdaysShort=Ei,i.normalizeUnits=V,i.relativeTimeRounding=qi,i.relativeTimeThreshold=Zi,i.calendarFormat=ca,i.prototype=Yn,i.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},i})}).call(e,a(64)(t))},function(t,e,a){"use strict";function i(t){return"[object Array]"===M.call(t)}function r(t){return void 0===t}function n(t){return null!==t&&!r(t)&&null!==t.constructor&&!r(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function s(t){return"[object ArrayBuffer]"===M.call(t)}function o(t){return"undefined"!=typeof FormData&&t instanceof FormData}function h(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer}function l(t){return"string"==typeof t}function u(t){return"number"==typeof t}function c(t){return null!==t&&"object"==typeof t}function d(t){if("[object Object]"!==M.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function f(t){return"[object Date]"===M.call(t)}function m(t){return"[object File]"===M.call(t)}function C(t){return"[object Blob]"===M.call(t)}function p(t){return"[object Function]"===M.call(t)}function D(t){return c(t)&&p(t.pipe)}function v(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams}function g(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}function S(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function T(t,e){if(null!==t&&void 0!==t)if("object"!=typeof t&&(t=[t]),i(t))for(var a=0,r=t.length;a<r;a++)e.call(null,t[a],a,t);else for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.call(null,t[n],n,t)}function y(){function t(t,a){d(e[a])&&d(t)?e[a]=y(e[a],t):d(t)?e[a]=y({},t):i(t)?e[a]=t.slice():e[a]=t}for(var e={},a=0,r=arguments.length;a<r;a++)T(arguments[a],t);return e}function I(t,e,a){return T(e,function(e,i){t[i]=a&&"function"==typeof e?L(e,a):e}),t}function x(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}var L=a(34),M=Object.prototype.toString;t.exports={isArray:i,isArrayBuffer:s,isBuffer:n,isFormData:o,isArrayBufferView:h,isString:l,isNumber:u,isObject:c,isPlainObject:d,isUndefined:r,isDate:f,isFile:m,isBlob:C,isFunction:p,isStream:D,isURLSearchParams:v,isStandardBrowserEnv:S,forEach:T,merge:y,extend:I,trim:g,stripBOM:x}},,,,,,,function(t,e,a){"use strict";function i(t){return m?t:f+t}var r=a(53),n=a.n(r),s=a(23),o=a(28),h=(a.n(o),n.a.create({timeout:12e4,headers:{"Content-Type":"application/json"}}));h.interceptors.response.use(function(t){return t.data},function(t){return console.log("对响应错误做点什么",t),Promise.reject(t)}),h.interceptors.request.use(function(t){return t.url.indexOf("/api/data/sync")>-1?Object(s.b)("token")?t:(Object(o.Message)({message:"请先登录",type:"error"}),Promise.reject("请先登录")):t},function(t){return console.log("对req错误做点什么",t),Promise.reject(t)});var l=function(t,e,a,i){return h.post(t,e).then(function(t){return a(t),t}).catch(function(t){i&&i(t)})},u=function(t,e,a,i){return h.get(t,e).then(function(t){return a(t),t}).catch(function(t){i&&i(t)})},c=function(t,e,a,i){return h.patch(t,e).then(function(t){return a(t),t}).catch(function(t){i&&i(t)})},d=function(t,e,a){return h.delete(t).then(function(t){return e(t),t}).catch(function(t){a&&a(t)})},f="http://192.168.0.118:8712",m=!0,C="http://py-hqchar-api.umydata.com",p={post:l,get:u,patch:c,dele:d,apiHost:i,apiStrategyCreate:i("/api/strategy/create"),apiStrategyOpr:i("/api/strategy/"),apiStrategyList:i("/api/strategy/list"),apiGroupCreate:i("/api/group/create"),apiGroupOpr:i("/api/group/"),apiGroupList:i("/api/group/list"),apiHqchartAccount:i("/api/hqchart/account"),apiHqchartConfig:i("/api/data/path"),apiAboutInfo:i("/api/about/info"),apiDataStatus:i("/api/data/status"),apiDataSync:i("/api/data/sync"),apiDataLoad:i("/api/data/load"),apiRun:i("/api/Run"),apiDayKLine:i("/api/DayKLine"),apiMinuteKLine:i("/api/MinuteKLine"),apiAlgorithmCreate:i("/api/algorithm/create"),apiAlgorithmlist:i("/api/algorithm/list"),apiAlgorithmByIndex:i("/api/algorithm/"),apiAlgorithmGroupList:i("/api/algorithm/group/list"),apiAlgorithmGroupCreate:i("/api/algorithm/group/create"),apiAlgorithmGroupById:i("/api/algorithm/group/"),apiAlgorithmPolicy:i("/api/Policy"),apiLogin:C+"/api/Login",apiGetVerificationCode:C+"/api/GetVerificationCode",apiRegister:C+"/api/Register",apiStockGroupCreate:i("/api/stock/group/create"),apiStockGroup:i("/api/stock/group/"),apiStockGroupList:i("/api/stock/group/list"),apiStockSearch:i("/api/stock/search"),apiStockBlocklist:i("/api/stock/blocklist"),apiPolicyRunById:i("/api/Policy/RunById"),apiPolicyRunAll:i("/api/Policy/RunAll"),apiPolicyRunStatus:i("/api/Policy/RunStatus"),apiStockSymbollist:i("/api/stock/symbollist"),apiStockFinance:i("/api/stock/finance"),apiStockCapital:i("/api/stock/capital")};e.a=p},,,,,,function(t,e,a){(function(t,i){var r;(function(){function n(t,e,a){switch(a.length){case 0:return t.call(e);case 1:return t.call(e,a[0]);case 2:return t.call(e,a[0],a[1]);case 3:return t.call(e,a[0],a[1],a[2])}return t.apply(e,a)}function s(t,e,a,i){for(var r=-1,n=null==t?0:t.length;++r<n;){var s=t[r];e(i,s,a(s),t)}return i}function o(t,e){for(var a=-1,i=null==t?0:t.length;++a<i&&!1!==e(t[a],a,t););return t}function h(t,e){for(var a=null==t?0:t.length;a--&&!1!==e(t[a],a,t););return t}function l(t,e){for(var a=-1,i=null==t?0:t.length;++a<i;)if(!e(t[a],a,t))return!1;return!0}function u(t,e){for(var a=-1,i=null==t?0:t.length,r=0,n=[];++a<i;){var s=t[a];e(s,a,t)&&(n[r++]=s)}return n}function c(t,e){return!!(null==t?0:t.length)&&y(t,e,0)>-1}function d(t,e,a){for(var i=-1,r=null==t?0:t.length;++i<r;)if(a(e,t[i]))return!0;return!1}function f(t,e){for(var a=-1,i=null==t?0:t.length,r=Array(i);++a<i;)r[a]=e(t[a],a,t);return r}function m(t,e){for(var a=-1,i=e.length,r=t.length;++a<i;)t[r+a]=e[a];return t}function C(t,e,a,i){var r=-1,n=null==t?0:t.length;for(i&&n&&(a=t[++r]);++r<n;)a=e(a,t[r],r,t);return a}function p(t,e,a,i){var r=null==t?0:t.length;for(i&&r&&(a=t[--r]);r--;)a=e(a,t[r],r,t);return a}function D(t,e){for(var a=-1,i=null==t?0:t.length;++a<i;)if(e(t[a],a,t))return!0;return!1}function v(t){return t.split("")}function g(t){return t.match(ke)||[]}function S(t,e,a){var i;return a(t,function(t,a,r){if(e(t,a,r))return i=a,!1}),i}function T(t,e,a,i){for(var r=t.length,n=a+(i?1:-1);i?n--:++n<r;)if(e(t[n],n,t))return n;return-1}function y(t,e,a){return e===e?J(t,e,a):T(t,x,a)}function I(t,e,a,i){for(var r=a-1,n=t.length;++r<n;)if(i(t[r],e))return r;return-1}function x(t){return t!==t}function L(t,e){var a=null==t?0:t.length;return a?F(t,e)/a:Nt}function M(t){return function(e){return null==e?at:e[t]}}function _(t){return function(e){return null==t?at:t[e]}}function b(t,e,a,i,r){return r(t,function(t,r,n){a=i?(i=!1,t):e(a,t,r,n)}),a}function w(t,e){var a=t.length;for(t.sort(e);a--;)t[a]=t[a].value;return t}function F(t,e){for(var a,i=-1,r=t.length;++i<r;){var n=e(t[i]);n!==at&&(a=a===at?n:a+n)}return a}function E(t,e){for(var a=-1,i=Array(t);++a<t;)i[a]=e(a);return i}function A(t,e){return f(e,function(e){return[e,t[e]]})}function N(t){return function(e){return t(e)}}function O(t,e){return f(e,function(e){return t[e]})}function P(t,e){return t.has(e)}function R(t,e){for(var a=-1,i=t.length;++a<i&&y(e,t[a],0)>-1;);return a}function k(t,e){for(var a=t.length;a--&&y(e,t[a],0)>-1;);return a}function B(t,e){for(var a=t.length,i=0;a--;)t[a]===e&&++i;return i}function Y(t){return"\\"+xa[t]}function H(t,e){return null==t?at:t[e]}function V(t){return Ca.test(t)}function G(t){return pa.test(t)}function W(t){for(var e,a=[];!(e=t.next()).done;)a.push(e.value);return a}function X(t){var e=-1,a=Array(t.size);return t.forEach(function(t,i){a[++e]=[i,t]}),a}function U(t,e){return function(a){return t(e(a))}}function K(t,e){for(var a=-1,i=t.length,r=0,n=[];++a<i;){var s=t[a];s!==e&&s!==ht||(t[a]=ht,n[r++]=a)}return n}function j(t){var e=-1,a=Array(t.size);return t.forEach(function(t){a[++e]=t}),a}function z(t){var e=-1,a=Array(t.size);return t.forEach(function(t){a[++e]=[t,t]}),a}function J(t,e,a){for(var i=a-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}function q(t,e,a){for(var i=a+1;i--;)if(t[i]===e)return i;return i}function Z(t){return V(t)?$(t):Va(t)}function Q(t){return V(t)?tt(t):v(t)}function $(t){for(var e=fa.lastIndex=0;fa.test(t);)++e;return e}function tt(t){return t.match(fa)||[]}function et(t){return t.match(ma)||[]}var at,it=200,rt="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",nt="Expected a function",st="__lodash_hash_undefined__",ot=500,ht="__lodash_placeholder__",lt=1,ut=2,ct=4,dt=1,ft=2,mt=1,Ct=2,pt=4,Dt=8,vt=16,gt=32,St=64,Tt=128,yt=256,It=512,xt=30,Lt="...",Mt=800,_t=16,bt=1,wt=2,Ft=1/0,Et=9007199254740991,At=1.7976931348623157e308,Nt=NaN,Ot=4294967295,Pt=Ot-1,Rt=Ot>>>1,kt=[["ary",Tt],["bind",mt],["bindKey",Ct],["curry",Dt],["curryRight",vt],["flip",It],["partial",gt],["partialRight",St],["rearg",yt]],Bt="[object Arguments]",Yt="[object Array]",Ht="[object AsyncFunction]",Vt="[object Boolean]",Gt="[object Date]",Wt="[object DOMException]",Xt="[object Error]",Ut="[object Function]",Kt="[object GeneratorFunction]",jt="[object Map]",zt="[object Number]",Jt="[object Null]",qt="[object Object]",Zt="[object Proxy]",Qt="[object RegExp]",$t="[object Set]",te="[object String]",ee="[object Symbol]",ae="[object Undefined]",ie="[object WeakMap]",re="[object WeakSet]",ne="[object ArrayBuffer]",se="[object DataView]",oe="[object Float32Array]",he="[object Float64Array]",le="[object Int8Array]",ue="[object Int16Array]",ce="[object Int32Array]",de="[object Uint8Array]",fe="[object Uint8ClampedArray]",me="[object Uint16Array]",Ce="[object Uint32Array]",pe=/\b__p \+= '';/g,De=/\b(__p \+=) '' \+/g,ve=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ge=/&(?:amp|lt|gt|quot|#39);/g,Se=/[&<>"']/g,Te=RegExp(ge.source),ye=RegExp(Se.source),Ie=/<%-([\s\S]+?)%>/g,xe=/<%([\s\S]+?)%>/g,Le=/<%=([\s\S]+?)%>/g,Me=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_e=/^\w*$/,be=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,we=/[\\^$.*+?()[\]{}|]/g,Fe=RegExp(we.source),Ee=/^\s+|\s+$/g,Ae=/^\s+/,Ne=/\s+$/,Oe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Pe=/\{\n\/\* \[wrapped with (.+)\] \*/,Re=/,? & /,ke=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Be=/\\(\\)?/g,Ye=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,He=/\w*$/,Ve=/^[-+]0x[0-9a-f]+$/i,Ge=/^0b[01]+$/i,We=/^\[object .+?Constructor\]$/,Xe=/^0o[0-7]+$/i,Ue=/^(?:0|[1-9]\d*)$/,Ke=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,je=/($^)/,ze=/['\n\r\u2028\u2029\\]/g,Je="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",qe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ze="["+qe+"]",Qe="["+Je+"]",$e="[a-z\\xdf-\\xf6\\xf8-\\xff]",ta="[^\\ud800-\\udfff"+qe+"\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",ea="\\ud83c[\\udffb-\\udfff]",aa="(?:\\ud83c[\\udde6-\\uddff]){2}",ia="[\\ud800-\\udbff][\\udc00-\\udfff]",ra="[A-Z\\xc0-\\xd6\\xd8-\\xde]",na="(?:"+$e+"|"+ta+")",sa="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",oa="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",aa,ia].join("|")+")[\\ufe0e\\ufe0f]?"+sa+")*",ha="[\\ufe0e\\ufe0f]?"+sa+oa,la="(?:"+["[\\u2700-\\u27bf]",aa,ia].join("|")+")"+ha,ua="(?:"+["[^\\ud800-\\udfff]"+Qe+"?",Qe,aa,ia,"[\\ud800-\\udfff]"].join("|")+")",ca=RegExp("['’]","g"),da=RegExp(Qe,"g"),fa=RegExp(ea+"(?="+ea+")|"+ua+ha,"g"),ma=RegExp([ra+"?"+$e+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[Ze,ra,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[Ze,ra+na,"$"].join("|")+")",ra+"?"+na+"+(?:['’](?:d|ll|m|re|s|t|ve))?",ra+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",la].join("|"),"g"),Ca=RegExp("[\\u200d\\ud800-\\udfff"+Je+"\\ufe0e\\ufe0f]"),pa=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Da=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],va=-1,ga={};ga[oe]=ga[he]=ga[le]=ga[ue]=ga[ce]=ga[de]=ga[fe]=ga[me]=ga[Ce]=!0,ga[Bt]=ga[Yt]=ga[ne]=ga[Vt]=ga[se]=ga[Gt]=ga[Xt]=ga[Ut]=ga[jt]=ga[zt]=ga[qt]=ga[Qt]=ga[$t]=ga[te]=ga[ie]=!1;var Sa={};Sa[Bt]=Sa[Yt]=Sa[ne]=Sa[se]=Sa[Vt]=Sa[Gt]=Sa[oe]=Sa[he]=Sa[le]=Sa[ue]=Sa[ce]=Sa[jt]=Sa[zt]=Sa[qt]=Sa[Qt]=Sa[$t]=Sa[te]=Sa[ee]=Sa[de]=Sa[fe]=Sa[me]=Sa[Ce]=!0,Sa[Xt]=Sa[Ut]=Sa[ie]=!1;var Ta={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},ya={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ia={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},xa={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},La=parseFloat,Ma=parseInt,_a="object"==typeof t&&t&&t.Object===Object&&t,ba="object"==typeof self&&self&&self.Object===Object&&self,wa=_a||ba||Function("return this")(),Fa="object"==typeof e&&e&&!e.nodeType&&e,Ea=Fa&&"object"==typeof i&&i&&!i.nodeType&&i,Aa=Ea&&Ea.exports===Fa,Na=Aa&&_a.process,Oa=function(){try{var t=Ea&&Ea.require&&Ea.require("util").types;return t||Na&&Na.binding&&Na.binding("util")}catch(t){}}(),Pa=Oa&&Oa.isArrayBuffer,Ra=Oa&&Oa.isDate,ka=Oa&&Oa.isMap,Ba=Oa&&Oa.isRegExp,Ya=Oa&&Oa.isSet,Ha=Oa&&Oa.isTypedArray,Va=M("length"),Ga=_(Ta),Wa=_(ya),Xa=_(Ia),Ua=function t(e){function a(t){if(eh(t)&&!dd(t)&&!(t instanceof v)){if(t instanceof r)return t;if(du.call(t,"__wrapped__"))return Zn(t)}return new r(t)}function i(){}function r(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=at}function v(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ot,this.__views__=[]}function _(){var t=new v(this.__wrapped__);return t.__actions__=Er(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Er(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Er(this.__views__),t}function J(){if(this.__filtered__){var t=new v(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function $(){var t=this.__wrapped__.value(),e=this.__dir__,a=dd(t),i=e<0,r=a?t.length:0,n=Tn(0,r,this.__views__),s=n.start,o=n.end,h=o-s,l=i?o:s-1,u=this.__iteratees__,c=u.length,d=0,f=Gu(h,this.__takeCount__);if(!a||!i&&r==h&&f==h)return mr(t,this.__actions__);var m=[];t:for(;h--&&d<f;){l+=e;for(var C=-1,p=t[l];++C<c;){var D=u[C],v=D.iteratee,g=D.type,S=v(p);if(g==wt)p=S;else if(!S){if(g==bt)continue t;break t}}m[d++]=p}return m}function tt(t){var e=-1,a=null==t?0:t.length;for(this.clear();++e<a;){var i=t[e];this.set(i[0],i[1])}}function ke(){this.__data__=Qu?Qu(null):{},this.size=0}function Je(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function qe(t){var e=this.__data__;if(Qu){var a=e[t];return a===st?at:a}return du.call(e,t)?e[t]:at}function Ze(t){var e=this.__data__;return Qu?e[t]!==at:du.call(e,t)}function Qe(t,e){var a=this.__data__;return this.size+=this.has(t)?0:1,a[t]=Qu&&e===at?st:e,this}function $e(t){var e=-1,a=null==t?0:t.length;for(this.clear();++e<a;){var i=t[e];this.set(i[0],i[1])}}function ta(){this.__data__=[],this.size=0}function ea(t){var e=this.__data__,a=Ka(e,t);return!(a<0)&&(a==e.length-1?e.pop():Mu.call(e,a,1),--this.size,!0)}function aa(t){var e=this.__data__,a=Ka(e,t);return a<0?at:e[a][1]}function ia(t){return Ka(this.__data__,t)>-1}function ra(t,e){var a=this.__data__,i=Ka(a,t);return i<0?(++this.size,a.push([t,e])):a[i][1]=e,this}function na(t){var e=-1,a=null==t?0:t.length;for(this.clear();++e<a;){var i=t[e];this.set(i[0],i[1])}}function sa(){this.size=0,this.__data__={hash:new tt,map:new(zu||$e),string:new tt}}function oa(t){var e=Dn(this,t).delete(t);return this.size-=e?1:0,e}function ha(t){return Dn(this,t).get(t)}function la(t){return Dn(this,t).has(t)}function ua(t,e){var a=Dn(this,t),i=a.size;return a.set(t,e),this.size+=a.size==i?0:1,this}function fa(t){var e=-1,a=null==t?0:t.length;for(this.__data__=new na;++e<a;)this.add(t[e])}function ma(t){return this.__data__.set(t,st),this}function Ca(t){return this.__data__.has(t)}function pa(t){var e=this.__data__=new $e(t);this.size=e.size}function Ta(){this.__data__=new $e,this.size=0}function ya(t){var e=this.__data__,a=e.delete(t);return this.size=e.size,a}function Ia(t){return this.__data__.get(t)}function xa(t){return this.__data__.has(t)}function _a(t,e){var a=this.__data__;if(a instanceof $e){var i=a.__data__;if(!zu||i.length<it-1)return i.push([t,e]),this.size=++a.size,this;a=this.__data__=new na(i)}return a.set(t,e),this.size=a.size,this}function ba(t,e){var a=dd(t),i=!a&&cd(t),r=!a&&!i&&md(t),n=!a&&!i&&!r&&gd(t),s=a||i||r||n,o=s?E(t.length,nu):[],h=o.length;for(var l in t)!e&&!du.call(t,l)||s&&("length"==l||r&&("offset"==l||"parent"==l)||n&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||wn(l,h))||o.push(l);return o}function Fa(t){var e=t.length;return e?t[Ji(0,e-1)]:at}function Ea(t,e){return jn(Er(t),Qa(e,0,t.length))}function Na(t){return jn(Er(t))}function Oa(t,e,a){(a===at||Vo(t[e],a))&&(a!==at||e in t)||qa(t,e,a)}function Va(t,e,a){var i=t[e];du.call(t,e)&&Vo(i,a)&&(a!==at||e in t)||qa(t,e,a)}function Ka(t,e){for(var a=t.length;a--;)if(Vo(t[a][0],e))return a;return-1}function ja(t,e,a,i){return uc(t,function(t,r,n){e(i,t,a(t),n)}),i}function za(t,e){return t&&Ar(e,Rh(e),t)}function Ja(t,e){return t&&Ar(e,kh(e),t)}function qa(t,e,a){"__proto__"==e&&Fu?Fu(t,e,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[e]=a}function Za(t,e){for(var a=-1,i=e.length,r=Ql(i),n=null==t;++a<i;)r[a]=n?at:Nh(t,e[a]);return r}function Qa(t,e,a){return t===t&&(a!==at&&(t=t<=a?t:a),e!==at&&(t=t>=e?t:e)),t}function $a(t,e,a,i,r,n){var s,h=e&lt,l=e&ut,u=e&ct;if(a&&(s=r?a(t,i,r,n):a(t)),s!==at)return s;if(!th(t))return t;var c=dd(t);if(c){if(s=xn(t),!h)return Er(t,s)}else{var d=yc(t),f=d==Ut||d==Kt;if(md(t))return Tr(t,h);if(d==qt||d==Bt||f&&!r){if(s=l||f?{}:Ln(t),!h)return l?Or(t,Ja(s,t)):Nr(t,za(s,t))}else{if(!Sa[d])return r?t:{};s=Mn(t,d,h)}}n||(n=new pa);var m=n.get(t);if(m)return m;n.set(t,s),vd(t)?t.forEach(function(i){s.add($a(i,e,a,i,t,n))}):pd(t)&&t.forEach(function(i,r){s.set(r,$a(i,e,a,r,t,n))});var C=u?l?fn:dn:l?kh:Rh,p=c?at:C(t);return o(p||t,function(i,r){p&&(r=i,i=t[r]),Va(s,r,$a(i,e,a,r,t,n))}),s}function ti(t){var e=Rh(t);return function(a){return ei(a,t,e)}}function ei(t,e,a){var i=a.length;if(null==t)return!i;for(t=iu(t);i--;){var r=a[i],n=e[r],s=t[r];if(s===at&&!(r in t)||!n(s))return!1}return!0}function ai(t,e,a){if("function"!=typeof t)throw new su(nt);return Lc(function(){t.apply(at,a)},e)}function ii(t,e,a,i){var r=-1,n=c,s=!0,o=t.length,h=[],l=e.length;if(!o)return h;a&&(e=f(e,N(a))),i?(n=d,s=!1):e.length>=it&&(n=P,s=!1,e=new fa(e));t:for(;++r<o;){var u=t[r],m=null==a?u:a(u);if(u=i||0!==u?u:0,s&&m===m){for(var C=l;C--;)if(e[C]===m)continue t;h.push(u)}else n(e,m,i)||h.push(u)}return h}function ri(t,e){var a=!0;return uc(t,function(t,i,r){return a=!!e(t,i,r)}),a}function ni(t,e,a){for(var i=-1,r=t.length;++i<r;){var n=t[i],s=e(n);if(null!=s&&(o===at?s===s&&!dh(s):a(s,o)))var o=s,h=n}return h}function si(t,e,a,i){var r=t.length;for(a=vh(a),a<0&&(a=-a>r?0:r+a),i=i===at||i>r?r:vh(i),i<0&&(i+=r),i=a>i?0:gh(i);a<i;)t[a++]=e;return t}function oi(t,e){var a=[];return uc(t,function(t,i,r){e(t,i,r)&&a.push(t)}),a}function hi(t,e,a,i,r){var n=-1,s=t.length;for(a||(a=bn),r||(r=[]);++n<s;){var o=t[n];e>0&&a(o)?e>1?hi(o,e-1,a,i,r):m(r,o):i||(r[r.length]=o)}return r}function li(t,e){return t&&dc(t,e,Rh)}function ui(t,e){return t&&fc(t,e,Rh)}function ci(t,e){return u(e,function(e){return Zo(t[e])})}function di(t,e){e=gr(e,t);for(var a=0,i=e.length;null!=t&&a<i;)t=t[zn(e[a++])];return a&&a==i?t:at}function fi(t,e,a){var i=e(t);return dd(t)?i:m(i,a(t))}function mi(t){return null==t?t===at?ae:Jt:wu&&wu in iu(t)?Sn(t):Hn(t)}function Ci(t,e){return t>e}function pi(t,e){return null!=t&&du.call(t,e)}function Di(t,e){return null!=t&&e in iu(t)}function vi(t,e,a){return t>=Gu(e,a)&&t<Vu(e,a)}function gi(t,e,a){for(var i=a?d:c,r=t[0].length,n=t.length,s=n,o=Ql(n),h=1/0,l=[];s--;){var u=t[s];s&&e&&(u=f(u,N(e))),h=Gu(u.length,h),o[s]=!a&&(e||r>=120&&u.length>=120)?new fa(s&&u):at}u=t[0];var m=-1,C=o[0];t:for(;++m<r&&l.length<h;){var p=u[m],D=e?e(p):p;if(p=a||0!==p?p:0,!(C?P(C,D):i(l,D,a))){for(s=n;--s;){var v=o[s];if(!(v?P(v,D):i(t[s],D,a)))continue t}C&&C.push(D),l.push(p)}}return l}function Si(t,e,a,i){return li(t,function(t,r,n){e(i,a(t),r,n)}),i}function Ti(t,e,a){e=gr(e,t),t=Gn(t,e);var i=null==t?t:t[zn(ps(e))];return null==i?at:n(i,t,a)}function yi(t){return eh(t)&&mi(t)==Bt}function Ii(t){return eh(t)&&mi(t)==ne}function xi(t){return eh(t)&&mi(t)==Gt}function Li(t,e,a,i,r){return t===e||(null==t||null==e||!eh(t)&&!eh(e)?t!==t&&e!==e:Mi(t,e,a,i,Li,r))}function Mi(t,e,a,i,r,n){var s=dd(t),o=dd(e),h=s?Yt:yc(t),l=o?Yt:yc(e);h=h==Bt?qt:h,l=l==Bt?qt:l;var u=h==qt,c=l==qt,d=h==l;if(d&&md(t)){if(!md(e))return!1;s=!0,u=!1}if(d&&!u)return n||(n=new pa),s||gd(t)?hn(t,e,a,i,r,n):ln(t,e,h,a,i,r,n);if(!(a&dt)){var f=u&&du.call(t,"__wrapped__"),m=c&&du.call(e,"__wrapped__");if(f||m){var C=f?t.value():t,p=m?e.value():e;return n||(n=new pa),r(C,p,a,i,n)}}return!!d&&(n||(n=new pa),un(t,e,a,i,r,n))}function _i(t){return eh(t)&&yc(t)==jt}function bi(t,e,a,i){var r=a.length,n=r,s=!i;if(null==t)return!n;for(t=iu(t);r--;){var o=a[r];if(s&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++r<n;){o=a[r];var h=o[0],l=t[h],u=o[1];if(s&&o[2]){if(l===at&&!(h in t))return!1}else{var c=new pa;if(i)var d=i(l,u,h,t,e,c);if(!(d===at?Li(u,l,dt|ft,i,c):d))return!1}}return!0}function wi(t){return!(!th(t)||On(t))&&(Zo(t)?vu:We).test(Jn(t))}function Fi(t){return eh(t)&&mi(t)==Qt}function Ei(t){return eh(t)&&yc(t)==$t}function Ai(t){return eh(t)&&$o(t.length)&&!!ga[mi(t)]}function Ni(t){return"function"==typeof t?t:null==t?Ml:"object"==typeof t?dd(t)?Yi(t[0],t[1]):Bi(t):Ol(t)}function Oi(t){if(!Pn(t))return Hu(t);var e=[];for(var a in iu(t))du.call(t,a)&&"constructor"!=a&&e.push(a);return e}function Pi(t){if(!th(t))return Yn(t);var e=Pn(t),a=[];for(var i in t)("constructor"!=i||!e&&du.call(t,i))&&a.push(i);return a}function Ri(t,e){return t<e}function ki(t,e){var a=-1,i=Go(t)?Ql(t.length):[];return uc(t,function(t,r,n){i[++a]=e(t,r,n)}),i}function Bi(t){var e=vn(t);return 1==e.length&&e[0][2]?kn(e[0][0],e[0][1]):function(a){return a===t||bi(a,t,e)}}function Yi(t,e){return En(t)&&Rn(e)?kn(zn(t),e):function(a){var i=Nh(a,t);return i===at&&i===e?Ph(a,t):Li(e,i,dt|ft)}}function Hi(t,e,a,i,r){t!==e&&dc(e,function(n,s){if(r||(r=new pa),th(n))Vi(t,e,s,a,Hi,i,r);else{var o=i?i(Xn(t,s),n,s+"",t,e,r):at;o===at&&(o=n),Oa(t,s,o)}},kh)}function Vi(t,e,a,i,r,n,s){var o=Xn(t,a),h=Xn(e,a),l=s.get(h);if(l)return void Oa(t,a,l);var u=n?n(o,h,a+"",t,e,s):at,c=u===at;if(c){var d=dd(h),f=!d&&md(h),m=!d&&!f&&gd(h);u=h,d||f||m?dd(o)?u=o:Wo(o)?u=Er(o):f?(c=!1,u=Tr(h,!0)):m?(c=!1,u=Mr(h,!0)):u=[]:lh(h)||cd(h)?(u=o,cd(o)?u=Th(o):th(o)&&!Zo(o)||(u=Ln(h))):c=!1}c&&(s.set(h,u),r(u,h,i,n,s),s.delete(h)),Oa(t,a,u)}function Gi(t,e){var a=t.length;if(a)return e+=e<0?a:0,wn(e,a)?t[e]:at}function Wi(t,e,a){e=e.length?f(e,function(t){return dd(t)?function(e){return di(e,1===t.length?t[0]:t)}:t}):[Ml];var i=-1;return e=f(e,N(pn())),w(ki(t,function(t,a,r){return{criteria:f(e,function(e){return e(t)}),index:++i,value:t}}),function(t,e){return br(t,e,a)})}function Xi(t,e){return Ui(t,e,function(e,a){return Ph(t,a)})}function Ui(t,e,a){for(var i=-1,r=e.length,n={};++i<r;){var s=e[i],o=di(t,s);a(o,s)&&er(n,gr(s,t),o)}return n}function Ki(t){return function(e){return di(e,t)}}function ji(t,e,a,i){var r=i?I:y,n=-1,s=e.length,o=t;for(t===e&&(e=Er(e)),a&&(o=f(t,N(a)));++n<s;)for(var h=0,l=e[n],u=a?a(l):l;(h=r(o,u,h,i))>-1;)o!==t&&Mu.call(o,h,1),Mu.call(t,h,1);return t}function zi(t,e){for(var a=t?e.length:0,i=a-1;a--;){var r=e[a];if(a==i||r!==n){var n=r;wn(r)?Mu.call(t,r,1):cr(t,r)}}return t}function Ji(t,e){return t+Pu(Uu()*(e-t+1))}function qi(t,e,a,i){for(var r=-1,n=Vu(Ou((e-t)/(a||1)),0),s=Ql(n);n--;)s[i?n:++r]=t,t+=a;return s}function Zi(t,e){var a="";if(!t||e<1||e>Et)return a;do{e%2&&(a+=t),(e=Pu(e/2))&&(t+=t)}while(e);return a}function Qi(t,e){return Mc(Vn(t,e,Ml),t+"")}function $i(t){return Fa(Jh(t))}function tr(t,e){var a=Jh(t);return jn(a,Qa(e,0,a.length))}function er(t,e,a,i){if(!th(t))return t;e=gr(e,t);for(var r=-1,n=e.length,s=n-1,o=t;null!=o&&++r<n;){var h=zn(e[r]),l=a;if("__proto__"===h||"constructor"===h||"prototype"===h)return t;if(r!=s){var u=o[h];l=i?i(u,h,o):at,l===at&&(l=th(u)?u:wn(e[r+1])?[]:{})}Va(o,h,l),o=o[h]}return t}function ar(t){return jn(Jh(t))}function ir(t,e,a){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),a=a>r?r:a,a<0&&(a+=r),r=e>a?0:a-e>>>0,e>>>=0;for(var n=Ql(r);++i<r;)n[i]=t[i+e];return n}function rr(t,e){var a;return uc(t,function(t,i,r){return!(a=e(t,i,r))}),!!a}function nr(t,e,a){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e===e&&r<=Rt){for(;i<r;){var n=i+r>>>1,s=t[n];null!==s&&!dh(s)&&(a?s<=e:s<e)?i=n+1:r=n}return r}return sr(t,e,Ml,a)}function sr(t,e,a,i){var r=0,n=null==t?0:t.length;if(0===n)return 0;e=a(e);for(var s=e!==e,o=null===e,h=dh(e),l=e===at;r<n;){var u=Pu((r+n)/2),c=a(t[u]),d=c!==at,f=null===c,m=c===c,C=dh(c);if(s)var p=i||m;else p=l?m&&(i||d):o?m&&d&&(i||!f):h?m&&d&&!f&&(i||!C):!f&&!C&&(i?c<=e:c<e);p?r=u+1:n=u}return Gu(n,Pt)}function or(t,e){for(var a=-1,i=t.length,r=0,n=[];++a<i;){var s=t[a],o=e?e(s):s;if(!a||!Vo(o,h)){var h=o;n[r++]=0===s?0:s}}return n}function hr(t){return"number"==typeof t?t:dh(t)?Nt:+t}function lr(t){if("string"==typeof t)return t;if(dd(t))return f(t,lr)+"";if(dh(t))return hc?hc.call(t):"";var e=t+"";return"0"==e&&1/t==-Ft?"-0":e}function ur(t,e,a){var i=-1,r=c,n=t.length,s=!0,o=[],h=o;if(a)s=!1,r=d;else if(n>=it){var l=e?null:vc(t);if(l)return j(l);s=!1,r=P,h=new fa}else h=e?[]:o;t:for(;++i<n;){var u=t[i],f=e?e(u):u;if(u=a||0!==u?u:0,s&&f===f){for(var m=h.length;m--;)if(h[m]===f)continue t;e&&h.push(f),o.push(u)}else r(h,f,a)||(h!==o&&h.push(f),o.push(u))}return o}function cr(t,e){return e=gr(e,t),null==(t=Gn(t,e))||delete t[zn(ps(e))]}function dr(t,e,a,i){return er(t,e,a(di(t,e)),i)}function fr(t,e,a,i){for(var r=t.length,n=i?r:-1;(i?n--:++n<r)&&e(t[n],n,t););return a?ir(t,i?0:n,i?n+1:r):ir(t,i?n+1:0,i?r:n)}function mr(t,e){var a=t;return a instanceof v&&(a=a.value()),C(e,function(t,e){return e.func.apply(e.thisArg,m([t],e.args))},a)}function Cr(t,e,a){var i=t.length;if(i<2)return i?ur(t[0]):[];for(var r=-1,n=Ql(i);++r<i;)for(var s=t[r],o=-1;++o<i;)o!=r&&(n[r]=ii(n[r]||s,t[o],e,a));return ur(hi(n,1),e,a)}function pr(t,e,a){for(var i=-1,r=t.length,n=e.length,s={};++i<r;){var o=i<n?e[i]:at;a(s,t[i],o)}return s}function Dr(t){return Wo(t)?t:[]}function vr(t){return"function"==typeof t?t:Ml}function gr(t,e){return dd(t)?t:En(t,e)?[t]:_c(Ih(t))}function Sr(t,e,a){var i=t.length;return a=a===at?i:a,!e&&a>=i?t:ir(t,e,a)}function Tr(t,e){if(e)return t.slice();var a=t.length,i=yu?yu(a):new t.constructor(a);return t.copy(i),i}function yr(t){var e=new t.constructor(t.byteLength);return new Tu(e).set(new Tu(t)),e}function Ir(t,e){var a=e?yr(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.byteLength)}function xr(t){var e=new t.constructor(t.source,He.exec(t));return e.lastIndex=t.lastIndex,e}function Lr(t){return oc?iu(oc.call(t)):{}}function Mr(t,e){var a=e?yr(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.length)}function _r(t,e){if(t!==e){var a=t!==at,i=null===t,r=t===t,n=dh(t),s=e!==at,o=null===e,h=e===e,l=dh(e);if(!o&&!l&&!n&&t>e||n&&s&&h&&!o&&!l||i&&s&&h||!a&&h||!r)return 1;if(!i&&!n&&!l&&t<e||l&&a&&r&&!i&&!n||o&&a&&r||!s&&r||!h)return-1}return 0}function br(t,e,a){for(var i=-1,r=t.criteria,n=e.criteria,s=r.length,o=a.length;++i<s;){var h=_r(r[i],n[i]);if(h){if(i>=o)return h;return h*("desc"==a[i]?-1:1)}}return t.index-e.index}function wr(t,e,a,i){for(var r=-1,n=t.length,s=a.length,o=-1,h=e.length,l=Vu(n-s,0),u=Ql(h+l),c=!i;++o<h;)u[o]=e[o];for(;++r<s;)(c||r<n)&&(u[a[r]]=t[r]);for(;l--;)u[o++]=t[r++];return u}function Fr(t,e,a,i){for(var r=-1,n=t.length,s=-1,o=a.length,h=-1,l=e.length,u=Vu(n-o,0),c=Ql(u+l),d=!i;++r<u;)c[r]=t[r];for(var f=r;++h<l;)c[f+h]=e[h];for(;++s<o;)(d||r<n)&&(c[f+a[s]]=t[r++]);return c}function Er(t,e){var a=-1,i=t.length;for(e||(e=Ql(i));++a<i;)e[a]=t[a];return e}function Ar(t,e,a,i){var r=!a;a||(a={});for(var n=-1,s=e.length;++n<s;){var o=e[n],h=i?i(a[o],t[o],o,a,t):at;h===at&&(h=t[o]),r?qa(a,o,h):Va(a,o,h)}return a}function Nr(t,e){return Ar(t,Sc(t),e)}function Or(t,e){return Ar(t,Tc(t),e)}function Pr(t,e){return function(a,i){var r=dd(a)?s:ja,n=e?e():{};return r(a,t,pn(i,2),n)}}function Rr(t){return Qi(function(e,a){var i=-1,r=a.length,n=r>1?a[r-1]:at,s=r>2?a[2]:at;for(n=t.length>3&&"function"==typeof n?(r--,n):at,s&&Fn(a[0],a[1],s)&&(n=r<3?at:n,r=1),e=iu(e);++i<r;){var o=a[i];o&&t(e,o,i,n)}return e})}function kr(t,e){return function(a,i){if(null==a)return a;if(!Go(a))return t(a,i);for(var r=a.length,n=e?r:-1,s=iu(a);(e?n--:++n<r)&&!1!==i(s[n],n,s););return a}}function Br(t){return function(e,a,i){for(var r=-1,n=iu(e),s=i(e),o=s.length;o--;){var h=s[t?o:++r];if(!1===a(n[h],h,n))break}return e}}function Yr(t,e,a){function i(){return(this&&this!==wa&&this instanceof i?n:t).apply(r?a:this,arguments)}var r=e&mt,n=Gr(t);return i}function Hr(t){return function(e){e=Ih(e);var a=V(e)?Q(e):at,i=a?a[0]:e.charAt(0),r=a?Sr(a,1).join(""):e.slice(1);return i[t]()+r}}function Vr(t){return function(e){return C(Tl(el(e).replace(ca,"")),t,"")}}function Gr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var a=lc(t.prototype),i=t.apply(a,e);return th(i)?i:a}}function Wr(t,e,a){function i(){for(var s=arguments.length,o=Ql(s),h=s,l=Cn(i);h--;)o[h]=arguments[h];var u=s<3&&o[0]!==l&&o[s-1]!==l?[]:K(o,l);return(s-=u.length)<a?tn(t,e,Kr,i.placeholder,at,o,u,at,at,a-s):n(this&&this!==wa&&this instanceof i?r:t,this,o)}var r=Gr(t);return i}function Xr(t){return function(e,a,i){var r=iu(e);if(!Go(e)){var n=pn(a,3);e=Rh(e),a=function(t){return n(r[t],t,r)}}var s=t(e,a,i);return s>-1?r[n?e[s]:s]:at}}function Ur(t){return cn(function(e){var a=e.length,i=a,n=r.prototype.thru;for(t&&e.reverse();i--;){var s=e[i];if("function"!=typeof s)throw new su(nt);if(n&&!o&&"wrapper"==mn(s))var o=new r([],!0)}for(i=o?i:a;++i<a;){s=e[i];var h=mn(s),l="wrapper"==h?gc(s):at;o=l&&Nn(l[0])&&l[1]==(Tt|Dt|gt|yt)&&!l[4].length&&1==l[9]?o[mn(l[0])].apply(o,l[3]):1==s.length&&Nn(s)?o[h]():o.thru(s)}return function(){var t=arguments,i=t[0];if(o&&1==t.length&&dd(i))return o.plant(i).value();for(var r=0,n=a?e[r].apply(this,t):i;++r<a;)n=e[r].call(this,n);return n}})}function Kr(t,e,a,i,r,n,s,o,h,l){function u(){for(var D=arguments.length,v=Ql(D),g=D;g--;)v[g]=arguments[g];if(m)var S=Cn(u),T=B(v,S);if(i&&(v=wr(v,i,r,m)),n&&(v=Fr(v,n,s,m)),D-=T,m&&D<l){var y=K(v,S);return tn(t,e,Kr,u.placeholder,a,v,y,o,h,l-D)}var I=d?a:this,x=f?I[t]:t;return D=v.length,o?v=Wn(v,o):C&&D>1&&v.reverse(),c&&h<D&&(v.length=h),this&&this!==wa&&this instanceof u&&(x=p||Gr(x)),x.apply(I,v)}var c=e&Tt,d=e&mt,f=e&Ct,m=e&(Dt|vt),C=e&It,p=f?at:Gr(t);return u}function jr(t,e){return function(a,i){return Si(a,t,e(i),{})}}function zr(t,e){return function(a,i){var r;if(a===at&&i===at)return e;if(a!==at&&(r=a),i!==at){if(r===at)return i;"string"==typeof a||"string"==typeof i?(a=lr(a),i=lr(i)):(a=hr(a),i=hr(i)),r=t(a,i)}return r}}function Jr(t){return cn(function(e){return e=f(e,N(pn())),Qi(function(a){var i=this;return t(e,function(t){return n(t,i,a)})})})}function qr(t,e){e=e===at?" ":lr(e);var a=e.length;if(a<2)return a?Zi(e,t):e;var i=Zi(e,Ou(t/Z(e)));return V(e)?Sr(Q(i),0,t).join(""):i.slice(0,t)}function Zr(t,e,a,i){function r(){for(var e=-1,h=arguments.length,l=-1,u=i.length,c=Ql(u+h),d=this&&this!==wa&&this instanceof r?o:t;++l<u;)c[l]=i[l];for(;h--;)c[l++]=arguments[++e];return n(d,s?a:this,c)}var s=e&mt,o=Gr(t);return r}function Qr(t){return function(e,a,i){return i&&"number"!=typeof i&&Fn(e,a,i)&&(a=i=at),e=Dh(e),a===at?(a=e,e=0):a=Dh(a),i=i===at?e<a?1:-1:Dh(i),qi(e,a,i,t)}}function $r(t){return function(e,a){return"string"==typeof e&&"string"==typeof a||(e=Sh(e),a=Sh(a)),t(e,a)}}function tn(t,e,a,i,r,n,s,o,h,l){var u=e&Dt,c=u?s:at,d=u?at:s,f=u?n:at,m=u?at:n;e|=u?gt:St,(e&=~(u?St:gt))&pt||(e&=~(mt|Ct));var C=[t,e,r,f,c,m,d,o,h,l],p=a.apply(at,C);return Nn(t)&&xc(p,C),p.placeholder=i,Un(p,t,e)}function en(t){var e=au[t];return function(t,a){if(t=Sh(t),(a=null==a?0:Gu(vh(a),292))&&Bu(t)){var i=(Ih(t)+"e").split("e");return i=(Ih(e(i[0]+"e"+(+i[1]+a)))+"e").split("e"),+(i[0]+"e"+(+i[1]-a))}return e(t)}}function an(t){return function(e){var a=yc(e);return a==jt?X(e):a==$t?z(e):A(e,t(e))}}function rn(t,e,a,i,r,n,s,o){var h=e&Ct;if(!h&&"function"!=typeof t)throw new su(nt);var l=i?i.length:0;if(l||(e&=~(gt|St),i=r=at),s=s===at?s:Vu(vh(s),0),o=o===at?o:vh(o),l-=r?r.length:0,e&St){var u=i,c=r;i=r=at}var d=h?at:gc(t),f=[t,e,a,i,r,u,c,n,s,o];if(d&&Bn(f,d),t=f[0],e=f[1],a=f[2],i=f[3],r=f[4],o=f[9]=f[9]===at?h?0:t.length:Vu(f[9]-l,0),!o&&e&(Dt|vt)&&(e&=~(Dt|vt)),e&&e!=mt)m=e==Dt||e==vt?Wr(t,e,o):e!=gt&&e!=(mt|gt)||r.length?Kr.apply(at,f):Zr(t,e,a,i);else var m=Yr(t,e,a);return Un((d?mc:xc)(m,f),t,e)}function nn(t,e,a,i){return t===at||Vo(t,lu[a])&&!du.call(i,a)?e:t}function sn(t,e,a,i,r,n){return th(t)&&th(e)&&(n.set(e,t),Hi(t,e,at,sn,n),n.delete(e)),t}function on(t){return lh(t)?at:t}function hn(t,e,a,i,r,n){var s=a&dt,o=t.length,h=e.length;if(o!=h&&!(s&&h>o))return!1;var l=n.get(t),u=n.get(e);if(l&&u)return l==e&&u==t;var c=-1,d=!0,f=a&ft?new fa:at;for(n.set(t,e),n.set(e,t);++c<o;){var m=t[c],C=e[c];if(i)var p=s?i(C,m,c,e,t,n):i(m,C,c,t,e,n);if(p!==at){if(p)continue;d=!1;break}if(f){if(!D(e,function(t,e){if(!P(f,e)&&(m===t||r(m,t,a,i,n)))return f.push(e)})){d=!1;break}}else if(m!==C&&!r(m,C,a,i,n)){d=!1;break}}return n.delete(t),n.delete(e),d}function ln(t,e,a,i,r,n,s){switch(a){case se:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ne:return!(t.byteLength!=e.byteLength||!n(new Tu(t),new Tu(e)));case Vt:case Gt:case zt:return Vo(+t,+e);case Xt:return t.name==e.name&&t.message==e.message;case Qt:case te:return t==e+"";case jt:var o=X;case $t:var h=i&dt;if(o||(o=j),t.size!=e.size&&!h)return!1;var l=s.get(t);if(l)return l==e;i|=ft,s.set(t,e);var u=hn(o(t),o(e),i,r,n,s);return s.delete(t),u;case ee:if(oc)return oc.call(t)==oc.call(e)}return!1}function un(t,e,a,i,r,n){var s=a&dt,o=dn(t),h=o.length;if(h!=dn(e).length&&!s)return!1;for(var l=h;l--;){var u=o[l];if(!(s?u in e:du.call(e,u)))return!1}var c=n.get(t),d=n.get(e);if(c&&d)return c==e&&d==t;var f=!0;n.set(t,e),n.set(e,t);for(var m=s;++l<h;){u=o[l];var C=t[u],p=e[u];if(i)var D=s?i(p,C,u,e,t,n):i(C,p,u,t,e,n);if(!(D===at?C===p||r(C,p,a,i,n):D)){f=!1;break}m||(m="constructor"==u)}if(f&&!m){var v=t.constructor,g=e.constructor;v!=g&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof g&&g instanceof g)&&(f=!1)}return n.delete(t),n.delete(e),f}function cn(t){return Mc(Vn(t,at,hs),t+"")}function dn(t){return fi(t,Rh,Sc)}function fn(t){return fi(t,kh,Tc)}function mn(t){for(var e=t.name+"",a=tc[e],i=du.call(tc,e)?a.length:0;i--;){var r=a[i],n=r.func;if(null==n||n==t)return r.name}return e}function Cn(t){return(du.call(a,"placeholder")?a:t).placeholder}function pn(){var t=a.iteratee||_l;return t=t===_l?Ni:t,arguments.length?t(arguments[0],arguments[1]):t}function Dn(t,e){var a=t.__data__;return An(e)?a["string"==typeof e?"string":"hash"]:a.map}function vn(t){for(var e=Rh(t),a=e.length;a--;){var i=e[a],r=t[i];e[a]=[i,r,Rn(r)]}return e}function gn(t,e){var a=H(t,e);return wi(a)?a:at}function Sn(t){var e=du.call(t,wu),a=t[wu];try{t[wu]=at;var i=!0}catch(t){}var r=Cu.call(t);return i&&(e?t[wu]=a:delete t[wu]),r}function Tn(t,e,a){for(var i=-1,r=a.length;++i<r;){var n=a[i],s=n.size;switch(n.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=Gu(e,t+s);break;case"takeRight":t=Vu(t,e-s)}}return{start:t,end:e}}function yn(t){var e=t.match(Pe);return e?e[1].split(Re):[]}function In(t,e,a){e=gr(e,t);for(var i=-1,r=e.length,n=!1;++i<r;){var s=zn(e[i]);if(!(n=null!=t&&a(t,s)))break;t=t[s]}return n||++i!=r?n:!!(r=null==t?0:t.length)&&$o(r)&&wn(s,r)&&(dd(t)||cd(t))}function xn(t){var e=t.length,a=new t.constructor(e);return e&&"string"==typeof t[0]&&du.call(t,"index")&&(a.index=t.index,a.input=t.input),a}function Ln(t){return"function"!=typeof t.constructor||Pn(t)?{}:lc(Iu(t))}function Mn(t,e,a){var i=t.constructor;switch(e){case ne:return yr(t);case Vt:case Gt:return new i(+t);case se:return Ir(t,a);case oe:case he:case le:case ue:case ce:case de:case fe:case me:case Ce:return Mr(t,a);case jt:return new i;case zt:case te:return new i(t);case Qt:return xr(t);case $t:return new i;case ee:return Lr(t)}}function _n(t,e){var a=e.length;if(!a)return t;var i=a-1;return e[i]=(a>1?"& ":"")+e[i],e=e.join(a>2?", ":" "),t.replace(Oe,"{\n/* [wrapped with "+e+"] */\n")}function bn(t){return dd(t)||cd(t)||!!(_u&&t&&t[_u])}function wn(t,e){var a=typeof t;return!!(e=null==e?Et:e)&&("number"==a||"symbol"!=a&&Ue.test(t))&&t>-1&&t%1==0&&t<e}function Fn(t,e,a){if(!th(a))return!1;var i=typeof e;return!!("number"==i?Go(a)&&wn(e,a.length):"string"==i&&e in a)&&Vo(a[e],t)}function En(t,e){if(dd(t))return!1;var a=typeof t;return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=t&&!dh(t))||(_e.test(t)||!Me.test(t)||null!=e&&t in iu(e))}function An(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Nn(t){var e=mn(t),i=a[e];if("function"!=typeof i||!(e in v.prototype))return!1;if(t===i)return!0;var r=gc(i);return!!r&&t===r[0]}function On(t){return!!mu&&mu in t}function Pn(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||lu)}function Rn(t){return t===t&&!th(t)}function kn(t,e){return function(a){return null!=a&&(a[t]===e&&(e!==at||t in iu(a)))}}function Bn(t,e){var a=t[1],i=e[1],r=a|i,n=r<(mt|Ct|Tt),s=i==Tt&&a==Dt||i==Tt&&a==yt&&t[7].length<=e[8]||i==(Tt|yt)&&e[7].length<=e[8]&&a==Dt;if(!n&&!s)return t;i&mt&&(t[2]=e[2],r|=a&mt?0:pt);var o=e[3];if(o){var h=t[3];t[3]=h?wr(h,o,e[4]):o,t[4]=h?K(t[3],ht):e[4]}return o=e[5],o&&(h=t[5],t[5]=h?Fr(h,o,e[6]):o,t[6]=h?K(t[5],ht):e[6]),o=e[7],o&&(t[7]=o),i&Tt&&(t[8]=null==t[8]?e[8]:Gu(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r,t}function Yn(t){var e=[];if(null!=t)for(var a in iu(t))e.push(a);return e}function Hn(t){return Cu.call(t)}function Vn(t,e,a){return e=Vu(e===at?t.length-1:e,0),function(){for(var i=arguments,r=-1,s=Vu(i.length-e,0),o=Ql(s);++r<s;)o[r]=i[e+r];r=-1;for(var h=Ql(e+1);++r<e;)h[r]=i[r];return h[e]=a(o),n(t,this,h)}}function Gn(t,e){return e.length<2?t:di(t,ir(e,0,-1))}function Wn(t,e){for(var a=t.length,i=Gu(e.length,a),r=Er(t);i--;){var n=e[i];t[i]=wn(n,a)?r[n]:at}return t}function Xn(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function Un(t,e,a){var i=e+"";return Mc(t,_n(i,qn(yn(i),a)))}function Kn(t){var e=0,a=0;return function(){var i=Wu(),r=_t-(i-a);if(a=i,r>0){if(++e>=Mt)return arguments[0]}else e=0;return t.apply(at,arguments)}}function jn(t,e){var a=-1,i=t.length,r=i-1;for(e=e===at?i:e;++a<e;){var n=Ji(a,r),s=t[n];t[n]=t[a],t[a]=s}return t.length=e,t}function zn(t){if("string"==typeof t||dh(t))return t;var e=t+"";return"0"==e&&1/t==-Ft?"-0":e}function Jn(t){if(null!=t){try{return cu.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function qn(t,e){return o(kt,function(a){var i="_."+a[0];e&a[1]&&!c(t,i)&&t.push(i)}),t.sort()}function Zn(t){if(t instanceof v)return t.clone();var e=new r(t.__wrapped__,t.__chain__);return e.__actions__=Er(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function Qn(t,e,a){e=(a?Fn(t,e,a):e===at)?1:Vu(vh(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var r=0,n=0,s=Ql(Ou(i/e));r<i;)s[n++]=ir(t,r,r+=e);return s}function $n(t){for(var e=-1,a=null==t?0:t.length,i=0,r=[];++e<a;){var n=t[e];n&&(r[i++]=n)}return r}function ts(){var t=arguments.length;if(!t)return[];for(var e=Ql(t-1),a=arguments[0],i=t;i--;)e[i-1]=arguments[i];return m(dd(a)?Er(a):[a],hi(e,1))}function es(t,e,a){var i=null==t?0:t.length;return i?(e=a||e===at?1:vh(e),ir(t,e<0?0:e,i)):[]}function as(t,e,a){var i=null==t?0:t.length;return i?(e=a||e===at?1:vh(e),e=i-e,ir(t,0,e<0?0:e)):[]}function is(t,e){return t&&t.length?fr(t,pn(e,3),!0,!0):[]}function rs(t,e){return t&&t.length?fr(t,pn(e,3),!0):[]}function ns(t,e,a,i){var r=null==t?0:t.length;return r?(a&&"number"!=typeof a&&Fn(t,e,a)&&(a=0,i=r),si(t,e,a,i)):[]}function ss(t,e,a){var i=null==t?0:t.length;if(!i)return-1;var r=null==a?0:vh(a);return r<0&&(r=Vu(i+r,0)),T(t,pn(e,3),r)}function os(t,e,a){var i=null==t?0:t.length;if(!i)return-1;var r=i-1;return a!==at&&(r=vh(a),r=a<0?Vu(i+r,0):Gu(r,i-1)),T(t,pn(e,3),r,!0)}function hs(t){return(null==t?0:t.length)?hi(t,1):[]}function ls(t){return(null==t?0:t.length)?hi(t,Ft):[]}function us(t,e){return(null==t?0:t.length)?(e=e===at?1:vh(e),hi(t,e)):[]}function cs(t){for(var e=-1,a=null==t?0:t.length,i={};++e<a;){var r=t[e];i[r[0]]=r[1]}return i}function ds(t){return t&&t.length?t[0]:at}function fs(t,e,a){var i=null==t?0:t.length;if(!i)return-1;var r=null==a?0:vh(a);return r<0&&(r=Vu(i+r,0)),y(t,e,r)}function ms(t){return(null==t?0:t.length)?ir(t,0,-1):[]}function Cs(t,e){return null==t?"":Yu.call(t,e)}function ps(t){var e=null==t?0:t.length;return e?t[e-1]:at}function Ds(t,e,a){var i=null==t?0:t.length;if(!i)return-1;var r=i;return a!==at&&(r=vh(a),r=r<0?Vu(i+r,0):Gu(r,i-1)),e===e?q(t,e,r):T(t,x,r,!0)}function vs(t,e){return t&&t.length?Gi(t,vh(e)):at}function gs(t,e){return t&&t.length&&e&&e.length?ji(t,e):t}function Ss(t,e,a){return t&&t.length&&e&&e.length?ji(t,e,pn(a,2)):t}function Ts(t,e,a){return t&&t.length&&e&&e.length?ji(t,e,at,a):t}function ys(t,e){var a=[];if(!t||!t.length)return a;var i=-1,r=[],n=t.length;for(e=pn(e,3);++i<n;){var s=t[i];e(s,i,t)&&(a.push(s),r.push(i))}return zi(t,r),a}function Is(t){return null==t?t:Ku.call(t)}function xs(t,e,a){var i=null==t?0:t.length;return i?(a&&"number"!=typeof a&&Fn(t,e,a)?(e=0,a=i):(e=null==e?0:vh(e),a=a===at?i:vh(a)),ir(t,e,a)):[]}function Ls(t,e){return nr(t,e)}function Ms(t,e,a){return sr(t,e,pn(a,2))}function _s(t,e){var a=null==t?0:t.length;if(a){var i=nr(t,e);if(i<a&&Vo(t[i],e))return i}return-1}function bs(t,e){return nr(t,e,!0)}function ws(t,e,a){return sr(t,e,pn(a,2),!0)}function Fs(t,e){if(null==t?0:t.length){var a=nr(t,e,!0)-1;if(Vo(t[a],e))return a}return-1}function Es(t){return t&&t.length?or(t):[]}function As(t,e){return t&&t.length?or(t,pn(e,2)):[]}function Ns(t){var e=null==t?0:t.length;return e?ir(t,1,e):[]}function Os(t,e,a){return t&&t.length?(e=a||e===at?1:vh(e),ir(t,0,e<0?0:e)):[]}function Ps(t,e,a){var i=null==t?0:t.length;return i?(e=a||e===at?1:vh(e),e=i-e,ir(t,e<0?0:e,i)):[]}function Rs(t,e){return t&&t.length?fr(t,pn(e,3),!1,!0):[]}function ks(t,e){return t&&t.length?fr(t,pn(e,3)):[]}function Bs(t){return t&&t.length?ur(t):[]}function Ys(t,e){return t&&t.length?ur(t,pn(e,2)):[]}function Hs(t,e){return e="function"==typeof e?e:at,t&&t.length?ur(t,at,e):[]}function Vs(t){if(!t||!t.length)return[];var e=0;return t=u(t,function(t){if(Wo(t))return e=Vu(t.length,e),!0}),E(e,function(e){return f(t,M(e))})}function Gs(t,e){if(!t||!t.length)return[];var a=Vs(t);return null==e?a:f(a,function(t){return n(e,at,t)})}function Ws(t,e){return pr(t||[],e||[],Va)}function Xs(t,e){return pr(t||[],e||[],er)}function Us(t){var e=a(t);return e.__chain__=!0,e}function Ks(t,e){return e(t),t}function js(t,e){return e(t)}function zs(){return Us(this)}function Js(){return new r(this.value(),this.__chain__)}function qs(){this.__values__===at&&(this.__values__=ph(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?at:this.__values__[this.__index__++]}}function Zs(){return this}function Qs(t){for(var e,a=this;a instanceof i;){var r=Zn(a);r.__index__=0,r.__values__=at,e?n.__wrapped__=r:e=r;var n=r;a=a.__wrapped__}return n.__wrapped__=t,e}function $s(){var t=this.__wrapped__;if(t instanceof v){var e=t;return this.__actions__.length&&(e=new v(this)),e=e.reverse(),e.__actions__.push({func:js,args:[Is],thisArg:at}),new r(e,this.__chain__)}return this.thru(Is)}function to(){return mr(this.__wrapped__,this.__actions__)}function eo(t,e,a){var i=dd(t)?l:ri;return a&&Fn(t,e,a)&&(e=at),i(t,pn(e,3))}function ao(t,e){return(dd(t)?u:oi)(t,pn(e,3))}function io(t,e){return hi(lo(t,e),1)}function ro(t,e){return hi(lo(t,e),Ft)}function no(t,e,a){return a=a===at?1:vh(a),hi(lo(t,e),a)}function so(t,e){return(dd(t)?o:uc)(t,pn(e,3))}function oo(t,e){return(dd(t)?h:cc)(t,pn(e,3))}function ho(t,e,a,i){t=Go(t)?t:Jh(t),a=a&&!i?vh(a):0;var r=t.length;return a<0&&(a=Vu(r+a,0)),ch(t)?a<=r&&t.indexOf(e,a)>-1:!!r&&y(t,e,a)>-1}function lo(t,e){return(dd(t)?f:ki)(t,pn(e,3))}function uo(t,e,a,i){return null==t?[]:(dd(e)||(e=null==e?[]:[e]),a=i?at:a,dd(a)||(a=null==a?[]:[a]),Wi(t,e,a))}function co(t,e,a){var i=dd(t)?C:b,r=arguments.length<3;return i(t,pn(e,4),a,r,uc)}function fo(t,e,a){var i=dd(t)?p:b,r=arguments.length<3;return i(t,pn(e,4),a,r,cc)}function mo(t,e){return(dd(t)?u:oi)(t,bo(pn(e,3)))}function Co(t){return(dd(t)?Fa:$i)(t)}function po(t,e,a){return e=(a?Fn(t,e,a):e===at)?1:vh(e),(dd(t)?Ea:tr)(t,e)}function Do(t){return(dd(t)?Na:ar)(t)}function vo(t){if(null==t)return 0;if(Go(t))return ch(t)?Z(t):t.length;var e=yc(t);return e==jt||e==$t?t.size:Oi(t).length}function go(t,e,a){var i=dd(t)?D:rr;return a&&Fn(t,e,a)&&(e=at),i(t,pn(e,3))}function So(t,e){if("function"!=typeof e)throw new su(nt);return t=vh(t),function(){if(--t<1)return e.apply(this,arguments)}}function To(t,e,a){return e=a?at:e,e=t&&null==e?t.length:e,rn(t,Tt,at,at,at,at,e)}function yo(t,e){var a;if("function"!=typeof e)throw new su(nt);return t=vh(t),function(){return--t>0&&(a=e.apply(this,arguments)),t<=1&&(e=at),a}}function Io(t,e,a){e=a?at:e;var i=rn(t,Dt,at,at,at,at,at,e);return i.placeholder=Io.placeholder,i}function xo(t,e,a){e=a?at:e;var i=rn(t,vt,at,at,at,at,at,e);return i.placeholder=xo.placeholder,i}function Lo(t,e,a){function i(e){var a=d,i=f;return d=f=at,v=e,C=t.apply(i,a)}function r(t){return v=t,p=Lc(o,e),g?i(t):C}function n(t){var a=t-D,i=t-v,r=e-a;return S?Gu(r,m-i):r}function s(t){var a=t-D,i=t-v;return D===at||a>=e||a<0||S&&i>=m}function o(){var t=td();if(s(t))return h(t);p=Lc(o,n(t))}function h(t){return p=at,T&&d?i(t):(d=f=at,C)}function l(){p!==at&&Dc(p),v=0,d=D=f=p=at}function u(){return p===at?C:h(td())}function c(){var t=td(),a=s(t);if(d=arguments,f=this,D=t,a){if(p===at)return r(D);if(S)return Dc(p),p=Lc(o,e),i(D)}return p===at&&(p=Lc(o,e)),C}var d,f,m,C,p,D,v=0,g=!1,S=!1,T=!0;if("function"!=typeof t)throw new su(nt);return e=Sh(e)||0,th(a)&&(g=!!a.leading,S="maxWait"in a,m=S?Vu(Sh(a.maxWait)||0,e):m,T="trailing"in a?!!a.trailing:T),c.cancel=l,c.flush=u,c}function Mo(t){return rn(t,It)}function _o(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new su(nt);var a=function(){var i=arguments,r=e?e.apply(this,i):i[0],n=a.cache;if(n.has(r))return n.get(r);var s=t.apply(this,i);return a.cache=n.set(r,s)||n,s};return a.cache=new(_o.Cache||na),a}function bo(t){if("function"!=typeof t)throw new su(nt);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function wo(t){return yo(2,t)}function Fo(t,e){if("function"!=typeof t)throw new su(nt);return e=e===at?e:vh(e),Qi(t,e)}function Eo(t,e){if("function"!=typeof t)throw new su(nt);return e=null==e?0:Vu(vh(e),0),Qi(function(a){var i=a[e],r=Sr(a,0,e);return i&&m(r,i),n(t,this,r)})}function Ao(t,e,a){var i=!0,r=!0;if("function"!=typeof t)throw new su(nt);return th(a)&&(i="leading"in a?!!a.leading:i,r="trailing"in a?!!a.trailing:r),Lo(t,e,{leading:i,maxWait:e,trailing:r})}function No(t){return To(t,1)}function Oo(t,e){return sd(vr(e),t)}function Po(){if(!arguments.length)return[];var t=arguments[0];return dd(t)?t:[t]}function Ro(t){return $a(t,ct)}function ko(t,e){return e="function"==typeof e?e:at,$a(t,ct,e)}function Bo(t){return $a(t,lt|ct)}function Yo(t,e){return e="function"==typeof e?e:at,$a(t,lt|ct,e)}function Ho(t,e){return null==e||ei(t,e,Rh(e))}function Vo(t,e){return t===e||t!==t&&e!==e}function Go(t){return null!=t&&$o(t.length)&&!Zo(t)}function Wo(t){return eh(t)&&Go(t)}function Xo(t){return!0===t||!1===t||eh(t)&&mi(t)==Vt}function Uo(t){return eh(t)&&1===t.nodeType&&!lh(t)}function Ko(t){if(null==t)return!0;if(Go(t)&&(dd(t)||"string"==typeof t||"function"==typeof t.splice||md(t)||gd(t)||cd(t)))return!t.length;var e=yc(t);if(e==jt||e==$t)return!t.size;if(Pn(t))return!Oi(t).length;for(var a in t)if(du.call(t,a))return!1;return!0}function jo(t,e){return Li(t,e)}function zo(t,e,a){a="function"==typeof a?a:at;var i=a?a(t,e):at;return i===at?Li(t,e,at,a):!!i}function Jo(t){if(!eh(t))return!1;var e=mi(t);return e==Xt||e==Wt||"string"==typeof t.message&&"string"==typeof t.name&&!lh(t)}function qo(t){return"number"==typeof t&&Bu(t)}function Zo(t){if(!th(t))return!1;var e=mi(t);return e==Ut||e==Kt||e==Ht||e==Zt}function Qo(t){return"number"==typeof t&&t==vh(t)}function $o(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Et}function th(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function eh(t){return null!=t&&"object"==typeof t}function ah(t,e){return t===e||bi(t,e,vn(e))}function ih(t,e,a){return a="function"==typeof a?a:at,bi(t,e,vn(e),a)}function rh(t){return hh(t)&&t!=+t}function nh(t){if(Ic(t))throw new tu(rt);return wi(t)}function sh(t){return null===t}function oh(t){return null==t}function hh(t){return"number"==typeof t||eh(t)&&mi(t)==zt}function lh(t){if(!eh(t)||mi(t)!=qt)return!1;var e=Iu(t);if(null===e)return!0;var a=du.call(e,"constructor")&&e.constructor;return"function"==typeof a&&a instanceof a&&cu.call(a)==pu}function uh(t){return Qo(t)&&t>=-Et&&t<=Et}function ch(t){return"string"==typeof t||!dd(t)&&eh(t)&&mi(t)==te}function dh(t){return"symbol"==typeof t||eh(t)&&mi(t)==ee}function fh(t){return t===at}function mh(t){return eh(t)&&yc(t)==ie}function Ch(t){return eh(t)&&mi(t)==re}function ph(t){if(!t)return[];if(Go(t))return ch(t)?Q(t):Er(t);if(bu&&t[bu])return W(t[bu]());var e=yc(t);return(e==jt?X:e==$t?j:Jh)(t)}function Dh(t){if(!t)return 0===t?t:0;if((t=Sh(t))===Ft||t===-Ft){return(t<0?-1:1)*At}return t===t?t:0}function vh(t){var e=Dh(t),a=e%1;return e===e?a?e-a:e:0}function gh(t){return t?Qa(vh(t),0,Ot):0}function Sh(t){if("number"==typeof t)return t;if(dh(t))return Nt;if(th(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=th(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Ee,"");var a=Ge.test(t);return a||Xe.test(t)?Ma(t.slice(2),a?2:8):Ve.test(t)?Nt:+t}function Th(t){return Ar(t,kh(t))}function yh(t){return t?Qa(vh(t),-Et,Et):0===t?t:0}function Ih(t){return null==t?"":lr(t)}function xh(t,e){var a=lc(t);return null==e?a:za(a,e)}function Lh(t,e){return S(t,pn(e,3),li)}function Mh(t,e){return S(t,pn(e,3),ui)}function _h(t,e){return null==t?t:dc(t,pn(e,3),kh)}function bh(t,e){return null==t?t:fc(t,pn(e,3),kh)}function wh(t,e){return t&&li(t,pn(e,3))}function Fh(t,e){return t&&ui(t,pn(e,3))}function Eh(t){return null==t?[]:ci(t,Rh(t))}function Ah(t){return null==t?[]:ci(t,kh(t))}function Nh(t,e,a){var i=null==t?at:di(t,e);return i===at?a:i}function Oh(t,e){return null!=t&&In(t,e,pi)}function Ph(t,e){return null!=t&&In(t,e,Di)}function Rh(t){return Go(t)?ba(t):Oi(t)}function kh(t){return Go(t)?ba(t,!0):Pi(t)}function Bh(t,e){var a={};return e=pn(e,3),li(t,function(t,i,r){qa(a,e(t,i,r),t)}),a}function Yh(t,e){var a={};return e=pn(e,3),li(t,function(t,i,r){qa(a,i,e(t,i,r))}),a}function Hh(t,e){return Vh(t,bo(pn(e)))}function Vh(t,e){if(null==t)return{};var a=f(fn(t),function(t){return[t]});return e=pn(e),Ui(t,a,function(t,a){return e(t,a[0])})}function Gh(t,e,a){e=gr(e,t);var i=-1,r=e.length;for(r||(r=1,t=at);++i<r;){var n=null==t?at:t[zn(e[i])];n===at&&(i=r,n=a),t=Zo(n)?n.call(t):n}return t}function Wh(t,e,a){return null==t?t:er(t,e,a)}function Xh(t,e,a,i){return i="function"==typeof i?i:at,null==t?t:er(t,e,a,i)}function Uh(t,e,a){var i=dd(t),r=i||md(t)||gd(t);if(e=pn(e,4),null==a){var n=t&&t.constructor;a=r?i?new n:[]:th(t)&&Zo(n)?lc(Iu(t)):{}}return(r?o:li)(t,function(t,i,r){return e(a,t,i,r)}),a}function Kh(t,e){return null==t||cr(t,e)}function jh(t,e,a){return null==t?t:dr(t,e,vr(a))}function zh(t,e,a,i){return i="function"==typeof i?i:at,null==t?t:dr(t,e,vr(a),i)}function Jh(t){return null==t?[]:O(t,Rh(t))}function qh(t){return null==t?[]:O(t,kh(t))}function Zh(t,e,a){return a===at&&(a=e,e=at),a!==at&&(a=Sh(a),a=a===a?a:0),e!==at&&(e=Sh(e),e=e===e?e:0),Qa(Sh(t),e,a)}function Qh(t,e,a){return e=Dh(e),a===at?(a=e,e=0):a=Dh(a),t=Sh(t),vi(t,e,a)}function $h(t,e,a){if(a&&"boolean"!=typeof a&&Fn(t,e,a)&&(e=a=at),a===at&&("boolean"==typeof e?(a=e,e=at):"boolean"==typeof t&&(a=t,t=at)),t===at&&e===at?(t=0,e=1):(t=Dh(t),e===at?(e=t,t=0):e=Dh(e)),t>e){var i=t;t=e,e=i}if(a||t%1||e%1){var r=Uu();return Gu(t+r*(e-t+La("1e-"+((r+"").length-1))),e)}return Ji(t,e)}function tl(t){return Ud(Ih(t).toLowerCase())}function el(t){return(t=Ih(t))&&t.replace(Ke,Ga).replace(da,"")}function al(t,e,a){t=Ih(t),e=lr(e);var i=t.length;a=a===at?i:Qa(vh(a),0,i);var r=a;return(a-=e.length)>=0&&t.slice(a,r)==e}function il(t){return t=Ih(t),t&&ye.test(t)?t.replace(Se,Wa):t}function rl(t){return t=Ih(t),t&&Fe.test(t)?t.replace(we,"\\$&"):t}function nl(t,e,a){t=Ih(t),e=vh(e);var i=e?Z(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return qr(Pu(r),a)+t+qr(Ou(r),a)}function sl(t,e,a){t=Ih(t),e=vh(e);var i=e?Z(t):0;return e&&i<e?t+qr(e-i,a):t}function ol(t,e,a){t=Ih(t),e=vh(e);var i=e?Z(t):0;return e&&i<e?qr(e-i,a)+t:t}function hl(t,e,a){return a||null==e?e=0:e&&(e=+e),Xu(Ih(t).replace(Ae,""),e||0)}function ll(t,e,a){return e=(a?Fn(t,e,a):e===at)?1:vh(e),Zi(Ih(t),e)}function ul(){var t=arguments,e=Ih(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function cl(t,e,a){return a&&"number"!=typeof a&&Fn(t,e,a)&&(e=a=at),(a=a===at?Ot:a>>>0)?(t=Ih(t),t&&("string"==typeof e||null!=e&&!Dd(e))&&!(e=lr(e))&&V(t)?Sr(Q(t),0,a):t.split(e,a)):[]}function dl(t,e,a){return t=Ih(t),a=null==a?0:Qa(vh(a),0,t.length),e=lr(e),t.slice(a,a+e.length)==e}function fl(t,e,i){var r=a.templateSettings;i&&Fn(t,e,i)&&(e=at),t=Ih(t),e=xd({},e,r,nn);var n,s,o=xd({},e.imports,r.imports,nn),h=Rh(o),l=O(o,h),u=0,c=e.interpolate||je,d="__p += '",f=ru((e.escape||je).source+"|"+c.source+"|"+(c===Le?Ye:je).source+"|"+(e.evaluate||je).source+"|$","g"),m="//# sourceURL="+(du.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++va+"]")+"\n";t.replace(f,function(e,a,i,r,o,h){return i||(i=r),d+=t.slice(u,h).replace(ze,Y),a&&(n=!0,d+="' +\n__e("+a+") +\n'"),o&&(s=!0,d+="';\n"+o+";\n__p += '"),i&&(d+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=h+e.length,e}),d+="';\n";var C=du.call(e,"variable")&&e.variable;C||(d="with (obj) {\n"+d+"\n}\n"),d=(s?d.replace(pe,""):d).replace(De,"$1").replace(ve,"$1;"),d="function("+(C||"obj")+") {\n"+(C?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(n?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var p=Kd(function(){return eu(h,m+"return "+d).apply(at,l)});if(p.source=d,Jo(p))throw p;return p}function ml(t){return Ih(t).toLowerCase()}function Cl(t){return Ih(t).toUpperCase()}function pl(t,e,a){if((t=Ih(t))&&(a||e===at))return t.replace(Ee,"");if(!t||!(e=lr(e)))return t;var i=Q(t),r=Q(e);return Sr(i,R(i,r),k(i,r)+1).join("")}function Dl(t,e,a){if((t=Ih(t))&&(a||e===at))return t.replace(Ne,"");if(!t||!(e=lr(e)))return t;var i=Q(t);return Sr(i,0,k(i,Q(e))+1).join("")}function vl(t,e,a){if((t=Ih(t))&&(a||e===at))return t.replace(Ae,"");if(!t||!(e=lr(e)))return t;var i=Q(t);return Sr(i,R(i,Q(e))).join("")}function gl(t,e){var a=xt,i=Lt;if(th(e)){var r="separator"in e?e.separator:r;a="length"in e?vh(e.length):a,i="omission"in e?lr(e.omission):i}t=Ih(t);var n=t.length;if(V(t)){var s=Q(t);n=s.length}if(a>=n)return t;var o=a-Z(i);if(o<1)return i;var h=s?Sr(s,0,o).join(""):t.slice(0,o);if(r===at)return h+i;if(s&&(o+=h.length-o),Dd(r)){if(t.slice(o).search(r)){var l,u=h;for(r.global||(r=ru(r.source,Ih(He.exec(r))+"g")),r.lastIndex=0;l=r.exec(u);)var c=l.index;h=h.slice(0,c===at?o:c)}}else if(t.indexOf(lr(r),o)!=o){var d=h.lastIndexOf(r);d>-1&&(h=h.slice(0,d))}return h+i}function Sl(t){return t=Ih(t),t&&Te.test(t)?t.replace(ge,Xa):t}function Tl(t,e,a){return t=Ih(t),e=a?at:e,e===at?G(t)?et(t):g(t):t.match(e)||[]}function yl(t){var e=null==t?0:t.length,a=pn();return t=e?f(t,function(t){if("function"!=typeof t[1])throw new su(nt);return[a(t[0]),t[1]]}):[],Qi(function(a){for(var i=-1;++i<e;){var r=t[i];if(n(r[0],this,a))return n(r[1],this,a)}})}function Il(t){return ti($a(t,lt))}function xl(t){return function(){return t}}function Ll(t,e){return null==t||t!==t?e:t}function Ml(t){return t}function _l(t){return Ni("function"==typeof t?t:$a(t,lt))}function bl(t){return Bi($a(t,lt))}function wl(t,e){return Yi(t,$a(e,lt))}function Fl(t,e,a){var i=Rh(e),r=ci(e,i);null!=a||th(e)&&(r.length||!i.length)||(a=e,e=t,t=this,r=ci(e,Rh(e)));var n=!(th(a)&&"chain"in a&&!a.chain),s=Zo(t);return o(r,function(a){var i=e[a];t[a]=i,s&&(t.prototype[a]=function(){var e=this.__chain__;if(n||e){var a=t(this.__wrapped__);return(a.__actions__=Er(this.__actions__)).push({func:i,args:arguments,thisArg:t}),a.__chain__=e,a}return i.apply(t,m([this.value()],arguments))})}),t}function El(){return wa._===this&&(wa._=Du),this}function Al(){}function Nl(t){return t=vh(t),Qi(function(e){return Gi(e,t)})}function Ol(t){return En(t)?M(zn(t)):Ki(t)}function Pl(t){return function(e){return null==t?at:di(t,e)}}function Rl(){return[]}function kl(){return!1}function Bl(){return{}}function Yl(){return""}function Hl(){return!0}function Vl(t,e){if((t=vh(t))<1||t>Et)return[];var a=Ot,i=Gu(t,Ot);e=pn(e),t-=Ot;for(var r=E(i,e);++a<t;)e(a);return r}function Gl(t){return dd(t)?f(t,zn):dh(t)?[t]:Er(_c(Ih(t)))}function Wl(t){var e=++fu;return Ih(t)+e}function Xl(t){return t&&t.length?ni(t,Ml,Ci):at}function Ul(t,e){return t&&t.length?ni(t,pn(e,2),Ci):at}function Kl(t){return L(t,Ml)}function jl(t,e){return L(t,pn(e,2))}function zl(t){return t&&t.length?ni(t,Ml,Ri):at}function Jl(t,e){return t&&t.length?ni(t,pn(e,2),Ri):at}function ql(t){return t&&t.length?F(t,Ml):0}function Zl(t,e){return t&&t.length?F(t,pn(e,2)):0}e=null==e?wa:Ua.defaults(wa.Object(),e,Ua.pick(wa,Da));var Ql=e.Array,$l=e.Date,tu=e.Error,eu=e.Function,au=e.Math,iu=e.Object,ru=e.RegExp,nu=e.String,su=e.TypeError,ou=Ql.prototype,hu=eu.prototype,lu=iu.prototype,uu=e["__core-js_shared__"],cu=hu.toString,du=lu.hasOwnProperty,fu=0,mu=function(){var t=/[^.]+$/.exec(uu&&uu.keys&&uu.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Cu=lu.toString,pu=cu.call(iu),Du=wa._,vu=ru("^"+cu.call(du).replace(we,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),gu=Aa?e.Buffer:at,Su=e.Symbol,Tu=e.Uint8Array,yu=gu?gu.allocUnsafe:at,Iu=U(iu.getPrototypeOf,iu),xu=iu.create,Lu=lu.propertyIsEnumerable,Mu=ou.splice,_u=Su?Su.isConcatSpreadable:at,bu=Su?Su.iterator:at,wu=Su?Su.toStringTag:at,Fu=function(){try{var t=gn(iu,"defineProperty");return t({},"",{}),t}catch(t){}}(),Eu=e.clearTimeout!==wa.clearTimeout&&e.clearTimeout,Au=$l&&$l.now!==wa.Date.now&&$l.now,Nu=e.setTimeout!==wa.setTimeout&&e.setTimeout,Ou=au.ceil,Pu=au.floor,Ru=iu.getOwnPropertySymbols,ku=gu?gu.isBuffer:at,Bu=e.isFinite,Yu=ou.join,Hu=U(iu.keys,iu),Vu=au.max,Gu=au.min,Wu=$l.now,Xu=e.parseInt,Uu=au.random,Ku=ou.reverse,ju=gn(e,"DataView"),zu=gn(e,"Map"),Ju=gn(e,"Promise"),qu=gn(e,"Set"),Zu=gn(e,"WeakMap"),Qu=gn(iu,"create"),$u=Zu&&new Zu,tc={},ec=Jn(ju),ac=Jn(zu),ic=Jn(Ju),rc=Jn(qu),nc=Jn(Zu),sc=Su?Su.prototype:at,oc=sc?sc.valueOf:at,hc=sc?sc.toString:at,lc=function(){function t(){}return function(e){if(!th(e))return{};if(xu)return xu(e);t.prototype=e;var a=new t;return t.prototype=at,a}}();a.templateSettings={escape:Ie,evaluate:xe,interpolate:Le,variable:"",imports:{_:a}},a.prototype=i.prototype,a.prototype.constructor=a,r.prototype=lc(i.prototype),r.prototype.constructor=r,v.prototype=lc(i.prototype),v.prototype.constructor=v,tt.prototype.clear=ke,tt.prototype.delete=Je,tt.prototype.get=qe,tt.prototype.has=Ze,tt.prototype.set=Qe,$e.prototype.clear=ta,$e.prototype.delete=ea,$e.prototype.get=aa,$e.prototype.has=ia,$e.prototype.set=ra,na.prototype.clear=sa,na.prototype.delete=oa,na.prototype.get=ha,na.prototype.has=la,na.prototype.set=ua,fa.prototype.add=fa.prototype.push=ma,fa.prototype.has=Ca,pa.prototype.clear=Ta,pa.prototype.delete=ya,pa.prototype.get=Ia,pa.prototype.has=xa,pa.prototype.set=_a;var uc=kr(li),cc=kr(ui,!0),dc=Br(),fc=Br(!0),mc=$u?function(t,e){return $u.set(t,e),t}:Ml,Cc=Fu?function(t,e){return Fu(t,"toString",{configurable:!0,enumerable:!1,value:xl(e),writable:!0})}:Ml,pc=Qi,Dc=Eu||function(t){return wa.clearTimeout(t)},vc=qu&&1/j(new qu([,-0]))[1]==Ft?function(t){return new qu(t)}:Al,gc=$u?function(t){return $u.get(t)}:Al,Sc=Ru?function(t){return null==t?[]:(t=iu(t),u(Ru(t),function(e){return Lu.call(t,e)}))}:Rl,Tc=Ru?function(t){for(var e=[];t;)m(e,Sc(t)),t=Iu(t);return e}:Rl,yc=mi;(ju&&yc(new ju(new ArrayBuffer(1)))!=se||zu&&yc(new zu)!=jt||Ju&&"[object Promise]"!=yc(Ju.resolve())||qu&&yc(new qu)!=$t||Zu&&yc(new Zu)!=ie)&&(yc=function(t){var e=mi(t),a=e==qt?t.constructor:at,i=a?Jn(a):"";if(i)switch(i){case ec:return se;case ac:return jt;case ic:return"[object Promise]";case rc:return $t;case nc:return ie}return e});var Ic=uu?Zo:kl,xc=Kn(mc),Lc=Nu||function(t,e){return wa.setTimeout(t,e)},Mc=Kn(Cc),_c=function(t){var e=_o(t,function(t){return a.size===ot&&a.clear(),t}),a=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(be,function(t,a,i,r){e.push(i?r.replace(Be,"$1"):a||t)}),e}),bc=Qi(function(t,e){return Wo(t)?ii(t,hi(e,1,Wo,!0)):[]}),wc=Qi(function(t,e){var a=ps(e);return Wo(a)&&(a=at),Wo(t)?ii(t,hi(e,1,Wo,!0),pn(a,2)):[]}),Fc=Qi(function(t,e){var a=ps(e);return Wo(a)&&(a=at),Wo(t)?ii(t,hi(e,1,Wo,!0),at,a):[]}),Ec=Qi(function(t){var e=f(t,Dr);return e.length&&e[0]===t[0]?gi(e):[]}),Ac=Qi(function(t){var e=ps(t),a=f(t,Dr);return e===ps(a)?e=at:a.pop(),a.length&&a[0]===t[0]?gi(a,pn(e,2)):[]}),Nc=Qi(function(t){var e=ps(t),a=f(t,Dr);return e="function"==typeof e?e:at,e&&a.pop(),a.length&&a[0]===t[0]?gi(a,at,e):[]}),Oc=Qi(gs),Pc=cn(function(t,e){var a=null==t?0:t.length,i=Za(t,e);return zi(t,f(e,function(t){return wn(t,a)?+t:t}).sort(_r)),i}),Rc=Qi(function(t){return ur(hi(t,1,Wo,!0))}),kc=Qi(function(t){var e=ps(t);return Wo(e)&&(e=at),ur(hi(t,1,Wo,!0),pn(e,2))}),Bc=Qi(function(t){var e=ps(t);return e="function"==typeof e?e:at,ur(hi(t,1,Wo,!0),at,e)}),Yc=Qi(function(t,e){return Wo(t)?ii(t,e):[]}),Hc=Qi(function(t){return Cr(u(t,Wo))}),Vc=Qi(function(t){var e=ps(t);return Wo(e)&&(e=at),Cr(u(t,Wo),pn(e,2))}),Gc=Qi(function(t){var e=ps(t);return e="function"==typeof e?e:at,Cr(u(t,Wo),at,e)}),Wc=Qi(Vs),Xc=Qi(function(t){var e=t.length,a=e>1?t[e-1]:at;return a="function"==typeof a?(t.pop(),a):at,Gs(t,a)}),Uc=cn(function(t){var e=t.length,a=e?t[0]:0,i=this.__wrapped__,n=function(e){return Za(e,t)};return!(e>1||this.__actions__.length)&&i instanceof v&&wn(a)?(i=i.slice(a,+a+(e?1:0)),i.__actions__.push({func:js,args:[n],thisArg:at}),new r(i,this.__chain__).thru(function(t){return e&&!t.length&&t.push(at),t})):this.thru(n)}),Kc=Pr(function(t,e,a){du.call(t,a)?++t[a]:qa(t,a,1)}),jc=Xr(ss),zc=Xr(os),Jc=Pr(function(t,e,a){du.call(t,a)?t[a].push(e):qa(t,a,[e])}),qc=Qi(function(t,e,a){var i=-1,r="function"==typeof e,s=Go(t)?Ql(t.length):[];return uc(t,function(t){s[++i]=r?n(e,t,a):Ti(t,e,a)}),s}),Zc=Pr(function(t,e,a){qa(t,a,e)}),Qc=Pr(function(t,e,a){t[a?0:1].push(e)},function(){return[[],[]]}),$c=Qi(function(t,e){if(null==t)return[];var a=e.length;return a>1&&Fn(t,e[0],e[1])?e=[]:a>2&&Fn(e[0],e[1],e[2])&&(e=[e[0]]),Wi(t,hi(e,1),[])}),td=Au||function(){return wa.Date.now()},ed=Qi(function(t,e,a){var i=mt;if(a.length){var r=K(a,Cn(ed));i|=gt}return rn(t,i,e,a,r)}),ad=Qi(function(t,e,a){var i=mt|Ct;if(a.length){var r=K(a,Cn(ad));i|=gt}return rn(e,i,t,a,r)}),id=Qi(function(t,e){return ai(t,1,e)}),rd=Qi(function(t,e,a){return ai(t,Sh(e)||0,a)});_o.Cache=na;var nd=pc(function(t,e){e=1==e.length&&dd(e[0])?f(e[0],N(pn())):f(hi(e,1),N(pn()));var a=e.length;return Qi(function(i){for(var r=-1,s=Gu(i.length,a);++r<s;)i[r]=e[r].call(this,i[r]);return n(t,this,i)})}),sd=Qi(function(t,e){var a=K(e,Cn(sd));return rn(t,gt,at,e,a)}),od=Qi(function(t,e){var a=K(e,Cn(od));return rn(t,St,at,e,a)}),hd=cn(function(t,e){return rn(t,yt,at,at,at,e)}),ld=$r(Ci),ud=$r(function(t,e){return t>=e}),cd=yi(function(){return arguments}())?yi:function(t){return eh(t)&&du.call(t,"callee")&&!Lu.call(t,"callee")},dd=Ql.isArray,fd=Pa?N(Pa):Ii,md=ku||kl,Cd=Ra?N(Ra):xi,pd=ka?N(ka):_i,Dd=Ba?N(Ba):Fi,vd=Ya?N(Ya):Ei,gd=Ha?N(Ha):Ai,Sd=$r(Ri),Td=$r(function(t,e){return t<=e}),yd=Rr(function(t,e){if(Pn(e)||Go(e))return void Ar(e,Rh(e),t);for(var a in e)du.call(e,a)&&Va(t,a,e[a])}),Id=Rr(function(t,e){Ar(e,kh(e),t)}),xd=Rr(function(t,e,a,i){Ar(e,kh(e),t,i)}),Ld=Rr(function(t,e,a,i){Ar(e,Rh(e),t,i)}),Md=cn(Za),_d=Qi(function(t,e){t=iu(t);var a=-1,i=e.length,r=i>2?e[2]:at;for(r&&Fn(e[0],e[1],r)&&(i=1);++a<i;)for(var n=e[a],s=kh(n),o=-1,h=s.length;++o<h;){var l=s[o],u=t[l];(u===at||Vo(u,lu[l])&&!du.call(t,l))&&(t[l]=n[l])}return t}),bd=Qi(function(t){return t.push(at,sn),n(Nd,at,t)}),wd=jr(function(t,e,a){null!=e&&"function"!=typeof e.toString&&(e=Cu.call(e)),t[e]=a},xl(Ml)),Fd=jr(function(t,e,a){null!=e&&"function"!=typeof e.toString&&(e=Cu.call(e)),du.call(t,e)?t[e].push(a):t[e]=[a]},pn),Ed=Qi(Ti),Ad=Rr(function(t,e,a){Hi(t,e,a)}),Nd=Rr(function(t,e,a,i){Hi(t,e,a,i)}),Od=cn(function(t,e){var a={};if(null==t)return a;var i=!1;e=f(e,function(e){return e=gr(e,t),i||(i=e.length>1),e}),Ar(t,fn(t),a),i&&(a=$a(a,lt|ut|ct,on));for(var r=e.length;r--;)cr(a,e[r]);return a}),Pd=cn(function(t,e){return null==t?{}:Xi(t,e)}),Rd=an(Rh),kd=an(kh),Bd=Vr(function(t,e,a){return e=e.toLowerCase(),t+(a?tl(e):e)}),Yd=Vr(function(t,e,a){return t+(a?"-":"")+e.toLowerCase()}),Hd=Vr(function(t,e,a){return t+(a?" ":"")+e.toLowerCase()}),Vd=Hr("toLowerCase"),Gd=Vr(function(t,e,a){return t+(a?"_":"")+e.toLowerCase()}),Wd=Vr(function(t,e,a){return t+(a?" ":"")+Ud(e)}),Xd=Vr(function(t,e,a){return t+(a?" ":"")+e.toUpperCase()}),Ud=Hr("toUpperCase"),Kd=Qi(function(t,e){try{return n(t,at,e)}catch(t){return Jo(t)?t:new tu(t)}}),jd=cn(function(t,e){return o(e,function(e){e=zn(e),qa(t,e,ed(t[e],t))}),t}),zd=Ur(),Jd=Ur(!0),qd=Qi(function(t,e){return function(a){return Ti(a,t,e)}}),Zd=Qi(function(t,e){return function(a){return Ti(t,a,e)}}),Qd=Jr(f),$d=Jr(l),tf=Jr(D),ef=Qr(),af=Qr(!0),rf=zr(function(t,e){return t+e},0),nf=en("ceil"),sf=zr(function(t,e){return t/e},1),of=en("floor"),hf=zr(function(t,e){return t*e},1),lf=en("round"),uf=zr(function(t,e){return t-e},0);return a.after=So,a.ary=To,a.assign=yd,a.assignIn=Id,a.assignInWith=xd,a.assignWith=Ld,a.at=Md,a.before=yo,a.bind=ed,a.bindAll=jd,a.bindKey=ad,a.castArray=Po,a.chain=Us,a.chunk=Qn,a.compact=$n,a.concat=ts,a.cond=yl,a.conforms=Il,a.constant=xl,a.countBy=Kc,a.create=xh,a.curry=Io,a.curryRight=xo,a.debounce=Lo,a.defaults=_d,a.defaultsDeep=bd,a.defer=id,a.delay=rd,a.difference=bc,a.differenceBy=wc,a.differenceWith=Fc,a.drop=es,a.dropRight=as,a.dropRightWhile=is,a.dropWhile=rs,a.fill=ns,a.filter=ao,a.flatMap=io,a.flatMapDeep=ro,a.flatMapDepth=no,a.flatten=hs,a.flattenDeep=ls,a.flattenDepth=us,a.flip=Mo,a.flow=zd,a.flowRight=Jd,a.fromPairs=cs,a.functions=Eh,a.functionsIn=Ah,a.groupBy=Jc,a.initial=ms,a.intersection=Ec,a.intersectionBy=Ac,a.intersectionWith=Nc,a.invert=wd,a.invertBy=Fd,a.invokeMap=qc,a.iteratee=_l,a.keyBy=Zc,a.keys=Rh,a.keysIn=kh,a.map=lo,a.mapKeys=Bh,a.mapValues=Yh,a.matches=bl,a.matchesProperty=wl,a.memoize=_o,a.merge=Ad,a.mergeWith=Nd,a.method=qd,a.methodOf=Zd,a.mixin=Fl,a.negate=bo,a.nthArg=Nl,a.omit=Od,a.omitBy=Hh,a.once=wo,a.orderBy=uo,a.over=Qd,a.overArgs=nd,a.overEvery=$d,a.overSome=tf,a.partial=sd,a.partialRight=od,a.partition=Qc,a.pick=Pd,a.pickBy=Vh,a.property=Ol,a.propertyOf=Pl,a.pull=Oc,a.pullAll=gs,a.pullAllBy=Ss,a.pullAllWith=Ts,a.pullAt=Pc,a.range=ef,a.rangeRight=af,a.rearg=hd,a.reject=mo,a.remove=ys,a.rest=Fo,a.reverse=Is,a.sampleSize=po,a.set=Wh,a.setWith=Xh,a.shuffle=Do,a.slice=xs,a.sortBy=$c,a.sortedUniq=Es,a.sortedUniqBy=As,a.split=cl,a.spread=Eo,a.tail=Ns,a.take=Os,a.takeRight=Ps,a.takeRightWhile=Rs,a.takeWhile=ks,a.tap=Ks,a.throttle=Ao,a.thru=js,a.toArray=ph,a.toPairs=Rd,a.toPairsIn=kd,a.toPath=Gl,a.toPlainObject=Th,a.transform=Uh,a.unary=No,a.union=Rc,a.unionBy=kc,a.unionWith=Bc,a.uniq=Bs,a.uniqBy=Ys,a.uniqWith=Hs,a.unset=Kh,a.unzip=Vs,a.unzipWith=Gs,a.update=jh,a.updateWith=zh,a.values=Jh,a.valuesIn=qh,a.without=Yc,a.words=Tl,a.wrap=Oo,a.xor=Hc,a.xorBy=Vc,a.xorWith=Gc,a.zip=Wc,a.zipObject=Ws,a.zipObjectDeep=Xs,a.zipWith=Xc,a.entries=Rd,a.entriesIn=kd,a.extend=Id,a.extendWith=xd,Fl(a,a),a.add=rf,a.attempt=Kd,a.camelCase=Bd,a.capitalize=tl,a.ceil=nf,a.clamp=Zh,a.clone=Ro,a.cloneDeep=Bo,a.cloneDeepWith=Yo,a.cloneWith=ko,a.conformsTo=Ho,a.deburr=el,a.defaultTo=Ll,a.divide=sf,a.endsWith=al,a.eq=Vo,a.escape=il,a.escapeRegExp=rl,a.every=eo,a.find=jc,a.findIndex=ss,a.findKey=Lh,a.findLast=zc,a.findLastIndex=os,a.findLastKey=Mh,a.floor=of,a.forEach=so,a.forEachRight=oo,a.forIn=_h,a.forInRight=bh,a.forOwn=wh,a.forOwnRight=Fh,a.get=Nh,a.gt=ld,a.gte=ud,a.has=Oh,a.hasIn=Ph,a.head=ds,a.identity=Ml,a.includes=ho,a.indexOf=fs,a.inRange=Qh,a.invoke=Ed,a.isArguments=cd,a.isArray=dd,a.isArrayBuffer=fd,a.isArrayLike=Go,a.isArrayLikeObject=Wo,a.isBoolean=Xo,a.isBuffer=md,a.isDate=Cd,a.isElement=Uo,a.isEmpty=Ko,a.isEqual=jo,a.isEqualWith=zo,a.isError=Jo,a.isFinite=qo,a.isFunction=Zo,a.isInteger=Qo,a.isLength=$o,a.isMap=pd,a.isMatch=ah,a.isMatchWith=ih,a.isNaN=rh,a.isNative=nh,a.isNil=oh,a.isNull=sh,a.isNumber=hh,a.isObject=th,a.isObjectLike=eh,a.isPlainObject=lh,a.isRegExp=Dd,a.isSafeInteger=uh,a.isSet=vd,a.isString=ch,a.isSymbol=dh,a.isTypedArray=gd,a.isUndefined=fh,a.isWeakMap=mh,a.isWeakSet=Ch,a.join=Cs,a.kebabCase=Yd,a.last=ps,a.lastIndexOf=Ds,a.lowerCase=Hd,a.lowerFirst=Vd,a.lt=Sd,a.lte=Td,a.max=Xl,a.maxBy=Ul,a.mean=Kl,a.meanBy=jl,a.min=zl,a.minBy=Jl,a.stubArray=Rl,a.stubFalse=kl,a.stubObject=Bl,a.stubString=Yl,a.stubTrue=Hl,a.multiply=hf,a.nth=vs,a.noConflict=El,a.noop=Al,a.now=td,a.pad=nl,a.padEnd=sl,a.padStart=ol,a.parseInt=hl,a.random=$h,a.reduce=co,a.reduceRight=fo,a.repeat=ll,a.replace=ul,a.result=Gh,a.round=lf,a.runInContext=t,a.sample=Co,a.size=vo,a.snakeCase=Gd,a.some=go,a.sortedIndex=Ls,a.sortedIndexBy=Ms,a.sortedIndexOf=_s,a.sortedLastIndex=bs,a.sortedLastIndexBy=ws,a.sortedLastIndexOf=Fs,a.startCase=Wd,a.startsWith=dl,a.subtract=uf,a.sum=ql,a.sumBy=Zl,a.template=fl,a.times=Vl,a.toFinite=Dh,a.toInteger=vh,a.toLength=gh,a.toLower=ml,a.toNumber=Sh,a.toSafeInteger=yh,a.toString=Ih,a.toUpper=Cl,a.trim=pl,a.trimEnd=Dl,a.trimStart=vl,a.truncate=gl,a.unescape=Sl,a.uniqueId=Wl,a.upperCase=Xd,a.upperFirst=Ud,a.each=so,a.eachRight=oo,a.first=ds,Fl(a,function(){var t={};return li(a,function(e,i){du.call(a.prototype,i)||(t[i]=e)}),t}(),{chain:!1}),a.VERSION="4.17.20",o(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){a[t].placeholder=a}),o(["drop","take"],function(t,e){v.prototype[t]=function(a){a=a===at?1:Vu(vh(a),0);var i=this.__filtered__&&!e?new v(this):this.clone();return i.__filtered__?i.__takeCount__=Gu(a,i.__takeCount__):i.__views__.push({size:Gu(a,Ot),type:t+(i.__dir__<0?"Right":"")}),i},v.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),o(["filter","map","takeWhile"],function(t,e){var a=e+1,i=a==bt||3==a;v.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:pn(t,3),type:a}),e.__filtered__=e.__filtered__||i,e}}),o(["head","last"],function(t,e){var a="take"+(e?"Right":"");v.prototype[t]=function(){return this[a](1).value()[0]}}),o(["initial","tail"],function(t,e){var a="drop"+(e?"":"Right");v.prototype[t]=function(){return this.__filtered__?new v(this):this[a](1)}}),v.prototype.compact=function(){return this.filter(Ml)},v.prototype.find=function(t){return this.filter(t).head()},v.prototype.findLast=function(t){return this.reverse().find(t)},v.prototype.invokeMap=Qi(function(t,e){return"function"==typeof t?new v(this):this.map(function(a){return Ti(a,t,e)})}),v.prototype.reject=function(t){return this.filter(bo(pn(t)))},v.prototype.slice=function(t,e){t=vh(t);var a=this;return a.__filtered__&&(t>0||e<0)?new v(a):(t<0?a=a.takeRight(-t):t&&(a=a.drop(t)),e!==at&&(e=vh(e),a=e<0?a.dropRight(-e):a.take(e-t)),a)},v.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},v.prototype.toArray=function(){return this.take(Ot)},li(v.prototype,function(t,e){var i=/^(?:filter|find|map|reject)|While$/.test(e),n=/^(?:head|last)$/.test(e),s=a[n?"take"+("last"==e?"Right":""):e],o=n||/^find/.test(e);s&&(a.prototype[e]=function(){var e=this.__wrapped__,h=n?[1]:arguments,l=e instanceof v,u=h[0],c=l||dd(e),d=function(t){var e=s.apply(a,m([t],h));return n&&f?e[0]:e};c&&i&&"function"==typeof u&&1!=u.length&&(l=c=!1);var f=this.__chain__,C=!!this.__actions__.length,p=o&&!f,D=l&&!C;if(!o&&c){e=D?e:new v(this);var g=t.apply(e,h);return g.__actions__.push({func:js,args:[d],thisArg:at}),new r(g,f)}return p&&D?t.apply(this,h):(g=this.thru(d),p?n?g.value()[0]:g.value():g)})}),o(["pop","push","shift","sort","splice","unshift"],function(t){var e=ou[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);a.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var a=this.value();return e.apply(dd(a)?a:[],t)}return this[i](function(a){return e.apply(dd(a)?a:[],t)})}}),li(v.prototype,function(t,e){var i=a[e];if(i){var r=i.name+"";du.call(tc,r)||(tc[r]=[]),tc[r].push({name:e,func:i})}}),tc[Kr(at,Ct).name]=[{name:"wrapper",func:at}],v.prototype.clone=_,v.prototype.reverse=J,v.prototype.value=$,a.prototype.at=Uc,a.prototype.chain=zs,a.prototype.commit=Js,a.prototype.next=qs,a.prototype.plant=Qs,a.prototype.reverse=$s,a.prototype.toJSON=a.prototype.valueOf=a.prototype.value=to,a.prototype.first=a.prototype.head,bu&&(a.prototype[bu]=Zs),a}();wa._=Ua,(r=function(){return Ua}.call(e,a,e,i))!==at&&(i.exports=r)}).call(this)}).call(e,a(27),a(64)(t))},,,,,,,,function(t,e,a){t.exports=a.p+"images/x.576f9547.png"},function(t,e,a){"use strict";function i(t,e,a){var i=new Date;i.setTime(i.getTime()+24*a*60*60*1e3),document.cookie=t+"="+escape(e)+";expires="+i.toGMTString()}function r(t){for(var e=document.cookie.split("; "),a=0;a<e.length;a++){var i=e[a].split("=");if(t==i[0])return unescape(i[1])}return null}function n(t){i(t,"",-1)}function s(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),a=window.location.search.substr(1).match(e);return null!=a?decodeURI(a[2]):null}e.d=i,e.b=r,e.a=n,e.c=s},,,function(t,e,a){"use strict";var i=a(8),r=a(14);a.n(r);e.a={addOneGroup:function(t,e){var a={name:e.text};i.a.post(i.a.apiGroupCreate,a,function(a){200===a.code?(t.name=a.data.name,t.categoryid=a.data.id,t.creating=!1,e.sending=!1,e.text="",e.createType="",e.$message("创建成功"),1===e.categoryList.length&&(e.isShowNoCategory=!1)):e.$message("创建失败")})},addOneStrategy:function(t,e,a){var r={outArgs:[],args:[],description:"",floatPrecision:"0",isMainIndex:!1,groupId:t.groupId,name:e.text,script:""};i.a.post(i.a.apiStrategyCreate,r,function(i){200===i.code?(t.name=i.data.name,t.categoryid=i.data.id,t.creating=!1,e.sending=!1,e.text="",e.createType="",a([t.groupId,t.categoryid]),e.$message("创建成功")):e.$message("创建失败")})},addOneSelectStockStrategy:function(t,e,a,r){i.a.post(i.a.apiAlgorithmCreate,e,function(e){200===e.code?(t.name=e.data.name,t.categoryid=e.data.id,t.creating=!1,a.sending=!1,a.text="",a.createType="",r([t.groupId,t.categoryid]),a.$message("创建成功")):a.$message("创建失败")})},updateOneGroup:function(t,e){var a={name:e.text};i.a.post(""+i.a.apiGroupOpr+t.categoryid,a,function(a){200===a.code?(t.name=a.data.name,t.editing=!1,e.sending=!1,e.text="",e.$message("修改成功")):e.$message("修改失败")})},updateOneStrategy:function(t,e,a,r,n){var s=!1;a&&a.text&&t.name!==a.text&&(s=!0);var o={outArgs:n||[],args:e&&e.args?e.args:t.args,description:"",floatPrecision:"0",id:t.categoryid,isMainIndex:!1,name:a&&a.text?a.text:t.name,script:e&&e.script?e.script:t.script};i.a.post(""+i.a.apiStrategyOpr+t.categoryid,o,function(e){200===e.code?(t.name=e.data.name,t.args=e.data.args,t.script=e.data.script,t.editing=!1,s&&"category-wrap"===a.$el.className&&a.$emit("changeStrategyName",t.categoryid,a.text),a&&a.sending&&(a.sending=!1),a&&a.text&&(a.text=""),r&&r([t.groupId,t.categoryid]),a.$message("修改成功")):a.$message("修改失败")})},queryOneStrategyDetail:function(t,e){i.a.get(""+i.a.apiStrategyOpr+t.categoryid,{},function(a){e(t,a)})},deleteOneGroup:function(t,e,a){i.a.dele(""+i.a.apiGroupOpr+e.categoryid,function(i){if(200===i.code){var n=Object(r.findIndex)(t,{categoryid:e.categoryid});t.splice(n,1),0===t.length&&(a.isShowNoCategory=!0),a.$message("删除成功")}else a.$message("删除失败")})},deleteOneStrategy:function(t,e,a,n){i.a.dele(""+i.a.apiStrategyOpr+e.categoryid,function(i){if(200===i.code){var s=Object(r.find)(t,{categoryid:e.groupId}),o=Object(r.findIndex)(s.children,{categoryid:e.categoryid}),h=e.categoryid;if(s.children.splice(o,1),a.$emit("deleteStrategy",h),2===a.currentSelectCategoryId.length&&h===a.currentSelectCategoryId[1])if(s.children.length>0)n([s.categoryid,s.children[0].categoryid]);else{var l=Object(r.find)(t,function(t){return t.children.length>0});l?(n([l.categoryid,l.children[0].categoryid]),l.opened=!0):n(null)}0===s.children.length&&(s.ishaschildren=!1,s.isdelete=!0),a.$message("删除成功")}else a.$message("删除失败")})},allGroup:function(){},allStrategy:function(){},oneGroupAllStrategy:function(){},getHqchartConfig:function(t){i.a.get(i.a.apiDataStatus,{},function(e){200===e.code?t.form=e.data||[]:t.$message("获取设置失败")})},saveHqchartConfig:function(t,e){var a=t.map(function(t){return{dataPath:t.dataPath,type:t.type}}),r={data:a};i.a.post(i.a.apiHqchartConfig,r,function(t){200===t.code?e.$message("保存成功"):e.$message("保存失败")})},getBaseInfo:function(t){i.a.get(i.a.apiAboutInfo,{},function(e){t.baseInfo=e})},formatResData:function(t){return t.map(function(t){return t.percent=null!==t.percent?parseInt(t.percent):t.percent,t})},firstQueryStatusApi:function(t,e){t.dataStatusAry=this.formatResData(e.data);for(var a=!1,i=void 0,n=0;n<e.data.length;n++){var s=e.data[n];if(i=s,1===s.syncStatus||1===s.loadStatus){a=!0,-1===Object(r.findIndex)(t.syncAry,{type:s.type})&&t.syncAry.push({type:s.type});break}}console.log("needTimer:",a),a&&this.addTimer(t,i)},notFirstQueryStatusApi:function(t,e){t.syncAry.forEach(function(a,i){var n=Object(r.find)(t.dataStatusAry,{type:a.type}),s=Object(r.find)(e.data,{type:a.type});t.$set(n,"percent",s.percent),t.$set(n,"taskname",s.taskname)});for(var a=!1,i=0;i<e.data.length;i++){var n=e.data[i];if(1===n.syncStatus||1===n.loadStatus)return void(a=!1);a=!0}t.statusTimer&&a&&(clearInterval(t.statusTimer),t.statusTimer=null),a&&(t.dataStatusAry=e.data)},getDataStatus:function(t){var e=this;i.a.get(i.a.apiDataStatus,{},function(a){if(t.loading=!1,200===a.code){try{t.hasStatusData?e.notFirstQueryStatusApi(t,a):e.firstQueryStatusApi(t,a)}catch(e){console.log(e.message),t.$message(e.message)}t.hasStatusData=!0}else t.$message(a.msg)},function(e){t.$message.error("获取数据状态失败"),t.loading=!1})},dataSync:function(t,e,a){var n=this;i.a.post(i.a.apiDataSync,t,function(t){if(200===t.code){a.syncStatus=t.syncStatus;var i=Object(r.findIndex)(e.dataStatusAry,{type:a.type});a.percent=0,e.dataStatusAry.splice(i,1,a),e.$message(t.msg),-1===Object(r.findIndex)(e.syncAry,{type:a.type})&&e.syncAry.push({type:a.type}),n.addTimer(e,a)}else e.$message("同步失败")})},addTimer:function(t,e){var a=this;e.taskname&&(e.taskname=""),e.percent&&(e.percent=0),null===t.statusTimer?t.statusTimer=setInterval(function(){a.getDataStatus(t)},2e3):(clearInterval(t.statusTimer),t.statusTimer=null)},indexRun:function(t,e){i.a.post(i.a.apiRun,t,function(t){t.code=0,0===t.code?window.open("./klinshow.html","_blank"):e.$message(t.msg)})},apiDataLoad:function(t,e,a){var n=this;i.a.post(i.a.apiDataLoad,t,function(t){if(200===t.code){a.loadStatus=t.loadStatus;var i=Object(r.findIndex)(e.dataStatusAry,{type:a.type});e.dataStatusAry.splice(i,1,a),e.$message(t.msg),-1===Object(r.findIndex)(e.syncAry,{type:a.type})&&e.syncAry.push({type:a.type}),n.addTimer(e,a)}else e.$message(t.msg)})}}},,,,,,,function(t,e,a){"use strict";var i=a(8);e.a={name:"StockSearch",props:["isShowBtn","btnText","noPadding"],data:function(){return{inputValue:{id:"",name:"",symbol:""},searchLoading:!1,resultOptions:[]}},methods:{selectStockFun:function(){this.isShowBtn||this.$emit("addSymbol",this.inputValue)},remoteMethod:function(t){var e=this;""!==t?(this.searchLoading=!0,i.a.post(i.a.apiStockSearch,{key:t},function(t){e.searchLoading=!1,e.resultOptions=t.data})):this.resultOptions=[]},addSymbol:function(){""!==this.inputValue.id&&""!==this.inputValue.name&&""!==this.inputValue.symbol?this.$emit("addSymbol",this.inputValue):this.$message("请搜索股票")}}}},function(t,e,a){"use strict";t.exports=function(t,e){return function(){for(var a=new Array(arguments.length),i=0;i<a.length;i++)a[i]=arguments[i];return t.apply(e,a)}}},function(t,e,a){"use strict";function i(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var r=a(1);t.exports=function(t,e,a){if(!e)return t;var n;if(a)n=a(e);else if(r.isURLSearchParams(e))n=e.toString();else{var s=[];r.forEach(e,function(t,e){null!==t&&void 0!==t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),s.push(i(e)+"="+i(t))}))}),n=s.join("&")}if(n){var o=t.indexOf("#");-1!==o&&(t=t.slice(0,o)),t+=(-1===t.indexOf("?")?"?":"&")+n}return t}},function(t,e,a){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,a){"use strict";(function(e){function i(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var r=a(1),n=a(79),s={"Content-Type":"application/x-www-form-urlencoded"},o={adapter:function(){var t;return"undefined"!=typeof XMLHttpRequest?t=a(38):void 0!==e&&"[object process]"===Object.prototype.toString.call(e)&&(t=a(38)),t}(),transformRequest:[function(t,e){return n(e,"Accept"),n(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(i(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)?(i(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};o.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],function(t){o.headers[t]={}}),r.forEach(["post","put","patch"],function(t){o.headers[t]=r.merge(s)}),t.exports=o}).call(e,a(70))},function(t,e,a){"use strict";var i=a(1),r=a(80),n=a(82),s=a(35),o=a(83),h=a(86),l=a(87),u=a(39);t.exports=function(t){return new Promise(function(e,a){var c=t.data,d=t.headers;i.isFormData(c)&&delete d["Content-Type"];var f=new XMLHttpRequest;if(t.auth){var m=t.auth.username||"",C=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";d.Authorization="Basic "+btoa(m+":"+C)}var p=o(t.baseURL,t.url);if(f.open(t.method.toUpperCase(),s(p,t.params,t.paramsSerializer),!0),f.timeout=t.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var i="getAllResponseHeaders"in f?h(f.getAllResponseHeaders()):null,n=t.responseType&&"text"!==t.responseType?f.response:f.responseText,s={data:n,status:f.status,statusText:f.statusText,headers:i,config:t,request:f};r(e,a,s),f=null}},f.onabort=function(){f&&(a(u("Request aborted",t,"ECONNABORTED",f)),f=null)},f.onerror=function(){a(u("Network Error",t,null,f)),f=null},f.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),a(u(e,t,"ECONNABORTED",f)),f=null},i.isStandardBrowserEnv()){var D=(t.withCredentials||l(p))&&t.xsrfCookieName?n.read(t.xsrfCookieName):void 0;D&&(d[t.xsrfHeaderName]=D)}if("setRequestHeader"in f&&i.forEach(d,function(t,e){void 0===c&&"content-type"===e.toLowerCase()?delete d[e]:f.setRequestHeader(e,t)}),i.isUndefined(t.withCredentials)||(f.withCredentials=!!t.withCredentials),t.responseType)try{f.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&f.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){f&&(f.abort(),a(t),f=null)}),c||(c=null),f.send(c)})}},function(t,e,a){"use strict";var i=a(81);t.exports=function(t,e,a,r,n){var s=new Error(t);return i(s,e,a,r,n)}},function(t,e,a){"use strict";var i=a(1);t.exports=function(t,e){function a(t,e){return i.isPlainObject(t)&&i.isPlainObject(e)?i.merge(t,e):i.isPlainObject(e)?i.merge({},e):i.isArray(e)?e.slice():e}function r(r){i.isUndefined(e[r])?i.isUndefined(t[r])||(n[r]=a(void 0,t[r])):n[r]=a(t[r],e[r])}e=e||{};var n={},s=["url","method","data"],o=["headers","auth","proxy","params"],h=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],l=["validateStatus"];i.forEach(s,function(t){i.isUndefined(e[t])||(n[t]=a(void 0,e[t]))}),i.forEach(o,r),i.forEach(h,function(r){i.isUndefined(e[r])?i.isUndefined(t[r])||(n[r]=a(void 0,t[r])):n[r]=a(void 0,e[r])}),i.forEach(l,function(i){i in e?n[i]=a(t[i],e[i]):i in t&&(n[i]=a(void 0,t[i]))});var u=s.concat(o).concat(h).concat(l),c=Object.keys(t).concat(Object.keys(e)).filter(function(t){return-1===u.indexOf(t)});return i.forEach(c,r),n}},function(t,e,a){"use strict";function i(t){this.message=t}i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,t.exports=i},,,,,,,,,,function(t,e,a){var i=a(20),r=a(152),n=a(153),s=a(19),o=a(59),h=a(116),l={},u={},e=t.exports=function(t,e,a,c,d){var f,m,C,p,D=d?function(){return t}:h(t),v=i(a,c,e?2:1),g=0;if("function"!=typeof D)throw TypeError(t+" is not iterable!");if(n(D)){for(f=o(t.length);f>g;g++)if((p=e?v(s(m=t[g])[0],m[1]):v(t[g]))===l||p===u)return p}else for(C=D.call(t);!(m=C.next()).done;)if((p=r(C,v,m.value,e))===l||p===u)return p};e.BREAK=l,e.RETURN=u},,function(t,e,a){t.exports=a(74)},,,,,,,,,,,function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},,,function(t,e,a){t.exports=a.p+"images/m.9058942c.png"},function(t,e,a){t.exports=a.p+"images/p.4db238fd.png"},function(t,e,a){t.exports=a.p+"images/y.23d1dd4a.png"},,function(t,e,a){"use strict";function i(t){a(72)}var r=a(33),n=a(113),s=a(4),o=i,h=s(r.a,n.a,!1,o,null,null);e.a=h.exports},function(t,e,a){var i=a(73);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(3)("5b18b622",i,!0,{})},function(t,e,a){e=t.exports=a(2)(!1),e.push([t.i,".inputWrap{display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;height:47px;-ms-flex-align:center;align-items:center;padding:0 12px 15px;box-sizing:border-box}.inputWrap.noPaddingStyle{padding:0}.inputWrap .el-input{width:204px;margin-right:4px}",""])},function(t,e,a){"use strict";function i(t){var e=new s(t),a=n(s.prototype.request,e);return r.extend(a,s.prototype,e),r.extend(a,e),a}var r=a(1),n=a(34),s=a(75),o=a(40),h=a(37),l=i(h);l.Axios=s,l.create=function(t){return i(o(l.defaults,t))},l.Cancel=a(41),l.CancelToken=a(88),l.isCancel=a(36),l.all=function(t){return Promise.all(t)},l.spread=a(89),t.exports=l,t.exports.default=l},function(t,e,a){"use strict";function i(t){this.defaults=t,this.interceptors={request:new s,response:new s}}var r=a(1),n=a(35),s=a(76),o=a(77),h=a(40);i.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=h(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[o,void 0],a=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)a=a.then(e.shift(),e.shift());return a},i.prototype.getUri=function(t){return t=h(this.defaults,t),n(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],function(t){i.prototype[t]=function(e,a){return this.request(h(a||{},{method:t,url:e,data:(a||{}).data}))}}),r.forEach(["post","put","patch"],function(t){i.prototype[t]=function(e,a,i){return this.request(h(i||{},{method:t,url:e,data:a}))}}),t.exports=i},function(t,e,a){"use strict";function i(){this.handlers=[]}var r=a(1);i.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){r.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=i},function(t,e,a){"use strict";function i(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var r=a(1),n=a(78),s=a(36),o=a(37);t.exports=function(t){return i(t),t.headers=t.headers||{},t.data=n(t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),r.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||o.adapter)(t).then(function(e){return i(t),e.data=n(e.data,e.headers,t.transformResponse),e},function(e){return s(e)||(i(t),e&&e.response&&(e.response.data=n(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e,a){"use strict";var i=a(1);t.exports=function(t,e,a){return i.forEach(a,function(a){t=a(t,e)}),t}},function(t,e,a){"use strict";var i=a(1);t.exports=function(t,e){i.forEach(t,function(a,i){i!==e&&i.toUpperCase()===e.toUpperCase()&&(t[e]=a,delete t[i])})}},function(t,e,a){"use strict";var i=a(39);t.exports=function(t,e,a){var r=a.config.validateStatus;a.status&&r&&!r(a.status)?e(i("Request failed with status code "+a.status,a.config,null,a.request,a)):t(a)}},function(t,e,a){"use strict";t.exports=function(t,e,a,i,r){return t.config=e,a&&(t.code=a),t.request=i,t.response=r,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},function(t,e,a){"use strict";var i=a(1);t.exports=i.isStandardBrowserEnv()?function(){return{write:function(t,e,a,r,n,s){var o=[];o.push(t+"="+encodeURIComponent(e)),i.isNumber(a)&&o.push("expires="+new Date(a).toGMTString()),i.isString(r)&&o.push("path="+r),i.isString(n)&&o.push("domain="+n),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(t,e,a){"use strict";var i=a(84),r=a(85);t.exports=function(t,e){return t&&!i(e)?r(t,e):e}},function(t,e,a){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,a){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,a){"use strict";var i=a(1),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,a,n,s={};return t?(i.forEach(t.split("\n"),function(t){if(n=t.indexOf(":"),e=i.trim(t.substr(0,n)).toLowerCase(),a=i.trim(t.substr(n+1)),e){if(s[e]&&r.indexOf(e)>=0)return;s[e]="set-cookie"===e?(s[e]?s[e]:[]).concat([a]):s[e]?s[e]+", "+a:a}}),s):s}},function(t,e,a){"use strict";var i=a(1);t.exports=i.isStandardBrowserEnv()?function(){function t(t){var e=t;return a&&(r.setAttribute("href",e),e=r.href),r.setAttribute("href",e),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}var e,a=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");return e=t(window.location.href),function(a){var r=i.isString(a)?t(a):a;return r.protocol===e.protocol&&r.host===e.host}}():function(){return function(){return!0}}()},function(t,e,a){"use strict";function i(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var a=this;t(function(t){a.reason||(a.reason=new r(t),e(a.reason))})}var r=a(41);i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var t;return{token:new i(function(e){t=e}),cancel:t}},t.exports=i},function(t,e,a){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},,,,,,,,,,,,,,,,,,,,,,,,function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"inputWrap",class:{noPaddingStyle:t.noPadding}},[a("el-select",{staticClass:"stockSearchSelect",attrs:{size:"small","value-key":"symbol",filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入股票代码或简称","remote-method":t.remoteMethod,loading:t.searchLoading},on:{change:t.selectStockFun},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}},t._l(t.resultOptions,function(e){return a("el-option",{key:e.symbol,attrs:{label:e.name,value:e}},[t._v("\n      "+t._s(e.symbol)+" "+t._s(e.name)+"\n    ")])}),1),t._v(" "),t.isShowBtn?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.addSymbol}},[t._v(t._s(t.btnText?t.btnText:"添加"))]):t._e()],1)},r=[],n={render:i,staticRenderFns:r};e.a=n},function(t,e,a){var i=a(44),r=a(11)("toStringTag"),n="Arguments"==i(function(){return arguments}()),s=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,a,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(a=s(e=Object(t),r))?a:n?i(e):"Object"==(o=i(e))&&"function"==typeof e.callee?"Arguments":o}},function(t,e){t.exports=function(t,e,a,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(a+": incorrect invocation!");return t}},function(t,e,a){var i=a(114),r=a(11)("iterator"),n=a(48);t.exports=a(6).getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||n[i(t)]}},function(t,e,a){"use strict";function i(t){var e,a;this.promise=new t(function(t,i){if(void 0!==e||void 0!==a)throw TypeError("Bad Promise constructor");e=t,a=i}),this.resolve=r(e),this.reject=r(a)}var r=a(42);t.exports.f=function(t){return new i(t)}},function(t,e,a){var i=a(21);t.exports=function(t,e,a){for(var r in e)a&&t[r]?t[r]=e[r]:i(t,r,e[r]);return t}},function(t,e,a){var i=a(17);t.exports=function(t,e){if(!i(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,a){t.exports={default:a(460),__esModule:!0}},function(t,e,a){var i,r;/*!
 * jQuery JavaScript Library v3.5.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2020-05-04T22:49Z
 */
!function(e,a){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?a(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return a(t)}:a(e)}("undefined"!=typeof window?window:this,function(a,n){"use strict";function s(t,e,a){a=a||Lt;var i,r,n=a.createElement("script");if(n.text=t,e)for(i in Mt)(r=e[i]||e.getAttribute&&e.getAttribute(i))&&n.setAttribute(i,r);a.head.appendChild(n).parentNode.removeChild(n)}function o(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?Dt[vt.call(t)]||"object":typeof t}function h(t){var e=!!t&&"length"in t&&t.length,a=o(t);return!It(t)&&!xt(t)&&("array"===a||0===e||"number"==typeof e&&e>0&&e-1 in t)}function l(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}function u(t,e,a){return It(e)?_t.grep(t,function(t,i){return!!e.call(t,i,t)!==a}):e.nodeType?_t.grep(t,function(t){return t===e!==a}):"string"!=typeof e?_t.grep(t,function(t){return pt.call(e,t)>-1!==a}):_t.filter(e,t,a)}function c(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function d(t){var e={};return _t.each(t.match(kt)||[],function(t,a){e[a]=!0}),e}function f(t){return t}function m(t){throw t}function C(t,e,a,i){var r;try{t&&It(r=t.promise)?r.call(t).done(e).fail(a):t&&It(r=t.then)?r.call(t,e,a):e.apply(void 0,[t].slice(i))}catch(t){a.apply(void 0,[t])}}function p(){Lt.removeEventListener("DOMContentLoaded",p),a.removeEventListener("load",p),_t.ready()}function D(t,e){return e.toUpperCase()}function v(t){return t.replace(Vt,"ms-").replace(Gt,D)}function g(){this.expando=_t.expando+g.uid++}function S(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:Kt.test(t)?JSON.parse(t):t)}function T(t,e,a){var i;if(void 0===a&&1===t.nodeType)if(i="data-"+e.replace(jt,"-$&").toLowerCase(),"string"==typeof(a=t.getAttribute(i))){try{a=S(a)}catch(t){}Ut.set(t,e,a)}else a=void 0;return a}function y(t,e,a,i){var r,n,s=20,o=i?function(){return i.cur()}:function(){return _t.css(t,e,"")},h=o(),l=a&&a[3]||(_t.cssNumber[e]?"":"px"),u=t.nodeType&&(_t.cssNumber[e]||"px"!==l&&+h)&&Jt.exec(_t.css(t,e));if(u&&u[3]!==l){for(h/=2,l=l||u[3],u=+h||1;s--;)_t.style(t,e,u+l),(1-n)*(1-(n=o()/h||.5))<=0&&(s=0),u/=n;u*=2,_t.style(t,e,u+l),a=a||[]}return a&&(u=+u||+h||0,r=a[1]?u+(a[1]+1)*a[2]:+a[2],i&&(i.unit=l,i.start=u,i.end=r)),r}function I(t){var e,a=t.ownerDocument,i=t.nodeName,r=ee[i];return r||(e=a.body.appendChild(a.createElement(i)),r=_t.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),ee[i]=r,r)}function x(t,e){for(var a,i,r=[],n=0,s=t.length;n<s;n++)i=t[n],i.style&&(a=i.style.display,e?("none"===a&&(r[n]=Xt.get(i,"display")||null,r[n]||(i.style.display="")),""===i.style.display&&te(i)&&(r[n]=I(i))):"none"!==a&&(r[n]="none",Xt.set(i,"display",a)));for(n=0;n<s;n++)null!=r[n]&&(t[n].style.display=r[n]);return t}function L(t,e){var a;return a=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&l(t,e)?_t.merge([t],a):a}function M(t,e){for(var a=0,i=t.length;a<i;a++)Xt.set(t[a],"globalEval",!e||Xt.get(e[a],"globalEval"))}function _(t,e,a,i,r){for(var n,s,h,l,u,c,d=e.createDocumentFragment(),f=[],m=0,C=t.length;m<C;m++)if((n=t[m])||0===n)if("object"===o(n))_t.merge(f,n.nodeType?[n]:n);else if(se.test(n)){for(s=s||d.appendChild(e.createElement("div")),h=(ie.exec(n)||["",""])[1].toLowerCase(),l=ne[h]||ne._default,s.innerHTML=l[1]+_t.htmlPrefilter(n)+l[2],c=l[0];c--;)s=s.lastChild;_t.merge(f,s.childNodes),s=d.firstChild,s.textContent=""}else f.push(e.createTextNode(n));for(d.textContent="",m=0;n=f[m++];)if(i&&_t.inArray(n,i)>-1)r&&r.push(n);else if(u=Qt(n),s=L(d.appendChild(n),"script"),u&&M(s),a)for(c=0;n=s[c++];)re.test(n.type||"")&&a.push(n);return d}function b(){return!0}function w(){return!1}function F(t,e){return t===E()==("focus"===e)}function E(){try{return Lt.activeElement}catch(t){}}function A(t,e,a,i,r,n){var s,o;if("object"==typeof e){"string"!=typeof a&&(i=i||a,a=void 0);for(o in e)A(t,o,a,i,e[o],n);return t}if(null==i&&null==r?(r=a,i=a=void 0):null==r&&("string"==typeof a?(r=i,i=void 0):(r=i,i=a,a=void 0)),!1===r)r=w;else if(!r)return t;return 1===n&&(s=r,r=function(t){return _t().off(t),s.apply(this,arguments)},r.guid=s.guid||(s.guid=_t.guid++)),t.each(function(){_t.event.add(this,e,r,i,a)})}function N(t,e,a){if(!a)return void(void 0===Xt.get(t,e)&&_t.event.add(t,e,b));Xt.set(t,e,!1),_t.event.add(t,e,{namespace:!1,handler:function(t){var i,r,n=Xt.get(this,e);if(1&t.isTrigger&&this[e]){if(n.length)(_t.event.special[e]||{}).delegateType&&t.stopPropagation();else if(n=ft.call(arguments),Xt.set(this,e,n),i=a(this,e),this[e](),r=Xt.get(this,e),n!==r||i?Xt.set(this,e,!1):r={},n!==r)return t.stopImmediatePropagation(),t.preventDefault(),r.value}else n.length&&(Xt.set(this,e,{value:_t.event.trigger(_t.extend(n[0],_t.Event.prototype),n.slice(1),this)}),t.stopImmediatePropagation())}})}function O(t,e){return l(t,"table")&&l(11!==e.nodeType?e:e.firstChild,"tr")?_t(t).children("tbody")[0]||t:t}function P(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function R(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function k(t,e){var a,i,r,n,s,o,h;if(1===e.nodeType){if(Xt.hasData(t)&&(n=Xt.get(t),h=n.events)){Xt.remove(e,"handle events");for(r in h)for(a=0,i=h[r].length;a<i;a++)_t.event.add(e,r,h[r][a])}Ut.hasData(t)&&(s=Ut.access(t),o=_t.extend({},s),Ut.set(e,o))}}function B(t,e){var a=e.nodeName.toLowerCase();"input"===a&&ae.test(t.type)?e.checked=t.checked:"input"!==a&&"textarea"!==a||(e.defaultValue=t.defaultValue)}function Y(t,e,a,i){e=mt(e);var r,n,o,h,l,u,c=0,d=t.length,f=d-1,m=e[0],C=It(m);if(C||d>1&&"string"==typeof m&&!yt.checkClone&&ce.test(m))return t.each(function(r){var n=t.eq(r);C&&(e[0]=m.call(this,r,n.html())),Y(n,e,a,i)});if(d&&(r=_(e,t[0].ownerDocument,!1,t,i),n=r.firstChild,1===r.childNodes.length&&(r=n),n||i)){for(o=_t.map(L(r,"script"),P),h=o.length;c<d;c++)l=r,c!==f&&(l=_t.clone(l,!0,!0),h&&_t.merge(o,L(l,"script"))),a.call(t[c],l,c);if(h)for(u=o[o.length-1].ownerDocument,_t.map(o,R),c=0;c<h;c++)l=o[c],re.test(l.type||"")&&!Xt.access(l,"globalEval")&&_t.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?_t._evalUrl&&!l.noModule&&_t._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},u):s(l.textContent.replace(de,""),l,u))}return t}function H(t,e,a){for(var i,r=e?_t.filter(e,t):t,n=0;null!=(i=r[n]);n++)a||1!==i.nodeType||_t.cleanData(L(i)),i.parentNode&&(a&&Qt(i)&&M(L(i,"script")),i.parentNode.removeChild(i));return t}function V(t,e,a){var i,r,n,s,o=t.style;return a=a||me(t),a&&(s=a.getPropertyValue(e)||a[e],""!==s||Qt(t)||(s=_t.style(t,e)),!yt.pixelBoxStyles()&&fe.test(s)&&pe.test(e)&&(i=o.width,r=o.minWidth,n=o.maxWidth,o.minWidth=o.maxWidth=o.width=s,s=a.width,o.width=i,o.minWidth=r,o.maxWidth=n)),void 0!==s?s+"":s}function G(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function W(t){for(var e=t[0].toUpperCase()+t.slice(1),a=De.length;a--;)if((t=De[a]+e)in ve)return t}function X(t){var e=_t.cssProps[t]||ge[t];return e||(t in ve?t:ge[t]=W(t)||t)}function U(t,e,a){var i=Jt.exec(e);return i?Math.max(0,i[2]-(a||0))+(i[3]||"px"):e}function K(t,e,a,i,r,n){var s="width"===e?1:0,o=0,h=0;if(a===(i?"border":"content"))return 0;for(;s<4;s+=2)"margin"===a&&(h+=_t.css(t,a+qt[s],!0,r)),i?("content"===a&&(h-=_t.css(t,"padding"+qt[s],!0,r)),"margin"!==a&&(h-=_t.css(t,"border"+qt[s]+"Width",!0,r))):(h+=_t.css(t,"padding"+qt[s],!0,r),"padding"!==a?h+=_t.css(t,"border"+qt[s]+"Width",!0,r):o+=_t.css(t,"border"+qt[s]+"Width",!0,r));return!i&&n>=0&&(h+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-n-h-o-.5))||0),h}function j(t,e,a){var i=me(t),r=!yt.boxSizingReliable()||a,n=r&&"border-box"===_t.css(t,"boxSizing",!1,i),s=n,o=V(t,e,i),h="offset"+e[0].toUpperCase()+e.slice(1);if(fe.test(o)){if(!a)return o;o="auto"}return(!yt.boxSizingReliable()&&n||!yt.reliableTrDimensions()&&l(t,"tr")||"auto"===o||!parseFloat(o)&&"inline"===_t.css(t,"display",!1,i))&&t.getClientRects().length&&(n="border-box"===_t.css(t,"boxSizing",!1,i),(s=h in t)&&(o=t[h])),(o=parseFloat(o)||0)+K(t,e,a||(n?"border":"content"),s,i,o)+"px"}function z(t,e,a,i,r){return new z.prototype.init(t,e,a,i,r)}function J(){Le&&(!1===Lt.hidden&&a.requestAnimationFrame?a.requestAnimationFrame(J):a.setTimeout(J,_t.fx.interval),_t.fx.tick())}function q(){return a.setTimeout(function(){xe=void 0}),xe=Date.now()}function Z(t,e){var a,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)a=qt[i],r["margin"+a]=r["padding"+a]=t;return e&&(r.opacity=r.width=t),r}function Q(t,e,a){for(var i,r=(et.tweeners[e]||[]).concat(et.tweeners["*"]),n=0,s=r.length;n<s;n++)if(i=r[n].call(a,e,t))return i}function $(t,e,a){var i,r,n,s,o,h,l,u,c="width"in e||"height"in e,d=this,f={},m=t.style,C=t.nodeType&&te(t),p=Xt.get(t,"fxshow");a.queue||(s=_t._queueHooks(t,"fx"),null==s.unqueued&&(s.unqueued=0,o=s.empty.fire,s.empty.fire=function(){s.unqueued||o()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,_t.queue(t,"fx").length||s.empty.fire()})}));for(i in e)if(r=e[i],Me.test(r)){if(delete e[i],n=n||"toggle"===r,r===(C?"hide":"show")){if("show"!==r||!p||void 0===p[i])continue;C=!0}f[i]=p&&p[i]||_t.style(t,i)}if((h=!_t.isEmptyObject(e))||!_t.isEmptyObject(f)){c&&1===t.nodeType&&(a.overflow=[m.overflow,m.overflowX,m.overflowY],l=p&&p.display,null==l&&(l=Xt.get(t,"display")),u=_t.css(t,"display"),"none"===u&&(l?u=l:(x([t],!0),l=t.style.display||l,u=_t.css(t,"display"),x([t]))),("inline"===u||"inline-block"===u&&null!=l)&&"none"===_t.css(t,"float")&&(h||(d.done(function(){m.display=l}),null==l&&(u=m.display,l="none"===u?"":u)),m.display="inline-block")),a.overflow&&(m.overflow="hidden",d.always(function(){m.overflow=a.overflow[0],m.overflowX=a.overflow[1],m.overflowY=a.overflow[2]})),h=!1;for(i in f)h||(p?"hidden"in p&&(C=p.hidden):p=Xt.access(t,"fxshow",{display:l}),n&&(p.hidden=!C),C&&x([t],!0),d.done(function(){C||x([t]),Xt.remove(t,"fxshow");for(i in f)_t.style(t,i,f[i])})),h=Q(C?p[i]:0,i,d),i in p||(p[i]=h.start,C&&(h.end=h.start,h.start=0))}}function tt(t,e){var a,i,r,n,s;for(a in t)if(i=v(a),r=e[i],n=t[a],Array.isArray(n)&&(r=n[1],n=t[a]=n[0]),a!==i&&(t[i]=n,delete t[a]),(s=_t.cssHooks[i])&&"expand"in s){n=s.expand(n),delete t[i];for(a in n)a in t||(t[a]=n[a],e[a]=r)}else e[i]=r}function et(t,e,a){var i,r,n=0,s=et.prefilters.length,o=_t.Deferred().always(function(){delete h.elem}),h=function(){if(r)return!1;for(var e=xe||q(),a=Math.max(0,l.startTime+l.duration-e),i=a/l.duration||0,n=1-i,s=0,h=l.tweens.length;s<h;s++)l.tweens[s].run(n);return o.notifyWith(t,[l,n,a]),n<1&&h?a:(h||o.notifyWith(t,[l,1,0]),o.resolveWith(t,[l]),!1)},l=o.promise({elem:t,props:_t.extend({},e),opts:_t.extend(!0,{specialEasing:{},easing:_t.easing._default},a),originalProperties:e,originalOptions:a,startTime:xe||q(),duration:a.duration,tweens:[],createTween:function(e,a){var i=_t.Tween(t,l.opts,e,a,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(i),i},stop:function(e){var a=0,i=e?l.tweens.length:0;if(r)return this;for(r=!0;a<i;a++)l.tweens[a].run(1);return e?(o.notifyWith(t,[l,1,0]),o.resolveWith(t,[l,e])):o.rejectWith(t,[l,e]),this}}),u=l.props;for(tt(u,l.opts.specialEasing);n<s;n++)if(i=et.prefilters[n].call(l,t,u,l.opts))return It(i.stop)&&(_t._queueHooks(l.elem,l.opts.queue).stop=i.stop.bind(i)),i;return _t.map(u,Q,l),It(l.opts.start)&&l.opts.start.call(t,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),_t.fx.timer(_t.extend(h,{elem:t,anim:l,queue:l.opts.queue})),l}function at(t){return(t.match(kt)||[]).join(" ")}function it(t){return t.getAttribute&&t.getAttribute("class")||""}function rt(t){return Array.isArray(t)?t:"string"==typeof t?t.match(kt)||[]:[]}function nt(t,e,a,i){var r;if(Array.isArray(e))_t.each(e,function(e,r){a||Be.test(t)?i(t,r):nt(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,a,i)});else if(a||"object"!==o(e))i(t,e);else for(r in e)nt(t+"["+r+"]",e[r],a,i)}function st(t){return function(e,a){"string"!=typeof e&&(a=e,e="*");var i,r=0,n=e.toLowerCase().match(kt)||[];if(It(a))for(;i=n[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(a)):(t[i]=t[i]||[]).push(a)}}function ot(t,e,a,i){function r(o){var h;return n[o]=!0,_t.each(t[o]||[],function(t,o){var l=o(e,a,i);return"string"!=typeof l||s||n[l]?s?!(h=l):void 0:(e.dataTypes.unshift(l),r(l),!1)}),h}var n={},s=t===qe;return r(e.dataTypes[0])||!n["*"]&&r("*")}function ht(t,e){var a,i,r=_t.ajaxSettings.flatOptions||{};for(a in e)void 0!==e[a]&&((r[a]?t:i||(i={}))[a]=e[a]);return i&&_t.extend(!0,t,i),t}function lt(t,e,a){for(var i,r,n,s,o=t.contents,h=t.dataTypes;"*"===h[0];)h.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in o)if(o[r]&&o[r].test(i)){h.unshift(r);break}if(h[0]in a)n=h[0];else{for(r in a){if(!h[0]||t.converters[r+" "+h[0]]){n=r;break}s||(s=r)}n=n||s}if(n)return n!==h[0]&&h.unshift(n),a[n]}function ut(t,e,a,i){var r,n,s,o,h,l={},u=t.dataTypes.slice();if(u[1])for(s in t.converters)l[s.toLowerCase()]=t.converters[s];for(n=u.shift();n;)if(t.responseFields[n]&&(a[t.responseFields[n]]=e),!h&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),h=n,n=u.shift())if("*"===n)n=h;else if("*"!==h&&h!==n){if(!(s=l[h+" "+n]||l["* "+n]))for(r in l)if(o=r.split(" "),o[1]===n&&(s=l[h+" "+o[0]]||l["* "+o[0]])){!0===s?s=l[r]:!0!==l[r]&&(n=o[0],u.unshift(o[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+h+" to "+n}}}return{state:"success",data:e}}var ct=[],dt=Object.getPrototypeOf,ft=ct.slice,mt=ct.flat?function(t){return ct.flat.call(t)}:function(t){return ct.concat.apply([],t)},Ct=ct.push,pt=ct.indexOf,Dt={},vt=Dt.toString,gt=Dt.hasOwnProperty,St=gt.toString,Tt=St.call(Object),yt={},It=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},xt=function(t){return null!=t&&t===t.window},Lt=a.document,Mt={type:!0,src:!0,nonce:!0,noModule:!0},_t=function(t,e){return new _t.fn.init(t,e)};_t.fn=_t.prototype={jquery:"3.5.1",constructor:_t,length:0,toArray:function(){return ft.call(this)},get:function(t){return null==t?ft.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=_t.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return _t.each(this,t)},map:function(t){return this.pushStack(_t.map(this,function(e,a){return t.call(e,a,e)}))},slice:function(){return this.pushStack(ft.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(_t.grep(this,function(t,e){return(e+1)%2}))},odd:function(){return this.pushStack(_t.grep(this,function(t,e){return e%2}))},eq:function(t){var e=this.length,a=+t+(t<0?e:0);return this.pushStack(a>=0&&a<e?[this[a]]:[])},end:function(){return this.prevObject||this.constructor()},push:Ct,sort:ct.sort,splice:ct.splice},_t.extend=_t.fn.extend=function(){var t,e,a,i,r,n,s=arguments[0]||{},o=1,h=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[o]||{},o++),"object"==typeof s||It(s)||(s={}),o===h&&(s=this,o--);o<h;o++)if(null!=(t=arguments[o]))for(e in t)i=t[e],"__proto__"!==e&&s!==i&&(l&&i&&(_t.isPlainObject(i)||(r=Array.isArray(i)))?(a=s[e],n=r&&!Array.isArray(a)?[]:r||_t.isPlainObject(a)?a:{},r=!1,s[e]=_t.extend(l,n,i)):void 0!==i&&(s[e]=i));return s},_t.extend({expando:"jQuery"+("3.5.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,a;return!(!t||"[object Object]"!==vt.call(t))&&(!(e=dt(t))||"function"==typeof(a=gt.call(e,"constructor")&&e.constructor)&&St.call(a)===Tt)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,a){s(t,{nonce:e&&e.nonce},a)},each:function(t,e){var a,i=0;if(h(t))for(a=t.length;i<a&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},makeArray:function(t,e){var a=e||[];return null!=t&&(h(Object(t))?_t.merge(a,"string"==typeof t?[t]:t):Ct.call(a,t)),a},inArray:function(t,e,a){return null==e?-1:pt.call(e,t,a)},merge:function(t,e){for(var a=+e.length,i=0,r=t.length;i<a;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,a){for(var i=[],r=0,n=t.length,s=!a;r<n;r++)!e(t[r],r)!==s&&i.push(t[r]);return i},map:function(t,e,a){var i,r,n=0,s=[];if(h(t))for(i=t.length;n<i;n++)null!=(r=e(t[n],n,a))&&s.push(r);else for(n in t)null!=(r=e(t[n],n,a))&&s.push(r);return mt(s)},guid:1,support:yt}),"function"==typeof Symbol&&(_t.fn[Symbol.iterator]=ct[Symbol.iterator]),_t.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){Dt["[object "+e+"]"]=e.toLowerCase()});var bt=/*!
 * Sizzle CSS Selector Engine v2.3.5
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2020-03-14
 */
function(t){function e(t,e,a,i){var r,n,s,o,h,u,d,f=e&&e.ownerDocument,m=e?e.nodeType:9;if(a=a||[],"string"!=typeof t||!t||1!==m&&9!==m&&11!==m)return a;if(!i&&(F(e),e=e||E,N)){if(11!==m&&(h=Dt.exec(t)))if(r=h[1]){if(9===m){if(!(s=e.getElementById(r)))return a;if(s.id===r)return a.push(s),a}else if(f&&(s=f.getElementById(r))&&k(e,s)&&s.id===r)return a.push(s),a}else{if(h[2])return Z.apply(a,e.getElementsByTagName(t)),a;if((r=h[3])&&S.getElementsByClassName&&e.getElementsByClassName)return Z.apply(a,e.getElementsByClassName(r)),a}if(S.qsa&&!U[t+" "]&&(!O||!O.test(t))&&(1!==m||"object"!==e.nodeName.toLowerCase())){if(d=t,f=e,1===m&&(lt.test(t)||ht.test(t))){for(f=vt.test(t)&&l(e.parentNode)||e,f===e&&S.scope||((o=e.getAttribute("id"))?o=o.replace(Tt,yt):e.setAttribute("id",o=B)),u=x(t),n=u.length;n--;)u[n]=(o?"#"+o:":scope")+" "+c(u[n]);d=u.join(",")}try{return Z.apply(a,f.querySelectorAll(d)),a}catch(e){U(t,!0)}finally{o===B&&e.removeAttribute("id")}}}return M(t.replace(st,"$1"),e,a,i)}function a(){function t(a,i){return e.push(a+" ")>T.cacheLength&&delete t[e.shift()],t[a+" "]=i}var e=[];return t}function i(t){return t[B]=!0,t}function r(t){var e=E.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function n(t,e){for(var a=t.split("|"),i=a.length;i--;)T.attrHandle[a[i]]=e}function s(t,e){var a=e&&t,i=a&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(a)for(;a=a.nextSibling;)if(a===e)return-1;return t?1:-1}function o(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&xt(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function h(t){return i(function(e){return e=+e,i(function(a,i){for(var r,n=t([],a.length,e),s=n.length;s--;)a[r=n[s]]&&(a[r]=!(i[r]=a[r]))})})}function l(t){return t&&void 0!==t.getElementsByTagName&&t}function u(){}function c(t){for(var e=0,a=t.length,i="";e<a;e++)i+=t[e].value;return i}function d(t,e,a){var i=e.dir,r=e.next,n=r||i,s=a&&"parentNode"===n,o=V++;return e.first?function(e,a,r){for(;e=e[i];)if(1===e.nodeType||s)return t(e,a,r);return!1}:function(e,a,h){var l,u,c,d=[H,o];if(h){for(;e=e[i];)if((1===e.nodeType||s)&&t(e,a,h))return!0}else for(;e=e[i];)if(1===e.nodeType||s)if(c=e[B]||(e[B]={}),u=c[e.uniqueID]||(c[e.uniqueID]={}),r&&r===e.nodeName.toLowerCase())e=e[i]||e;else{if((l=u[n])&&l[0]===H&&l[1]===o)return d[2]=l[2];if(u[n]=d,d[2]=t(e,a,h))return!0}return!1}}function f(t){return t.length>1?function(e,a,i){for(var r=t.length;r--;)if(!t[r](e,a,i))return!1;return!0}:t[0]}function m(t,a,i){for(var r=0,n=a.length;r<n;r++)e(t,a[r],i);return i}function C(t,e,a,i,r){for(var n,s=[],o=0,h=t.length,l=null!=e;o<h;o++)(n=t[o])&&(a&&!a(n,i,r)||(s.push(n),l&&e.push(o)));return s}function p(t,e,a,r,n,s){return r&&!r[B]&&(r=p(r)),n&&!n[B]&&(n=p(n,s)),i(function(i,s,o,h){var l,u,c,d=[],f=[],p=s.length,D=i||m(e||"*",o.nodeType?[o]:o,[]),v=!t||!i&&e?D:C(D,d,t,o,h),g=a?n||(i?t:p||r)?[]:s:v;if(a&&a(v,g,o,h),r)for(l=C(g,f),r(l,[],o,h),u=l.length;u--;)(c=l[u])&&(g[f[u]]=!(v[f[u]]=c));if(i){if(n||t){if(n){for(l=[],u=g.length;u--;)(c=g[u])&&l.push(v[u]=c);n(null,g=[],l,h)}for(u=g.length;u--;)(c=g[u])&&(l=n?$(i,c):d[u])>-1&&(i[l]=!(s[l]=c))}}else g=C(g===s?g.splice(p,g.length):g),n?n(null,s,g,h):Z.apply(s,g)})}function D(t){for(var e,a,i,r=t.length,n=T.relative[t[0].type],s=n||T.relative[" "],o=n?1:0,h=d(function(t){return t===e},s,!0),l=d(function(t){return $(e,t)>-1},s,!0),u=[function(t,a,i){var r=!n&&(i||a!==_)||((e=a).nodeType?h(t,a,i):l(t,a,i));return e=null,r}];o<r;o++)if(a=T.relative[t[o].type])u=[d(f(u),a)];else{if(a=T.filter[t[o].type].apply(null,t[o].matches),a[B]){for(i=++o;i<r&&!T.relative[t[i].type];i++);return p(o>1&&f(u),o>1&&c(t.slice(0,o-1).concat({value:" "===t[o-2].type?"*":""})).replace(st,"$1"),a,o<i&&D(t.slice(o,i)),i<r&&D(t=t.slice(i)),i<r&&c(t))}u.push(a)}return f(u)}function v(t,a){var r=a.length>0,n=t.length>0,s=function(i,s,o,h,l){var u,c,d,f=0,m="0",p=i&&[],D=[],v=_,g=i||n&&T.find.TAG("*",l),S=H+=null==v?1:Math.random()||.1,y=g.length;for(l&&(_=s==E||s||l);m!==y&&null!=(u=g[m]);m++){if(n&&u){for(c=0,s||u.ownerDocument==E||(F(u),o=!N);d=t[c++];)if(d(u,s||E,o)){h.push(u);break}l&&(H=S)}r&&((u=!d&&u)&&f--,i&&p.push(u))}if(f+=m,r&&m!==f){for(c=0;d=a[c++];)d(p,D,s,o);if(i){if(f>0)for(;m--;)p[m]||D[m]||(D[m]=J.call(h));D=C(D)}Z.apply(h,D),l&&!i&&D.length>0&&f+a.length>1&&e.uniqueSort(h)}return l&&(H=S,_=v),p};return r?i(s):s}var g,S,T,y,I,x,L,M,_,b,w,F,E,A,N,O,P,R,k,B="sizzle"+1*new Date,Y=t.document,H=0,V=0,G=a(),W=a(),X=a(),U=a(),K=function(t,e){return t===e&&(w=!0),0},j={}.hasOwnProperty,z=[],J=z.pop,q=z.push,Z=z.push,Q=z.slice,$=function(t,e){for(var a=0,i=t.length;a<i;a++)if(t[a]===e)return a;return-1},tt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",et="[\\x20\\t\\r\\n\\f]",at="(?:\\\\[\\da-fA-F]{1,6}"+et+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",it="\\["+et+"*("+at+")(?:"+et+"*([*^$|!~]?=)"+et+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+at+"))|)"+et+"*\\]",rt=":("+at+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+it+")*)|.*)\\)|)",nt=new RegExp(et+"+","g"),st=new RegExp("^"+et+"+|((?:^|[^\\\\])(?:\\\\.)*)"+et+"+$","g"),ot=new RegExp("^"+et+"*,"+et+"*"),ht=new RegExp("^"+et+"*([>+~]|"+et+")"+et+"*"),lt=new RegExp(et+"|>"),ut=new RegExp(rt),ct=new RegExp("^"+at+"$"),dt={ID:new RegExp("^#("+at+")"),CLASS:new RegExp("^\\.("+at+")"),TAG:new RegExp("^("+at+"|[*])"),ATTR:new RegExp("^"+it),PSEUDO:new RegExp("^"+rt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+et+"*(even|odd|(([+-]|)(\\d*)n|)"+et+"*(?:([+-]|)"+et+"*(\\d+)|))"+et+"*\\)|)","i"),bool:new RegExp("^(?:"+tt+")$","i"),needsContext:new RegExp("^"+et+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+et+"*((?:-\\d)?\\d*)"+et+"*\\)|)(?=[^-]|$)","i")},ft=/HTML$/i,mt=/^(?:input|select|textarea|button)$/i,Ct=/^h\d$/i,pt=/^[^{]+\{\s*\[native \w/,Dt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,vt=/[+~]/,gt=new RegExp("\\\\[\\da-fA-F]{1,6}"+et+"?|\\\\([^\\r\\n\\f])","g"),St=function(t,e){var a="0x"+t.slice(1)-65536;return e||(a<0?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,1023&a|56320))},Tt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,yt=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},It=function(){F()},xt=d(function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{Z.apply(z=Q.call(Y.childNodes),Y.childNodes),z[Y.childNodes.length].nodeType}catch(t){Z={apply:z.length?function(t,e){q.apply(t,Q.call(e))}:function(t,e){for(var a=t.length,i=0;t[a++]=e[i++];);t.length=a-1}}}S=e.support={},I=e.isXML=function(t){var e=t.namespaceURI,a=(t.ownerDocument||t).documentElement;return!ft.test(e||a&&a.nodeName||"HTML")},F=e.setDocument=function(t){var e,a,i=t?t.ownerDocument||t:Y;return i!=E&&9===i.nodeType&&i.documentElement?(E=i,A=E.documentElement,N=!I(E),Y!=E&&(a=E.defaultView)&&a.top!==a&&(a.addEventListener?a.addEventListener("unload",It,!1):a.attachEvent&&a.attachEvent("onunload",It)),S.scope=r(function(t){return A.appendChild(t).appendChild(E.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length}),S.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),S.getElementsByTagName=r(function(t){return t.appendChild(E.createComment("")),!t.getElementsByTagName("*").length}),S.getElementsByClassName=pt.test(E.getElementsByClassName),S.getById=r(function(t){return A.appendChild(t).id=B,!E.getElementsByName||!E.getElementsByName(B).length}),S.getById?(T.filter.ID=function(t){var e=t.replace(gt,St);return function(t){return t.getAttribute("id")===e}},T.find.ID=function(t,e){if(void 0!==e.getElementById&&N){var a=e.getElementById(t);return a?[a]:[]}}):(T.filter.ID=function(t){var e=t.replace(gt,St);return function(t){var a=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return a&&a.value===e}},T.find.ID=function(t,e){if(void 0!==e.getElementById&&N){var a,i,r,n=e.getElementById(t);if(n){if((a=n.getAttributeNode("id"))&&a.value===t)return[n];for(r=e.getElementsByName(t),i=0;n=r[i++];)if((a=n.getAttributeNode("id"))&&a.value===t)return[n]}return[]}}),T.find.TAG=S.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):S.qsa?e.querySelectorAll(t):void 0}:function(t,e){var a,i=[],r=0,n=e.getElementsByTagName(t);if("*"===t){for(;a=n[r++];)1===a.nodeType&&i.push(a);return i}return n},T.find.CLASS=S.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&N)return e.getElementsByClassName(t)},P=[],O=[],(S.qsa=pt.test(E.querySelectorAll))&&(r(function(t){var e;A.appendChild(t).innerHTML="<a id='"+B+"'></a><select id='"+B+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&O.push("[*^$]="+et+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||O.push("\\["+et+"*(?:value|"+tt+")"),t.querySelectorAll("[id~="+B+"-]").length||O.push("~="),e=E.createElement("input"),e.setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||O.push("\\["+et+"*name"+et+"*="+et+"*(?:''|\"\")"),t.querySelectorAll(":checked").length||O.push(":checked"),t.querySelectorAll("a#"+B+"+*").length||O.push(".#.+[+~]"),t.querySelectorAll("\\\f"),O.push("[\\r\\n\\f]")}),r(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=E.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&O.push("name"+et+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&O.push(":enabled",":disabled"),A.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&O.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),O.push(",.*:")})),(S.matchesSelector=pt.test(R=A.matches||A.webkitMatchesSelector||A.mozMatchesSelector||A.oMatchesSelector||A.msMatchesSelector))&&r(function(t){S.disconnectedMatch=R.call(t,"*"),R.call(t,"[s!='']:x"),P.push("!=",rt)}),O=O.length&&new RegExp(O.join("|")),P=P.length&&new RegExp(P.join("|")),e=pt.test(A.compareDocumentPosition),k=e||pt.test(A.contains)?function(t,e){var a=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(a.contains?a.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},K=e?function(t,e){if(t===e)return w=!0,0;var a=!t.compareDocumentPosition-!e.compareDocumentPosition;return a||(a=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&a||!S.sortDetached&&e.compareDocumentPosition(t)===a?t==E||t.ownerDocument==Y&&k(Y,t)?-1:e==E||e.ownerDocument==Y&&k(Y,e)?1:b?$(b,t)-$(b,e):0:4&a?-1:1)}:function(t,e){if(t===e)return w=!0,0;var a,i=0,r=t.parentNode,n=e.parentNode,o=[t],h=[e];if(!r||!n)return t==E?-1:e==E?1:r?-1:n?1:b?$(b,t)-$(b,e):0;if(r===n)return s(t,e);for(a=t;a=a.parentNode;)o.unshift(a);for(a=e;a=a.parentNode;)h.unshift(a);for(;o[i]===h[i];)i++;return i?s(o[i],h[i]):o[i]==Y?-1:h[i]==Y?1:0},E):E},e.matches=function(t,a){return e(t,null,null,a)},e.matchesSelector=function(t,a){if(F(t),S.matchesSelector&&N&&!U[a+" "]&&(!P||!P.test(a))&&(!O||!O.test(a)))try{var i=R.call(t,a);if(i||S.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){U(a,!0)}return e(a,E,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!=E&&F(t),k(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!=E&&F(t);var a=T.attrHandle[e.toLowerCase()],i=a&&j.call(T.attrHandle,e.toLowerCase())?a(t,e,!N):void 0;return void 0!==i?i:S.attributes||!N?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.escape=function(t){return(t+"").replace(Tt,yt)},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,a=[],i=0,r=0;if(w=!S.detectDuplicates,b=!S.sortStable&&t.slice(0),t.sort(K),w){for(;e=t[r++];)e===t[r]&&(i=a.push(r));for(;i--;)t.splice(a[i],1)}return b=null,t},y=e.getText=function(t){var e,a="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)a+=y(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)a+=y(e);return a},T=e.selectors={cacheLength:50,createPseudo:i,match:dt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(gt,St),t[3]=(t[3]||t[4]||t[5]||"").replace(gt,St),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,a=!t[6]&&t[2];return dt.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":a&&ut.test(a)&&(e=x(a,!0))&&(e=a.indexOf(")",a.length-e)-a.length)&&(t[0]=t[0].slice(0,e),t[2]=a.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(gt,St).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=G[t+" "];return e||(e=new RegExp("(^|"+et+")"+t+"("+et+"|$)"))&&G(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,a,i){return function(r){var n=e.attr(r,t);return null==n?"!="===a:!a||(n+="","="===a?n===i:"!="===a?n!==i:"^="===a?i&&0===n.indexOf(i):"*="===a?i&&n.indexOf(i)>-1:"$="===a?i&&n.slice(-i.length)===i:"~="===a?(" "+n.replace(nt," ")+" ").indexOf(i)>-1:"|="===a&&(n===i||n.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,a,i,r){var n="nth"!==t.slice(0,3),s="last"!==t.slice(-4),o="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,a,h){var l,u,c,d,f,m,C=n!==s?"nextSibling":"previousSibling",p=e.parentNode,D=o&&e.nodeName.toLowerCase(),v=!h&&!o,g=!1;if(p){if(n){for(;C;){for(d=e;d=d[C];)if(o?d.nodeName.toLowerCase()===D:1===d.nodeType)return!1;m=C="only"===t&&!m&&"nextSibling"}return!0}if(m=[s?p.firstChild:p.lastChild],s&&v){for(d=p,c=d[B]||(d[B]={}),u=c[d.uniqueID]||(c[d.uniqueID]={}),l=u[t]||[],f=l[0]===H&&l[1],g=f&&l[2],d=f&&p.childNodes[f];d=++f&&d&&d[C]||(g=f=0)||m.pop();)if(1===d.nodeType&&++g&&d===e){u[t]=[H,f,g];break}}else if(v&&(d=e,c=d[B]||(d[B]={}),u=c[d.uniqueID]||(c[d.uniqueID]={}),l=u[t]||[],f=l[0]===H&&l[1],g=f),!1===g)for(;(d=++f&&d&&d[C]||(g=f=0)||m.pop())&&((o?d.nodeName.toLowerCase()!==D:1!==d.nodeType)||!++g||(v&&(c=d[B]||(d[B]={}),u=c[d.uniqueID]||(c[d.uniqueID]={}),u[t]=[H,g]),d!==e)););return(g-=r)===i||g%i==0&&g/i>=0}}},PSEUDO:function(t,a){var r,n=T.pseudos[t]||T.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return n[B]?n(a):n.length>1?(r=[t,t,"",a],T.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,r=n(t,a),s=r.length;s--;)i=$(t,r[s]),t[i]=!(e[i]=r[s])}):function(t){return n(t,0,r)}):n}},pseudos:{not:i(function(t){var e=[],a=[],r=L(t.replace(st,"$1"));return r[B]?i(function(t,e,a,i){for(var n,s=r(t,null,i,[]),o=t.length;o--;)(n=s[o])&&(t[o]=!(e[o]=n))}):function(t,i,n){return e[0]=t,r(e,null,n,a),e[0]=null,!a.pop()}}),has:i(function(t){return function(a){return e(t,a).length>0}}),contains:i(function(t){return t=t.replace(gt,St),function(e){return(e.textContent||y(e)).indexOf(t)>-1}}),lang:i(function(t){return ct.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(gt,St).toLowerCase(),function(e){var a;do{if(a=N?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(a=a.toLowerCase())===t||0===a.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var a=t.location&&t.location.hash;return a&&a.slice(1)===e.id},root:function(t){return t===A},focus:function(t){return t===E.activeElement&&(!E.hasFocus||E.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:o(!1),disabled:o(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!T.pseudos.empty(t)},header:function(t){return Ct.test(t.nodeName)},input:function(t){return mt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:h(function(){return[0]}),last:h(function(t,e){return[e-1]}),eq:h(function(t,e,a){return[a<0?a+e:a]}),even:h(function(t,e){for(var a=0;a<e;a+=2)t.push(a);return t}),odd:h(function(t,e){for(var a=1;a<e;a+=2)t.push(a);return t}),lt:h(function(t,e,a){for(var i=a<0?a+e:a>e?e:a;--i>=0;)t.push(i);return t}),gt:h(function(t,e,a){for(var i=a<0?a+e:a;++i<e;)t.push(i);return t})}},T.pseudos.nth=T.pseudos.eq;for(g in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[g]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(g);for(g in{submit:!0,reset:!0})T.pseudos[g]=function(t){return function(e){var a=e.nodeName.toLowerCase();return("input"===a||"button"===a)&&e.type===t}}(g);return u.prototype=T.filters=T.pseudos,T.setFilters=new u,x=e.tokenize=function(t,a){var i,r,n,s,o,h,l,u=W[t+" "];if(u)return a?0:u.slice(0);for(o=t,h=[],l=T.preFilter;o;){i&&!(r=ot.exec(o))||(r&&(o=o.slice(r[0].length)||o),h.push(n=[])),i=!1,(r=ht.exec(o))&&(i=r.shift(),n.push({value:i,type:r[0].replace(st," ")}),o=o.slice(i.length));for(s in T.filter)!(r=dt[s].exec(o))||l[s]&&!(r=l[s](r))||(i=r.shift(),n.push({value:i,type:s,matches:r}),o=o.slice(i.length));if(!i)break}return a?o.length:o?e.error(t):W(t,h).slice(0)},L=e.compile=function(t,e){var a,i=[],r=[],n=X[t+" "];if(!n){for(e||(e=x(t)),a=e.length;a--;)n=D(e[a]),n[B]?i.push(n):r.push(n);n=X(t,v(r,i)),n.selector=t}return n},M=e.select=function(t,e,a,i){var r,n,s,o,h,u="function"==typeof t&&t,d=!i&&x(t=u.selector||t);if(a=a||[],1===d.length){if(n=d[0]=d[0].slice(0),n.length>2&&"ID"===(s=n[0]).type&&9===e.nodeType&&N&&T.relative[n[1].type]){if(!(e=(T.find.ID(s.matches[0].replace(gt,St),e)||[])[0]))return a;u&&(e=e.parentNode),t=t.slice(n.shift().value.length)}for(r=dt.needsContext.test(t)?0:n.length;r--&&(s=n[r],!T.relative[o=s.type]);)if((h=T.find[o])&&(i=h(s.matches[0].replace(gt,St),vt.test(n[0].type)&&l(e.parentNode)||e))){if(n.splice(r,1),!(t=i.length&&c(n)))return Z.apply(a,i),a;break}}return(u||L(t,d))(i,e,!N,a,!e||vt.test(t)&&l(e.parentNode)||e),a},S.sortStable=B.split("").sort(K).join("")===B,S.detectDuplicates=!!w,F(),S.sortDetached=r(function(t){return 1&t.compareDocumentPosition(E.createElement("fieldset"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||n("type|href|height|width",function(t,e,a){if(!a)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),S.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||n("value",function(t,e,a){if(!a&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||n(tt,function(t,e,a){var i;if(!a)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(a);_t.find=bt,_t.expr=bt.selectors,_t.expr[":"]=_t.expr.pseudos,_t.uniqueSort=_t.unique=bt.uniqueSort,_t.text=bt.getText,_t.isXMLDoc=bt.isXML,_t.contains=bt.contains,_t.escapeSelector=bt.escape;var wt=function(t,e,a){for(var i=[],r=void 0!==a;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&_t(t).is(a))break;i.push(t)}return i},Ft=function(t,e){for(var a=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&a.push(t);return a},Et=_t.expr.match.needsContext,At=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;_t.filter=function(t,e,a){var i=e[0];return a&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?_t.find.matchesSelector(i,t)?[i]:[]:_t.find.matches(t,_t.grep(e,function(t){return 1===t.nodeType}))},_t.fn.extend({find:function(t){var e,a,i=this.length,r=this;if("string"!=typeof t)return this.pushStack(_t(t).filter(function(){for(e=0;e<i;e++)if(_t.contains(r[e],this))return!0}));for(a=this.pushStack([]),e=0;e<i;e++)_t.find(t,r[e],a);return i>1?_t.uniqueSort(a):a},filter:function(t){return this.pushStack(u(this,t||[],!1))},not:function(t){return this.pushStack(u(this,t||[],!0))},is:function(t){return!!u(this,"string"==typeof t&&Et.test(t)?_t(t):t||[],!1).length}});var Nt,Ot=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(_t.fn.init=function(t,e,a){var i,r;if(!t)return this;if(a=a||Nt,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:Ot.exec(t))||!i[1]&&e)return!e||e.jquery?(e||a).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof _t?e[0]:e,_t.merge(this,_t.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:Lt,!0)),At.test(i[1])&&_t.isPlainObject(e))for(i in e)It(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return r=Lt.getElementById(i[2]),r&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):It(t)?void 0!==a.ready?a.ready(t):t(_t):_t.makeArray(t,this)}).prototype=_t.fn,Nt=_t(Lt);var Pt=/^(?:parents|prev(?:Until|All))/,Rt={children:!0,contents:!0,next:!0,prev:!0};_t.fn.extend({has:function(t){var e=_t(t,this),a=e.length;return this.filter(function(){for(var t=0;t<a;t++)if(_t.contains(this,e[t]))return!0})},closest:function(t,e){var a,i=0,r=this.length,n=[],s="string"!=typeof t&&_t(t);if(!Et.test(t))for(;i<r;i++)for(a=this[i];a&&a!==e;a=a.parentNode)if(a.nodeType<11&&(s?s.index(a)>-1:1===a.nodeType&&_t.find.matchesSelector(a,t))){n.push(a);break}return this.pushStack(n.length>1?_t.uniqueSort(n):n)},index:function(t){return t?"string"==typeof t?pt.call(_t(t),this[0]):pt.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(_t.uniqueSort(_t.merge(this.get(),_t(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),_t.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return wt(t,"parentNode")},parentsUntil:function(t,e,a){return wt(t,"parentNode",a)},next:function(t){return c(t,"nextSibling")},prev:function(t){return c(t,"previousSibling")},nextAll:function(t){return wt(t,"nextSibling")},prevAll:function(t){return wt(t,"previousSibling")},nextUntil:function(t,e,a){return wt(t,"nextSibling",a)},prevUntil:function(t,e,a){return wt(t,"previousSibling",a)},siblings:function(t){return Ft((t.parentNode||{}).firstChild,t)},children:function(t){return Ft(t.firstChild)},contents:function(t){return null!=t.contentDocument&&dt(t.contentDocument)?t.contentDocument:(l(t,"template")&&(t=t.content||t),_t.merge([],t.childNodes))}},function(t,e){_t.fn[t]=function(a,i){var r=_t.map(this,e,a);return"Until"!==t.slice(-5)&&(i=a),i&&"string"==typeof i&&(r=_t.filter(i,r)),this.length>1&&(Rt[t]||_t.uniqueSort(r),Pt.test(t)&&r.reverse()),this.pushStack(r)}});var kt=/[^\x20\t\r\n\f]+/g;_t.Callbacks=function(t){t="string"==typeof t?d(t):_t.extend({},t);var e,a,i,r,n=[],s=[],h=-1,l=function(){for(r=r||t.once,i=e=!0;s.length;h=-1)for(a=s.shift();++h<n.length;)!1===n[h].apply(a[0],a[1])&&t.stopOnFalse&&(h=n.length,a=!1);t.memory||(a=!1),e=!1,r&&(n=a?[]:"")},u={add:function(){return n&&(a&&!e&&(h=n.length-1,s.push(a)),function e(a){_t.each(a,function(a,i){It(i)?t.unique&&u.has(i)||n.push(i):i&&i.length&&"string"!==o(i)&&e(i)})}(arguments),a&&!e&&l()),this},remove:function(){return _t.each(arguments,function(t,e){for(var a;(a=_t.inArray(e,n,a))>-1;)n.splice(a,1),a<=h&&h--}),this},has:function(t){return t?_t.inArray(t,n)>-1:n.length>0},empty:function(){return n&&(n=[]),this},disable:function(){return r=s=[],n=a="",this},disabled:function(){return!n},lock:function(){return r=s=[],a||e||(n=a=""),this},locked:function(){return!!r},fireWith:function(t,a){return r||(a=a||[],a=[t,a.slice?a.slice():a],s.push(a),e||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!i}};return u},_t.extend({Deferred:function(t){var e=[["notify","progress",_t.Callbacks("memory"),_t.Callbacks("memory"),2],["resolve","done",_t.Callbacks("once memory"),_t.Callbacks("once memory"),0,"resolved"],["reject","fail",_t.Callbacks("once memory"),_t.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return n.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return _t.Deferred(function(a){_t.each(e,function(e,i){var r=It(t[i[4]])&&t[i[4]];n[i[1]](function(){var t=r&&r.apply(this,arguments);t&&It(t.promise)?t.promise().progress(a.notify).done(a.resolve).fail(a.reject):a[i[0]+"With"](this,r?[t]:arguments)})}),t=null}).promise()},then:function(t,i,r){function n(t,e,i,r){return function(){var o=this,h=arguments,l=function(){var a,l;if(!(t<s)){if((a=i.apply(o,h))===e.promise())throw new TypeError("Thenable self-resolution");l=a&&("object"==typeof a||"function"==typeof a)&&a.then,It(l)?r?l.call(a,n(s,e,f,r),n(s,e,m,r)):(s++,l.call(a,n(s,e,f,r),n(s,e,m,r),n(s,e,f,e.notifyWith))):(i!==f&&(o=void 0,h=[a]),(r||e.resolveWith)(o,h))}},u=r?l:function(){try{l()}catch(a){_t.Deferred.exceptionHook&&_t.Deferred.exceptionHook(a,u.stackTrace),t+1>=s&&(i!==m&&(o=void 0,h=[a]),e.rejectWith(o,h))}};t?u():(_t.Deferred.getStackHook&&(u.stackTrace=_t.Deferred.getStackHook()),a.setTimeout(u))}}var s=0;return _t.Deferred(function(a){e[0][3].add(n(0,a,It(r)?r:f,a.notifyWith)),e[1][3].add(n(0,a,It(t)?t:f)),e[2][3].add(n(0,a,It(i)?i:m))}).promise()},promise:function(t){return null!=t?_t.extend(t,r):r}},n={};return _t.each(e,function(t,a){var s=a[2],o=a[5];r[a[1]]=s.add,o&&s.add(function(){i=o},e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),s.add(a[3].fire),n[a[0]]=function(){return n[a[0]+"With"](this===n?void 0:this,arguments),this},n[a[0]+"With"]=s.fireWith}),r.promise(n),t&&t.call(n,n),n},when:function(t){var e=arguments.length,a=e,i=Array(a),r=ft.call(arguments),n=_t.Deferred(),s=function(t){return function(a){i[t]=this,r[t]=arguments.length>1?ft.call(arguments):a,--e||n.resolveWith(i,r)}};if(e<=1&&(C(t,n.done(s(a)).resolve,n.reject,!e),"pending"===n.state()||It(r[a]&&r[a].then)))return n.then();for(;a--;)C(r[a],s(a),n.reject);return n.promise()}});var Bt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;_t.Deferred.exceptionHook=function(t,e){a.console&&a.console.warn&&t&&Bt.test(t.name)&&a.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},_t.readyException=function(t){a.setTimeout(function(){throw t})};var Yt=_t.Deferred();_t.fn.ready=function(t){return Yt.then(t).catch(function(t){_t.readyException(t)}),this},_t.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--_t.readyWait:_t.isReady)||(_t.isReady=!0,!0!==t&&--_t.readyWait>0||Yt.resolveWith(Lt,[_t]))}}),_t.ready.then=Yt.then,"complete"===Lt.readyState||"loading"!==Lt.readyState&&!Lt.documentElement.doScroll?a.setTimeout(_t.ready):(Lt.addEventListener("DOMContentLoaded",p),a.addEventListener("load",p));var Ht=function(t,e,a,i,r,n,s){var h=0,l=t.length,u=null==a;if("object"===o(a)){r=!0;for(h in a)Ht(t,e,h,a[h],!0,n,s)}else if(void 0!==i&&(r=!0,It(i)||(s=!0),u&&(s?(e.call(t,i),e=null):(u=e,e=function(t,e,a){return u.call(_t(t),a)})),e))for(;h<l;h++)e(t[h],a,s?i:i.call(t[h],h,e(t[h],a)));return r?t:u?e.call(t):l?e(t[0],a):n},Vt=/^-ms-/,Gt=/-([a-z])/g,Wt=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};g.uid=1,g.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Wt(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,a){var i,r=this.cache(t);if("string"==typeof e)r[v(e)]=a;else for(i in e)r[v(i)]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][v(e)]},access:function(t,e,a){return void 0===e||e&&"string"==typeof e&&void 0===a?this.get(t,e):(this.set(t,e,a),void 0!==a?a:e)},remove:function(t,e){var a,i=t[this.expando];if(void 0!==i){if(void 0!==e){Array.isArray(e)?e=e.map(v):(e=v(e),e=e in i?[e]:e.match(kt)||[]),a=e.length;for(;a--;)delete i[e[a]]}(void 0===e||_t.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!_t.isEmptyObject(e)}};var Xt=new g,Ut=new g,Kt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,jt=/[A-Z]/g;_t.extend({hasData:function(t){return Ut.hasData(t)||Xt.hasData(t)},data:function(t,e,a){return Ut.access(t,e,a)},removeData:function(t,e){Ut.remove(t,e)},_data:function(t,e,a){return Xt.access(t,e,a)},_removeData:function(t,e){Xt.remove(t,e)}}),_t.fn.extend({data:function(t,e){var a,i,r,n=this[0],s=n&&n.attributes;if(void 0===t){if(this.length&&(r=Ut.get(n),1===n.nodeType&&!Xt.get(n,"hasDataAttrs"))){for(a=s.length;a--;)s[a]&&(i=s[a].name,0===i.indexOf("data-")&&(i=v(i.slice(5)),T(n,i,r[i])));Xt.set(n,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){Ut.set(this,t)}):Ht(this,function(e){var a;if(n&&void 0===e){if(void 0!==(a=Ut.get(n,t)))return a;if(void 0!==(a=T(n,t)))return a}else this.each(function(){Ut.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Ut.remove(this,t)})}}),_t.extend({queue:function(t,e,a){var i;if(t)return e=(e||"fx")+"queue",i=Xt.get(t,e),a&&(!i||Array.isArray(a)?i=Xt.access(t,e,_t.makeArray(a)):i.push(a)),i||[]},dequeue:function(t,e){e=e||"fx";var a=_t.queue(t,e),i=a.length,r=a.shift(),n=_t._queueHooks(t,e),s=function(){_t.dequeue(t,e)};"inprogress"===r&&(r=a.shift(),i--),r&&("fx"===e&&a.unshift("inprogress"),delete n.stop,r.call(t,s,n)),!i&&n&&n.empty.fire()},_queueHooks:function(t,e){var a=e+"queueHooks";return Xt.get(t,a)||Xt.access(t,a,{empty:_t.Callbacks("once memory").add(function(){Xt.remove(t,[e+"queue",a])})})}}),_t.fn.extend({queue:function(t,e){var a=2;return"string"!=typeof t&&(e=t,t="fx",a--),arguments.length<a?_t.queue(this[0],t):void 0===e?this:this.each(function(){var a=_t.queue(this,t,e);_t._queueHooks(this,t),"fx"===t&&"inprogress"!==a[0]&&_t.dequeue(this,t)})},dequeue:function(t){return this.each(function(){_t.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var a,i=1,r=_t.Deferred(),n=this,s=this.length,o=function(){--i||r.resolveWith(n,[n])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(a=Xt.get(n[s],t+"queueHooks"))&&a.empty&&(i++,a.empty.add(o));return o(),r.promise(e)}});var zt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Jt=new RegExp("^(?:([+-])=|)("+zt+")([a-z%]*)$","i"),qt=["Top","Right","Bottom","Left"],Zt=Lt.documentElement,Qt=function(t){return _t.contains(t.ownerDocument,t)},$t={composed:!0};Zt.getRootNode&&(Qt=function(t){return _t.contains(t.ownerDocument,t)||t.getRootNode($t)===t.ownerDocument});var te=function(t,e){return t=e||t,"none"===t.style.display||""===t.style.display&&Qt(t)&&"none"===_t.css(t,"display")},ee={};_t.fn.extend({show:function(){return x(this,!0)},hide:function(){return x(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){te(this)?_t(this).show():_t(this).hide()})}});var ae=/^(?:checkbox|radio)$/i,ie=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,re=/^$|^module$|\/(?:java|ecma)script/i;!function(){var t=Lt.createDocumentFragment(),e=t.appendChild(Lt.createElement("div")),a=Lt.createElement("input");a.setAttribute("type","radio"),a.setAttribute("checked","checked"),a.setAttribute("name","t"),e.appendChild(a),yt.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",yt.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,e.innerHTML="<option></option>",yt.option=!!e.lastChild}();var ne={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ne.tbody=ne.tfoot=ne.colgroup=ne.caption=ne.thead,ne.th=ne.td,yt.option||(ne.optgroup=ne.option=[1,"<select multiple='multiple'>","</select>"]);var se=/<|&#?\w+;/,oe=/^key/,he=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,le=/^([^.]*)(?:\.(.+)|)/;_t.event={global:{},add:function(t,e,a,i,r){var n,s,o,h,l,u,c,d,f,m,C,p=Xt.get(t);if(Wt(t))for(a.handler&&(n=a,a=n.handler,r=n.selector),r&&_t.find.matchesSelector(Zt,r),a.guid||(a.guid=_t.guid++),(h=p.events)||(h=p.events=Object.create(null)),(s=p.handle)||(s=p.handle=function(e){return void 0!==_t&&_t.event.triggered!==e.type?_t.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(kt)||[""],l=e.length;l--;)o=le.exec(e[l])||[],f=C=o[1],m=(o[2]||"").split(".").sort(),f&&(c=_t.event.special[f]||{},f=(r?c.delegateType:c.bindType)||f,c=_t.event.special[f]||{},u=_t.extend({type:f,origType:C,data:i,handler:a,guid:a.guid,selector:r,needsContext:r&&_t.expr.match.needsContext.test(r),namespace:m.join(".")},n),(d=h[f])||(d=h[f]=[],d.delegateCount=0,c.setup&&!1!==c.setup.call(t,i,m,s)||t.addEventListener&&t.addEventListener(f,s)),c.add&&(c.add.call(t,u),u.handler.guid||(u.handler.guid=a.guid)),r?d.splice(d.delegateCount++,0,u):d.push(u),_t.event.global[f]=!0)},remove:function(t,e,a,i,r){var n,s,o,h,l,u,c,d,f,m,C,p=Xt.hasData(t)&&Xt.get(t);if(p&&(h=p.events)){for(e=(e||"").match(kt)||[""],l=e.length;l--;)if(o=le.exec(e[l])||[],f=C=o[1],m=(o[2]||"").split(".").sort(),f){for(c=_t.event.special[f]||{},f=(i?c.delegateType:c.bindType)||f,d=h[f]||[],o=o[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=n=d.length;n--;)u=d[n],!r&&C!==u.origType||a&&a.guid!==u.guid||o&&!o.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(d.splice(n,1),u.selector&&d.delegateCount--,c.remove&&c.remove.call(t,u));s&&!d.length&&(c.teardown&&!1!==c.teardown.call(t,m,p.handle)||_t.removeEvent(t,f,p.handle),delete h[f])}else for(f in h)_t.event.remove(t,f+e[l],a,i,!0);_t.isEmptyObject(h)&&Xt.remove(t,"handle events")}},dispatch:function(t){var e,a,i,r,n,s,o=new Array(arguments.length),h=_t.event.fix(t),l=(Xt.get(this,"events")||Object.create(null))[h.type]||[],u=_t.event.special[h.type]||{};for(o[0]=h,e=1;e<arguments.length;e++)o[e]=arguments[e];if(h.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,h)){for(s=_t.event.handlers.call(this,h,l),e=0;(r=s[e++])&&!h.isPropagationStopped();)for(h.currentTarget=r.elem,a=0;(n=r.handlers[a++])&&!h.isImmediatePropagationStopped();)h.rnamespace&&!1!==n.namespace&&!h.rnamespace.test(n.namespace)||(h.handleObj=n,h.data=n.data,void 0!==(i=((_t.event.special[n.origType]||{}).handle||n.handler).apply(r.elem,o))&&!1===(h.result=i)&&(h.preventDefault(),h.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,h),h.result}},handlers:function(t,e){var a,i,r,n,s,o=[],h=e.delegateCount,l=t.target;if(h&&l.nodeType&&!("click"===t.type&&t.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==t.type||!0!==l.disabled)){for(n=[],s={},a=0;a<h;a++)i=e[a],r=i.selector+" ",void 0===s[r]&&(s[r]=i.needsContext?_t(r,this).index(l)>-1:_t.find(r,this,null,[l]).length),s[r]&&n.push(i);n.length&&o.push({elem:l,handlers:n})}return l=this,h<e.length&&o.push({elem:l,handlers:e.slice(h)}),o},addProp:function(t,e){Object.defineProperty(_t.Event.prototype,t,{enumerable:!0,configurable:!0,get:It(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[_t.expando]?t:new _t.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return ae.test(e.type)&&e.click&&l(e,"input")&&N(e,"click",b),!1},trigger:function(t){var e=this||t;return ae.test(e.type)&&e.click&&l(e,"input")&&N(e,"click"),!0},_default:function(t){var e=t.target;return ae.test(e.type)&&e.click&&l(e,"input")&&Xt.get(e,"click")||l(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},_t.removeEvent=function(t,e,a){t.removeEventListener&&t.removeEventListener(e,a)},_t.Event=function(t,e){if(!(this instanceof _t.Event))return new _t.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?b:w,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&_t.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[_t.expando]=!0},_t.Event.prototype={constructor:_t.Event,isDefaultPrevented:w,isPropagationStopped:w,isImmediatePropagationStopped:w,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=b,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=b,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=b,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},_t.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&oe.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&he.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},_t.event.addProp),_t.each({focus:"focusin",blur:"focusout"},function(t,e){_t.event.special[t]={setup:function(){return N(this,t,F),!1},trigger:function(){return N(this,t),!0},delegateType:e}}),_t.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){_t.event.special[t]={delegateType:e,bindType:e,handle:function(t){var a,i=this,r=t.relatedTarget,n=t.handleObj;return r&&(r===i||_t.contains(i,r))||(t.type=n.origType,a=n.handler.apply(this,arguments),t.type=e),a}}}),_t.fn.extend({on:function(t,e,a,i){return A(this,t,e,a,i)},one:function(t,e,a,i){return A(this,t,e,a,i,1)},off:function(t,e,a){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,_t(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(a=e,e=void 0),!1===a&&(a=w),this.each(function(){_t.event.remove(this,t,a,e)})}});var ue=/<script|<style|<link/i,ce=/checked\s*(?:[^=]|=\s*.checked.)/i,de=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;_t.extend({htmlPrefilter:function(t){return t},clone:function(t,e,a){var i,r,n,s,o=t.cloneNode(!0),h=Qt(t);if(!(yt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||_t.isXMLDoc(t)))for(s=L(o),n=L(t),i=0,r=n.length;i<r;i++)B(n[i],s[i]);if(e)if(a)for(n=n||L(t),s=s||L(o),i=0,r=n.length;i<r;i++)k(n[i],s[i]);else k(t,o);return s=L(o,"script"),s.length>0&&M(s,!h&&L(t,"script")),o},cleanData:function(t){for(var e,a,i,r=_t.event.special,n=0;void 0!==(a=t[n]);n++)if(Wt(a)){if(e=a[Xt.expando]){if(e.events)for(i in e.events)r[i]?_t.event.remove(a,i):_t.removeEvent(a,i,e.handle);a[Xt.expando]=void 0}a[Ut.expando]&&(a[Ut.expando]=void 0)}}}),_t.fn.extend({detach:function(t){return H(this,t,!0)},remove:function(t){return H(this,t)},text:function(t){return Ht(this,function(t){return void 0===t?_t.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Y(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){O(this,t).appendChild(t)}})},prepend:function(){return Y(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=O(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Y(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Y(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(_t.cleanData(L(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return _t.clone(this,t,e)})},html:function(t){return Ht(this,function(t){var e=this[0]||{},a=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!ue.test(t)&&!ne[(ie.exec(t)||["",""])[1].toLowerCase()]){t=_t.htmlPrefilter(t);try{for(;a<i;a++)e=this[a]||{},1===e.nodeType&&(_t.cleanData(L(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return Y(this,arguments,function(e){var a=this.parentNode;_t.inArray(this,t)<0&&(_t.cleanData(L(this)),a&&a.replaceChild(e,this))},t)}}),_t.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){_t.fn[t]=function(t){for(var a,i=[],r=_t(t),n=r.length-1,s=0;s<=n;s++)a=s===n?this:this.clone(!0),_t(r[s])[e](a),Ct.apply(i,a.get());return this.pushStack(i)}});var fe=new RegExp("^("+zt+")(?!px)[a-z%]+$","i"),me=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=a),e.getComputedStyle(t)},Ce=function(t,e,a){var i,r,n={};for(r in e)n[r]=t.style[r],t.style[r]=e[r];i=a.call(t);for(r in e)t.style[r]=n[r];return i},pe=new RegExp(qt.join("|"),"i");!function(){function t(){if(u){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Zt.appendChild(l).appendChild(u);var t=a.getComputedStyle(u);i="1%"!==t.top,h=12===e(t.marginLeft),u.style.right="60%",s=36===e(t.right),r=36===e(t.width),u.style.position="absolute",n=12===e(u.offsetWidth/3),Zt.removeChild(l),u=null}}function e(t){return Math.round(parseFloat(t))}var i,r,n,s,o,h,l=Lt.createElement("div"),u=Lt.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",yt.clearCloneStyle="content-box"===u.style.backgroundClip,_t.extend(yt,{boxSizingReliable:function(){return t(),r},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),h},scrollboxSize:function(){return t(),n},reliableTrDimensions:function(){var t,e,i,r;return null==o&&(t=Lt.createElement("table"),e=Lt.createElement("tr"),i=Lt.createElement("div"),t.style.cssText="position:absolute;left:-11111px",e.style.height="1px",i.style.height="9px",Zt.appendChild(t).appendChild(e).appendChild(i),r=a.getComputedStyle(e),o=parseInt(r.height)>3,Zt.removeChild(t)),o}}))}();var De=["Webkit","Moz","ms"],ve=Lt.createElement("div").style,ge={},Se=/^(none|table(?!-c[ea]).+)/,Te=/^--/,ye={position:"absolute",visibility:"hidden",display:"block"},Ie={letterSpacing:"0",fontWeight:"400"};_t.extend({cssHooks:{opacity:{get:function(t,e){if(e){var a=V(t,"opacity");return""===a?"1":a}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,a,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,n,s,o=v(e),h=Te.test(e),l=t.style;if(h||(e=X(o)),s=_t.cssHooks[e]||_t.cssHooks[o],void 0===a)return s&&"get"in s&&void 0!==(r=s.get(t,!1,i))?r:l[e];n=typeof a,"string"===n&&(r=Jt.exec(a))&&r[1]&&(a=y(t,e,r),n="number"),null!=a&&a===a&&("number"!==n||h||(a+=r&&r[3]||(_t.cssNumber[o]?"":"px")),yt.clearCloneStyle||""!==a||0!==e.indexOf("background")||(l[e]="inherit"),s&&"set"in s&&void 0===(a=s.set(t,a,i))||(h?l.setProperty(e,a):l[e]=a))}},css:function(t,e,a,i){var r,n,s,o=v(e);return Te.test(e)||(e=X(o)),s=_t.cssHooks[e]||_t.cssHooks[o],s&&"get"in s&&(r=s.get(t,!0,a)),void 0===r&&(r=V(t,e,i)),"normal"===r&&e in Ie&&(r=Ie[e]),""===a||a?(n=parseFloat(r),!0===a||isFinite(n)?n||0:r):r}}),_t.each(["height","width"],function(t,e){_t.cssHooks[e]={get:function(t,a,i){if(a)return!Se.test(_t.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?j(t,e,i):Ce(t,ye,function(){return j(t,e,i)})},set:function(t,a,i){var r,n=me(t),s=!yt.scrollboxSize()&&"absolute"===n.position,o=s||i,h=o&&"border-box"===_t.css(t,"boxSizing",!1,n),l=i?K(t,e,i,h,n):0;return h&&s&&(l-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(n[e])-K(t,e,"border",!1,n)-.5)),l&&(r=Jt.exec(a))&&"px"!==(r[3]||"px")&&(t.style[e]=a,a=_t.css(t,e)),U(t,a,l)}}}),_t.cssHooks.marginLeft=G(yt.reliableMarginLeft,function(t,e){if(e)return(parseFloat(V(t,"marginLeft"))||t.getBoundingClientRect().left-Ce(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),_t.each({margin:"",padding:"",border:"Width"},function(t,e){_t.cssHooks[t+e]={expand:function(a){for(var i=0,r={},n="string"==typeof a?a.split(" "):[a];i<4;i++)r[t+qt[i]+e]=n[i]||n[i-2]||n[0];return r}},"margin"!==t&&(_t.cssHooks[t+e].set=U)}),_t.fn.extend({css:function(t,e){return Ht(this,function(t,e,a){var i,r,n={},s=0;if(Array.isArray(e)){for(i=me(t),r=e.length;s<r;s++)n[e[s]]=_t.css(t,e[s],!1,i);return n}return void 0!==a?_t.style(t,e,a):_t.css(t,e)},t,e,arguments.length>1)}}),_t.Tween=z,z.prototype={constructor:z,init:function(t,e,a,i,r,n){this.elem=t,this.prop=a,this.easing=r||_t.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=n||(_t.cssNumber[a]?"":"px")},cur:function(){var t=z.propHooks[this.prop];return t&&t.get?t.get(this):z.propHooks._default.get(this)},run:function(t){var e,a=z.propHooks[this.prop];return this.options.duration?this.pos=e=_t.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),a&&a.set?a.set(this):z.propHooks._default.set(this),this}},z.prototype.init.prototype=z.prototype,z.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=_t.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){_t.fx.step[t.prop]?_t.fx.step[t.prop](t):1!==t.elem.nodeType||!_t.cssHooks[t.prop]&&null==t.elem.style[X(t.prop)]?t.elem[t.prop]=t.now:_t.style(t.elem,t.prop,t.now+t.unit)}}},z.propHooks.scrollTop=z.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},_t.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},_t.fx=z.prototype.init,_t.fx.step={};var xe,Le,Me=/^(?:toggle|show|hide)$/,_e=/queueHooks$/;_t.Animation=_t.extend(et,{tweeners:{"*":[function(t,e){var a=this.createTween(t,e);return y(a.elem,t,Jt.exec(e),a),a}]},tweener:function(t,e){It(t)?(e=t,t=["*"]):t=t.match(kt);for(var a,i=0,r=t.length;i<r;i++)a=t[i],et.tweeners[a]=et.tweeners[a]||[],et.tweeners[a].unshift(e)},prefilters:[$],prefilter:function(t,e){e?et.prefilters.unshift(t):et.prefilters.push(t)}}),_t.speed=function(t,e,a){var i=t&&"object"==typeof t?_t.extend({},t):{complete:a||!a&&e||It(t)&&t,duration:t,easing:a&&e||e&&!It(e)&&e};return _t.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in _t.fx.speeds?i.duration=_t.fx.speeds[i.duration]:i.duration=_t.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){It(i.old)&&i.old.call(this),i.queue&&_t.dequeue(this,i.queue)},i},_t.fn.extend({fadeTo:function(t,e,a,i){return this.filter(te).css("opacity",0).show().end().animate({opacity:e},t,a,i)},animate:function(t,e,a,i){var r=_t.isEmptyObject(t),n=_t.speed(e,a,i),s=function(){var e=et(this,_t.extend({},t),n);(r||Xt.get(this,"finish"))&&e.stop(!0)};return s.finish=s,r||!1===n.queue?this.each(s):this.queue(n.queue,s)},stop:function(t,e,a){var i=function(t){var e=t.stop;delete t.stop,e(a)};return"string"!=typeof t&&(a=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",n=_t.timers,s=Xt.get(this);if(r)s[r]&&s[r].stop&&i(s[r]);else for(r in s)s[r]&&s[r].stop&&_e.test(r)&&i(s[r]);for(r=n.length;r--;)n[r].elem!==this||null!=t&&n[r].queue!==t||(n[r].anim.stop(a),e=!1,n.splice(r,1));!e&&a||_t.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,a=Xt.get(this),i=a[t+"queue"],r=a[t+"queueHooks"],n=_t.timers,s=i?i.length:0;for(a.finish=!0,_t.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=n.length;e--;)n[e].elem===this&&n[e].queue===t&&(n[e].anim.stop(!0),n.splice(e,1));for(e=0;e<s;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete a.finish})}}),_t.each(["toggle","show","hide"],function(t,e){var a=_t.fn[e];_t.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?a.apply(this,arguments):this.animate(Z(e,!0),t,i,r)}}),_t.each({slideDown:Z("show"),slideUp:Z("hide"),slideToggle:Z("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){_t.fn[t]=function(t,a,i){return this.animate(e,t,a,i)}}),_t.timers=[],_t.fx.tick=function(){var t,e=0,a=_t.timers;for(xe=Date.now();e<a.length;e++)(t=a[e])()||a[e]!==t||a.splice(e--,1);a.length||_t.fx.stop(),xe=void 0},_t.fx.timer=function(t){_t.timers.push(t),_t.fx.start()},_t.fx.interval=13,_t.fx.start=function(){Le||(Le=!0,J())},_t.fx.stop=function(){Le=null},_t.fx.speeds={slow:600,fast:200,_default:400},_t.fn.delay=function(t,e){return t=_t.fx?_t.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var r=a.setTimeout(e,t);i.stop=function(){a.clearTimeout(r)}})},function(){var t=Lt.createElement("input"),e=Lt.createElement("select"),a=e.appendChild(Lt.createElement("option"));t.type="checkbox",yt.checkOn=""!==t.value,yt.optSelected=a.selected,t=Lt.createElement("input"),t.value="t",t.type="radio",yt.radioValue="t"===t.value}();var be,we=_t.expr.attrHandle;_t.fn.extend({attr:function(t,e){return Ht(this,_t.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){_t.removeAttr(this,t)})}}),_t.extend({attr:function(t,e,a){var i,r,n=t.nodeType;if(3!==n&&8!==n&&2!==n)return void 0===t.getAttribute?_t.prop(t,e,a):(1===n&&_t.isXMLDoc(t)||(r=_t.attrHooks[e.toLowerCase()]||(_t.expr.match.bool.test(e)?be:void 0)),void 0!==a?null===a?void _t.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,a,e))?i:(t.setAttribute(e,a+""),a):r&&"get"in r&&null!==(i=r.get(t,e))?i:(i=_t.find.attr(t,e),null==i?void 0:i))},attrHooks:{type:{set:function(t,e){if(!yt.radioValue&&"radio"===e&&l(t,"input")){var a=t.value;return t.setAttribute("type",e),a&&(t.value=a),e}}}},removeAttr:function(t,e){var a,i=0,r=e&&e.match(kt);if(r&&1===t.nodeType)for(;a=r[i++];)t.removeAttribute(a)}}),be={set:function(t,e,a){return!1===e?_t.removeAttr(t,a):t.setAttribute(a,a),a}},_t.each(_t.expr.match.bool.source.match(/\w+/g),function(t,e){var a=we[e]||_t.find.attr;we[e]=function(t,e,i){var r,n,s=e.toLowerCase();return i||(n=we[s],we[s]=r,r=null!=a(t,e,i)?s:null,we[s]=n),r}});var Fe=/^(?:input|select|textarea|button)$/i,Ee=/^(?:a|area)$/i;_t.fn.extend({prop:function(t,e){return Ht(this,_t.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[_t.propFix[t]||t]})}}),_t.extend({prop:function(t,e,a){var i,r,n=t.nodeType;if(3!==n&&8!==n&&2!==n)return 1===n&&_t.isXMLDoc(t)||(e=_t.propFix[e]||e,r=_t.propHooks[e]),void 0!==a?r&&"set"in r&&void 0!==(i=r.set(t,a,e))?i:t[e]=a:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=_t.find.attr(t,"tabindex");return e?parseInt(e,10):Fe.test(t.nodeName)||Ee.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),yt.optSelected||(_t.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),_t.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){_t.propFix[this.toLowerCase()]=this}),_t.fn.extend({addClass:function(t){var e,a,i,r,n,s,o,h=0;if(It(t))return this.each(function(e){_t(this).addClass(t.call(this,e,it(this)))});if(e=rt(t),e.length)for(;a=this[h++];)if(r=it(a),i=1===a.nodeType&&" "+at(r)+" "){for(s=0;n=e[s++];)i.indexOf(" "+n+" ")<0&&(i+=n+" ");o=at(i),r!==o&&a.setAttribute("class",o)}return this},removeClass:function(t){var e,a,i,r,n,s,o,h=0;if(It(t))return this.each(function(e){_t(this).removeClass(t.call(this,e,it(this)))});if(!arguments.length)return this.attr("class","");if(e=rt(t),e.length)for(;a=this[h++];)if(r=it(a),i=1===a.nodeType&&" "+at(r)+" "){for(s=0;n=e[s++];)for(;i.indexOf(" "+n+" ")>-1;)i=i.replace(" "+n+" "," ");o=at(i),r!==o&&a.setAttribute("class",o)}return this},toggleClass:function(t,e){var a=typeof t,i="string"===a||Array.isArray(t);return"boolean"==typeof e&&i?e?this.addClass(t):this.removeClass(t):It(t)?this.each(function(a){_t(this).toggleClass(t.call(this,a,it(this),e),e)}):this.each(function(){var e,r,n,s;if(i)for(r=0,n=_t(this),s=rt(t);e=s[r++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else void 0!==t&&"boolean"!==a||(e=it(this),e&&Xt.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":Xt.get(this,"__className__")||""))})},hasClass:function(t){var e,a,i=0;for(e=" "+t+" ";a=this[i++];)if(1===a.nodeType&&(" "+at(it(a))+" ").indexOf(e)>-1)return!0;return!1}});var Ae=/\r/g;_t.fn.extend({val:function(t){var e,a,i,r=this[0];{if(arguments.length)return i=It(t),this.each(function(a){var r;1===this.nodeType&&(r=i?t.call(this,a,_t(this).val()):t,null==r?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=_t.map(r,function(t){return null==t?"":t+""})),(e=_t.valHooks[this.type]||_t.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))});if(r)return(e=_t.valHooks[r.type]||_t.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(a=e.get(r,"value"))?a:(a=r.value,"string"==typeof a?a.replace(Ae,""):null==a?"":a)}}}),_t.extend({valHooks:{option:{get:function(t){var e=_t.find.attr(t,"value");return null!=e?e:at(_t.text(t))}},select:{get:function(t){var e,a,i,r=t.options,n=t.selectedIndex,s="select-one"===t.type,o=s?null:[],h=s?n+1:r.length;for(i=n<0?h:s?n:0;i<h;i++)if(a=r[i],(a.selected||i===n)&&!a.disabled&&(!a.parentNode.disabled||!l(a.parentNode,"optgroup"))){if(e=_t(a).val(),s)return e;o.push(e)}return o},set:function(t,e){for(var a,i,r=t.options,n=_t.makeArray(e),s=r.length;s--;)i=r[s],(i.selected=_t.inArray(_t.valHooks.option.get(i),n)>-1)&&(a=!0);return a||(t.selectedIndex=-1),n}}}}),_t.each(["radio","checkbox"],function(){_t.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=_t.inArray(_t(t).val(),e)>-1}},yt.checkOn||(_t.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),yt.focusin="onfocusin"in a;var Ne=/^(?:focusinfocus|focusoutblur)$/,Oe=function(t){t.stopPropagation()};_t.extend(_t.event,{trigger:function(t,e,i,r){var n,s,o,h,l,u,c,d,f=[i||Lt],m=gt.call(t,"type")?t.type:t,C=gt.call(t,"namespace")?t.namespace.split("."):[];if(s=d=o=i=i||Lt,3!==i.nodeType&&8!==i.nodeType&&!Ne.test(m+_t.event.triggered)&&(m.indexOf(".")>-1&&(C=m.split("."),m=C.shift(),C.sort()),l=m.indexOf(":")<0&&"on"+m,t=t[_t.expando]?t:new _t.Event(m,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=C.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+C.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),e=null==e?[t]:_t.makeArray(e,[t]),c=_t.event.special[m]||{},r||!c.trigger||!1!==c.trigger.apply(i,e))){if(!r&&!c.noBubble&&!xt(i)){for(h=c.delegateType||m,Ne.test(h+m)||(s=s.parentNode);s;s=s.parentNode)f.push(s),o=s;o===(i.ownerDocument||Lt)&&f.push(o.defaultView||o.parentWindow||a)}for(n=0;(s=f[n++])&&!t.isPropagationStopped();)d=s,t.type=n>1?h:c.bindType||m,u=(Xt.get(s,"events")||Object.create(null))[t.type]&&Xt.get(s,"handle"),u&&u.apply(s,e),(u=l&&s[l])&&u.apply&&Wt(s)&&(t.result=u.apply(s,e),!1===t.result&&t.preventDefault());return t.type=m,r||t.isDefaultPrevented()||c._default&&!1!==c._default.apply(f.pop(),e)||!Wt(i)||l&&It(i[m])&&!xt(i)&&(o=i[l],o&&(i[l]=null),_t.event.triggered=m,t.isPropagationStopped()&&d.addEventListener(m,Oe),i[m](),t.isPropagationStopped()&&d.removeEventListener(m,Oe),_t.event.triggered=void 0,o&&(i[l]=o)),t.result}},simulate:function(t,e,a){var i=_t.extend(new _t.Event,a,{type:t,isSimulated:!0});_t.event.trigger(i,null,e)}}),_t.fn.extend({trigger:function(t,e){return this.each(function(){_t.event.trigger(t,e,this)})},triggerHandler:function(t,e){var a=this[0];if(a)return _t.event.trigger(t,e,a,!0)}}),yt.focusin||_t.each({focus:"focusin",blur:"focusout"},function(t,e){var a=function(t){_t.event.simulate(e,t.target,_t.event.fix(t))};_t.event.special[e]={setup:function(){var i=this.ownerDocument||this.document||this,r=Xt.access(i,e);r||i.addEventListener(t,a,!0),Xt.access(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,r=Xt.access(i,e)-1;r?Xt.access(i,e,r):(i.removeEventListener(t,a,!0),Xt.remove(i,e))}}});var Pe=a.location,Re={guid:Date.now()},ke=/\?/;_t.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new a.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||_t.error("Invalid XML: "+t),e};var Be=/\[\]$/,Ye=/\r?\n/g,He=/^(?:submit|button|image|reset|file)$/i,Ve=/^(?:input|select|textarea|keygen)/i;_t.param=function(t,e){var a,i=[],r=function(t,e){var a=It(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==a?"":a)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!_t.isPlainObject(t))_t.each(t,function(){r(this.name,this.value)});else for(a in t)nt(a,t[a],e,r);return i.join("&")},_t.fn.extend({serialize:function(){return _t.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=_t.prop(this,"elements");return t?_t.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!_t(this).is(":disabled")&&Ve.test(this.nodeName)&&!He.test(t)&&(this.checked||!ae.test(t))}).map(function(t,e){var a=_t(this).val();return null==a?null:Array.isArray(a)?_t.map(a,function(t){return{name:e.name,value:t.replace(Ye,"\r\n")}}):{name:e.name,value:a.replace(Ye,"\r\n")}}).get()}});var Ge=/%20/g,We=/#.*$/,Xe=/([?&])_=[^&]*/,Ue=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ke=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,je=/^(?:GET|HEAD)$/,ze=/^\/\//,Je={},qe={},Ze="*/".concat("*"),Qe=Lt.createElement("a");Qe.href=Pe.href,_t.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Pe.href,type:"GET",isLocal:Ke.test(Pe.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ze,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":_t.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?ht(ht(t,_t.ajaxSettings),e):ht(_t.ajaxSettings,t)},ajaxPrefilter:st(Je),ajaxTransport:st(qe),ajax:function(t,e){function i(t,e,i,o){var l,d,f,S,T,y=e;u||(u=!0,h&&a.clearTimeout(h),r=void 0,s=o||"",I.readyState=t>0?4:0,l=t>=200&&t<300||304===t,i&&(S=lt(m,I,i)),!l&&_t.inArray("script",m.dataTypes)>-1&&(m.converters["text script"]=function(){}),S=ut(m,S,I,l),l?(m.ifModified&&(T=I.getResponseHeader("Last-Modified"),T&&(_t.lastModified[n]=T),(T=I.getResponseHeader("etag"))&&(_t.etag[n]=T)),204===t||"HEAD"===m.type?y="nocontent":304===t?y="notmodified":(y=S.state,d=S.data,f=S.error,l=!f)):(f=y,!t&&y||(y="error",t<0&&(t=0))),I.status=t,I.statusText=(e||y)+"",l?D.resolveWith(C,[d,y,I]):D.rejectWith(C,[I,y,f]),I.statusCode(g),g=void 0,c&&p.trigger(l?"ajaxSuccess":"ajaxError",[I,m,l?d:f]),v.fireWith(C,[I,y]),c&&(p.trigger("ajaxComplete",[I,m]),--_t.active||_t.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var r,n,s,o,h,l,u,c,d,f,m=_t.ajaxSetup({},e),C=m.context||m,p=m.context&&(C.nodeType||C.jquery)?_t(C):_t.event,D=_t.Deferred(),v=_t.Callbacks("once memory"),g=m.statusCode||{},S={},T={},y="canceled",I={readyState:0,getResponseHeader:function(t){var e;if(u){if(!o)for(o={};e=Ue.exec(s);)o[e[1].toLowerCase()+" "]=(o[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=o[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return u?s:null},setRequestHeader:function(t,e){return null==u&&(t=T[t.toLowerCase()]=T[t.toLowerCase()]||t,S[t]=e),this},overrideMimeType:function(t){return null==u&&(m.mimeType=t),this},statusCode:function(t){var e;if(t)if(u)I.always(t[I.status]);else for(e in t)g[e]=[g[e],t[e]];return this},abort:function(t){var e=t||y;return r&&r.abort(e),i(0,e),this}};if(D.promise(I),m.url=((t||m.url||Pe.href)+"").replace(ze,Pe.protocol+"//"),m.type=e.method||e.type||m.method||m.type,m.dataTypes=(m.dataType||"*").toLowerCase().match(kt)||[""],null==m.crossDomain){l=Lt.createElement("a");try{l.href=m.url,l.href=l.href,m.crossDomain=Qe.protocol+"//"+Qe.host!=l.protocol+"//"+l.host}catch(t){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=_t.param(m.data,m.traditional)),ot(Je,m,e,I),u)return I;c=_t.event&&m.global,c&&0==_t.active++&&_t.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!je.test(m.type),n=m.url.replace(We,""),m.hasContent?m.data&&m.processData&&0===(m.contentType||"").indexOf("application/x-www-form-urlencoded")&&(m.data=m.data.replace(Ge,"+")):(f=m.url.slice(n.length),m.data&&(m.processData||"string"==typeof m.data)&&(n+=(ke.test(n)?"&":"?")+m.data,delete m.data),!1===m.cache&&(n=n.replace(Xe,"$1"),f=(ke.test(n)?"&":"?")+"_="+Re.guid+++f),m.url=n+f),m.ifModified&&(_t.lastModified[n]&&I.setRequestHeader("If-Modified-Since",_t.lastModified[n]),_t.etag[n]&&I.setRequestHeader("If-None-Match",_t.etag[n])),(m.data&&m.hasContent&&!1!==m.contentType||e.contentType)&&I.setRequestHeader("Content-Type",m.contentType),I.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Ze+"; q=0.01":""):m.accepts["*"]);for(d in m.headers)I.setRequestHeader(d,m.headers[d]);if(m.beforeSend&&(!1===m.beforeSend.call(C,I,m)||u))return I.abort();if(y="abort",v.add(m.complete),I.done(m.success),I.fail(m.error),r=ot(qe,m,e,I)){if(I.readyState=1,c&&p.trigger("ajaxSend",[I,m]),u)return I;m.async&&m.timeout>0&&(h=a.setTimeout(function(){I.abort("timeout")},m.timeout));try{u=!1,r.send(S,i)}catch(t){if(u)throw t;i(-1,t)}}else i(-1,"No Transport");return I},getJSON:function(t,e,a){return _t.get(t,e,a,"json")},getScript:function(t,e){return _t.get(t,void 0,e,"script")}}),_t.each(["get","post"],function(t,e){_t[e]=function(t,a,i,r){return It(a)&&(r=r||i,i=a,a=void 0),_t.ajax(_t.extend({url:t,type:e,dataType:r,data:a,success:i},_t.isPlainObject(t)&&t))}}),_t.ajaxPrefilter(function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")}),_t._evalUrl=function(t,e,a){return _t.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){_t.globalEval(t,e,a)}})},_t.fn.extend({wrapAll:function(t){var e;return this[0]&&(It(t)&&(t=t.call(this[0])),e=_t(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return It(t)?this.each(function(e){_t(this).wrapInner(t.call(this,e))}):this.each(function(){var e=_t(this),a=e.contents();a.length?a.wrapAll(t):e.append(t)})},wrap:function(t){var e=It(t);return this.each(function(a){_t(this).wrapAll(e?t.call(this,a):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){_t(this).replaceWith(this.childNodes)}),this}}),_t.expr.pseudos.hidden=function(t){return!_t.expr.pseudos.visible(t)},_t.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},_t.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(t){}};var $e={0:200,1223:204},ta=_t.ajaxSettings.xhr();yt.cors=!!ta&&"withCredentials"in ta,yt.ajax=ta=!!ta,_t.ajaxTransport(function(t){var e,i;if(yt.cors||ta&&!t.crossDomain)return{send:function(r,n){var s,o=t.xhr();if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)o[s]=t.xhrFields[s];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(s in r)o.setRequestHeader(s,r[s]);e=function(t){return function(){e&&(e=i=o.onload=o.onerror=o.onabort=o.ontimeout=o.onreadystatechange=null,"abort"===t?o.abort():"error"===t?"number"!=typeof o.status?n(0,"error"):n(o.status,o.statusText):n($e[o.status]||o.status,o.statusText,"text"!==(o.responseType||"text")||"string"!=typeof o.responseText?{binary:o.response}:{text:o.responseText},o.getAllResponseHeaders()))}},o.onload=e(),i=o.onerror=o.ontimeout=e("error"),void 0!==o.onabort?o.onabort=i:o.onreadystatechange=function(){4===o.readyState&&a.setTimeout(function(){e&&i()})},e=e("abort");try{o.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}}),_t.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),_t.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return _t.globalEval(t),t}}}),_t.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),_t.ajaxTransport("script",function(t){if(t.crossDomain||t.scriptAttrs){var e,a;return{send:function(i,r){e=_t("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",a=function(t){e.remove(),a=null,t&&r("error"===t.type?404:200,t.type)}),Lt.head.appendChild(e[0])},abort:function(){a&&a()}}}});var ea=[],aa=/(=)\?(?=&|$)|\?\?/;_t.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=ea.pop()||_t.expando+"_"+Re.guid++;return this[t]=!0,t}}),_t.ajaxPrefilter("json jsonp",function(t,e,i){var r,n,s,o=!1!==t.jsonp&&(aa.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&aa.test(t.data)&&"data");if(o||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=It(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(aa,"$1"+r):!1!==t.jsonp&&(t.url+=(ke.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return s||_t.error(r+" was not called"),s[0]},t.dataTypes[0]="json",n=a[r],a[r]=function(){s=arguments},i.always(function(){void 0===n?_t(a).removeProp(r):a[r]=n,t[r]&&(t.jsonpCallback=e.jsonpCallback,ea.push(r)),s&&It(n)&&n(s[0]),s=n=void 0}),"script"}),yt.createHTMLDocument=function(){var t=Lt.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),_t.parseHTML=function(t,e,a){if("string"!=typeof t)return[];"boolean"==typeof e&&(a=e,e=!1);var i,r,n;return e||(yt.createHTMLDocument?(e=Lt.implementation.createHTMLDocument(""),i=e.createElement("base"),i.href=Lt.location.href,e.head.appendChild(i)):e=Lt),r=At.exec(t),n=!a&&[],r?[e.createElement(r[1])]:(r=_([t],e,n),n&&n.length&&_t(n).remove(),_t.merge([],r.childNodes))},_t.fn.load=function(t,e,a){var i,r,n,s=this,o=t.indexOf(" ");return o>-1&&(i=at(t.slice(o)),t=t.slice(0,o)),It(e)?(a=e,e=void 0):e&&"object"==typeof e&&(r="POST"),s.length>0&&_t.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){n=arguments,s.html(i?_t("<div>").append(_t.parseHTML(t)).find(i):t)}).always(a&&function(t,e){s.each(function(){a.apply(this,n||[t.responseText,e,t])})}),this},_t.expr.pseudos.animated=function(t){return _t.grep(_t.timers,function(e){return t===e.elem}).length},_t.offset={setOffset:function(t,e,a){var i,r,n,s,o,h,l,u=_t.css(t,"position"),c=_t(t),d={};"static"===u&&(t.style.position="relative"),o=c.offset(),n=_t.css(t,"top"),h=_t.css(t,"left"),l=("absolute"===u||"fixed"===u)&&(n+h).indexOf("auto")>-1,l?(i=c.position(),s=i.top,r=i.left):(s=parseFloat(n)||0,r=parseFloat(h)||0),It(e)&&(e=e.call(t,a,_t.extend({},o))),null!=e.top&&(d.top=e.top-o.top+s),null!=e.left&&(d.left=e.left-o.left+r),"using"in e?e.using.call(t,d):("number"==typeof d.top&&(d.top+="px"),"number"==typeof d.left&&(d.left+="px"),c.css(d))}},_t.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){_t.offset.setOffset(this,t,e)});var e,a,i=this[0];if(i)return i.getClientRects().length?(e=i.getBoundingClientRect(),a=i.ownerDocument.defaultView,{top:e.top+a.pageYOffset,left:e.left+a.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var t,e,a,i=this[0],r={top:0,left:0};if("fixed"===_t.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),a=i.ownerDocument,t=i.offsetParent||a.documentElement;t&&(t===a.body||t===a.documentElement)&&"static"===_t.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&(r=_t(t).offset(),r.top+=_t.css(t,"borderTopWidth",!0),r.left+=_t.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-_t.css(i,"marginTop",!0),left:e.left-r.left-_t.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===_t.css(t,"position");)t=t.offsetParent;return t||Zt})}}),_t.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var a="pageYOffset"===e;_t.fn[t]=function(i){return Ht(this,function(t,i,r){var n;if(xt(t)?n=t:9===t.nodeType&&(n=t.defaultView),void 0===r)return n?n[e]:t[i];n?n.scrollTo(a?n.pageXOffset:r,a?r:n.pageYOffset):t[i]=r},t,i,arguments.length)}}),_t.each(["top","left"],function(t,e){_t.cssHooks[e]=G(yt.pixelPosition,function(t,a){if(a)return a=V(t,e),fe.test(a)?_t(t).position()[e]+"px":a})}),_t.each({Height:"height",Width:"width"},function(t,e){_t.each({padding:"inner"+t,content:e,"":"outer"+t},function(a,i){_t.fn[i]=function(r,n){var s=arguments.length&&(a||"boolean"!=typeof r),o=a||(!0===r||!0===n?"margin":"border");return Ht(this,function(e,a,r){var n;return xt(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(n=e.documentElement,Math.max(e.body["scroll"+t],n["scroll"+t],e.body["offset"+t],n["offset"+t],n["client"+t])):void 0===r?_t.css(e,a,o):_t.style(e,a,r,o)},e,s?r:void 0,s)}})}),_t.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){_t.fn[e]=function(t){return this.on(e,t)}}),_t.fn.extend({bind:function(t,e,a){return this.on(t,null,e,a)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,a,i){return this.on(e,t,a,i)},undelegate:function(t,e,a){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",a)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),_t.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){_t.fn[e]=function(t,a){return arguments.length>0?this.on(e,null,t,a):this.trigger(e)}});var ia=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;_t.proxy=function(t,e){var a,i,r;if("string"==typeof e&&(a=t[e],e=t,t=a),It(t))return i=ft.call(arguments,2),r=function(){return t.apply(e||this,i.concat(ft.call(arguments)))},r.guid=t.guid=t.guid||_t.guid++,r},_t.holdReady=function(t){t?_t.readyWait++:_t.ready(!0)},_t.isArray=Array.isArray,_t.parseJSON=JSON.parse,_t.nodeName=l,_t.isFunction=It,_t.isWindow=xt,_t.camelCase=v,_t.type=o,_t.now=Date.now,_t.isNumeric=function(t){var e=_t.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},_t.trim=function(t){return null==t?"":(t+"").replace(ia,"")},i=[],void 0!==(r=function(){return _t}.apply(e,i))&&(t.exports=r);var ra=a.jQuery,na=a.$;return _t.noConflict=function(t){return a.$===_t&&(a.$=na),t&&a.jQuery===_t&&(a.jQuery=ra),_t},void 0===n&&(a.jQuery=a.$=_t),_t})},function(t,e,a){!function(e,a){t.exports=a()}(0,function(){"use strict";function t(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}function e(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function a(t,a){return e(t).appendChild(a)}function i(t,e,a,i){var r=document.createElement(t);if(a&&(r.className=a),i&&(r.style.cssText=i),"string"==typeof e)r.appendChild(document.createTextNode(e));else if(e)for(var n=0;n<e.length;++n)r.appendChild(e[n]);return r}function r(t,e,a,r){var n=i(t,e,a,r);return n.setAttribute("role","presentation"),n}function n(t,e){if(3==e.nodeType&&(e=e.parentNode),t.contains)return t.contains(e);do{if(11==e.nodeType&&(e=e.host),e==t)return!0}while(e=e.parentNode)}function s(){var t;try{t=document.activeElement}catch(e){t=document.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function o(e,a){var i=e.className;t(a).test(i)||(e.className+=(i?" ":"")+a)}function h(e,a){for(var i=e.split(" "),r=0;r<i.length;r++)i[r]&&!t(i[r]).test(a)&&(a+=" "+i[r]);return a}function l(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function u(t,e,a){e||(e={});for(var i in t)!t.hasOwnProperty(i)||!1===a&&e.hasOwnProperty(i)||(e[i]=t[i]);return e}function c(t,e,a,i,r){null==e&&-1==(e=t.search(/[^\s\u00a0]/))&&(e=t.length);for(var n=i||0,s=r||0;;){var o=t.indexOf("\t",n);if(o<0||o>=e)return s+(e-n);s+=o-n,s+=a-s%a,n=o+1}}function d(t,e){for(var a=0;a<t.length;++a)if(t[a]==e)return a;return-1}function f(t,e,a){for(var i=0,r=0;;){var n=t.indexOf("\t",i);-1==n&&(n=t.length);var s=n-i;if(n==t.length||r+s>=e)return i+Math.min(s,e-r);if(r+=n-i,r+=a-r%a,i=n+1,r>=e)return i}}function m(t){for(;js.length<=t;)js.push(C(js)+" ");return js[t]}function C(t){return t[t.length-1]}function p(t,e){for(var a=[],i=0;i<t.length;i++)a[i]=e(t[i],i);return a}function D(t,e,a){for(var i=0,r=a(e);i<t.length&&a(t[i])<=r;)i++;t.splice(i,0,e)}function v(){}function g(t,e){var a;return Object.create?a=Object.create(t):(v.prototype=t,a=new v),e&&u(e,a),a}function S(t){return/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||zs.test(t))}function T(t,e){return e?!!(e.source.indexOf("\\w")>-1&&S(t))||e.test(t):S(t)}function y(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}function I(t){return t.charCodeAt(0)>=768&&Js.test(t)}function x(t,e,a){for(;(a<0?e>0:e<t.length)&&I(t.charAt(e));)e+=a;return e}function L(t,e,a){for(var i=e>a?-1:1;;){if(e==a)return e;var r=(e+a)/2,n=i<0?Math.ceil(r):Math.floor(r);if(n==e)return t(n)?e:a;t(n)?a=n:e=n+i}}function M(t,e,a,i){if(!t)return i(e,a,"ltr",0);for(var r=!1,n=0;n<t.length;++n){var s=t[n];(s.from<a&&s.to>e||e==a&&s.to==e)&&(i(Math.max(s.from,e),Math.min(s.to,a),1==s.level?"rtl":"ltr",n),r=!0)}r||i(e,a,"ltr")}function _(t,e,a){var i;qs=null;for(var r=0;r<t.length;++r){var n=t[r];if(n.from<e&&n.to>e)return r;n.to==e&&(n.from!=n.to&&"before"==a?i=r:qs=r),n.from==e&&(n.from!=n.to&&"before"!=a?i=r:qs=r)}return null!=i?i:qs}function b(t,e){var a=t.order;return null==a&&(a=t.order=Zs(t.text,e)),a}function w(t,e){return t._handlers&&t._handlers[e]||Qs}function F(t,e,a){if(t.removeEventListener)t.removeEventListener(e,a,!1);else if(t.detachEvent)t.detachEvent("on"+e,a);else{var i=t._handlers,r=i&&i[e];if(r){var n=d(r,a);n>-1&&(i[e]=r.slice(0,n).concat(r.slice(n+1)))}}}function E(t,e){var a=w(t,e);if(a.length)for(var i=Array.prototype.slice.call(arguments,2),r=0;r<a.length;++r)a[r].apply(null,i)}function A(t,e,a){return"string"==typeof e&&(e={type:e,preventDefault:function(){this.defaultPrevented=!0}}),E(t,a||e.type,t,e),B(e)||e.codemirrorIgnore}function N(t){var e=t._handlers&&t._handlers.cursorActivity;if(e)for(var a=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),i=0;i<e.length;++i)-1==d(a,e[i])&&a.push(e[i])}function O(t,e){return w(t,e).length>0}function P(t){t.prototype.on=function(t,e){$s(this,t,e)},t.prototype.off=function(t,e){F(this,t,e)}}function R(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function k(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function B(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function Y(t){R(t),k(t)}function H(t){return t.target||t.srcElement}function V(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),Fs&&t.ctrlKey&&1==e&&(e=3),e}function G(t){if(null==Hs){var e=i("span","​");a(t,i("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(Hs=e.offsetWidth<=1&&e.offsetHeight>2&&!(vs&&gs<8))}var r=Hs?i("span","​"):i("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return r.setAttribute("cm-text",""),r}function W(t){if(null!=Vs)return Vs;var i=a(t,document.createTextNode("AخA")),r=Os(i,0,1).getBoundingClientRect(),n=Os(i,1,2).getBoundingClientRect();return e(t),!(!r||r.left==r.right)&&(Vs=n.right-r.right<3)}function X(t){if(null!=ro)return ro;var e=a(t,i("span","x")),r=e.getBoundingClientRect(),n=Os(e,0,1).getBoundingClientRect();return ro=Math.abs(r.left-n.left)>1}function U(t,e){arguments.length>2&&(e.dependencies=Array.prototype.slice.call(arguments,2)),no[t]=e}function K(t,e){so[t]=e}function j(t){if("string"==typeof t&&so.hasOwnProperty(t))t=so[t];else if(t&&"string"==typeof t.name&&so.hasOwnProperty(t.name)){var e=so[t.name];"string"==typeof e&&(e={name:e}),t=g(e,t),t.name=e.name}else{if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return j("application/xml");if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+json$/.test(t))return j("application/json")}return"string"==typeof t?{name:t}:t||{name:"null"}}function z(t,e){e=j(e);var a=no[e.name];if(!a)return z(t,"text/plain");var i=a(t,e);if(oo.hasOwnProperty(e.name)){var r=oo[e.name];for(var n in r)r.hasOwnProperty(n)&&(i.hasOwnProperty(n)&&(i["_"+n]=i[n]),i[n]=r[n])}if(i.name=e.name,e.helperType&&(i.helperType=e.helperType),e.modeProps)for(var s in e.modeProps)i[s]=e.modeProps[s];return i}function J(t,e){u(e,oo.hasOwnProperty(t)?oo[t]:oo[t]={})}function q(t,e){if(!0===e)return e;if(t.copyState)return t.copyState(e);var a={};for(var i in e){var r=e[i];r instanceof Array&&(r=r.concat([])),a[i]=r}return a}function Z(t,e){for(var a;t.innerMode&&(a=t.innerMode(e))&&a.mode!=t;)e=a.state,t=a.mode;return a||{mode:t,state:e}}function Q(t,e,a){return!t.startState||t.startState(e,a)}function $(t,e){if((e-=t.first)<0||e>=t.size)throw new Error("There is no line "+(e+t.first)+" in the document.");for(var a=t;!a.lines;)for(var i=0;;++i){var r=a.children[i],n=r.chunkSize();if(e<n){a=r;break}e-=n}return a.lines[e]}function tt(t,e,a){var i=[],r=e.line;return t.iter(e.line,a.line+1,function(t){var n=t.text;r==a.line&&(n=n.slice(0,a.ch)),r==e.line&&(n=n.slice(e.ch)),i.push(n),++r}),i}function et(t,e,a){var i=[];return t.iter(e,a,function(t){i.push(t.text)}),i}function at(t,e){var a=e-t.height;if(a)for(var i=t;i;i=i.parent)i.height+=a}function it(t){if(null==t.parent)return null;for(var e=t.parent,a=d(e.lines,t),i=e.parent;i;e=i,i=i.parent)for(var r=0;i.children[r]!=e;++r)a+=i.children[r].chunkSize();return a+e.first}function rt(t,e){var a=t.first;t:do{for(var i=0;i<t.children.length;++i){var r=t.children[i],n=r.height;if(e<n){t=r;continue t}e-=n,a+=r.chunkSize()}return a}while(!t.lines);for(var s=0;s<t.lines.length;++s){var o=t.lines[s],h=o.height;if(e<h)break;e-=h}return a+s}function nt(t,e){return e>=t.first&&e<t.first+t.size}function st(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function ot(t,e,a){if(void 0===a&&(a=null),!(this instanceof ot))return new ot(t,e,a);this.line=t,this.ch=e,this.sticky=a}function ht(t,e){return t.line-e.line||t.ch-e.ch}function lt(t,e){return t.sticky==e.sticky&&0==ht(t,e)}function ut(t){return ot(t.line,t.ch)}function ct(t,e){return ht(t,e)<0?e:t}function dt(t,e){return ht(t,e)<0?t:e}function ft(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function mt(t,e){if(e.line<t.first)return ot(t.first,0);var a=t.first+t.size-1;return e.line>a?ot(a,$(t,a).text.length):Ct(e,$(t,e.line).text.length)}function Ct(t,e){var a=t.ch;return null==a||a>e?ot(t.line,e):a<0?ot(t.line,0):t}function pt(t,e){for(var a=[],i=0;i<e.length;i++)a[i]=mt(t,e[i]);return a}function Dt(t,e,a,i){var r=[t.state.modeGen],n={};Lt(t,e.text,t.doc.mode,a,function(t,e){return r.push(t,e)},n,i);for(var s=a.state,o=0;o<t.state.overlays.length;++o)!function(i){a.baseTokens=r;var o=t.state.overlays[i],h=1,l=0;a.state=!0,Lt(t,e.text,o.mode,a,function(t,e){for(var a=h;l<t;){var i=r[h];i>t&&r.splice(h,1,t,r[h+1],i),h+=2,l=Math.min(t,i)}if(e)if(o.opaque)r.splice(a,h-a,t,"overlay "+e),h=a+2;else for(;a<h;a+=2){var n=r[a+1];r[a+1]=(n?n+" ":"")+"overlay "+e}},n),a.state=s,a.baseTokens=null,a.baseTokenPos=1}(o);return{styles:r,classes:n.bgClass||n.textClass?n:null}}function vt(t,e,a){if(!e.styles||e.styles[0]!=t.state.modeGen){var i=gt(t,it(e)),r=e.text.length>t.options.maxHighlightLength&&q(t.doc.mode,i.state),n=Dt(t,e,i);r&&(i.state=r),e.stateAfter=i.save(!r),e.styles=n.styles,n.classes?e.styleClasses=n.classes:e.styleClasses&&(e.styleClasses=null),a===t.doc.highlightFrontier&&(t.doc.modeFrontier=Math.max(t.doc.modeFrontier,++t.doc.highlightFrontier))}return e.styles}function gt(t,e,a){var i=t.doc,r=t.display;if(!i.mode.startState)return new uo(i,!0,e);var n=Mt(t,e,a),s=n>i.first&&$(i,n-1).stateAfter,o=s?uo.fromSaved(i,s,n):new uo(i,Q(i.mode),n);return i.iter(n,e,function(a){St(t,a.text,o);var i=o.line;a.stateAfter=i==e-1||i%5==0||i>=r.viewFrom&&i<r.viewTo?o.save():null,o.nextLine()}),a&&(i.modeFrontier=o.line),o}function St(t,e,a,i){var r=t.doc.mode,n=new ho(e,t.options.tabSize,a);for(n.start=n.pos=i||0,""==e&&Tt(r,a.state);!n.eol();)yt(r,n,a.state),n.start=n.pos}function Tt(t,e){if(t.blankLine)return t.blankLine(e);if(t.innerMode){var a=Z(t,e);return a.mode.blankLine?a.mode.blankLine(a.state):void 0}}function yt(t,e,a,i){for(var r=0;r<10;r++){i&&(i[0]=Z(t,a).mode);var n=t.token(e,a);if(e.pos>e.start)return n}throw new Error("Mode "+t.name+" failed to advance stream.")}function It(t,e,a,i){var r,n=t.doc,s=n.mode;e=mt(n,e);var o,h=$(n,e.line),l=gt(t,e.line,a),u=new ho(h.text,t.options.tabSize,l);for(i&&(o=[]);(i||u.pos<e.ch)&&!u.eol();)u.start=u.pos,r=yt(s,u,l.state),i&&o.push(new co(u,r,q(n.mode,l.state)));return i?o:new co(u,r,l.state)}function xt(t,e){if(t)for(;;){var a=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!a)break;t=t.slice(0,a.index)+t.slice(a.index+a[0].length);var i=a[1]?"bgClass":"textClass";null==e[i]?e[i]=a[2]:new RegExp("(?:^|\\s)"+a[2]+"(?:$|\\s)").test(e[i])||(e[i]+=" "+a[2])}return t}function Lt(t,e,a,i,r,n,s){var o=a.flattenSpans;null==o&&(o=t.options.flattenSpans);var h,l=0,u=null,c=new ho(e,t.options.tabSize,i),d=t.options.addModeClass&&[null];for(""==e&&xt(Tt(a,i.state),n);!c.eol();){if(c.pos>t.options.maxHighlightLength?(o=!1,s&&St(t,e,i,c.pos),c.pos=e.length,h=null):h=xt(yt(a,c,i.state,d),n),d){var f=d[0].name;f&&(h="m-"+(h?f+" "+h:f))}if(!o||u!=h){for(;l<c.start;)l=Math.min(c.start,l+5e3),r(l,u);u=h}c.start=c.pos}for(;l<c.pos;){var m=Math.min(c.pos,l+5e3);r(m,u),l=m}}function Mt(t,e,a){for(var i,r,n=t.doc,s=a?-1:e-(t.doc.mode.innerMode?1e3:100),o=e;o>s;--o){if(o<=n.first)return n.first;var h=$(n,o-1),l=h.stateAfter;if(l&&(!a||o+(l instanceof lo?l.lookAhead:0)<=n.modeFrontier))return o;var u=c(h.text,null,t.options.tabSize);(null==r||i>u)&&(r=o-1,i=u)}return r}function _t(t,e){if(t.modeFrontier=Math.min(t.modeFrontier,e),!(t.highlightFrontier<e-10)){for(var a=t.first,i=e-1;i>a;i--){var r=$(t,i).stateAfter;if(r&&(!(r instanceof lo)||i+r.lookAhead<e)){a=i+1;break}}t.highlightFrontier=Math.min(t.highlightFrontier,a)}}function bt(){fo=!0}function wt(){mo=!0}function Ft(t,e,a){this.marker=t,this.from=e,this.to=a}function Et(t,e){if(t)for(var a=0;a<t.length;++a){var i=t[a];if(i.marker==e)return i}}function At(t,e){for(var a,i=0;i<t.length;++i)t[i]!=e&&(a||(a=[])).push(t[i]);return a}function Nt(t,e,a){var i=a&&window.WeakSet&&(a.markedSpans||(a.markedSpans=new WeakSet));i&&i.has(t.markedSpans)?t.markedSpans.push(e):(t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],i&&i.add(t.markedSpans)),e.marker.attachLine(t)}function Ot(t,e,a){var i;if(t)for(var r=0;r<t.length;++r){var n=t[r],s=n.marker,o=null==n.from||(s.inclusiveLeft?n.from<=e:n.from<e);if(o||n.from==e&&"bookmark"==s.type&&(!a||!n.marker.insertLeft)){var h=null==n.to||(s.inclusiveRight?n.to>=e:n.to>e);(i||(i=[])).push(new Ft(s,n.from,h?null:n.to))}}return i}function Pt(t,e,a){var i;if(t)for(var r=0;r<t.length;++r){var n=t[r],s=n.marker,o=null==n.to||(s.inclusiveRight?n.to>=e:n.to>e);if(o||n.from==e&&"bookmark"==s.type&&(!a||n.marker.insertLeft)){var h=null==n.from||(s.inclusiveLeft?n.from<=e:n.from<e);(i||(i=[])).push(new Ft(s,h?null:n.from-e,null==n.to?null:n.to-e))}}return i}function Rt(t,e){if(e.full)return null;var a=nt(t,e.from.line)&&$(t,e.from.line).markedSpans,i=nt(t,e.to.line)&&$(t,e.to.line).markedSpans;if(!a&&!i)return null;var r=e.from.ch,n=e.to.ch,s=0==ht(e.from,e.to),o=Ot(a,r,s),h=Pt(i,n,s),l=1==e.text.length,u=C(e.text).length+(l?r:0);if(o)for(var c=0;c<o.length;++c){var d=o[c];if(null==d.to){var f=Et(h,d.marker);f?l&&(d.to=null==f.to?null:f.to+u):d.to=r}}if(h)for(var m=0;m<h.length;++m){var p=h[m];if(null!=p.to&&(p.to+=u),null==p.from){var D=Et(o,p.marker);D||(p.from=u,l&&(o||(o=[])).push(p))}else p.from+=u,l&&(o||(o=[])).push(p)}o&&(o=kt(o)),h&&h!=o&&(h=kt(h));var v=[o];if(!l){var g,S=e.text.length-2;if(S>0&&o)for(var T=0;T<o.length;++T)null==o[T].to&&(g||(g=[])).push(new Ft(o[T].marker,null,null));for(var y=0;y<S;++y)v.push(g);v.push(h)}return v}function kt(t){for(var e=0;e<t.length;++e){var a=t[e];null!=a.from&&a.from==a.to&&!1!==a.marker.clearWhenEmpty&&t.splice(e--,1)}return t.length?t:null}function Bt(t,e,a){var i=null;if(t.iter(e.line,a.line+1,function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var a=t.markedSpans[e].marker;!a.readOnly||i&&-1!=d(i,a)||(i||(i=[])).push(a)}}),!i)return null;for(var r=[{from:e,to:a}],n=0;n<i.length;++n)for(var s=i[n],o=s.find(0),h=0;h<r.length;++h){var l=r[h];if(!(ht(l.to,o.from)<0||ht(l.from,o.to)>0)){var u=[h,1],c=ht(l.from,o.from),f=ht(l.to,o.to);(c<0||!s.inclusiveLeft&&!c)&&u.push({from:l.from,to:o.from}),(f>0||!s.inclusiveRight&&!f)&&u.push({from:o.to,to:l.to}),r.splice.apply(r,u),h+=u.length-3}}return r}function Yt(t){var e=t.markedSpans;if(e){for(var a=0;a<e.length;++a)e[a].marker.detachLine(t);t.markedSpans=null}}function Ht(t,e){if(e){for(var a=0;a<e.length;++a)e[a].marker.attachLine(t);t.markedSpans=e}}function Vt(t){return t.inclusiveLeft?-1:0}function Gt(t){return t.inclusiveRight?1:0}function Wt(t,e){var a=t.lines.length-e.lines.length;if(0!=a)return a;var i=t.find(),r=e.find(),n=ht(i.from,r.from)||Vt(t)-Vt(e);if(n)return-n;var s=ht(i.to,r.to)||Gt(t)-Gt(e);return s||e.id-t.id}function Xt(t,e){var a,i=mo&&t.markedSpans;if(i)for(var r=void 0,n=0;n<i.length;++n)r=i[n],r.marker.collapsed&&null==(e?r.from:r.to)&&(!a||Wt(a,r.marker)<0)&&(a=r.marker);return a}function Ut(t){return Xt(t,!0)}function Kt(t){return Xt(t,!1)}function jt(t,e){var a,i=mo&&t.markedSpans;if(i)for(var r=0;r<i.length;++r){var n=i[r];n.marker.collapsed&&(null==n.from||n.from<e)&&(null==n.to||n.to>e)&&(!a||Wt(a,n.marker)<0)&&(a=n.marker)}return a}function zt(t,e,a,i,r){var n=$(t,e),s=mo&&n.markedSpans;if(s)for(var o=0;o<s.length;++o){var h=s[o];if(h.marker.collapsed){var l=h.marker.find(0),u=ht(l.from,a)||Vt(h.marker)-Vt(r),c=ht(l.to,i)||Gt(h.marker)-Gt(r);if(!(u>=0&&c<=0||u<=0&&c>=0)&&(u<=0&&(h.marker.inclusiveRight&&r.inclusiveLeft?ht(l.to,a)>=0:ht(l.to,a)>0)||u>=0&&(h.marker.inclusiveRight&&r.inclusiveLeft?ht(l.from,i)<=0:ht(l.from,i)<0)))return!0}}}function Jt(t){for(var e;e=Ut(t);)t=e.find(-1,!0).line;return t}function qt(t){for(var e;e=Kt(t);)t=e.find(1,!0).line;return t}function Zt(t){for(var e,a;e=Kt(t);)t=e.find(1,!0).line,(a||(a=[])).push(t);return a}function Qt(t,e){var a=$(t,e),i=Jt(a);return a==i?e:it(i)}function $t(t,e){if(e>t.lastLine())return e;var a,i=$(t,e);if(!te(t,i))return e;for(;a=Kt(i);)i=a.find(1,!0).line;return it(i)+1}function te(t,e){var a=mo&&e.markedSpans;if(a)for(var i=void 0,r=0;r<a.length;++r)if(i=a[r],i.marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&ee(t,e,i))return!0}}function ee(t,e,a){if(null==a.to){var i=a.marker.find(1,!0);return ee(t,i.line,Et(i.line.markedSpans,a.marker))}if(a.marker.inclusiveRight&&a.to==e.text.length)return!0;for(var r=void 0,n=0;n<e.markedSpans.length;++n)if(r=e.markedSpans[n],r.marker.collapsed&&!r.marker.widgetNode&&r.from==a.to&&(null==r.to||r.to!=a.from)&&(r.marker.inclusiveLeft||a.marker.inclusiveRight)&&ee(t,e,r))return!0}function ae(t){t=Jt(t);for(var e=0,a=t.parent,i=0;i<a.lines.length;++i){var r=a.lines[i];if(r==t)break;e+=r.height}for(var n=a.parent;n;a=n,n=a.parent)for(var s=0;s<n.children.length;++s){var o=n.children[s];if(o==a)break;e+=o.height}return e}function ie(t){if(0==t.height)return 0;for(var e,a=t.text.length,i=t;e=Ut(i);){var r=e.find(0,!0);i=r.from.line,a+=r.from.ch-r.to.ch}for(i=t;e=Kt(i);){var n=e.find(0,!0);a-=i.text.length-n.from.ch,i=n.to.line,a+=i.text.length-n.to.ch}return a}function re(t){var e=t.display,a=t.doc;e.maxLine=$(a,a.first),e.maxLineLength=ie(e.maxLine),e.maxLineChanged=!0,a.iter(function(t){var a=ie(t);a>e.maxLineLength&&(e.maxLineLength=a,e.maxLine=t)})}function ne(t,e,a,i){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),Yt(t),Ht(t,a);var r=i?i(t):1;r!=t.height&&at(t,r)}function se(t){t.parent=null,Yt(t)}function oe(t,e){if(!t||/^\s*$/.test(t))return null;var a=e.addModeClass?vo:Do;return a[t]||(a[t]=t.replace(/\S+/g,"cm-$&"))}function he(t,e){var a=r("span",null,null,Ss?"padding-right: .1px":null),i={pre:r("pre",[a],"CodeMirror-line"),content:a,col:0,pos:0,cm:t,trailingSpace:!1,splitSpaces:t.getOption("lineWrapping")};e.measure={};for(var n=0;n<=(e.rest?e.rest.length:0);n++){var s=n?e.rest[n-1]:e.line,o=void 0;i.pos=0,i.addToken=ue,W(t.display.measure)&&(o=b(s,t.doc.direction))&&(i.addToken=de(i.addToken,o)),i.map=[];me(s,i,vt(t,s,e!=t.display.externalMeasured&&it(s))),s.styleClasses&&(s.styleClasses.bgClass&&(i.bgClass=h(s.styleClasses.bgClass,i.bgClass||"")),s.styleClasses.textClass&&(i.textClass=h(s.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(G(t.display.measure))),0==n?(e.measure.map=i.map,e.measure.cache={}):((e.measure.maps||(e.measure.maps=[])).push(i.map),(e.measure.caches||(e.measure.caches=[])).push({}))}if(Ss){var l=i.content.lastChild;(/\bcm-tab\b/.test(l.className)||l.querySelector&&l.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")}return E(t,"renderLine",t,e.line,i.pre),i.pre.className&&(i.textClass=h(i.pre.className,i.textClass||"")),i}function le(t){var e=i("span","•","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e.setAttribute("aria-label",e.title),e}function ue(t,e,a,r,n,s,o){if(e){var h,l=t.splitSpaces?ce(e,t.trailingSpace):e,u=t.cm.state.specialChars,c=!1;if(u.test(e)){h=document.createDocumentFragment();for(var d=0;;){u.lastIndex=d;var f=u.exec(e),C=f?f.index-d:e.length-d;if(C){var p=document.createTextNode(l.slice(d,d+C));vs&&gs<9?h.appendChild(i("span",[p])):h.appendChild(p),t.map.push(t.pos,t.pos+C,p),t.col+=C,t.pos+=C}if(!f)break;d+=C+1;var D=void 0;if("\t"==f[0]){var v=t.cm.options.tabSize,g=v-t.col%v;D=h.appendChild(i("span",m(g),"cm-tab")),D.setAttribute("role","presentation"),D.setAttribute("cm-text","\t"),t.col+=g}else"\r"==f[0]||"\n"==f[0]?(D=h.appendChild(i("span","\r"==f[0]?"␍":"␤","cm-invalidchar")),D.setAttribute("cm-text",f[0]),t.col+=1):(D=t.cm.options.specialCharPlaceholder(f[0]),D.setAttribute("cm-text",f[0]),vs&&gs<9?h.appendChild(i("span",[D])):h.appendChild(D),t.col+=1);t.map.push(t.pos,t.pos+1,D),t.pos++}}else t.col+=e.length,h=document.createTextNode(l),t.map.push(t.pos,t.pos+e.length,h),vs&&gs<9&&(c=!0),t.pos+=e.length;if(t.trailingSpace=32==l.charCodeAt(e.length-1),a||r||n||c||s||o){var S=a||"";r&&(S+=r),n&&(S+=n);var T=i("span",[h],S,s);if(o)for(var y in o)o.hasOwnProperty(y)&&"style"!=y&&"class"!=y&&T.setAttribute(y,o[y]);return t.content.appendChild(T)}t.content.appendChild(h)}}function ce(t,e){if(t.length>1&&!/  /.test(t))return t;for(var a=e,i="",r=0;r<t.length;r++){var n=t.charAt(r);" "!=n||!a||r!=t.length-1&&32!=t.charCodeAt(r+1)||(n=" "),i+=n,a=" "==n}return i}function de(t,e){return function(a,i,r,n,s,o,h){r=r?r+" cm-force-border":"cm-force-border";for(var l=a.pos,u=l+i.length;;){for(var c=void 0,d=0;d<e.length&&(c=e[d],!(c.to>l&&c.from<=l));d++);if(c.to>=u)return t(a,i,r,n,s,o,h);t(a,i.slice(0,c.to-l),r,n,null,o,h),n=null,i=i.slice(c.to-l),l=c.to}}}function fe(t,e,a,i){var r=!i&&a.widgetNode;r&&t.map.push(t.pos,t.pos+e,r),!i&&t.cm.display.input.needsContentAttribute&&(r||(r=t.content.appendChild(document.createElement("span"))),r.setAttribute("cm-marker",a.id)),r&&(t.cm.display.input.setUneditable(r),t.content.appendChild(r)),t.pos+=e,t.trailingSpace=!1}function me(t,e,a){var i=t.markedSpans,r=t.text,n=0;if(i)for(var s,o,h,l,u,c,d,f=r.length,m=0,C=1,p="",D=0;;){if(D==m){h=l=u=o="",d=null,c=null,D=1/0;for(var v=[],g=void 0,S=0;S<i.length;++S){var T=i[S],y=T.marker;if("bookmark"==y.type&&T.from==m&&y.widgetNode)v.push(y);else if(T.from<=m&&(null==T.to||T.to>m||y.collapsed&&T.to==m&&T.from==m)){if(null!=T.to&&T.to!=m&&D>T.to&&(D=T.to,l=""),y.className&&(h+=" "+y.className),y.css&&(o=(o?o+";":"")+y.css),y.startStyle&&T.from==m&&(u+=" "+y.startStyle),y.endStyle&&T.to==D&&(g||(g=[])).push(y.endStyle,T.to),y.title&&((d||(d={})).title=y.title),y.attributes)for(var I in y.attributes)(d||(d={}))[I]=y.attributes[I];y.collapsed&&(!c||Wt(c.marker,y)<0)&&(c=T)}else T.from>m&&D>T.from&&(D=T.from)}if(g)for(var x=0;x<g.length;x+=2)g[x+1]==D&&(l+=" "+g[x]);if(!c||c.from==m)for(var L=0;L<v.length;++L)fe(e,0,v[L]);if(c&&(c.from||0)==m){if(fe(e,(null==c.to?f+1:c.to)-m,c.marker,null==c.from),null==c.to)return;c.to==m&&(c=!1)}}if(m>=f)break;for(var M=Math.min(f,D);;){if(p){var _=m+p.length;if(!c){var b=_>M?p.slice(0,M-m):p;e.addToken(e,b,s?s+h:h,u,m+b.length==D?l:"",o,d)}if(_>=M){p=p.slice(M-m),m=M;break}m=_,u=""}p=r.slice(n,n=a[C++]),s=oe(a[C++],e.cm.options)}}else for(var w=1;w<a.length;w+=2)e.addToken(e,r.slice(n,n=a[w]),oe(a[w+1],e.cm.options))}function Ce(t,e,a){this.line=e,this.rest=Zt(e),this.size=this.rest?it(C(this.rest))-a+1:1,this.node=this.text=null,this.hidden=te(t,e)}function pe(t,e,a){for(var i,r=[],n=e;n<a;n=i){var s=new Ce(t.doc,$(t.doc,n),n);i=n+s.size,r.push(s)}return r}function De(t){go?go.ops.push(t):t.ownsGroup=go={ops:[t],delayedCallbacks:[]}}function ve(t){var e=t.delayedCallbacks,a=0;do{for(;a<e.length;a++)e[a].call(null);for(var i=0;i<t.ops.length;i++){var r=t.ops[i];if(r.cursorActivityHandlers)for(;r.cursorActivityCalled<r.cursorActivityHandlers.length;)r.cursorActivityHandlers[r.cursorActivityCalled++].call(null,r.cm)}}while(a<e.length)}function ge(t,e){var a=t.ownsGroup;if(a)try{ve(a)}finally{go=null,e(a)}}function Se(t,e){var a=w(t,e);if(a.length){var i,r=Array.prototype.slice.call(arguments,2);go?i=go.delayedCallbacks:So?i=So:(i=So=[],setTimeout(Te,0));for(var n=0;n<a.length;++n)!function(t){i.push(function(){return a[t].apply(null,r)})}(n)}}function Te(){var t=So;So=null;for(var e=0;e<t.length;++e)t[e]()}function ye(t,e,a,i){for(var r=0;r<e.changes.length;r++){var n=e.changes[r];"text"==n?Me(t,e):"gutter"==n?be(t,e,a,i):"class"==n?_e(t,e):"widget"==n&&we(t,e,i)}e.changes=null}function Ie(t){return t.node==t.text&&(t.node=i("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),vs&&gs<8&&(t.node.style.zIndex=2)),t.node}function xe(t,e){var a=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(a&&(a+=" CodeMirror-linebackground"),e.background)a?e.background.className=a:(e.background.parentNode.removeChild(e.background),e.background=null);else if(a){var r=Ie(e);e.background=r.insertBefore(i("div",null,a),r.firstChild),t.display.input.setUneditable(e.background)}}function Le(t,e){var a=t.display.externalMeasured;return a&&a.line==e.line?(t.display.externalMeasured=null,e.measure=a.measure,a.built):he(t,e)}function Me(t,e){var a=e.text.className,i=Le(t,e);e.text==e.node&&(e.node=i.pre),e.text.parentNode.replaceChild(i.pre,e.text),e.text=i.pre,i.bgClass!=e.bgClass||i.textClass!=e.textClass?(e.bgClass=i.bgClass,e.textClass=i.textClass,_e(t,e)):a&&(e.text.className=a)}function _e(t,e){xe(t,e),e.line.wrapClass?Ie(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var a=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=a||""}function be(t,e,a,r){if(e.gutter&&(e.node.removeChild(e.gutter),e.gutter=null),e.gutterBackground&&(e.node.removeChild(e.gutterBackground),e.gutterBackground=null),e.line.gutterClass){var n=Ie(e);e.gutterBackground=i("div",null,"CodeMirror-gutter-background "+e.line.gutterClass,"left: "+(t.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),t.display.input.setUneditable(e.gutterBackground),n.insertBefore(e.gutterBackground,e.text)}var s=e.line.gutterMarkers;if(t.options.lineNumbers||s){var o=Ie(e),h=e.gutter=i("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(h.setAttribute("aria-hidden","true"),t.display.input.setUneditable(h),o.insertBefore(h,e.text),e.line.gutterClass&&(h.className+=" "+e.line.gutterClass),!t.options.lineNumbers||s&&s["CodeMirror-linenumbers"]||(e.lineNumber=h.appendChild(i("div",st(t.options,a),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),s)for(var l=0;l<t.display.gutterSpecs.length;++l){var u=t.display.gutterSpecs[l].className,c=s.hasOwnProperty(u)&&s[u];c&&h.appendChild(i("div",[c],"CodeMirror-gutter-elt","left: "+r.gutterLeft[u]+"px; width: "+r.gutterWidth[u]+"px"))}}}function we(e,a,i){a.alignable&&(a.alignable=null);for(var r=t("CodeMirror-linewidget"),n=a.node.firstChild,s=void 0;n;n=s)s=n.nextSibling,r.test(n.className)&&a.node.removeChild(n);Ee(e,a,i)}function Fe(t,e,a,i){var r=Le(t,e);return e.text=e.node=r.pre,r.bgClass&&(e.bgClass=r.bgClass),r.textClass&&(e.textClass=r.textClass),_e(t,e),be(t,e,a,i),Ee(t,e,i),e.node}function Ee(t,e,a){if(Ae(t,e.line,e,a,!0),e.rest)for(var i=0;i<e.rest.length;i++)Ae(t,e.rest[i],e,a,!1)}function Ae(t,e,a,r,n){if(e.widgets)for(var s=Ie(a),o=0,h=e.widgets;o<h.length;++o){var l=h[o],u=i("div",[l.node],"CodeMirror-linewidget"+(l.className?" "+l.className:""));l.handleMouseEvents||u.setAttribute("cm-ignore-events","true"),Ne(l,u,a,r),t.display.input.setUneditable(u),n&&l.above?s.insertBefore(u,a.gutter||a.text):s.appendChild(u),Se(l,"redraw")}}function Ne(t,e,a,i){if(t.noHScroll){(a.alignable||(a.alignable=[])).push(e);var r=i.wrapperWidth;e.style.left=i.fixedPos+"px",t.coverGutter||(r-=i.gutterTotalWidth,e.style.paddingLeft=i.gutterTotalWidth+"px"),e.style.width=r+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-i.gutterTotalWidth+"px"))}function Oe(t){if(null!=t.height)return t.height;var e=t.doc.cm;if(!e)return 0;if(!n(document.body,t.node)){var r="position: relative;";t.coverGutter&&(r+="margin-left: -"+e.display.gutters.offsetWidth+"px;"),t.noHScroll&&(r+="width: "+e.display.wrapper.clientWidth+"px;"),a(e.display.measure,i("div",[t.node],null,r))}return t.height=t.node.parentNode.offsetHeight}function Pe(t,e){for(var a=H(e);a!=t.wrapper;a=a.parentNode)if(!a||1==a.nodeType&&"true"==a.getAttribute("cm-ignore-events")||a.parentNode==t.sizer&&a!=t.mover)return!0}function Re(t){return t.lineSpace.offsetTop}function ke(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function Be(t){if(t.cachedPaddingH)return t.cachedPaddingH;var e=a(t.measure,i("pre","x","CodeMirror-line-like")),r=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,n={left:parseInt(r.paddingLeft),right:parseInt(r.paddingRight)};return isNaN(n.left)||isNaN(n.right)||(t.cachedPaddingH=n),n}function Ye(t){return Gs-t.display.nativeBarWidth}function He(t){return t.display.scroller.clientWidth-Ye(t)-t.display.barWidth}function Ve(t){return t.display.scroller.clientHeight-Ye(t)-t.display.barHeight}function Ge(t,e,a){var i=t.options.lineWrapping,r=i&&He(t);if(!e.measure.heights||i&&e.measure.width!=r){var n=e.measure.heights=[];if(i){e.measure.width=r;for(var s=e.text.firstChild.getClientRects(),o=0;o<s.length-1;o++){var h=s[o],l=s[o+1];Math.abs(h.bottom-l.bottom)>2&&n.push((h.bottom+l.top)/2-a.top)}}n.push(a.bottom-a.top)}}function We(t,e,a){if(t.line==e)return{map:t.measure.map,cache:t.measure.cache};for(var i=0;i<t.rest.length;i++)if(t.rest[i]==e)return{map:t.measure.maps[i],cache:t.measure.caches[i]};for(var r=0;r<t.rest.length;r++)if(it(t.rest[r])>a)return{map:t.measure.maps[r],cache:t.measure.caches[r],before:!0}}function Xe(t,e){e=Jt(e);var i=it(e),r=t.display.externalMeasured=new Ce(t.doc,e,i);r.lineN=i;var n=r.built=he(t,r);return r.text=n.pre,a(t.display.lineMeasure,n.pre),r}function Ue(t,e,a,i){return ze(t,je(t,e),a,i)}function Ke(t,e){if(e>=t.display.viewFrom&&e<t.display.viewTo)return t.display.view[La(t,e)];var a=t.display.externalMeasured;return a&&e>=a.lineN&&e<a.lineN+a.size?a:void 0}function je(t,e){var a=it(e),i=Ke(t,a);i&&!i.text?i=null:i&&i.changes&&(ye(t,i,a,Sa(t)),t.curOp.forceUpdate=!0),i||(i=Xe(t,e));var r=We(i,e,a);return{line:e,view:i,rect:null,map:r.map,cache:r.cache,before:r.before,hasHeights:!1}}function ze(t,e,a,i,r){e.before&&(a=-1);var n,s=a+(i||"");return e.cache.hasOwnProperty(s)?n=e.cache[s]:(e.rect||(e.rect=e.view.text.getBoundingClientRect()),e.hasHeights||(Ge(t,e.view,e.rect),e.hasHeights=!0),n=Ze(t,e,a,i),n.bogus||(e.cache[s]=n)),{left:n.left,right:n.right,top:r?n.rtop:n.top,bottom:r?n.rbottom:n.bottom}}function Je(t,e,a){for(var i,r,n,s,o,h,l=0;l<t.length;l+=3)if(o=t[l],h=t[l+1],e<o?(r=0,n=1,s="left"):e<h?(r=e-o,n=r+1):(l==t.length-3||e==h&&t[l+3]>e)&&(n=h-o,r=n-1,e>=h&&(s="right")),null!=r){if(i=t[l+2],o==h&&a==(i.insertLeft?"left":"right")&&(s=a),"left"==a&&0==r)for(;l&&t[l-2]==t[l-3]&&t[l-1].insertLeft;)i=t[2+(l-=3)],s="left";if("right"==a&&r==h-o)for(;l<t.length-3&&t[l+3]==t[l+4]&&!t[l+5].insertLeft;)i=t[(l+=3)+2],s="right";break}return{node:i,start:r,end:n,collapse:s,coverStart:o,coverEnd:h}}function qe(t,e){var a=To;if("left"==e)for(var i=0;i<t.length&&(a=t[i]).left==a.right;i++);else for(var r=t.length-1;r>=0&&(a=t[r]).left==a.right;r--);return a}function Ze(t,e,a,i){var r,n=Je(e.map,a,i),s=n.node,o=n.start,h=n.end,l=n.collapse;if(3==s.nodeType){for(var u=0;u<4;u++){for(;o&&I(e.line.text.charAt(n.coverStart+o));)--o;for(;n.coverStart+h<n.coverEnd&&I(e.line.text.charAt(n.coverStart+h));)++h;if(r=vs&&gs<9&&0==o&&h==n.coverEnd-n.coverStart?s.parentNode.getBoundingClientRect():qe(Os(s,o,h).getClientRects(),i),r.left||r.right||0==o)break;h=o,o-=1,l="right"}vs&&gs<11&&(r=Qe(t.display.measure,r))}else{o>0&&(l=i="right");var c;r=t.options.lineWrapping&&(c=s.getClientRects()).length>1?c["right"==i?c.length-1:0]:s.getBoundingClientRect()}if(vs&&gs<9&&!o&&(!r||!r.left&&!r.right)){var d=s.parentNode.getClientRects()[0];r=d?{left:d.left,right:d.left+ga(t.display),top:d.top,bottom:d.bottom}:To}for(var f=r.top-e.rect.top,m=r.bottom-e.rect.top,C=(f+m)/2,p=e.view.measure.heights,D=0;D<p.length-1&&!(C<p[D]);D++);var v=D?p[D-1]:0,g=p[D],S={left:("right"==l?r.right:r.left)-e.rect.left,right:("left"==l?r.left:r.right)-e.rect.left,top:v,bottom:g};return r.left||r.right||(S.bogus=!0),t.options.singleCursorHeightPerLine||(S.rtop=f,S.rbottom=m),S}function Qe(t,e){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!X(t))return e;var a=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:e.left*a,right:e.right*a,top:e.top*i,bottom:e.bottom*i}}function $e(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var e=0;e<t.rest.length;e++)t.measure.caches[e]={}}function ta(t){t.display.externalMeasure=null,e(t.display.lineMeasure);for(var a=0;a<t.display.view.length;a++)$e(t.display.view[a])}function ea(t){ta(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function aa(){return ys&&bs?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function ia(){return ys&&bs?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function ra(t){var e=0;if(t.widgets)for(var a=0;a<t.widgets.length;++a)t.widgets[a].above&&(e+=Oe(t.widgets[a]));return e}function na(t,e,a,i,r){if(!r){var n=ra(e);a.top+=n,a.bottom+=n}if("line"==i)return a;i||(i="local");var s=ae(e);if("local"==i?s+=Re(t.display):s-=t.display.viewOffset,"page"==i||"window"==i){var o=t.display.lineSpace.getBoundingClientRect();s+=o.top+("window"==i?0:ia());var h=o.left+("window"==i?0:aa());a.left+=h,a.right+=h}return a.top+=s,a.bottom+=s,a}function sa(t,e,a){if("div"==a)return e;var i=e.left,r=e.top;if("page"==a)i-=aa(),r-=ia();else if("local"==a||!a){var n=t.display.sizer.getBoundingClientRect();i+=n.left,r+=n.top}var s=t.display.lineSpace.getBoundingClientRect();return{left:i-s.left,top:r-s.top}}function oa(t,e,a,i,r){return i||(i=$(t.doc,e.line)),na(t,i,Ue(t,i,e.ch,r),a)}function ha(t,e,a,i,r,n){function s(e,s){var o=ze(t,r,e,s?"right":"left",n);return s?o.left=o.right:o.right=o.left,na(t,i,o,a)}function o(t,e,a){var i=h[e],r=1==i.level;return s(a?t-1:t,r!=a)}i=i||$(t.doc,e.line),r||(r=je(t,i));var h=b(i,t.doc.direction),l=e.ch,u=e.sticky;if(l>=i.text.length?(l=i.text.length,u="before"):l<=0&&(l=0,u="after"),!h)return s("before"==u?l-1:l,"before"==u);var c=_(h,l,u),d=qs,f=o(l,c,"before"==u);return null!=d&&(f.other=o(l,d,"before"!=u)),f}function la(t,e){var a=0;e=mt(t.doc,e),t.options.lineWrapping||(a=ga(t.display)*e.ch);var i=$(t.doc,e.line),r=ae(i)+Re(t.display);return{left:a,right:a,top:r,bottom:r+i.height}}function ua(t,e,a,i,r){var n=ot(t,e,a);return n.xRel=r,i&&(n.outside=i),n}function ca(t,e,a){var i=t.doc;if((a+=t.display.viewOffset)<0)return ua(i.first,0,null,-1,-1);var r=rt(i,a),n=i.first+i.size-1;if(r>n)return ua(i.first+i.size-1,$(i,n).text.length,null,1,1);e<0&&(e=0);for(var s=$(i,r);;){var o=Ca(t,s,r,e,a),h=jt(s,o.ch+(o.xRel>0||o.outside>0?1:0));if(!h)return o;var l=h.find(1);if(l.line==r)return l;s=$(i,r=l.line)}}function da(t,e,a,i){i-=ra(e);var r=e.text.length,n=L(function(e){return ze(t,a,e-1).bottom<=i},r,0);return r=L(function(e){return ze(t,a,e).top>i},n,r),{begin:n,end:r}}function fa(t,e,a,i){return a||(a=je(t,e)),da(t,e,a,na(t,e,ze(t,a,i),"line").top)}function ma(t,e,a,i){return!(t.bottom<=a)&&(t.top>a||(i?t.left:t.right)>e)}function Ca(t,e,a,i,r){r-=ae(e);var n=je(t,e),s=ra(e),o=0,h=e.text.length,l=!0,u=b(e,t.doc.direction);if(u){var c=(t.options.lineWrapping?Da:pa)(t,e,a,n,u,i,r);l=1!=c.level,o=l?c.from:c.to-1,h=l?c.to:c.from-1}var d,f,m=null,C=null,p=L(function(e){var a=ze(t,n,e);return a.top+=s,a.bottom+=s,!!ma(a,i,r,!1)&&(a.top<=r&&a.left<=i&&(m=e,C=a),!0)},o,h),D=!1;if(C){var v=i-C.left<C.right-i,g=v==l;p=m+(g?0:1),f=g?"after":"before",d=v?C.left:C.right}else{l||p!=h&&p!=o||p++,f=0==p?"after":p==e.text.length?"before":ze(t,n,p-(l?1:0)).bottom+s<=r==l?"after":"before";var S=ha(t,ot(a,p,f),"line",e,n);d=S.left,D=r<S.top?-1:r>=S.bottom?1:0}return p=x(e.text,p,1),ua(a,p,f,D,i-d)}function pa(t,e,a,i,r,n,s){var o=L(function(o){var h=r[o],l=1!=h.level;return ma(ha(t,ot(a,l?h.to:h.from,l?"before":"after"),"line",e,i),n,s,!0)},0,r.length-1),h=r[o];if(o>0){var l=1!=h.level,u=ha(t,ot(a,l?h.from:h.to,l?"after":"before"),"line",e,i);ma(u,n,s,!0)&&u.top>s&&(h=r[o-1])}return h}function Da(t,e,a,i,r,n,s){var o=da(t,e,i,s),h=o.begin,l=o.end;/\s/.test(e.text.charAt(l-1))&&l--;for(var u=null,c=null,d=0;d<r.length;d++){var f=r[d];if(!(f.from>=l||f.to<=h)){var m=1!=f.level,C=ze(t,i,m?Math.min(l,f.to)-1:Math.max(h,f.from)).right,p=C<n?n-C+1e9:C-n;(!u||c>p)&&(u=f,c=p)}}return u||(u=r[r.length-1]),u.from<h&&(u={from:h,to:u.to,level:u.level}),u.to>l&&(u={from:u.from,to:l,level:u.level}),u}function va(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==po){po=i("pre",null,"CodeMirror-line-like");for(var r=0;r<49;++r)po.appendChild(document.createTextNode("x")),po.appendChild(i("br"));po.appendChild(document.createTextNode("x"))}a(t.measure,po);var n=po.offsetHeight/50;return n>3&&(t.cachedTextHeight=n),e(t.measure),n||1}function ga(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=i("span","xxxxxxxxxx"),r=i("pre",[e],"CodeMirror-line-like");a(t.measure,r);var n=e.getBoundingClientRect(),s=(n.right-n.left)/10;return s>2&&(t.cachedCharWidth=s),s||10}function Sa(t){for(var e=t.display,a={},i={},r=e.gutters.clientLeft,n=e.gutters.firstChild,s=0;n;n=n.nextSibling,++s){var o=t.display.gutterSpecs[s].className;a[o]=n.offsetLeft+n.clientLeft+r,i[o]=n.clientWidth}return{fixedPos:Ta(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:a,gutterWidth:i,wrapperWidth:e.wrapper.clientWidth}}function Ta(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function ya(t){var e=va(t.display),a=t.options.lineWrapping,i=a&&Math.max(5,t.display.scroller.clientWidth/ga(t.display)-3);return function(r){if(te(t.doc,r))return 0;var n=0;if(r.widgets)for(var s=0;s<r.widgets.length;s++)r.widgets[s].height&&(n+=r.widgets[s].height);return a?n+(Math.ceil(r.text.length/i)||1)*e:n+e}}function Ia(t){var e=t.doc,a=ya(t);e.iter(function(t){var e=a(t);e!=t.height&&at(t,e)})}function xa(t,e,a,i){var r=t.display;if(!a&&"true"==H(e).getAttribute("cm-not-content"))return null;var n,s,o=r.lineSpace.getBoundingClientRect();try{n=e.clientX-o.left,s=e.clientY-o.top}catch(t){return null}var h,l=ca(t,n,s);if(i&&l.xRel>0&&(h=$(t.doc,l.line).text).length==l.ch){var u=c(h,h.length,t.options.tabSize)-h.length;l=ot(l.line,Math.max(0,Math.round((n-Be(t.display).left)/ga(t.display))-u))}return l}function La(t,e){if(e>=t.display.viewTo)return null;if((e-=t.display.viewFrom)<0)return null;for(var a=t.display.view,i=0;i<a.length;i++)if((e-=a[i].size)<0)return i}function Ma(t,e,a,i){null==e&&(e=t.doc.first),null==a&&(a=t.doc.first+t.doc.size),i||(i=0);var r=t.display;if(i&&a<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>e)&&(r.updateLineNumbers=e),t.curOp.viewChanged=!0,e>=r.viewTo)mo&&Qt(t.doc,e)<r.viewTo&&ba(t);else if(a<=r.viewFrom)mo&&$t(t.doc,a+i)>r.viewFrom?ba(t):(r.viewFrom+=i,r.viewTo+=i);else if(e<=r.viewFrom&&a>=r.viewTo)ba(t);else if(e<=r.viewFrom){var n=wa(t,a,a+i,1);n?(r.view=r.view.slice(n.index),r.viewFrom=n.lineN,r.viewTo+=i):ba(t)}else if(a>=r.viewTo){var s=wa(t,e,e,-1);s?(r.view=r.view.slice(0,s.index),r.viewTo=s.lineN):ba(t)}else{var o=wa(t,e,e,-1),h=wa(t,a,a+i,1);o&&h?(r.view=r.view.slice(0,o.index).concat(pe(t,o.lineN,h.lineN)).concat(r.view.slice(h.index)),r.viewTo+=i):ba(t)}var l=r.externalMeasured;l&&(a<l.lineN?l.lineN+=i:e<l.lineN+l.size&&(r.externalMeasured=null))}function _a(t,e,a){t.curOp.viewChanged=!0;var i=t.display,r=t.display.externalMeasured;if(r&&e>=r.lineN&&e<r.lineN+r.size&&(i.externalMeasured=null),!(e<i.viewFrom||e>=i.viewTo)){var n=i.view[La(t,e)];if(null!=n.node){var s=n.changes||(n.changes=[]);-1==d(s,a)&&s.push(a)}}}function ba(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function wa(t,e,a,i){var r,n=La(t,e),s=t.display.view;if(!mo||a==t.doc.first+t.doc.size)return{index:n,lineN:a};for(var o=t.display.viewFrom,h=0;h<n;h++)o+=s[h].size;if(o!=e){if(i>0){if(n==s.length-1)return null;r=o+s[n].size-e,n++}else r=o-e;e+=r,a+=r}for(;Qt(t.doc,a)!=a;){if(n==(i<0?0:s.length-1))return null;a+=i*s[n-(i<0?1:0)].size,n+=i}return{index:n,lineN:a}}function Fa(t,e,a){var i=t.display;0==i.view.length||e>=i.viewTo||a<=i.viewFrom?(i.view=pe(t,e,a),i.viewFrom=e):(i.viewFrom>e?i.view=pe(t,e,i.viewFrom).concat(i.view):i.viewFrom<e&&(i.view=i.view.slice(La(t,e))),i.viewFrom=e,i.viewTo<a?i.view=i.view.concat(pe(t,i.viewTo,a)):i.viewTo>a&&(i.view=i.view.slice(0,La(t,a)))),i.viewTo=a}function Ea(t){for(var e=t.display.view,a=0,i=0;i<e.length;i++){var r=e[i];r.hidden||r.node&&!r.changes||++a}return a}function Aa(t){t.display.input.showSelection(t.display.input.prepareSelection())}function Na(t,e){void 0===e&&(e=!0);for(var a=t.doc,i={},r=i.cursors=document.createDocumentFragment(),n=i.selection=document.createDocumentFragment(),s=0;s<a.sel.ranges.length;s++)if(e||s!=a.sel.primIndex){var o=a.sel.ranges[s];if(!(o.from().line>=t.display.viewTo||o.to().line<t.display.viewFrom)){var h=o.empty();(h||t.options.showCursorWhenSelecting)&&Oa(t,o.head,r),h||Ra(t,o,n)}}return i}function Oa(t,e,a){var r=ha(t,e,"div",null,null,!t.options.singleCursorHeightPerLine),n=a.appendChild(i("div"," ","CodeMirror-cursor"));if(n.style.left=r.left+"px",n.style.top=r.top+"px",n.style.height=Math.max(0,r.bottom-r.top)*t.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(t.getWrapperElement().className)){var s=oa(t,e,"div",null,null);n.style.width=Math.max(0,s.right-s.left)+"px"}if(r.other){var o=a.appendChild(i("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=r.other.left+"px",o.style.top=r.other.top+"px",o.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function Pa(t,e){return t.top-e.top||t.left-e.left}function Ra(t,e,a){function r(t,e,a,r){e<0&&(e=0),e=Math.round(e),r=Math.round(r),h.appendChild(i("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px;\n                             top: "+e+"px; width: "+(null==a?c-t:a)+"px;\n                             height: "+(r-e)+"px"))}function n(e,a,i){function n(a,i){return oa(t,ot(e,a),"div",f,i)}function s(e,a,i){var r=fa(t,f,null,e),s="ltr"==a==("after"==i)?"left":"right";return n("after"==i?r.begin:r.end-(/\s/.test(f.text.charAt(r.end-1))?2:1),s)[s]}var h,l,f=$(o,e),m=f.text.length,C=b(f,o.direction);return M(C,a||0,null==i?m:i,function(t,e,o,f){var p="ltr"==o,D=n(t,p?"left":"right"),v=n(e-1,p?"right":"left"),g=null==a&&0==t,S=null==i&&e==m,T=0==f,y=!C||f==C.length-1;if(v.top-D.top<=3){var I=(d?g:S)&&T,x=(d?S:g)&&y,L=I?u:(p?D:v).left,M=x?c:(p?v:D).right;r(L,D.top,M-L,D.bottom)}else{var _,b,w,F;p?(_=d&&g&&T?u:D.left,b=d?c:s(t,o,"before"),w=d?u:s(e,o,"after"),F=d&&S&&y?c:v.right):(_=d?s(t,o,"before"):u,b=!d&&g&&T?c:D.right,w=!d&&S&&y?u:v.left,F=d?s(e,o,"after"):c),r(_,D.top,b-_,D.bottom),D.bottom<v.top&&r(u,D.bottom,null,v.top),r(w,v.top,F-w,v.bottom)}(!h||Pa(D,h)<0)&&(h=D),Pa(v,h)<0&&(h=v),(!l||Pa(D,l)<0)&&(l=D),Pa(v,l)<0&&(l=v)}),{start:h,end:l}}var s=t.display,o=t.doc,h=document.createDocumentFragment(),l=Be(t.display),u=l.left,c=Math.max(s.sizerWidth,He(t)-s.sizer.offsetLeft)-l.right,d="ltr"==o.direction,f=e.from(),m=e.to();if(f.line==m.line)n(f.line,f.ch,m.ch);else{var C=$(o,f.line),p=$(o,m.line),D=Jt(C)==Jt(p),v=n(f.line,f.ch,D?C.text.length+1:null).end,g=n(m.line,D?0:null,m.ch).start;D&&(v.top<g.top-2?(r(v.right,v.top,null,v.bottom),r(u,g.top,g.left,g.bottom)):r(v.right,v.top,g.left-v.right,v.bottom)),v.bottom<g.top&&r(u,v.bottom,null,g.top)}a.appendChild(h)}function ka(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var a=!0;e.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?e.blinker=setInterval(function(){t.hasFocus()||Va(t),e.cursorDiv.style.visibility=(a=!a)?"":"hidden"},t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(e.cursorDiv.style.visibility="hidden")}}function Ba(t){t.hasFocus()||(t.display.input.focus(),t.state.focused||Ha(t))}function Ya(t){t.state.delayingBlurEvent=!0,setTimeout(function(){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1,t.state.focused&&Va(t))},100)}function Ha(t,e){t.state.delayingBlurEvent&&!t.state.draggingText&&(t.state.delayingBlurEvent=!1),"nocursor"!=t.options.readOnly&&(t.state.focused||(E(t,"focus",t,e),t.state.focused=!0,o(t.display.wrapper,"CodeMirror-focused"),t.curOp||t.display.selForContextMenu==t.doc.sel||(t.display.input.reset(),Ss&&setTimeout(function(){return t.display.input.reset(!0)},20)),t.display.input.receivedFocus()),ka(t))}function Va(t,e){t.state.delayingBlurEvent||(t.state.focused&&(E(t,"blur",t,e),t.state.focused=!1,ks(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.display.shift=!1)},150))}function Ga(t){for(var e=t.display,a=e.lineDiv.offsetTop,i=0;i<e.view.length;i++){var r=e.view[i],n=t.options.lineWrapping,s=void 0,o=0;if(!r.hidden){if(vs&&gs<8){var h=r.node.offsetTop+r.node.offsetHeight;s=h-a,a=h}else{var l=r.node.getBoundingClientRect();s=l.bottom-l.top,!n&&r.text.firstChild&&(o=r.text.firstChild.getBoundingClientRect().right-l.left-1)}var u=r.line.height-s;if((u>.005||u<-.005)&&(at(r.line,s),Wa(r.line),r.rest))for(var c=0;c<r.rest.length;c++)Wa(r.rest[c]);if(o>t.display.sizerWidth){var d=Math.ceil(o/ga(t.display));d>t.display.maxLineLength&&(t.display.maxLineLength=d,t.display.maxLine=r.line,t.display.maxLineChanged=!0)}}}}function Wa(t){if(t.widgets)for(var e=0;e<t.widgets.length;++e){var a=t.widgets[e],i=a.node.parentNode;i&&(a.height=i.offsetHeight)}}function Xa(t,e,a){var i=a&&null!=a.top?Math.max(0,a.top):t.scroller.scrollTop;i=Math.floor(i-Re(t));var r=a&&null!=a.bottom?a.bottom:i+t.wrapper.clientHeight,n=rt(e,i),s=rt(e,r);if(a&&a.ensure){var o=a.ensure.from.line,h=a.ensure.to.line;o<n?(n=o,s=rt(e,ae($(e,o))+t.wrapper.clientHeight)):Math.min(h,e.lastLine())>=s&&(n=rt(e,ae($(e,h))-t.wrapper.clientHeight),s=h)}return{from:n,to:Math.max(s,n+1)}}function Ua(t,e){if(!A(t,"scrollCursorIntoView")){var a=t.display,r=a.sizer.getBoundingClientRect(),n=null;if(e.top+r.top<0?n=!0:e.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(n=!1),null!=n&&!Ms){var s=i("div","​",null,"position: absolute;\n                         top: "+(e.top-a.viewOffset-Re(t.display))+"px;\n                         height: "+(e.bottom-e.top+Ye(t)+a.barHeight)+"px;\n                         left: "+e.left+"px; width: "+Math.max(2,e.right-e.left)+"px;");t.display.lineSpace.appendChild(s),s.scrollIntoView(n),t.display.lineSpace.removeChild(s)}}}function Ka(t,e,a,i){null==i&&(i=0);var r;t.options.lineWrapping||e!=a||(a="before"==e.sticky?ot(e.line,e.ch+1,"before"):e,e=e.ch?ot(e.line,"before"==e.sticky?e.ch-1:e.ch,"after"):e);for(var n=0;n<5;n++){var s=!1,o=ha(t,e),h=a&&a!=e?ha(t,a):o;r={left:Math.min(o.left,h.left),top:Math.min(o.top,h.top)-i,right:Math.max(o.left,h.left),bottom:Math.max(o.bottom,h.bottom)+i};var l=za(t,r),u=t.doc.scrollTop,c=t.doc.scrollLeft;if(null!=l.scrollTop&&(ei(t,l.scrollTop),Math.abs(t.doc.scrollTop-u)>1&&(s=!0)),null!=l.scrollLeft&&(ii(t,l.scrollLeft),Math.abs(t.doc.scrollLeft-c)>1&&(s=!0)),!s)break}return r}function ja(t,e){var a=za(t,e);null!=a.scrollTop&&ei(t,a.scrollTop),null!=a.scrollLeft&&ii(t,a.scrollLeft)}function za(t,e){var a=t.display,i=va(t.display);e.top<0&&(e.top=0);var r=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:a.scroller.scrollTop,n=Ve(t),s={};e.bottom-e.top>n&&(e.bottom=e.top+n);var o=t.doc.height+ke(a),h=e.top<i,l=e.bottom>o-i;if(e.top<r)s.scrollTop=h?0:e.top;else if(e.bottom>r+n){var u=Math.min(e.top,(l?o:e.bottom)-n);u!=r&&(s.scrollTop=u)}var c=t.options.fixedGutter?0:a.gutters.offsetWidth,d=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:a.scroller.scrollLeft-c,f=He(t)-a.gutters.offsetWidth,m=e.right-e.left>f;return m&&(e.right=e.left+f),e.left<10?s.scrollLeft=0:e.left<d?s.scrollLeft=Math.max(0,e.left+c-(m?0:10)):e.right>f+d-3&&(s.scrollLeft=e.right+(m?0:10)-f),s}function Ja(t,e){null!=e&&($a(t),t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+e)}function qa(t){$a(t);var e=t.getCursor();t.curOp.scrollToPos={from:e,to:e,margin:t.options.cursorScrollMargin}}function Za(t,e,a){null==e&&null==a||$a(t),null!=e&&(t.curOp.scrollLeft=e),null!=a&&(t.curOp.scrollTop=a)}function Qa(t,e){$a(t),t.curOp.scrollToPos=e}function $a(t){var e=t.curOp.scrollToPos;if(e){t.curOp.scrollToPos=null;ti(t,la(t,e.from),la(t,e.to),e.margin)}}function ti(t,e,a,i){var r=za(t,{left:Math.min(e.left,a.left),top:Math.min(e.top,a.top)-i,right:Math.max(e.right,a.right),bottom:Math.max(e.bottom,a.bottom)+i});Za(t,r.scrollLeft,r.scrollTop)}function ei(t,e){Math.abs(t.doc.scrollTop-e)<2||(ms||_i(t,{top:e}),ai(t,e,!0),ms&&_i(t),Si(t,100))}function ai(t,e,a){e=Math.max(0,Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,e)),(t.display.scroller.scrollTop!=e||a)&&(t.doc.scrollTop=e,t.display.scrollbars.setScrollTop(e),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e))}function ii(t,e,a,i){e=Math.max(0,Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth)),(a?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)&&!i||(t.doc.scrollLeft=e,Ei(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbars.setScrollLeft(e))}function ri(t){var e=t.display,a=e.gutters.offsetWidth,i=Math.round(t.doc.height+ke(t.display));return{clientHeight:e.scroller.clientHeight,viewHeight:e.wrapper.clientHeight,scrollWidth:e.scroller.scrollWidth,clientWidth:e.scroller.clientWidth,viewWidth:e.wrapper.clientWidth,barLeft:t.options.fixedGutter?a:0,docHeight:i,scrollHeight:i+Ye(t)+e.barHeight,nativeBarWidth:e.nativeBarWidth,gutterWidth:a}}function ni(t,e){e||(e=ri(t));var a=t.display.barWidth,i=t.display.barHeight;si(t,e);for(var r=0;r<4&&a!=t.display.barWidth||i!=t.display.barHeight;r++)a!=t.display.barWidth&&t.options.lineWrapping&&Ga(t),si(t,ri(t)),a=t.display.barWidth,i=t.display.barHeight}function si(t,e){var a=t.display,i=a.scrollbars.update(e);a.sizer.style.paddingRight=(a.barWidth=i.right)+"px",a.sizer.style.paddingBottom=(a.barHeight=i.bottom)+"px",a.heightForcer.style.borderBottom=i.bottom+"px solid transparent",i.right&&i.bottom?(a.scrollbarFiller.style.display="block",a.scrollbarFiller.style.height=i.bottom+"px",a.scrollbarFiller.style.width=i.right+"px"):a.scrollbarFiller.style.display="",i.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(a.gutterFiller.style.display="block",a.gutterFiller.style.height=i.bottom+"px",a.gutterFiller.style.width=e.gutterWidth+"px"):a.gutterFiller.style.display=""}function oi(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&ks(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new xo[t.options.scrollbarStyle](function(e){t.display.wrapper.insertBefore(e,t.display.scrollbarFiller),$s(e,"mousedown",function(){t.state.focused&&setTimeout(function(){return t.display.input.focus()},0)}),e.setAttribute("cm-not-content","true")},function(e,a){"horizontal"==a?ii(t,e):ei(t,e)},t),t.display.scrollbars.addClass&&o(t.display.wrapper,t.display.scrollbars.addClass)}function hi(t){t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Lo,markArrays:null},De(t.curOp)}function li(t){var e=t.curOp;e&&ge(e,function(t){for(var e=0;e<t.ops.length;e++)t.ops[e].cm.curOp=null;ui(t)})}function ui(t){for(var e=t.ops,a=0;a<e.length;a++)ci(e[a]);for(var i=0;i<e.length;i++)di(e[i]);for(var r=0;r<e.length;r++)fi(e[r]);for(var n=0;n<e.length;n++)mi(e[n]);for(var s=0;s<e.length;s++)Ci(e[s])}function ci(t){var e=t.cm,a=e.display;yi(e),t.updateMaxLine&&re(e),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<a.viewFrom||t.scrollToPos.to.line>=a.viewTo)||a.maxLineChanged&&e.options.lineWrapping,t.update=t.mustUpdate&&new Mo(e,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function di(t){t.updatedDisplay=t.mustUpdate&&Li(t.cm,t.update)}function fi(t){var e=t.cm,a=e.display;t.updatedDisplay&&Ga(e),t.barMeasure=ri(e),a.maxLineChanged&&!e.options.lineWrapping&&(t.adjustWidthTo=Ue(e,a.maxLine,a.maxLine.text.length).left+3,e.display.sizerWidth=t.adjustWidthTo,t.barMeasure.scrollWidth=Math.max(a.scroller.clientWidth,a.sizer.offsetLeft+t.adjustWidthTo+Ye(e)+e.display.barWidth),t.maxScrollLeft=Math.max(0,a.sizer.offsetLeft+t.adjustWidthTo-He(e))),(t.updatedDisplay||t.selectionChanged)&&(t.preparedSelection=a.input.prepareSelection())}function mi(t){var e=t.cm;null!=t.adjustWidthTo&&(e.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<e.doc.scrollLeft&&ii(e,Math.min(e.display.scroller.scrollLeft,t.maxScrollLeft),!0),e.display.maxLineChanged=!1);var a=t.focus&&t.focus==s();t.preparedSelection&&e.display.input.showSelection(t.preparedSelection,a),(t.updatedDisplay||t.startHeight!=e.doc.height)&&ni(e,t.barMeasure),t.updatedDisplay&&Fi(e,t.barMeasure),t.selectionChanged&&ka(e),e.state.focused&&t.updateInput&&e.display.input.reset(t.typing),a&&Ba(t.cm)}function Ci(t){var e=t.cm,a=e.display,i=e.doc;if(t.updatedDisplay&&Mi(e,t.update),null==a.wheelStartX||null==t.scrollTop&&null==t.scrollLeft&&!t.scrollToPos||(a.wheelStartX=a.wheelStartY=null),null!=t.scrollTop&&ai(e,t.scrollTop,t.forceScroll),null!=t.scrollLeft&&ii(e,t.scrollLeft,!0,!0),t.scrollToPos){Ua(e,Ka(e,mt(i,t.scrollToPos.from),mt(i,t.scrollToPos.to),t.scrollToPos.margin))}var r=t.maybeHiddenMarkers,n=t.maybeUnhiddenMarkers;if(r)for(var s=0;s<r.length;++s)r[s].lines.length||E(r[s],"hide");if(n)for(var o=0;o<n.length;++o)n[o].lines.length&&E(n[o],"unhide");a.wrapper.offsetHeight&&(i.scrollTop=e.display.scroller.scrollTop),t.changeObjs&&E(e,"changes",e,t.changeObjs),t.update&&t.update.finish()}function pi(t,e){if(t.curOp)return e();hi(t);try{return e()}finally{li(t)}}function Di(t,e){return function(){if(t.curOp)return e.apply(t,arguments);hi(t);try{return e.apply(t,arguments)}finally{li(t)}}}function vi(t){return function(){if(this.curOp)return t.apply(this,arguments);hi(this);try{return t.apply(this,arguments)}finally{li(this)}}}function gi(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);hi(e);try{return t.apply(this,arguments)}finally{li(e)}}}function Si(t,e){t.doc.highlightFrontier<t.display.viewTo&&t.state.highlight.set(e,l(Ti,t))}function Ti(t){var e=t.doc;if(!(e.highlightFrontier>=t.display.viewTo)){var a=+new Date+t.options.workTime,i=gt(t,e.highlightFrontier),r=[];e.iter(i.line,Math.min(e.first+e.size,t.display.viewTo+500),function(n){if(i.line>=t.display.viewFrom){var s=n.styles,o=n.text.length>t.options.maxHighlightLength?q(e.mode,i.state):null,h=Dt(t,n,i,!0);o&&(i.state=o),n.styles=h.styles;var l=n.styleClasses,u=h.classes;u?n.styleClasses=u:l&&(n.styleClasses=null);for(var c=!s||s.length!=n.styles.length||l!=u&&(!l||!u||l.bgClass!=u.bgClass||l.textClass!=u.textClass),d=0;!c&&d<s.length;++d)c=s[d]!=n.styles[d];c&&r.push(i.line),n.stateAfter=i.save(),i.nextLine()}else n.text.length<=t.options.maxHighlightLength&&St(t,n.text,i),n.stateAfter=i.line%5==0?i.save():null,i.nextLine();if(+new Date>a)return Si(t,t.options.workDelay),!0}),e.highlightFrontier=i.line,e.modeFrontier=Math.max(e.modeFrontier,i.line),r.length&&pi(t,function(){for(var e=0;e<r.length;e++)_a(t,r[e],"text")})}}function yi(t){var e=t.display;!e.scrollbarsClipped&&e.scroller.offsetWidth&&(e.nativeBarWidth=e.scroller.offsetWidth-e.scroller.clientWidth,e.heightForcer.style.height=Ye(t)+"px",e.sizer.style.marginBottom=-e.nativeBarWidth+"px",e.sizer.style.borderRightWidth=Ye(t)+"px",e.scrollbarsClipped=!0)}function Ii(t){if(t.hasFocus())return null;var e=s();if(!e||!n(t.display.lineDiv,e))return null;var a={activeElt:e};if(window.getSelection){var i=window.getSelection();i.anchorNode&&i.extend&&n(t.display.lineDiv,i.anchorNode)&&(a.anchorNode=i.anchorNode,a.anchorOffset=i.anchorOffset,a.focusNode=i.focusNode,a.focusOffset=i.focusOffset)}return a}function xi(t){if(t&&t.activeElt&&t.activeElt!=s()&&(t.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(t.activeElt.nodeName)&&t.anchorNode&&n(document.body,t.anchorNode)&&n(document.body,t.focusNode))){var e=window.getSelection(),a=document.createRange();a.setEnd(t.anchorNode,t.anchorOffset),a.collapse(!1),e.removeAllRanges(),e.addRange(a),e.extend(t.focusNode,t.focusOffset)}}function Li(t,a){var i=t.display,r=t.doc;if(a.editorIsHidden)return ba(t),!1;if(!a.force&&a.visible.from>=i.viewFrom&&a.visible.to<=i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo)&&i.renderedView==i.view&&0==Ea(t))return!1;Ai(t)&&(ba(t),a.dims=Sa(t));var n=r.first+r.size,s=Math.max(a.visible.from-t.options.viewportMargin,r.first),o=Math.min(n,a.visible.to+t.options.viewportMargin);i.viewFrom<s&&s-i.viewFrom<20&&(s=Math.max(r.first,i.viewFrom)),i.viewTo>o&&i.viewTo-o<20&&(o=Math.min(n,i.viewTo)),mo&&(s=Qt(t.doc,s),o=$t(t.doc,o));var h=s!=i.viewFrom||o!=i.viewTo||i.lastWrapHeight!=a.wrapperHeight||i.lastWrapWidth!=a.wrapperWidth;Fa(t,s,o),i.viewOffset=ae($(t.doc,i.viewFrom)),t.display.mover.style.top=i.viewOffset+"px";var l=Ea(t);if(!h&&0==l&&!a.force&&i.renderedView==i.view&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo))return!1;var u=Ii(t);return l>4&&(i.lineDiv.style.display="none"),bi(t,i.updateLineNumbers,a.dims),l>4&&(i.lineDiv.style.display=""),i.renderedView=i.view,xi(u),e(i.cursorDiv),e(i.selectionDiv),i.gutters.style.height=i.sizer.style.minHeight=0,h&&(i.lastWrapHeight=a.wrapperHeight,i.lastWrapWidth=a.wrapperWidth,Si(t,400)),i.updateLineNumbers=null,!0}function Mi(t,e){for(var a=e.viewport,i=!0;;i=!1){if(i&&t.options.lineWrapping&&e.oldDisplayWidth!=He(t))i&&(e.visible=Xa(t.display,t.doc,a));else if(a&&null!=a.top&&(a={top:Math.min(t.doc.height+ke(t.display)-Ve(t),a.top)}),e.visible=Xa(t.display,t.doc,a),e.visible.from>=t.display.viewFrom&&e.visible.to<=t.display.viewTo)break;if(!Li(t,e))break;Ga(t);var r=ri(t);Aa(t),ni(t,r),Fi(t,r),e.force=!1}e.signal(t,"update",t),t.display.viewFrom==t.display.reportedViewFrom&&t.display.viewTo==t.display.reportedViewTo||(e.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo)}function _i(t,e){var a=new Mo(t,e);if(Li(t,a)){Ga(t),Mi(t,a);var i=ri(t);Aa(t),ni(t,i),Fi(t,i),a.finish()}}function bi(t,a,i){function r(e){var a=e.nextSibling;return Ss&&Fs&&t.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),a}for(var n=t.display,s=t.options.lineNumbers,o=n.lineDiv,h=o.firstChild,l=n.view,u=n.viewFrom,c=0;c<l.length;c++){var f=l[c];if(f.hidden);else if(f.node&&f.node.parentNode==o){for(;h!=f.node;)h=r(h);var m=s&&null!=a&&a<=u&&f.lineNumber;f.changes&&(d(f.changes,"gutter")>-1&&(m=!1),ye(t,f,u,i)),m&&(e(f.lineNumber),f.lineNumber.appendChild(document.createTextNode(st(t.options,u)))),h=f.node.nextSibling}else{var C=Fe(t,f,u,i);o.insertBefore(C,h)}u+=f.size}for(;h;)h=r(h)}function wi(t){var e=t.gutters.offsetWidth;t.sizer.style.marginLeft=e+"px",Se(t,"gutterChanged",t)}function Fi(t,e){t.display.sizer.style.minHeight=e.docHeight+"px",t.display.heightForcer.style.top=e.docHeight+"px",t.display.gutters.style.height=e.docHeight+t.display.barHeight+Ye(t)+"px"}function Ei(t){var e=t.display,a=e.view;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var i=Ta(e)-e.scroller.scrollLeft+t.doc.scrollLeft,r=e.gutters.offsetWidth,n=i+"px",s=0;s<a.length;s++)if(!a[s].hidden){t.options.fixedGutter&&(a[s].gutter&&(a[s].gutter.style.left=n),a[s].gutterBackground&&(a[s].gutterBackground.style.left=n));var o=a[s].alignable;if(o)for(var h=0;h<o.length;h++)o[h].style.left=n}t.options.fixedGutter&&(e.gutters.style.left=i+r+"px")}}function Ai(t){if(!t.options.lineNumbers)return!1;var e=t.doc,a=st(t.options,e.first+e.size-1),r=t.display;if(a.length!=r.lineNumChars){var n=r.measure.appendChild(i("div",[i("div",a)],"CodeMirror-linenumber CodeMirror-gutter-elt")),s=n.firstChild.offsetWidth,o=n.offsetWidth-s;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(s,r.lineGutter.offsetWidth-o)+1,r.lineNumWidth=r.lineNumInnerWidth+o,r.lineNumChars=r.lineNumInnerWidth?a.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",wi(t.display),!0}return!1}function Ni(t,e){for(var a=[],i=!1,r=0;r<t.length;r++){var n=t[r],s=null;if("string"!=typeof n&&(s=n.style,n=n.className),"CodeMirror-linenumbers"==n){if(!e)continue;i=!0}a.push({className:n,style:s})}return e&&!i&&a.push({className:"CodeMirror-linenumbers",style:null}),a}function Oi(t){var a=t.gutters,r=t.gutterSpecs;e(a),t.lineGutter=null;for(var n=0;n<r.length;++n){var s=r[n],o=s.className,h=s.style,l=a.appendChild(i("div",null,"CodeMirror-gutter "+o));h&&(l.style.cssText=h),"CodeMirror-linenumbers"==o&&(t.lineGutter=l,l.style.width=(t.lineNumWidth||1)+"px")}a.style.display=r.length?"":"none",wi(t)}function Pi(t){Oi(t.display),Ma(t),Ei(t)}function Ri(t,e,a,n){var s=this;this.input=a,s.scrollbarFiller=i("div",null,"CodeMirror-scrollbar-filler"),s.scrollbarFiller.setAttribute("cm-not-content","true"),s.gutterFiller=i("div",null,"CodeMirror-gutter-filler"),s.gutterFiller.setAttribute("cm-not-content","true"),s.lineDiv=r("div",null,"CodeMirror-code"),s.selectionDiv=i("div",null,null,"position: relative; z-index: 1"),s.cursorDiv=i("div",null,"CodeMirror-cursors"),s.measure=i("div",null,"CodeMirror-measure"),s.lineMeasure=i("div",null,"CodeMirror-measure"),s.lineSpace=r("div",[s.measure,s.lineMeasure,s.selectionDiv,s.cursorDiv,s.lineDiv],null,"position: relative; outline: none");var o=r("div",[s.lineSpace],"CodeMirror-lines");s.mover=i("div",[o],null,"position: relative"),s.sizer=i("div",[s.mover],"CodeMirror-sizer"),s.sizerWidth=null,s.heightForcer=i("div",null,null,"position: absolute; height: "+Gs+"px; width: 1px;"),s.gutters=i("div",null,"CodeMirror-gutters"),s.lineGutter=null,s.scroller=i("div",[s.sizer,s.heightForcer,s.gutters],"CodeMirror-scroll"),s.scroller.setAttribute("tabIndex","-1"),s.wrapper=i("div",[s.scrollbarFiller,s.gutterFiller,s.scroller],"CodeMirror"),s.wrapper.setAttribute("translate","no"),vs&&gs<8&&(s.gutters.style.zIndex=-1,s.scroller.style.paddingRight=0),Ss||ms&&ws||(s.scroller.draggable=!0),t&&(t.appendChild?t.appendChild(s.wrapper):t(s.wrapper)),s.viewFrom=s.viewTo=e.first,s.reportedViewFrom=s.reportedViewTo=e.first,s.view=[],s.renderedView=null,s.externalMeasured=null,s.viewOffset=0,s.lastWrapHeight=s.lastWrapWidth=0,s.updateLineNumbers=null,s.nativeBarWidth=s.barHeight=s.barWidth=0,s.scrollbarsClipped=!1,s.lineNumWidth=s.lineNumInnerWidth=s.lineNumChars=null,s.alignWidgets=!1,s.cachedCharWidth=s.cachedTextHeight=s.cachedPaddingH=null,s.maxLine=null,s.maxLineLength=0,s.maxLineChanged=!1,s.wheelDX=s.wheelDY=s.wheelStartX=s.wheelStartY=null,s.shift=!1,s.selForContextMenu=null,s.activeTouch=null,s.gutterSpecs=Ni(n.gutters,n.lineNumbers),Oi(s),a.init(s)}function ki(t){var e=t.wheelDeltaX,a=t.wheelDeltaY;return null==e&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(e=t.detail),null==a&&t.detail&&t.axis==t.VERTICAL_AXIS?a=t.detail:null==a&&(a=t.wheelDelta),{x:e,y:a}}function Bi(t){var e=ki(t);return e.x*=bo,e.y*=bo,e}function Yi(t,e){var a=ki(e),i=a.x,r=a.y,n=t.display,s=n.scroller,o=s.scrollWidth>s.clientWidth,h=s.scrollHeight>s.clientHeight;if(i&&o||r&&h){if(r&&Fs&&Ss)t:for(var l=e.target,u=n.view;l!=s;l=l.parentNode)for(var c=0;c<u.length;c++)if(u[c].node==l){t.display.currentWheelTarget=l;break t}if(i&&!ms&&!Is&&null!=bo)return r&&h&&ei(t,Math.max(0,s.scrollTop+r*bo)),ii(t,Math.max(0,s.scrollLeft+i*bo)),(!r||r&&h)&&R(e),void(n.wheelStartX=null);if(r&&null!=bo){var d=r*bo,f=t.doc.scrollTop,m=f+n.wrapper.clientHeight;d<0?f=Math.max(0,f+d-50):m=Math.min(t.doc.height,m+d+50),_i(t,{top:f,bottom:m})}_o<20&&(null==n.wheelStartX?(n.wheelStartX=s.scrollLeft,n.wheelStartY=s.scrollTop,n.wheelDX=i,n.wheelDY=r,setTimeout(function(){if(null!=n.wheelStartX){var t=s.scrollLeft-n.wheelStartX,e=s.scrollTop-n.wheelStartY,a=e&&n.wheelDY&&e/n.wheelDY||t&&n.wheelDX&&t/n.wheelDX;n.wheelStartX=n.wheelStartY=null,a&&(bo=(bo*_o+a)/(_o+1),++_o)}},200)):(n.wheelDX+=i,n.wheelDY+=r))}}function Hi(t,e,a){var i=t&&t.options.selectionsMayTouch,r=e[a];e.sort(function(t,e){return ht(t.from(),e.from())}),a=d(e,r);for(var n=1;n<e.length;n++){var s=e[n],o=e[n-1],h=ht(o.to(),s.from());if(i&&!s.empty()?h>0:h>=0){var l=dt(o.from(),s.from()),u=ct(o.to(),s.to()),c=o.empty()?s.from()==s.head:o.from()==o.head;n<=a&&--a,e.splice(--n,2,new Fo(c?u:l,c?l:u))}}return new wo(e,a)}function Vi(t,e){return new wo([new Fo(t,e||t)],0)}function Gi(t){return t.text?ot(t.from.line+t.text.length-1,C(t.text).length+(1==t.text.length?t.from.ch:0)):t.to}function Wi(t,e){if(ht(t,e.from)<0)return t;if(ht(t,e.to)<=0)return Gi(e);var a=t.line+e.text.length-(e.to.line-e.from.line)-1,i=t.ch;return t.line==e.to.line&&(i+=Gi(e).ch-e.to.ch),ot(a,i)}function Xi(t,e){for(var a=[],i=0;i<t.sel.ranges.length;i++){var r=t.sel.ranges[i];a.push(new Fo(Wi(r.anchor,e),Wi(r.head,e)))}return Hi(t.cm,a,t.sel.primIndex)}function Ui(t,e,a){return t.line==e.line?ot(a.line,t.ch-e.ch+a.ch):ot(a.line+(t.line-e.line),t.ch)}function Ki(t,e,a){for(var i=[],r=ot(t.first,0),n=r,s=0;s<e.length;s++){var o=e[s],h=Ui(o.from,r,n),l=Ui(Gi(o),r,n);if(r=o.to,n=l,"around"==a){var u=t.sel.ranges[s],c=ht(u.head,u.anchor)<0;i[s]=new Fo(c?l:h,c?h:l)}else i[s]=new Fo(h,h)}return new wo(i,t.sel.primIndex)}function ji(t){t.doc.mode=z(t.options,t.doc.modeOption),zi(t)}function zi(t){t.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),t.doc.modeFrontier=t.doc.highlightFrontier=t.doc.first,Si(t,100),t.state.modeGen++,t.curOp&&Ma(t)}function Ji(t,e){return 0==e.from.ch&&0==e.to.ch&&""==C(e.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function qi(t,e,a,i){function r(t){return a?a[t]:null}function n(t,a,r){ne(t,a,r,i),Se(t,"change",t,e)}function s(t,e){for(var a=[],n=t;n<e;++n)a.push(new Co(l[n],r(n),i));return a}var o=e.from,h=e.to,l=e.text,u=$(t,o.line),c=$(t,h.line),d=C(l),f=r(l.length-1),m=h.line-o.line;if(e.full)t.insert(0,s(0,l.length)),t.remove(l.length,t.size-l.length);else if(Ji(t,e)){var p=s(0,l.length-1);n(c,c.text,f),m&&t.remove(o.line,m),p.length&&t.insert(o.line,p)}else if(u==c)if(1==l.length)n(u,u.text.slice(0,o.ch)+d+u.text.slice(h.ch),f);else{var D=s(1,l.length-1);D.push(new Co(d+u.text.slice(h.ch),f,i)),n(u,u.text.slice(0,o.ch)+l[0],r(0)),t.insert(o.line+1,D)}else if(1==l.length)n(u,u.text.slice(0,o.ch)+l[0]+c.text.slice(h.ch),r(0)),t.remove(o.line+1,m);else{n(u,u.text.slice(0,o.ch)+l[0],r(0)),n(c,d+c.text.slice(h.ch),f);var v=s(1,l.length-1);m>1&&t.remove(o.line+1,m-1),t.insert(o.line+1,v)}Se(t,"change",t,e)}function Zi(t,e,a){function i(t,r,n){if(t.linked)for(var s=0;s<t.linked.length;++s){var o=t.linked[s];if(o.doc!=r){var h=n&&o.sharedHist;a&&!h||(e(o.doc,h),i(o.doc,t,h))}}}i(t,null,!0)}function Qi(t,e){if(e.cm)throw new Error("This document is already in use.");t.doc=e,e.cm=t,Ia(t),ji(t),$i(t),t.options.direction=e.direction,t.options.lineWrapping||re(t),t.options.mode=e.modeOption,Ma(t)}function $i(t){("rtl"==t.doc.direction?o:ks)(t.display.lineDiv,"CodeMirror-rtl")}function tr(t){pi(t,function(){$i(t),Ma(t)})}function er(t){this.done=[],this.undone=[],this.undoDepth=t?t.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t?t.maxGeneration:1}function ar(t,e){var a={from:ut(e.from),to:Gi(e),text:tt(t,e.from,e.to)};return lr(t,a,e.from.line,e.to.line+1),Zi(t,function(t){return lr(t,a,e.from.line,e.to.line+1)},!0),a}function ir(t){for(;t.length;){if(!C(t).ranges)break;t.pop()}}function rr(t,e){return e?(ir(t.done),C(t.done)):t.done.length&&!C(t.done).ranges?C(t.done):t.done.length>1&&!t.done[t.done.length-2].ranges?(t.done.pop(),C(t.done)):void 0}function nr(t,e,a,i){var r=t.history;r.undone.length=0;var n,s,o=+new Date;if((r.lastOp==i||r.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&r.lastModTime>o-(t.cm?t.cm.options.historyEventDelay:500)||"*"==e.origin.charAt(0)))&&(n=rr(r,r.lastOp==i)))s=C(n.changes),0==ht(e.from,e.to)&&0==ht(e.from,s.to)?s.to=Gi(e):n.changes.push(ar(t,e));else{var h=C(r.done);for(h&&h.ranges||hr(t.sel,r.done),n={changes:[ar(t,e)],generation:r.generation},r.done.push(n);r.done.length>r.undoDepth;)r.done.shift(),r.done[0].ranges||r.done.shift()}r.done.push(a),r.generation=++r.maxGeneration,r.lastModTime=r.lastSelTime=o,r.lastOp=r.lastSelOp=i,r.lastOrigin=r.lastSelOrigin=e.origin,s||E(t,"historyAdded")}function sr(t,e,a,i){var r=e.charAt(0);return"*"==r||"+"==r&&a.ranges.length==i.ranges.length&&a.somethingSelected()==i.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}function or(t,e,a,i){var r=t.history,n=i&&i.origin;a==r.lastSelOp||n&&r.lastSelOrigin==n&&(r.lastModTime==r.lastSelTime&&r.lastOrigin==n||sr(t,n,C(r.done),e))?r.done[r.done.length-1]=e:hr(e,r.done),r.lastSelTime=+new Date,r.lastSelOrigin=n,r.lastSelOp=a,i&&!1!==i.clearRedo&&ir(r.undone)}function hr(t,e){var a=C(e);a&&a.ranges&&a.equals(t)||e.push(t)}function lr(t,e,a,i){var r=e["spans_"+t.id],n=0;t.iter(Math.max(t.first,a),Math.min(t.first+t.size,i),function(a){a.markedSpans&&((r||(r=e["spans_"+t.id]={}))[n]=a.markedSpans),++n})}function ur(t){if(!t)return null;for(var e,a=0;a<t.length;++a)t[a].marker.explicitlyCleared?e||(e=t.slice(0,a)):e&&e.push(t[a]);return e?e.length?e:null:t}function cr(t,e){var a=e["spans_"+t.id];if(!a)return null;for(var i=[],r=0;r<e.text.length;++r)i.push(ur(a[r]));return i}function dr(t,e){var a=cr(t,e),i=Rt(t,e);if(!a)return i;if(!i)return a;for(var r=0;r<a.length;++r){var n=a[r],s=i[r];if(n&&s)t:for(var o=0;o<s.length;++o){for(var h=s[o],l=0;l<n.length;++l)if(n[l].marker==h.marker)continue t;n.push(h)}else s&&(a[r]=s)}return a}function fr(t,e,a){for(var i=[],r=0;r<t.length;++r){var n=t[r];if(n.ranges)i.push(a?wo.prototype.deepCopy.call(n):n);else{var s=n.changes,o=[];i.push({changes:o});for(var h=0;h<s.length;++h){var l=s[h],u=void 0;if(o.push({from:l.from,to:l.to,text:l.text}),e)for(var c in l)(u=c.match(/^spans_(\d+)$/))&&d(e,Number(u[1]))>-1&&(C(o)[c]=l[c],delete l[c])}}}return i}function mr(t,e,a,i){if(i){var r=t.anchor;if(a){var n=ht(e,r)<0;n!=ht(a,r)<0?(r=e,e=a):n!=ht(e,a)<0&&(e=a)}return new Fo(r,e)}return new Fo(a||e,e)}function Cr(t,e,a,i,r){null==r&&(r=t.cm&&(t.cm.display.shift||t.extend)),Tr(t,new wo([mr(t.sel.primary(),e,a,r)],0),i)}function pr(t,e,a){for(var i=[],r=t.cm&&(t.cm.display.shift||t.extend),n=0;n<t.sel.ranges.length;n++)i[n]=mr(t.sel.ranges[n],e[n],null,r);Tr(t,Hi(t.cm,i,t.sel.primIndex),a)}function Dr(t,e,a,i){var r=t.sel.ranges.slice(0);r[e]=a,Tr(t,Hi(t.cm,r,t.sel.primIndex),i)}function vr(t,e,a,i){Tr(t,Vi(e,a),i)}function gr(t,e,a){var i={ranges:e.ranges,update:function(e){this.ranges=[];for(var a=0;a<e.length;a++)this.ranges[a]=new Fo(mt(t,e[a].anchor),mt(t,e[a].head))},origin:a&&a.origin};return E(t,"beforeSelectionChange",t,i),t.cm&&E(t.cm,"beforeSelectionChange",t.cm,i),i.ranges!=e.ranges?Hi(t.cm,i.ranges,i.ranges.length-1):e}function Sr(t,e,a){var i=t.history.done,r=C(i);r&&r.ranges?(i[i.length-1]=e,yr(t,e,a)):Tr(t,e,a)}function Tr(t,e,a){yr(t,e,a),or(t,t.sel,t.cm?t.cm.curOp.id:NaN,a)}function yr(t,e,a){(O(t,"beforeSelectionChange")||t.cm&&O(t.cm,"beforeSelectionChange"))&&(e=gr(t,e,a)),Ir(t,Lr(t,e,a&&a.bias||(ht(e.primary().head,t.sel.primary().head)<0?-1:1),!0)),a&&!1===a.scroll||!t.cm||"nocursor"==t.cm.getOption("readOnly")||qa(t.cm)}function Ir(t,e){e.equals(t.sel)||(t.sel=e,t.cm&&(t.cm.curOp.updateInput=1,t.cm.curOp.selectionChanged=!0,N(t.cm)),Se(t,"cursorActivity",t))}function xr(t){Ir(t,Lr(t,t.sel,null,!1))}function Lr(t,e,a,i){for(var r,n=0;n<e.ranges.length;n++){var s=e.ranges[n],o=e.ranges.length==t.sel.ranges.length&&t.sel.ranges[n],h=_r(t,s.anchor,o&&o.anchor,a,i),l=_r(t,s.head,o&&o.head,a,i);(r||h!=s.anchor||l!=s.head)&&(r||(r=e.ranges.slice(0,n)),r[n]=new Fo(h,l))}return r?Hi(t.cm,r,e.primIndex):e}function Mr(t,e,a,i,r){var n=$(t,e.line);if(n.markedSpans)for(var s=0;s<n.markedSpans.length;++s){var o=n.markedSpans[s],h=o.marker,l="selectLeft"in h?!h.selectLeft:h.inclusiveLeft,u="selectRight"in h?!h.selectRight:h.inclusiveRight;if((null==o.from||(l?o.from<=e.ch:o.from<e.ch))&&(null==o.to||(u?o.to>=e.ch:o.to>e.ch))){if(r&&(E(h,"beforeCursorEnter"),h.explicitlyCleared)){if(n.markedSpans){--s;continue}break}if(!h.atomic)continue;if(a){var c=h.find(i<0?1:-1),d=void 0;if((i<0?u:l)&&(c=br(t,c,-i,c&&c.line==e.line?n:null)),c&&c.line==e.line&&(d=ht(c,a))&&(i<0?d<0:d>0))return Mr(t,c,e,i,r)}var f=h.find(i<0?-1:1);return(i<0?l:u)&&(f=br(t,f,i,f.line==e.line?n:null)),f?Mr(t,f,e,i,r):null}}return e}function _r(t,e,a,i,r){var n=i||1,s=Mr(t,e,a,n,r)||!r&&Mr(t,e,a,n,!0)||Mr(t,e,a,-n,r)||!r&&Mr(t,e,a,-n,!0);return s||(t.cantEdit=!0,ot(t.first,0))}function br(t,e,a,i){return a<0&&0==e.ch?e.line>t.first?mt(t,ot(e.line-1)):null:a>0&&e.ch==(i||$(t,e.line)).text.length?e.line<t.first+t.size-1?ot(e.line+1,0):null:new ot(e.line,e.ch+a)}function wr(t){t.setSelection(ot(t.firstLine(),0),ot(t.lastLine()),Xs)}function Fr(t,e,a){var i={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){return i.canceled=!0}};return a&&(i.update=function(e,a,r,n){e&&(i.from=mt(t,e)),a&&(i.to=mt(t,a)),r&&(i.text=r),void 0!==n&&(i.origin=n)}),E(t,"beforeChange",t,i),t.cm&&E(t.cm,"beforeChange",t.cm,i),i.canceled?(t.cm&&(t.cm.curOp.updateInput=2),null):{from:i.from,to:i.to,text:i.text,origin:i.origin}}function Er(t,e,a){if(t.cm){if(!t.cm.curOp)return Di(t.cm,Er)(t,e,a);if(t.cm.state.suppressEdits)return}if(!(O(t,"beforeChange")||t.cm&&O(t.cm,"beforeChange"))||(e=Fr(t,e,!0))){var i=fo&&!a&&Bt(t,e.from,e.to);if(i)for(var r=i.length-1;r>=0;--r)Ar(t,{from:i[r].from,to:i[r].to,text:r?[""]:e.text,origin:e.origin});else Ar(t,e)}}function Ar(t,e){if(1!=e.text.length||""!=e.text[0]||0!=ht(e.from,e.to)){var a=Xi(t,e);nr(t,e,a,t.cm?t.cm.curOp.id:NaN),Pr(t,e,a,Rt(t,e));var i=[];Zi(t,function(t,a){a||-1!=d(i,t.history)||(Hr(t.history,e),i.push(t.history)),Pr(t,e,null,Rt(t,e))})}}function Nr(t,e,a){var i=t.cm&&t.cm.state.suppressEdits;if(!i||a){for(var r,n=t.history,s=t.sel,o="undo"==e?n.done:n.undone,h="undo"==e?n.undone:n.done,l=0;l<o.length&&(r=o[l],a?!r.ranges||r.equals(t.sel):r.ranges);l++);if(l!=o.length){for(n.lastOrigin=n.lastSelOrigin=null;;){if(r=o.pop(),!r.ranges){if(i)return void o.push(r);break}if(hr(r,h),a&&!r.equals(t.sel))return void Tr(t,r,{clearRedo:!1});s=r}var u=[];hr(s,h),h.push({changes:u,generation:n.generation}),n.generation=r.generation||++n.maxGeneration;for(var c=O(t,"beforeChange")||t.cm&&O(t.cm,"beforeChange"),f=r.changes.length-1;f>=0;--f){var m=function(a){var i=r.changes[a];if(i.origin=e,c&&!Fr(t,i,!1))return o.length=0,{};u.push(ar(t,i));var n=a?Xi(t,i):C(o);Pr(t,i,n,dr(t,i)),!a&&t.cm&&t.cm.scrollIntoView({from:i.from,to:Gi(i)});var s=[];Zi(t,function(t,e){e||-1!=d(s,t.history)||(Hr(t.history,i),s.push(t.history)),Pr(t,i,null,dr(t,i))})}(f);if(m)return m.v}}}}function Or(t,e){if(0!=e&&(t.first+=e,t.sel=new wo(p(t.sel.ranges,function(t){return new Fo(ot(t.anchor.line+e,t.anchor.ch),ot(t.head.line+e,t.head.ch))}),t.sel.primIndex),t.cm)){Ma(t.cm,t.first,t.first-e,e);for(var a=t.cm.display,i=a.viewFrom;i<a.viewTo;i++)_a(t.cm,i,"gutter")}}function Pr(t,e,a,i){if(t.cm&&!t.cm.curOp)return Di(t.cm,Pr)(t,e,a,i);if(e.to.line<t.first)return void Or(t,e.text.length-1-(e.to.line-e.from.line));if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var r=e.text.length-1-(t.first-e.from.line);Or(t,r),e={from:ot(t.first,0),to:ot(e.to.line+r,e.to.ch),text:[C(e.text)],origin:e.origin}}var n=t.lastLine();e.to.line>n&&(e={from:e.from,to:ot(n,$(t,n).text.length),text:[e.text[0]],origin:e.origin}),e.removed=tt(t,e.from,e.to),a||(a=Xi(t,e)),t.cm?Rr(t.cm,e,i):qi(t,e,i),yr(t,a,Xs),t.cantEdit&&_r(t,ot(t.firstLine(),0))&&(t.cantEdit=!1)}}function Rr(t,e,a){var i=t.doc,r=t.display,n=e.from,s=e.to,o=!1,h=n.line;t.options.lineWrapping||(h=it(Jt($(i,n.line))),i.iter(h,s.line+1,function(t){if(t==r.maxLine)return o=!0,!0})),i.sel.contains(e.from,e.to)>-1&&N(t),qi(i,e,a,ya(t)),t.options.lineWrapping||(i.iter(h,n.line+e.text.length,function(t){var e=ie(t);e>r.maxLineLength&&(r.maxLine=t,r.maxLineLength=e,r.maxLineChanged=!0,o=!1)}),o&&(t.curOp.updateMaxLine=!0)),_t(i,n.line),Si(t,400);var l=e.text.length-(s.line-n.line)-1;e.full?Ma(t):n.line!=s.line||1!=e.text.length||Ji(t.doc,e)?Ma(t,n.line,s.line+1,l):_a(t,n.line,"text");var u=O(t,"changes"),c=O(t,"change");if(c||u){var d={from:n,to:s,text:e.text,removed:e.removed,origin:e.origin};c&&Se(t,"change",t,d),u&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(d)}t.display.selForContextMenu=null}function kr(t,e,a,i,r){var n;i||(i=a),ht(i,a)<0&&(n=[i,a],a=n[0],i=n[1]),"string"==typeof e&&(e=t.splitLines(e)),Er(t,{from:a,to:i,text:e,origin:r})}function Br(t,e,a,i){a<t.line?t.line+=i:e<t.line&&(t.line=e,t.ch=0)}function Yr(t,e,a,i){for(var r=0;r<t.length;++r){var n=t[r],s=!0;if(n.ranges){n.copied||(n=t[r]=n.deepCopy(),n.copied=!0);for(var o=0;o<n.ranges.length;o++)Br(n.ranges[o].anchor,e,a,i),Br(n.ranges[o].head,e,a,i)}else{for(var h=0;h<n.changes.length;++h){var l=n.changes[h];if(a<l.from.line)l.from=ot(l.from.line+i,l.from.ch),l.to=ot(l.to.line+i,l.to.ch);else if(e<=l.to.line){s=!1;break}}s||(t.splice(0,r+1),r=0)}}}function Hr(t,e){var a=e.from.line,i=e.to.line,r=e.text.length-(i-a)-1;Yr(t.done,a,i,r),Yr(t.undone,a,i,r)}function Vr(t,e,a,i){var r=e,n=e;return"number"==typeof e?n=$(t,ft(t,e)):r=it(e),null==r?null:(i(n,r)&&t.cm&&_a(t.cm,r,a),n)}function Gr(t){this.lines=t,this.parent=null;for(var e=0,a=0;a<t.length;++a)t[a].parent=this,e+=t[a].height;this.height=e}function Wr(t){this.children=t;for(var e=0,a=0,i=0;i<t.length;++i){var r=t[i];e+=r.chunkSize(),a+=r.height,r.parent=this}this.size=e,this.height=a,this.parent=null}function Xr(t,e,a){ae(e)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&Ja(t,a)}function Ur(t,e,a,i){var r=new Eo(t,a,i),n=t.cm;return n&&r.noHScroll&&(n.display.alignWidgets=!0),Vr(t,e,"widget",function(e){var a=e.widgets||(e.widgets=[]);if(null==r.insertAt?a.push(r):a.splice(Math.min(a.length,Math.max(0,r.insertAt)),0,r),r.line=e,n&&!te(t,e)){var i=ae(e)<t.scrollTop;at(e,e.height+Oe(r)),i&&Ja(n,r.height),n.curOp.forceUpdate=!0}return!0}),n&&Se(n,"lineWidgetAdded",n,r,"number"==typeof e?e:it(e)),r}function Kr(t,e,a,i,n){if(i&&i.shared)return jr(t,e,a,i,n);if(t.cm&&!t.cm.curOp)return Di(t.cm,Kr)(t,e,a,i,n);var s=new No(t,n),o=ht(e,a);if(i&&u(i,s,!1),o>0||0==o&&!1!==s.clearWhenEmpty)return s;if(s.replacedWith&&(s.collapsed=!0,s.widgetNode=r("span",[s.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||s.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(s.widgetNode.insertLeft=!0)),s.collapsed){if(zt(t,e.line,e,a,s)||e.line!=a.line&&zt(t,a.line,e,a,s))throw new Error("Inserting collapsed marker partially overlapping an existing one");wt()}s.addToHistory&&nr(t,{from:e,to:a,origin:"markText"},t.sel,NaN);var h,l=e.line,c=t.cm;if(t.iter(l,a.line+1,function(i){c&&s.collapsed&&!c.options.lineWrapping&&Jt(i)==c.display.maxLine&&(h=!0),s.collapsed&&l!=e.line&&at(i,0),Nt(i,new Ft(s,l==e.line?e.ch:null,l==a.line?a.ch:null),t.cm&&t.cm.curOp),++l}),s.collapsed&&t.iter(e.line,a.line+1,function(e){te(t,e)&&at(e,0)}),s.clearOnEnter&&$s(s,"beforeCursorEnter",function(){return s.clear()}),s.readOnly&&(bt(),(t.history.done.length||t.history.undone.length)&&t.clearHistory()),s.collapsed&&(s.id=++Ao,s.atomic=!0),c){if(h&&(c.curOp.updateMaxLine=!0),s.collapsed)Ma(c,e.line,a.line+1);else if(s.className||s.startStyle||s.endStyle||s.css||s.attributes||s.title)for(var d=e.line;d<=a.line;d++)_a(c,d,"text");s.atomic&&xr(c.doc),Se(c,"markerAdded",c,s)}return s}function jr(t,e,a,i,r){i=u(i),i.shared=!1;var n=[Kr(t,e,a,i,r)],s=n[0],o=i.widgetNode;return Zi(t,function(t){o&&(i.widgetNode=o.cloneNode(!0)),n.push(Kr(t,mt(t,e),mt(t,a),i,r));for(var h=0;h<t.linked.length;++h)if(t.linked[h].isParent)return;s=C(n)}),new Oo(n,s)}function zr(t){return t.findMarks(ot(t.first,0),t.clipPos(ot(t.lastLine())),function(t){return t.parent})}function Jr(t,e){for(var a=0;a<e.length;a++){var i=e[a],r=i.find(),n=t.clipPos(r.from),s=t.clipPos(r.to);if(ht(n,s)){var o=Kr(t,n,s,i.primary,i.primary.type);i.markers.push(o),o.parent=i}}}function qr(t){for(var e=0;e<t.length;e++)!function(e){var a=t[e],i=[a.primary.doc];Zi(a.primary.doc,function(t){return i.push(t)});for(var r=0;r<a.markers.length;r++){var n=a.markers[r];-1==d(i,n.doc)&&(n.parent=null,a.markers.splice(r--,1))}}(e)}function Zr(t){var e=this;if(tn(e),!A(e,t)&&!Pe(e.display,t)){R(t),vs&&(ko=+new Date);var a=xa(e,t,!0),i=t.dataTransfer.files;if(a&&!e.isReadOnly())if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,n=Array(r),s=0,o=function(){++s==r&&Di(e,function(){a=mt(e.doc,a);var t={from:a,to:a,text:e.doc.splitLines(n.filter(function(t){return null!=t}).join(e.doc.lineSeparator())),origin:"paste"};Er(e.doc,t),Sr(e.doc,Vi(mt(e.doc,a),mt(e.doc,Gi(t))))})()},h=0;h<i.length;h++)!function(t,a){if(e.options.allowDropFileTypes&&-1==d(e.options.allowDropFileTypes,t.type))return void o();var i=new FileReader;i.onerror=function(){return o()},i.onload=function(){var t=i.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(t))return void o();n[a]=t,o()},i.readAsText(t)}(i[h],h);else{if(e.state.draggingText&&e.doc.sel.contains(a)>-1)return e.state.draggingText(t),void setTimeout(function(){return e.display.input.focus()},20);try{var l=t.dataTransfer.getData("Text");if(l){var u;if(e.state.draggingText&&!e.state.draggingText.copy&&(u=e.listSelections()),yr(e.doc,Vi(a,a)),u)for(var c=0;c<u.length;++c)kr(e.doc,"",u[c].anchor,u[c].head,"drag");e.replaceSelection(l,"around","paste"),e.display.input.focus()}}catch(t){}}}}function Qr(t,e){if(vs&&(!t.state.draggingText||+new Date-ko<100))return void Y(e);if(!A(t,e)&&!Pe(t.display,e)&&(e.dataTransfer.setData("Text",t.getSelection()),e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setDragImage&&!xs)){var a=i("img",null,null,"position: fixed; left: 0; top: 0;");a.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",Is&&(a.width=a.height=1,t.display.wrapper.appendChild(a),a._top=a.offsetTop),e.dataTransfer.setDragImage(a,0,0),Is&&a.parentNode.removeChild(a)}}function $r(t,e){var r=xa(t,e);if(r){var n=document.createDocumentFragment();Oa(t,r,n),t.display.dragCursor||(t.display.dragCursor=i("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),a(t.display.dragCursor,n)}}function tn(t){t.display.dragCursor&&(t.display.lineSpace.removeChild(t.display.dragCursor),t.display.dragCursor=null)}function en(t){if(document.getElementsByClassName){for(var e=document.getElementsByClassName("CodeMirror"),a=[],i=0;i<e.length;i++){var r=e[i].CodeMirror;r&&a.push(r)}a.length&&a[0].operation(function(){for(var e=0;e<a.length;e++)t(a[e])})}}function an(){Bo||(rn(),Bo=!0)}function rn(){var t;$s(window,"resize",function(){null==t&&(t=setTimeout(function(){t=null,en(nn)},100))}),$s(window,"blur",function(){return en(Va)})}function nn(t){var e=t.display;e.cachedCharWidth=e.cachedTextHeight=e.cachedPaddingH=null,e.scrollbarsClipped=!1,t.setSize()}function sn(t){var e=t.split(/-(?!$)/);t=e[e.length-1];for(var a,i,r,n,s=0;s<e.length-1;s++){var o=e[s];if(/^(cmd|meta|m)$/i.test(o))n=!0;else if(/^a(lt)?$/i.test(o))a=!0;else if(/^(c|ctrl|control)$/i.test(o))i=!0;else{if(!/^s(hift)?$/i.test(o))throw new Error("Unrecognized modifier name: "+o);r=!0}}return a&&(t="Alt-"+t),i&&(t="Ctrl-"+t),n&&(t="Cmd-"+t),r&&(t="Shift-"+t),t}function on(t){var e={};for(var a in t)if(t.hasOwnProperty(a)){var i=t[a];if(/^(name|fallthrough|(de|at)tach)$/.test(a))continue;if("..."==i){delete t[a];continue}for(var r=p(a.split(" "),sn),n=0;n<r.length;n++){var s=void 0,o=void 0;n==r.length-1?(o=r.join(" "),s=i):(o=r.slice(0,n+1).join(" "),s="...");var h=e[o];if(h){if(h!=s)throw new Error("Inconsistent bindings for "+o)}else e[o]=s}delete t[a]}for(var l in e)t[l]=e[l];return t}function hn(t,e,a,i){e=dn(e);var r=e.call?e.call(t,i):e[t];if(!1===r)return"nothing";if("..."===r)return"multi";if(null!=r&&a(r))return"handled";if(e.fallthrough){if("[object Array]"!=Object.prototype.toString.call(e.fallthrough))return hn(t,e.fallthrough,a,i);for(var n=0;n<e.fallthrough.length;n++){var s=hn(t,e.fallthrough[n],a,i);if(s)return s}}}function ln(t){var e="string"==typeof t?t:Yo[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function un(t,e,a){var i=t;return e.altKey&&"Alt"!=i&&(t="Alt-"+t),(Ps?e.metaKey:e.ctrlKey)&&"Ctrl"!=i&&(t="Ctrl-"+t),(Ps?e.ctrlKey:e.metaKey)&&"Mod"!=i&&(t="Cmd-"+t),!a&&e.shiftKey&&"Shift"!=i&&(t="Shift-"+t),t}function cn(t,e){if(Is&&34==t.keyCode&&t.char)return!1;var a=Yo[t.keyCode];return null!=a&&!t.altGraphKey&&(3==t.keyCode&&t.code&&(a=t.code),un(a,t,e))}function dn(t){return"string"==typeof t?Wo[t]:t}function fn(t,e){for(var a=t.doc.sel.ranges,i=[],r=0;r<a.length;r++){for(var n=e(a[r]);i.length&&ht(n.from,C(i).to)<=0;){var s=i.pop();if(ht(s.from,n.from)<0){n.from=s.from;break}}i.push(n)}pi(t,function(){for(var e=i.length-1;e>=0;e--)kr(t.doc,"",i[e].from,i[e].to,"+delete");qa(t)})}function mn(t,e,a){var i=x(t.text,e+a,a);return i<0||i>t.text.length?null:i}function Cn(t,e,a){var i=mn(t,e.ch,a);return null==i?null:new ot(e.line,i,a<0?"after":"before")}function pn(t,e,a,i,r){if(t){"rtl"==e.doc.direction&&(r=-r);var n=b(a,e.doc.direction);if(n){var s,o=r<0?C(n):n[0],h=r<0==(1==o.level),l=h?"after":"before";if(o.level>0||"rtl"==e.doc.direction){var u=je(e,a);s=r<0?a.text.length-1:0;var c=ze(e,u,s).top;s=L(function(t){return ze(e,u,t).top==c},r<0==(1==o.level)?o.from:o.to-1,s),"before"==l&&(s=mn(a,s,1))}else s=r<0?o.to:o.from;return new ot(i,s,l)}}return new ot(i,r<0?a.text.length:0,r<0?"before":"after")}function Dn(t,e,a,i){var r=b(e,t.doc.direction);if(!r)return Cn(e,a,i);a.ch>=e.text.length?(a.ch=e.text.length,a.sticky="before"):a.ch<=0&&(a.ch=0,a.sticky="after");var n=_(r,a.ch,a.sticky),s=r[n];if("ltr"==t.doc.direction&&s.level%2==0&&(i>0?s.to>a.ch:s.from<a.ch))return Cn(e,a,i);var o,h=function(t,a){return mn(e,t instanceof ot?t.ch:t,a)},l=function(a){return t.options.lineWrapping?(o=o||je(t,e),fa(t,e,o,a)):{begin:0,end:e.text.length}},u=l("before"==a.sticky?h(a,-1):a.ch);if("rtl"==t.doc.direction||1==s.level){var c=1==s.level==i<0,d=h(a,c?1:-1);if(null!=d&&(c?d<=s.to&&d<=u.end:d>=s.from&&d>=u.begin)){var f=c?"before":"after";return new ot(a.line,d,f)}}var m=function(t,e,i){for(var n=function(t,e){return e?new ot(a.line,h(t,1),"before"):new ot(a.line,t,"after")};t>=0&&t<r.length;t+=e){var s=r[t],o=e>0==(1!=s.level),l=o?i.begin:h(i.end,-1);if(s.from<=l&&l<s.to)return n(l,o);if(l=o?s.from:h(s.to,-1),i.begin<=l&&l<i.end)return n(l,o)}},C=m(n+i,i,u);if(C)return C;var p=i>0?u.end:h(u.begin,-1);return null==p||i>0&&p==e.text.length||!(C=m(i>0?0:r.length-1,i,l(p)))?null:C}function vn(t,e){var a=$(t.doc,e),i=Jt(a);return i!=a&&(e=it(i)),pn(!0,t,i,e,1)}function gn(t,e){var a=$(t.doc,e),i=qt(a);return i!=a&&(e=it(i)),pn(!0,t,a,e,-1)}function Sn(t,e){var a=vn(t,e.line),i=$(t.doc,a.line),r=b(i,t.doc.direction);if(!r||0==r[0].level){var n=Math.max(a.ch,i.text.search(/\S/)),s=e.line==a.line&&e.ch<=n&&e.ch;return ot(a.line,s?0:n,a.sticky)}return a}function Tn(t,e,a){if("string"==typeof e&&!(e=Xo[e]))return!1;t.display.input.ensurePolled();var i=t.display.shift,r=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),a&&(t.display.shift=!1),r=e(t)!=Ws}finally{t.display.shift=i,t.state.suppressEdits=!1}return r}function yn(t,e,a){for(var i=0;i<t.state.keyMaps.length;i++){var r=hn(e,t.state.keyMaps[i],a,t);if(r)return r}return t.options.extraKeys&&hn(e,t.options.extraKeys,a,t)||hn(e,t.options.keyMap,a,t)}function In(t,e,a,i){var r=t.state.keySeq;if(r){if(ln(e))return"handled";if(/\'$/.test(e)?t.state.keySeq=null:Uo.set(50,function(){t.state.keySeq==r&&(t.state.keySeq=null,t.display.input.reset())}),xn(t,r+" "+e,a,i))return!0}return xn(t,e,a,i)}function xn(t,e,a,i){var r=yn(t,e,i);return"multi"==r&&(t.state.keySeq=e),"handled"==r&&Se(t,"keyHandled",t,e,a),"handled"!=r&&"multi"!=r||(R(a),ka(t)),!!r}function Ln(t,e){var a=cn(e,!0);return!!a&&(e.shiftKey&&!t.state.keySeq?In(t,"Shift-"+a,e,function(e){return Tn(t,e,!0)})||In(t,a,e,function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return Tn(t,e)}):In(t,a,e,function(e){return Tn(t,e)}))}function Mn(t,e,a){return In(t,"'"+a+"'",e,function(e){return Tn(t,e,!0)})}function _n(t){var e=this;if(!(t.target&&t.target!=e.display.input.getField()||(e.curOp.focus=s(),A(e,t)))){vs&&gs<11&&27==t.keyCode&&(t.returnValue=!1);var a=t.keyCode;e.display.shift=16==a||t.shiftKey;var i=Ln(e,t);Is&&(Ko=i?a:null,!i&&88==a&&!io&&(Fs?t.metaKey:t.ctrlKey)&&e.replaceSelection("",null,"cut")),ms&&!Fs&&!i&&46==a&&t.shiftKey&&!t.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=a||/\bCodeMirror-crosshair\b/.test(e.display.lineDiv.className)||bn(e)}}function bn(t){function e(t){18!=t.keyCode&&t.altKey||(ks(a,"CodeMirror-crosshair"),F(document,"keyup",e),F(document,"mouseover",e))}var a=t.display.lineDiv;o(a,"CodeMirror-crosshair"),$s(document,"keyup",e),$s(document,"mouseover",e)}function wn(t){16==t.keyCode&&(this.doc.sel.shift=!1),A(this,t)}function Fn(t){var e=this;if(!(t.target&&t.target!=e.display.input.getField()||Pe(e.display,t)||A(e,t)||t.ctrlKey&&!t.altKey||Fs&&t.metaKey)){var a=t.keyCode,i=t.charCode;if(Is&&a==Ko)return Ko=null,void R(t);if(!Is||t.which&&!(t.which<10)||!Ln(e,t)){var r=String.fromCharCode(null==i?a:i);"\b"!=r&&(Mn(e,t,r)||e.display.input.onKeyPress(t))}}}function En(t,e){var a=+new Date;return Jo&&Jo.compare(a,t,e)?(zo=Jo=null,"triple"):zo&&zo.compare(a,t,e)?(Jo=new jo(a,t,e),zo=null,"double"):(zo=new jo(a,t,e),Jo=null,"single")}function An(t){var e=this,a=e.display;if(!(A(e,t)||a.activeTouch&&a.input.supportsTouch())){if(a.input.ensurePolled(),a.shift=t.shiftKey,Pe(a,t))return void(Ss||(a.scroller.draggable=!1,setTimeout(function(){return a.scroller.draggable=!0},100)));if(!Vn(e,t)){var i=xa(e,t),r=V(t),n=i?En(i,r):"single";window.focus(),1==r&&e.state.selectingText&&e.state.selectingText(t),i&&Nn(e,r,i,n,t)||(1==r?i?Pn(e,i,n,t):H(t)==a.scroller&&R(t):2==r?(i&&Cr(e.doc,i),setTimeout(function(){return a.input.focus()},20)):3==r&&(Rs?e.display.input.onContextMenu(t):Ya(e)))}}}function Nn(t,e,a,i,r){var n="Click";return"double"==i?n="Double"+n:"triple"==i&&(n="Triple"+n),n=(1==e?"Left":2==e?"Middle":"Right")+n,In(t,un(n,r),r,function(e){if("string"==typeof e&&(e=Xo[e]),!e)return!1;var i=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),i=e(t,a)!=Ws}finally{t.state.suppressEdits=!1}return i})}function On(t,e,a){var i=t.getOption("configureMouse"),r=i?i(t,e,a):{};if(null==r.unit){var n=Es?a.shiftKey&&a.metaKey:a.altKey;r.unit=n?"rectangle":"single"==e?"char":"double"==e?"word":"line"}return(null==r.extend||t.doc.extend)&&(r.extend=t.doc.extend||a.shiftKey),null==r.addNew&&(r.addNew=Fs?a.metaKey:a.ctrlKey),null==r.moveOnDrag&&(r.moveOnDrag=!(Fs?a.altKey:a.ctrlKey)),r}function Pn(t,e,a,i){vs?setTimeout(l(Ba,t),0):t.curOp.focus=s();var r,n=On(t,a,i),o=t.doc.sel;t.options.dragDrop&&to&&!t.isReadOnly()&&"single"==a&&(r=o.contains(e))>-1&&(ht((r=o.ranges[r]).from(),e)<0||e.xRel>0)&&(ht(r.to(),e)>0||e.xRel<0)?Rn(t,i,e,n):Bn(t,i,e,n)}function Rn(t,e,a,i){var r=t.display,n=!1,s=Di(t,function(e){Ss&&(r.scroller.draggable=!1),t.state.draggingText=!1,t.state.delayingBlurEvent&&(t.hasFocus()?t.state.delayingBlurEvent=!1:Ya(t)),F(r.wrapper.ownerDocument,"mouseup",s),F(r.wrapper.ownerDocument,"mousemove",o),F(r.scroller,"dragstart",h),F(r.scroller,"drop",s),n||(R(e),i.addNew||Cr(t.doc,a,null,null,i.extend),Ss&&!xs||vs&&9==gs?setTimeout(function(){r.wrapper.ownerDocument.body.focus({preventScroll:!0}),r.input.focus()},20):r.input.focus())}),o=function(t){n=n||Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)>=10},h=function(){return n=!0};Ss&&(r.scroller.draggable=!0),t.state.draggingText=s,s.copy=!i.moveOnDrag,$s(r.wrapper.ownerDocument,"mouseup",s),$s(r.wrapper.ownerDocument,"mousemove",o),$s(r.scroller,"dragstart",h),$s(r.scroller,"drop",s),t.state.delayingBlurEvent=!0,setTimeout(function(){return r.input.focus()},20),r.scroller.dragDrop&&r.scroller.dragDrop()}function kn(t,e,a){if("char"==a)return new Fo(e,e);if("word"==a)return t.findWordAt(e);if("line"==a)return new Fo(ot(e.line,0),mt(t.doc,ot(e.line+1,0)));var i=a(t,e);return new Fo(i.from,i.to)}function Bn(t,e,a,i){function r(e){if(0!=ht(D,e))if(D=e,"rectangle"==i.unit){for(var r=[],n=t.options.tabSize,s=c($(l,a.line).text,a.ch,n),o=c($(l,e.line).text,e.ch,n),h=Math.min(s,o),C=Math.max(s,o),p=Math.min(a.line,e.line),v=Math.min(t.lastLine(),Math.max(a.line,e.line));p<=v;p++){var g=$(l,p).text,S=f(g,h,n);h==C?r.push(new Fo(ot(p,S),ot(p,S))):g.length>S&&r.push(new Fo(ot(p,S),ot(p,f(g,C,n))))}r.length||r.push(new Fo(a,a)),Tr(l,Hi(t,m.ranges.slice(0,d).concat(r),d),{origin:"*mouse",scroll:!1}),t.scrollIntoView(e)}else{var T,y=u,I=kn(t,e,i.unit),x=y.anchor;ht(I.anchor,x)>0?(T=I.head,x=dt(y.from(),I.anchor)):(T=I.anchor,x=ct(y.to(),I.head));var L=m.ranges.slice(0);L[d]=Yn(t,new Fo(mt(l,x),T)),Tr(l,Hi(t,L,d),Us)}}function n(e){var a=++g,o=xa(t,e,!0,"rectangle"==i.unit);if(o)if(0!=ht(o,D)){t.curOp.focus=s(),r(o);var u=Xa(h,l);(o.line>=u.to||o.line<u.from)&&setTimeout(Di(t,function(){g==a&&n(e)}),150)}else{var c=e.clientY<v.top?-20:e.clientY>v.bottom?20:0;c&&setTimeout(Di(t,function(){g==a&&(h.scroller.scrollTop+=c,n(e))}),50)}}function o(e){t.state.selectingText=!1,g=1/0,e&&(R(e),h.input.focus()),F(h.wrapper.ownerDocument,"mousemove",S),F(h.wrapper.ownerDocument,"mouseup",T),l.history.lastSelOrigin=null}vs&&Ya(t);var h=t.display,l=t.doc;R(e);var u,d,m=l.sel,C=m.ranges;if(i.addNew&&!i.extend?(d=l.sel.contains(a),u=d>-1?C[d]:new Fo(a,a)):(u=l.sel.primary(),d=l.sel.primIndex),"rectangle"==i.unit)i.addNew||(u=new Fo(a,a)),a=xa(t,e,!0,!0),d=-1;else{var p=kn(t,a,i.unit);u=i.extend?mr(u,p.anchor,p.head,i.extend):p}i.addNew?-1==d?(d=C.length,Tr(l,Hi(t,C.concat([u]),d),{scroll:!1,origin:"*mouse"})):C.length>1&&C[d].empty()&&"char"==i.unit&&!i.extend?(Tr(l,Hi(t,C.slice(0,d).concat(C.slice(d+1)),0),{scroll:!1,origin:"*mouse"}),m=l.sel):Dr(l,d,u,Us):(d=0,Tr(l,new wo([u],0),Us),m=l.sel);var D=a,v=h.wrapper.getBoundingClientRect(),g=0,S=Di(t,function(t){0!==t.buttons&&V(t)?n(t):o(t)}),T=Di(t,o);t.state.selectingText=T,$s(h.wrapper.ownerDocument,"mousemove",S),$s(h.wrapper.ownerDocument,"mouseup",T)}function Yn(t,e){var a=e.anchor,i=e.head,r=$(t.doc,a.line);if(0==ht(a,i)&&a.sticky==i.sticky)return e;var n=b(r);if(!n)return e;var s=_(n,a.ch,a.sticky),o=n[s];if(o.from!=a.ch&&o.to!=a.ch)return e;var h=s+(o.from==a.ch==(1!=o.level)?0:1);if(0==h||h==n.length)return e;var l;if(i.line!=a.line)l=(i.line-a.line)*("ltr"==t.doc.direction?1:-1)>0;else{var u=_(n,i.ch,i.sticky),c=u-s||(i.ch-a.ch)*(1==o.level?-1:1);l=u==h-1||u==h?c<0:c>0}var d=n[h+(l?-1:0)],f=l==(1==d.level),m=f?d.from:d.to,C=f?"after":"before";return a.ch==m&&a.sticky==C?e:new Fo(new ot(a.line,m,C),i)}function Hn(t,e,a,i){var r,n;if(e.touches)r=e.touches[0].clientX,n=e.touches[0].clientY;else try{r=e.clientX,n=e.clientY}catch(t){return!1}if(r>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;i&&R(e);var s=t.display,o=s.lineDiv.getBoundingClientRect();if(n>o.bottom||!O(t,a))return B(e);n-=o.top-s.viewOffset;for(var h=0;h<t.display.gutterSpecs.length;++h){var l=s.gutters.childNodes[h];if(l&&l.getBoundingClientRect().right>=r){return E(t,a,t,rt(t.doc,n),t.display.gutterSpecs[h].className,e),B(e)}}}function Vn(t,e){return Hn(t,e,"gutterClick",!0)}function Gn(t,e){Pe(t.display,e)||Wn(t,e)||A(t,e,"contextmenu")||Rs||t.display.input.onContextMenu(e)}function Wn(t,e){return!!O(t,"gutterContextMenu")&&Hn(t,e,"gutterContextMenu",!1)}function Xn(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),ea(t)}function Un(t,e,a){if(!e!=!(a&&a!=qo)){var i=t.display.dragFunctions,r=e?$s:F;r(t.display.scroller,"dragstart",i.start),r(t.display.scroller,"dragenter",i.enter),r(t.display.scroller,"dragover",i.over),r(t.display.scroller,"dragleave",i.leave),r(t.display.scroller,"drop",i.drop)}}function Kn(t){t.options.lineWrapping?(o(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth="",t.display.sizerWidth=null):(ks(t.display.wrapper,"CodeMirror-wrap"),re(t)),Ia(t),Ma(t),ea(t),setTimeout(function(){return ni(t)},100)}function jn(t,e){var a=this;if(!(this instanceof jn))return new jn(t,e);this.options=e=e?u(e):{},u(Zo,e,!1);var i=e.value;"string"==typeof i?i=new Ro(i,e.mode,null,e.lineSeparator,e.direction):e.mode&&(i.modeOption=e.mode),this.doc=i;var r=new jn.inputStyles[e.inputStyle](this),n=this.display=new Ri(t,i,r,e);n.wrapper.CodeMirror=this,Xn(this),e.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),oi(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Ys,keySeq:null,specialChars:null},e.autofocus&&!ws&&n.input.focus(),vs&&gs<11&&setTimeout(function(){return a.display.input.reset(!0)},20),zn(this),an(),hi(this),this.curOp.forceUpdate=!0,Qi(this,i),e.autofocus&&!ws||this.hasFocus()?setTimeout(function(){a.hasFocus()&&!a.state.focused&&Ha(a)},20):Va(this);for(var s in Qo)Qo.hasOwnProperty(s)&&Qo[s](this,e[s],qo);Ai(this),e.finishInit&&e.finishInit(this);for(var o=0;o<$o.length;++o)$o[o](this);li(this),Ss&&e.lineWrapping&&"optimizelegibility"==getComputedStyle(n.lineDiv).textRendering&&(n.lineDiv.style.textRendering="auto")}function zn(t){function e(){r.activeTouch&&(n=setTimeout(function(){return r.activeTouch=null},1e3),s=r.activeTouch,s.end=+new Date)}function a(t){if(1!=t.touches.length)return!1;var e=t.touches[0];return e.radiusX<=1&&e.radiusY<=1}function i(t,e){if(null==e.left)return!0;var a=e.left-t.left,i=e.top-t.top;return a*a+i*i>400}var r=t.display;$s(r.scroller,"mousedown",Di(t,An)),vs&&gs<11?$s(r.scroller,"dblclick",Di(t,function(e){if(!A(t,e)){var a=xa(t,e);if(a&&!Vn(t,e)&&!Pe(t.display,e)){R(e);var i=t.findWordAt(a);Cr(t.doc,i.anchor,i.head)}}})):$s(r.scroller,"dblclick",function(e){return A(t,e)||R(e)}),$s(r.scroller,"contextmenu",function(e){return Gn(t,e)}),$s(r.input.getField(),"contextmenu",function(e){r.scroller.contains(e.target)||Gn(t,e)});var n,s={end:0};$s(r.scroller,"touchstart",function(e){if(!A(t,e)&&!a(e)&&!Vn(t,e)){r.input.ensurePolled(),clearTimeout(n);var i=+new Date;r.activeTouch={start:i,moved:!1,prev:i-s.end<=300?s:null},1==e.touches.length&&(r.activeTouch.left=e.touches[0].pageX,r.activeTouch.top=e.touches[0].pageY)}}),$s(r.scroller,"touchmove",function(){r.activeTouch&&(r.activeTouch.moved=!0)}),$s(r.scroller,"touchend",function(a){var n=r.activeTouch;if(n&&!Pe(r,a)&&null!=n.left&&!n.moved&&new Date-n.start<300){var s,o=t.coordsChar(r.activeTouch,"page");s=!n.prev||i(n,n.prev)?new Fo(o,o):!n.prev.prev||i(n,n.prev.prev)?t.findWordAt(o):new Fo(ot(o.line,0),mt(t.doc,ot(o.line+1,0))),t.setSelection(s.anchor,s.head),t.focus(),R(a)}e()}),$s(r.scroller,"touchcancel",e),$s(r.scroller,"scroll",function(){r.scroller.clientHeight&&(ei(t,r.scroller.scrollTop),ii(t,r.scroller.scrollLeft,!0),E(t,"scroll",t))}),$s(r.scroller,"mousewheel",function(e){return Yi(t,e)}),$s(r.scroller,"DOMMouseScroll",function(e){return Yi(t,e)}),$s(r.wrapper,"scroll",function(){return r.wrapper.scrollTop=r.wrapper.scrollLeft=0}),r.dragFunctions={enter:function(e){A(t,e)||Y(e)},over:function(e){A(t,e)||($r(t,e),Y(e))},start:function(e){return Qr(t,e)},drop:Di(t,Zr),leave:function(e){A(t,e)||tn(t)}};var o=r.input.getField();$s(o,"keyup",function(e){return wn.call(t,e)}),$s(o,"keydown",Di(t,_n)),$s(o,"keypress",Di(t,Fn)),$s(o,"focus",function(e){return Ha(t,e)}),$s(o,"blur",function(e){return Va(t,e)})}function Jn(t,e,a,i){var r,n=t.doc;null==a&&(a="add"),"smart"==a&&(n.mode.indent?r=gt(t,e).state:a="prev");var s=t.options.tabSize,o=$(n,e),h=c(o.text,null,s);o.stateAfter&&(o.stateAfter=null);var l,u=o.text.match(/^\s*/)[0];if(i||/\S/.test(o.text)){if("smart"==a&&((l=n.mode.indent(r,o.text.slice(u.length),o.text))==Ws||l>150)){if(!i)return;a="prev"}}else l=0,a="not";"prev"==a?l=e>n.first?c($(n,e-1).text,null,s):0:"add"==a?l=h+t.options.indentUnit:"subtract"==a?l=h-t.options.indentUnit:"number"==typeof a&&(l=h+a),l=Math.max(0,l);var d="",f=0;if(t.options.indentWithTabs)for(var C=Math.floor(l/s);C;--C)f+=s,d+="\t";if(f<l&&(d+=m(l-f)),d!=u)return kr(n,d,ot(e,0),ot(e,u.length),"+input"),o.stateAfter=null,!0;for(var p=0;p<n.sel.ranges.length;p++){var D=n.sel.ranges[p];if(D.head.line==e&&D.head.ch<u.length){var v=ot(e,u.length);Dr(n,p,new Fo(v,v));break}}}function qn(t){th=t}function Zn(t,e,a,i,r){var n=t.doc;t.display.shift=!1,i||(i=n.sel);var s=+new Date-200,o="paste"==r||t.state.pasteIncoming>s,h=eo(e),l=null;if(o&&i.ranges.length>1)if(th&&th.text.join("\n")==e){if(i.ranges.length%th.text.length==0){l=[];for(var u=0;u<th.text.length;u++)l.push(n.splitLines(th.text[u]))}}else h.length==i.ranges.length&&t.options.pasteLinesPerSelection&&(l=p(h,function(t){return[t]}));for(var c=t.curOp.updateInput,d=i.ranges.length-1;d>=0;d--){var f=i.ranges[d],m=f.from(),D=f.to();f.empty()&&(a&&a>0?m=ot(m.line,m.ch-a):t.state.overwrite&&!o?D=ot(D.line,Math.min($(n,D.line).text.length,D.ch+C(h).length)):o&&th&&th.lineWise&&th.text.join("\n")==h.join("\n")&&(m=D=ot(m.line,0)));var v={from:m,to:D,text:l?l[d%l.length]:h,origin:r||(o?"paste":t.state.cutIncoming>s?"cut":"+input")};Er(t.doc,v),Se(t,"inputRead",t,v)}e&&!o&&$n(t,e),qa(t),t.curOp.updateInput<2&&(t.curOp.updateInput=c),t.curOp.typing=!0,t.state.pasteIncoming=t.state.cutIncoming=-1}function Qn(t,e){var a=t.clipboardData&&t.clipboardData.getData("Text");if(a)return t.preventDefault(),e.isReadOnly()||e.options.disableInput||pi(e,function(){return Zn(e,a,0,null,"paste")}),!0}function $n(t,e){if(t.options.electricChars&&t.options.smartIndent)for(var a=t.doc.sel,i=a.ranges.length-1;i>=0;i--){var r=a.ranges[i];if(!(r.head.ch>100||i&&a.ranges[i-1].head.line==r.head.line)){var n=t.getModeAt(r.head),s=!1;if(n.electricChars){for(var o=0;o<n.electricChars.length;o++)if(e.indexOf(n.electricChars.charAt(o))>-1){s=Jn(t,r.head.line,"smart");break}}else n.electricInput&&n.electricInput.test($(t.doc,r.head.line).text.slice(0,r.head.ch))&&(s=Jn(t,r.head.line,"smart"));s&&Se(t,"electricInput",t,r.head.line)}}}function ts(t){for(var e=[],a=[],i=0;i<t.doc.sel.ranges.length;i++){var r=t.doc.sel.ranges[i].head.line,n={anchor:ot(r,0),head:ot(r+1,0)};a.push(n),e.push(t.getRange(n.anchor,n.head))}return{text:e,ranges:a}}function es(t,e,a,i){t.setAttribute("autocorrect",a?"":"off"),t.setAttribute("autocapitalize",i?"":"off"),t.setAttribute("spellcheck",!!e)}function as(){var t=i("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),e=i("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return Ss?t.style.width="1000px":t.setAttribute("wrap","off"),_s&&(t.style.border="1px solid black"),es(t),e}function is(t,e,a,i,r){function n(){var a=e.line+u;return!(a<t.first||a>=t.first+t.size)&&(e=new ot(a,e.ch,e.sticky),l=$(t,a))}function s(s){var o;if("codepoint"==i){var h=l.text.charCodeAt(e.ch+(a>0?0:-1));if(isNaN(h))o=null;else{var c=a>0?h>=55296&&h<56320:h>=56320&&h<57343;o=new ot(e.line,Math.max(0,Math.min(l.text.length,e.ch+a*(c?2:1))),-a)}}else o=r?Dn(t.cm,l,e,a):Cn(l,e,a);if(null==o){if(s||!n())return!1;e=pn(r,t.cm,l,e.line,u)}else e=o;return!0}var o=e,h=a,l=$(t,e.line),u=r&&"rtl"==t.direction?-a:a;if("char"==i||"codepoint"==i)s();else if("column"==i)s(!0);else if("word"==i||"group"==i)for(var c=null,d="group"==i,f=t.cm&&t.cm.getHelper(e,"wordChars"),m=!0;!(a<0)||s(!m);m=!1){var C=l.text.charAt(e.ch)||"\n",p=T(C,f)?"w":d&&"\n"==C?"n":!d||/\s/.test(C)?null:"p";if(!d||m||p||(p="s"),c&&c!=p){a<0&&(a=1,s(),e.sticky="after");break}if(p&&(c=p),a>0&&!s(!m))break}var D=_r(t,e,o,h,!0);return lt(o,D)&&(D.hitSide=!0),D}function rs(t,e,a,i){var r,n=t.doc,s=e.left;if("page"==i){var o=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),h=Math.max(o-.5*va(t.display),3);r=(a>0?e.bottom:e.top)+a*h}else"line"==i&&(r=a>0?e.bottom+3:e.top-3);for(var l;l=ca(t,s,r),l.outside;){if(a<0?r<=0:r>=n.height){l.hitSide=!0;break}r+=5*a}return l}function ns(t,e){var a=Ke(t,e.line);if(!a||a.hidden)return null;var i=$(t.doc,e.line),r=We(a,i,e.line),n=b(i,t.doc.direction),s="left";if(n){s=_(n,e.ch)%2?"right":"left"}var o=Je(r.map,e.ch,s);return o.offset="right"==o.collapse?o.end:o.start,o}function ss(t){for(var e=t;e;e=e.parentNode)if(/CodeMirror-gutter-wrapper/.test(e.className))return!0;return!1}function os(t,e){return e&&(t.bad=!0),t}function hs(t,e,a,i,r){function n(t){return function(e){return e.id==t}}function s(){u&&(l+=c,d&&(l+=c),u=d=!1)}function o(t){t&&(s(),l+=t)}function h(e){if(1==e.nodeType){var a=e.getAttribute("cm-text");if(a)return void o(a);var l,f=e.getAttribute("cm-marker");if(f){var m=t.findMarks(ot(i,0),ot(r+1,0),n(+f));return void(m.length&&(l=m[0].find(0))&&o(tt(t.doc,l.from,l.to).join(c)))}if("false"==e.getAttribute("contenteditable"))return;var C=/^(pre|div|p|li|table|br)$/i.test(e.nodeName);if(!/^br$/i.test(e.nodeName)&&0==e.textContent.length)return;C&&s();for(var p=0;p<e.childNodes.length;p++)h(e.childNodes[p]);/^(pre|p)$/i.test(e.nodeName)&&(d=!0),C&&(u=!0)}else 3==e.nodeType&&o(e.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(var l="",u=!1,c=t.doc.lineSeparator(),d=!1;h(e),e!=a;)e=e.nextSibling,d=!1;return l}function ls(t,e,a){var i;if(e==t.display.lineDiv){if(!(i=t.display.lineDiv.childNodes[a]))return os(t.clipPos(ot(t.display.viewTo-1)),!0);e=null,a=0}else for(i=e;;i=i.parentNode){if(!i||i==t.display.lineDiv)return null;if(i.parentNode&&i.parentNode==t.display.lineDiv)break}for(var r=0;r<t.display.view.length;r++){var n=t.display.view[r];if(n.node==i)return us(n,e,a)}}function us(t,e,a){function i(e,a,i){for(var r=-1;r<(c?c.length:0);r++)for(var n=r<0?u.map:c[r],s=0;s<n.length;s+=3){var o=n[s+2];if(o==e||o==a){var h=it(r<0?t.line:t.rest[r]),l=n[s]+i;return(i<0||o!=e)&&(l=n[s+(i?1:0)]),ot(h,l)}}}var r=t.text.firstChild,s=!1;if(!e||!n(r,e))return os(ot(it(t.line),0),!0);if(e==r&&(s=!0,e=r.childNodes[a],a=0,!e)){var o=t.rest?C(t.rest):t.line;return os(ot(it(o),o.text.length),s)}var h=3==e.nodeType?e:null,l=e;for(h||1!=e.childNodes.length||3!=e.firstChild.nodeType||(h=e.firstChild,a&&(a=h.nodeValue.length));l.parentNode!=r;)l=l.parentNode;var u=t.measure,c=u.maps,d=i(h,l,a);if(d)return os(d,s);for(var f=l.nextSibling,m=h?h.nodeValue.length-a:0;f;f=f.nextSibling){if(d=i(f,f.firstChild,0))return os(ot(d.line,d.ch-m),s);m+=f.textContent.length}for(var p=l.previousSibling,D=a;p;p=p.previousSibling){if(d=i(p,p.firstChild,-1))return os(ot(d.line,d.ch+D),s);D+=p.textContent.length}}function cs(t,e){function a(){t.value=h.getValue()}if(e=e?u(e):{},e.value=t.value,!e.tabindex&&t.tabIndex&&(e.tabindex=t.tabIndex),!e.placeholder&&t.placeholder&&(e.placeholder=t.placeholder),null==e.autofocus){var i=s();e.autofocus=i==t||null!=t.getAttribute("autofocus")&&i==document.body}var r;if(t.form&&($s(t.form,"submit",a),!e.leaveSubmitMethodAlone)){var n=t.form;r=n.submit;try{var o=n.submit=function(){a(),n.submit=r,n.submit(),n.submit=o}}catch(t){}}e.finishInit=function(i){i.save=a,i.getTextArea=function(){return t},i.toTextArea=function(){i.toTextArea=isNaN,a(),t.parentNode.removeChild(i.getWrapperElement()),t.style.display="",t.form&&(F(t.form,"submit",a),e.leaveSubmitMethodAlone||"function"!=typeof t.form.submit||(t.form.submit=r))}},t.style.display="none";var h=jn(function(e){return t.parentNode.insertBefore(e,t.nextSibling)},e);return h}var ds=navigator.userAgent,fs=navigator.platform,ms=/gecko\/\d/i.test(ds),Cs=/MSIE \d/.test(ds),ps=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ds),Ds=/Edge\/(\d+)/.exec(ds),vs=Cs||ps||Ds,gs=vs&&(Cs?document.documentMode||6:+(Ds||ps)[1]),Ss=!Ds&&/WebKit\//.test(ds),Ts=Ss&&/Qt\/\d+\.\d+/.test(ds),ys=!Ds&&/Chrome\//.test(ds),Is=/Opera\//.test(ds),xs=/Apple Computer/.test(navigator.vendor),Ls=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(ds),Ms=/PhantomJS/.test(ds),_s=xs&&(/Mobile\/\w+/.test(ds)||navigator.maxTouchPoints>2),bs=/Android/.test(ds),ws=_s||bs||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(ds),Fs=_s||/Mac/.test(fs),Es=/\bCrOS\b/.test(ds),As=/win/i.test(fs),Ns=Is&&ds.match(/Version\/(\d*\.\d*)/);Ns&&(Ns=Number(Ns[1])),Ns&&Ns>=15&&(Is=!1,Ss=!0);var Os,Ps=Fs&&(Ts||Is&&(null==Ns||Ns<12.11)),Rs=ms||vs&&gs>=9,ks=function(e,a){var i=e.className,r=t(a).exec(i);if(r){var n=i.slice(r.index+r[0].length);e.className=i.slice(0,r.index)+(n?r[1]+n:"")}};Os=document.createRange?function(t,e,a,i){var r=document.createRange();return r.setEnd(i||t,a),r.setStart(t,e),r}:function(t,e,a){var i=document.body.createTextRange();try{i.moveToElementText(t.parentNode)}catch(t){return i}return i.collapse(!0),i.moveEnd("character",a),i.moveStart("character",e),i};var Bs=function(t){t.select()};_s?Bs=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:vs&&(Bs=function(t){try{t.select()}catch(t){}});var Ys=function(){this.id=null,this.f=null,this.time=0,this.handler=l(this.onTimeout,this)};Ys.prototype.onTimeout=function(t){t.id=0,t.time<=+new Date?t.f():setTimeout(t.handler,t.time-+new Date)},Ys.prototype.set=function(t,e){this.f=e;var a=+new Date+t;(!this.id||a<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,t),this.time=a)};var Hs,Vs,Gs=50,Ws={toString:function(){return"CodeMirror.Pass"}},Xs={scroll:!1},Us={origin:"*mouse"},Ks={origin:"+move"},js=[""],zs=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Js=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,qs=null,Zs=function(){function t(t){return t<=247?a.charAt(t):1424<=t&&t<=1524?"R":1536<=t&&t<=1785?i.charAt(t-1536):1774<=t&&t<=2220?"r":8192<=t&&t<=8203?"w":8204==t?"b":"L"}function e(t,e,a){this.level=t,this.from=e,this.to=a}var a="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",i="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111",r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,n=/[stwN]/,s=/[LRr]/,o=/[Lb1n]/,h=/[1n]/;return function(a,i){var l="ltr"==i?"L":"R";if(0==a.length||"ltr"==i&&!r.test(a))return!1;for(var u=a.length,c=[],d=0;d<u;++d)c.push(t(a.charCodeAt(d)));for(var f=0,m=l;f<u;++f){var p=c[f];"m"==p?c[f]=m:m=p}for(var D=0,v=l;D<u;++D){var g=c[D];"1"==g&&"r"==v?c[D]="n":s.test(g)&&(v=g,"r"==g&&(c[D]="R"))}for(var S=1,T=c[0];S<u-1;++S){var y=c[S];"+"==y&&"1"==T&&"1"==c[S+1]?c[S]="1":","!=y||T!=c[S+1]||"1"!=T&&"n"!=T||(c[S]=T),T=y}for(var I=0;I<u;++I){var x=c[I];if(","==x)c[I]="N";else if("%"==x){var L=void 0;for(L=I+1;L<u&&"%"==c[L];++L);for(var M=I&&"!"==c[I-1]||L<u&&"1"==c[L]?"1":"N",_=I;_<L;++_)c[_]=M;I=L-1}}for(var b=0,w=l;b<u;++b){var F=c[b];"L"==w&&"1"==F?c[b]="L":s.test(F)&&(w=F)}for(var E=0;E<u;++E)if(n.test(c[E])){var A=void 0;for(A=E+1;A<u&&n.test(c[A]);++A);for(var N="L"==(E?c[E-1]:l),O="L"==(A<u?c[A]:l),P=N==O?N?"L":"R":l,R=E;R<A;++R)c[R]=P;E=A-1}for(var k,B=[],Y=0;Y<u;)if(o.test(c[Y])){var H=Y;for(++Y;Y<u&&o.test(c[Y]);++Y);B.push(new e(0,H,Y))}else{var V=Y,G=B.length,W="rtl"==i?1:0;for(++Y;Y<u&&"L"!=c[Y];++Y);for(var X=V;X<Y;)if(h.test(c[X])){V<X&&(B.splice(G,0,new e(1,V,X)),G+=W);var U=X;for(++X;X<Y&&h.test(c[X]);++X);B.splice(G,0,new e(2,U,X)),G+=W,V=X}else++X;V<Y&&B.splice(G,0,new e(1,V,Y))}return"ltr"==i&&(1==B[0].level&&(k=a.match(/^\s+/))&&(B[0].from=k[0].length,B.unshift(new e(0,0,k[0].length))),1==C(B).level&&(k=a.match(/\s+$/))&&(C(B).to-=k[0].length,B.push(new e(0,u-k[0].length,u)))),"rtl"==i?B.reverse():B}}(),Qs=[],$s=function(t,e,a){if(t.addEventListener)t.addEventListener(e,a,!1);else if(t.attachEvent)t.attachEvent("on"+e,a);else{var i=t._handlers||(t._handlers={});i[e]=(i[e]||Qs).concat(a)}},to=function(){if(vs&&gs<9)return!1;var t=i("div");return"draggable"in t||"dragDrop"in t}(),eo=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,a=[],i=t.length;e<=i;){var r=t.indexOf("\n",e);-1==r&&(r=t.length);var n=t.slice(e,"\r"==t.charAt(r-1)?r-1:r),s=n.indexOf("\r");-1!=s?(a.push(n.slice(0,s)),e+=s+1):(a.push(n),e=r+1)}return a}:function(t){return t.split(/\r\n?|\n/)},ao=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(t){return!1}}:function(t){var e;try{e=t.ownerDocument.selection.createRange()}catch(t){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)},io=function(){var t=i("div");return"oncopy"in t||(t.setAttribute("oncopy","return;"),"function"==typeof t.oncopy)}(),ro=null,no={},so={},oo={},ho=function(t,e,a){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=a};ho.prototype.eol=function(){return this.pos>=this.string.length},ho.prototype.sol=function(){return this.pos==this.lineStart},ho.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},ho.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},ho.prototype.eat=function(t){var e=this.string.charAt(this.pos);if("string"==typeof t?e==t:e&&(t.test?t.test(e):t(e)))return++this.pos,e},ho.prototype.eatWhile=function(t){for(var e=this.pos;this.eat(t););return this.pos>e},ho.prototype.eatSpace=function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},ho.prototype.skipToEnd=function(){this.pos=this.string.length},ho.prototype.skipTo=function(t){var e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0},ho.prototype.backUp=function(t){this.pos-=t},ho.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=c(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?c(this.string,this.lineStart,this.tabSize):0)},ho.prototype.indentation=function(){return c(this.string,null,this.tabSize)-(this.lineStart?c(this.string,this.lineStart,this.tabSize):0)},ho.prototype.match=function(t,e,a){if("string"!=typeof t){var i=this.string.slice(this.pos).match(t);return i&&i.index>0?null:(i&&!1!==e&&(this.pos+=i[0].length),i)}var r=function(t){return a?t.toLowerCase():t};if(r(this.string.substr(this.pos,t.length))==r(t))return!1!==e&&(this.pos+=t.length),!0},ho.prototype.current=function(){return this.string.slice(this.start,this.pos)},ho.prototype.hideFirstChars=function(t,e){this.lineStart+=t;try{return e()}finally{this.lineStart-=t}},ho.prototype.lookAhead=function(t){var e=this.lineOracle;return e&&e.lookAhead(t)},ho.prototype.baseToken=function(){var t=this.lineOracle;return t&&t.baseToken(this.pos)};var lo=function(t,e){this.state=t,this.lookAhead=e},uo=function(t,e,a,i){this.state=e,this.doc=t,this.line=a,this.maxLookAhead=i||0,this.baseTokens=null,this.baseTokenPos=1};uo.prototype.lookAhead=function(t){var e=this.doc.getLine(this.line+t);return null!=e&&t>this.maxLookAhead&&(this.maxLookAhead=t),e},uo.prototype.baseToken=function(t){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=t;)this.baseTokenPos+=2;var e=this.baseTokens[this.baseTokenPos+1];return{type:e&&e.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-t}},uo.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},uo.fromSaved=function(t,e,a){return e instanceof lo?new uo(t,q(t.mode,e.state),a,e.lookAhead):new uo(t,q(t.mode,e),a)},uo.prototype.save=function(t){var e=!1!==t?q(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new lo(e,this.maxLookAhead):e};var co=function(t,e,a){this.start=t.start,this.end=t.pos,this.string=t.current(),this.type=e||null,this.state=a},fo=!1,mo=!1,Co=function(t,e,a){this.text=t,Ht(this,e),this.height=a?a(this):1};Co.prototype.lineNo=function(){return it(this)},P(Co);var po,Do={},vo={},go=null,So=null,To={left:0,right:0,top:0,bottom:0},yo=function(t,e,a){this.cm=a;var r=this.vert=i("div",[i("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),n=this.horiz=i("div",[i("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=n.tabIndex=-1,t(r),t(n),$s(r,"scroll",function(){r.clientHeight&&e(r.scrollTop,"vertical")}),$s(n,"scroll",function(){n.clientWidth&&e(n.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,vs&&gs<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};yo.prototype.update=function(t){var e=t.scrollWidth>t.clientWidth+1,a=t.scrollHeight>t.clientHeight+1,i=t.nativeBarWidth;if(a){this.vert.style.display="block",this.vert.style.bottom=e?i+"px":"0";var r=t.viewHeight-(e?i:0);this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+r)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(e){this.horiz.style.display="block",this.horiz.style.right=a?i+"px":"0",this.horiz.style.left=t.barLeft+"px";var n=t.viewWidth-t.barLeft-(a?i:0);this.horiz.firstChild.style.width=Math.max(0,t.scrollWidth-t.clientWidth+n)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&t.clientHeight>0&&(0==i&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:a?i:0,bottom:e?i:0}},yo.prototype.setScrollLeft=function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},yo.prototype.setScrollTop=function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},yo.prototype.zeroWidthHack=function(){var t=Fs&&!Ls?"12px":"18px";this.horiz.style.height=this.vert.style.width=t,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Ys,this.disableVert=new Ys},yo.prototype.enableZeroWidthBar=function(t,e,a){function i(){var r=t.getBoundingClientRect();("vert"==a?document.elementFromPoint(r.right-1,(r.top+r.bottom)/2):document.elementFromPoint((r.right+r.left)/2,r.bottom-1))!=t?t.style.pointerEvents="none":e.set(1e3,i)}t.style.pointerEvents="auto",e.set(1e3,i)},yo.prototype.clear=function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)};var Io=function(){};Io.prototype.update=function(){return{bottom:0,right:0}},Io.prototype.setScrollLeft=function(){},Io.prototype.setScrollTop=function(){},Io.prototype.clear=function(){};var xo={native:yo,null:Io},Lo=0,Mo=function(t,e,a){var i=t.display;this.viewport=e,this.visible=Xa(i,t.doc,e),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=He(t),this.force=a,this.dims=Sa(t),this.events=[]};Mo.prototype.signal=function(t,e){O(t,e)&&this.events.push(arguments)},Mo.prototype.finish=function(){for(var t=0;t<this.events.length;t++)E.apply(null,this.events[t])};var _o=0,bo=null;vs?bo=-.53:ms?bo=15:ys?bo=-.7:xs&&(bo=-1/3);var wo=function(t,e){this.ranges=t,this.primIndex=e};wo.prototype.primary=function(){return this.ranges[this.primIndex]},wo.prototype.equals=function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var e=0;e<this.ranges.length;e++){var a=this.ranges[e],i=t.ranges[e];if(!lt(a.anchor,i.anchor)||!lt(a.head,i.head))return!1}return!0},wo.prototype.deepCopy=function(){for(var t=[],e=0;e<this.ranges.length;e++)t[e]=new Fo(ut(this.ranges[e].anchor),ut(this.ranges[e].head));return new wo(t,this.primIndex)},wo.prototype.somethingSelected=function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},wo.prototype.contains=function(t,e){e||(e=t);for(var a=0;a<this.ranges.length;a++){var i=this.ranges[a];if(ht(e,i.from())>=0&&ht(t,i.to())<=0)return a}return-1};var Fo=function(t,e){this.anchor=t,this.head=e};Fo.prototype.from=function(){return dt(this.anchor,this.head)},Fo.prototype.to=function(){return ct(this.anchor,this.head)},Fo.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Gr.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var a=t,i=t+e;a<i;++a){var r=this.lines[a];this.height-=r.height,se(r),Se(r,"delete")}this.lines.splice(t,e)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,e,a){this.height+=a,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var i=0;i<e.length;++i)e[i].parent=this},iterN:function(t,e,a){for(var i=t+e;t<i;++t)if(a(this.lines[t]))return!0}},Wr.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var a=0;a<this.children.length;++a){var i=this.children[a],r=i.chunkSize();if(t<r){var n=Math.min(e,r-t),s=i.height;if(i.removeInner(t,n),this.height-=s-i.height,r==n&&(this.children.splice(a--,1),i.parent=null),0==(e-=n))break;t=0}else t-=r}if(this.size-e<25&&(this.children.length>1||!(this.children[0]instanceof Gr))){var o=[];this.collapse(o),this.children=[new Gr(o)],this.children[0].parent=this}},collapse:function(t){for(var e=0;e<this.children.length;++e)this.children[e].collapse(t)},insertInner:function(t,e,a){this.size+=e.length,this.height+=a;for(var i=0;i<this.children.length;++i){var r=this.children[i],n=r.chunkSize();if(t<=n){if(r.insertInner(t,e,a),r.lines&&r.lines.length>50){for(var s=r.lines.length%25+25,o=s;o<r.lines.length;){var h=new Gr(r.lines.slice(o,o+=25));r.height-=h.height,this.children.splice(++i,0,h),h.parent=this}r.lines=r.lines.slice(0,s),this.maybeSpill()}break}t-=n}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=t.children.splice(t.children.length-5,5),a=new Wr(e);if(t.parent){t.size-=a.size,t.height-=a.height;var i=d(t.parent.children,t);t.parent.children.splice(i+1,0,a)}else{var r=new Wr(t.children);r.parent=t,t.children=[r,a],t=r}a.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,e,a){for(var i=0;i<this.children.length;++i){var r=this.children[i],n=r.chunkSize();if(t<n){var s=Math.min(e,n-t);if(r.iterN(t,s,a))return!0;if(0==(e-=s))break;t=0}else t-=n}}};var Eo=function(t,e,a){if(a)for(var i in a)a.hasOwnProperty(i)&&(this[i]=a[i]);this.doc=t,this.node=e};Eo.prototype.clear=function(){var t=this.doc.cm,e=this.line.widgets,a=this.line,i=it(a);if(null!=i&&e){for(var r=0;r<e.length;++r)e[r]==this&&e.splice(r--,1);e.length||(a.widgets=null);var n=Oe(this);at(a,Math.max(0,a.height-n)),t&&(pi(t,function(){Xr(t,a,-n),_a(t,i,"widget")}),Se(t,"lineWidgetCleared",t,this,i))}},Eo.prototype.changed=function(){var t=this,e=this.height,a=this.doc.cm,i=this.line;this.height=null;var r=Oe(this)-e;r&&(te(this.doc,i)||at(i,i.height+r),a&&pi(a,function(){a.curOp.forceUpdate=!0,Xr(a,i,r),Se(a,"lineWidgetChanged",a,t,it(i))}))},P(Eo);var Ao=0,No=function(t,e){this.lines=[],this.type=e,this.doc=t,this.id=++Ao};No.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;if(e&&hi(t),O(this,"clear")){var a=this.find();a&&Se(this,"clear",a.from,a.to)}for(var i=null,r=null,n=0;n<this.lines.length;++n){var s=this.lines[n],o=Et(s.markedSpans,this);t&&!this.collapsed?_a(t,it(s),"text"):t&&(null!=o.to&&(r=it(s)),null!=o.from&&(i=it(s))),s.markedSpans=At(s.markedSpans,o),null==o.from&&this.collapsed&&!te(this.doc,s)&&t&&at(s,va(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var h=0;h<this.lines.length;++h){var l=Jt(this.lines[h]),u=ie(l);u>t.display.maxLineLength&&(t.display.maxLine=l,t.display.maxLineLength=u,t.display.maxLineChanged=!0)}null!=i&&t&&this.collapsed&&Ma(t,i,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&xr(t.doc)),t&&Se(t,"markerCleared",t,this,i,r),e&&li(t),this.parent&&this.parent.clear()}},No.prototype.find=function(t,e){null==t&&"bookmark"==this.type&&(t=1);for(var a,i,r=0;r<this.lines.length;++r){var n=this.lines[r],s=Et(n.markedSpans,this);if(null!=s.from&&(a=ot(e?n:it(n),s.from),-1==t))return a;if(null!=s.to&&(i=ot(e?n:it(n),s.to),1==t))return i}return a&&{from:a,to:i}},No.prototype.changed=function(){var t=this,e=this.find(-1,!0),a=this,i=this.doc.cm;e&&i&&pi(i,function(){var r=e.line,n=it(e.line),s=Ke(i,n);if(s&&($e(s),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!te(a.doc,r)&&null!=a.height){var o=a.height;a.height=null;var h=Oe(a)-o;h&&at(r,r.height+h)}Se(i,"markerChanged",i,t)})},No.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=d(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},No.prototype.detachLine=function(t){if(this.lines.splice(d(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}},P(No);var Oo=function(t,e){this.markers=t,this.primary=e;for(var a=0;a<t.length;++a)t[a].parent=this};Oo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();Se(this,"clear")}},Oo.prototype.find=function(t,e){return this.primary.find(t,e)},P(Oo);var Po=0,Ro=function(t,e,a,i,r){if(!(this instanceof Ro))return new Ro(t,e,a,i,r);null==a&&(a=0),Wr.call(this,[new Gr([new Co("",null)])]),this.first=a,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=a;var n=ot(a,0);this.sel=Vi(n),this.history=new er(null),this.id=++Po,this.modeOption=e,this.lineSep=i,this.direction="rtl"==r?"rtl":"ltr",this.extend=!1,"string"==typeof t&&(t=this.splitLines(t)),qi(this,{from:n,to:n,text:t}),Tr(this,Vi(n),Xs)};Ro.prototype=g(Wr.prototype,{constructor:Ro,iter:function(t,e,a){a?this.iterN(t-this.first,e-t,a):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var a=0,i=0;i<e.length;++i)a+=e[i].height;this.insertInner(t-this.first,e,a)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=et(this,this.first,this.first+this.size);return!1===t?e:e.join(t||this.lineSeparator())},setValue:gi(function(t){var e=ot(this.first,0),a=this.first+this.size-1;Er(this,{from:e,to:ot(a,$(this,a).text.length),text:this.splitLines(t),origin:"setValue",full:!0},!0),this.cm&&Za(this.cm,0,0),Tr(this,Vi(e),Xs)}),replaceRange:function(t,e,a,i){e=mt(this,e),a=a?mt(this,a):e,kr(this,t,e,a,i)},getRange:function(t,e,a){var i=tt(this,mt(this,t),mt(this,e));return!1===a?i:""===a?i.join(""):i.join(a||this.lineSeparator())},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},getLineHandle:function(t){if(nt(this,t))return $(this,t)},getLineNumber:function(t){return it(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=$(this,t)),Jt(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return mt(this,t)},getCursor:function(t){var e=this.sel.primary();return null==t||"head"==t?e.head:"anchor"==t?e.anchor:"end"==t||"to"==t||!1===t?e.to():e.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:gi(function(t,e,a){vr(this,mt(this,"number"==typeof t?ot(t,e||0):t),null,a)}),setSelection:gi(function(t,e,a){vr(this,mt(this,t),mt(this,e||t),a)}),extendSelection:gi(function(t,e,a){Cr(this,mt(this,t),e&&mt(this,e),a)}),extendSelections:gi(function(t,e){pr(this,pt(this,t),e)}),extendSelectionsBy:gi(function(t,e){pr(this,pt(this,p(this.sel.ranges,t)),e)}),setSelections:gi(function(t,e,a){if(t.length){for(var i=[],r=0;r<t.length;r++)i[r]=new Fo(mt(this,t[r].anchor),mt(this,t[r].head||t[r].anchor));null==e&&(e=Math.min(t.length-1,this.sel.primIndex)),Tr(this,Hi(this.cm,i,e),a)}}),addSelection:gi(function(t,e,a){var i=this.sel.ranges.slice(0);i.push(new Fo(mt(this,t),mt(this,e||t))),Tr(this,Hi(this.cm,i,i.length-1),a)}),getSelection:function(t){for(var e,a=this.sel.ranges,i=0;i<a.length;i++){var r=tt(this,a[i].from(),a[i].to());e=e?e.concat(r):r}return!1===t?e:e.join(t||this.lineSeparator())},getSelections:function(t){for(var e=[],a=this.sel.ranges,i=0;i<a.length;i++){var r=tt(this,a[i].from(),a[i].to());!1!==t&&(r=r.join(t||this.lineSeparator())),e[i]=r}return e},replaceSelection:function(t,e,a){for(var i=[],r=0;r<this.sel.ranges.length;r++)i[r]=t;this.replaceSelections(i,e,a||"+input")},replaceSelections:gi(function(t,e,a){for(var i=[],r=this.sel,n=0;n<r.ranges.length;n++){var s=r.ranges[n];i[n]={from:s.from(),to:s.to(),text:this.splitLines(t[n]),origin:a}}for(var o=e&&"end"!=e&&Ki(this,i,e),h=i.length-1;h>=0;h--)Er(this,i[h]);o?Sr(this,o):this.cm&&qa(this.cm)}),undo:gi(function(){Nr(this,"undo")}),redo:gi(function(){Nr(this,"redo")}),undoSelection:gi(function(){Nr(this,"undo",!0)}),redoSelection:gi(function(){Nr(this,"redo",!0)}),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,e=0,a=0,i=0;i<t.done.length;i++)t.done[i].ranges||++e;for(var r=0;r<t.undone.length;r++)t.undone[r].ranges||++a;return{undo:e,redo:a}},clearHistory:function(){var t=this;this.history=new er(this.history),Zi(this,function(e){return e.history=t.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:fr(this.history.done),undone:fr(this.history.undone)}},setHistory:function(t){var e=this.history=new er(this.history);e.done=fr(t.done.slice(0),null,!0),e.undone=fr(t.undone.slice(0),null,!0)},setGutterMarker:gi(function(t,e,a){return Vr(this,t,"gutter",function(t){var i=t.gutterMarkers||(t.gutterMarkers={});return i[e]=a,!a&&y(i)&&(t.gutterMarkers=null),!0})}),clearGutter:gi(function(t){var e=this;this.iter(function(a){a.gutterMarkers&&a.gutterMarkers[t]&&Vr(e,a,"gutter",function(){return a.gutterMarkers[t]=null,y(a.gutterMarkers)&&(a.gutterMarkers=null),!0})})}),lineInfo:function(t){var e;if("number"==typeof t){if(!nt(this,t))return null;if(e=t,!(t=$(this,t)))return null}else if(null==(e=it(t)))return null;return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},addLineClass:gi(function(e,a,i){return Vr(this,e,"gutter"==a?"gutter":"class",function(e){var r="text"==a?"textClass":"background"==a?"bgClass":"gutter"==a?"gutterClass":"wrapClass";if(e[r]){if(t(i).test(e[r]))return!1;e[r]+=" "+i}else e[r]=i;return!0})}),removeLineClass:gi(function(e,a,i){return Vr(this,e,"gutter"==a?"gutter":"class",function(e){var r="text"==a?"textClass":"background"==a?"bgClass":"gutter"==a?"gutterClass":"wrapClass",n=e[r];if(!n)return!1;if(null==i)e[r]=null;else{var s=n.match(t(i));if(!s)return!1;var o=s.index+s[0].length;e[r]=n.slice(0,s.index)+(s.index&&o!=n.length?" ":"")+n.slice(o)||null}return!0})}),addLineWidget:gi(function(t,e,a){return Ur(this,t,e,a)}),removeLineWidget:function(t){t.clear()},markText:function(t,e,a){return Kr(this,mt(this,t),mt(this,e),a,a&&a.type||"range")},setBookmark:function(t,e){var a={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft,clearWhenEmpty:!1,shared:e&&e.shared,handleMouseEvents:e&&e.handleMouseEvents};return t=mt(this,t),Kr(this,t,t,a,"bookmark")},findMarksAt:function(t){t=mt(this,t);var e=[],a=$(this,t.line).markedSpans;if(a)for(var i=0;i<a.length;++i){var r=a[i];(null==r.from||r.from<=t.ch)&&(null==r.to||r.to>=t.ch)&&e.push(r.marker.parent||r.marker)}return e},findMarks:function(t,e,a){t=mt(this,t),e=mt(this,e);var i=[],r=t.line;return this.iter(t.line,e.line+1,function(n){var s=n.markedSpans;if(s)for(var o=0;o<s.length;o++){var h=s[o];null!=h.to&&r==t.line&&t.ch>=h.to||null==h.from&&r!=t.line||null!=h.from&&r==e.line&&h.from>=e.ch||a&&!a(h.marker)||i.push(h.marker.parent||h.marker)}++r}),i},getAllMarks:function(){var t=[];return this.iter(function(e){var a=e.markedSpans;if(a)for(var i=0;i<a.length;++i)null!=a[i].from&&t.push(a[i].marker)}),t},posFromIndex:function(t){var e,a=this.first,i=this.lineSeparator().length;return this.iter(function(r){var n=r.text.length+i;if(n>t)return e=t,!0;t-=n,++a}),mt(this,ot(a,e))},indexFromPos:function(t){t=mt(this,t);var e=t.ch;if(t.line<this.first||t.ch<0)return 0;var a=this.lineSeparator().length;return this.iter(this.first,t.line,function(t){e+=t.text.length+a}),e},copy:function(t){var e=new Ro(et(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel=this.sel,e.extend=!1,t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,a=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<a&&(a=t.to);var i=new Ro(et(this,e,a),t.mode||this.modeOption,e,this.lineSep,this.direction);return t.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:t.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],Jr(i,zr(this)),i},unlinkDoc:function(t){if(t instanceof jn&&(t=t.doc),this.linked)for(var e=0;e<this.linked.length;++e){var a=this.linked[e];if(a.doc==t){this.linked.splice(e,1),t.unlinkDoc(this),qr(zr(this));break}}if(t.history==this.history){var i=[t.id];Zi(t,function(t){return i.push(t.id)},!0),t.history=new er(null),t.history.done=fr(this.history.done,i),t.history.undone=fr(this.history.undone,i)}},iterLinkedDocs:function(t){Zi(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(t){return this.lineSep?t.split(this.lineSep):eo(t)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:gi(function(t){"rtl"!=t&&(t="ltr"),t!=this.direction&&(this.direction=t,this.iter(function(t){return t.order=null}),this.cm&&tr(this.cm))})}),Ro.prototype.eachLine=Ro.prototype.iter;for(var ko=0,Bo=!1,Yo={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ho=0;Ho<10;Ho++)Yo[Ho+48]=Yo[Ho+96]=String(Ho);for(var Vo=65;Vo<=90;Vo++)Yo[Vo]=String.fromCharCode(Vo);for(var Go=1;Go<=12;Go++)Yo[Go+111]=Yo[Go+63235]="F"+Go;var Wo={};Wo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Wo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Wo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Wo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Wo.default=Fs?Wo.macDefault:Wo.pcDefault;var Xo={selectAll:wr,singleSelection:function(t){return t.setSelection(t.getCursor("anchor"),t.getCursor("head"),Xs)},killLine:function(t){return fn(t,function(e){if(e.empty()){var a=$(t.doc,e.head.line).text.length;return e.head.ch==a&&e.head.line<t.lastLine()?{from:e.head,to:ot(e.head.line+1,0)}:{from:e.head,to:ot(e.head.line,a)}}return{from:e.from(),to:e.to()}})},deleteLine:function(t){return fn(t,function(e){return{from:ot(e.from().line,0),to:mt(t.doc,ot(e.to().line+1,0))}})},delLineLeft:function(t){return fn(t,function(t){return{from:ot(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(t){return fn(t,function(e){var a=t.charCoords(e.head,"div").top+5;return{from:t.coordsChar({left:0,top:a},"div"),to:e.from()}})},delWrappedLineRight:function(t){return fn(t,function(e){var a=t.charCoords(e.head,"div").top+5,i=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:a},"div");return{from:e.from(),to:i}})},undo:function(t){return t.undo()},redo:function(t){return t.redo()},undoSelection:function(t){return t.undoSelection()},redoSelection:function(t){return t.redoSelection()},goDocStart:function(t){return t.extendSelection(ot(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(ot(t.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy(function(e){return vn(t,e.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy(function(e){return Sn(t,e.head)},{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy(function(e){return gn(t,e.head.line)},{origin:"+move",bias:-1})},goLineRight:function(t){return t.extendSelectionsBy(function(e){var a=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:a},"div")},Ks)},goLineLeft:function(t){return t.extendSelectionsBy(function(e){var a=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:0,top:a},"div")},Ks)},goLineLeftSmart:function(t){return t.extendSelectionsBy(function(e){var a=t.cursorCoords(e.head,"div").top+5,i=t.coordsChar({left:0,top:a},"div");return i.ch<t.getLine(i.line).search(/\S/)?Sn(t,e.head):i},Ks)},goLineUp:function(t){return t.moveV(-1,"line")},goLineDown:function(t){return t.moveV(1,"line")},goPageUp:function(t){return t.moveV(-1,"page")},goPageDown:function(t){return t.moveV(1,"page")},goCharLeft:function(t){return t.moveH(-1,"char")},goCharRight:function(t){return t.moveH(1,"char")},goColumnLeft:function(t){return t.moveH(-1,"column")},goColumnRight:function(t){return t.moveH(1,"column")},goWordLeft:function(t){return t.moveH(-1,"word")},goGroupRight:function(t){return t.moveH(1,"group")},goGroupLeft:function(t){return t.moveH(-1,"group")},goWordRight:function(t){return t.moveH(1,"word")},delCharBefore:function(t){return t.deleteH(-1,"codepoint")},delCharAfter:function(t){return t.deleteH(1,"char")},delWordBefore:function(t){return t.deleteH(-1,"word")},delWordAfter:function(t){return t.deleteH(1,"word")},delGroupBefore:function(t){return t.deleteH(-1,"group")},delGroupAfter:function(t){return t.deleteH(1,"group")},indentAuto:function(t){return t.indentSelection("smart")},indentMore:function(t){return t.indentSelection("add")},indentLess:function(t){return t.indentSelection("subtract")},insertTab:function(t){return t.replaceSelection("\t")},insertSoftTab:function(t){for(var e=[],a=t.listSelections(),i=t.options.tabSize,r=0;r<a.length;r++){var n=a[r].from(),s=c(t.getLine(n.line),n.ch,i);e.push(m(i-s%i))}t.replaceSelections(e)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){return pi(t,function(){for(var e=t.listSelections(),a=[],i=0;i<e.length;i++)if(e[i].empty()){var r=e[i].head,n=$(t.doc,r.line).text;if(n)if(r.ch==n.length&&(r=new ot(r.line,r.ch-1)),r.ch>0)r=new ot(r.line,r.ch+1),t.replaceRange(n.charAt(r.ch-1)+n.charAt(r.ch-2),ot(r.line,r.ch-2),r,"+transpose");else if(r.line>t.doc.first){var s=$(t.doc,r.line-1).text;s&&(r=new ot(r.line,1),t.replaceRange(n.charAt(0)+t.doc.lineSeparator()+s.charAt(s.length-1),ot(r.line-1,s.length-1),r,"+transpose"))}a.push(new Fo(r,r))}t.setSelections(a)})},newlineAndIndent:function(t){return pi(t,function(){for(var e=t.listSelections(),a=e.length-1;a>=0;a--)t.replaceRange(t.doc.lineSeparator(),e[a].anchor,e[a].head,"+input");e=t.listSelections();for(var i=0;i<e.length;i++)t.indentLine(e[i].from().line,null,!0);qa(t)})},openLine:function(t){return t.replaceSelection("\n","start")},toggleOverwrite:function(t){return t.toggleOverwrite()}},Uo=new Ys,Ko=null,jo=function(t,e,a){this.time=t,this.pos=e,this.button=a};jo.prototype.compare=function(t,e,a){return this.time+400>t&&0==ht(e,this.pos)&&a==this.button};var zo,Jo,qo={toString:function(){return"CodeMirror.Init"}},Zo={},Qo={};jn.defaults=Zo,jn.optionHandlers=Qo;var $o=[];jn.defineInitHook=function(t){return $o.push(t)};var th=null,eh=function(t){this.cm=t,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Ys,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};eh.prototype.init=function(t){function e(t){for(var e=t.target;e;e=e.parentNode){if(e==o)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(e.className))break}return!1}function a(t){if(e(t)&&!A(n,t)){if(n.somethingSelected())qn({lineWise:!1,text:n.getSelections()}),"cut"==t.type&&n.replaceSelection("",null,"cut");else{if(!n.options.lineWiseCopyCut)return;var a=ts(n);qn({lineWise:!0,text:a.text}),"cut"==t.type&&n.operation(function(){n.setSelections(a.ranges,0,Xs),n.replaceSelection("",null,"cut")})}if(t.clipboardData){t.clipboardData.clearData();var i=th.text.join("\n");if(t.clipboardData.setData("Text",i),t.clipboardData.getData("Text")==i)return void t.preventDefault()}var h=as(),l=h.firstChild;n.display.lineSpace.insertBefore(h,n.display.lineSpace.firstChild),l.value=th.text.join("\n");var u=s();Bs(l),setTimeout(function(){n.display.lineSpace.removeChild(h),u.focus(),u==o&&r.showPrimarySelection()},50)}}var i=this,r=this,n=r.cm,o=r.div=t.lineDiv;o.contentEditable=!0,es(o,n.options.spellcheck,n.options.autocorrect,n.options.autocapitalize),$s(o,"paste",function(t){!e(t)||A(n,t)||Qn(t,n)||gs<=11&&setTimeout(Di(n,function(){return i.updateFromDOM()}),20)}),$s(o,"compositionstart",function(t){i.composing={data:t.data,done:!1}}),$s(o,"compositionupdate",function(t){i.composing||(i.composing={data:t.data,done:!1})}),$s(o,"compositionend",function(t){i.composing&&(t.data!=i.composing.data&&i.readFromDOMSoon(),i.composing.done=!0)}),$s(o,"touchstart",function(){return r.forceCompositionEnd()}),$s(o,"input",function(){i.composing||i.readFromDOMSoon()}),$s(o,"copy",a),$s(o,"cut",a)},eh.prototype.screenReaderLabelChanged=function(t){t?this.div.setAttribute("aria-label",t):this.div.removeAttribute("aria-label")},eh.prototype.prepareSelection=function(){var t=Na(this.cm,!1);return t.focus=s()==this.div,t},eh.prototype.showSelection=function(t,e){t&&this.cm.display.view.length&&((t.focus||e)&&this.showPrimarySelection(),this.showMultipleSelections(t))},eh.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},eh.prototype.showPrimarySelection=function(){var t=this.getSelection(),e=this.cm,a=e.doc.sel.primary(),i=a.from(),r=a.to();if(e.display.viewTo==e.display.viewFrom||i.line>=e.display.viewTo||r.line<e.display.viewFrom)return void t.removeAllRanges();var n=ls(e,t.anchorNode,t.anchorOffset),s=ls(e,t.focusNode,t.focusOffset);if(!n||n.bad||!s||s.bad||0!=ht(dt(n,s),i)||0!=ht(ct(n,s),r)){var o=e.display.view,h=i.line>=e.display.viewFrom&&ns(e,i)||{node:o[0].measure.map[2],offset:0},l=r.line<e.display.viewTo&&ns(e,r);if(!l){var u=o[o.length-1].measure,c=u.maps?u.maps[u.maps.length-1]:u.map;l={node:c[c.length-1],offset:c[c.length-2]-c[c.length-3]}}if(!h||!l)return void t.removeAllRanges();var d,f=t.rangeCount&&t.getRangeAt(0);try{d=Os(h.node,h.offset,l.offset,l.node)}catch(t){}d&&(!ms&&e.state.focused?(t.collapse(h.node,h.offset),d.collapsed||(t.removeAllRanges(),t.addRange(d))):(t.removeAllRanges(),t.addRange(d)),f&&null==t.anchorNode?t.addRange(f):ms&&this.startGracePeriod()),this.rememberSelection()}},eh.prototype.startGracePeriod=function(){var t=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){t.gracePeriod=!1,t.selectionChanged()&&t.cm.operation(function(){return t.cm.curOp.selectionChanged=!0})},20)},eh.prototype.showMultipleSelections=function(t){a(this.cm.display.cursorDiv,t.cursors),a(this.cm.display.selectionDiv,t.selection)},eh.prototype.rememberSelection=function(){var t=this.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastFocusNode=t.focusNode,this.lastFocusOffset=t.focusOffset},eh.prototype.selectionInEditor=function(){var t=this.getSelection();if(!t.rangeCount)return!1;var e=t.getRangeAt(0).commonAncestorContainer;return n(this.div,e)},eh.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&s()==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},eh.prototype.blur=function(){this.div.blur()},eh.prototype.getField=function(){return this.div},eh.prototype.supportsTouch=function(){return!0},eh.prototype.receivedFocus=function(){function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))}var e=this;this.selectionInEditor()?this.pollSelection():pi(this.cm,function(){return e.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,t)},eh.prototype.selectionChanged=function(){var t=this.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastFocusNode||t.focusOffset!=this.lastFocusOffset},eh.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var t=this.getSelection(),e=this.cm;if(bs&&ys&&this.cm.display.gutterSpecs.length&&ss(t.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var a=ls(e,t.anchorNode,t.anchorOffset),i=ls(e,t.focusNode,t.focusOffset);a&&i&&pi(e,function(){Tr(e.doc,Vi(a,i),Xs),(a.bad||i.bad)&&(e.curOp.selectionChanged=!0)})}}},eh.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var t=this.cm,e=t.display,a=t.doc.sel.primary(),i=a.from(),r=a.to();if(0==i.ch&&i.line>t.firstLine()&&(i=ot(i.line-1,$(t.doc,i.line-1).length)),r.ch==$(t.doc,r.line).text.length&&r.line<t.lastLine()&&(r=ot(r.line+1,0)),i.line<e.viewFrom||r.line>e.viewTo-1)return!1;var n,s,o;i.line==e.viewFrom||0==(n=La(t,i.line))?(s=it(e.view[0].line),o=e.view[0].node):(s=it(e.view[n].line),o=e.view[n-1].node.nextSibling);var h,l,u=La(t,r.line);if(u==e.view.length-1?(h=e.viewTo-1,l=e.lineDiv.lastChild):(h=it(e.view[u+1].line)-1,l=e.view[u+1].node.previousSibling),!o)return!1;for(var c=t.doc.splitLines(hs(t,o,l,s,h)),d=tt(t.doc,ot(s,0),ot(h,$(t.doc,h).text.length));c.length>1&&d.length>1;)if(C(c)==C(d))c.pop(),d.pop(),h--;else{if(c[0]!=d[0])break;c.shift(),d.shift(),s++}for(var f=0,m=0,p=c[0],D=d[0],v=Math.min(p.length,D.length);f<v&&p.charCodeAt(f)==D.charCodeAt(f);)++f;for(var g=C(c),S=C(d),T=Math.min(g.length-(1==c.length?f:0),S.length-(1==d.length?f:0));m<T&&g.charCodeAt(g.length-m-1)==S.charCodeAt(S.length-m-1);)++m;if(1==c.length&&1==d.length&&s==i.line)for(;f&&f>i.ch&&g.charCodeAt(g.length-m-1)==S.charCodeAt(S.length-m-1);)f--,m++;c[c.length-1]=g.slice(0,g.length-m).replace(/^\u200b+/,""),c[0]=c[0].slice(f).replace(/\u200b+$/,"");var y=ot(s,f),I=ot(h,d.length?C(d).length-m:0);return c.length>1||c[0]||ht(y,I)?(kr(t.doc,c,y,I,"+input"),!0):void 0},eh.prototype.ensurePolled=function(){this.forceCompositionEnd()},eh.prototype.reset=function(){this.forceCompositionEnd()},eh.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},eh.prototype.readFromDOMSoon=function(){var t=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(t.readDOMTimeout=null,t.composing){if(!t.composing.done)return;t.composing=null}t.updateFromDOM()},80))},eh.prototype.updateFromDOM=function(){var t=this;!this.cm.isReadOnly()&&this.pollContent()||pi(this.cm,function(){return Ma(t.cm)})},eh.prototype.setUneditable=function(t){t.contentEditable="false"},eh.prototype.onKeyPress=function(t){0==t.charCode||this.composing||(t.preventDefault(),this.cm.isReadOnly()||Di(this.cm,Zn)(this.cm,String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),0))},eh.prototype.readOnlyChanged=function(t){this.div.contentEditable=String("nocursor"!=t)},eh.prototype.onContextMenu=function(){},eh.prototype.resetPosition=function(){},eh.prototype.needsContentAttribute=!0;var ah=function(t){this.cm=t,this.prevInput="",this.pollingFast=!1,this.polling=new Ys,this.hasSelection=!1,this.composing=null};ah.prototype.init=function(t){function e(t){if(!A(r,t)){if(r.somethingSelected())qn({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var e=ts(r);qn({lineWise:!0,text:e.text}),"cut"==t.type?r.setSelections(e.ranges,null,Xs):(i.prevInput="",n.value=e.text.join("\n"),Bs(n))}"cut"==t.type&&(r.state.cutIncoming=+new Date)}}var a=this,i=this,r=this.cm;this.createField(t);var n=this.textarea;t.wrapper.insertBefore(this.wrapper,t.wrapper.firstChild),_s&&(n.style.width="0px"),$s(n,"input",function(){vs&&gs>=9&&a.hasSelection&&(a.hasSelection=null),i.poll()}),$s(n,"paste",function(t){A(r,t)||Qn(t,r)||(r.state.pasteIncoming=+new Date,i.fastPoll())}),$s(n,"cut",e),$s(n,"copy",e),$s(t.scroller,"paste",function(e){if(!Pe(t,e)&&!A(r,e)){if(!n.dispatchEvent)return r.state.pasteIncoming=+new Date,void i.focus();var a=new Event("paste");a.clipboardData=e.clipboardData,n.dispatchEvent(a)}}),$s(t.lineSpace,"selectstart",function(e){Pe(t,e)||R(e)}),$s(n,"compositionstart",function(){var t=r.getCursor("from");i.composing&&i.composing.range.clear(),i.composing={start:t,range:r.markText(t,r.getCursor("to"),{className:"CodeMirror-composing"})}}),$s(n,"compositionend",function(){i.composing&&(i.poll(),i.composing.range.clear(),i.composing=null)})},ah.prototype.createField=function(t){this.wrapper=as(),this.textarea=this.wrapper.firstChild},ah.prototype.screenReaderLabelChanged=function(t){t?this.textarea.setAttribute("aria-label",t):this.textarea.removeAttribute("aria-label")},ah.prototype.prepareSelection=function(){var t=this.cm,e=t.display,a=t.doc,i=Na(t);if(t.options.moveInputWithCursor){var r=ha(t,a.sel.primary().head,"div"),n=e.wrapper.getBoundingClientRect(),s=e.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(e.wrapper.clientHeight-10,r.top+s.top-n.top)),i.teLeft=Math.max(0,Math.min(e.wrapper.clientWidth-10,r.left+s.left-n.left))}return i},ah.prototype.showSelection=function(t){var e=this.cm,i=e.display;a(i.cursorDiv,t.cursors),a(i.selectionDiv,t.selection),null!=t.teTop&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")},ah.prototype.reset=function(t){if(!this.contextMenuPending&&!this.composing){var e=this.cm;if(e.somethingSelected()){this.prevInput="";var a=e.getSelection();this.textarea.value=a,e.state.focused&&Bs(this.textarea),vs&&gs>=9&&(this.hasSelection=a)}else t||(this.prevInput=this.textarea.value="",vs&&gs>=9&&(this.hasSelection=null))}},ah.prototype.getField=function(){return this.textarea},ah.prototype.supportsTouch=function(){return!1},ah.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!ws||s()!=this.textarea))try{this.textarea.focus()}catch(t){}},ah.prototype.blur=function(){this.textarea.blur()},ah.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},ah.prototype.receivedFocus=function(){this.slowPoll()},ah.prototype.slowPoll=function(){var t=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){t.poll(),t.cm.state.focused&&t.slowPoll()})},ah.prototype.fastPoll=function(){function t(){a.poll()||e?(a.pollingFast=!1,a.slowPoll()):(e=!0,a.polling.set(60,t))}var e=!1,a=this;a.pollingFast=!0,a.polling.set(20,t)},ah.prototype.poll=function(){var t=this,e=this.cm,a=this.textarea,i=this.prevInput;if(this.contextMenuPending||!e.state.focused||ao(a)&&!i&&!this.composing||e.isReadOnly()||e.options.disableInput||e.state.keySeq)return!1;var r=a.value;if(r==i&&!e.somethingSelected())return!1;if(vs&&gs>=9&&this.hasSelection===r||Fs&&/[\uf700-\uf7ff]/.test(r))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var n=r.charCodeAt(0);if(8203!=n||i||(i="​"),8666==n)return this.reset(),this.cm.execCommand("undo")}for(var s=0,o=Math.min(i.length,r.length);s<o&&i.charCodeAt(s)==r.charCodeAt(s);)++s;return pi(e,function(){Zn(e,r.slice(s),i.length-s,null,t.composing?"*compose":null),r.length>1e3||r.indexOf("\n")>-1?a.value=t.prevInput="":t.prevInput=r,t.composing&&(t.composing.range.clear(),t.composing.range=e.markText(t.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ah.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},ah.prototype.onKeyPress=function(){vs&&gs>=9&&(this.hasSelection=null),this.fastPoll()},ah.prototype.onContextMenu=function(t){function e(){if(null!=s.selectionStart){var t=r.somethingSelected(),e="​"+(t?s.value:"");s.value="⇚",s.value=e,i.prevInput=t?"":"​",s.selectionStart=1,s.selectionEnd=e.length,n.selForContextMenu=r.doc.sel}}function a(){if(i.contextMenuPending==a&&(i.contextMenuPending=!1,i.wrapper.style.cssText=u,s.style.cssText=l,vs&&gs<9&&n.scrollbars.setScrollTop(n.scroller.scrollTop=h),null!=s.selectionStart)){(!vs||vs&&gs<9)&&e();var t=0,o=function(){n.selForContextMenu==r.doc.sel&&0==s.selectionStart&&s.selectionEnd>0&&"​"==i.prevInput?Di(r,wr)(r):t++<10?n.detectingSelectAll=setTimeout(o,500):(n.selForContextMenu=null,n.input.reset())};n.detectingSelectAll=setTimeout(o,200)}}var i=this,r=i.cm,n=r.display,s=i.textarea;i.contextMenuPending&&i.contextMenuPending();var o=xa(r,t),h=n.scroller.scrollTop;if(o&&!Is){r.options.resetSelectionOnContextMenu&&-1==r.doc.sel.contains(o)&&Di(r,Tr)(r.doc,Vi(o),Xs);var l=s.style.cssText,u=i.wrapper.style.cssText,c=i.wrapper.offsetParent.getBoundingClientRect();i.wrapper.style.cssText="position: static",s.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(t.clientY-c.top-5)+"px; left: "+(t.clientX-c.left-5)+"px;\n      z-index: 1000; background: "+(vs?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var d;if(Ss&&(d=window.scrollY),n.input.focus(),Ss&&window.scrollTo(null,d),n.input.reset(),r.somethingSelected()||(s.value=i.prevInput=" "),i.contextMenuPending=a,n.selForContextMenu=r.doc.sel,clearTimeout(n.detectingSelectAll),vs&&gs>=9&&e(),Rs){Y(t);var f=function(){F(window,"mouseup",f),setTimeout(a,20)};$s(window,"mouseup",f)}else setTimeout(a,50)}},ah.prototype.readOnlyChanged=function(t){t||this.reset(),this.textarea.disabled="nocursor"==t,this.textarea.readOnly=!!t},ah.prototype.setUneditable=function(){},ah.prototype.needsContentAttribute=!1,function(t){function e(e,i,r,n){t.defaults[e]=i,r&&(a[e]=n?function(t,e,a){a!=qo&&r(t,e,a)}:r)}var a=t.optionHandlers;t.defineOption=e,t.Init=qo,e("value","",function(t,e){return t.setValue(e)},!0),e("mode",null,function(t,e){t.doc.modeOption=e,ji(t)},!0),e("indentUnit",2,ji,!0),e("indentWithTabs",!1),e("smartIndent",!0),e("tabSize",4,function(t){zi(t),ea(t),Ma(t)},!0),e("lineSeparator",null,function(t,e){if(t.doc.lineSep=e,e){var a=[],i=t.doc.first;t.doc.iter(function(t){for(var r=0;;){var n=t.text.indexOf(e,r);if(-1==n)break;r=n+e.length,a.push(ot(i,n))}i++});for(var r=a.length-1;r>=0;r--)kr(t.doc,e,a[r],ot(a[r].line,a[r].ch+e.length))}}),e("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(t,e,a){t.state.specialChars=new RegExp(e.source+(e.test("\t")?"":"|\t"),"g"),a!=qo&&t.refresh()}),e("specialCharPlaceholder",le,function(t){return t.refresh()},!0),e("electricChars",!0),e("inputStyle",ws?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),e("spellcheck",!1,function(t,e){return t.getInputField().spellcheck=e},!0),e("autocorrect",!1,function(t,e){return t.getInputField().autocorrect=e},!0),e("autocapitalize",!1,function(t,e){return t.getInputField().autocapitalize=e},!0),e("rtlMoveVisually",!As),e("wholeLineUpdateBefore",!0),e("theme","default",function(t){Xn(t),Pi(t)},!0),e("keyMap","default",function(t,e,a){var i=dn(e),r=a!=qo&&dn(a);r&&r.detach&&r.detach(t,i),i.attach&&i.attach(t,r||null)}),e("extraKeys",null),e("configureMouse",null),e("lineWrapping",!1,Kn,!0),e("gutters",[],function(t,e){t.display.gutterSpecs=Ni(e,t.options.lineNumbers),Pi(t)},!0),e("fixedGutter",!0,function(t,e){t.display.gutters.style.left=e?Ta(t.display)+"px":"0",t.refresh()},!0),e("coverGutterNextToScrollbar",!1,function(t){return ni(t)},!0),e("scrollbarStyle","native",function(t){oi(t),ni(t),t.display.scrollbars.setScrollTop(t.doc.scrollTop),t.display.scrollbars.setScrollLeft(t.doc.scrollLeft)},!0),e("lineNumbers",!1,function(t,e){t.display.gutterSpecs=Ni(t.options.gutters,e),Pi(t)},!0),e("firstLineNumber",1,Pi,!0),e("lineNumberFormatter",function(t){return t},Pi,!0),e("showCursorWhenSelecting",!1,Aa,!0),e("resetSelectionOnContextMenu",!0),e("lineWiseCopyCut",!0),e("pasteLinesPerSelection",!0),e("selectionsMayTouch",!1),e("readOnly",!1,function(t,e){"nocursor"==e&&(Va(t),t.display.input.blur()),t.display.input.readOnlyChanged(e)}),e("screenReaderLabel",null,function(t,e){e=""===e?null:e,t.display.input.screenReaderLabelChanged(e)}),e("disableInput",!1,function(t,e){e||t.display.input.reset()},!0),e("dragDrop",!0,Un),e("allowDropFileTypes",null),e("cursorBlinkRate",530),e("cursorScrollMargin",0),e("cursorHeight",1,Aa,!0),e("singleCursorHeightPerLine",!0,Aa,!0),e("workTime",100),e("workDelay",100),e("flattenSpans",!0,zi,!0),e("addModeClass",!1,zi,!0),e("pollInterval",100),e("undoDepth",200,function(t,e){return t.doc.history.undoDepth=e}),e("historyEventDelay",1250),e("viewportMargin",10,function(t){return t.refresh()},!0),e("maxHighlightLength",1e4,zi,!0),e("moveInputWithCursor",!0,function(t,e){e||t.display.input.resetPosition()}),e("tabindex",null,function(t,e){return t.display.input.getField().tabIndex=e||""}),e("autofocus",null),e("direction","ltr",function(t,e){return t.doc.setDirection(e)},!0),e("phrases",null)}(jn),function(t){var e=t.optionHandlers,a=t.helpers={};t.prototype={constructor:t,focus:function(){window.focus(),this.display.input.focus()},setOption:function(t,a){var i=this.options,r=i[t];i[t]==a&&"mode"!=t||(i[t]=a,e.hasOwnProperty(t)&&Di(this,e[t])(this,a,r),E(this,"optionChange",this,t))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](dn(t))},removeKeyMap:function(t){for(var e=this.state.keyMaps,a=0;a<e.length;++a)if(e[a]==t||e[a].name==t)return e.splice(a,1),!0},addOverlay:vi(function(e,a){var i=e.token?e:t.getMode(this.options,e);if(i.startState)throw new Error("Overlays may not be stateful.");D(this.state.overlays,{mode:i,modeSpec:e,opaque:a&&a.opaque,priority:a&&a.priority||0},function(t){return t.priority}),this.state.modeGen++,Ma(this)}),removeOverlay:vi(function(t){for(var e=this.state.overlays,a=0;a<e.length;++a){var i=e[a].modeSpec;if(i==t||"string"==typeof t&&i.name==t)return e.splice(a,1),this.state.modeGen++,void Ma(this)}}),indentLine:vi(function(t,e,a){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),nt(this.doc,t)&&Jn(this,t,e,a)}),indentSelection:vi(function(t){for(var e=this.doc.sel.ranges,a=-1,i=0;i<e.length;i++){var r=e[i];if(r.empty())r.head.line>a&&(Jn(this,r.head.line,t,!0),a=r.head.line,i==this.doc.sel.primIndex&&qa(this));else{var n=r.from(),s=r.to(),o=Math.max(a,n.line);a=Math.min(this.lastLine(),s.line-(s.ch?0:1))+1;for(var h=o;h<a;++h)Jn(this,h,t);var l=this.doc.sel.ranges;0==n.ch&&e.length==l.length&&l[i].from().ch>0&&Dr(this.doc,i,new Fo(n,l[i].to()),Xs)}}}),getTokenAt:function(t,e){return It(this,t,e)},getLineTokens:function(t,e){return It(this,ot(t),e,!0)},getTokenTypeAt:function(t){t=mt(this.doc,t);var e,a=vt(this,$(this.doc,t.line)),i=0,r=(a.length-1)/2,n=t.ch;if(0==n)e=a[2];else for(;;){var s=i+r>>1;if((s?a[2*s-1]:0)>=n)r=s;else{if(!(a[2*s+1]<n)){e=a[2*s+2];break}i=s+1}}var o=e?e.indexOf("overlay "):-1;return o<0?e:0==o?null:e.slice(0,o-1)},getModeAt:function(e){var a=this.doc.mode;return a.innerMode?t.innerMode(a,this.getTokenAt(e).state).mode:a},getHelper:function(t,e){return this.getHelpers(t,e)[0]},getHelpers:function(t,e){var i=[];if(!a.hasOwnProperty(e))return i;var r=a[e],n=this.getModeAt(t);if("string"==typeof n[e])r[n[e]]&&i.push(r[n[e]]);else if(n[e])for(var s=0;s<n[e].length;s++){var o=r[n[e][s]];o&&i.push(o)}else n.helperType&&r[n.helperType]?i.push(r[n.helperType]):r[n.name]&&i.push(r[n.name]);for(var h=0;h<r._global.length;h++){var l=r._global[h];l.pred(n,this)&&-1==d(i,l.val)&&i.push(l.val)}return i},getStateAfter:function(t,e){var a=this.doc;return t=ft(a,null==t?a.first+a.size-1:t),gt(this,t+1,e).state},cursorCoords:function(t,e){var a,i=this.doc.sel.primary();return a=null==t?i.head:"object"==typeof t?mt(this.doc,t):t?i.from():i.to(),ha(this,a,e||"page")},charCoords:function(t,e){return oa(this,mt(this.doc,t),e||"page")},coordsChar:function(t,e){return t=sa(this,t,e||"page"),ca(this,t.left,t.top)},lineAtHeight:function(t,e){return t=sa(this,{top:t,left:0},e||"page").top,rt(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e,a){var i,r=!1;if("number"==typeof t){var n=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>n&&(t=n,r=!0),i=$(this.doc,t)}else i=t;return na(this,i,{top:0,left:0},e||"page",a||r).top+(r?this.doc.height-ae(i):0)},defaultTextHeight:function(){return va(this.display)},defaultCharWidth:function(){return ga(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,e,a,i,r){var n=this.display;t=ha(this,mt(this.doc,t));var s=t.bottom,o=t.left;if(e.style.position="absolute",e.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(e),n.sizer.appendChild(e),"over"==i)s=t.top;else if("above"==i||"near"==i){var h=Math.max(n.wrapper.clientHeight,this.doc.height),l=Math.max(n.sizer.clientWidth,n.lineSpace.clientWidth);("above"==i||t.bottom+e.offsetHeight>h)&&t.top>e.offsetHeight?s=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=h&&(s=t.bottom),o+e.offsetWidth>l&&(o=l-e.offsetWidth)}e.style.top=s+"px",e.style.left=e.style.right="","right"==r?(o=n.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==r?o=0:"middle"==r&&(o=(n.sizer.clientWidth-e.offsetWidth)/2),e.style.left=o+"px"),a&&ja(this,{left:o,top:s,right:o+e.offsetWidth,bottom:s+e.offsetHeight})},triggerOnKeyDown:vi(_n),triggerOnKeyPress:vi(Fn),triggerOnKeyUp:wn,triggerOnMouseDown:vi(An),execCommand:function(t){if(Xo.hasOwnProperty(t))return Xo[t].call(null,this)},triggerElectric:vi(function(t){$n(this,t)}),findPosH:function(t,e,a,i){var r=1;e<0&&(r=-1,e=-e);for(var n=mt(this.doc,t),s=0;s<e&&(n=is(this.doc,n,r,a,i),!n.hitSide);++s);return n},moveH:vi(function(t,e){var a=this;this.extendSelectionsBy(function(i){return a.display.shift||a.doc.extend||i.empty()?is(a.doc,i.head,t,e,a.options.rtlMoveVisually):t<0?i.from():i.to()},Ks)}),deleteH:vi(function(t,e){var a=this.doc.sel,i=this.doc;a.somethingSelected()?i.replaceSelection("",null,"+delete"):fn(this,function(a){var r=is(i,a.head,t,e,!1);return t<0?{from:r,to:a.head}:{from:a.head,to:r}})}),findPosV:function(t,e,a,i){var r=1,n=i;e<0&&(r=-1,e=-e);for(var s=mt(this.doc,t),o=0;o<e;++o){var h=ha(this,s,"div");if(null==n?n=h.left:h.left=n,s=rs(this,h,r,a),s.hitSide)break}return s},moveV:vi(function(t,e){var a=this,i=this.doc,r=[],n=!this.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy(function(s){if(n)return t<0?s.from():s.to();var o=ha(a,s.head,"div");null!=s.goalColumn&&(o.left=s.goalColumn),r.push(o.left);var h=rs(a,o,t,e);return"page"==e&&s==i.sel.primary()&&Ja(a,oa(a,h,"div").top-o.top),h},Ks),r.length)for(var s=0;s<i.sel.ranges.length;s++)i.sel.ranges[s].goalColumn=r[s]}),findWordAt:function(t){var e=this.doc,a=$(e,t.line).text,i=t.ch,r=t.ch;if(a){var n=this.getHelper(t,"wordChars");"before"!=t.sticky&&r!=a.length||!i?++r:--i;for(var s=a.charAt(i),o=T(s,n)?function(t){return T(t,n)}:/\s/.test(s)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!T(t)};i>0&&o(a.charAt(i-1));)--i;for(;r<a.length&&o(a.charAt(r));)++r}return new Fo(ot(t.line,i),ot(t.line,r))},toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?o(this.display.cursorDiv,"CodeMirror-overwrite"):ks(this.display.cursorDiv,"CodeMirror-overwrite"),E(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==s()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:vi(function(t,e){Za(this,t,e)}),getScrollInfo:function(){var t=this.display.scroller;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-Ye(this)-this.display.barHeight,width:t.scrollWidth-Ye(this)-this.display.barWidth,clientHeight:Ve(this),clientWidth:He(this)}},scrollIntoView:vi(function(t,e){null==t?(t={from:this.doc.sel.primary().head,to:null},null==e&&(e=this.options.cursorScrollMargin)):"number"==typeof t?t={from:ot(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=e||0,null!=t.from.line?Qa(this,t):ti(this,t.from,t.to,t.margin)}),setSize:vi(function(t,e){var a=this,i=function(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t};null!=t&&(this.display.wrapper.style.width=i(t)),null!=e&&(this.display.wrapper.style.height=i(e)),this.options.lineWrapping&&ta(this);var r=this.display.viewFrom;this.doc.iter(r,this.display.viewTo,function(t){if(t.widgets)for(var e=0;e<t.widgets.length;e++)if(t.widgets[e].noHScroll){_a(a,r,"widget");break}++r}),this.curOp.forceUpdate=!0,E(this,"refresh",this)}),operation:function(t){return pi(this,t)},startOperation:function(){return hi(this)},endOperation:function(){return li(this)},refresh:vi(function(){var t=this.display.cachedTextHeight;Ma(this),this.curOp.forceUpdate=!0,ea(this),Za(this,this.doc.scrollLeft,this.doc.scrollTop),wi(this.display),(null==t||Math.abs(t-va(this.display))>.5||this.options.lineWrapping)&&Ia(this),E(this,"refresh",this)}),swapDoc:vi(function(t){var e=this.doc;return e.cm=null,this.state.selectingText&&this.state.selectingText(),Qi(this,t),ea(this),this.display.input.reset(),Za(this,t.scrollLeft,t.scrollTop),this.curOp.forceScroll=!0,Se(this,"swapDoc",this,e),e}),phrase:function(t){var e=this.options.phrases;return e&&Object.prototype.hasOwnProperty.call(e,t)?e[t]:t},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},P(t),t.registerHelper=function(e,i,r){a.hasOwnProperty(e)||(a[e]=t[e]={_global:[]}),a[e][i]=r},t.registerGlobalHelper=function(e,i,r,n){t.registerHelper(e,i,n),a[e]._global.push({pred:r,val:n})}}(jn);var ih="iter insert remove copy getEditor constructor".split(" ");for(var rh in Ro.prototype)Ro.prototype.hasOwnProperty(rh)&&d(ih,rh)<0&&(jn.prototype[rh]=function(t){return function(){return t.apply(this.doc,arguments)}}(Ro.prototype[rh]));return P(Ro),jn.inputStyles={textarea:ah,contenteditable:eh},jn.defineMode=function(t){jn.defaults.mode||"null"==t||(jn.defaults.mode=t),U.apply(this,arguments)},jn.defineMIME=K,jn.defineMode("null",function(){return{token:function(t){return t.skipToEnd()}}}),jn.defineMIME("text/plain","null"),jn.defineExtension=function(t,e){jn.prototype[t]=e},jn.defineDocExtension=function(t,e){Ro.prototype[t]=e},jn.fromTextArea=cs,function(t){t.off=F,t.on=$s,t.wheelEventPixels=Bi,t.Doc=Ro,t.splitLines=eo,t.countColumn=c,t.findColumn=f,t.isWordChar=S,t.Pass=Ws,t.signal=E,t.Line=Co,t.changeEnd=Gi,t.scrollbarModel=xo,t.Pos=ot,t.cmpPos=ht,t.modes=no,t.mimeModes=so,t.resolveMode=j,t.getMode=z,t.modeExtensions=oo,t.extendMode=J,t.copyState=q,t.startState=Q,t.innerMode=Z,t.commands=Xo,t.keyMap=Wo,t.keyName=cn,t.isModifierKey=ln,t.lookupKey=hn,t.normalizeKeyMap=on,t.StringStream=ho,t.SharedTextMarker=Oo,t.TextMarker=No,t.LineWidget=Eo,t.e_preventDefault=R,t.e_stopPropagation=k,t.e_stop=Y,t.addClass=o,t.contains=n,t.rmClass=ks,t.keyNames=Yo}(jn),jn.version="5.62.3",jn})},,,,,,,,,,,,,,,,,,,,,,,,function(t,e,a){"use strict";var i=a(23);e.a={data:function(){return{tabsAry:[{Text:"首页(状态)",Link:"/home"},{Text:"设置",Link:"/setting"},{Text:"指标编辑",Link:"/indexEdit"},{Text:"策略编辑",Link:"/strategyEdit"},{Text:"策略运行",Link:"/strategyRun"},{Text:"自定义股票池",Link:"/customStockPool"}],activeIndex:0,isShowBottomWrap:!0}},mounted:function(){var t=this;if(i.b("activeIndex")){this.activeIndex=parseInt(i.b("activeIndex"));var e=this.tabsAry[this.activeIndex].Link;this.$router.replace(e)}"/home"===this.$route.path?(this.isShowBottomWrap=!1,this.$nextTick(function(){t.$refs.content.style.height=window.innerHeight-44+"px"})):(this.isShowBottomWrap=!0,this.$nextTick(function(){t.$refs.content.style.height=window.innerHeight-44-30+"px"}))},updated:function(){var t=this;"/home"===this.$route.path?(this.isShowBottomWrap=!1,this.$nextTick(function(){t.$refs.content.style.height=window.innerHeight-44+"px"})):(this.isShowBottomWrap=!0,this.$nextTick(function(){t.$refs.content.style.height=window.innerHeight-44-30+"px"}))},methods:{changeTab:function(t,e){this.activeIndex=t,i.d("activeIndex",this.activeIndex),this.$router.replace(e.Link)}}}},function(t,e,a){"use strict";function i(t){return window.btoa(t)}function r(t){return window.atob(t)}var n=a(8),s=a(26),o=a(23),h=a(53),l=a.n(h);e.a={name:"Home",data:function(){return{form:{accout:"",psw:"",isSelectedAgreement:!1},loginRules:{accout:[{required:!0,message:"账号不能为空",trigger:"blur"}],psw:[{required:!0,message:"密码不能为空",trigger:"blur"}]},registerForm:{phone:"",code:"",psw:"",isSelectedAgreement:!0},registerRules:{phone:[{required:!0,message:"手机号不能为空",trigger:"blur"}],code:[{required:!0,message:"验证码不能为空",trigger:"blur"}],psw:[{required:!0,message:"密码不能为空",trigger:"blur"}]},baseInfo:{host:"",port:0,version:"",plateVersion:""},loading:!1,dataSyncStatus:["未同步","同步中","同步完成","同步失败"],dataLoadStatus:["未加载","加载中","加载完成","加载失败"],dataStatusAry:[],dialogVisible:!1,isLogin:!1,isSelectedAgreement:!0,statusTimer:null,syncAry:[],hasStatusData:!1}},mounted:function(){if(this.isLogin=!!Object(o.b)("token"),!this.isLogin){var t=localStorage.getItem("account")?JSON.parse(localStorage.getItem("account")):null;t&&(this.form.accout=t.UserId,this.form.psw=r(t.Password))}this.loading=!0,s.a.getBaseInfo(this),s.a.getDataStatus(this)},methods:{seeAgreementFun:function(t){switch(t){case"one":window.open("./privacyStatement.html","_blank");break;case"two":window.open("./userAgreement.html","_blank")}},loginBtnFun:function(){if(this.isLogin)this.exit();else{if(!this.form.isSelectedAgreement)return void this.$message("请阅读并同意隐私政策与用户服务协议");this.onSubmit("form",this.goLogin)}},exit:function(){Object(o.a)("token"),this.isLogin=!1},onSubmit:function(t,e){this.$refs[t].validate(function(t){if(!t)return!1;e()})},goLogin:function(){var t=this,e={UserId:this.form.accout,Password:i(this.form.psw)};l.a.post(n.a.apiLogin,e).then(function(e){e=e.data,0===e.code?(t.isLogin=!0,Object(o.d)("token",e.token),localStorage.setItem("account",JSON.stringify({UserId:t.form.accout,Password:i(t.form.psw)})),e.message||t.$message("登录成功")):t.$message.error(e.message)}).catch(function(e){return t.$message.error(e.message)})},synchronizationFun:function(t){if(1===t.syncStatus)return void this.$message(this.dataSyncStatus[t.syncStatus]);var e={type:t.type};s.a.dataSync(e,this,t)},loadingFun:function(t){if(1===t.loadStatus)return void this.$message(this.dataLoadStatus[t.loadStatus]);var e={type:t.type};s.a.apiDataLoad(e,this,t)},goToDetailData:function(t){var e=t.type;window.open("./detailData.html?type="+e)},getCode:function(){var t=this,e={Phone:this.registerForm.phone,Type:10};l.a.post(n.a.apiGetVerificationCode,e).then(function(e){e=e.data,0===e.code?t.$message(e.message):t.$message.error(e.message)}).catch(function(e){return t.$message.error(e.message)})},goRegister:function(){var t=this;if(!this.registerForm.isSelectedAgreement)return void this.$message("请阅读并同意隐私政策与用户服务协议");var e={Phone:this.registerForm.phone,Password:i(this.registerForm.psw),VerificationCode:this.registerForm.code};l.a.post(n.a.apiRegister,e).then(function(e){t.dialogVisible=!1,e=e.data,0===e.code?t.$message(e.message):t.$message.error(e.message)}).catch(function(e){return t.$message.error(e.message)})}}}},function(t,e,a){"use strict";var i=a(413),r=a(26);e.a={components:{FilePath:i.a},name:"Setting",data:function(){return{form:[]}},mounted:function(){r.a.getHqchartConfig(this)},methods:{getDatapath:function(t,e){this.form[e].dataPath=t},onSubmit:function(){r.a.saveHqchartConfig(this.form,this)},formatpath:function(t){return t.replace(/\\/g,"\\")}}}},function(t,e,a){"use strict";e.a={props:["domId","index"],mounted:function(){var t=this,e=this;this.$nextTick(function(){document.getElementById(""+t.domId).addEventListener("change",function(){e.getvl(this)},!1)})},methods:{readFileFirefox:function(t){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(t){return void alert('无法访问本地文件，由于浏览器安全设置。为了克服这一点，请按照下列步骤操作：(1)在地址栏输入"about:config";(2) 右键点击并选择 New->Boolean; (3) 输入"signed.applets.codebase_principal_support" （不含引号）作为一个新的首选项的名称;(4) 点击OK并试着重新加载文件')}var e=t.value,a=Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);try{a.initWithPath(e.replace(/\//g,"\\\\"))}catch(t){if(t.result!=Components.results.NS_ERROR_FILE_UNRECOGNIZED_PATH)throw t;return void alert("File '"+e+"' cannot be loaded: relative paths are not allowed. Please provide an absolute path to this file.")}return 0==a.exists()?void alert("File '"+e+"' not found."):a.path},getvl:function(t){var e,a={},i=navigator.userAgent.toLowerCase();i.indexOf("trident")>-1||i.indexOf("msie")>-1?a.ie=11:(e=i.match(/firefox\/([\d.]+)/))?a.firefox=e[1]:(e=i.match(/chrome\/([\d.]+)/))?a.chrome=e[1]:(e=i.match(/opera.([\d.]+)/))?a.opera=e[1]:(e=i.match(/version\/([\d.]+).*safari/))&&(a.safari=e[1]);var r="";a.ie<="6.0"?r=t.value:a.ie>="7.0"?r=t.value:a.firefox?r=this.readFileFirefox(t):a.chrome&&(r=t.value),this.$emit("getpath",r,index)}}}},function(t,e,a){"use strict";function i(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function r(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function n(){}var s=a(421),o=a.n(s),h=a(467),l=(a.n(h),a(469)),u=(a.n(l),a(474)),c=a(14),d=(a.n(c),a(26)),f=a(478),m=(a.n(f),a(479)),C=(a.n(m),a(481)),p=(a.n(C),a(482)),D=(a.n(p),a(8)),v=a(483),g=a(0),S=a.n(g),T=(a(23),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t}),y=o.a.Chart.JSChart;n.GetListData=function(){for(var t=[],e=0;e<3;++e){var a=n.GetListItem();t.push(a)}return t},n.GetListItem=function(){return{id:-1,delete:!1,strategyId:-1,name:{isEdit:!1,value:""},min:{isEdit:!1,value:""},max:{isEdit:!1,value:""},value:{isEdit:!1,value:""}}},n.getKlineOption=function(){return{Type:"历史K线图",Windows:[{Index:"MA",Modify:!1,Change:!1},{Index:"VOL",Modify:!1,Change:!1}],Symbol:"600000.sh",IsApiPeriod:!0,IsAutoUpdate:!1,IsShowRightMenu:!0,IsShowCorssCursorInfo:!0,KLine:{DragMode:1,Right:0,Period:0,MaxReqeustDataCount:1e3,PageSize:50,IsShowTooltip:!0},KLineTitle:{IsShowName:!0,IsShowSettingInfo:!0},Border:{Left:1,Right:50,Bottom:25,Top:25},Frame:[{SplitCount:3,StringFormat:0,IsShowLeftText:!1},{SplitCount:2,StringFormat:0,IsShowLeftText:!1},{SplitCount:2,StringFormat:0,IsShowLeftText:!1}]}},e.a={name:"IndexEdit",data:function(){return{defaultActiveIndex:"AAA-1",loading:!1,editableTabsValue:"0",editableTabs:[],tabIndex:0,CurrentList:[],CurrentCode:"",CMOptions:{tabSize:4,mode:"text/javascript",lineNumbers:!0,line:!0},ScriptIndexList:[],isCheckTab:!1,dialogVisible:!1,inputValue:{name:"浦发银行",symbol:"600000.sh",type:"EQA"},searchLoading:!1,resultOptions:[],isMainIndex:!1,kLineChart:{Option:n.getKlineOption(),Chart:null,Period:{Text:"日线",Value:0,Period:0,noRightData:!1,dateType:null},Right:{Text:"不复权",Value:0},isChangeRight:!1},paginationObj:{total:1,PageSize:30,PageIndex:1},PeroidOptions:[{Text:"日线",Value:0},{Text:"周线",Value:1},{Text:"月线",Value:2},{Text:"季线",Value:9},{Text:"年线",Value:3},{Text:"1分钟",Value:4},{Text:"5分钟",Value:5},{Text:"15分钟",Value:6},{Text:"30分钟",Value:7},{Text:"60分钟",Value:8}],dataNumOptions:[{label:"一周",value:7},{label:"一月",value:30},{label:"3月",value:90},{label:"半年",value:180},{label:"1年",value:365},{label:"3年",value:1095},{label:"6年",value:2190},{label:"全部",value:1e4}],dataNumOptionsMinute:[{label:"1天",value:1},{label:"2天",value:2},{label:"3天",value:3},{label:"4天",value:4},{label:"5天",value:5},{label:"半个月",value:15},{label:"1个月",value:30},{label:"3个月",value:90},{label:"全部",value:1e4}],filterDataNumOptions:[],dataNum:180,rightsOptionsDisabled:!1,RightOptions:["不复权","前复权","后复权(简单)","后复权(完成)"],headerList:[],tableData:[],pageTableData:[],indexDataLoading:!1,timer:null,isCodeHasError:!1,oprType:"",storageIndexLists:[],explainArguments:[],activeName:"first"}},components:{codemirror:f.codemirror,CategoryList:u.a},watch:{"kLineChart.Period":function(t){var e=t.Value;4===e||5===e||6===e||7===e||8===e?(this.rightsOptionsDisabled=!0,this.kLineChart.Right.Text="不复权",this.kLineChart.Right.Value=0,this.filterDataNumOptions=[].concat(r(this.dataNumOptionsMinute)),this.dataNum=4):(this.rightsOptionsDisabled=!1,this.filterDataNumOptions=[].concat(r(this.dataNumOptions)),this.dataNum=180)}},computed:{filterCurrentList:function(){return this.CurrentList.filter(function(t){return!t.delete})}},mounted:function(){var t=this,e=this.inputValue.name;this.remoteMethod(e),this.filterDataNumOptions=[].concat(r(this.dataNumOptions)),this.dataNum=180,this.kLineChart.Period=T({},this.PeroidOptions[0]),this.storageIndexLists=localStorage.getItem("st_index_lists")?JSON.parse(localStorage.getItem("st_index_lists")):[],window.onresize=Object(c.debounce)(function(){t.kLineChart.Chart&&t.kLineChart.Chart.OnSize()},1e3)},methods:{remoteMethod:function(t){var e=this;""!==t?(this.searchLoading=!0,D.a.post(D.a.apiStockSearch,{key:t},function(t){e.searchLoading=!1,e.resultOptions=t.data})):this.resultOptions=[]},closeKlineDialog:function(){this.kLineChart.Chart&&(this.kLineChart.Chart.ChartDestory(),this.kLineChart.Chart=null),this.ClearDivDOM()},ClearDivDOM:function(){for(var t=this.$refs.kline;t.hasChildNodes();)t.removeChild(t.lastChild)},currentChange:function(t){var e=this;this.paginationObj.PageIndex=t;var a=(this.paginationObj.PageIndex-1)*this.paginationObj.PageSize,i=this.paginationObj.PageIndex*this.paginationObj.PageSize>this.paginationObj.total?this.paginationObj.total:this.paginationObj.PageIndex*this.paginationObj.PageSize;this.pageTableData=this.tableData.slice(a,i),this.$nextTick(function(){e.$refs.klineDataTable.bodyWrapper.scrollTop=0})},handleResultClick:function(t,e){},changePeriod:function(t){this.kLineChart.Period=t,t.noRightData?(this.kLineChart.isChangeRight=!0,this.kLineChart.Right.Text="不复权",this.kLineChart.Right.Value=0):this.kLineChart.isChangeRight=!1},changeRight:function(t){var e=this.RightOptions[t];this.kLineChart.Right.Text=e,this.kLineChart.Right.Value=t},createKlineChart:function(t,e){console.log("createKlineChart"),this.kLineChart.Chart=y.Init(this.$refs.kline),this.OnSize(),this.kLineChart.Option.KLine.Period=e.Period,this.kLineChart.Option.KLine.Right=e.Right,this.kLineChart.Option.Symbol=this.inputValue.symbol,this.kLineChart.Option.NetworkFilter=this.NetworkFilter,this.kLineChart.Option.Windows.splice(1,1,t),this.kLineChart.Chart.SetOption(this.kLineChart.Option)},indexRun:function(t){var e=this;this.dialogVisible=!0,this.activeName="first",this.$nextTick(function(){var a=e.editableTabs[e.editableTabsValue-1].title,r={API:{Name:a,Script:t.Script,Args:t.Args,Url:D.a.apiRun,Version:2},Window:i({Close:!1,Change:!1,Overlay:!0},"Close",!0)};null===e.kLineChart.Chart&&e.createKlineChart(r,t)})},OnSize:function(){var t=this.$refs.kline,e=.6*window.innerWidth-40;t.style.width=e+"px",t.style.height="600px",console.log("宽高：",e),this.kLineChart.Chart&&this.kLineChart.Chart.OnSize()},changeStrategyName:function(t,e){var a=Object(c.find)(this.editableTabs,function(e){return e.category.categoryid===t}),i=Object(c.findIndex)(this.editableTabs,function(e){return e.category.categoryid===t});if(!a)return!1;a.title=e,this.editableTabs.splice(i,1,a)},deleteStrategy:function(t){var e=Object(c.find)(this.editableTabs,function(e){return e.category.categoryid===t});if(!e)return!1;var a=e.name;this.removeTab(a)},changeCategory:function(t,e,a){this.isCheckTab="elTab"===a,this.isCheckTab||(this.loading=!0,d.a.queryOneStrategyDetail(t,this.getStrategyDetail))},getStrategyDetail:function(t,e){this.loading=!1,t.args=e.data.args?e.data.args:[],t.script=e.data.script;var a=[];if(t.args.length>=3)a=t.args.map(function(t){var e=n.GetListItem();return e.id=t.id,e.strategyId=t.strategyId,e.name.value=t.name,e.min.value=t.minVal,e.max.value=t.maxVal,e.value.value=t.defaultVal,e});else{a=n.GetListData();for(var i=0;i<t.args.length;i++){var r=a[i],s=t.args[i];r.id=s.id,r.strategyId=s.strategyId,r.name.value=s.name,r.min.value=s.minVal,r.max.value=s.maxVal,r.value.value=s.defaultVal}}var o=Object(c.findIndex)(this.editableTabs,function(e){return e.category.categoryid===t.categoryid});-1===o?this.addTab(this.editableTabsValue,t,a):this.editableTabsValue=this.editableTabs[o].name,this.CurrentList=a,this.CurrentCode=t.script},NetworkFilter:function(t,e){switch(console.log("[NetworkFilter] data",t),t.Name){case"APIScriptIndex::ExecuteScript":this.ExecuteScript(t,e);break;case"KLineChartContainer::RequestHistoryData":this.RequestHistoryData(t,e);break;case"KLineChartContainer::RequestFlowCapitalData":this.RequestFlowCapitalData(t,e);break;case"KLineChartContainer::ReqeustHistoryMinuteData":this.GetHistoryMinuteData(t,e)}},GetHistoryMinuteData:function(t,e){var a=this;t.PreventDefault=!0;var i=t.Request.Data.symbol,r=t.Request.Data.period,n=t.Request.Data.right,s=(t.Self.MaxReqeustDataCount,D.a.apiMinuteKLine),o=this.getRunDateRange(),h=o.StartDate,l=o.EndDate,u={Right:n,Period:r,Symbol:i,StartDate:h,EndDate:l};D.a.post(s,u,function(i){a.RecvMinuteHistoryData(i,t,e)})},RecvMinuteHistoryData:function(t,e,a){0===t.data.length&&this.$message("暂无该时间段数据");var i=t;console.log("[KLineChart::RecvHistoryMinuteData] hqChartData",i),a(i)},ExecuteScript:function(t,e){var a=this;t.PreventDefault=!0;var i=t.Request.Data.symbol,r=t.Request.Data.period,n=t.Request.Data.right,s=t.Request.Data.script,o=t.Request.Data.args,h=D.a.apiRun,l={Symbol:i,Script:s,Period:r,Right:n,Args:[]};if(o&&Array.isArray(o))for(var u=0;u<o.length;++u){var c=o[u];l.Args.push({Name:c.name,Value:c.value})}var d=this.getRunDateRange();d.StartDate&&d.EndDate&&(l.StartDate=d.StartDate,l.EndDate=d.EndDate),D.a.post(h,l,function(t){a.RecvExecuteScript(t,e,r)})},RecvExecuteScript:function(t,e,a){var i=this;if(0!=t.Code)return void this.$message.error(t.Error);var r=a>3,n=t.OutVar.filter(function(t){return 0===t.Type&&t.Data});t.OutVar=n,this.headerList=n.map(function(t,e){return{prop:t.Name,label:t.Name,width:e===n.length-1?"":"180",align:"right"}}),r&&this.headerList.unshift({prop:"Time",label:"时间",width:"180",align:"left"}),this.headerList.unshift({prop:"Date",label:"日期",width:"180",align:"left"});var s=r?["Date","Time"]:["Date"];n.forEach(function(t){s.push(t.Name)}),this.tableData.splice(0,this.tableData.length),t.Date.forEach(function(e,a){var o={};s.forEach(function(e){o[e]=r?"Date"===e?t.Date[a]:"Time"===e?v.a.FormatTimeString(t.Time[a]):Object(c.find)(n,{Name:e}).Data[a]?Number(Object(c.find)(n,{Name:e}).Data[a]).toFixed(2):"--":"Date"===e?t.Date[a]:Object(c.find)(n,{Name:e}).Data[a]?Number(Object(c.find)(n,{Name:e}).Data[a]).toFixed(2):"--"}),i.tableData.push(o)}),this.tableData=this.tableData.reverse(),this.paginationObj.total=this.tableData.length;var o=(this.paginationObj.PageIndex-1)*this.paginationObj.PageSize,h=this.paginationObj.PageIndex*this.paginationObj.PageSize>this.paginationObj.total?this.paginationObj.total:this.paginationObj.PageIndex*this.paginationObj.PageSize;this.pageTableData=this.tableData.slice(o,h),console.log("[NetworkFilter::RecvExecuteScript] data ",t),e(t)},RequestHistoryData:function(t,e){var a=this;t.PreventDefault=!0;var i=t.Request.Data.symbol,r=t.Request.Data.period,n=t.Request.Data.right,s=(t.Self.MaxReqeustDataCount,D.a.apiDayKLine),o=this.getRunDateRange(),h=o.StartDate,l=o.EndDate,u={Right:n,Period:r,Symbol:i,StartDate:h,EndDate:l};D.a.post(s,u,function(i){a.RecvHistoryData(i,t,e)})},getRunDateRange:function(){var t=parseInt(S()().format("YYYYMMDD")),e=this.dataNum;return{StartDate:parseInt(S()().subtract(e,"days").format("YYYYMMDD")),EndDate:t}},RecvHistoryData:function(t,e,a){0===t.data.length&&this.$message("暂无该时间段数据");var i=t;console.log("[KLineChart::RecvHistoryData] hqChartData",i),a(i)},RequestFlowCapitalData:function(t,e){t.PreventDefault=!0,e({code:0,stock:[]})},exec:function(){var t=this.filterCurrentList.filter(function(t){return""!==t.name.value});t=t.map(function(t){return{Name:t.name.value,Value:Number(t.value.value)}});var e={Symbol:this.inputValue.symbol,Script:this.CurrentCode,Period:this.kLineChart.Period.Value,Right:this.kLineChart.Right.Value,Args:t};this.indexRun(e)},beforeExecCheck:function(){if(""===this.CurrentCode)return this.$message("请填写指标脚本"),!1;if("exec"===this.oprType&&this.inputValue.symbol.length<9)return this.$message("请输入完整的股票代码"),!1;var t=!1;return this.CurrentList.forEach(function(e){if(e.name.value&&!e.value.value||!e.name.value&&e.value.value)return void(t=!0)}),!t||(this.$message("请将参数填写完整"),!1)},preExecOrSave:function(t){this.oprType=t,this.beforeExecCheck()&&this.explainScript(this.CurrentCode)},checkArgDelete:function(t){return!!t.delete||!(!t.id||t.name.value||t.value.value)},getNewArgsForApi:function(t){for(var e=[],a=0;a<this.CurrentList.length;a++){var i=this.CurrentList[a],r={defaultVal:parseInt(i.value.value),id:i.id>-1?i.id:void 0,maxVal:""==i.max.value?null:parseInt(i.max.value),minVal:""==i.min.value?null:parseInt(i.min.value),name:i.name.value,strategyId:t.categoryid,delete:this.checkArgDelete(i)};e.push(r)}return e},save:function(){var t=Object(c.find)(this.editableTabs,{name:this.editableTabsValue}),e=t.category,a={args:[],script:""};a.args=this.getNewArgsForApi(e),a.script=this.CurrentCode,this.updateOneStrategy(e,a,this,null,this.explainArguments)},updateOneStrategy:function(t,e,a,i,r){var n=this,s=!1;a&&a.text&&t.name!==a.text&&(s=!0);var o={outArgs:r||[],args:e&&e.args?e.args:t.args,description:"",floatPrecision:"0",id:t.categoryid,isMainIndex:!1,name:a&&a.text?a.text:t.name,script:e&&e.script?e.script:t.script};D.a.post(""+D.a.apiStrategyOpr+t.categoryid,o,function(e){if(200===e.code){o.args=e.data.args;var r=Object(c.findIndex)(n.storageIndexLists,{id:o.id});-1===r?n.storageIndexLists.push(o):n.storageIndexLists.splice(r,1,o),localStorage.setItem("st_index_lists",JSON.stringify(n.storageIndexLists)),t.name=e.data.name,t.args=e.data.args,t.script=e.data.script,t.editing=!1,s&&"category-wrap"===a.$el.className&&a.$emit("changeStrategyName",t.categoryid,a.text),a&&a.sending&&(a.sending=!1),a&&a.text&&(a.text=""),i&&i([t.groupId,t.categoryid]),a.$message("修改成功"),n.getCurrentList(e.data.args)}else a.$message("修改失败")})},getCurrentList:function(t){var e=[];if(t.length<=3){e=n.GetListData();for(var a=0;a<t.length;a++){var i=e[a],r=t[a];i.id=r.id,i.strategyId=r.strategyId,i.name.value=r.name,i.min.value=r.minVal,i.max.value=r.maxVal,i.value.value=r.defaultVal}}else for(var s=0;s<t.length;s++){var o=t[s];e.push({id:o.id,strategyId:o.strategyId,name:{value:o.name},min:{value:o.minVal},max:{value:o.maxVal},value:{value:o.defaultVal},delete:!1})}this.CurrentList=e},addRow:function(){var t=n.GetListItem();this.CurrentList.push(t)},explainScript:function(t){var e=o.a.Chart.JSComplier,a=this.filterCurrentList.filter(function(t){return""!==t.name.value}),i=a.map(function(t){return{Name:t.name.value,Value:t.value.value}}),r={Arguments:i,Callback:this.explainScriptCallback};e.Explain(t,r,this.explainScriptErrorCallback)},explainScriptCallback:function(t){console.log("[Explain] data ",t);var e=t.filter(function(t){return 0===t.Type&&!1!==t.IsOut});this.explainArguments=e.map(function(t){return t.Name});for(var a in t){t[a]}switch(console.log("语法正确"),this.isCodeHasError=!1,this.oprType){case"exec":this.exec();break;case"save":this.save()}},explainScriptErrorCallback:function(t,e){console.log("[Explain] error, data ",t,e),this.$message.error("语法错误: 行号:"+t.LineNumber+", "+t.Description),this.isCodeHasError=!0},deleteRow:function(t){var e=this.CurrentList[t];e.delete=!0,this.CurrentList.splice(t,1,e)},addTab:function(t,e,a){var i=++this.tabIndex+"";this.editableTabs.push({title:e.name,name:i,list:a,code:e.script,category:e}),this.editableTabsValue=i},handleTabClick:function(t,e){this.isCheckTab=!0;var a=t.paneName,i=Object(c.find)(this.editableTabs,function(t){return t.name===a});this.CurrentList=i.list,this.CurrentCode=i.code,this.$refs.categorylist.checkCategory([i.category.groupId,i.category.categoryid],"elTab")},removeTab:function(t){var e=this,a=this.editableTabs,i=this.editableTabsValue;if(i===t&&a.forEach(function(e,r){if(e.name===t){var n=a[r+1]||a[r-1];n&&(i=n.name)}}),this.editableTabsValue=i,this.editableTabs=a.filter(function(e){return e.name!==t}),this.editableTabs.length>0){var r=Object(c.find)(this.editableTabs,function(t){return t.name===e.editableTabsValue});this.CurrentList=r.list,this.CurrentCode=r.code,this.$refs.categorylist.checkCategory([r.category.groupId,r.category.categoryid],"elTab")}else this.$refs.categorylist.checkCategory()}}}},function(t,e,a){"use strict";e.__esModule=!0;var i=a(423),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t,e,a){return e in t?(0,r.default)(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},function(t,e,a){var i=a(19);t.exports=function(t,e,a,r){try{return r?e(i(a)[0],a[1]):e(a)}catch(e){var n=t.return;throw void 0!==n&&i(n.call(t)),e}}},function(t,e,a){var i=a(48),r=a(11)("iterator"),n=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||n[r]===t)}},function(t,e,a){var i=a(19),r=a(42),n=a(11)("species");t.exports=function(t,e){var a,s=i(t).constructor;return void 0===s||void 0==(a=i(s)[n])?e:r(a)}},function(t,e,a){var i,r,n,s=a(20),o=a(429),h=a(138),l=a(100),u=a(10),c=u.process,d=u.setImmediate,f=u.clearImmediate,m=u.MessageChannel,C=u.Dispatch,p=0,D={},v=function(){var t=+this;if(D.hasOwnProperty(t)){var e=D[t];delete D[t],e()}},g=function(t){v.call(t.data)};d&&f||(d=function(t){for(var e=[],a=1;arguments.length>a;)e.push(arguments[a++]);return D[++p]=function(){o("function"==typeof t?t:Function(t),e)},i(p),p},f=function(t){delete D[t]},"process"==a(44)(c)?i=function(t){c.nextTick(s(v,t,1))}:C&&C.now?i=function(t){C.now(s(v,t,1))}:m?(r=new m,n=r.port2,r.port1.onmessage=g,i=s(n.postMessage,n,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(i=function(t){u.postMessage(t+"","*")},u.addEventListener("message",g,!1)):i="onreadystatechange"in l("script")?function(t){h.appendChild(l("script")).onreadystatechange=function(){h.removeChild(this),v.call(t)}}:function(t){setTimeout(s(v,t,1),0)}),t.exports={set:d,clear:f}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,a){var i=a(19),r=a(17),n=a(117);t.exports=function(t,e){if(i(t),r(e)&&e.constructor===t)return e;var a=n.f(t);return(0,a.resolve)(e),a.promise}},function(t,e,a){"use strict";var i=a(10),r=a(6),n=a(15),s=a(13),o=a(11)("species");t.exports=function(t){var e="function"==typeof r[t]?r[t]:i[t];s&&e&&!e[o]&&n.f(e,o,{configurable:!0,get:function(){return this}})}},function(t,e,a){var i=a(11)("iterator"),r=!1;try{var n=[7][i]();n.return=function(){r=!0},Array.from(n,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var a=!1;try{var n=[7],s=n[i]();s.next=function(){return{done:a=!0}},n[i]=function(){return s},t(n)}catch(t){}return a}},function(t,e,a){t.exports={default:a(447),__esModule:!0}},function(t,e,a){t.exports={default:a(449),__esModule:!0}},function(t,e,a){"use strict";var i=a(15).f,r=a(62),n=a(118),s=a(20),o=a(115),h=a(51),l=a(109),u=a(139),c=a(158),d=a(13),f=a(111).fastKey,m=a(119),C=d?"_s":"size",p=function(t,e){var a,i=f(e);if("F"!==i)return t._i[i];for(a=t._f;a;a=a.n)if(a.k==e)return a};t.exports={getConstructor:function(t,e,a,l){var u=t(function(t,i){o(t,u,e,"_i"),t._t=e,t._i=r(null),t._f=void 0,t._l=void 0,t[C]=0,void 0!=i&&h(i,a,t[l],t)});return n(u.prototype,{clear:function(){for(var t=m(this,e),a=t._i,i=t._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete a[i.i];t._f=t._l=void 0,t[C]=0},delete:function(t){var a=m(this,e),i=p(a,t);if(i){var r=i.n,n=i.p;delete a._i[i.i],i.r=!0,n&&(n.n=r),r&&(r.p=n),a._f==i&&(a._f=r),a._l==i&&(a._l=n),a[C]--}return!!i},forEach:function(t){m(this,e);for(var a,i=s(t,arguments.length>1?arguments[1]:void 0,3);a=a?a.n:this._f;)for(i(a.v,a.k,this);a&&a.r;)a=a.p},has:function(t){return!!p(m(this,e),t)}}),d&&i(u.prototype,"size",{get:function(){return m(this,e)[C]}}),u},def:function(t,e,a){var i,r,n=p(t,e);return n?n.v=a:(t._l=n={i:r=f(e,!0),k:e,v:a,p:i=t._l,n:void 0,r:!1},t._f||(t._f=n),i&&(i.n=n),t[C]++,"F"!==r&&(t._i[r]=n)),t},getEntry:p,setStrong:function(t,e,a){l(t,e,function(t,a){this._t=m(t,e),this._k=a,this._l=void 0},function(){for(var t=this,e=t._k,a=t._l;a&&a.r;)a=a.p;return t._t&&(t._l=a=a?a.n:t._t._f)?"keys"==e?u(0,a.k):"values"==e?u(0,a.v):u(0,[a.k,a.v]):(t._t=void 0,u(1))},a?"entries":"values",!a,!0),c(e)}}},function(t,e,a){"use strict";var i=a(10),r=a(9),n=a(111),s=a(29),o=a(21),h=a(118),l=a(51),u=a(115),c=a(17),d=a(49),f=a(15).f,m=a(451)(0),C=a(13);t.exports=function(t,e,a,p,D,v){var g=i[t],S=g,T=D?"set":"add",y=S&&S.prototype,I={};return C&&"function"==typeof S&&(v||y.forEach&&!s(function(){(new S).entries().next()}))?(S=e(function(e,a){u(e,S,t,"_c"),e._c=new g,void 0!=a&&l(a,D,e[T],e)}),m("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in y&&(!v||"clear"!=t)&&o(S.prototype,t,function(a,i){if(u(this,S,t),!e&&v&&!c(a))return"get"==t&&void 0;var r=this._c[t](0===a?0:a,i);return e?this:r})}),v||f(S.prototype,"size",{get:function(){return this._c.size}})):(S=p.getConstructor(e,t,D,T),h(S.prototype,a),n.NEED=!0),d(S,t),I[t]=S,r(r.G+r.W+r.F,I),v||p.setStrong(S,t,D),S}},function(t,e,a){var i=a(114),r=a(455);t.exports=function(t){return function(){if(i(this)!=t)throw TypeError(t+"#toJSON isn't generic");return r(this)}}},function(t,e,a){"use strict";var i=a(9);t.exports=function(t){i(i.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,a){"use strict";var i=a(9),r=a(42),n=a(20),s=a(51);t.exports=function(t){i(i.S,t,{from:function(t){var e,a,i,o,h=arguments[1];return r(this),e=void 0!==h,e&&r(h),void 0==t?new this:(a=[],e?(i=0,o=n(h,arguments[2],2),s(t,!1,function(t){a.push(o(t,i++))})):s(t,!1,a.push,a),new this(a))}})}},function(t,e,a){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function r(){}var n=a(14),s=(a.n(n),a(8)),o=a(26),h=this;r.getListParentItem=function(){return{opened:!1,children:[],ishaschildren:!1,isSelected:!1,categoryid:"",name:"",isdelete:!0,editing:!1,creating:!1}},r.getListSubItem=function(){return h.isStrategyComp?{isSelected:!1,editing:!1,creating:!1,isdelete:!0,categoryid:"",name:""}:{isSelected:!1,editing:!1,creating:!1,isdelete:!0,categoryid:"",groupId:-1,name:"",args:[],description:"",floatPrecision:"",isMainIndex:!1,script:""}},r.getArgItem=function(){return{defaultVal:"",id:-1,maxVal:"",minVal:"",name:"",strategyId:-1,delete:!1}},e.a={name:"CategoryList",props:["parentCompName"],data:function(){return{userid:"",permission:!0,pageType:"",categoryList:[],currentOperateCategoryId:[],currentSelectCategoryId:[],showRightMenu:!1,showDelateButton:!1,sending:!1,showSubCategory:!1,sameLevelChildOprTitle:"新建同级节点",nextLevelChildOprTitle:"新建下级节点",createType:"",text:"",currentMousePosition:{x:0,y:0},loading:!1,isShowNoCategory:!1,isStrategyComp:!1}},created:function(){"strategyEdit"===this.parentCompName&&(this.isStrategyComp=!0),this.loading=!0,this.updataCategroy()},mounted:function(){var t=this;document.getElementById("categoryWrap").addEventListener("click",function(e){e.target!=document.getElementById("J-edit-input")&&t.submit()},!0)},methods:{addFirstGroup:function(){var t=r.getListParentItem();this.categoryList.push(t);var e=this.categoryList[this.categoryList.length-1];o.a.addOneGroup(e,this)},changeCategory:function(t,e,a){null!=t&&this.$emit("changeCategory",t,e,a)},toggleShow:function(t){var e=t.opened;this.$set(t,"opened",!e)},getCategoryId:function(t){var e;if("operate"==t)e=this.currentOperateCategoryId;else{if("select"!=t)return!1;e=this.currentSelectCategoryId}return e[e.length-1]},getCategory:function(t){var e,a=this,i={},r=!1;if("operate"==t)e=this.currentOperateCategoryId;else{if("select"!=t)return!1;e=this.currentSelectCategoryId}return e.forEach(function(t){var e=void 0;r?e=i.children:(e=a.categoryList,r=!0),i=Object(n.find)(e,{categoryid:t})}),i},getCurrentCategoryParent:function(){return 1==this.currentOperateCategoryId.length?this.categoryList:2==this.currentOperateCategoryId.length?Object(n.find)(this.categoryList,{categoryid:this.currentOperateCategoryId[0]}):void 0},checkCategory:function(t,e){var a=this.getCategoryId("select"),i=this.getCategory("select");if(!t)return i&&this.$set(i,"isSelected",!1),void this.changeCategory(null);this.currentSelectCategoryId=t;var r=this.getCategoryId("select"),n=this.getCategory("select");if(r){if(n.isSelected)return;a&&i&&this.$set(i,"isSelected",!1),this.$set(n,"isSelected",!0)}this.changeCategory(n,r,e)},addCategory:function(t){var e=this.getCategory("operate"),a=this.getCurrentCategoryParent();if(this.createType=t,"brother"==t){var i=null;2===this.currentOperateCategoryId.length?(i=r.getListSubItem(),i.groupId=a.categoryid,a=a.children):1===this.currentOperateCategoryId.length&&(i=r.getListParentItem()),i.creating=!0,a.push(i)}else{if("child"!=t)return void console.error("添加节点错误");e.opened=!0;var n=r.getListSubItem();n.groupId=this.currentOperateCategoryId[0],n.creating=!0,e.children.push(n)}this.$forceUpdate(),this.hideRightMenu(),this.inputFocus()},editCategory:function(){var t=this.getCategory("operate");this.text=t.name,this.$set(t,"editing",!0),this.hideRightMenu(),this.inputFocus()},confirm:function(){var t=this;this.$confirm("确定删除该节点吗？",{cancelButtonClass:"btn-cancel",cancelButtonText:"取消",confirmButtonText:"确定"}).then(function(){t.deleteCategory()}).catch(function(t){})},deleteCategory:function(){var t=this.getCategory("operate");2===this.currentOperateCategoryId.length?o.a.deleteOneStrategy(this.categoryList,t,this,this.checkCategory):o.a.deleteOneGroup(this.categoryList,t,this),this.hideRightMenu()},rightMenu:function(t,e){if(t.preventDefault(),!this.permission)return!1;if(document.getElementById("J-edit-input"))return!1;var a=t.clientX+document.body.scrollLeft,i=t.clientY+document.body.scrollTop-43;this.showSubCategory=1==e.length;var r=void 0;r=this.showSubCategory?100:68,window.innerHeight<r+i&&(i-=r),this.currentMousePosition={x:a,y:i},1===e.length?(this.sameLevelChildOprTitle="新建同级节点",this.nextLevelChildOprTitle="新建指标"):this.sameLevelChildOprTitle="新建指标",this.currentOperateCategoryId=e;var n=this.getCategory("operate");this.showDelateButton=n.isdelete,this.showRightMenu=!0},queryGroupList:function(){var t=s.a.apiGroupList;return this.isStrategyComp&&(t=s.a.apiAlgorithmGroupList),new Promise(function(e,a){s.a.get(t,{},function(t){e(t)},function(t){a(t)})})},updataCategroy:function(){var t=this;this.queryGroupList().then(function(e){if(t.loading=!1,200===e.code){if(t.categoryList=e.data.map(function(e){var a=r.getListParentItem();a.categoryid=e.id,a.name=e.name;var n=[];return n=t.isStrategyComp?e.algorithms.map(function(t){var e=r.getListSubItem();e.categoryid=stra.id,e.name=stra.name}):e.strategies.map(function(t){var e=r.getListSubItem();return e.groupId=a.categoryid,e.categoryid=t.id,e.name=t.name,e}),a.children=[].concat(i(n)),a.children.length>0&&(a.ishaschildren=!0,a.isdelete=!1),a}),0===t.categoryList.length)return void(t.isShowNoCategory=!0);if(t.currentOperateCategoryId.length>1){var a=t.currentSelectCategoryId[0],s=t.currentSelectCategoryId[1],o=Object(n.findIndex)(t.categoryList,function(t){return t.categoryid===a}),h=Object(n.findIndex)(t.categoryList[o].children,function(t){return t.categoryid===s});o>-1&&h>-1&&t.checkCategory([a,s]),t.categoryList[o].opened=!0}else{var l=Object(n.find)(t.categoryList,function(t){return t.ishaschildren});if(!l)return;var u=l.categoryid,c=l.children[0].categoryid;t.checkCategory([u,c]),l.opened=!0}}else t.$message("获取分组异常")}).catch(function(e){t.loading=!1})},hideRightMenu:function(){this.showRightMenu=!1},inputFocus:function(){this.$nextTick(function(){document.getElementById("J-edit-input").focus()})},submit:function(){var t=this.getCategory("operate"),e=this.getCategoryId("operate");if(t&&e&&!this.sending){if(""===this.text)return void this.cancel();if(t.editing&&this.text===t.name)return void this.cancel();this.send()}},cancel:function(){var t=this.getCategory("operate");if(t.editing)t.editing=!1;else if(this.createType){if("brother"==this.createType){var e=this.getCurrentCategoryParent();2==this.currentOperateCategoryId.length&&(e=e.children);var a=e.length;e.splice(a-1,1)}else if("child"==this.createType){var i=t.children.length;t.children.splice(i-1,1)}this.createType=""}},queryStrategyOpr:function(t){var e=this,a={args:t.args,id:t.categoryid,name:t.name,script:t.script};s.a.post(""+s.a.apiStrategyOpr+t.categoryid,a,function(a){if(200===a.code){e.$message("保存成功"),e.sending=!1,e.text="";var i=Object(n.find)(e.categoryList,function(e){return e.categoryid===t.groupId}),r=Object(n.findIndex)(i.children,function(e){return e.categoryid===t.categoryid});i.children.splice(r,1,t)}else e.$message({message:a.data.message||"修改失败",type:"warning",duration:2e3})})},sendForSelectStockStrategy:function(){var t=this.getCategory("operate");if(t.editing)this.sending=!0,2===this.currentOperateCategoryId.length?o.a.updateOneStrategy(t,null,this,this.checkCategory):o.a.updateOneGroup(t,this);else if(this.createType){this.sending=!0;var e;this.text;if("brother"==this.createType){var a=this.getCurrentCategoryParent();if(1===this.currentOperateCategoryId.length){var i=a.length;e=a[i-1],o.a.addOneGroup(e,this)}else if(2===this.currentOperateCategoryId.length){a=a.children;var r=a.length;e=a[r-1],o.a.addOneStrategy(e,this,this.checkCategory)}}else this.createType}},send:function(){if(this.isStrategyComp)return void this.sendForSelectStockStrategy();var t=this.getCategory("operate");if(t.editing)this.sending=!0,2===this.currentOperateCategoryId.length?o.a.updateOneStrategy(t,null,this,this.checkCategory):o.a.updateOneGroup(t,this);else if(this.createType){this.sending=!0;var e;this.text;if("brother"==this.createType){var a=this.getCurrentCategoryParent();if(1===this.currentOperateCategoryId.length){var i=a.length;e=a[i-1],o.a.addOneGroup(e,this)}else if(2===this.currentOperateCategoryId.length){a=a.children;var r=a.length;e=a[r-1],o.a.addOneStrategy(e,this,this.checkCategory)}}else if("child"==this.createType){var n=t.children.length;e=t.children[n-1],o.a.addOneStrategy(e,this,this.checkCategory)}}}}}},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(t){return/^nm$/i.test(t)},meridiem:function(t,e,a){return t<12?a?"vm":"VM":a?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Môre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",ss:"%d sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(t){return t+(1===t||8===t||t>=20?"ste":"de")},week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},a={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"},i=function(t){return 0===t?0:1===t?1:2===t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},r={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},n=function(t){return function(e,a,n,s){var o=i(e),h=r[t][i(e)];return 2===o&&(h=h[a?0:1]),h.replace(/%d/i,e)}},s=["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"];return t.defineLocale("ar",{months:s,monthsShort:s,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(t){return"م"===t},meridiem:function(t,e,a){return t<12?"ص":"م"},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:n("s"),ss:n("s"),m:n("m"),mm:n("m"),h:n("h"),hh:n("h"),d:n("d"),dd:n("d"),M:n("M"),MM:n("M"),y:n("y"),yy:n("y")},preparse:function(t){return t.replace(/[١٢٣٤٥٦٧٨٩٠]/g,function(t){return a[t]}).replace(/،/g,",")},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]}).replace(/,/g,"،")},week:{dow:6,doy:12}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e=function(t){return 0===t?0:1===t?1:2===t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},a={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},i=function(t){return function(i,r,n,s){var o=e(i),h=a[t][e(i)];return 2===o&&(h=h[r?0:1]),h.replace(/%d/i,i)}},r=["جانفي","فيفري","مارس","أفريل","ماي","جوان","جويلية","أوت","سبتمبر","أكتوبر","نوفمبر","ديسمبر"];return t.defineLocale("ar-dz",{months:r,monthsShort:r,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(t){return"م"===t},meridiem:function(t,e,a){return t<12?"ص":"م"},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:i("s"),ss:i("s"),m:i("m"),mm:i("m"),h:i("h"),hh:i("h"),d:i("d"),dd:i("d"),M:i("M"),MM:i("M"),y:i("y"),yy:i("y")},postformat:function(t){return t.replace(/,/g,"،")},week:{dow:0,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("ar-kw",{months:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),weekdays:"الأحد_الإتنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"احد_اتنين_ثلاثاء_اربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:0,doy:12}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e={1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",0:"0"},a=function(t){return 0===t?0:1===t?1:2===t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},i={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},r=function(t){return function(e,r,n,s){var o=a(e),h=i[t][a(e)];return 2===o&&(h=h[r?0:1]),h.replace(/%d/i,e)}},n=["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"];return t.defineLocale("ar-ly",{months:n,monthsShort:n,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(t){return"م"===t},meridiem:function(t,e,a){return t<12?"ص":"م"},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:r("s"),ss:r("s"),m:r("m"),mm:r("m"),h:r("h"),hh:r("h"),d:r("d"),dd:r("d"),M:r("M"),MM:r("M"),y:r("y"),yy:r("y")},preparse:function(t){return t.replace(/،/g,",")},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]}).replace(/,/g,"،")},week:{dow:6,doy:12}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("ar-ma",{months:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"احد_اثنين_ثلاثاء_اربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},a={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"};return t.defineLocale("ar-sa",{months:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(t){return"م"===t},meridiem:function(t,e,a){return t<12?"ص":"م"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},preparse:function(t){return t.replace(/[١٢٣٤٥٦٧٨٩٠]/g,function(t){return a[t]}).replace(/،/g,",")},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]}).replace(/,/g,"،")},week:{dow:0,doy:6}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("ar-tn",{months:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-üncü",4:"-üncü",100:"-üncü",6:"-ncı",9:"-uncu",10:"-uncu",30:"-uncu",60:"-ıncı",90:"-ıncı"};return t.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertəsi_Çərşənbə axşamı_Çərşənbə_Cümə axşamı_Cümə_Şənbə".split("_"),weekdaysShort:"Baz_BzE_ÇAx_Çər_CAx_Cüm_Şən".split("_"),weekdaysMin:"Bz_BE_ÇA_Çə_CA_Cü_Şə".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gələn həftə] dddd [saat] LT",lastDay:"[dünən] LT",lastWeek:"[keçən həftə] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s əvvəl",s:"bir neçə saniyə",ss:"%d saniyə",m:"bir dəqiqə",mm:"%d dəqiqə",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gecə|səhər|gündüz|axşam/,isPM:function(t){return/^(gündüz|axşam)$/.test(t)},meridiem:function(t,e,a){return t<4?"gecə":t<12?"səhər":t<17?"gündüz":"axşam"},dayOfMonthOrdinalParse:/\d{1,2}-(ıncı|inci|nci|üncü|ncı|uncu)/,ordinal:function(t){if(0===t)return t+"-ıncı";var a=t%10,i=t%100-a,r=t>=100?100:null;return t+(e[a]||e[i]||e[r])},week:{dow:1,doy:7}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
function e(t,e){var a=t.split("_");return e%10==1&&e%100!=11?a[0]:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?a[1]:a[2]}function a(t,a,i){var r={ss:a?"секунда_секунды_секунд":"секунду_секунды_секунд",mm:a?"хвіліна_хвіліны_хвілін":"хвіліну_хвіліны_хвілін",hh:a?"гадзіна_гадзіны_гадзін":"гадзіну_гадзіны_гадзін",dd:"дзень_дні_дзён",MM:"месяц_месяцы_месяцаў",yy:"год_гады_гадоў"};return"m"===i?a?"хвіліна":"хвіліну":"h"===i?a?"гадзіна":"гадзіну":t+" "+e(r[i],+t)}return t.defineLocale("be",{months:{format:"студзеня_лютага_сакавіка_красавіка_траўня_чэрвеня_ліпеня_жніўня_верасня_кастрычніка_лістапада_снежня".split("_"),standalone:"студзень_люты_сакавік_красавік_травень_чэрвень_ліпень_жнівень_верасень_кастрычнік_лістапад_снежань".split("_")},monthsShort:"студ_лют_сак_крас_трав_чэрв_ліп_жнів_вер_каст_ліст_снеж".split("_"),weekdays:{format:"нядзелю_панядзелак_аўторак_сераду_чацвер_пятніцу_суботу".split("_"),standalone:"нядзеля_панядзелак_аўторак_серада_чацвер_пятніца_субота".split("_"),isFormat:/\[ ?[Ууў] ?(?:мінулую|наступную)? ?\] ?dddd/},weekdaysShort:"нд_пн_ат_ср_чц_пт_сб".split("_"),weekdaysMin:"нд_пн_ат_ср_чц_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., HH:mm",LLLL:"dddd, D MMMM YYYY г., HH:mm"},calendar:{sameDay:"[Сёння ў] LT",nextDay:"[Заўтра ў] LT",lastDay:"[Учора ў] LT",nextWeek:function(){return"[У] dddd [ў] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[У мінулую] dddd [ў] LT";case 1:case 2:case 4:return"[У мінулы] dddd [ў] LT"}},sameElse:"L"},relativeTime:{future:"праз %s",past:"%s таму",s:"некалькі секунд",m:a,mm:a,h:a,hh:a,d:"дзень",dd:a,M:"месяц",MM:a,y:"год",yy:a},meridiemParse:/ночы|раніцы|дня|вечара/,isPM:function(t){return/^(дня|вечара)$/.test(t)},meridiem:function(t,e,a){return t<4?"ночы":t<12?"раніцы":t<17?"дня":"вечара"},dayOfMonthOrdinalParse:/\d{1,2}-(і|ы|га)/,ordinal:function(t,e){switch(e){case"M":case"d":case"DDD":case"w":case"W":return t%10!=2&&t%10!=3||t%100==12||t%100==13?t+"-ы":t+"-і";case"D":return t+"-га";default:return t}},week:{dow:1,doy:7}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("bg",{months:"януари_февруари_март_април_май_юни_юли_август_септември_октомври_ноември_декември".split("_"),monthsShort:"яну_фев_мар_апр_май_юни_юли_авг_сеп_окт_ное_дек".split("_"),weekdays:"неделя_понеделник_вторник_сряда_четвъртък_петък_събота".split("_"),weekdaysShort:"нед_пон_вто_сря_чет_пет_съб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[Днес в] LT",nextDay:"[Утре в] LT",nextWeek:"dddd [в] LT",lastDay:"[Вчера в] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[Миналата] dddd [в] LT";case 1:case 2:case 4:case 5:return"[Миналия] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"след %s",past:"преди %s",s:"няколко секунди",ss:"%d секунди",m:"минута",mm:"%d минути",h:"час",hh:"%d часа",d:"ден",dd:"%d дена",w:"седмица",ww:"%d седмици",M:"месец",MM:"%d месеца",y:"година",yy:"%d години"},dayOfMonthOrdinalParse:/\d{1,2}-(ев|ен|ти|ви|ри|ми)/,ordinal:function(t){var e=t%10,a=t%100;return 0===t?t+"-ев":0===a?t+"-ен":a>10&&a<20?t+"-ти":1===e?t+"-ви":2===e?t+"-ри":7===e||8===e?t+"-ми":t+"-ти"},week:{dow:1,doy:7}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("bm",{months:"Zanwuyekalo_Fewuruyekalo_Marisikalo_Awirilikalo_Mɛkalo_Zuwɛnkalo_Zuluyekalo_Utikalo_Sɛtanburukalo_ɔkutɔburukalo_Nowanburukalo_Desanburukalo".split("_"),monthsShort:"Zan_Few_Mar_Awi_Mɛ_Zuw_Zul_Uti_Sɛt_ɔku_Now_Des".split("_"),weekdays:"Kari_Ntɛnɛn_Tarata_Araba_Alamisa_Juma_Sibiri".split("_"),weekdaysShort:"Kar_Ntɛ_Tar_Ara_Ala_Jum_Sib".split("_"),weekdaysMin:"Ka_Nt_Ta_Ar_Al_Ju_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"MMMM [tile] D [san] YYYY",LLL:"MMMM [tile] D [san] YYYY [lɛrɛ] HH:mm",LLLL:"dddd MMMM [tile] D [san] YYYY [lɛrɛ] HH:mm"},calendar:{sameDay:"[Bi lɛrɛ] LT",nextDay:"[Sini lɛrɛ] LT",nextWeek:"dddd [don lɛrɛ] LT",lastDay:"[Kunu lɛrɛ] LT",lastWeek:"dddd [tɛmɛnen lɛrɛ] LT",sameElse:"L"},relativeTime:{future:"%s kɔnɔ",past:"a bɛ %s bɔ",s:"sanga dama dama",ss:"sekondi %d",m:"miniti kelen",mm:"miniti %d",h:"lɛrɛ kelen",hh:"lɛrɛ %d",d:"tile kelen",dd:"tile %d",M:"kalo kelen",MM:"kalo %d",y:"san kelen",yy:"san %d"},week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e={1:"১",2:"২",3:"৩",4:"৪",5:"৫",6:"৬",7:"৭",8:"৮",9:"৯",0:"০"},a={"১":"1","২":"2","৩":"3","৪":"4","৫":"5","৬":"6","৭":"7","৮":"8","৯":"9","০":"0"};return t.defineLocale("bn",{months:"জানুয়ারি_ফেব্রুয়ারি_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্টেম্বর_অক্টোবর_নভেম্বর_ডিসেম্বর".split("_"),monthsShort:"জানু_ফেব্রু_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্ট_অক্টো_নভে_ডিসে".split("_"),weekdays:"রবিবার_সোমবার_মঙ্গলবার_বুধবার_বৃহস্পতিবার_শুক্রবার_শনিবার".split("_"),weekdaysShort:"রবি_সোম_মঙ্গল_বুধ_বৃহস্পতি_শুক্র_শনি".split("_"),weekdaysMin:"রবি_সোম_মঙ্গল_বুধ_বৃহ_শুক্র_শনি".split("_"),longDateFormat:{LT:"A h:mm সময়",LTS:"A h:mm:ss সময়",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm সময়",LLLL:"dddd, D MMMM YYYY, A h:mm সময়"},calendar:{sameDay:"[আজ] LT",nextDay:"[আগামীকাল] LT",nextWeek:"dddd, LT",lastDay:"[গতকাল] LT",lastWeek:"[গত] dddd, LT",sameElse:"L"},relativeTime:{future:"%s পরে",past:"%s আগে",s:"কয়েক সেকেন্ড",ss:"%d সেকেন্ড",m:"এক মিনিট",mm:"%d মিনিট",h:"এক ঘন্টা",hh:"%d ঘন্টা",d:"এক দিন",dd:"%d দিন",M:"এক মাস",MM:"%d মাস",y:"এক বছর",yy:"%d বছর"},preparse:function(t){return t.replace(/[১২৩৪৫৬৭৮৯০]/g,function(t){return a[t]})},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]})},meridiemParse:/রাত|সকাল|দুপুর|বিকাল|রাত/,meridiemHour:function(t,e){return 12===t&&(t=0),"রাত"===e&&t>=4||"দুপুর"===e&&t<5||"বিকাল"===e?t+12:t},meridiem:function(t,e,a){return t<4?"রাত":t<10?"সকাল":t<17?"দুপুর":t<20?"বিকাল":"রাত"},week:{dow:0,doy:6}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e={1:"১",2:"২",3:"৩",4:"৪",5:"৫",6:"৬",7:"৭",8:"৮",9:"৯",0:"০"},a={"১":"1","২":"2","৩":"3","৪":"4","৫":"5","৬":"6","৭":"7","৮":"8","৯":"9","০":"0"};return t.defineLocale("bn-bd",{months:"জানুয়ারি_ফেব্রুয়ারি_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্টেম্বর_অক্টোবর_নভেম্বর_ডিসেম্বর".split("_"),monthsShort:"জানু_ফেব্রু_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্ট_অক্টো_নভে_ডিসে".split("_"),weekdays:"রবিবার_সোমবার_মঙ্গলবার_বুধবার_বৃহস্পতিবার_শুক্রবার_শনিবার".split("_"),weekdaysShort:"রবি_সোম_মঙ্গল_বুধ_বৃহস্পতি_শুক্র_শনি".split("_"),weekdaysMin:"রবি_সোম_মঙ্গল_বুধ_বৃহ_শুক্র_শনি".split("_"),longDateFormat:{LT:"A h:mm সময়",LTS:"A h:mm:ss সময়",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm সময়",LLLL:"dddd, D MMMM YYYY, A h:mm সময়"},calendar:{sameDay:"[আজ] LT",nextDay:"[আগামীকাল] LT",nextWeek:"dddd, LT",lastDay:"[গতকাল] LT",lastWeek:"[গত] dddd, LT",sameElse:"L"},relativeTime:{future:"%s পরে",past:"%s আগে",s:"কয়েক সেকেন্ড",ss:"%d সেকেন্ড",m:"এক মিনিট",mm:"%d মিনিট",h:"এক ঘন্টা",hh:"%d ঘন্টা",d:"এক দিন",dd:"%d দিন",M:"এক মাস",MM:"%d মাস",y:"এক বছর",yy:"%d বছর"},preparse:function(t){return t.replace(/[১২৩৪৫৬৭৮৯০]/g,function(t){return a[t]})},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]})},meridiemParse:/রাত|ভোর|সকাল|দুপুর|বিকাল|সন্ধ্যা|রাত/,meridiemHour:function(t,e){return 12===t&&(t=0),"রাত"===e?t<4?t:t+12:"ভোর"===e?t:"সকাল"===e?t:"দুপুর"===e?t>=3?t:t+12:"বিকাল"===e?t+12:"সন্ধ্যা"===e?t+12:void 0},meridiem:function(t,e,a){return t<4?"রাত":t<6?"ভোর":t<12?"সকাল":t<15?"দুপুর":t<18?"বিকাল":t<20?"সন্ধ্যা":"রাত"},week:{dow:0,doy:6}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e={1:"༡",2:"༢",3:"༣",4:"༤",5:"༥",6:"༦",7:"༧",8:"༨",9:"༩",0:"༠"},a={"༡":"1","༢":"2","༣":"3","༤":"4","༥":"5","༦":"6","༧":"7","༨":"8","༩":"9","༠":"0"};return t.defineLocale("bo",{months:"ཟླ་བ་དང་པོ_ཟླ་བ་གཉིས་པ_ཟླ་བ་གསུམ་པ_ཟླ་བ་བཞི་པ_ཟླ་བ་ལྔ་པ_ཟླ་བ་དྲུག་པ_ཟླ་བ་བདུན་པ_ཟླ་བ་བརྒྱད་པ_ཟླ་བ་དགུ་པ_ཟླ་བ་བཅུ་པ_ཟླ་བ་བཅུ་གཅིག་པ_ཟླ་བ་བཅུ་གཉིས་པ".split("_"),monthsShort:"ཟླ་1_ཟླ་2_ཟླ་3_ཟླ་4_ཟླ་5_ཟླ་6_ཟླ་7_ཟླ་8_ཟླ་9_ཟླ་10_ཟླ་11_ཟླ་12".split("_"),monthsShortRegex:/^(ཟླ་\d{1,2})/,monthsParseExact:!0,weekdays:"གཟའ་ཉི་མ་_གཟའ་ཟླ་བ་_གཟའ་མིག་དམར་_གཟའ་ལྷག་པ་_གཟའ་ཕུར་བུ_གཟའ་པ་སངས་_གཟའ་སྤེན་པ་".split("_"),weekdaysShort:"ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་".split("_"),weekdaysMin:"ཉི_ཟླ_མིག_ལྷག_ཕུར_སངས_སྤེན".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[དི་རིང] LT",nextDay:"[སང་ཉིན] LT",nextWeek:"[བདུན་ཕྲག་རྗེས་མ], LT",lastDay:"[ཁ་སང] LT",lastWeek:"[བདུན་ཕྲག་མཐའ་མ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ལ་",past:"%s སྔན་ལ",s:"ལམ་སང",ss:"%d སྐར་ཆ།",m:"སྐར་མ་གཅིག",mm:"%d སྐར་མ",h:"ཆུ་ཚོད་གཅིག",hh:"%d ཆུ་ཚོད",d:"ཉིན་གཅིག",dd:"%d ཉིན་",M:"ཟླ་བ་གཅིག",MM:"%d ཟླ་བ",y:"ལོ་གཅིག",yy:"%d ལོ"},preparse:function(t){return t.replace(/[༡༢༣༤༥༦༧༨༩༠]/g,function(t){return a[t]})},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]})},meridiemParse:/མཚན་མོ|ཞོགས་ཀས|ཉིན་གུང|དགོང་དག|མཚན་མོ/,meridiemHour:function(t,e){return 12===t&&(t=0),"མཚན་མོ"===e&&t>=4||"ཉིན་གུང"===e&&t<5||"དགོང་དག"===e?t+12:t},meridiem:function(t,e,a){return t<4?"མཚན་མོ":t<10?"ཞོགས་ཀས":t<17?"ཉིན་གུང":t<20?"དགོང་དག":"མཚན་མོ"},week:{dow:0,doy:6}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
function e(t,e,a){return t+" "+r({mm:"munutenn",MM:"miz",dd:"devezh"}[a],t)}function a(t){switch(i(t)){case 1:case 3:case 4:case 5:case 9:return t+" bloaz";default:return t+" vloaz"}}function i(t){return t>9?i(t%10):t}function r(t,e){return 2===e?n(t):t}function n(t){var e={m:"v",b:"v",d:"z"};return void 0===e[t.charAt(0)]?t:e[t.charAt(0)]+t.substring(1)}var s=[/^gen/i,/^c[ʼ\']hwe/i,/^meu/i,/^ebr/i,/^mae/i,/^(mez|eve)/i,/^gou/i,/^eos/i,/^gwe/i,/^her/i,/^du/i,/^ker/i],o=/^(genver|c[ʼ\']hwevrer|meurzh|ebrel|mae|mezheven|gouere|eost|gwengolo|here|du|kerzu|gen|c[ʼ\']hwe|meu|ebr|mae|eve|gou|eos|gwe|her|du|ker)/i,h=/^(genver|c[ʼ\']hwevrer|meurzh|ebrel|mae|mezheven|gouere|eost|gwengolo|here|du|kerzu)/i,l=/^(gen|c[ʼ\']hwe|meu|ebr|mae|eve|gou|eos|gwe|her|du|ker)/i,u=[/^sul/i,/^lun/i,/^meurzh/i,/^merc[ʼ\']her/i,/^yaou/i,/^gwener/i,/^sadorn/i],c=[/^Sul/i,/^Lun/i,/^Meu/i,/^Mer/i,/^Yao/i,/^Gwe/i,/^Sad/i],d=[/^Su/i,/^Lu/i,/^Me([^r]|$)/i,/^Mer/i,/^Ya/i,/^Gw/i,/^Sa/i];return t.defineLocale("br",{months:"Genver_Cʼhwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_Cʼhwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Mercʼher_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),weekdaysParse:d,fullWeekdaysParse:u,shortWeekdaysParse:c,minWeekdaysParse:d,monthsRegex:o,monthsShortRegex:o,monthsStrictRegex:h,monthsShortStrictRegex:l,monthsParse:s,longMonthsParse:s,shortMonthsParse:s,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY HH:mm",LLLL:"dddd, D [a viz] MMMM YYYY HH:mm"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warcʼhoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Decʼh da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s ʼzo",s:"un nebeud segondennoù",ss:"%d eilenn",m:"ur vunutenn",mm:e,h:"un eur",hh:"%d eur",d:"un devezh",dd:e,M:"ur miz",MM:e,y:"ur bloaz",yy:a},dayOfMonthOrdinalParse:/\d{1,2}(añ|vet)/,ordinal:function(t){return t+(1===t?"añ":"vet")},week:{dow:1,doy:4},meridiemParse:/a.m.|g.m./,isPM:function(t){return"g.m."===t},meridiem:function(t,e,a){return t<12?"a.m.":"g.m."}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
function e(t,e,a){var i=t+" ";switch(a){case"ss":return i+=1===t?"sekunda":2===t||3===t||4===t?"sekunde":"sekundi";case"m":return e?"jedna minuta":"jedne minute";case"mm":return i+=1===t?"minuta":2===t||3===t||4===t?"minute":"minuta";case"h":return e?"jedan sat":"jednog sata";case"hh":return i+=1===t?"sat":2===t||3===t||4===t?"sata":"sati";case"dd":return i+=1===t?"dan":"dana";case"MM":return i+=1===t?"mjesec":2===t||3===t||4===t?"mjeseca":"mjeseci";case"yy":return i+=1===t?"godina":2===t||3===t||4===t?"godine":"godina"}}return t.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prošlu] dddd [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:e,m:e,mm:e,h:e,hh:e,d:"dan",dd:e,M:"mjesec",MM:e,y:"godinu",yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("ca",{months:{standalone:"gener_febrer_març_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),format:"de gener_de febrer_de març_d'abril_de maig_de juny_de juliol_d'agost_de setembre_d'octubre_de novembre_de desembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._març_abr._maig_juny_jul._ag._set._oct._nov._des.".split("_"),monthsParseExact:!0,weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dt_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a les] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a les] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[demà a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"d'aquí %s",past:"fa %s",s:"uns segons",ss:"%d segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t|è|a)/,ordinal:function(t,e){var a=1===t?"r":2===t?"n":3===t?"r":4===t?"t":"è";return"w"!==e&&"W"!==e||(a="a"),t+a},week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";function e(t){return t>1&&t<5&&1!=~~(t/10)}function a(t,a,i,r){var n=t+" ";switch(i){case"s":return a||r?"pár sekund":"pár sekundami";case"ss":return a||r?n+(e(t)?"sekundy":"sekund"):n+"sekundami";case"m":return a?"minuta":r?"minutu":"minutou";case"mm":return a||r?n+(e(t)?"minuty":"minut"):n+"minutami";case"h":return a?"hodina":r?"hodinu":"hodinou";case"hh":return a||r?n+(e(t)?"hodiny":"hodin"):n+"hodinami";case"d":return a||r?"den":"dnem";case"dd":return a||r?n+(e(t)?"dny":"dní"):n+"dny";case"M":return a||r?"měsíc":"měsícem";case"MM":return a||r?n+(e(t)?"měsíce":"měsíců"):n+"měsíci";case"y":return a||r?"rok":"rokem";case"yy":return a||r?n+(e(t)?"roky":"let"):n+"lety"}}
//! moment.js locale configuration
var i="leden_únor_březen_duben_květen_červen_červenec_srpen_září_říjen_listopad_prosinec".split("_"),r="led_úno_bře_dub_kvě_čvn_čvc_srp_zář_říj_lis_pro".split("_"),n=[/^led/i,/^úno/i,/^bře/i,/^dub/i,/^kvě/i,/^(čvn|červen$|června)/i,/^(čvc|červenec|července)/i,/^srp/i,/^zář/i,/^říj/i,/^lis/i,/^pro/i],s=/^(leden|únor|březen|duben|květen|červenec|července|červen|června|srpen|září|říjen|listopad|prosinec|led|úno|bře|dub|kvě|čvn|čvc|srp|zář|říj|lis|pro)/i;return t.defineLocale("cs",{months:i,monthsShort:r,monthsRegex:s,monthsShortRegex:s,monthsStrictRegex:/^(leden|ledna|února|únor|březen|března|duben|dubna|květen|května|červenec|července|červen|června|srpen|srpna|září|říjen|října|listopadu|listopad|prosinec|prosince)/i,monthsShortStrictRegex:/^(led|úno|bře|dub|kvě|čvn|čvc|srp|zář|říj|lis|pro)/i,monthsParse:n,longMonthsParse:n,shortMonthsParse:n,weekdays:"neděle_pondělí_úterý_středa_čtvrtek_pátek_sobota".split("_"),weekdaysShort:"ne_po_út_st_čt_pá_so".split("_"),weekdaysMin:"ne_po_út_st_čt_pá_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm",l:"D. M. YYYY"},calendar:{sameDay:"[dnes v] LT",nextDay:"[zítra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v neděli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve středu v] LT";case 4:return"[ve čtvrtek v] LT";case 5:return"[v pátek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[včera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou neděli v] LT";case 1:case 2:return"[minulé] dddd [v] LT";case 3:return"[minulou středu v] LT";case 4:case 5:return"[minulý] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"před %s",s:a,ss:a,m:a,mm:a,h:a,hh:a,d:a,dd:a,M:a,MM:a,y:a,yy:a},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("cv",{months:"кӑрлач_нарӑс_пуш_ака_май_ҫӗртме_утӑ_ҫурла_авӑн_юпа_чӳк_раштав".split("_"),monthsShort:"кӑр_нар_пуш_ака_май_ҫӗр_утӑ_ҫур_авн_юпа_чӳк_раш".split("_"),weekdays:"вырсарникун_тунтикун_ытларикун_юнкун_кӗҫнерникун_эрнекун_шӑматкун".split("_"),weekdaysShort:"выр_тун_ытл_юн_кӗҫ_эрн_шӑм".split("_"),weekdaysMin:"вр_тн_ыт_юн_кҫ_эр_шм".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ]",LLL:"YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm",LLLL:"dddd, YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm"},calendar:{sameDay:"[Паян] LT [сехетре]",nextDay:"[Ыран] LT [сехетре]",lastDay:"[Ӗнер] LT [сехетре]",nextWeek:"[Ҫитес] dddd LT [сехетре]",lastWeek:"[Иртнӗ] dddd LT [сехетре]",sameElse:"L"},relativeTime:{future:function(t){return t+(/сехет$/i.exec(t)?"рен":/ҫул$/i.exec(t)?"тан":"ран")},past:"%s каялла",s:"пӗр-ик ҫеккунт",ss:"%d ҫеккунт",m:"пӗр минут",mm:"%d минут",h:"пӗр сехет",hh:"%d сехет",d:"пӗр кун",dd:"%d кун",M:"пӗр уйӑх",MM:"%d уйӑх",y:"пӗр ҫул",yy:"%d ҫул"},dayOfMonthOrdinalParse:/\d{1,2}-мӗш/,ordinal:"%d-мӗш",week:{dow:1,doy:7}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn ôl",s:"ychydig eiliadau",ss:"%d eiliad",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},dayOfMonthOrdinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(t){var e=t,a="",i=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"];return e>20?a=40===e||50===e||60===e||80===e||100===e?"fed":"ain":e>0&&(a=i[e]),t+a},week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"søn_man_tir_ons_tor_fre_lør".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"på dddd [kl.] LT",lastDay:"[i går kl.] LT",lastWeek:"[i] dddd[s kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"få sekunder",ss:"%d sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en måned",MM:"%d måneder",y:"et år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
function e(t,e,a,i){var r={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[t+" Tage",t+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[t+" Monate",t+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[t+" Jahre",t+" Jahren"]};return e?r[a][0]:r[a][1]}return t.defineLocale("de",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:e,mm:"%d Minuten",h:e,hh:"%d Stunden",d:e,dd:e,w:e,ww:"%d Wochen",M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
function e(t,e,a,i){var r={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[t+" Tage",t+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[t+" Monate",t+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[t+" Jahre",t+" Jahren"]};return e?r[a][0]:r[a][1]}return t.defineLocale("de-at",{months:"Jänner_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jän._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:e,mm:"%d Minuten",h:e,hh:"%d Stunden",d:e,dd:e,w:e,ww:"%d Wochen",M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
function e(t,e,a,i){var r={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[t+" Tage",t+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[t+" Monate",t+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[t+" Jahre",t+" Jahren"]};return e?r[a][0]:r[a][1]}return t.defineLocale("de-ch",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:e,mm:"%d Minuten",h:e,hh:"%d Stunden",d:e,dd:e,w:e,ww:"%d Wochen",M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e=["ޖެނުއަރީ","ފެބްރުއަރީ","މާރިޗު","އޭޕްރީލު","މޭ","ޖޫން","ޖުލައި","އޯގަސްޓު","ސެޕްޓެމްބަރު","އޮކްޓޯބަރު","ނޮވެމްބަރު","ޑިސެމްބަރު"],a=["އާދިއްތަ","ހޯމަ","އަންގާރަ","ބުދަ","ބުރާސްފަތި","ހުކުރު","ހޮނިހިރު"];return t.defineLocale("dv",{months:e,monthsShort:e,weekdays:a,weekdaysShort:a,weekdaysMin:"އާދި_ހޯމަ_އަން_ބުދަ_ބުރާ_ހުކު_ހޮނި".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/މކ|މފ/,isPM:function(t){return"މފ"===t},meridiem:function(t,e,a){return t<12?"މކ":"މފ"},calendar:{sameDay:"[މިއަދު] LT",nextDay:"[މާދަމާ] LT",nextWeek:"dddd LT",lastDay:"[އިއްޔެ] LT",lastWeek:"[ފާއިތުވި] dddd LT",sameElse:"L"},relativeTime:{future:"ތެރޭގައި %s",past:"ކުރިން %s",s:"ސިކުންތުކޮޅެއް",ss:"d% ސިކުންތު",m:"މިނިޓެއް",mm:"މިނިޓު %d",h:"ގަޑިއިރެއް",hh:"ގަޑިއިރު %d",d:"ދުވަހެއް",dd:"ދުވަސް %d",M:"މަހެއް",MM:"މަސް %d",y:"އަހަރެއް",yy:"އަހަރު %d"},preparse:function(t){return t.replace(/،/g,",")},postformat:function(t){return t.replace(/,/g,"،")},week:{dow:7,doy:12}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
function e(t){return"undefined"!=typeof Function&&t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}return t.defineLocale("el",{monthsNominativeEl:"Ιανουάριος_Φεβρουάριος_Μάρτιος_Απρίλιος_Μάιος_Ιούνιος_Ιούλιος_Αύγουστος_Σεπτέμβριος_Οκτώβριος_Νοέμβριος_Δεκέμβριος".split("_"),monthsGenitiveEl:"Ιανουαρίου_Φεβρουαρίου_Μαρτίου_Απριλίου_Μαΐου_Ιουνίου_Ιουλίου_Αυγούστου_Σεπτεμβρίου_Οκτωβρίου_Νοεμβρίου_Δεκεμβρίου".split("_"),months:function(t,e){return t?"string"==typeof e&&/D/.test(e.substring(0,e.indexOf("MMMM")))?this._monthsGenitiveEl[t.month()]:this._monthsNominativeEl[t.month()]:this._monthsNominativeEl},monthsShort:"Ιαν_Φεβ_Μαρ_Απρ_Μαϊ_Ιουν_Ιουλ_Αυγ_Σεπ_Οκτ_Νοε_Δεκ".split("_"),weekdays:"Κυριακή_Δευτέρα_Τρίτη_Τετάρτη_Πέμπτη_Παρασκευή_Σάββατο".split("_"),weekdaysShort:"Κυρ_Δευ_Τρι_Τετ_Πεμ_Παρ_Σαβ".split("_"),weekdaysMin:"Κυ_Δε_Τρ_Τε_Πε_Πα_Σα".split("_"),meridiem:function(t,e,a){return t>11?a?"μμ":"ΜΜ":a?"πμ":"ΠΜ"},isPM:function(t){return"μ"===(t+"").toLowerCase()[0]},meridiemParse:/[ΠΜ]\.?Μ?\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[Σήμερα {}] LT",nextDay:"[Αύριο {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[Χθες {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[το προηγούμενο] dddd [{}] LT";default:return"[την προηγούμενη] dddd [{}] LT"}},sameElse:"L"},calendar:function(t,a){var i=this._calendarEl[t],r=a&&a.hours();return e(i)&&(i=i.apply(a)),i.replace("{}",r%12==1?"στη":"στις")},relativeTime:{future:"σε %s",past:"%s πριν",s:"λίγα δευτερόλεπτα",ss:"%d δευτερόλεπτα",m:"ένα λεπτό",mm:"%d λεπτά",h:"μία ώρα",hh:"%d ώρες",d:"μία μέρα",dd:"%d μέρες",M:"ένας μήνας",MM:"%d μήνες",y:"ένας χρόνος",yy:"%d χρόνια"},dayOfMonthOrdinalParse:/\d{1,2}η/,ordinal:"%dη",week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:0,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("en-il",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("en-in",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:0,doy:6}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("en-sg",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_aŭgusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mart_apr_maj_jun_jul_aŭg_sept_okt_nov_dec".split("_"),weekdays:"dimanĉo_lundo_mardo_merkredo_ĵaŭdo_vendredo_sabato".split("_"),weekdaysShort:"dim_lun_mard_merk_ĵaŭ_ven_sab".split("_"),weekdaysMin:"di_lu_ma_me_ĵa_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"[la] D[-an de] MMMM, YYYY",LLL:"[la] D[-an de] MMMM, YYYY HH:mm",LLLL:"dddd[n], [la] D[-an de] MMMM, YYYY HH:mm",llll:"ddd, [la] D[-an de] MMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(t){return"p"===t.charAt(0).toLowerCase()},meridiem:function(t,e,a){return t>11?a?"p.t.m.":"P.T.M.":a?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodiaŭ je] LT",nextDay:"[Morgaŭ je] LT",nextWeek:"dddd[n je] LT",lastDay:"[Hieraŭ je] LT",lastWeek:"[pasintan] dddd[n je] LT",sameElse:"L"},relativeTime:{future:"post %s",past:"antaŭ %s",s:"kelkaj sekundoj",ss:"%d sekundoj",m:"unu minuto",mm:"%d minutoj",h:"unu horo",hh:"%d horoj",d:"unu tago",dd:"%d tagoj",M:"unu monato",MM:"%d monatoj",y:"unu jaro",yy:"%d jaroj"},dayOfMonthOrdinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),a="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),i=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],r=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;return t.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(t,i){return t?/-MMM-/.test(i)?a[t.month()]:e[t.month()]:e},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4},invalidDate:"Fecha inválida"})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),a="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),i=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],r=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;return t.defineLocale("es-do",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(t,i){return t?/-MMM-/.test(i)?a[t.month()]:e[t.month()]:e},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),a="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),i=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],r=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;return t.defineLocale("es-mx",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(t,i){return t?/-MMM-/.test(i)?a[t.month()]:e[t.month()]:e},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:0,doy:4},invalidDate:"Fecha inválida"})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),a="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),i=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],r=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;return t.defineLocale("es-us",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(t,i){return t?/-MMM-/.test(i)?a[t.month()]:e[t.month()]:e},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"MM/DD/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:0,doy:6}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
function e(t,e,a,i){var r={s:["mõne sekundi","mõni sekund","paar sekundit"],ss:[t+"sekundi",t+"sekundit"],m:["ühe minuti","üks minut"],mm:[t+" minuti",t+" minutit"],h:["ühe tunni","tund aega","üks tund"],hh:[t+" tunni",t+" tundi"],d:["ühe päeva","üks päev"],M:["kuu aja","kuu aega","üks kuu"],MM:[t+" kuu",t+" kuud"],y:["ühe aasta","aasta","üks aasta"],yy:[t+" aasta",t+" aastat"]};return e?r[a][2]?r[a][2]:r[a][1]:i?r[a][0]:r[a][1]}return t.defineLocale("et",{months:"jaanuar_veebruar_märts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_märts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"pühapäev_esmaspäev_teisipäev_kolmapäev_neljapäev_reede_laupäev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[Täna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Järgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s pärast",past:"%s tagasi",s:e,ss:e,m:e,mm:e,h:e,hh:e,d:e,dd:"%d päeva",M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),monthsParseExact:!0,weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",ss:"%d segundo",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e={1:"۱",2:"۲",3:"۳",4:"۴",5:"۵",6:"۶",7:"۷",8:"۸",9:"۹",0:"۰"},a={"۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","۰":"0"};return t.defineLocale("fa",{months:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),monthsShort:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),weekdays:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysShort:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysMin:"ی_د_س_چ_پ_ج_ش".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/قبل از ظهر|بعد از ظهر/,isPM:function(t){return/بعد از ظهر/.test(t)},meridiem:function(t,e,a){return t<12?"قبل از ظهر":"بعد از ظهر"},calendar:{sameDay:"[امروز ساعت] LT",nextDay:"[فردا ساعت] LT",nextWeek:"dddd [ساعت] LT",lastDay:"[دیروز ساعت] LT",lastWeek:"dddd [پیش] [ساعت] LT",sameElse:"L"},relativeTime:{future:"در %s",past:"%s پیش",s:"چند ثانیه",ss:"%d ثانیه",m:"یک دقیقه",mm:"%d دقیقه",h:"یک ساعت",hh:"%d ساعت",d:"یک روز",dd:"%d روز",M:"یک ماه",MM:"%d ماه",y:"یک سال",yy:"%d سال"},preparse:function(t){return t.replace(/[۰-۹]/g,function(t){return a[t]}).replace(/،/g,",")},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]}).replace(/,/g,"،")},dayOfMonthOrdinalParse:/\d{1,2}م/,ordinal:"%dم",week:{dow:6,doy:12}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";function e(t,e,i,r){var n="";switch(i){case"s":return r?"muutaman sekunnin":"muutama sekunti";case"ss":n=r?"sekunnin":"sekuntia";break;case"m":return r?"minuutin":"minuutti";case"mm":n=r?"minuutin":"minuuttia";break;case"h":return r?"tunnin":"tunti";case"hh":n=r?"tunnin":"tuntia";break;case"d":return r?"päivän":"päivä";case"dd":n=r?"päivän":"päivää";break;case"M":return r?"kuukauden":"kuukausi";case"MM":n=r?"kuukauden":"kuukautta";break;case"y":return r?"vuoden":"vuosi";case"yy":n=r?"vuoden":"vuotta"}return n=a(t,r)+" "+n}function a(t,e){return t<10?e?r[t]:i[t]:t}
//! moment.js locale configuration
var i="nolla yksi kaksi kolme neljä viisi kuusi seitsemän kahdeksan yhdeksän".split(" "),r=["nolla","yhden","kahden","kolmen","neljän","viiden","kuuden",i[7],i[8],i[9]];return t.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kesäkuu_heinäkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kesä_heinä_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tänään] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s päästä",past:"%s sitten",s:e,ss:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("fil",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(t){return t},week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("fo",{months:"januar_februar_mars_apríl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mánadagur_týsdagur_mikudagur_hósdagur_fríggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mán_týs_mik_hós_frí_ley".split("_"),weekdaysMin:"su_má_tý_mi_hó_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[Í dag kl.] LT",nextDay:"[Í morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[Í gjár kl.] LT",lastWeek:"[síðstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s síðani",s:"fá sekund",ss:"%d sekundir",m:"ein minuttur",mm:"%d minuttir",h:"ein tími",hh:"%d tímar",d:"ein dagur",dd:"%d dagar",M:"ein mánaður",MM:"%d mánaðir",y:"eitt ár",yy:"%d ár"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e=/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i,a=/(janv\.?|févr\.?|mars|avr\.?|mai|juin|juil\.?|août|sept\.?|oct\.?|nov\.?|déc\.?)/i,i=/(janv\.?|févr\.?|mars|avr\.?|mai|juin|juil\.?|août|sept\.?|oct\.?|nov\.?|déc\.?|janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i,r=[/^janv/i,/^févr/i,/^mars/i,/^avr/i,/^mai/i,/^juin/i,/^juil/i,/^août/i,/^sept/i,/^oct/i,/^nov/i,/^déc/i];return t.defineLocale("fr",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:e,monthsShortStrictRegex:a,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd’hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",w:"une semaine",ww:"%d semaines",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(t,e){switch(e){case"D":return t+(1===t?"er":"");default:case"M":case"Q":case"DDD":case"d":return t+(1===t?"er":"e");case"w":case"W":return t+(1===t?"re":"e")}},week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("fr-ca",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd’hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(t,e){switch(e){default:case"M":case"Q":case"D":case"DDD":case"d":return t+(1===t?"er":"e");case"w":case"W":return t+(1===t?"re":"e")}}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("fr-ch",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd’hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(t,e){switch(e){default:case"M":case"Q":case"D":case"DDD":case"d":return t+(1===t?"er":"e");case"w":case"W":return t+(1===t?"re":"e")}},week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e="jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),a="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_");return t.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(t,i){return t?/-MMM-/.test(i)?a[t.month()]:e[t.month()]:e},monthsParseExact:!0,weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[ôfrûne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",ss:"%d sekonden",m:"ien minút",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(t){return t+(1===t||8===t||t>=20?"ste":"de")},week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e=["Eanáir","Feabhra","Márta","Aibreán","Bealtaine","Meitheamh","Iúil","Lúnasa","Meán Fómhair","Deireadh Fómhair","Samhain","Nollaig"],a=["Ean","Feabh","Márt","Aib","Beal","Meith","Iúil","Lún","M.F.","D.F.","Samh","Noll"],i=["Dé Domhnaigh","Dé Luain","Dé Máirt","Dé Céadaoin","Déardaoin","Dé hAoine","Dé Sathairn"],r=["Domh","Luan","Máirt","Céad","Déar","Aoine","Sath"],n=["Do","Lu","Má","Cé","Dé","A","Sa"];return t.defineLocale("ga",{months:e,monthsShort:a,monthsParseExact:!0,weekdays:i,weekdaysShort:r,weekdaysMin:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Inniu ag] LT",nextDay:"[Amárach ag] LT",nextWeek:"dddd [ag] LT",lastDay:"[Inné ag] LT",lastWeek:"dddd [seo caite] [ag] LT",sameElse:"L"},relativeTime:{future:"i %s",past:"%s ó shin",s:"cúpla soicind",ss:"%d soicind",m:"nóiméad",mm:"%d nóiméad",h:"uair an chloig",hh:"%d uair an chloig",d:"lá",dd:"%d lá",M:"mí",MM:"%d míonna",y:"bliain",yy:"%d bliain"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(t){return t+(1===t?"d":t%10==2?"na":"mh")},week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e=["Am Faoilleach","An Gearran","Am Màrt","An Giblean","An Cèitean","An t-Ògmhios","An t-Iuchar","An Lùnastal","An t-Sultain","An Dàmhair","An t-Samhain","An Dùbhlachd"],a=["Faoi","Gear","Màrt","Gibl","Cèit","Ògmh","Iuch","Lùn","Sult","Dàmh","Samh","Dùbh"],i=["Didòmhnaich","Diluain","Dimàirt","Diciadain","Diardaoin","Dihaoine","Disathairne"],r=["Did","Dil","Dim","Dic","Dia","Dih","Dis"],n=["Dò","Lu","Mà","Ci","Ar","Ha","Sa"];return t.defineLocale("gd",{months:e,monthsShort:a,monthsParseExact:!0,weekdays:i,weekdaysShort:r,weekdaysMin:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[An-diugh aig] LT",nextDay:"[A-màireach aig] LT",nextWeek:"dddd [aig] LT",lastDay:"[An-dè aig] LT",lastWeek:"dddd [seo chaidh] [aig] LT",sameElse:"L"},relativeTime:{future:"ann an %s",past:"bho chionn %s",s:"beagan diogan",ss:"%d diogan",m:"mionaid",mm:"%d mionaidean",h:"uair",hh:"%d uairean",d:"latha",dd:"%d latha",M:"mìos",MM:"%d mìosan",y:"bliadhna",yy:"%d bliadhna"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(t){return t+(1===t?"d":t%10==2?"na":"mh")},week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("gl",{months:"xaneiro_febreiro_marzo_abril_maio_xuño_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),monthsShort:"xan._feb._mar._abr._mai._xuñ._xul._ago._set._out._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"domingo_luns_martes_mércores_xoves_venres_sábado".split("_"),weekdaysShort:"dom._lun._mar._mér._xov._ven._sáb.".split("_"),weekdaysMin:"do_lu_ma_mé_xo_ve_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"ás":"á")+"] LT"},nextDay:function(){return"[mañá "+(1!==this.hours()?"ás":"á")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"ás":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"á":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"ás":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(t){return 0===t.indexOf("un")?"n"+t:"en "+t},past:"hai %s",s:"uns segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
function e(t,e,a,i){var r={s:["थोडया सॅकंडांनी","थोडे सॅकंड"],ss:[t+" सॅकंडांनी",t+" सॅकंड"],m:["एका मिणटान","एक मिनूट"],mm:[t+" मिणटांनी",t+" मिणटां"],h:["एका वरान","एक वर"],hh:[t+" वरांनी",t+" वरां"],d:["एका दिसान","एक दीस"],dd:[t+" दिसांनी",t+" दीस"],M:["एका म्हयन्यान","एक म्हयनो"],MM:[t+" म्हयन्यानी",t+" म्हयने"],y:["एका वर्सान","एक वर्स"],yy:[t+" वर्सांनी",t+" वर्सां"]};return i?r[a][0]:r[a][1]}return t.defineLocale("gom-deva",{months:{standalone:"जानेवारी_फेब्रुवारी_मार्च_एप्रील_मे_जून_जुलय_ऑगस्ट_सप्टेंबर_ऑक्टोबर_नोव्हेंबर_डिसेंबर".split("_"),format:"जानेवारीच्या_फेब्रुवारीच्या_मार्चाच्या_एप्रीलाच्या_मेयाच्या_जूनाच्या_जुलयाच्या_ऑगस्टाच्या_सप्टेंबराच्या_ऑक्टोबराच्या_नोव्हेंबराच्या_डिसेंबराच्या".split("_"),isFormat:/MMMM(\s)+D[oD]?/},monthsShort:"जाने._फेब्रु._मार्च_एप्री._मे_जून_जुल._ऑग._सप्टें._ऑक्टो._नोव्हें._डिसें.".split("_"),monthsParseExact:!0,weekdays:"आयतार_सोमार_मंगळार_बुधवार_बिरेस्तार_सुक्रार_शेनवार".split("_"),weekdaysShort:"आयत._सोम._मंगळ._बुध._ब्रेस्त._सुक्र._शेन.".split("_"),weekdaysMin:"आ_सो_मं_बु_ब्रे_सु_शे".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm [वाजतां]",LTS:"A h:mm:ss [वाजतां]",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm [वाजतां]",LLLL:"dddd, MMMM Do, YYYY, A h:mm [वाजतां]",llll:"ddd, D MMM YYYY, A h:mm [वाजतां]"},calendar:{sameDay:"[आयज] LT",nextDay:"[फाल्यां] LT",nextWeek:"[फुडलो] dddd[,] LT",lastDay:"[काल] LT",lastWeek:"[फाटलो] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s आदीं",s:e,ss:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}(वेर)/,ordinal:function(t,e){switch(e){case"D":return t+"वेर";default:case"M":case"Q":case"DDD":case"d":case"w":case"W":return t}},week:{dow:0,doy:3},meridiemParse:/राती|सकाळीं|दनपारां|सांजे/,meridiemHour:function(t,e){return 12===t&&(t=0),"राती"===e?t<4?t:t+12:"सकाळीं"===e?t:"दनपारां"===e?t>12?t:t+12:"सांजे"===e?t+12:void 0},meridiem:function(t,e,a){return t<4?"राती":t<12?"सकाळीं":t<16?"दनपारां":t<20?"सांजे":"राती"}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
function e(t,e,a,i){var r={s:["thoddea sekondamni","thodde sekond"],ss:[t+" sekondamni",t+" sekond"],m:["eka mintan","ek minut"],mm:[t+" mintamni",t+" mintam"],h:["eka voran","ek vor"],hh:[t+" voramni",t+" voram"],d:["eka disan","ek dis"],dd:[t+" disamni",t+" dis"],M:["eka mhoinean","ek mhoino"],MM:[t+" mhoineamni",t+" mhoine"],y:["eka vorsan","ek voros"],yy:[t+" vorsamni",t+" vorsam"]};return i?r[a][0]:r[a][1]}return t.defineLocale("gom-latn",{months:{standalone:"Janer_Febrer_Mars_Abril_Mai_Jun_Julai_Agost_Setembr_Otubr_Novembr_Dezembr".split("_"),format:"Janerachea_Febrerachea_Marsachea_Abrilachea_Maiachea_Junachea_Julaiachea_Agostachea_Setembrachea_Otubrachea_Novembrachea_Dezembrachea".split("_"),isFormat:/MMMM(\s)+D[oD]?/},monthsShort:"Jan._Feb._Mars_Abr._Mai_Jun_Jul._Ago._Set._Otu._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Aitar_Somar_Mongllar_Budhvar_Birestar_Sukrar_Son'var".split("_"),weekdaysShort:"Ait._Som._Mon._Bud._Bre._Suk._Son.".split("_"),weekdaysMin:"Ai_Sm_Mo_Bu_Br_Su_Sn".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm [vazta]",LTS:"A h:mm:ss [vazta]",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm [vazta]",LLLL:"dddd, MMMM Do, YYYY, A h:mm [vazta]",llll:"ddd, D MMM YYYY, A h:mm [vazta]"},calendar:{sameDay:"[Aiz] LT",nextDay:"[Faleam] LT",nextWeek:"[Fuddlo] dddd[,] LT",lastDay:"[Kal] LT",lastWeek:"[Fattlo] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s adim",s:e,ss:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}(er)/,ordinal:function(t,e){switch(e){case"D":return t+"er";default:case"M":case"Q":case"DDD":case"d":case"w":case"W":return t}},week:{dow:0,doy:3},meridiemParse:/rati|sokallim|donparam|sanje/,meridiemHour:function(t,e){return 12===t&&(t=0),"rati"===e?t<4?t:t+12:"sokallim"===e?t:"donparam"===e?t>12?t:t+12:"sanje"===e?t+12:void 0},meridiem:function(t,e,a){return t<4?"rati":t<12?"sokallim":t<16?"donparam":t<20?"sanje":"rati"}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e={1:"૧",2:"૨",3:"૩",4:"૪",5:"૫",6:"૬",7:"૭",8:"૮",9:"૯",0:"૦"},a={"૧":"1","૨":"2","૩":"3","૪":"4","૫":"5","૬":"6","૭":"7","૮":"8","૯":"9","૦":"0"};return t.defineLocale("gu",{months:"જાન્યુઆરી_ફેબ્રુઆરી_માર્ચ_એપ્રિલ_મે_જૂન_જુલાઈ_ઑગસ્ટ_સપ્ટેમ્બર_ઑક્ટ્બર_નવેમ્બર_ડિસેમ્બર".split("_"),monthsShort:"જાન્યુ._ફેબ્રુ._માર્ચ_એપ્રિ._મે_જૂન_જુલા._ઑગ._સપ્ટે._ઑક્ટ્._નવે._ડિસે.".split("_"),monthsParseExact:!0,weekdays:"રવિવાર_સોમવાર_મંગળવાર_બુધ્વાર_ગુરુવાર_શુક્રવાર_શનિવાર".split("_"),weekdaysShort:"રવિ_સોમ_મંગળ_બુધ્_ગુરુ_શુક્ર_શનિ".split("_"),weekdaysMin:"ર_સો_મં_બુ_ગુ_શુ_શ".split("_"),longDateFormat:{LT:"A h:mm વાગ્યે",LTS:"A h:mm:ss વાગ્યે",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm વાગ્યે",LLLL:"dddd, D MMMM YYYY, A h:mm વાગ્યે"},calendar:{sameDay:"[આજ] LT",nextDay:"[કાલે] LT",nextWeek:"dddd, LT",lastDay:"[ગઇકાલે] LT",lastWeek:"[પાછલા] dddd, LT",sameElse:"L"},relativeTime:{future:"%s મા",past:"%s પહેલા",s:"અમુક પળો",ss:"%d સેકંડ",m:"એક મિનિટ",mm:"%d મિનિટ",h:"એક કલાક",hh:"%d કલાક",d:"એક દિવસ",dd:"%d દિવસ",M:"એક મહિનો",MM:"%d મહિનો",y:"એક વર્ષ",yy:"%d વર્ષ"},preparse:function(t){return t.replace(/[૧૨૩૪૫૬૭૮૯૦]/g,function(t){return a[t]})},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]})},meridiemParse:/રાત|બપોર|સવાર|સાંજ/,meridiemHour:function(t,e){return 12===t&&(t=0),"રાત"===e?t<4?t:t+12:"સવાર"===e?t:"બપોર"===e?t>=10?t:t+12:"સાંજ"===e?t+12:void 0},meridiem:function(t,e,a){return t<4?"રાત":t<10?"સવાર":t<17?"બપોર":t<20?"સાંજ":"રાત"},week:{dow:0,doy:6}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("he",{months:"ינואר_פברואר_מרץ_אפריל_מאי_יוני_יולי_אוגוסט_ספטמבר_אוקטובר_נובמבר_דצמבר".split("_"),monthsShort:"ינו׳_פבר׳_מרץ_אפר׳_מאי_יוני_יולי_אוג׳_ספט׳_אוק׳_נוב׳_דצמ׳".split("_"),weekdays:"ראשון_שני_שלישי_רביעי_חמישי_שישי_שבת".split("_"),weekdaysShort:"א׳_ב׳_ג׳_ד׳_ה׳_ו׳_ש׳".split("_"),weekdaysMin:"א_ב_ג_ד_ה_ו_ש".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [ב]MMMM YYYY",LLL:"D [ב]MMMM YYYY HH:mm",LLLL:"dddd, D [ב]MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[היום ב־]LT",nextDay:"[מחר ב־]LT",nextWeek:"dddd [בשעה] LT",lastDay:"[אתמול ב־]LT",lastWeek:"[ביום] dddd [האחרון בשעה] LT",sameElse:"L"},relativeTime:{future:"בעוד %s",past:"לפני %s",s:"מספר שניות",ss:"%d שניות",m:"דקה",mm:"%d דקות",h:"שעה",hh:function(t){return 2===t?"שעתיים":t+" שעות"},d:"יום",dd:function(t){return 2===t?"יומיים":t+" ימים"},M:"חודש",MM:function(t){return 2===t?"חודשיים":t+" חודשים"},y:"שנה",yy:function(t){return 2===t?"שנתיים":t%10==0&&10!==t?t+" שנה":t+" שנים"}},meridiemParse:/אחה"צ|לפנה"צ|אחרי הצהריים|לפני הצהריים|לפנות בוקר|בבוקר|בערב/i,isPM:function(t){return/^(אחה"צ|אחרי הצהריים|בערב)$/.test(t)},meridiem:function(t,e,a){return t<5?"לפנות בוקר":t<10?"בבוקר":t<12?a?'לפנה"צ':"לפני הצהריים":t<18?a?'אחה"צ':"אחרי הצהריים":"בערב"}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},a={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"},i=[/^जन/i,/^फ़र|फर/i,/^मार्च/i,/^अप्रै/i,/^मई/i,/^जून/i,/^जुल/i,/^अग/i,/^सितं|सित/i,/^अक्टू/i,/^नव|नवं/i,/^दिसं|दिस/i],r=[/^जन/i,/^फ़र/i,/^मार्च/i,/^अप्रै/i,/^मई/i,/^जून/i,/^जुल/i,/^अग/i,/^सित/i,/^अक्टू/i,/^नव/i,/^दिस/i];return t.defineLocale("hi",{months:{format:"जनवरी_फ़रवरी_मार्च_अप्रैल_मई_जून_जुलाई_अगस्त_सितम्बर_अक्टूबर_नवम्बर_दिसम्बर".split("_"),standalone:"जनवरी_फरवरी_मार्च_अप्रैल_मई_जून_जुलाई_अगस्त_सितंबर_अक्टूबर_नवंबर_दिसंबर".split("_")},monthsShort:"जन._फ़र._मार्च_अप्रै._मई_जून_जुल._अग._सित._अक्टू._नव._दिस.".split("_"),weekdays:"रविवार_सोमवार_मंगलवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगल_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm बजे",LTS:"A h:mm:ss बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm बजे",LLLL:"dddd, D MMMM YYYY, A h:mm बजे"},monthsParse:i,longMonthsParse:i,shortMonthsParse:r,monthsRegex:/^(जनवरी|जन\.?|फ़रवरी|फरवरी|फ़र\.?|मार्च?|अप्रैल|अप्रै\.?|मई?|जून?|जुलाई|जुल\.?|अगस्त|अग\.?|सितम्बर|सितंबर|सित\.?|अक्टूबर|अक्टू\.?|नवम्बर|नवंबर|नव\.?|दिसम्बर|दिसंबर|दिस\.?)/i,monthsShortRegex:/^(जनवरी|जन\.?|फ़रवरी|फरवरी|फ़र\.?|मार्च?|अप्रैल|अप्रै\.?|मई?|जून?|जुलाई|जुल\.?|अगस्त|अग\.?|सितम्बर|सितंबर|सित\.?|अक्टूबर|अक्टू\.?|नवम्बर|नवंबर|नव\.?|दिसम्बर|दिसंबर|दिस\.?)/i,monthsStrictRegex:/^(जनवरी?|फ़रवरी|फरवरी?|मार्च?|अप्रैल?|मई?|जून?|जुलाई?|अगस्त?|सितम्बर|सितंबर|सित?\.?|अक्टूबर|अक्टू\.?|नवम्बर|नवंबर?|दिसम्बर|दिसंबर?)/i,monthsShortStrictRegex:/^(जन\.?|फ़र\.?|मार्च?|अप्रै\.?|मई?|जून?|जुल\.?|अग\.?|सित\.?|अक्टू\.?|नव\.?|दिस\.?)/i,calendar:{sameDay:"[आज] LT",nextDay:"[कल] LT",nextWeek:"dddd, LT",lastDay:"[कल] LT",lastWeek:"[पिछले] dddd, LT",sameElse:"L"},relativeTime:{future:"%s में",past:"%s पहले",s:"कुछ ही क्षण",ss:"%d सेकंड",m:"एक मिनट",mm:"%d मिनट",h:"एक घंटा",hh:"%d घंटे",d:"एक दिन",dd:"%d दिन",M:"एक महीने",MM:"%d महीने",y:"एक वर्ष",yy:"%d वर्ष"},preparse:function(t){return t.replace(/[१२३४५६७८९०]/g,function(t){return a[t]})},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]})},meridiemParse:/रात|सुबह|दोपहर|शाम/,meridiemHour:function(t,e){return 12===t&&(t=0),"रात"===e?t<4?t:t+12:"सुबह"===e?t:"दोपहर"===e?t>=10?t:t+12:"शाम"===e?t+12:void 0},meridiem:function(t,e,a){return t<4?"रात":t<10?"सुबह":t<17?"दोपहर":t<20?"शाम":"रात"},week:{dow:0,doy:6}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
function e(t,e,a){var i=t+" ";switch(a){case"ss":return i+=1===t?"sekunda":2===t||3===t||4===t?"sekunde":"sekundi";case"m":return e?"jedna minuta":"jedne minute";case"mm":return i+=1===t?"minuta":2===t||3===t||4===t?"minute":"minuta";case"h":return e?"jedan sat":"jednog sata";case"hh":return i+=1===t?"sat":2===t||3===t||4===t?"sata":"sati";case"dd":return i+=1===t?"dan":"dana";case"MM":return i+=1===t?"mjesec":2===t||3===t||4===t?"mjeseca":"mjeseci";case"yy":return i+=1===t?"godina":2===t||3===t||4===t?"godine":"godina"}}return t.defineLocale("hr",{months:{format:"siječnja_veljače_ožujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),standalone:"siječanj_veljača_ožujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_")},monthsShort:"sij._velj._ožu._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"Do MMMM YYYY",LLL:"Do MMMM YYYY H:mm",LLLL:"dddd, Do MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:return"[prošlu] [nedjelju] [u] LT";case 3:return"[prošlu] [srijedu] [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:e,m:e,mm:e,h:e,hh:e,d:"dan",dd:e,M:"mjesec",MM:e,y:"godinu",yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";function e(t,e,a,i){var r=t;switch(a){case"s":return i||e?"néhány másodperc":"néhány másodperce";case"ss":return r+(i||e)?" másodperc":" másodperce";case"m":return"egy"+(i||e?" perc":" perce");case"mm":return r+(i||e?" perc":" perce");case"h":return"egy"+(i||e?" óra":" órája");case"hh":return r+(i||e?" óra":" órája");case"d":return"egy"+(i||e?" nap":" napja");case"dd":return r+(i||e?" nap":" napja");case"M":return"egy"+(i||e?" hónap":" hónapja");case"MM":return r+(i||e?" hónap":" hónapja");case"y":return"egy"+(i||e?" év":" éve");case"yy":return r+(i||e?" év":" éve")}return""}function a(t){return(t?"":"[múlt] ")+"["+i[this.day()]+"] LT[-kor]"}
//! moment.js locale configuration
var i="vasárnap hétfőn kedden szerdán csütörtökön pénteken szombaton".split(" ");return t.defineLocale("hu",{months:"január_február_március_április_május_június_július_augusztus_szeptember_október_november_december".split("_"),monthsShort:"jan._feb._márc._ápr._máj._jún._júl._aug._szept._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"vasárnap_hétfő_kedd_szerda_csütörtök_péntek_szombat".split("_"),weekdaysShort:"vas_hét_kedd_sze_csüt_pén_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(t){return"u"===t.charAt(1).toLowerCase()},meridiem:function(t,e,a){return t<12?!0===a?"de":"DE":!0===a?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return a.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return a.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s múlva",past:"%s",s:e,ss:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("hy-am",{months:{format:"հունվարի_փետրվարի_մարտի_ապրիլի_մայիսի_հունիսի_հուլիսի_օգոստոսի_սեպտեմբերի_հոկտեմբերի_նոյեմբերի_դեկտեմբերի".split("_"),standalone:"հունվար_փետրվար_մարտ_ապրիլ_մայիս_հունիս_հուլիս_օգոստոս_սեպտեմբեր_հոկտեմբեր_նոյեմբեր_դեկտեմբեր".split("_")},monthsShort:"հնվ_փտր_մրտ_ապր_մյս_հնս_հլս_օգս_սպտ_հկտ_նմբ_դկտ".split("_"),weekdays:"կիրակի_երկուշաբթի_երեքշաբթի_չորեքշաբթի_հինգշաբթի_ուրբաթ_շաբաթ".split("_"),weekdaysShort:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),weekdaysMin:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY թ.",LLL:"D MMMM YYYY թ., HH:mm",LLLL:"dddd, D MMMM YYYY թ., HH:mm"},calendar:{sameDay:"[այսօր] LT",nextDay:"[վաղը] LT",lastDay:"[երեկ] LT",nextWeek:function(){return"dddd [օրը ժամը] LT"},lastWeek:function(){return"[անցած] dddd [օրը ժամը] LT"},sameElse:"L"},relativeTime:{future:"%s հետո",past:"%s առաջ",s:"մի քանի վայրկյան",ss:"%d վայրկյան",m:"րոպե",mm:"%d րոպե",h:"ժամ",hh:"%d ժամ",d:"օր",dd:"%d օր",M:"ամիս",MM:"%d ամիս",y:"տարի",yy:"%d տարի"},meridiemParse:/գիշերվա|առավոտվա|ցերեկվա|երեկոյան/,isPM:function(t){return/^(ցերեկվա|երեկոյան)$/.test(t)},meridiem:function(t){return t<4?"գիշերվա":t<12?"առավոտվա":t<17?"ցերեկվա":"երեկոյան"},dayOfMonthOrdinalParse:/\d{1,2}|\d{1,2}-(ին|րդ)/,ordinal:function(t,e){switch(e){case"DDD":case"w":case"W":case"DDDo":return 1===t?t+"-ին":t+"-րդ";default:return t}},week:{dow:1,doy:7}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(t,e){return 12===t&&(t=0),"pagi"===e?t:"siang"===e?t>=11?t:t+12:"sore"===e||"malam"===e?t+12:void 0},meridiem:function(t,e,a){return t<11?"pagi":t<15?"siang":t<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",ss:"%d detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:0,doy:6}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
function e(t){return t%100==11||t%10!=1}function a(t,a,i,r){var n=t+" ";switch(i){case"s":return a||r?"nokkrar sekúndur":"nokkrum sekúndum";case"ss":return e(t)?n+(a||r?"sekúndur":"sekúndum"):n+"sekúnda";case"m":return a?"mínúta":"mínútu";case"mm":return e(t)?n+(a||r?"mínútur":"mínútum"):a?n+"mínúta":n+"mínútu";case"hh":return e(t)?n+(a||r?"klukkustundir":"klukkustundum"):n+"klukkustund";case"d":return a?"dagur":r?"dag":"degi";case"dd":return e(t)?a?n+"dagar":n+(r?"daga":"dögum"):a?n+"dagur":n+(r?"dag":"degi");case"M":return a?"mánuður":r?"mánuð":"mánuði";case"MM":return e(t)?a?n+"mánuðir":n+(r?"mánuði":"mánuðum"):a?n+"mánuður":n+(r?"mánuð":"mánuði");case"y":return a||r?"ár":"ári";case"yy":return e(t)?n+(a||r?"ár":"árum"):n+(a||r?"ár":"ári")}}return t.defineLocale("is",{months:"janúar_febrúar_mars_apríl_maí_júní_júlí_ágúst_september_október_nóvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_maí_jún_júl_ágú_sep_okt_nóv_des".split("_"),weekdays:"sunnudagur_mánudagur_þriðjudagur_miðvikudagur_fimmtudagur_föstudagur_laugardagur".split("_"),weekdaysShort:"sun_mán_þri_mið_fim_fös_lau".split("_"),weekdaysMin:"Su_Má_Þr_Mi_Fi_Fö_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[í dag kl.] LT",nextDay:"[á morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[í gær kl.] LT",lastWeek:"[síðasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s síðan",s:a,ss:a,m:a,mm:a,h:"klukkustund",hh:a,d:a,dd:a,M:a,MM:a,y:a,yy:a},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_lunedì_martedì_mercoledì_giovedì_venerdì_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:function(){return"[Oggi a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},nextDay:function(){return"[Domani a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},nextWeek:function(){return"dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},lastDay:function(){return"[Ieri a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},lastWeek:function(){switch(this.day()){case 0:return"[La scorsa] dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT";default:return"[Lo scorso] dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"}},sameElse:"L"},relativeTime:{future:"tra %s",past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",w:"una settimana",ww:"%d settimane",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("it-ch",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_lunedì_martedì_mercoledì_giovedì_venerdì_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(t){return(/^[0-9].+$/.test(t)?"tra":"in")+" "+t},past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("ja",{eras:[{since:"2019-05-01",offset:1,name:"令和",narrow:"㋿",abbr:"R"},{since:"1989-01-08",until:"2019-04-30",offset:1,name:"平成",narrow:"㍻",abbr:"H"},{since:"1926-12-25",until:"1989-01-07",offset:1,name:"昭和",narrow:"㍼",abbr:"S"},{since:"1912-07-30",until:"1926-12-24",offset:1,name:"大正",narrow:"㍽",abbr:"T"},{since:"1873-01-01",until:"1912-07-29",offset:6,name:"明治",narrow:"㍾",abbr:"M"},{since:"0001-01-01",until:"1873-12-31",offset:1,name:"西暦",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"紀元前",narrow:"BC",abbr:"BC"}],eraYearOrdinalRegex:/(元|\d+)年/,eraYearOrdinalParse:function(t,e){return"元"===e[1]?1:parseInt(e[1]||t,10)},months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日 dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日(ddd) HH:mm"},meridiemParse:/午前|午後/i,isPM:function(t){return"午後"===t},meridiem:function(t,e,a){return t<12?"午前":"午後"},calendar:{sameDay:"[今日] LT",nextDay:"[明日] LT",nextWeek:function(t){return t.week()!==this.week()?"[来週]dddd LT":"dddd LT"},lastDay:"[昨日] LT",lastWeek:function(t){return this.week()!==t.week()?"[先週]dddd LT":"dddd LT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}日/,ordinal:function(t,e){switch(e){case"y":return 1===t?"元年":t+"年";case"d":case"D":case"DDD":return t+"日";default:return t}},relativeTime:{future:"%s後",past:"%s前",s:"数秒",ss:"%d秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("jv",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(t,e){return 12===t&&(t=0),"enjing"===e?t:"siyang"===e?t>=11?t:t+12:"sonten"===e||"ndalu"===e?t+12:void 0},meridiem:function(t,e,a){return t<11?"enjing":t<15?"siyang":t<19?"sonten":"ndalu"},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",ss:"%d detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("ka",{months:"იანვარი_თებერვალი_მარტი_აპრილი_მაისი_ივნისი_ივლისი_აგვისტო_სექტემბერი_ოქტომბერი_ნოემბერი_დეკემბერი".split("_"),monthsShort:"იან_თებ_მარ_აპრ_მაი_ივნ_ივლ_აგვ_სექ_ოქტ_ნოე_დეკ".split("_"),weekdays:{standalone:"კვირა_ორშაბათი_სამშაბათი_ოთხშაბათი_ხუთშაბათი_პარასკევი_შაბათი".split("_"),format:"კვირას_ორშაბათს_სამშაბათს_ოთხშაბათს_ხუთშაბათს_პარასკევს_შაბათს".split("_"),isFormat:/(წინა|შემდეგ)/},weekdaysShort:"კვი_ორშ_სამ_ოთხ_ხუთ_პარ_შაბ".split("_"),weekdaysMin:"კვ_ორ_სა_ოთ_ხუ_პა_შა".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[დღეს] LT[-ზე]",nextDay:"[ხვალ] LT[-ზე]",lastDay:"[გუშინ] LT[-ზე]",nextWeek:"[შემდეგ] dddd LT[-ზე]",lastWeek:"[წინა] dddd LT-ზე",sameElse:"L"},relativeTime:{future:function(t){return t.replace(/(წამ|წუთ|საათ|წელ|დღ|თვ)(ი|ე)/,function(t,e,a){return"ი"===a?e+"ში":e+a+"ში"})},past:function(t){return/(წამი|წუთი|საათი|დღე|თვე)/.test(t)?t.replace(/(ი|ე)$/,"ის წინ"):/წელი/.test(t)?t.replace(/წელი$/,"წლის წინ"):t},s:"რამდენიმე წამი",ss:"%d წამი",m:"წუთი",mm:"%d წუთი",h:"საათი",hh:"%d საათი",d:"დღე",dd:"%d დღე",M:"თვე",MM:"%d თვე",y:"წელი",yy:"%d წელი"},dayOfMonthOrdinalParse:/0|1-ლი|მე-\d{1,2}|\d{1,2}-ე/,ordinal:function(t){return 0===t?t:1===t?t+"-ლი":t<20||t<=100&&t%20==0||t%100==0?"მე-"+t:t+"-ე"},week:{dow:1,doy:7}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e={0:"-ші",1:"-ші",2:"-ші",3:"-ші",4:"-ші",5:"-ші",6:"-шы",7:"-ші",8:"-ші",9:"-шы",10:"-шы",20:"-шы",30:"-шы",40:"-шы",50:"-ші",60:"-шы",70:"-ші",80:"-ші",90:"-шы",100:"-ші"};return t.defineLocale("kk",{months:"қаңтар_ақпан_наурыз_сәуір_мамыр_маусым_шілде_тамыз_қыркүйек_қазан_қараша_желтоқсан".split("_"),monthsShort:"қаң_ақп_нау_сәу_мам_мау_шіл_там_қыр_қаз_қар_жел".split("_"),weekdays:"жексенбі_дүйсенбі_сейсенбі_сәрсенбі_бейсенбі_жұма_сенбі".split("_"),weekdaysShort:"жек_дүй_сей_сәр_бей_жұм_сен".split("_"),weekdaysMin:"жк_дй_сй_ср_бй_жм_сн".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Бүгін сағат] LT",nextDay:"[Ертең сағат] LT",nextWeek:"dddd [сағат] LT",lastDay:"[Кеше сағат] LT",lastWeek:"[Өткен аптаның] dddd [сағат] LT",sameElse:"L"},relativeTime:{future:"%s ішінде",past:"%s бұрын",s:"бірнеше секунд",ss:"%d секунд",m:"бір минут",mm:"%d минут",h:"бір сағат",hh:"%d сағат",d:"бір күн",dd:"%d күн",M:"бір ай",MM:"%d ай",y:"бір жыл",yy:"%d жыл"},dayOfMonthOrdinalParse:/\d{1,2}-(ші|шы)/,ordinal:function(t){var a=t%10,i=t>=100?100:null;return t+(e[t]||e[a]||e[i])},week:{dow:1,doy:7}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e={1:"១",2:"២",3:"៣",4:"៤",5:"៥",6:"៦",7:"៧",8:"៨",9:"៩",0:"០"},a={"១":"1","២":"2","៣":"3","៤":"4","៥":"5","៦":"6","៧":"7","៨":"8","៩":"9","០":"0"};return t.defineLocale("km",{months:"មករា_កុម្ភៈ_មីនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),monthsShort:"មករា_កុម្ភៈ_មីនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),weekdays:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),weekdaysShort:"អា_ច_អ_ព_ព្រ_សុ_ស".split("_"),weekdaysMin:"អា_ច_អ_ព_ព្រ_សុ_ស".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/ព្រឹក|ល្ងាច/,isPM:function(t){return"ល្ងាច"===t},meridiem:function(t,e,a){return t<12?"ព្រឹក":"ល្ងាច"},calendar:{sameDay:"[ថ្ងៃនេះ ម៉ោង] LT",nextDay:"[ស្អែក ម៉ោង] LT",nextWeek:"dddd [ម៉ោង] LT",lastDay:"[ម្សិលមិញ ម៉ោង] LT",lastWeek:"dddd [សប្តាហ៍មុន] [ម៉ោង] LT",sameElse:"L"},relativeTime:{future:"%sទៀត",past:"%sមុន",s:"ប៉ុន្មានវិនាទី",ss:"%d វិនាទី",m:"មួយនាទី",mm:"%d នាទី",h:"មួយម៉ោង",hh:"%d ម៉ោង",d:"មួយថ្ងៃ",dd:"%d ថ្ងៃ",M:"មួយខែ",MM:"%d ខែ",y:"មួយឆ្នាំ",yy:"%d ឆ្នាំ"},dayOfMonthOrdinalParse:/ទី\d{1,2}/,ordinal:"ទី%d",preparse:function(t){return t.replace(/[១២៣៤៥៦៧៨៩០]/g,function(t){return a[t]})},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]})},week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e={1:"೧",2:"೨",3:"೩",4:"೪",5:"೫",6:"೬",7:"೭",8:"೮",9:"೯",0:"೦"},a={"೧":"1","೨":"2","೩":"3","೪":"4","೫":"5","೬":"6","೭":"7","೮":"8","೯":"9","೦":"0"};return t.defineLocale("kn",{months:"ಜನವರಿ_ಫೆಬ್ರವರಿ_ಮಾರ್ಚ್_ಏಪ್ರಿಲ್_ಮೇ_ಜೂನ್_ಜುಲೈ_ಆಗಸ್ಟ್_ಸೆಪ್ಟೆಂಬರ್_ಅಕ್ಟೋಬರ್_ನವೆಂಬರ್_ಡಿಸೆಂಬರ್".split("_"),monthsShort:"ಜನ_ಫೆಬ್ರ_ಮಾರ್ಚ್_ಏಪ್ರಿಲ್_ಮೇ_ಜೂನ್_ಜುಲೈ_ಆಗಸ್ಟ್_ಸೆಪ್ಟೆಂ_ಅಕ್ಟೋ_ನವೆಂ_ಡಿಸೆಂ".split("_"),monthsParseExact:!0,weekdays:"ಭಾನುವಾರ_ಸೋಮವಾರ_ಮಂಗಳವಾರ_ಬುಧವಾರ_ಗುರುವಾರ_ಶುಕ್ರವಾರ_ಶನಿವಾರ".split("_"),weekdaysShort:"ಭಾನು_ಸೋಮ_ಮಂಗಳ_ಬುಧ_ಗುರು_ಶುಕ್ರ_ಶನಿ".split("_"),weekdaysMin:"ಭಾ_ಸೋ_ಮಂ_ಬು_ಗು_ಶು_ಶ".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[ಇಂದು] LT",nextDay:"[ನಾಳೆ] LT",nextWeek:"dddd, LT",lastDay:"[ನಿನ್ನೆ] LT",lastWeek:"[ಕೊನೆಯ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ನಂತರ",past:"%s ಹಿಂದೆ",s:"ಕೆಲವು ಕ್ಷಣಗಳು",ss:"%d ಸೆಕೆಂಡುಗಳು",m:"ಒಂದು ನಿಮಿಷ",mm:"%d ನಿಮಿಷ",h:"ಒಂದು ಗಂಟೆ",hh:"%d ಗಂಟೆ",d:"ಒಂದು ದಿನ",dd:"%d ದಿನ",M:"ಒಂದು ತಿಂಗಳು",MM:"%d ತಿಂಗಳು",y:"ಒಂದು ವರ್ಷ",yy:"%d ವರ್ಷ"},preparse:function(t){return t.replace(/[೧೨೩೪೫೬೭೮೯೦]/g,function(t){return a[t]})},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]})},meridiemParse:/ರಾತ್ರಿ|ಬೆಳಿಗ್ಗೆ|ಮಧ್ಯಾಹ್ನ|ಸಂಜೆ/,meridiemHour:function(t,e){return 12===t&&(t=0),"ರಾತ್ರಿ"===e?t<4?t:t+12:"ಬೆಳಿಗ್ಗೆ"===e?t:"ಮಧ್ಯಾಹ್ನ"===e?t>=10?t:t+12:"ಸಂಜೆ"===e?t+12:void 0},meridiem:function(t,e,a){return t<4?"ರಾತ್ರಿ":t<10?"ಬೆಳಿಗ್ಗೆ":t<17?"ಮಧ್ಯಾಹ್ನ":t<20?"ಸಂಜೆ":"ರಾತ್ರಿ"},dayOfMonthOrdinalParse:/\d{1,2}(ನೇ)/,ordinal:function(t){return t+"ನೇ"},week:{dow:0,doy:6}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("ko",{months:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),monthsShort:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),weekdays:"일요일_월요일_화요일_수요일_목요일_금요일_토요일".split("_"),weekdaysShort:"일_월_화_수_목_금_토".split("_"),weekdaysMin:"일_월_화_수_목_금_토".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY년 MMMM D일",LLL:"YYYY년 MMMM D일 A h:mm",LLLL:"YYYY년 MMMM D일 dddd A h:mm",l:"YYYY.MM.DD.",ll:"YYYY년 MMMM D일",lll:"YYYY년 MMMM D일 A h:mm",llll:"YYYY년 MMMM D일 dddd A h:mm"},calendar:{sameDay:"오늘 LT",nextDay:"내일 LT",nextWeek:"dddd LT",lastDay:"어제 LT",lastWeek:"지난주 dddd LT",sameElse:"L"},relativeTime:{future:"%s 후",past:"%s 전",s:"몇 초",ss:"%d초",m:"1분",mm:"%d분",h:"한 시간",hh:"%d시간",d:"하루",dd:"%d일",M:"한 달",MM:"%d달",y:"일 년",yy:"%d년"},dayOfMonthOrdinalParse:/\d{1,2}(일|월|주)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"일";case"M":return t+"월";case"w":case"W":return t+"주";default:return t}},meridiemParse:/오전|오후/,isPM:function(t){return"오후"===t},meridiem:function(t,e,a){return t<12?"오전":"오후"}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},a={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"},i=["کانونی دووەم","شوبات","ئازار","نیسان","ئایار","حوزەیران","تەمموز","ئاب","ئەیلوول","تشرینی یەكەم","تشرینی دووەم","كانونی یەکەم"];return t.defineLocale("ku",{months:i,monthsShort:i,weekdays:"یه‌كشه‌ممه‌_دووشه‌ممه‌_سێشه‌ممه‌_چوارشه‌ممه‌_پێنجشه‌ممه‌_هه‌ینی_شه‌ممه‌".split("_"),weekdaysShort:"یه‌كشه‌م_دووشه‌م_سێشه‌م_چوارشه‌م_پێنجشه‌م_هه‌ینی_شه‌ممه‌".split("_"),weekdaysMin:"ی_د_س_چ_پ_ه_ش".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/ئێواره‌|به‌یانی/,isPM:function(t){return/ئێواره‌/.test(t)},meridiem:function(t,e,a){return t<12?"به‌یانی":"ئێواره‌"},calendar:{sameDay:"[ئه‌مرۆ كاتژمێر] LT",nextDay:"[به‌یانی كاتژمێر] LT",nextWeek:"dddd [كاتژمێر] LT",lastDay:"[دوێنێ كاتژمێر] LT",lastWeek:"dddd [كاتژمێر] LT",sameElse:"L"},relativeTime:{future:"له‌ %s",past:"%s",s:"چه‌ند چركه‌یه‌ك",ss:"چركه‌ %d",m:"یه‌ك خوله‌ك",mm:"%d خوله‌ك",h:"یه‌ك كاتژمێر",hh:"%d كاتژمێر",d:"یه‌ك ڕۆژ",dd:"%d ڕۆژ",M:"یه‌ك مانگ",MM:"%d مانگ",y:"یه‌ك ساڵ",yy:"%d ساڵ"},preparse:function(t){return t.replace(/[١٢٣٤٥٦٧٨٩٠]/g,function(t){return a[t]}).replace(/،/g,",")},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]}).replace(/,/g,"،")},week:{dow:6,doy:12}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e={0:"-чү",1:"-чи",2:"-чи",3:"-чү",4:"-чү",5:"-чи",6:"-чы",7:"-чи",8:"-чи",9:"-чу",10:"-чу",20:"-чы",30:"-чу",40:"-чы",50:"-чү",60:"-чы",70:"-чи",80:"-чи",90:"-чу",100:"-чү"};return t.defineLocale("ky",{months:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),monthsShort:"янв_фев_март_апр_май_июнь_июль_авг_сен_окт_ноя_дек".split("_"),weekdays:"Жекшемби_Дүйшөмбү_Шейшемби_Шаршемби_Бейшемби_Жума_Ишемби".split("_"),weekdaysShort:"Жек_Дүй_Шей_Шар_Бей_Жум_Ише".split("_"),weekdaysMin:"Жк_Дй_Шй_Шр_Бй_Жм_Иш".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Бүгүн саат] LT",nextDay:"[Эртең саат] LT",nextWeek:"dddd [саат] LT",lastDay:"[Кечээ саат] LT",lastWeek:"[Өткөн аптанын] dddd [күнү] [саат] LT",sameElse:"L"},relativeTime:{future:"%s ичинде",past:"%s мурун",s:"бирнече секунд",ss:"%d секунд",m:"бир мүнөт",mm:"%d мүнөт",h:"бир саат",hh:"%d саат",d:"бир күн",dd:"%d күн",M:"бир ай",MM:"%d ай",y:"бир жыл",yy:"%d жыл"},dayOfMonthOrdinalParse:/\d{1,2}-(чи|чы|чү|чу)/,ordinal:function(t){var a=t%10,i=t>=100?100:null;return t+(e[t]||e[a]||e[i])},week:{dow:1,doy:7}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
function e(t,e,a,i){var r={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return e?r[a][0]:r[a][1]}function a(t){return r(t.substr(0,t.indexOf(" ")))?"a "+t:"an "+t}function i(t){return r(t.substr(0,t.indexOf(" ")))?"viru "+t:"virun "+t}function r(t){if(t=parseInt(t,10),isNaN(t))return!1;if(t<0)return!0;if(t<10)return 4<=t&&t<=7;if(t<100){var e=t%10,a=t/10;return r(0===e?a:e)}if(t<1e4){for(;t>=10;)t/=10;return r(t)}return t/=1e3,r(t)}return t.defineLocale("lb",{months:"Januar_Februar_Mäerz_Abrëll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonndeg_Méindeg_Dënschdeg_Mëttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._Mé._Dë._Më._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mé_Dë_Më_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gëschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:a,past:i,s:"e puer Sekonnen",ss:"%d Sekonnen",m:e,mm:"%d Minutten",h:e,hh:"%d Stonnen",d:e,dd:"%d Deeg",M:e,MM:"%d Méint",y:e,yy:"%d Joer"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("lo",{months:"ມັງກອນ_ກຸມພາ_ມີນາ_ເມສາ_ພຶດສະພາ_ມິຖຸນາ_ກໍລະກົດ_ສິງຫາ_ກັນຍາ_ຕຸລາ_ພະຈິກ_ທັນວາ".split("_"),monthsShort:"ມັງກອນ_ກຸມພາ_ມີນາ_ເມສາ_ພຶດສະພາ_ມິຖຸນາ_ກໍລະກົດ_ສິງຫາ_ກັນຍາ_ຕຸລາ_ພະຈິກ_ທັນວາ".split("_"),weekdays:"ອາທິດ_ຈັນ_ອັງຄານ_ພຸດ_ພະຫັດ_ສຸກ_ເສົາ".split("_"),weekdaysShort:"ທິດ_ຈັນ_ອັງຄານ_ພຸດ_ພະຫັດ_ສຸກ_ເສົາ".split("_"),weekdaysMin:"ທ_ຈ_ອຄ_ພ_ພຫ_ສກ_ສ".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"ວັນdddd D MMMM YYYY HH:mm"},meridiemParse:/ຕອນເຊົ້າ|ຕອນແລງ/,isPM:function(t){return"ຕອນແລງ"===t},meridiem:function(t,e,a){return t<12?"ຕອນເຊົ້າ":"ຕອນແລງ"},calendar:{sameDay:"[ມື້ນີ້ເວລາ] LT",nextDay:"[ມື້ອື່ນເວລາ] LT",nextWeek:"[ວັນ]dddd[ໜ້າເວລາ] LT",lastDay:"[ມື້ວານນີ້ເວລາ] LT",lastWeek:"[ວັນ]dddd[ແລ້ວນີ້ເວລາ] LT",sameElse:"L"},relativeTime:{future:"ອີກ %s",past:"%sຜ່ານມາ",s:"ບໍ່ເທົ່າໃດວິນາທີ",ss:"%d ວິນາທີ",m:"1 ນາທີ",mm:"%d ນາທີ",h:"1 ຊົ່ວໂມງ",hh:"%d ຊົ່ວໂມງ",d:"1 ມື້",dd:"%d ມື້",M:"1 ເດືອນ",MM:"%d ເດືອນ",y:"1 ປີ",yy:"%d ປີ"},dayOfMonthOrdinalParse:/(ທີ່)\d{1,2}/,ordinal:function(t){return"ທີ່"+t}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";function e(t,e,a,i){return e?"kelios sekundės":i?"kelių sekundžių":"kelias sekundes"}function a(t,e,a,i){return e?r(a)[0]:i?r(a)[1]:r(a)[2]}function i(t){return t%10==0||t>10&&t<20}function r(t){return s[t].split("_")}function n(t,e,n,s){var o=t+" ";return 1===t?o+a(t,e,n[0],s):e?o+(i(t)?r(n)[1]:r(n)[0]):s?o+r(n)[1]:o+(i(t)?r(n)[1]:r(n)[2])}
//! moment.js locale configuration
var s={ss:"sekundė_sekundžių_sekundes",m:"minutė_minutės_minutę",mm:"minutės_minučių_minutes",h:"valanda_valandos_valandą",hh:"valandos_valandų_valandas",d:"diena_dienos_dieną",dd:"dienos_dienų_dienas",M:"mėnuo_mėnesio_mėnesį",MM:"mėnesiai_mėnesių_mėnesius",y:"metai_metų_metus",yy:"metai_metų_metus"};return t.defineLocale("lt",{months:{format:"sausio_vasario_kovo_balandžio_gegužės_birželio_liepos_rugpjūčio_rugsėjo_spalio_lapkričio_gruodžio".split("_"),standalone:"sausis_vasaris_kovas_balandis_gegužė_birželis_liepa_rugpjūtis_rugsėjis_spalis_lapkritis_gruodis".split("_"),isFormat:/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?|MMMM?(\[[^\[\]]*\]|\s)+D[oD]?/},monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:{format:"sekmadienį_pirmadienį_antradienį_trečiadienį_ketvirtadienį_penktadienį_šeštadienį".split("_"),standalone:"sekmadienis_pirmadienis_antradienis_trečiadienis_ketvirtadienis_penktadienis_šeštadienis".split("_"),isFormat:/dddd HH:mm/},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_Šeš".split("_"),weekdaysMin:"S_P_A_T_K_Pn_Š".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[Šiandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Praėjusį] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prieš %s",s:e,ss:n,m:a,mm:n,h:a,hh:n,d:a,dd:n,M:a,MM:n,y:a,yy:n},dayOfMonthOrdinalParse:/\d{1,2}-oji/,ordinal:function(t){return t+"-oji"},week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";function e(t,e,a){return a?e%10==1&&e%100!=11?t[2]:t[3]:e%10==1&&e%100!=11?t[0]:t[1]}function a(t,a,i){return t+" "+e(n[i],t,a)}function i(t,a,i){return e(n[i],t,a)}function r(t,e){return e?"dažas sekundes":"dažām sekundēm"}
//! moment.js locale configuration
var n={ss:"sekundes_sekundēm_sekunde_sekundes".split("_"),m:"minūtes_minūtēm_minūte_minūtes".split("_"),mm:"minūtes_minūtēm_minūte_minūtes".split("_"),h:"stundas_stundām_stunda_stundas".split("_"),hh:"stundas_stundām_stunda_stundas".split("_"),d:"dienas_dienām_diena_dienas".split("_"),dd:"dienas_dienām_diena_dienas".split("_"),M:"mēneša_mēnešiem_mēnesis_mēneši".split("_"),MM:"mēneša_mēnešiem_mēnesis_mēneši".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")};return t.defineLocale("lv",{months:"janvāris_februāris_marts_aprīlis_maijs_jūnijs_jūlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jūn_jūl_aug_sep_okt_nov_dec".split("_"),weekdays:"svētdiena_pirmdiena_otrdiena_trešdiena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[Šodien pulksten] LT",nextDay:"[Rīt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagājušā] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"pēc %s",past:"pirms %s",s:r,ss:a,m:i,mm:a,h:i,hh:a,d:i,dd:a,M:i,MM:a,y:i,yy:a},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e={words:{ss:["sekund","sekunda","sekundi"],m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(t,e){return 1===t?e[0]:t>=2&&t<=4?e[1]:e[2]},translate:function(t,a,i){var r=e.words[i];return 1===i.length?a?r[0]:r[1]:t+" "+e.correctGrammaticalCase(t,r)}};return t.defineLocale("me",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){return["[prošle] [nedjelje] [u] LT","[prošlog] [ponedjeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srijede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",ss:e.translate,m:e.translate,mm:e.translate,h:e.translate,hh:e.translate,d:"dan",dd:e.translate,M:"mjesec",MM:e.translate,y:"godinu",yy:e.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("mi",{months:"Kohi-tāte_Hui-tanguru_Poutū-te-rangi_Paenga-whāwhā_Haratua_Pipiri_Hōngoingoi_Here-turi-kōkā_Mahuru_Whiringa-ā-nuku_Whiringa-ā-rangi_Hakihea".split("_"),monthsShort:"Kohi_Hui_Pou_Pae_Hara_Pipi_Hōngoi_Here_Mahu_Whi-nu_Whi-ra_Haki".split("_"),monthsRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,2}/i,weekdays:"Rātapu_Mane_Tūrei_Wenerei_Tāite_Paraire_Hātarei".split("_"),weekdaysShort:"Ta_Ma_Tū_We_Tāi_Pa_Hā".split("_"),weekdaysMin:"Ta_Ma_Tū_We_Tāi_Pa_Hā".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [i] HH:mm",LLLL:"dddd, D MMMM YYYY [i] HH:mm"},calendar:{sameDay:"[i teie mahana, i] LT",nextDay:"[apopo i] LT",nextWeek:"dddd [i] LT",lastDay:"[inanahi i] LT",lastWeek:"dddd [whakamutunga i] LT",sameElse:"L"},relativeTime:{future:"i roto i %s",past:"%s i mua",s:"te hēkona ruarua",ss:"%d hēkona",m:"he meneti",mm:"%d meneti",h:"te haora",hh:"%d haora",d:"he ra",dd:"%d ra",M:"he marama",MM:"%d marama",y:"he tau",yy:"%d tau"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("mk",{months:"јануари_февруари_март_април_мај_јуни_јули_август_септември_октомври_ноември_декември".split("_"),monthsShort:"јан_фев_мар_апр_мај_јун_јул_авг_сеп_окт_ное_дек".split("_"),weekdays:"недела_понеделник_вторник_среда_четврток_петок_сабота".split("_"),weekdaysShort:"нед_пон_вто_сре_чет_пет_саб".split("_"),weekdaysMin:"нe_пo_вт_ср_че_пе_сa".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[Денес во] LT",nextDay:"[Утре во] LT",nextWeek:"[Во] dddd [во] LT",lastDay:"[Вчера во] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[Изминатата] dddd [во] LT";case 1:case 2:case 4:case 5:return"[Изминатиот] dddd [во] LT"}},sameElse:"L"},relativeTime:{future:"за %s",past:"пред %s",s:"неколку секунди",ss:"%d секунди",m:"една минута",mm:"%d минути",h:"еден час",hh:"%d часа",d:"еден ден",dd:"%d дена",M:"еден месец",MM:"%d месеци",y:"една година",yy:"%d години"},dayOfMonthOrdinalParse:/\d{1,2}-(ев|ен|ти|ви|ри|ми)/,ordinal:function(t){var e=t%10,a=t%100;return 0===t?t+"-ев":0===a?t+"-ен":a>10&&a<20?t+"-ти":1===e?t+"-ви":2===e?t+"-ри":7===e||8===e?t+"-ми":t+"-ти"},week:{dow:1,doy:7}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("ml",{months:"ജനുവരി_ഫെബ്രുവരി_മാർച്ച്_ഏപ്രിൽ_മേയ്_ജൂൺ_ജൂലൈ_ഓഗസ്റ്റ്_സെപ്റ്റംബർ_ഒക്ടോബർ_നവംബർ_ഡിസംബർ".split("_"),monthsShort:"ജനു._ഫെബ്രു._മാർ._ഏപ്രി._മേയ്_ജൂൺ_ജൂലൈ._ഓഗ._സെപ്റ്റ._ഒക്ടോ._നവം._ഡിസം.".split("_"),monthsParseExact:!0,weekdays:"ഞായറാഴ്ച_തിങ്കളാഴ്ച_ചൊവ്വാഴ്ച_ബുധനാഴ്ച_വ്യാഴാഴ്ച_വെള്ളിയാഴ്ച_ശനിയാഴ്ച".split("_"),weekdaysShort:"ഞായർ_തിങ്കൾ_ചൊവ്വ_ബുധൻ_വ്യാഴം_വെള്ളി_ശനി".split("_"),weekdaysMin:"ഞാ_തി_ചൊ_ബു_വ്യാ_വെ_ശ".split("_"),longDateFormat:{LT:"A h:mm -നു",LTS:"A h:mm:ss -നു",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -നു",LLLL:"dddd, D MMMM YYYY, A h:mm -നു"},calendar:{sameDay:"[ഇന്ന്] LT",nextDay:"[നാളെ] LT",nextWeek:"dddd, LT",lastDay:"[ഇന്നലെ] LT",lastWeek:"[കഴിഞ്ഞ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s കഴിഞ്ഞ്",past:"%s മുൻപ്",s:"അൽപ നിമിഷങ്ങൾ",ss:"%d സെക്കൻഡ്",m:"ഒരു മിനിറ്റ്",mm:"%d മിനിറ്റ്",h:"ഒരു മണിക്കൂർ",hh:"%d മണിക്കൂർ",d:"ഒരു ദിവസം",dd:"%d ദിവസം",M:"ഒരു മാസം",MM:"%d മാസം",y:"ഒരു വർഷം",yy:"%d വർഷം"},meridiemParse:/രാത്രി|രാവിലെ|ഉച്ച കഴിഞ്ഞ്|വൈകുന്നേരം|രാത്രി/i,meridiemHour:function(t,e){return 12===t&&(t=0),"രാത്രി"===e&&t>=4||"ഉച്ച കഴിഞ്ഞ്"===e||"വൈകുന്നേരം"===e?t+12:t},meridiem:function(t,e,a){return t<4?"രാത്രി":t<12?"രാവിലെ":t<17?"ഉച്ച കഴിഞ്ഞ്":t<20?"വൈകുന്നേരം":"രാത്രി"}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
function e(t,e,a,i){switch(a){case"s":return e?"хэдхэн секунд":"хэдхэн секундын";case"ss":return t+(e?" секунд":" секундын");case"m":case"mm":return t+(e?" минут":" минутын");case"h":case"hh":return t+(e?" цаг":" цагийн");case"d":case"dd":return t+(e?" өдөр":" өдрийн");case"M":case"MM":return t+(e?" сар":" сарын");case"y":case"yy":return t+(e?" жил":" жилийн");default:return t}}return t.defineLocale("mn",{months:"Нэгдүгээр сар_Хоёрдугаар сар_Гуравдугаар сар_Дөрөвдүгээр сар_Тавдугаар сар_Зургадугаар сар_Долдугаар сар_Наймдугаар сар_Есдүгээр сар_Аравдугаар сар_Арван нэгдүгээр сар_Арван хоёрдугаар сар".split("_"),monthsShort:"1 сар_2 сар_3 сар_4 сар_5 сар_6 сар_7 сар_8 сар_9 сар_10 сар_11 сар_12 сар".split("_"),monthsParseExact:!0,weekdays:"Ням_Даваа_Мягмар_Лхагва_Пүрэв_Баасан_Бямба".split("_"),weekdaysShort:"Ням_Дав_Мяг_Лха_Пүр_Баа_Бям".split("_"),weekdaysMin:"Ня_Да_Мя_Лх_Пү_Ба_Бя".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY оны MMMMын D",LLL:"YYYY оны MMMMын D HH:mm",LLLL:"dddd, YYYY оны MMMMын D HH:mm"},meridiemParse:/ҮӨ|ҮХ/i,isPM:function(t){return"ҮХ"===t},meridiem:function(t,e,a){return t<12?"ҮӨ":"ҮХ"},calendar:{sameDay:"[Өнөөдөр] LT",nextDay:"[Маргааш] LT",nextWeek:"[Ирэх] dddd LT",lastDay:"[Өчигдөр] LT",lastWeek:"[Өнгөрсөн] dddd LT",sameElse:"L"},relativeTime:{future:"%s дараа",past:"%s өмнө",s:e,ss:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2} өдөр/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+" өдөр";default:return t}}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";function e(t,e,a,i){var r="";if(e)switch(a){case"s":r="काही सेकंद";break;case"ss":r="%d सेकंद";break;case"m":r="एक मिनिट";break;case"mm":r="%d मिनिटे";break;case"h":r="एक तास";break;case"hh":r="%d तास";break;case"d":r="एक दिवस";break;case"dd":r="%d दिवस";break;case"M":r="एक महिना";break;case"MM":r="%d महिने";break;case"y":r="एक वर्ष";break;case"yy":r="%d वर्षे"}else switch(a){case"s":r="काही सेकंदां";break;case"ss":r="%d सेकंदां";break;case"m":r="एका मिनिटा";break;case"mm":r="%d मिनिटां";break;case"h":r="एका तासा";break;case"hh":r="%d तासां";break;case"d":r="एका दिवसा";break;case"dd":r="%d दिवसां";break;case"M":r="एका महिन्या";break;case"MM":r="%d महिन्यां";break;case"y":r="एका वर्षा";break;case"yy":r="%d वर्षां"}return r.replace(/%d/i,t)}
//! moment.js locale configuration
var a={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},i={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};return t.defineLocale("mr",{months:"जानेवारी_फेब्रुवारी_मार्च_एप्रिल_मे_जून_जुलै_ऑगस्ट_सप्टेंबर_ऑक्टोबर_नोव्हेंबर_डिसेंबर".split("_"),monthsShort:"जाने._फेब्रु._मार्च._एप्रि._मे._जून._जुलै._ऑग._सप्टें._ऑक्टो._नोव्हें._डिसें.".split("_"),monthsParseExact:!0,weekdays:"रविवार_सोमवार_मंगळवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगळ_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm वाजता",LTS:"A h:mm:ss वाजता",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm वाजता",LLLL:"dddd, D MMMM YYYY, A h:mm वाजता"},calendar:{sameDay:"[आज] LT",nextDay:"[उद्या] LT",nextWeek:"dddd, LT",lastDay:"[काल] LT",lastWeek:"[मागील] dddd, LT",sameElse:"L"},relativeTime:{future:"%sमध्ये",past:"%sपूर्वी",s:e,ss:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},preparse:function(t){return t.replace(/[१२३४५६७८९०]/g,function(t){return i[t]})},postformat:function(t){return t.replace(/\d/g,function(t){return a[t]})},meridiemParse:/पहाटे|सकाळी|दुपारी|सायंकाळी|रात्री/,meridiemHour:function(t,e){return 12===t&&(t=0),"पहाटे"===e||"सकाळी"===e?t:"दुपारी"===e||"सायंकाळी"===e||"रात्री"===e?t>=12?t:t+12:void 0},meridiem:function(t,e,a){return t>=0&&t<6?"पहाटे":t<12?"सकाळी":t<17?"दुपारी":t<20?"सायंकाळी":"रात्री"},week:{dow:0,doy:6}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(t,e){return 12===t&&(t=0),"pagi"===e?t:"tengahari"===e?t>=11?t:t+12:"petang"===e||"malam"===e?t+12:void 0},meridiem:function(t,e,a){return t<11?"pagi":t<15?"tengahari":t<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(t,e){return 12===t&&(t=0),"pagi"===e?t:"tengahari"===e?t>=11?t:t+12:"petang"===e||"malam"===e?t+12:void 0},meridiem:function(t,e,a){return t<11?"pagi":t<15?"tengahari":t<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("mt",{months:"Jannar_Frar_Marzu_April_Mejju_Ġunju_Lulju_Awwissu_Settembru_Ottubru_Novembru_Diċembru".split("_"),monthsShort:"Jan_Fra_Mar_Apr_Mej_Ġun_Lul_Aww_Set_Ott_Nov_Diċ".split("_"),weekdays:"Il-Ħadd_It-Tnejn_It-Tlieta_L-Erbgħa_Il-Ħamis_Il-Ġimgħa_Is-Sibt".split("_"),weekdaysShort:"Ħad_Tne_Tli_Erb_Ħam_Ġim_Sib".split("_"),weekdaysMin:"Ħa_Tn_Tl_Er_Ħa_Ġi_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Illum fil-]LT",nextDay:"[Għada fil-]LT",nextWeek:"dddd [fil-]LT",lastDay:"[Il-bieraħ fil-]LT",lastWeek:"dddd [li għadda] [fil-]LT",sameElse:"L"},relativeTime:{future:"f’ %s",past:"%s ilu",s:"ftit sekondi",ss:"%d sekondi",m:"minuta",mm:"%d minuti",h:"siegħa",hh:"%d siegħat",d:"ġurnata",dd:"%d ġranet",M:"xahar",MM:"%d xhur",y:"sena",yy:"%d sni"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e={1:"၁",2:"၂",3:"၃",4:"၄",5:"၅",6:"၆",7:"၇",8:"၈",9:"၉",0:"၀"},a={"၁":"1","၂":"2","၃":"3","၄":"4","၅":"5","၆":"6","၇":"7","၈":"8","၉":"9","၀":"0"};return t.defineLocale("my",{months:"ဇန်နဝါရီ_ဖေဖော်ဝါရီ_မတ်_ဧပြီ_မေ_ဇွန်_ဇူလိုင်_သြဂုတ်_စက်တင်ဘာ_အောက်တိုဘာ_နိုဝင်ဘာ_ဒီဇင်ဘာ".split("_"),monthsShort:"ဇန်_ဖေ_မတ်_ပြီ_မေ_ဇွန်_လိုင်_သြ_စက်_အောက်_နို_ဒီ".split("_"),weekdays:"တနင်္ဂနွေ_တနင်္လာ_အင်္ဂါ_ဗုဒ္ဓဟူး_ကြာသပတေး_သောကြာ_စနေ".split("_"),weekdaysShort:"နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ".split("_"),weekdaysMin:"နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ယနေ.] LT [မှာ]",nextDay:"[မနက်ဖြန်] LT [မှာ]",nextWeek:"dddd LT [မှာ]",lastDay:"[မနေ.က] LT [မှာ]",lastWeek:"[ပြီးခဲ့သော] dddd LT [မှာ]",sameElse:"L"},relativeTime:{future:"လာမည့် %s မှာ",past:"လွန်ခဲ့သော %s က",s:"စက္ကန်.အနည်းငယ်",ss:"%d စက္ကန့်",m:"တစ်မိနစ်",mm:"%d မိနစ်",h:"တစ်နာရီ",hh:"%d နာရီ",d:"တစ်ရက်",dd:"%d ရက်",M:"တစ်လ",MM:"%d လ",y:"တစ်နှစ်",yy:"%d နှစ်"},preparse:function(t){return t.replace(/[၁၂၃၄၅၆၇၈၉၀]/g,function(t){return a[t]})},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]})},week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_apr._mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"sø._ma._ti._on._to._fr._lø.".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i går kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"noen sekunder",ss:"%d sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",w:"en uke",ww:"%d uker",M:"en måned",MM:"%d måneder",y:"ett år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},a={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};return t.defineLocale("ne",{months:"जनवरी_फेब्रुवरी_मार्च_अप्रिल_मई_जुन_जुलाई_अगष्ट_सेप्टेम्बर_अक्टोबर_नोभेम्बर_डिसेम्बर".split("_"),monthsShort:"जन._फेब्रु._मार्च_अप्रि._मई_जुन_जुलाई._अग._सेप्ट._अक्टो._नोभे._डिसे.".split("_"),monthsParseExact:!0,weekdays:"आइतबार_सोमबार_मङ्गलबार_बुधबार_बिहिबार_शुक्रबार_शनिबार".split("_"),weekdaysShort:"आइत._सोम._मङ्गल._बुध._बिहि._शुक्र._शनि.".split("_"),weekdaysMin:"आ._सो._मं._बु._बि._शु._श.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"Aको h:mm बजे",LTS:"Aको h:mm:ss बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, Aको h:mm बजे",LLLL:"dddd, D MMMM YYYY, Aको h:mm बजे"},preparse:function(t){return t.replace(/[१२३४५६७८९०]/g,function(t){return a[t]})},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]})},meridiemParse:/राति|बिहान|दिउँसो|साँझ/,meridiemHour:function(t,e){return 12===t&&(t=0),"राति"===e?t<4?t:t+12:"बिहान"===e?t:"दिउँसो"===e?t>=10?t:t+12:"साँझ"===e?t+12:void 0},meridiem:function(t,e,a){return t<3?"राति":t<12?"बिहान":t<16?"दिउँसो":t<20?"साँझ":"राति"},calendar:{sameDay:"[आज] LT",nextDay:"[भोलि] LT",nextWeek:"[आउँदो] dddd[,] LT",lastDay:"[हिजो] LT",lastWeek:"[गएको] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%sमा",past:"%s अगाडि",s:"केही क्षण",ss:"%d सेकेण्ड",m:"एक मिनेट",mm:"%d मिनेट",h:"एक घण्टा",hh:"%d घण्टा",d:"एक दिन",dd:"%d दिन",M:"एक महिना",MM:"%d महिना",y:"एक बर्ष",yy:"%d बर्ष"},week:{dow:0,doy:6}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),a="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),i=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],r=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;return t.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(t,i){return t?/-MMM-/.test(i)?a[t.month()]:e[t.month()]:e},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"één minuut",mm:"%d minuten",h:"één uur",hh:"%d uur",d:"één dag",dd:"%d dagen",w:"één week",ww:"%d weken",M:"één maand",MM:"%d maanden",y:"één jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(t){return t+(1===t||8===t||t>=20?"ste":"de")},week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),a="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),i=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],r=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;return t.defineLocale("nl-be",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(t,i){return t?/-MMM-/.test(i)?a[t.month()]:e[t.month()]:e},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"één minuut",mm:"%d minuten",h:"één uur",hh:"%d uur",d:"één dag",dd:"%d dagen",M:"één maand",MM:"%d maanden",y:"één jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(t){return t+(1===t||8===t||t>=20?"ste":"de")},week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_apr._mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"sundag_måndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"su._må._ty._on._to._fr._lau.".split("_"),weekdaysMin:"su_må_ty_on_to_fr_la".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I går klokka] LT",lastWeek:"[Føregåande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s sidan",s:"nokre sekund",ss:"%d sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",w:"ei veke",ww:"%d veker",M:"ein månad",MM:"%d månader",y:"eit år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("oc-lnc",{months:{standalone:"genièr_febrièr_març_abril_mai_junh_julhet_agost_setembre_octòbre_novembre_decembre".split("_"),format:"de genièr_de febrièr_de març_d'abril_de mai_de junh_de julhet_d'agost_de setembre_d'octòbre_de novembre_de decembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._març_abr._mai_junh_julh._ago._set._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"dimenge_diluns_dimars_dimècres_dijòus_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dm._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dm_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:"[uèi a] LT",nextDay:"[deman a] LT",nextWeek:"dddd [a] LT",lastDay:"[ièr a] LT",lastWeek:"dddd [passat a] LT",sameElse:"L"},relativeTime:{future:"d'aquí %s",past:"fa %s",s:"unas segondas",ss:"%d segondas",m:"una minuta",mm:"%d minutas",h:"una ora",hh:"%d oras",d:"un jorn",dd:"%d jorns",M:"un mes",MM:"%d meses",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t|è|a)/,ordinal:function(t,e){var a=1===t?"r":2===t?"n":3===t?"r":4===t?"t":"è";return"w"!==e&&"W"!==e||(a="a"),t+a},week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e={1:"੧",2:"੨",3:"੩",4:"੪",5:"੫",6:"੬",7:"੭",8:"੮",9:"੯",0:"੦"},a={"੧":"1","੨":"2","੩":"3","੪":"4","੫":"5","੬":"6","੭":"7","੮":"8","੯":"9","੦":"0"};return t.defineLocale("pa-in",{months:"ਜਨਵਰੀ_ਫ਼ਰਵਰੀ_ਮਾਰਚ_ਅਪ੍ਰੈਲ_ਮਈ_ਜੂਨ_ਜੁਲਾਈ_ਅਗਸਤ_ਸਤੰਬਰ_ਅਕਤੂਬਰ_ਨਵੰਬਰ_ਦਸੰਬਰ".split("_"),monthsShort:"ਜਨਵਰੀ_ਫ਼ਰਵਰੀ_ਮਾਰਚ_ਅਪ੍ਰੈਲ_ਮਈ_ਜੂਨ_ਜੁਲਾਈ_ਅਗਸਤ_ਸਤੰਬਰ_ਅਕਤੂਬਰ_ਨਵੰਬਰ_ਦਸੰਬਰ".split("_"),weekdays:"ਐਤਵਾਰ_ਸੋਮਵਾਰ_ਮੰਗਲਵਾਰ_ਬੁਧਵਾਰ_ਵੀਰਵਾਰ_ਸ਼ੁੱਕਰਵਾਰ_ਸ਼ਨੀਚਰਵਾਰ".split("_"),weekdaysShort:"ਐਤ_ਸੋਮ_ਮੰਗਲ_ਬੁਧ_ਵੀਰ_ਸ਼ੁਕਰ_ਸ਼ਨੀ".split("_"),weekdaysMin:"ਐਤ_ਸੋਮ_ਮੰਗਲ_ਬੁਧ_ਵੀਰ_ਸ਼ੁਕਰ_ਸ਼ਨੀ".split("_"),longDateFormat:{LT:"A h:mm ਵਜੇ",LTS:"A h:mm:ss ਵਜੇ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ਵਜੇ",LLLL:"dddd, D MMMM YYYY, A h:mm ਵਜੇ"},calendar:{sameDay:"[ਅਜ] LT",nextDay:"[ਕਲ] LT",nextWeek:"[ਅਗਲਾ] dddd, LT",lastDay:"[ਕਲ] LT",lastWeek:"[ਪਿਛਲੇ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ਵਿੱਚ",past:"%s ਪਿਛਲੇ",s:"ਕੁਝ ਸਕਿੰਟ",ss:"%d ਸਕਿੰਟ",m:"ਇਕ ਮਿੰਟ",mm:"%d ਮਿੰਟ",h:"ਇੱਕ ਘੰਟਾ",hh:"%d ਘੰਟੇ",d:"ਇੱਕ ਦਿਨ",dd:"%d ਦਿਨ",M:"ਇੱਕ ਮਹੀਨਾ",MM:"%d ਮਹੀਨੇ",y:"ਇੱਕ ਸਾਲ",yy:"%d ਸਾਲ"},preparse:function(t){return t.replace(/[੧੨੩੪੫੬੭੮੯੦]/g,function(t){return a[t]})},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]})},meridiemParse:/ਰਾਤ|ਸਵੇਰ|ਦੁਪਹਿਰ|ਸ਼ਾਮ/,meridiemHour:function(t,e){return 12===t&&(t=0),"ਰਾਤ"===e?t<4?t:t+12:"ਸਵੇਰ"===e?t:"ਦੁਪਹਿਰ"===e?t>=10?t:t+12:"ਸ਼ਾਮ"===e?t+12:void 0},meridiem:function(t,e,a){return t<4?"ਰਾਤ":t<10?"ਸਵੇਰ":t<17?"ਦੁਪਹਿਰ":t<20?"ਸ਼ਾਮ":"ਰਾਤ"},week:{dow:0,doy:6}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";function e(t){return t%10<5&&t%10>1&&~~(t/10)%10!=1}function a(t,a,i){var r=t+" ";switch(i){case"ss":return r+(e(t)?"sekundy":"sekund");case"m":return a?"minuta":"minutę";case"mm":return r+(e(t)?"minuty":"minut");case"h":return a?"godzina":"godzinę";case"hh":return r+(e(t)?"godziny":"godzin");case"ww":return r+(e(t)?"tygodnie":"tygodni");case"MM":return r+(e(t)?"miesiące":"miesięcy");case"yy":return r+(e(t)?"lata":"lat")}}
//! moment.js locale configuration
var i="styczeń_luty_marzec_kwiecień_maj_czerwiec_lipiec_sierpień_wrzesień_październik_listopad_grudzień".split("_"),r="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_września_października_listopada_grudnia".split("_"),n=[/^sty/i,/^lut/i,/^mar/i,/^kwi/i,/^maj/i,/^cze/i,/^lip/i,/^sie/i,/^wrz/i,/^paź/i,/^lis/i,/^gru/i];return t.defineLocale("pl",{months:function(t,e){return t?/D MMMM/.test(e)?r[t.month()]:i[t.month()]:i},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_paź_lis_gru".split("_"),monthsParse:n,longMonthsParse:n,shortMonthsParse:n,weekdays:"niedziela_poniedziałek_wtorek_środa_czwartek_piątek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_śr_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_Śr_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dziś o] LT",nextDay:"[Jutro o] LT",nextWeek:function(){switch(this.day()){case 0:return"[W niedzielę o] LT";case 2:return"[We wtorek o] LT";case 3:return"[W środę o] LT";case 6:return"[W sobotę o] LT";default:return"[W] dddd [o] LT"}},lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zeszłą niedzielę o] LT";case 3:return"[W zeszłą środę o] LT";case 6:return"[W zeszłą sobotę o] LT";default:return"[W zeszły] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",ss:a,m:a,mm:a,h:a,hh:a,d:"1 dzień",dd:"%d dni",w:"tydzień",ww:a,M:"miesiąc",MM:a,y:"rok",yy:a},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("pt",{months:"janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"Domingo_Segunda-feira_Terça-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sábado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),weekdaysMin:"Do_2ª_3ª_4ª_5ª_6ª_Sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"há %s",s:"segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",w:"uma semana",ww:"%d semanas",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("pt-br",{months:"janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_terça-feira_quarta-feira_quinta-feira_sexta-feira_sábado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sáb".split("_"),weekdaysMin:"do_2ª_3ª_4ª_5ª_6ª_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [às] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [às] HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"há %s",s:"poucos segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",invalidDate:"Data inválida"})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
function e(t,e,a){var i={ss:"secunde",mm:"minute",hh:"ore",dd:"zile",ww:"săptămâni",MM:"luni",yy:"ani"},r=" ";return(t%100>=20||t>=100&&t%100==0)&&(r=" de "),t+r+i[a]}return t.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._feb._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"duminică_luni_marți_miercuri_joi_vineri_sâmbătă".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sâm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_Sâ".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mâine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s în urmă",s:"câteva secunde",ss:e,m:"un minut",mm:e,h:"o oră",hh:e,d:"o zi",dd:e,w:"o săptămână",ww:e,M:"o lună",MM:e,y:"un an",yy:e},week:{dow:1,doy:7}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
function e(t,e){var a=t.split("_");return e%10==1&&e%100!=11?a[0]:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?a[1]:a[2]}function a(t,a,i){var r={ss:a?"секунда_секунды_секунд":"секунду_секунды_секунд",mm:a?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",ww:"неделя_недели_недель",MM:"месяц_месяца_месяцев",yy:"год_года_лет"};return"m"===i?a?"минута":"минуту":t+" "+e(r[i],+t)}var i=[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i];return t.defineLocale("ru",{months:{format:"января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),standalone:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_")},monthsShort:{format:"янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),standalone:"янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_")},weekdays:{standalone:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),format:"воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_"),isFormat:/\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?] ?dddd/},weekdaysShort:"вс_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),monthsParse:i,longMonthsParse:i,shortMonthsParse:i,monthsRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsShortRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsStrictRegex:/^(январ[яь]|феврал[яь]|марта?|апрел[яь]|ма[яй]|июн[яь]|июл[яь]|августа?|сентябр[яь]|октябр[яь]|ноябр[яь]|декабр[яь])/i,monthsShortStrictRegex:/^(янв\.|февр?\.|мар[т.]|апр\.|ма[яй]|июн[ья.]|июл[ья.]|авг\.|сент?\.|окт\.|нояб?\.|дек\.)/i,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., H:mm",LLLL:"dddd, D MMMM YYYY г., H:mm"},calendar:{sameDay:"[Сегодня, в] LT",nextDay:"[Завтра, в] LT",lastDay:"[Вчера, в] LT",nextWeek:function(t){if(t.week()===this.week())return 2===this.day()?"[Во] dddd, [в] LT":"[В] dddd, [в] LT";switch(this.day()){case 0:return"[В следующее] dddd, [в] LT";case 1:case 2:case 4:return"[В следующий] dddd, [в] LT";case 3:case 5:case 6:return"[В следующую] dddd, [в] LT"}},lastWeek:function(t){if(t.week()===this.week())return 2===this.day()?"[Во] dddd, [в] LT":"[В] dddd, [в] LT";switch(this.day()){case 0:return"[В прошлое] dddd, [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd, [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd, [в] LT"}},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",ss:a,m:a,mm:a,h:"час",hh:a,d:"день",dd:a,w:"неделя",ww:a,M:"месяц",MM:a,y:"год",yy:a},meridiemParse:/ночи|утра|дня|вечера/i,isPM:function(t){return/^(дня|вечера)$/.test(t)},meridiem:function(t,e,a){return t<4?"ночи":t<12?"утра":t<17?"дня":"вечера"},dayOfMonthOrdinalParse:/\d{1,2}-(й|го|я)/,ordinal:function(t,e){switch(e){case"M":case"d":case"DDD":return t+"-й";case"D":return t+"-го";case"w":case"W":return t+"-я";default:return t}},week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e=["جنوري","فيبروري","مارچ","اپريل","مئي","جون","جولاءِ","آگسٽ","سيپٽمبر","آڪٽوبر","نومبر","ڊسمبر"],a=["آچر","سومر","اڱارو","اربع","خميس","جمع","ڇنڇر"];return t.defineLocale("sd",{months:e,monthsShort:e,weekdays:a,weekdaysShort:a,weekdaysMin:a,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd، D MMMM YYYY HH:mm"},meridiemParse:/صبح|شام/,isPM:function(t){return"شام"===t},meridiem:function(t,e,a){return t<12?"صبح":"شام"},calendar:{sameDay:"[اڄ] LT",nextDay:"[سڀاڻي] LT",nextWeek:"dddd [اڳين هفتي تي] LT",lastDay:"[ڪالهه] LT",lastWeek:"[گزريل هفتي] dddd [تي] LT",sameElse:"L"},relativeTime:{future:"%s پوء",past:"%s اڳ",s:"چند سيڪنڊ",ss:"%d سيڪنڊ",m:"هڪ منٽ",mm:"%d منٽ",h:"هڪ ڪلاڪ",hh:"%d ڪلاڪ",d:"هڪ ڏينهن",dd:"%d ڏينهن",M:"هڪ مهينو",MM:"%d مهينا",y:"هڪ سال",yy:"%d سال"},preparse:function(t){return t.replace(/،/g,",")},postformat:function(t){return t.replace(/,/g,"،")},week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("se",{months:"ođđajagemánnu_guovvamánnu_njukčamánnu_cuoŋománnu_miessemánnu_geassemánnu_suoidnemánnu_borgemánnu_čakčamánnu_golggotmánnu_skábmamánnu_juovlamánnu".split("_"),monthsShort:"ođđj_guov_njuk_cuo_mies_geas_suoi_borg_čakč_golg_skáb_juov".split("_"),weekdays:"sotnabeaivi_vuossárga_maŋŋebárga_gaskavahkku_duorastat_bearjadat_lávvardat".split("_"),weekdaysShort:"sotn_vuos_maŋ_gask_duor_bear_láv".split("_"),weekdaysMin:"s_v_m_g_d_b_L".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"MMMM D. [b.] YYYY",LLL:"MMMM D. [b.] YYYY [ti.] HH:mm",LLLL:"dddd, MMMM D. [b.] YYYY [ti.] HH:mm"},calendar:{sameDay:"[otne ti] LT",nextDay:"[ihttin ti] LT",nextWeek:"dddd [ti] LT",lastDay:"[ikte ti] LT",lastWeek:"[ovddit] dddd [ti] LT",sameElse:"L"},relativeTime:{future:"%s geažes",past:"maŋit %s",s:"moadde sekunddat",ss:"%d sekunddat",m:"okta minuhta",mm:"%d minuhtat",h:"okta diimmu",hh:"%d diimmut",d:"okta beaivi",dd:"%d beaivvit",M:"okta mánnu",MM:"%d mánut",y:"okta jahki",yy:"%d jagit"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("si",{months:"ජනවාරි_පෙබරවාරි_මාර්තු_අප්‍රේල්_මැයි_ජූනි_ජූලි_අගෝස්තු_සැප්තැම්බර්_ඔක්තෝබර්_නොවැම්බර්_දෙසැම්බර්".split("_"),monthsShort:"ජන_පෙබ_මාර්_අප්_මැයි_ජූනි_ජූලි_අගෝ_සැප්_ඔක්_නොවැ_දෙසැ".split("_"),weekdays:"ඉරිදා_සඳුදා_අඟහරුවාදා_බදාදා_බ්‍රහස්පතින්දා_සිකුරාදා_සෙනසුරාදා".split("_"),weekdaysShort:"ඉරි_සඳු_අඟ_බදා_බ්‍රහ_සිකු_සෙන".split("_"),weekdaysMin:"ඉ_ස_අ_බ_බ්‍ර_සි_සෙ".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [වැනි] dddd, a h:mm:ss"},calendar:{sameDay:"[අද] LT[ට]",nextDay:"[හෙට] LT[ට]",nextWeek:"dddd LT[ට]",lastDay:"[ඊයේ] LT[ට]",lastWeek:"[පසුගිය] dddd LT[ට]",sameElse:"L"},relativeTime:{future:"%sකින්",past:"%sකට පෙර",s:"තත්පර කිහිපය",ss:"තත්පර %d",m:"මිනිත්තුව",mm:"මිනිත්තු %d",h:"පැය",hh:"පැය %d",d:"දිනය",dd:"දින %d",M:"මාසය",MM:"මාස %d",y:"වසර",yy:"වසර %d"},dayOfMonthOrdinalParse:/\d{1,2} වැනි/,ordinal:function(t){return t+" වැනි"},meridiemParse:/පෙර වරු|පස් වරු|පෙ.ව|ප.ව./,isPM:function(t){return"ප.ව."===t||"පස් වරු"===t},meridiem:function(t,e,a){return t>11?a?"ප.ව.":"පස් වරු":a?"පෙ.ව.":"පෙර වරු"}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";function e(t){return t>1&&t<5}function a(t,a,i,r){var n=t+" ";switch(i){case"s":return a||r?"pár sekúnd":"pár sekundami";case"ss":return a||r?n+(e(t)?"sekundy":"sekúnd"):n+"sekundami";case"m":return a?"minúta":r?"minútu":"minútou";case"mm":return a||r?n+(e(t)?"minúty":"minút"):n+"minútami";case"h":return a?"hodina":r?"hodinu":"hodinou";case"hh":return a||r?n+(e(t)?"hodiny":"hodín"):n+"hodinami";case"d":return a||r?"deň":"dňom";case"dd":return a||r?n+(e(t)?"dni":"dní"):n+"dňami";case"M":return a||r?"mesiac":"mesiacom";case"MM":return a||r?n+(e(t)?"mesiace":"mesiacov"):n+"mesiacmi";case"y":return a||r?"rok":"rokom";case"yy":return a||r?n+(e(t)?"roky":"rokov"):n+"rokmi"}}
//! moment.js locale configuration
var i="január_február_marec_apríl_máj_jún_júl_august_september_október_november_december".split("_"),r="jan_feb_mar_apr_máj_jún_júl_aug_sep_okt_nov_dec".split("_");return t.defineLocale("sk",{months:i,monthsShort:r,weekdays:"nedeľa_pondelok_utorok_streda_štvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_št_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_št_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeľu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo štvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[včera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulú nedeľu o] LT";case 1:case 2:return"[minulý] dddd [o] LT";case 3:return"[minulú stredu o] LT";case 4:case 5:return"[minulý] dddd [o] LT";case 6:return"[minulú sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:a,ss:a,m:a,mm:a,h:a,hh:a,d:a,dd:a,M:a,MM:a,y:a,yy:a},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
function e(t,e,a,i){var r=t+" ";switch(a){case"s":return e||i?"nekaj sekund":"nekaj sekundami";case"ss":return r+=1===t?e?"sekundo":"sekundi":2===t?e||i?"sekundi":"sekundah":t<5?e||i?"sekunde":"sekundah":"sekund";case"m":return e?"ena minuta":"eno minuto";case"mm":return r+=1===t?e?"minuta":"minuto":2===t?e||i?"minuti":"minutama":t<5?e||i?"minute":"minutami":e||i?"minut":"minutami";case"h":return e?"ena ura":"eno uro";case"hh":return r+=1===t?e?"ura":"uro":2===t?e||i?"uri":"urama":t<5?e||i?"ure":"urami":e||i?"ur":"urami";case"d":return e||i?"en dan":"enim dnem";case"dd":return r+=1===t?e||i?"dan":"dnem":2===t?e||i?"dni":"dnevoma":e||i?"dni":"dnevi";case"M":return e||i?"en mesec":"enim mesecem";case"MM":return r+=1===t?e||i?"mesec":"mesecem":2===t?e||i?"meseca":"mesecema":t<5?e||i?"mesece":"meseci":e||i?"mesecev":"meseci";case"y":return e||i?"eno leto":"enim letom";case"yy":return r+=1===t?e||i?"leto":"letom":2===t?e||i?"leti":"letoma":t<5?e||i?"leta":"leti":e||i?"let":"leti"}}return t.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljek_torek_sreda_četrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._čet._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_če_pe_so".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[včeraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prejšnjo] [nedeljo] [ob] LT";case 3:return"[prejšnjo] [sredo] [ob] LT";case 6:return"[prejšnjo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prejšnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"čez %s",past:"pred %s",s:e,ss:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nëntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nën_Dhj".split("_"),weekdays:"E Diel_E Hënë_E Martë_E Mërkurë_E Enjte_E Premte_E Shtunë".split("_"),weekdaysShort:"Die_Hën_Mar_Mër_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_Më_E_P_Sh".split("_"),weekdaysParseExact:!0,meridiemParse:/PD|MD/,isPM:function(t){return"M"===t.charAt(0)},meridiem:function(t,e,a){return t<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot në] LT",nextDay:"[Nesër në] LT",nextWeek:"dddd [në] LT",lastDay:"[Dje në] LT",lastWeek:"dddd [e kaluar në] LT",sameElse:"L"},relativeTime:{future:"në %s",past:"%s më parë",s:"disa sekonda",ss:"%d sekonda",m:"një minutë",mm:"%d minuta",h:"një orë",hh:"%d orë",d:"një ditë",dd:"%d ditë",M:"një muaj",MM:"%d muaj",y:"një vit",yy:"%d vite"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e={words:{ss:["sekunda","sekunde","sekundi"],m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(t,e){return 1===t?e[0]:t>=2&&t<=4?e[1]:e[2]},translate:function(t,a,i){var r=e.words[i];return 1===i.length?a?r[0]:r[1]:t+" "+e.correctGrammaticalCase(t,r)}};return t.defineLocale("sr",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljak_utorak_sreda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sre._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D. M. YYYY.",LL:"D. MMMM YYYY.",LLL:"D. MMMM YYYY. H:mm",LLLL:"dddd, D. MMMM YYYY. H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){return["[prošle] [nedelje] [u] LT","[prošlog] [ponedeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",ss:e.translate,m:e.translate,mm:e.translate,h:e.translate,hh:e.translate,d:"dan",dd:e.translate,M:"mesec",MM:e.translate,y:"godinu",yy:e.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e={words:{ss:["секунда","секунде","секунди"],m:["један минут","једне минуте"],mm:["минут","минуте","минута"],h:["један сат","једног сата"],hh:["сат","сата","сати"],dd:["дан","дана","дана"],MM:["месец","месеца","месеци"],yy:["година","године","година"]},correctGrammaticalCase:function(t,e){return 1===t?e[0]:t>=2&&t<=4?e[1]:e[2]},translate:function(t,a,i){var r=e.words[i];return 1===i.length?a?r[0]:r[1]:t+" "+e.correctGrammaticalCase(t,r)}};return t.defineLocale("sr-cyrl",{months:"јануар_фебруар_март_април_мај_јун_јул_август_септембар_октобар_новембар_децембар".split("_"),monthsShort:"јан._феб._мар._апр._мај_јун_јул_авг._сеп._окт._нов._дец.".split("_"),monthsParseExact:!0,weekdays:"недеља_понедељак_уторак_среда_четвртак_петак_субота".split("_"),weekdaysShort:"нед._пон._уто._сре._чет._пет._суб.".split("_"),weekdaysMin:"не_по_ут_ср_че_пе_су".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D. M. YYYY.",LL:"D. MMMM YYYY.",LLL:"D. MMMM YYYY. H:mm",LLLL:"dddd, D. MMMM YYYY. H:mm"},calendar:{sameDay:"[данас у] LT",nextDay:"[сутра у] LT",nextWeek:function(){switch(this.day()){case 0:return"[у] [недељу] [у] LT";case 3:return"[у] [среду] [у] LT";case 6:return"[у] [суботу] [у] LT";case 1:case 2:case 4:case 5:return"[у] dddd [у] LT"}},lastDay:"[јуче у] LT",lastWeek:function(){return["[прошле] [недеље] [у] LT","[прошлог] [понедељка] [у] LT","[прошлог] [уторка] [у] LT","[прошле] [среде] [у] LT","[прошлог] [четвртка] [у] LT","[прошлог] [петка] [у] LT","[прошле] [суботе] [у] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"за %s",past:"пре %s",s:"неколико секунди",ss:e.translate,m:e.translate,mm:e.translate,h:e.translate,hh:e.translate,d:"дан",dd:e.translate,M:"месец",MM:e.translate,y:"годину",yy:e.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("ss",{months:"Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split("_"),monthsShort:"Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo".split("_"),weekdays:"Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo".split("_"),weekdaysShort:"Lis_Umb_Lsb_Les_Lsi_Lsh_Umg".split("_"),weekdaysMin:"Li_Us_Lb_Lt_Ls_Lh_Ug".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Namuhla nga] LT",nextDay:"[Kusasa nga] LT",nextWeek:"dddd [nga] LT",lastDay:"[Itolo nga] LT",lastWeek:"dddd [leliphelile] [nga] LT",sameElse:"L"},relativeTime:{future:"nga %s",past:"wenteka nga %s",s:"emizuzwana lomcane",ss:"%d mzuzwana",m:"umzuzu",mm:"%d emizuzu",h:"lihora",hh:"%d emahora",d:"lilanga",dd:"%d emalanga",M:"inyanga",MM:"%d tinyanga",y:"umnyaka",yy:"%d iminyaka"},meridiemParse:/ekuseni|emini|entsambama|ebusuku/,meridiem:function(t,e,a){return t<11?"ekuseni":t<15?"emini":t<19?"entsambama":"ebusuku"},meridiemHour:function(t,e){return 12===t&&(t=0),"ekuseni"===e?t:"emini"===e?t>=11?t:t+12:"entsambama"===e||"ebusuku"===e?0===t?0:t+12:void 0},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"söndag_måndag_tisdag_onsdag_torsdag_fredag_lördag".split("_"),weekdaysShort:"sön_mån_tis_ons_tor_fre_lör".split("_"),weekdaysMin:"sö_må_ti_on_to_fr_lö".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igår] LT",nextWeek:"[På] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"för %s sedan",s:"några sekunder",ss:"%d sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en månad",MM:"%d månader",y:"ett år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}(\:e|\:a)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?":e":1===e?":a":2===e?":a":":e")},week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("sw",{months:"Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des".split("_"),weekdays:"Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi".split("_"),weekdaysShort:"Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos".split("_"),weekdaysMin:"J2_J3_J4_J5_Al_Ij_J1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"hh:mm A",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[leo saa] LT",nextDay:"[kesho saa] LT",nextWeek:"[wiki ijayo] dddd [saat] LT",lastDay:"[jana] LT",lastWeek:"[wiki iliyopita] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s baadaye",past:"tokea %s",s:"hivi punde",ss:"sekunde %d",m:"dakika moja",mm:"dakika %d",h:"saa limoja",hh:"masaa %d",d:"siku moja",dd:"siku %d",M:"mwezi mmoja",MM:"miezi %d",y:"mwaka mmoja",yy:"miaka %d"},week:{dow:1,doy:7}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e={1:"௧",2:"௨",3:"௩",4:"௪",5:"௫",6:"௬",7:"௭",8:"௮",9:"௯",0:"௦"},a={"௧":"1","௨":"2","௩":"3","௪":"4","௫":"5","௬":"6","௭":"7","௮":"8","௯":"9","௦":"0"};return t.defineLocale("ta",{months:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),monthsShort:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),weekdays:"ஞாயிற்றுக்கிழமை_திங்கட்கிழமை_செவ்வாய்கிழமை_புதன்கிழமை_வியாழக்கிழமை_வெள்ளிக்கிழமை_சனிக்கிழமை".split("_"),weekdaysShort:"ஞாயிறு_திங்கள்_செவ்வாய்_புதன்_வியாழன்_வெள்ளி_சனி".split("_"),weekdaysMin:"ஞா_தி_செ_பு_வி_வெ_ச".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[இன்று] LT",nextDay:"[நாளை] LT",nextWeek:"dddd, LT",lastDay:"[நேற்று] LT",lastWeek:"[கடந்த வாரம்] dddd, LT",sameElse:"L"},relativeTime:{future:"%s இல்",past:"%s முன்",s:"ஒரு சில விநாடிகள்",ss:"%d விநாடிகள்",m:"ஒரு நிமிடம்",mm:"%d நிமிடங்கள்",h:"ஒரு மணி நேரம்",hh:"%d மணி நேரம்",d:"ஒரு நாள்",dd:"%d நாட்கள்",M:"ஒரு மாதம்",MM:"%d மாதங்கள்",y:"ஒரு வருடம்",yy:"%d ஆண்டுகள்"},dayOfMonthOrdinalParse:/\d{1,2}வது/,ordinal:function(t){return t+"வது"},preparse:function(t){return t.replace(/[௧௨௩௪௫௬௭௮௯௦]/g,function(t){return a[t]})},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]})},meridiemParse:/யாமம்|வைகறை|காலை|நண்பகல்|எற்பாடு|மாலை/,meridiem:function(t,e,a){return t<2?" யாமம்":t<6?" வைகறை":t<10?" காலை":t<14?" நண்பகல்":t<18?" எற்பாடு":t<22?" மாலை":" யாமம்"},meridiemHour:function(t,e){return 12===t&&(t=0),"யாமம்"===e?t<2?t:t+12:"வைகறை"===e||"காலை"===e?t:"நண்பகல்"===e&&t>=10?t:t+12},week:{dow:0,doy:6}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("te",{months:"జనవరి_ఫిబ్రవరి_మార్చి_ఏప్రిల్_మే_జూన్_జులై_ఆగస్టు_సెప్టెంబర్_అక్టోబర్_నవంబర్_డిసెంబర్".split("_"),monthsShort:"జన._ఫిబ్ర._మార్చి_ఏప్రి._మే_జూన్_జులై_ఆగ._సెప్._అక్టో._నవ._డిసె.".split("_"),monthsParseExact:!0,weekdays:"ఆదివారం_సోమవారం_మంగళవారం_బుధవారం_గురువారం_శుక్రవారం_శనివారం".split("_"),weekdaysShort:"ఆది_సోమ_మంగళ_బుధ_గురు_శుక్ర_శని".split("_"),weekdaysMin:"ఆ_సో_మం_బు_గు_శు_శ".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[నేడు] LT",nextDay:"[రేపు] LT",nextWeek:"dddd, LT",lastDay:"[నిన్న] LT",lastWeek:"[గత] dddd, LT",sameElse:"L"},relativeTime:{future:"%s లో",past:"%s క్రితం",s:"కొన్ని క్షణాలు",ss:"%d సెకన్లు",m:"ఒక నిమిషం",mm:"%d నిమిషాలు",h:"ఒక గంట",hh:"%d గంటలు",d:"ఒక రోజు",dd:"%d రోజులు",M:"ఒక నెల",MM:"%d నెలలు",y:"ఒక సంవత్సరం",yy:"%d సంవత్సరాలు"},dayOfMonthOrdinalParse:/\d{1,2}వ/,ordinal:"%dవ",meridiemParse:/రాత్రి|ఉదయం|మధ్యాహ్నం|సాయంత్రం/,meridiemHour:function(t,e){return 12===t&&(t=0),"రాత్రి"===e?t<4?t:t+12:"ఉదయం"===e?t:"మధ్యాహ్నం"===e?t>=10?t:t+12:"సాయంత్రం"===e?t+12:void 0},meridiem:function(t,e,a){return t<4?"రాత్రి":t<10?"ఉదయం":t<17?"మధ్యాహ్నం":t<20?"సాయంత్రం":"రాత్రి"},week:{dow:0,doy:6}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("tet",{months:"Janeiru_Fevereiru_Marsu_Abril_Maiu_Juñu_Jullu_Agustu_Setembru_Outubru_Novembru_Dezembru".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingu_Segunda_Tersa_Kuarta_Kinta_Sesta_Sabadu".split("_"),weekdaysShort:"Dom_Seg_Ters_Kua_Kint_Sest_Sab".split("_"),weekdaysMin:"Do_Seg_Te_Ku_Ki_Ses_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Ohin iha] LT",nextDay:"[Aban iha] LT",nextWeek:"dddd [iha] LT",lastDay:"[Horiseik iha] LT",lastWeek:"dddd [semana kotuk] [iha] LT",sameElse:"L"},relativeTime:{future:"iha %s",past:"%s liuba",s:"segundu balun",ss:"segundu %d",m:"minutu ida",mm:"minutu %d",h:"oras ida",hh:"oras %d",d:"loron ida",dd:"loron %d",M:"fulan ida",MM:"fulan %d",y:"tinan ida",yy:"tinan %d"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e={0:"-ум",1:"-ум",2:"-юм",3:"-юм",4:"-ум",5:"-ум",6:"-ум",7:"-ум",8:"-ум",9:"-ум",10:"-ум",12:"-ум",13:"-ум",20:"-ум",30:"-юм",40:"-ум",50:"-ум",60:"-ум",70:"-ум",80:"-ум",90:"-ум",100:"-ум"};return t.defineLocale("tg",{months:{format:"январи_феврали_марти_апрели_майи_июни_июли_августи_сентябри_октябри_ноябри_декабри".split("_"),standalone:"январ_феврал_март_апрел_май_июн_июл_август_сентябр_октябр_ноябр_декабр".split("_")},monthsShort:"янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек".split("_"),weekdays:"якшанбе_душанбе_сешанбе_чоршанбе_панҷшанбе_ҷумъа_шанбе".split("_"),weekdaysShort:"яшб_дшб_сшб_чшб_пшб_ҷум_шнб".split("_"),weekdaysMin:"яш_дш_сш_чш_пш_ҷм_шб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Имрӯз соати] LT",nextDay:"[Фардо соати] LT",lastDay:"[Дирӯз соати] LT",nextWeek:"dddd[и] [ҳафтаи оянда соати] LT",lastWeek:"dddd[и] [ҳафтаи гузашта соати] LT",sameElse:"L"},relativeTime:{future:"баъди %s",past:"%s пеш",s:"якчанд сония",m:"як дақиқа",mm:"%d дақиқа",h:"як соат",hh:"%d соат",d:"як рӯз",dd:"%d рӯз",M:"як моҳ",MM:"%d моҳ",y:"як сол",yy:"%d сол"},meridiemParse:/шаб|субҳ|рӯз|бегоҳ/,meridiemHour:function(t,e){return 12===t&&(t=0),"шаб"===e?t<4?t:t+12:"субҳ"===e?t:"рӯз"===e?t>=11?t:t+12:"бегоҳ"===e?t+12:void 0},meridiem:function(t,e,a){return t<4?"шаб":t<11?"субҳ":t<16?"рӯз":t<19?"бегоҳ":"шаб"},dayOfMonthOrdinalParse:/\d{1,2}-(ум|юм)/,ordinal:function(t){var a=t%10,i=t>=100?100:null;return t+(e[t]||e[a]||e[i])},week:{dow:1,doy:7}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("th",{months:"มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),monthsShort:"ม.ค._ก.พ._มี.ค._เม.ย._พ.ค._มิ.ย._ก.ค._ส.ค._ก.ย._ต.ค._พ.ย._ธ.ค.".split("_"),monthsParseExact:!0,weekdays:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),weekdaysShort:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),weekdaysMin:"อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY เวลา H:mm",LLLL:"วันddddที่ D MMMM YYYY เวลา H:mm"},meridiemParse:/ก่อนเที่ยง|หลังเที่ยง/,isPM:function(t){return"หลังเที่ยง"===t},meridiem:function(t,e,a){return t<12?"ก่อนเที่ยง":"หลังเที่ยง"},calendar:{sameDay:"[วันนี้ เวลา] LT",nextDay:"[พรุ่งนี้ เวลา] LT",nextWeek:"dddd[หน้า เวลา] LT",lastDay:"[เมื่อวานนี้ เวลา] LT",lastWeek:"[วัน]dddd[ที่แล้ว เวลา] LT",sameElse:"L"},relativeTime:{future:"อีก %s",past:"%sที่แล้ว",s:"ไม่กี่วินาที",ss:"%d วินาที",m:"1 นาที",mm:"%d นาที",h:"1 ชั่วโมง",hh:"%d ชั่วโมง",d:"1 วัน",dd:"%d วัน",w:"1 สัปดาห์",ww:"%d สัปดาห์",M:"1 เดือน",MM:"%d เดือน",y:"1 ปี",yy:"%d ปี"}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e={1:"'inji",5:"'inji",8:"'inji",70:"'inji",80:"'inji",2:"'nji",7:"'nji",20:"'nji",50:"'nji",3:"'ünji",4:"'ünji",100:"'ünji",6:"'njy",9:"'unjy",10:"'unjy",30:"'unjy",60:"'ynjy",90:"'ynjy"};return t.defineLocale("tk",{months:"Ýanwar_Fewral_Mart_Aprel_Maý_Iýun_Iýul_Awgust_Sentýabr_Oktýabr_Noýabr_Dekabr".split("_"),monthsShort:"Ýan_Few_Mar_Apr_Maý_Iýn_Iýl_Awg_Sen_Okt_Noý_Dek".split("_"),weekdays:"Ýekşenbe_Duşenbe_Sişenbe_Çarşenbe_Penşenbe_Anna_Şenbe".split("_"),weekdaysShort:"Ýek_Duş_Siş_Çar_Pen_Ann_Şen".split("_"),weekdaysMin:"Ýk_Dş_Sş_Çr_Pn_An_Şn".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün sagat] LT",nextDay:"[ertir sagat] LT",nextWeek:"[indiki] dddd [sagat] LT",lastDay:"[düýn] LT",lastWeek:"[geçen] dddd [sagat] LT",sameElse:"L"},relativeTime:{future:"%s soň",past:"%s öň",s:"birnäçe sekunt",m:"bir minut",mm:"%d minut",h:"bir sagat",hh:"%d sagat",d:"bir gün",dd:"%d gün",M:"bir aý",MM:"%d aý",y:"bir ýyl",yy:"%d ýyl"},ordinal:function(t,a){switch(a){case"d":case"D":case"Do":case"DD":return t;default:if(0===t)return t+"'unjy";var i=t%10,r=t%100-i,n=t>=100?100:null;return t+(e[i]||e[r]||e[n])}},week:{dow:1,doy:7}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(t){return t},week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";function e(t){var e=t;return e=-1!==t.indexOf("jaj")?e.slice(0,-3)+"leS":-1!==t.indexOf("jar")?e.slice(0,-3)+"waQ":-1!==t.indexOf("DIS")?e.slice(0,-3)+"nem":e+" pIq"}function a(t){var e=t;return e=-1!==t.indexOf("jaj")?e.slice(0,-3)+"Hu’":-1!==t.indexOf("jar")?e.slice(0,-3)+"wen":-1!==t.indexOf("DIS")?e.slice(0,-3)+"ben":e+" ret"}function i(t,e,a,i){var n=r(t);switch(a){case"ss":return n+" lup";case"mm":return n+" tup";case"hh":return n+" rep";case"dd":return n+" jaj";case"MM":return n+" jar";case"yy":return n+" DIS"}}function r(t){var e=Math.floor(t%1e3/100),a=Math.floor(t%100/10),i=t%10,r="";return e>0&&(r+=n[e]+"vatlh"),a>0&&(r+=(""!==r?" ":"")+n[a]+"maH"),i>0&&(r+=(""!==r?" ":"")+n[i]),""===r?"pagh":r}
//! moment.js locale configuration
var n="pagh_wa’_cha’_wej_loS_vagh_jav_Soch_chorgh_Hut".split("_");return t.defineLocale("tlh",{months:"tera’ jar wa’_tera’ jar cha’_tera’ jar wej_tera’ jar loS_tera’ jar vagh_tera’ jar jav_tera’ jar Soch_tera’ jar chorgh_tera’ jar Hut_tera’ jar wa’maH_tera’ jar wa’maH wa’_tera’ jar wa’maH cha’".split("_"),monthsShort:"jar wa’_jar cha’_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wa’maH_jar wa’maH wa’_jar wa’maH cha’".split("_"),monthsParseExact:!0,weekdays:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysShort:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysMin:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[DaHjaj] LT",nextDay:"[wa’leS] LT",nextWeek:"LLL",lastDay:"[wa’Hu’] LT",lastWeek:"LLL",sameElse:"L"},relativeTime:{future:e,past:a,s:"puS lup",ss:i,m:"wa’ tup",mm:i,h:"wa’ rep",hh:i,d:"wa’ jaj",dd:i,M:"wa’ jar",MM:i,y:"wa’ DIS",yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'üncü",4:"'üncü",100:"'üncü",6:"'ncı",9:"'uncu",10:"'uncu",30:"'uncu",60:"'ıncı",90:"'ıncı"};return t.defineLocale("tr",{months:"Ocak_Şubat_Mart_Nisan_Mayıs_Haziran_Temmuz_Ağustos_Eylül_Ekim_Kasım_Aralık".split("_"),monthsShort:"Oca_Şub_Mar_Nis_May_Haz_Tem_Ağu_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Salı_Çarşamba_Perşembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_Çar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_Ça_Pe_Cu_Ct".split("_"),meridiem:function(t,e,a){return t<12?a?"öö":"ÖÖ":a?"ös":"ÖS"},meridiemParse:/öö|ÖÖ|ös|ÖS/,isPM:function(t){return"ös"===t||"ÖS"===t},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[yarın saat] LT",nextWeek:"[gelecek] dddd [saat] LT",lastDay:"[dün] LT",lastWeek:"[geçen] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s önce",s:"birkaç saniye",ss:"%d saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",w:"bir hafta",ww:"%d hafta",M:"bir ay",MM:"%d ay",y:"bir yıl",yy:"%d yıl"},ordinal:function(t,a){switch(a){case"d":case"D":case"Do":case"DD":return t;default:if(0===t)return t+"'ıncı";var i=t%10,r=t%100-i,n=t>=100?100:null;return t+(e[i]||e[r]||e[n])}},week:{dow:1,doy:7}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";function e(t,e,a,i){var r={s:["viensas secunds","'iensas secunds"],ss:[t+" secunds",t+" secunds"],m:["'n míut","'iens míut"],mm:[t+" míuts",t+" míuts"],h:["'n þora","'iensa þora"],hh:[t+" þoras",t+" þoras"],d:["'n ziua","'iensa ziua"],dd:[t+" ziuas",t+" ziuas"],M:["'n mes","'iens mes"],MM:[t+" mesen",t+" mesen"],y:["'n ar","'iens ar"],yy:[t+" ars",t+" ars"]};return i?r[a][0]:e?r[a][0]:r[a][1]}return t.defineLocale("tzl",{months:"Januar_Fevraglh_Març_Avrïu_Mai_Gün_Julia_Guscht_Setemvar_Listopäts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_Gün_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"Súladi_Lúneçi_Maitzi_Márcuri_Xhúadi_Viénerçi_Sáturi".split("_"),weekdaysShort:"Súl_Lún_Mai_Már_Xhú_Vié_Sát".split("_"),weekdaysMin:"Sú_Lú_Ma_Má_Xh_Vi_Sá".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY HH.mm",LLLL:"dddd, [li] D. MMMM [dallas] YYYY HH.mm"},meridiemParse:/d\'o|d\'a/i,isPM:function(t){return"d'o"===t.toLowerCase()},meridiem:function(t,e,a){return t>11?a?"d'o":"D'O":a?"d'a":"D'A"},calendar:{sameDay:"[oxhi à] LT",nextDay:"[demà à] LT",nextWeek:"dddd [à] LT",lastDay:"[ieiri à] LT",lastWeek:"[sür el] dddd [lasteu à] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:e,ss:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("tzm",{months:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),monthsShort:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),weekdays:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysShort:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysMin:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ⴰⵙⴷⵅ ⴴ] LT",nextDay:"[ⴰⵙⴽⴰ ⴴ] LT",nextWeek:"dddd [ⴴ] LT",lastDay:"[ⴰⵚⴰⵏⵜ ⴴ] LT",lastWeek:"dddd [ⴴ] LT",sameElse:"L"},relativeTime:{future:"ⴷⴰⴷⵅ ⵙ ⵢⴰⵏ %s",past:"ⵢⴰⵏ %s",s:"ⵉⵎⵉⴽ",ss:"%d ⵉⵎⵉⴽ",m:"ⵎⵉⵏⵓⴺ",mm:"%d ⵎⵉⵏⵓⴺ",h:"ⵙⴰⵄⴰ",hh:"%d ⵜⴰⵙⵙⴰⵄⵉⵏ",d:"ⴰⵙⵙ",dd:"%d oⵙⵙⴰⵏ",M:"ⴰⵢoⵓⵔ",MM:"%d ⵉⵢⵢⵉⵔⵏ",y:"ⴰⵙⴳⴰⵙ",yy:"%d ⵉⵙⴳⴰⵙⵏ"},week:{dow:6,doy:12}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("tzm-latn",{months:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",ss:"%d imik",m:"minuḍ",mm:"%d minuḍ",h:"saɛa",hh:"%d tassaɛin",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("ug-cn",{months:"يانۋار_فېۋرال_مارت_ئاپرېل_ماي_ئىيۇن_ئىيۇل_ئاۋغۇست_سېنتەبىر_ئۆكتەبىر_نويابىر_دېكابىر".split("_"),monthsShort:"يانۋار_فېۋرال_مارت_ئاپرېل_ماي_ئىيۇن_ئىيۇل_ئاۋغۇست_سېنتەبىر_ئۆكتەبىر_نويابىر_دېكابىر".split("_"),weekdays:"يەكشەنبە_دۈشەنبە_سەيشەنبە_چارشەنبە_پەيشەنبە_جۈمە_شەنبە".split("_"),weekdaysShort:"يە_دۈ_سە_چا_پە_جۈ_شە".split("_"),weekdaysMin:"يە_دۈ_سە_چا_پە_جۈ_شە".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY-يىلىM-ئاينىڭD-كۈنى",LLL:"YYYY-يىلىM-ئاينىڭD-كۈنى، HH:mm",LLLL:"dddd، YYYY-يىلىM-ئاينىڭD-كۈنى، HH:mm"},meridiemParse:/يېرىم كېچە|سەھەر|چۈشتىن بۇرۇن|چۈش|چۈشتىن كېيىن|كەچ/,meridiemHour:function(t,e){return 12===t&&(t=0),"يېرىم كېچە"===e||"سەھەر"===e||"چۈشتىن بۇرۇن"===e?t:"چۈشتىن كېيىن"===e||"كەچ"===e?t+12:t>=11?t:t+12},meridiem:function(t,e,a){var i=100*t+e;return i<600?"يېرىم كېچە":i<900?"سەھەر":i<1130?"چۈشتىن بۇرۇن":i<1230?"چۈش":i<1800?"چۈشتىن كېيىن":"كەچ"},calendar:{sameDay:"[بۈگۈن سائەت] LT",nextDay:"[ئەتە سائەت] LT",nextWeek:"[كېلەركى] dddd [سائەت] LT",lastDay:"[تۆنۈگۈن] LT",lastWeek:"[ئالدىنقى] dddd [سائەت] LT",sameElse:"L"},relativeTime:{future:"%s كېيىن",past:"%s بۇرۇن",s:"نەچچە سېكونت",ss:"%d سېكونت",m:"بىر مىنۇت",mm:"%d مىنۇت",h:"بىر سائەت",hh:"%d سائەت",d:"بىر كۈن",dd:"%d كۈن",M:"بىر ئاي",MM:"%d ئاي",y:"بىر يىل",yy:"%d يىل"},dayOfMonthOrdinalParse:/\d{1,2}(-كۈنى|-ئاي|-ھەپتە)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"-كۈنى";case"w":case"W":return t+"-ھەپتە";default:return t}},preparse:function(t){return t.replace(/،/g,",")},postformat:function(t){return t.replace(/,/g,"،")},week:{dow:1,doy:7}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
function e(t,e){var a=t.split("_");return e%10==1&&e%100!=11?a[0]:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?a[1]:a[2]}function a(t,a,i){var r={ss:a?"секунда_секунди_секунд":"секунду_секунди_секунд",mm:a?"хвилина_хвилини_хвилин":"хвилину_хвилини_хвилин",hh:a?"година_години_годин":"годину_години_годин",dd:"день_дні_днів",MM:"місяць_місяці_місяців",yy:"рік_роки_років"};return"m"===i?a?"хвилина":"хвилину":"h"===i?a?"година":"годину":t+" "+e(r[i],+t)}function i(t,e){var a,i={nominative:"неділя_понеділок_вівторок_середа_четвер_п’ятниця_субота".split("_"),accusative:"неділю_понеділок_вівторок_середу_четвер_п’ятницю_суботу".split("_"),genitive:"неділі_понеділка_вівторка_середи_четверга_п’ятниці_суботи".split("_")};return!0===t?i.nominative.slice(1,7).concat(i.nominative.slice(0,1)):t?(a=/(\[[ВвУу]\]) ?dddd/.test(e)?"accusative":/\[?(?:минулої|наступної)? ?\] ?dddd/.test(e)?"genitive":"nominative",i[a][t.day()]):i.nominative}function r(t){return function(){return t+"о"+(11===this.hours()?"б":"")+"] LT"}}return t.defineLocale("uk",{months:{format:"січня_лютого_березня_квітня_травня_червня_липня_серпня_вересня_жовтня_листопада_грудня".split("_"),standalone:"січень_лютий_березень_квітень_травень_червень_липень_серпень_вересень_жовтень_листопад_грудень".split("_")},monthsShort:"січ_лют_бер_квіт_трав_черв_лип_серп_вер_жовт_лист_груд".split("_"),weekdays:i,weekdaysShort:"нд_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY р.",LLL:"D MMMM YYYY р., HH:mm",LLLL:"dddd, D MMMM YYYY р., HH:mm"},calendar:{sameDay:r("[Сьогодні "),nextDay:r("[Завтра "),lastDay:r("[Вчора "),nextWeek:r("[У] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return r("[Минулої] dddd [").call(this);case 1:case 2:case 4:return r("[Минулого] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:"за %s",past:"%s тому",s:"декілька секунд",ss:a,m:a,mm:a,h:"годину",hh:a,d:"день",dd:a,M:"місяць",MM:a,y:"рік",yy:a},meridiemParse:/ночі|ранку|дня|вечора/,isPM:function(t){return/^(дня|вечора)$/.test(t)},meridiem:function(t,e,a){return t<4?"ночі":t<12?"ранку":t<17?"дня":"вечора"},dayOfMonthOrdinalParse:/\d{1,2}-(й|го)/,ordinal:function(t,e){switch(e){case"M":case"d":case"DDD":case"w":case"W":return t+"-й";case"D":return t+"-го";default:return t}},week:{dow:1,doy:7}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";
//! moment.js locale configuration
var e=["جنوری","فروری","مارچ","اپریل","مئی","جون","جولائی","اگست","ستمبر","اکتوبر","نومبر","دسمبر"],a=["اتوار","پیر","منگل","بدھ","جمعرات","جمعہ","ہفتہ"];return t.defineLocale("ur",{months:e,monthsShort:e,weekdays:a,weekdaysShort:a,weekdaysMin:a,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd، D MMMM YYYY HH:mm"},meridiemParse:/صبح|شام/,isPM:function(t){return"شام"===t},meridiem:function(t,e,a){return t<12?"صبح":"شام"},calendar:{sameDay:"[آج بوقت] LT",nextDay:"[کل بوقت] LT",nextWeek:"dddd [بوقت] LT",lastDay:"[گذشتہ روز بوقت] LT",lastWeek:"[گذشتہ] dddd [بوقت] LT",sameElse:"L"},relativeTime:{future:"%s بعد",past:"%s قبل",s:"چند سیکنڈ",ss:"%d سیکنڈ",m:"ایک منٹ",mm:"%d منٹ",h:"ایک گھنٹہ",hh:"%d گھنٹے",d:"ایک دن",dd:"%d دن",M:"ایک ماہ",MM:"%d ماہ",y:"ایک سال",yy:"%d سال"},preparse:function(t){return t.replace(/،/g,",")},postformat:function(t){return t.replace(/,/g,"،")},week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("uz",{months:"январ_феврал_март_апрел_май_июн_июл_август_сентябр_октябр_ноябр_декабр".split("_"),monthsShort:"янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек".split("_"),weekdays:"Якшанба_Душанба_Сешанба_Чоршанба_Пайшанба_Жума_Шанба".split("_"),weekdaysShort:"Якш_Душ_Сеш_Чор_Пай_Жум_Шан".split("_"),weekdaysMin:"Як_Ду_Се_Чо_Па_Жу_Ша".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Бугун соат] LT [да]",nextDay:"[Эртага] LT [да]",nextWeek:"dddd [куни соат] LT [да]",lastDay:"[Кеча соат] LT [да]",lastWeek:"[Утган] dddd [куни соат] LT [да]",sameElse:"L"},relativeTime:{future:"Якин %s ичида",past:"Бир неча %s олдин",s:"фурсат",ss:"%d фурсат",m:"бир дакика",mm:"%d дакика",h:"бир соат",hh:"%d соат",d:"бир кун",dd:"%d кун",M:"бир ой",MM:"%d ой",y:"бир йил",yy:"%d йил"},week:{dow:1,doy:7}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("uz-latn",{months:"Yanvar_Fevral_Mart_Aprel_May_Iyun_Iyul_Avgust_Sentabr_Oktabr_Noyabr_Dekabr".split("_"),monthsShort:"Yan_Fev_Mar_Apr_May_Iyun_Iyul_Avg_Sen_Okt_Noy_Dek".split("_"),weekdays:"Yakshanba_Dushanba_Seshanba_Chorshanba_Payshanba_Juma_Shanba".split("_"),weekdaysShort:"Yak_Dush_Sesh_Chor_Pay_Jum_Shan".split("_"),weekdaysMin:"Ya_Du_Se_Cho_Pa_Ju_Sha".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Bugun soat] LT [da]",nextDay:"[Ertaga] LT [da]",nextWeek:"dddd [kuni soat] LT [da]",lastDay:"[Kecha soat] LT [da]",lastWeek:"[O'tgan] dddd [kuni soat] LT [da]",sameElse:"L"},relativeTime:{future:"Yaqin %s ichida",past:"Bir necha %s oldin",s:"soniya",ss:"%d soniya",m:"bir daqiqa",mm:"%d daqiqa",h:"bir soat",hh:"%d soat",d:"bir kun",dd:"%d kun",M:"bir oy",MM:"%d oy",y:"bir yil",yy:"%d yil"},week:{dow:1,doy:7}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("vi",{months:"tháng 1_tháng 2_tháng 3_tháng 4_tháng 5_tháng 6_tháng 7_tháng 8_tháng 9_tháng 10_tháng 11_tháng 12".split("_"),monthsShort:"Thg 01_Thg 02_Thg 03_Thg 04_Thg 05_Thg 06_Thg 07_Thg 08_Thg 09_Thg 10_Thg 11_Thg 12".split("_"),monthsParseExact:!0,weekdays:"chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ sáu_thứ bảy".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:!0,meridiemParse:/sa|ch/i,isPM:function(t){return/^ch$/i.test(t)},meridiem:function(t,e,a){return t<12?a?"sa":"SA":a?"ch":"CH"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [năm] YYYY",LLL:"D MMMM [năm] YYYY HH:mm",LLLL:"dddd, D MMMM [năm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hôm nay lúc] LT",nextDay:"[Ngày mai lúc] LT",nextWeek:"dddd [tuần tới lúc] LT",lastDay:"[Hôm qua lúc] LT",lastWeek:"dddd [tuần trước lúc] LT",sameElse:"L"},relativeTime:{future:"%s tới",past:"%s trước",s:"vài giây",ss:"%d giây",m:"một phút",mm:"%d phút",h:"một giờ",hh:"%d giờ",d:"một ngày",dd:"%d ngày",w:"một tuần",ww:"%d tuần",M:"một tháng",MM:"%d tháng",y:"một năm",yy:"%d năm"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(t){return t},week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("x-pseudo",{months:"J~áñúá~rý_F~ébrú~árý_~Márc~h_Áp~ríl_~Máý_~Júñé~_Júl~ý_Áú~gúst~_Sép~témb~ér_Ó~ctób~ér_Ñ~óvém~bér_~Décé~mbér".split("_"),monthsShort:"J~áñ_~Féb_~Már_~Ápr_~Máý_~Júñ_~Júl_~Áúg_~Sép_~Óct_~Ñóv_~Déc".split("_"),monthsParseExact:!0,weekdays:"S~úñdá~ý_Mó~ñdáý~_Túé~sdáý~_Wéd~ñésd~áý_T~húrs~dáý_~Fríd~áý_S~átúr~dáý".split("_"),weekdaysShort:"S~úñ_~Móñ_~Túé_~Wéd_~Thú_~Frí_~Sát".split("_"),weekdaysMin:"S~ú_Mó~_Tú_~Wé_T~h_Fr~_Sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[T~ódá~ý át] LT",nextDay:"[T~ómó~rró~w át] LT",nextWeek:"dddd [át] LT",lastDay:"[Ý~ést~érdá~ý át] LT",lastWeek:"[L~ást] dddd [át] LT",sameElse:"L"},relativeTime:{future:"í~ñ %s",past:"%s á~gó",s:"á ~féw ~sécó~ñds",ss:"%d s~écóñ~ds",m:"á ~míñ~úté",mm:"%d m~íñú~tés",h:"á~ñ hó~úr",hh:"%d h~óúrs",d:"á ~dáý",dd:"%d d~áýs",M:"á ~móñ~th",MM:"%d m~óñt~hs",y:"á ~ýéár",yy:"%d ý~éárs"},dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("yo",{months:"Sẹ́rẹ́_Èrèlè_Ẹrẹ̀nà_Ìgbé_Èbibi_Òkùdu_Agẹmo_Ògún_Owewe_Ọ̀wàrà_Bélú_Ọ̀pẹ̀̀".split("_"),monthsShort:"Sẹ́r_Èrl_Ẹrn_Ìgb_Èbi_Òkù_Agẹ_Ògú_Owe_Ọ̀wà_Bél_Ọ̀pẹ̀̀".split("_"),weekdays:"Àìkú_Ajé_Ìsẹ́gun_Ọjọ́rú_Ọjọ́bọ_Ẹtì_Àbámẹ́ta".split("_"),weekdaysShort:"Àìk_Ajé_Ìsẹ́_Ọjr_Ọjb_Ẹtì_Àbá".split("_"),weekdaysMin:"Àì_Aj_Ìs_Ọr_Ọb_Ẹt_Àb".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Ònì ni] LT",nextDay:"[Ọ̀la ni] LT",nextWeek:"dddd [Ọsẹ̀ tón'bọ] [ni] LT",lastDay:"[Àna ni] LT",lastWeek:"dddd [Ọsẹ̀ tólọ́] [ni] LT",sameElse:"L"},relativeTime:{future:"ní %s",past:"%s kọjá",s:"ìsẹjú aayá die",ss:"aayá %d",m:"ìsẹjú kan",mm:"ìsẹjú %d",h:"wákati kan",hh:"wákati %d",d:"ọjọ́ kan",dd:"ọjọ́ %d",M:"osù kan",MM:"osù %d",y:"ọdún kan",yy:"ọdún %d"},dayOfMonthOrdinalParse:/ọjọ́\s\d{1,2}/,ordinal:"ọjọ́ %d",week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(t,e){return 12===t&&(t=0),"凌晨"===e||"早上"===e||"上午"===e?t:"下午"===e||"晚上"===e?t+12:t>=11?t:t+12},meridiem:function(t,e,a){var i=100*t+e;return i<600?"凌晨":i<900?"早上":i<1130?"上午":i<1230?"中午":i<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:function(t){return t.week()!==this.week()?"[下]dddLT":"[本]dddLT"},lastDay:"[昨天]LT",lastWeek:function(t){return this.week()!==t.week()?"[上]dddLT":"[本]dddLT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|周)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"日";case"M":return t+"月";case"w":case"W":return t+"周";default:return t}},relativeTime:{future:"%s后",past:"%s前",s:"几秒",ss:"%d 秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",w:"1 周",ww:"%d 周",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},week:{dow:1,doy:4}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("zh-hk",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(t,e){return 12===t&&(t=0),"凌晨"===e||"早上"===e||"上午"===e?t:"中午"===e?t>=11?t:t+12:"下午"===e||"晚上"===e?t+12:void 0},meridiem:function(t,e,a){var i=100*t+e;return i<600?"凌晨":i<900?"早上":i<1200?"上午":1200===i?"中午":i<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|週)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"日";case"M":return t+"月";case"w":case"W":return t+"週";default:return t}},relativeTime:{future:"%s後",past:"%s前",s:"幾秒",ss:"%d 秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("zh-mo",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"D/M/YYYY",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(t,e){return 12===t&&(t=0),"凌晨"===e||"早上"===e||"上午"===e?t:"中午"===e?t>=11?t:t+12:"下午"===e||"晚上"===e?t+12:void 0},meridiem:function(t,e,a){var i=100*t+e;return i<600?"凌晨":i<900?"早上":i<1130?"上午":i<1230?"中午":i<1800?"下午":"晚上"},calendar:{sameDay:"[今天] LT",nextDay:"[明天] LT",nextWeek:"[下]dddd LT",lastDay:"[昨天] LT",lastWeek:"[上]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|週)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"日";case"M":return t+"月";case"w":case"W":return t+"週";default:return t}},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",ss:"%d 秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"}})})},function(t,e,a){!function(t,e){e(a(0))}(0,function(t){"use strict";return t.defineLocale("zh-tw",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(t,e){return 12===t&&(t=0),"凌晨"===e||"早上"===e||"上午"===e?t:"中午"===e?t>=11?t:t+12:"下午"===e||"晚上"===e?t+12:void 0},meridiem:function(t,e,a){var i=100*t+e;return i<600?"凌晨":i<900?"早上":i<1130?"上午":i<1230?"中午":i<1800?"下午":"晚上"},calendar:{sameDay:"[今天] LT",nextDay:"[明天] LT",nextWeek:"[下]dddd LT",lastDay:"[昨天] LT",lastWeek:"[上]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|週)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"日";case"M":return t+"月";case"w":case"W":return t+"週";default:return t}},relativeTime:{future:"%s後",past:"%s前",s:"幾秒",ss:"%d 秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"}})})},function(module,__webpack_exports__,__webpack_require__){"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function DefaultData(){}var __WEBPACK_IMPORTED_MODULE_0__categoryListForStrategy_vue__=__webpack_require__(489),__WEBPACK_IMPORTED_MODULE_1_lodash__=__webpack_require__(14),__WEBPACK_IMPORTED_MODULE_1_lodash___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_lodash__),__WEBPACK_IMPORTED_MODULE_2__utils_urlObj__=__webpack_require__(8),__WEBPACK_IMPORTED_MODULE_3_moment__=__webpack_require__(0),__WEBPACK_IMPORTED_MODULE_3_moment___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_moment__),__WEBPACK_IMPORTED_MODULE_4_jquery__=__webpack_require__(121),__WEBPACK_IMPORTED_MODULE_4_jquery___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_jquery__),__WEBPACK_IMPORTED_MODULE_5__components_indexSearch_vue__=__webpack_require__(493),_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t};DefaultData.TabPageData=function(){return{title:"default",name:"",id:"",pageData:{groupId:null,groupName:"",id:null,name:"",period:0,right:0,status:0,stockPool:[],strategies:[]},rightResultData:{totalTime:0,apiTicket:0,resultTableHeader:[],resultTableData:[],filterResultTableData:[],pageTableData:[],paginationObj:{total:5,PageSize:30,PageIndex:1}}}},__webpack_exports__.a={name:"StrategyEdit",components:{IndexSearch:__WEBPACK_IMPORTED_MODULE_5__components_indexSearch_vue__.a,CategoryList:__WEBPACK_IMPORTED_MODULE_0__categoryListForStrategy_vue__.a},computed:{currentBlockData:function(){return Object(__WEBPACK_IMPORTED_MODULE_1_lodash__.find)(this.blockEditableTabs,{name:this.blockActiveName})||{}},currentStrategyInfo:function(){return Object(__WEBPACK_IMPORTED_MODULE_1_lodash__.find)(this.editableTabs,{name:this.editableTabsValue})||DefaultData.TabPageData()}},data:function(){return{showDialog:!1,selectBlockLoading:!1,blockActiveName:"0",blockActiveId:"000300.sh",blockTabIndex:0,blockSelectObj:{id:null,name:null,type:null},blockEditableTabs:[],editableTabs:[],editableTabsValue:"0",tabIndex:0,indexDetailList:[],ischeckedResult:!1,periodValue:0,rightsValue:0,periodOptions:[{label:"日线",value:0},{label:"周线",value:1},{label:"月线",value:2},{label:"季线",value:9},{label:"年线",value:3},{label:"1分钟",value:4},{label:"5分钟",value:5},{label:"15分钟",value:6},{label:"30分钟",value:7},{label:"60分钟",value:8}],rightsOptions:[{label:"不复权",value:0},{label:"前复权",value:1},{label:"后复权(简单)",value:2},{label:"后复权(完成)",value:3}],rightsOptionsDisabled:!1,dataNum:180,dataNumOptions:[{label:"一周",value:7},{label:"一月",value:30},{label:"3月",value:90},{label:"半年",value:180},{label:"1年",value:365},{label:"3年",value:1095},{label:"6年",value:2190},{label:"全部",value:1e4}],dataNumOptionsMinute:[{label:"1天",value:1},{label:"2天",value:2},{label:"3天",value:3},{label:"4天",value:4},{label:"5天",value:5},{label:"半个月",value:15},{label:"1个月",value:30},{label:"3个月",value:90},{label:"全部",value:1e4}],statusAry:[{label:"测试",value:0},{label:"发布",value:1},{label:"停用",value:2}],filterDataNumOptions:[],storageIndexLists:[],selectIndexAry:[],dialogVisible:!1,checkList:[],welfareOptions:[],operatorOptions:[{label:"",value:""},{label:"等于",value:"=="},{label:"不等于",value:"!="},{label:"大于",value:">"},{label:"大于或等于",value:">="},{label:"小于",value:"<"},{label:"小于或等于",value:"<="}],isgetResult:!0,allStockList:[],totalTime:0,apiTicket:0,stockTitle:[],stockList:[],isCheckTab:!1,loading:!1,paginationObj:{total:1,PageSize:30,PageIndex:1},resultTableHeader:[],tableHeight:300,pageTableData:[],filterResultTableData:[],resultTableData:[],execResultLoading:!1}},watch:{ischeckedResult:function(t){var e=this,a=this.currentStrategyInfo.rightResultData,i=a.resultTableData,r=a.paginationObj,n=this.getFilterResultTableData(i);r.PageIndex=1,r.total=n.length;var s=this.initPaginationData(n,r);this.resetTablePageDataForCheck(n,s,r),this.$nextTick(function(){e.$refs.resultTable&&(e.$refs.resultTable.bodyWrapper.scrollTop=0)})},"currentStrategyInfo.pageData.period":function(t){4===t||5===t||6===t||7===t||8===t?(this.rightsOptionsDisabled=!0,this.currentStrategyInfo.pageData.right=0,this.filterDataNumOptions=[].concat(_toConsumableArray(this.dataNumOptionsMinute)),this.dataNum=4):(this.rightsOptionsDisabled=!1,this.filterDataNumOptions=[].concat(_toConsumableArray(this.dataNumOptions)),this.dataNum=180)}},mounted:function(){this.filterDataNumOptions=[].concat(_toConsumableArray(this.dataNumOptions)),this.dataNum=180},methods:{getFilterResultTableData:function(t){return this.ischeckedResult?t.filter(function(t){return t.isFillCondition}):t},selectOneIndex:function(t){this.selectIndexAry.splice(0,this.selectIndexAry.length),this.selectIndexAry.push(t)},openArgs:function(t){t.argsOpend=!t.argsOpend},selectOneBlock:function(t){this.blockActiveId=t.id,this.blockSelectObj.id=t.id,this.blockSelectObj.name=t.name,this.blockSelectObj.type=this.currentBlockData.type},goSelectStockPool:function(){var t=this;if(this.showDialog=!0,!(this.blockEditableTabs.length>0)){this.selectBlockLoading=!0;var e=new Promise(function(t,e){__WEBPACK_IMPORTED_MODULE_2__utils_urlObj__.a.get(__WEBPACK_IMPORTED_MODULE_2__utils_urlObj__.a.apiStockBlocklist,{},function(a){200===a.code?t(a):e(a)})}),a=new Promise(function(t,e){__WEBPACK_IMPORTED_MODULE_2__utils_urlObj__.a.get(__WEBPACK_IMPORTED_MODULE_2__utils_urlObj__.a.apiStockGroupList,{},function(a){200===a.code?t(a):e(a)})});Promise.all([e,a]).then(function(e){t.selectBlockLoading=!1;var a=e[0].data,i=e[0].metainfo,r=e[1].data,n=Object.keys(a),s=!0,o=!1,h=void 0;try{for(var l,u=n[Symbol.iterator]();!(s=(l=u.next()).done);s=!0){var c=l.value,d={title:i[c],keyText:c,name:t.blockTabIndex+"",content:a[c],type:"SYS"};t.blockEditableTabs.push(d),t.blockTabIndex++}}catch(t){o=!0,h=t}finally{try{!s&&u.return&&u.return()}finally{if(o)throw h}}var f={title:"自定义股票池",keyText:"customStockPool",name:t.blockTabIndex+"",content:r,type:"DIY"};t.blockEditableTabs.push(f),t.blockTabIndex++}).catch(function(e){t.selectBlockLoading=!1,console.log("获取板块数据异常")})}},handleResultClick:function(){},confirmSelectStockPool:function(){this.showDialog=!1,Array.isArray(this.currentStrategyInfo.pageData.stockPool)&&this.currentStrategyInfo.pageData.stockPool.splice(0,1,this.blockSelectObj)},getCheckboxValue:function(t){console.log("选中信息",t)},delOneIndexInStrategy:function(t){this.currentStrategyInfo.pageData.strategies.splice(t,1)},confirmSelectIndexsFun:function(){var t=this;this.dialogVisible=!1,[].concat(_toConsumableArray(this.selectIndexAry)).forEach(function(e){var a=[];Array.isArray(e.outArgs)&&(a=e.outArgs.map(function(t){return{Name:t,Condition1:"",ConditionValue1:"",Condition2:"",ConditionValue2:""}}));var i={name:e.name,id:e.id,args:[],script:e.script||"",outArgs:a||[],argsOpend:!1};Array.isArray(e.args)&&(i.args=e.args.map(function(t){return{Name:t.name,Value:parseInt(t.defaultVal)}})),t.currentStrategyInfo.pageData.strategies.push(i)})},openDialog:function(){this.dialogVisible=!0},tableRowClassName:function(t){var e=t.row;t.rowIndex;return e.isFillCondition?"selecting-row":""},checkBeforeExec:function(){if(0===this.currentStrategyInfo.pageData.strategies.length)return this.$message("请为策略添加指标"),!1;var t=!0;return this.currentStrategyInfo.pageData.strategies.forEach(function(e){e.outArgs.forEach(function(e){(e.Condition1&&!e.ConditionValue1||!e.Condition1&&e.ConditionValue1)&&(t=!1),(e.Condition2&&!e.ConditionValue2||!e.Condition2&&e.ConditionValue2)&&(t=!1)})}),t||this.$message("筛选条件填写不完整"),t},formatStringToObject:function(t){return"string"==typeof t?JSON.parse(t):t},getPolicyByIndexList:function(){return this.currentStrategyInfo.pageData.strategies.map(function(t,e){var a=t.args.map(function(t){return{Name:t.Name,Value:parseInt(t.Value)}}),i=t.script||"",r=e+"";return{Name:t.name||"",Script:i,Args:a,ID:r}})},getRunDateRange:function(){var t=parseInt(__WEBPACK_IMPORTED_MODULE_3_moment___default()().format("YYYYMMDD")),e=this.dataNum;return{StartDate:parseInt(__WEBPACK_IMPORTED_MODULE_3_moment___default()().subtract(e,"days").format("YYYYMMDD")),EndDate:t}},recvExecData:function(t,e,a){var i=this,r=(new Date).getTime(),n=r-t;n-50>20&&(n-=50);var s=Number(e.Tick).toFixed(3),o=[].concat(_toConsumableArray(Object.keys(e.Data))),h=[],l=[],u=[],c=[];if(o.length>0){h=this.getTableHearder(e.Data,a),l=this.getTableData(e.Data,a),this.flagTableData(l),u=this.getFilterResultTableData(l),c=this.initPaginationData(u,this.currentStrategyInfo.rightResultData.paginationObj),this.currentStrategyInfo.rightResultData.totalTime=n,this.currentStrategyInfo.rightResultData.apiTicket=s,this.currentStrategyInfo.rightResultData.resultTableHeader=h,this.currentStrategyInfo.rightResultData.resultTableData=l;var d=this.currentStrategyInfo.rightResultData.paginationObj;d.total=u.length,d.PageIndex=1,this.resetTablePageDataForCheck(u,c,d),this.$nextTick(function(){i.OnSize()})}},resetTablePageDataForCheck:function(t,e,a){this.currentStrategyInfo.rightResultData.filterResultTableData=t,this.currentStrategyInfo.rightResultData.pageTableData=e,this.currentStrategyInfo.rightResultData.paginationObj=a},execStrategyFun:function(){var t=this;if(this.checkBeforeExec()){var e=[].concat(_toConsumableArray(this.getPolicyByIndexList())),a=this.getRunDateRange(),i=a.StartDate,r=a.EndDate,n={Period:this.currentStrategyInfo.pageData.period,Right:this.currentStrategyInfo.pageData.right,stockPool:this.currentStrategyInfo.pageData.stockPool,StartDate:i,EndDate:r,OutCount:1,Policy:e||[]},s=(new Date).getTime();this.execResultLoading=!0,__WEBPACK_IMPORTED_MODULE_2__utils_urlObj__.a.post(__WEBPACK_IMPORTED_MODULE_2__utils_urlObj__.a.apiAlgorithmPolicy,n,function(e){t.execResultLoading=!1,0===e.Code?t.recvExecData(s,e,n):t.$message("执行异常")},function(e){t.$message.error("执行失败"),t.execResultLoading=!1,t.resultTableHeader.splice(0,t.resultTableHeader.length),t.resultTableData.splice(0,t.resultTableData.length)})}},initPaginationData:function(t,e){var a=e.total,i=e.PageIndex,r=e.PageSize;a=t.length;var n=(i-1)*r,s=i*r>a?a:i*r;return t.slice(n,s)||[]},currentChange:function(t){var e=this;this.currentStrategyInfo.rightResultData.paginationObj.PageIndex=t;var a=this.currentStrategyInfo.rightResultData,i=a.paginationObj,r=a.filterResultTableData,n=i.PageIndex,s=i.PageSize,o=i.total,h=(n-1)*s,l=n*s>o?o:n*s;this.currentStrategyInfo.rightResultData.pageTableData=r.slice(h,l),this.$nextTick(function(){e.$refs.resultTable.bodyWrapper.scrollTop=0})},flagTableData:function flagTableData(resultTableData){for(var _this7=this,conditionAry=[],i=0;i<this.currentStrategyInfo.pageData.strategies.length;i++)for(var oneIndexList=this.currentStrategyInfo.pageData.strategies[i],indexName=oneIndexList.name,j=0;j<oneIndexList.outArgs.length;j++){var outVarItem=oneIndexList.outArgs[j],typeName=outVarItem.Name,text=indexName+"-"+typeName,conditionObj={text:text};outVarItem.Condition1&&outVarItem.ConditionValue1&&(conditionObj.Condition1=outVarItem.Condition1,conditionObj.ConditionValue1=outVarItem.ConditionValue1),outVarItem.Condition2&&outVarItem.ConditionValue2&&(conditionObj.Condition2=outVarItem.Condition2,conditionObj.ConditionValue2=outVarItem.ConditionValue2),[].concat(_toConsumableArray(Object.keys(conditionObj))).length>1&&conditionAry.push(conditionObj)}resultTableData.forEach(function(row){for(var isFillCondition=!0,index=0;index<conditionAry.length;index++){var _conditionAry$index=conditionAry[index],_text=_conditionAry$index.text,Condition1=_conditionAry$index.Condition1,ConditionValue1=_conditionAry$index.ConditionValue1,Condition2=_conditionAry$index.Condition2,ConditionValue2=_conditionAry$index.ConditionValue2;if("--"==row[_text]){isFillCondition=!1;break}var filterStr="";if(Condition1&&ConditionValue1&&(filterStr=""+row[_text]+Condition1+ConditionValue1),Condition2&&ConditionValue2&&(filterStr=""+row[_text]+Condition2+ConditionValue2),Condition1&&ConditionValue1&&Condition2&&ConditionValue2&&(filterStr=""+row[_text]+Condition1+ConditionValue1+"&&"+row[_text]+Condition2+ConditionValue2),!eval(filterStr)){isFillCondition=!1;break}isFillCondition=!0}_this7.$set(row,"isFillCondition",isFillCondition)})},saveStrategyFun:function(){var t=this;if(this.checkBeforeExec()){var e=_extends({},this.currentStrategyInfo.pageData);__WEBPACK_IMPORTED_MODULE_2__utils_urlObj__.a.patch(""+__WEBPACK_IMPORTED_MODULE_2__utils_urlObj__.a.apiAlgorithmByIndex+this.currentStrategyInfo.id,e,function(e){200===e.code?t.$message("保存成功"):t.$message("保存失败")})}},refreshtablesize:function(){var t=this;this.$nextTick(function(){t.$refs.resultTable&&t.$refs.resultTable.doLayout()})},editParentNode:function(t,e){var a=this,i={name:e};__WEBPACK_IMPORTED_MODULE_2__utils_urlObj__.a.patch(""+__WEBPACK_IMPORTED_MODULE_2__utils_urlObj__.a.apiAlgorithmGroupById+t.categoryid,i,function(e){200===e.code?(t.name=e.data.name,t.editing=!1,a.$nextTick(function(){a.$refs.categorylist.changeDataByParent(!1,"","")}),a.$message("编辑成功")):a.$message("编辑失败")})},editChildNode:function(t,e,a){var i=this,r=Object(__WEBPACK_IMPORTED_MODULE_1_lodash__.find)(t,{categoryid:e[0]}),n=Object(__WEBPACK_IMPORTED_MODULE_1_lodash__.find)(r.children,{categoryid:e[1]}),s=Object(__WEBPACK_IMPORTED_MODULE_1_lodash__.findIndex)(r.children,{categoryid:e[1]}),o={name:a};__WEBPACK_IMPORTED_MODULE_2__utils_urlObj__.a.patch(""+__WEBPACK_IMPORTED_MODULE_2__utils_urlObj__.a.apiAlgorithmByIndex+n.categoryid,o,function(t){200===t.code?(n.editing=!1,n.name=t.data.name,r.children.splice(s,1,n),i.$nextTick(function(){i.$refs.categorylist.changeDataByParent(!1,"",""),i.$refs.categorylist.checkCategory([r.categoryid,n.categoryid])}),i.getIndexParmsByStrategies(t.data),i.$message("编辑成功")):i.$message("编辑失败")})},delStockStrategy:function(t,e,a){var i=this,r="",n=!1;e&&a?(n=!1,r=""+__WEBPACK_IMPORTED_MODULE_2__utils_urlObj__.a.apiAlgorithmByIndex+a.categoryid):(n=!0,r=""+__WEBPACK_IMPORTED_MODULE_2__utils_urlObj__.a.apiAlgorithmGroupById+e.categoryid),__WEBPACK_IMPORTED_MODULE_2__utils_urlObj__.a.dele(r,function(r){if(200===r.code){var s=-1;if(n)s=Object(__WEBPACK_IMPORTED_MODULE_1_lodash__.findIndex)(t,{categoryid:e.categoryid}),t.splice(s,1),i.$nextTick(function(){i.$refs.categorylist.checkNewAfterDelete([e.categoryid])});else{var o=e.children;h=Object(__WEBPACK_IMPORTED_MODULE_1_lodash__.findIndex)(o,{categoryid:a.categoryid}),o.splice(h,1),0===o.length&&i.$set(o,"isdelete",!0),console.log("afjief::",i.editableTabs);var h=Object(__WEBPACK_IMPORTED_MODULE_1_lodash__.findIndex)(i.editableTabs,{id:a.categoryid});i.editableTabs.splice(h,1),i.$nextTick(function(){i.$refs.categorylist.checkNewAfterDelete([e.categoryid,a.categoryid])})}i.$message("删除成功")}else i.$message("删除异常")})},addStockStrategyGroup:function(t,e){var a=this,i={name:e};__WEBPACK_IMPORTED_MODULE_2__utils_urlObj__.a.post(__WEBPACK_IMPORTED_MODULE_2__utils_urlObj__.a.apiAlgorithmGroupCreate,i,function(e){200===e.code?(t.categoryid=e.data.id,t.name=e.data.name,t.creating=!1,a.$nextTick(function(){a.$refs.categorylist.changeDataByParent(!1,"","")}),a.$message("创建成功")):a.$message("创建失败")})},addStockStrategy:function(t,e,a){var i=this;console.log("ccc::",t,a);var r=DefaultData.TabPageData().pageData;r.name=a,r.groupId=t.categoryid,r.stockPool=[{id:"000300.sh",name:"沪深300",type:"SYS"}],__WEBPACK_IMPORTED_MODULE_2__utils_urlObj__.a.post(__WEBPACK_IMPORTED_MODULE_2__utils_urlObj__.a.apiAlgorithmCreate,r,function(a){200===a.code?(e.categoryid=a.data.id,e.name=a.data.name,e.creating=!1,i.$nextTick(function(){i.$refs.categorylist.changeDataByParent(!1,"",""),i.$refs.categorylist.checkCategory([t.categoryid,e.categoryid])}),i.$message("创建成功")):i.$message("创建失败")})},getTableHearder:function(t,e){var a=this,i=Object.keys(t)?[].concat(_toConsumableArray(Object.keys(t)))[0]:"",r=[];return t[i].forEach(function(t){var i=a.formatStringToObject(t.Data),n=parseInt(t.ID),s=n,o=e.Policy[s].Name||"test",h=[];i.OutVar.forEach(function(t){if(0==t.Type){var e=t.Name||"test";h.push({prop:o+"-"+e,label:e,sortable:!0,width:"120",align:"right"})}});var l={label:o,children:h};r.push(l)}),r},getTableData:function(t,e){for(var a=[],i=[].concat(_toConsumableArray(Object.keys(t))),r=0;r<i.length;r++){for(var n=i[r],s=t[n],o={symbol:n,date:"",time:"",isFillCondition:!0},h=0;h<s.length;h++){var l=s[h],u=this.formatStringToObject(l.Data),c=parseInt(l.ID),d=e.Policy[c].Name;o.date=u.Date[0]?u.Date[0]:"--",o.time=u.Time&&u.Time[0]?u.Time[0]:"--";for(var f=0;f<u.OutVar.length;f++){var m=u.OutVar[f];if(0==m.Type){o[d+"-"+m.Name]=m.Data.length>0&&null!==m.Data[0]?Number(m.Data[0]).toFixed(2):"--"}}}a.push(o)}return a},OnSize:function(){var t=this,e=this.$refs.tabContentRight,a=e.clientHeight-50;this.tableHeight=a,this.$nextTick(function(){t.$refs.resultTable&&t.$refs.resultTable.doLayout()})},changeRight:function(){},changeNum:function(){},changePeriod:function(){},operatorChange:function(){},showSelect:function(){},sortFun:function(){},downloadExcel:function(){},gotoHqchart:function(){},changeCategory:function(t,e,a){this.isCheckTab="elTab"===a,this.isCheckTab||(this.loading=!0,this.queryOneStrategyDetail(e))},queryOneStrategyDetail:function(t){var e=this;__WEBPACK_IMPORTED_MODULE_2__utils_urlObj__.a.get(""+__WEBPACK_IMPORTED_MODULE_2__utils_urlObj__.a.apiAlgorithmByIndex+t.categoryid,{},function(t){if(e.loading=!1,200===t.code){var a=Object(__WEBPACK_IMPORTED_MODULE_1_lodash__.findIndex)(e.editableTabs,{id:t.data.id});if(console.log("tab中idnex：",a),a>-1)e.editableTabsValue=e.editableTabs[a].name;else{var i=DefaultData.TabPageData();i.title=t.data.name,i.name=e.tabIndex+"",i.id=t.data.id,i.pageData=t.data,e.editableTabs.push(i),e.editableTabsValue=i.name,e.tabIndex++}console.log("this.editableTabs：",e.editableTabs)}})},deleteStrategy:function(t){},changeStrategyName:function(t,e){},removeTab:function(t){var e=this.editableTabs,a=this.editableTabsValue;a===t&&e.forEach(function(i,r){if(i.name===t){var n=e[r+1]||e[r-1];n&&(a=n.name)}}),this.editableTabsValue=a,this.editableTabs=e.filter(function(e){return e.name!==t}),this.editableTabs.length>0?this.$refs.categorylist.checkCategory([this.currentStrategyInfo.pageData.groupId,this.currentStrategyInfo.pageData.id],"elTab"):(this.$refs.categorylist.checkCategory(null),this.tabIndex=0)},handleTabClick:function(t,e){this.isCheckTab=!0,this.$refs.categorylist.checkCategory([this.currentStrategyInfo.pageData.groupId,this.currentStrategyInfo.pageData.categoryid],"elTab")}}}},function(t,e,a){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function r(){}var n=a(14),s=(a.n(n),a(8));a(26);r.getListParentItem=function(){return{opened:!1,children:[],ishaschildren:!1,isSelected:!1,categoryid:"",name:"",isdelete:!0,editing:!1,creating:!1}},r.getListSubItem=function(){return{isSelected:!1,editing:!1,creating:!1,isdelete:!0,categoryid:"",name:""}},r.getArgItem=function(){return{defaultVal:"",id:-1,maxVal:"",minVal:"",name:"",strategyId:-1,delete:!1}},e.a={name:"CategoryList",props:["parentCompName"],data:function(){return{userid:"",permission:!0,pageType:"",categoryList:[],currentOperateCategoryId:[],currentSelectCategoryId:[],showRightMenu:!1,showDelateButton:!1,sending:!1,showSubCategory:!1,sameLevelChildOprTitle:"新建同级节点",nextLevelChildOprTitle:"新建下级节点",createType:"",text:"",currentMousePosition:{x:0,y:0},loading:!1,isShowNoCategory:!1,isStrategyComp:!1}},created:function(){"strategyEdit"===this.parentCompName&&(this.isStrategyComp=!0),this.loading=!0,this.updataCategroy()},mounted:function(){},methods:{checkNewAfterDelete:function(t){if(this.getCategoryId("select")===t[1])if(2===t.length){var e=Object(n.find)(this.categoryList,{categoryid:t[0]});if(0===e.children.length){var a=Object(n.find)(this.categoryList,function(t){return t.children.length>0});if(a){a.opened=!0;var i=a.children[0];this.checkCategory([a.categoryid,i.categoryid])}}else{e.opened=!0;var r=e.children[0];this.checkCategory([e.categoryid,r.categoryid])}}else if(this.categoryList.length>0){var s=Object(n.find)(this.categoryList,function(t){return t.children.length>0});if(s){s.opened=!0;var o=s.children[0];this.checkCategory([s.categoryid,o.categoryid])}}},addFirstGroup:function(){var t=r.getListParentItem();this.categoryList.push(t);var e=this.categoryList[this.categoryList.length-1];this.$emit("addStockStrategyGroup",e,this.text)},toggleShow:function(t){var e=t.opened;this.$set(t,"opened",!e)},getCategoryId:function(t){var e;if("operate"==t)e=this.currentOperateCategoryId;else{if("select"!=t)return!1;e=this.currentSelectCategoryId}return e[e.length-1]},getCategory:function(t){var e,a=this,i={},r=!1;if("operate"==t)e=this.currentOperateCategoryId;else{if("select"!=t)return!1;e=this.currentSelectCategoryId}return e.forEach(function(t){var e=void 0;r?e=i.children:(e=a.categoryList,r=!0),i=Object(n.find)(e,{categoryid:t})}),i},getCurrentCategoryParent:function(){return 1==this.currentOperateCategoryId.length?this.categoryList:2==this.currentOperateCategoryId.length?Object(n.find)(this.categoryList,{categoryid:this.currentOperateCategoryId[0]}):void 0},checkCategory:function(t,e){var a=this.getCategoryId("select"),i=this.getCategory("select");if(!t)return void(i&&this.$set(i,"isSelected",!1));this.currentSelectCategoryId=t;var r=this.getCategoryId("select"),n=this.getCategory("select");if(r){if(n.isSelected)return;a&&i&&this.$set(i,"isSelected",!1),this.$set(n,"isSelected",!0)}if("elTab"===e)return void this.$emit("refreshtablesize");this.$emit("changeCategory",this.categoryList,n,e)},addCategory:function(t){var e=this.getCategory("operate"),a=this.getCurrentCategoryParent();if(this.createType=t,"brother"==t){var i=null;2===this.currentOperateCategoryId.length?(i=r.getListSubItem(),a=a.children):1===this.currentOperateCategoryId.length&&(i=r.getListParentItem()),i.creating=!0,a.push(i)}else{if("child"!=t)return void console.error("添加节点错误");e.opened=!0;var n=r.getListSubItem();n.creating=!0,e.children.push(n)}this.$forceUpdate(),this.hideRightMenu(),this.inputFocus()},editCategory:function(){var t=this.getCategory("operate");this.text=t.name,this.$set(t,"editing",!0),this.hideRightMenu(),this.inputFocus()},confirm:function(){var t=this;this.$confirm("确定删除该节点吗？",{cancelButtonClass:"btn-cancel",cancelButtonText:"取消",confirmButtonText:"确定"}).then(function(){t.deleteCategory()}).catch(function(t){})},deleteCategory:function(){var t=this.getCategory("operate");if(2===this.currentOperateCategoryId.length){var e=Object(n.find)(this.categoryList,{categoryid:this.currentOperateCategoryId[0]});this.$emit("delStockStrategy",this.categoryList,e,t)}else this.$emit("delStockStrategy",this.categoryList,t,null);this.hideRightMenu()},rightMenu:function(t,e){if(t.preventDefault(),!this.permission)return!1;if(document.getElementById("J-edit-input"))return!1;var a=t.clientX+document.body.scrollLeft,i=t.clientY+document.body.scrollTop-43;this.showSubCategory=1==e.length;var r=void 0;r=this.showSubCategory?100:68,window.innerHeight<r+i&&(i-=r),this.currentMousePosition={x:a,y:i},1===e.length?(this.sameLevelChildOprTitle="新建同级节点",this.nextLevelChildOprTitle="新建策略"):this.sameLevelChildOprTitle="新建策略",this.currentOperateCategoryId=e;var n=this.getCategory("operate");this.showDelateButton=n.isdelete,this.showRightMenu=!0},queryGroupList:function(){var t=s.a.apiAlgorithmGroupList;return new Promise(function(e,a){s.a.get(t,{},function(t){e(t)},function(t){a(t)})})},updataCategroy:function(){var t=this;this.queryGroupList().then(function(e){if(t.loading=!1,200===e.code){if(t.categoryList=e.data.map(function(t){var e=r.getListParentItem();e.categoryid=t.id,e.name=t.name;var a=[];return a=t.algorithms.map(function(t){var e=r.getListSubItem();return e.categoryid=t.id,e.name=t.name,e}),e.children=[].concat(i(a)),e.children.length>0&&(e.ishaschildren=!0,e.isdelete=!1),e}),0===t.categoryList.length)return void(t.isShowNoCategory=!0);if(t.currentOperateCategoryId.length>1){var a=t.currentSelectCategoryId[0],s=t.currentSelectCategoryId[1],o=Object(n.findIndex)(t.categoryList,function(t){return t.categoryid===a}),h=Object(n.findIndex)(t.categoryList[o].children,function(t){return t.categoryid===s});o>-1&&h>-1&&t.checkCategory([a,s]),t.categoryList[o].opened=!0}else{var l=Object(n.find)(t.categoryList,function(t){return t.ishaschildren});if(!l)return;var u=l.categoryid,c=l.children[0].categoryid;t.checkCategory([u,c]),l.opened=!0}}else t.$message.error("获取策略分组异常")}).catch(function(e){t.$message.error("获取策略分组异常"),t.loading=!1})},hideRightMenu:function(){this.showRightMenu=!1},inputFocus:function(){this.$nextTick(function(){document.getElementById("J-edit-input").focus()})},submit:function(){var t=this.getCategory("operate"),e=this.getCategoryId("operate");if(t&&e&&!this.sending){if(""===this.text)return void this.cancel();if(t.editing&&this.text===t.name)return void this.cancel();this.sendForSelectStockStrategy()}},cancel:function(){var t=this.getCategory("operate");if(t.editing)t.editing=!1;else if(this.createType){if("brother"==this.createType){var e=this.getCurrentCategoryParent();2==this.currentOperateCategoryId.length&&(e=e.children);var a=e.length;e.splice(a-1,1)}else if("child"==this.createType){var i=t.children.length;t.children.splice(i-1,1)}this.createType=""}},changeDataByParent:function(t,e,a){this.sending=t,this.text=e,this.createType=a},sendForSelectStockStrategy:function(){var t=this.getCategory("operate");if(t.editing)this.sending=!0,2===this.currentOperateCategoryId.length?this.$emit("editChildNode",this.categoryList,this.currentOperateCategoryId,this.text):this.$emit("editParentNode",t,this.text);else if(this.createType){this.sending=!0;var e;if("brother"==this.createType){var a=this.getCurrentCategoryParent();if(1===this.currentOperateCategoryId.length){var i=a.length;e=a[i-1],this.$emit("addStockStrategyGroup",e,this.text)}else if(2===this.currentOperateCategoryId.length){a=Object(n.find)(this.categoryList,{categoryid:this.currentOperateCategoryId[0]});var r=a.children.length;e=a.children[r-1],this.$emit("addStockStrategy",a,e,this.text)}}else if("child"==this.createType){var s=t.children.length;e=t.children[s-1],this.$emit("addStockStrategy",t,e,this.text)}}}}}},function(t,e,a){"use strict";var i=a(8);e.a={name:"IndexSearch",computed:{},watch:{inputValue:function(t){var e=[];this.indexData.forEach(function(a){a.strategies.forEach(function(a){var i=new RegExp(t,"i");a.name.search(i)>-1&&e.push(a)})}),this.groupIndex=-1,this.filterStrategies=e}},data:function(){return{groupIndex:0,activeIndexId:44,inputValue:"",filterStrategies:[],indexData:[]}},mounted:function(){var t=this;i.a.get(i.a.apiGroupList,{},function(e){200===e.code?(t.indexData=e.data,t.filterStrategies=t.indexData[t.groupIndex].strategies):(console.log("获取指标数据异常"),t.indexData=[],t.filterStrategies=[])},function(e){console.log("获取指标数据异常"),t.indexData=[],t.filterStrategies=[]})},methods:{changeGroup:function(t){this.groupIndex=t,this.filterStrategies=this.indexData[this.groupIndex].strategies},selectOneIndex:function(t){this.activeIndexId=t.id,this.$emit("selectOneIndex",t)}}}},function(t,e,a){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function r(){}var n=a(501),s=a(14),o=(a.n(s),a(8)),h=a(0);a.n(h);r.getTabPageData=function(){return{title:"",name:"",id:"",groupId:"",resultTableData:[],pageTableData:[],resultTableHeader:[],totalTime:"--",apiTicket:"--",updateTime:"--",desc:null,paginationObj:{total:1,PageSize:30,PageIndex:1}}},e.a={name:"StrategyRun",components:{CategoryList:n.a},computed:{currentTabData:function(){return console.log("当前数据：",Object(s.find)(this.editableTabs,{name:this.editableTabsValue})),Object(s.find)(this.editableTabs,{name:this.editableTabsValue})||r.getTabPageData()}},watch:{"currentTabData.resultTableData":function(){this.currentTabData.paginationObj.total=this.currentTabData.resultTableData.length;var t=this.currentTabData.paginationObj,e=t.PageIndex,a=t.PageSize,i=t.total,r=(e-1)*a,n=e*a>i?i:e*a;this.currentTabData.pageTableData=this.currentTabData.resultTableData.slice(r,n)}},data:function(){return{editableTabs:[],editableTabsValue:"0",tabIndex:0,timer:null,execAllObj:{percent:0,status:0,taskname:""},resultLoading:!1}},methods:{currentChange:function(t){var e=this;this.currentTabData.paginationObj.PageIndex=t;var a=this.currentTabData.paginationObj,i=a.PageIndex,r=a.PageSize,n=a.total,s=(i-1)*r,o=i*r>n?n:i*r;this.currentTabData.pageTableData=this.currentTabData.resultTableData.slice(s,o),this.$nextTick(function(){e.$refs.resultTable.bodyWrapper.scrollTop=0})},reExecute:function(){var t=this;this.resultLoading=!0;var e={PolicyId:this.currentTabData.id},a=(new Date).getTime();o.a.post(o.a.apiPolicyRunById,e,function(e){t.resultLoading=!1;var r=(new Date).getTime();0===e.Code?([].concat(i(Object.keys(e.Data.result))).length>0&&(t.currentTabData.resultTableData=t.getResultTableData(e.Data.result),t.currentTabData.resultTableHeader=t.getResultTableHeader(e.Data.result)),t.currentTabData.totalTime=r-a,t.currentTabData.totalTime-50>20&&(t.currentTabData.totalTime=t.currentTabData.totalTime-50),t.currentTabData.apiTicket=Number(e.Data.ticket).toFixed(3),t.currentTabData.updateTime=e.Data.updateTime,t.currentTabData.desc=e.Data.desc,t.OnSize(),t.$message("重新执行成功")):t.$message("重新执行异常")},function(e){t.resultLoading=!1,t.$message.error("重新执行异常")})},OnSize:function(){var t=this;this.$nextTick(function(){var e=t.$refs.commonTabContentWrap,a=t.$refs.descTextWrap,i=t.$refs.resultTableWrap,r=t.$refs.resultTable,n=t.$refs.paginationWrap,s=0;a&&(s=a.offsetHeight);var o=0;n&&(o=50);var h=e.clientHeight-s-50-o;i.style.height=h+"px",r&&r.doLayout()})},execAllFun:function(){var t=this;o.a.post(o.a.apiPolicyRunAll,null,function(e){t.$message(e.msg),t.queryStaus()},function(e){t.$message.error("执行全部异常")})},queryStaus:function(){var t=this;o.a.get(o.a.apiPolicyRunStatus,null,function(e){200===e.code&&(t.execAllObj.percent=e.percent,t.execAllObj.status=e.status,t.execAllObj.taskname=e.taskname,null===t.timer&&(t.timer=setInterval(function(){t.queryStaus()},1e3)),1!==e.status&&t.timer&&(clearInterval(t.timer),t.timer=null))},function(e){t.$message.error("查询执行状态异常")})},changeCategory:function(t,e,a){var n=this,h=(new Date).getTime();o.a.get(o.a.apiAlgorithmPolicy+"/"+e+"/RunResult",{},function(a){var o=(new Date).getTime();if(0===a.Code){var l=a.Data.algorithmId;if(-1===Object(s.findIndex)(n.editableTabs,{id:l})){var u=r.getTabPageData();u.title=t.name,u.name=n.tabIndex+"",u.id=l,u.groupId=t.groupId,[].concat(i(Object.keys(a.Data.result))).length>0&&(u.resultTableData=n.getResultTableData(a.Data.result),u.resultTableHeader=n.getResultTableHeader(a.Data.result)),u.totalTime=o-h,u.totalTime-50>20&&(u.totalTime=u.totalTime-50),u.apiTicket=Number(a.Data.ticket).toFixed(3),u.updateTime=a.Data.updateTime,u.desc=a.Data.desc,n.editableTabs.push(u),n.editableTabsValue=u.name,n.tabIndex++,n.OnSize()}else{var c=null;n.editableTabs.forEach(function(t){t.id===l&&(c=t,n.editableTabsValue=c.name)}),n.OnSize()}n.$nextTick(function(){n.$refs.resultTable&&n.$refs.resultTable.doLayout()})}else if(-1===a.Code){n.$message.error(a.Msg);var d=e;if(-1===Object(s.findIndex)(n.editableTabs,{id:d})){var f=r.getTabPageData();f.title=t.name,f.name=n.tabIndex+"",f.id=d,f.groupId=t.groupId,n.editableTabs.push(f),n.editableTabsValue=f.name,n.tabIndex++}else{var m=Object(s.find)(n.editableTabs,{id:d});n.editableTabsValue=m.name}}else n.$message.error("查询执行结果异常")},function(t){n.$message.error("查询执行结果异常")})},getResultTableData:function(t){var e=[];return[].concat(i(Object.keys(t))).forEach(function(a){var r=t[a],n={symbol:a,symbolName:r.symbolName,date:r[0].Data.Date[0],time:r[0].Data.Time?r[0].Data.Time[0]:"--"},s=[].concat(i(Object.keys(r)));s.splice(s.length-1,1),s.forEach(function(t){var e=r[t].Data,a=[].concat(i(Object.keys(e))),s=a.indexOf("Date");a.splice(s,1);var o=a.indexOf("Time");o>-1&&a.splice(o,1),a.forEach(function(a){n[r[t].Name+"-"+a]=null!==e[a][0]?Number(e[a][0]).toFixed(2):"--"})}),e.push(n)}),e},getResultTableHeader:function(t){var e=[],a=[].concat(i(Object.keys(t))),r=a[0],n=t[r],s=[].concat(i(Object.keys(n)));return s.splice(s.length-1,1),s.forEach(function(t){var a=n[t],r={label:a.Name,children:[]},s=[].concat(i(Object.keys(a.Data))),o=s.indexOf("Date");s.splice(o,1);var h=s.indexOf("Time");h>-1&&s.splice(h,1),s.forEach(function(t){var e={prop:a.Name+"-"+t,label:t,sortable:!0,width:"120",align:"right"};r.children.push(e)}),e.push(r)}),e},removeTab:function(t){var e=this.editableTabs,a=this.editableTabsValue;if(a===t&&e.forEach(function(i,r){if(i.name===t){var n=e[r+1]||e[r-1];n&&(a=n.name)}}),this.editableTabsValue=a,this.editableTabs=e.filter(function(e){return e.name!==t}),this.editableTabs.length>0){var i=Object(s.find)(this.editableTabs,{name:this.editableTabsValue});this.$refs.categorylist.checkCategory([i.groupId,i.id],"elTab")}else this.$refs.categorylist.checkCategory(null)},handleTabClick:function(t,e){var a=Object(s.find)(this.editableTabs,{name:t.name});this.$refs.categorylist.checkCategory([a.groupId,a.id],"elTab")}}}},function(t,e,a){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function r(){}var n=a(14),s=(a.n(n),a(8)),o=a(26);r.getListParentItem=function(){return{opened:!1,children:[],ishaschildren:!1,isSelected:!1,categoryid:"",name:"",isdelete:!1,editing:!1,creating:!1}},r.getListSubItem=function(){return{isSelected:!1,editing:!1,creating:!1,isdelete:!0,categoryid:"",name:"",groupId:""}},r.getGrandFatherId=function(){return 1e4},e.a={name:"CategoryList",props:["parentCompName"],data:function(){return{userid:"",permission:!1,pageType:"",categoryList:[],currentOperateCategoryId:[],currentSelectCategoryId:[],showRightMenu:!1,showDelateButton:!1,sending:!1,showSubCategory:!1,showGroupCategory:!1,sameLevelChildOprTitle:"新建同级节点",nextLevelChildOprTitle:"新建下级节点",createType:"",text:"",currentMousePosition:{x:0,y:0},loading:!1,isShowNoCategory:!1,isStrategyComp:!1}},created:function(){this.queryGroupList()},mounted:function(){var t=this;document.getElementById("categoryWrap").addEventListener("click",function(e){e.target!=document.getElementById("J-edit-input")&&t.submit()},!0)},methods:{addFirstGroup:function(){var t=r.getListParentItem();this.categoryList.push(t);var e=this.categoryList[this.categoryList.length-1];o.a.addOneGroup(e,this)},changeCategory:function(t,e,a){"elTab"!=a?null!=t&&this.$emit("changeCategory",t,e):this.$emit("refreshtablesize")},toggleShow:function(t){var e=t.opened;this.$set(t,"opened",!e)},getCategoryId:function(t){var e;if("operate"==t)e=this.currentOperateCategoryId;else{if("select"!=t)return!1;e=this.currentSelectCategoryId}return e[e.length-1]},getCategory:function(t){var e,a=this,i={},r=!1;if("operate"==t)e=this.currentOperateCategoryId;else{if("select"!=t)return!1;e=this.currentSelectCategoryId}return e.forEach(function(t){var e=void 0;r?e=i.children:(e=a.categoryList,r=!0),i=Object(n.find)(e,{categoryid:t})}),i},getCurrentCategoryParent:function(){return 1==this.currentOperateCategoryId.length?this.categoryList:2==this.currentOperateCategoryId.length?Object(n.find)(this.categoryList,{categoryid:this.currentOperateCategoryId[0]}):void 0},checkCategory:function(t,e){var a=this.getCategoryId("select"),i=this.getCategory("select");if(!t)return i&&this.$set(i,"isSelected",!1),void this.changeCategory(null);this.currentSelectCategoryId=t;var r=this.getCategoryId("select"),n=this.getCategory("select");if(r){if(n.isSelected)return;a&&i&&this.$set(i,"isSelected",!1),this.$set(n,"isSelected",!0)}this.changeCategory(n,r,e)},addCategory:function(t){var e=this.getCategory("operate"),a=this.getCurrentCategoryParent();if(this.createType=t,"brother"==t){var i=null;2===this.currentOperateCategoryId.length?(i=r.getListSubItem(),child.groupId=this.currentOperateCategoryId[0],a=a.children):1===this.currentOperateCategoryId.length&&(i=r.getListParentItem()),i.creating=!0,a.push(i)}else{if("child"!=t)return void console.error("添加节点错误");e.opened=!0;var n=r.getListSubItem();n.groupId=e.categoryid,n.creating=!0,e.children.push(n)}this.$forceUpdate(),this.hideRightMenu(),this.inputFocus()},editCategory:function(){var t=this.getCategory("operate");this.text=t.name,this.$set(t,"editing",!0),this.hideRightMenu(),this.inputFocus()},confirm:function(){var t=this;this.$confirm("确定删除该节点吗？",{cancelButtonClass:"btn-cancel",cancelButtonText:"取消",confirmButtonText:"确定"}).then(function(){t.deleteCategory()}).catch(function(t){})},deleteCategory:function(){var t=this;this.getCategory("operate");2===this.currentOperateCategoryId.length&&setTimeout(function(){var e=t.getCurrentCategoryParent(),a=Object(n.findIndex)(e.children,{categoryid:t.currentOperateCategoryId[1]});e.children.splice(a,1),e.children.length>0&&t.checkCategory([e.categoryid,e.children[0].categoryid])},1e3),this.hideRightMenu()},rightMenu:function(t,e){if(t.preventDefault(),!this.permission)return!1;if(document.getElementById("J-edit-input"))return!1;var a=t.clientX+document.body.scrollLeft,i=t.clientY+document.body.scrollTop-43;this.showSubCategory=1==e.length,this.showGroupCategory=2==e.length;var r=void 0;r=this.showSubCategory?100:68,window.innerHeight<r+i&&(i-=r),this.currentMousePosition={x:a,y:i},1===e.length?(this.sameLevelChildOprTitle="新建同级节点",this.nextLevelChildOprTitle="新建策略"):this.sameLevelChildOprTitle="新建策略",this.currentOperateCategoryId=e;var n=this.getCategory("operate");this.showDelateButton=n.isdelete,this.showRightMenu=!0},queryGroupList:function(){var t=this,e={params:{status:1}};s.a.get(s.a.apiAlgorithmGroupList,e,function(e){t.updataCategroyLocal(e)},function(e){t.$message.error(e.message||e.msg)})},updataCategroyLocal:function(t){if(200===t.code){if(this.categoryList=t.data.map(function(t){var e=r.getListParentItem();e.categoryid=t.id,e.name=t.name;var a=[];return a=t.algorithms.map(function(e){var a=r.getListSubItem();return a.categoryid=e.id,a.name=e.name,a.groupId=t.id,a}),e.children=[].concat(i(a)),e.children.length>0&&(e.ishaschildren=!0,e.isdelete=!1),e}),0===this.categoryList.length)return void(this.isShowNoCategory=!0);if(this.currentOperateCategoryId.length>1){var e=this.currentSelectCategoryId[0],a=this.currentSelectCategoryId[1],s=Object(n.findIndex)(this.categoryList,function(t){return t.categoryid===e}),o=Object(n.findIndex)(this.categoryList[s].children,function(t){return t.categoryid===a});s>-1&&o>-1&&this.checkCategory([e,a]),this.categoryList[s].opened=!0}else{var h=Object(n.find)(this.categoryList,function(t){return t.ishaschildren});if(!h)return;var l=h.categoryid,u=h.children[0].categoryid;this.checkCategory([l,u]),h.opened=!0}}else this.$message("获取列表异常")},hideRightMenu:function(){this.showRightMenu=!1},inputFocus:function(){this.$nextTick(function(){document.getElementById("J-edit-input").focus()})},submit:function(){var t=this.getCategory("operate"),e=this.getCategoryId("operate");if(t&&e&&!this.sending){if(""===this.text)return void this.cancel();if(t.editing&&this.text===t.name)return void this.cancel();this.send()}},cancel:function(){var t=this.getCategory("operate");if(t.editing)t.editing=!1;else if(this.createType){if("brother"==this.createType){var e=this.getCurrentCategoryParent();2==this.currentOperateCategoryId.length&&(e=e.children);var a=e.length;e.splice(a-1,1)}else if("child"==this.createType){var i=t.children.length;t.children.splice(i-1,1)}this.createType=""}},send:function(){var t=this,e=this.getCategory("operate");if(e.editing)this.sending=!0,2===this.currentOperateCategoryId.length&&s.a.post(""+s.a.apiStockGroup+this.currentOperateCategoryId[1],{name:this.text},function(a){if(200===a.code){e.name=a.data.name,e.editing=!1,t.sending=!1;var i=t.getCurrentCategoryParent();t.checkCategory([i.categoryid,e.categoryid])}else t.$message("编辑失败")});else if(this.createType){this.sending=!0;var a;this.text;if("brother"==this.createType){var i=this.getCurrentCategoryParent();if(1===this.currentOperateCategoryId.length);else if(2===this.currentOperateCategoryId.length){var r=i.children.length;a=i.children[r-1],this.poolCreate(a,i)}}else if("child"==this.createType){var n=e.children.length;a=e.children[n-1],this.poolCreate(a,e)}}},poolCreate:function(t,e){var a=this;s.a.post(s.a.apiStockGroupCreate,{name:this.text},function(i){200===i.code?(t.categoryid=i.data.id,t.name=i.data.name,t.creating=!1,a.sending=!1,a.checkCategory([e.categoryid,t.categoryid])):a.$message("新建失败")})}}}},function(t,e,a){"use strict";function i(){}var r=a(509),n=a(14),s=(a.n(n),a(8)),o=a(0),h=a.n(o),l=a(71);i.getTabData=function(){return{name:"",title:"",id:null,grandFatherId:null,data:{tableData:[]}}},i.getGrandFatherId=function(){return 1e4},e.a={name:"CustomStockPool",components:{StockSearch:l.a,CategoryListForStockPool:r.a},data:function(){return{addSymbolObj:{symbol:"",name:"",date:""},inputValue:"",searchLoading:!1,resultOptions:[],editableTabs:[],editableTabsValue:"0",tabIndex:0}},computed:{currentTabData:function(){return Object(n.find)(this.editableTabs,{name:this.editableTabsValue})||i.getTabData()}},mounted:function(){},methods:{remoteMethod:function(t){var e=this;""!==t?(this.searchLoading=!0,s.a.post(s.a.apiStockSearch,{key:t},function(t){e.searchLoading=!1,e.resultOptions=t.data})):this.resultOptions=[]},refreshPoolName:function(t){var e=Object(n.findIndex)(this.editableTabs,{name:this.editableTabsValue}),a=this.editableTabs[e];a.title=t,this.editableTabs.splice(e,1,a)},deleteCategory:function(t,e,a){var i=Object(n.findIndex)(this.editableTabs,{id:e});this.editableTabs.splice(i,1),e===a&&(t.children.length>0?this.$refs.categorylist.checkCategory([t.categoryid,t.children[0].categoryid]):this.$refs.categorylist.checkCategory(null))},changeCategory:function(t,e){var a=this;s.a.get(""+s.a.apiStockGroup+e,{},function(r){var s={name:a.tabIndex+"",title:t.name,id:t.categoryid,grandFatherId:i.getGrandFatherId(),data:{tableData:r.data.members}};-1===Object(n.findIndex)(a.editableTabs,{id:s.id})?(a.editableTabs.push(s),a.editableTabsValue=s.name,a.tabIndex++):(console.log("从编辑来"),s=Object(n.find)(a.editableTabs,{id:e}),a.editableTabsValue=s.name)})},deleteRow:function(t,e){var a=this,i=e[t],r=this.currentTabData.id;s.a.dele(""+s.a.apiStockGroup+r+"/member/delete/"+i.id,function(i){200===i.code?(e.splice(t,1),a.$message("删除成功")):a.$message("删除失败")})},removeTab:function(t){var e=this.editableTabs,a=this.editableTabsValue;if(a===t&&e.forEach(function(i,r){if(i.name===t){var n=e[r+1]||e[r-1];n&&(a=n.name)}}),this.editableTabsValue=a,this.editableTabs=e.filter(function(e){return e.name!==t}),this.editableTabs.length>0){var i=Object(n.find)(this.editableTabs,{name:this.editableTabsValue});this.$refs.categorylist.checkCategory([1e4,i.id],"elTab")}else this.$refs.categorylist.checkCategory()},handleTabClick:function(t,e){var a=this;console.log("ccc::",t);var i=Object(n.find)(this.editableTabs,{name:t.name});this.$nextTick(function(){a.$refs.categorylist.checkCategory([1e4,i.id],"elTab")})},addSymbol:function(t){var e=this;this.inputValue=t,console.log("选中那个：",this.inputValue);var a={name:this.inputValue.name,symbol:this.inputValue.symbol,date:parseInt(h()().format("YYYYMMDD"))};s.a.post(""+s.a.apiStockGroup+this.currentTabData.id+"/member/add",a,function(t){if(200===t.code){e.$message("添加成功"),a.id=t.data.id;-1===Object(n.findIndex)(e.currentTabData.data.tableData,{id:a.id})&&e.currentTabData.data.tableData.push(a)}else e.$message("请不要重复添加")})}}}},function(t,e,a){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function r(){}var n=a(14),s=(a.n(n),a(8)),o=a(26);r.getListParentItem=function(){return{opened:!1,children:[],ishaschildren:!1,isSelected:!1,categoryid:"",name:"",isdelete:!1,editing:!1,creating:!1}},r.getListSubItem=function(){return{isSelected:!1,editing:!1,creating:!1,isdelete:!0,categoryid:"",name:""}},r.getGrandFatherId=function(){return 1e4},e.a={name:"CategoryList",props:["parentCompName"],data:function(){return{userid:"",permission:!0,pageType:"",categoryList:[],currentOperateCategoryId:[],currentSelectCategoryId:[],showRightMenu:!1,showDelateButton:!1,sending:!1,showSubCategory:!1,showGroupCategory:!1,sameLevelChildOprTitle:"新建同级节点",nextLevelChildOprTitle:"新建下级节点",createType:"",text:"",currentMousePosition:{x:0,y:0},loading:!1,isShowNoCategory:!1,isStrategyComp:!1}},created:function(){this.queryGroupList()},mounted:function(){},methods:{addFirstGroup:function(){var t=r.getListParentItem();this.categoryList.push(t);var e=this.categoryList[this.categoryList.length-1];o.a.addOneGroup(e,this)},changeCategory:function(t,e,a){null!=t&&"elTab"!=a&&this.$emit("changeCategory",t,e)},toggleShow:function(t){var e=t.opened;this.$set(t,"opened",!e)},getCategoryId:function(t){var e;if("operate"==t)e=this.currentOperateCategoryId;else{if("select"!=t)return!1;e=this.currentSelectCategoryId}return e[e.length-1]},getCategory:function(t){var e,a=this,i={},r=!1;if("operate"==t)e=this.currentOperateCategoryId;else{if("select"!=t)return!1;e=this.currentSelectCategoryId}return e.forEach(function(t){var e=void 0;r?e=i.children:(e=a.categoryList,r=!0),i=Object(n.find)(e,{categoryid:t})}),i},getCurrentCategoryParent:function(){return 1==this.currentOperateCategoryId.length?this.categoryList:2==this.currentOperateCategoryId.length?Object(n.find)(this.categoryList,{categoryid:this.currentOperateCategoryId[0]}):void 0},checkCategory:function(t,e){var a=this.getCategoryId("select"),i=this.getCategory("select");if(!t)return i&&this.$set(i,"isSelected",!1),void this.changeCategory(null);this.currentSelectCategoryId=t;var r=this.getCategoryId("select"),n=this.getCategory("select");if(r){if(n.isSelected)return void this.$emit("refreshPoolName",n.name);a&&i&&this.$set(i,"isSelected",!1),this.$set(n,"isSelected",!0)}this.changeCategory(n,r,e)},addCategory:function(t){var e=this.getCategory("operate");if(this.createType=t,"brother"==t)if(2===this.currentOperateCategoryId.length){var a=Object(n.find)(this.categoryList,{categoryid:this.currentOperateCategoryId[0]}),i=r.getListSubItem();i.creating=!0,a.children.push(i)}else this.currentOperateCategoryId.length;else{if("child"!=t)return void console.error("添加节点错误");e.opened=!0;var s=r.getListSubItem();s.creating=!0,e.children.push(s)}this.$forceUpdate(),this.hideRightMenu(),this.inputFocus()},editCategory:function(){var t=this.getCategory("operate");this.text=t.name,this.$set(t,"editing",!0),this.hideRightMenu(),this.inputFocus()},confirm:function(){var t=this;this.$confirm("确定删除该节点吗？",{cancelButtonClass:"btn-cancel",cancelButtonText:"取消",confirmButtonText:"确定"}).then(function(){t.deleteCategory()}).catch(function(t){})},deleteCategory:function(){var t=this,e=(this.getCategory("operate"),this.getCategory("select"));if(2===this.currentOperateCategoryId.length){var a=this.currentOperateCategoryId[1];s.a.dele(""+s.a.apiStockGroup+a,function(i){if(200===i.code){var r=t.getCurrentCategoryParent(),s=Object(n.findIndex)(r.children,{categoryid:a});r.children.splice(s,1),t.$emit("deleteCategory",r,a,e.categoryid)}else t.$message(i.message||i.msg)},function(e){t.$message.error("删除异常")})}this.hideRightMenu()},rightMenu:function(t,e){if(t.preventDefault(),!this.permission)return!1;if(document.getElementById("J-edit-input"))return!1;var a=t.clientX+document.body.scrollLeft,i=t.clientY+document.body.scrollTop-43;this.showSubCategory=1==e.length,this.showGroupCategory=2==e.length;var r=void 0;r=this.showSubCategory?100:68,window.innerHeight<r+i&&(i-=r),this.currentMousePosition={x:a,y:i},1===e.length?(this.sameLevelChildOprTitle="新建同级节点",this.nextLevelChildOprTitle="新建股票池"):this.sameLevelChildOprTitle="新建股票池",this.currentOperateCategoryId=e;var n=this.getCategory("operate");this.showDelateButton=n.isdelete,this.showRightMenu=!0},queryGroupList:function(){var t=this;s.a.get(s.a.apiStockGroupList,{},function(e){t.updataCategroyLocal(e)},function(e){t.$message.error(e.message||e.msg)})},updataCategroyLocal:function(t){if(200===t.code){var e=r.getListParentItem();e.categoryid=r.getGrandFatherId(),e.name="自定义股票池";var a=t.data.map(function(t){var e=r.getListSubItem();return e.categoryid=t.id,e.name=t.name,e});if(e.children=[].concat(i(a)),e.children.length>0&&(e.ishaschildren=!0,e.isdelete=!1),this.categoryList.push(e),0===this.categoryList.length)return void(this.isShowNoCategory=!0);if(this.currentOperateCategoryId.length>1){var s=this.currentSelectCategoryId[0],o=this.currentSelectCategoryId[1],h=Object(n.findIndex)(this.categoryList,function(t){return t.categoryid===s}),l=Object(n.findIndex)(this.categoryList[h].children,function(t){return t.categoryid===o});h>-1&&l>-1&&this.checkCategory([s,o]),this.categoryList[h].opened=!0}else{var u=Object(n.find)(this.categoryList,function(t){return t.ishaschildren});if(!u)return;var c=u.categoryid,d=u.children[0].categoryid;this.checkCategory([c,d]),u.opened=!0}}else this.$message("获取列表异常")},saveStorage:function(t){var e=[];t.forEach(function(t){t.strategies.length>0&&e.push.apply(e,i(t.strategies))});var a=[];e.forEach(function(t){var e=new Promise(function(e,a){s.a.get(""+s.a.apiStrategyOpr+t.id,null,function(t){200===t.code?e(t):a(t)})});a.push(e)}),Promise.all(a).then(function(t){var e=[];t.forEach(function(t){e.push(t.data)}),console.log("所有指标信息",e),localStorage.setItem("st_index_lists",JSON.stringify(e))}).catch(function(t){console.log(t)})},hideRightMenu:function(){this.showRightMenu=!1},inputFocus:function(){this.$nextTick(function(){document.getElementById("J-edit-input").focus()})},submit:function(){var t=this.getCategory("operate"),e=this.getCategoryId("operate");if(t&&e&&!this.sending){if(""===this.text)return void this.cancel();if(t.editing&&this.text===t.name)return void this.cancel();this.send()}},cancel:function(){var t=this.getCategory("operate");if(t.editing)t.editing=!1;else if(this.createType){if("brother"==this.createType){var e=this.getCurrentCategoryParent();2==this.currentOperateCategoryId.length&&(e=e.children);var a=e.length;e.splice(a-1,1)}else if("child"==this.createType){var i=t.children.length;t.children.splice(i-1,1)}this.createType=""}},queryApiStockGroup:function(){var t=this,e=this.getCategory("operate");s.a.post(""+s.a.apiStockGroup+this.currentOperateCategoryId[1],{name:this.text},function(a){if(200===a.code){e.name=a.data.name,e.editing=!1,t.sending=!1;var i=t.getCurrentCategoryParent();t.checkCategory([i.categoryid,e.categoryid])}else t.$message("编辑失败")},function(t){})},send:function(){var t=this.getCategory("operate");if(t.editing)this.sending=!0,2===this.currentOperateCategoryId.length&&this.queryApiStockGroup();else if(this.createType){this.sending=!0;var e;this.text;if("brother"==this.createType){if(1===this.currentOperateCategoryId.length);else if(2===this.currentOperateCategoryId.length){var a=Object(n.find)(this.categoryList,{categoryid:this.currentOperateCategoryId[0]}),i=a.children.length;e=a.children[i-1],this.poolCreate(e,a)}}else if("child"==this.createType){var r=t.children.length;e=t.children[r-1],this.poolCreate(e,t)}}},poolCreate:function(t,e){var a=this;s.a.post(s.a.apiStockGroupCreate,{name:this.text},function(i){200===i.code?(t.categoryid=i.data.id,t.name=i.data.name,t.creating=!1,a.sending=!1,a.text="",a.checkCategory([e.categoryid,t.categoryid])):a.$message("新建异常")},function(t){a.$message.error("新建失败"),a.sending=!1})}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(52),r=a.n(i),n=a(7),s=a(399),o=a(28),h=a.n(o),l=a(65),u=(a.n(l),a(404));window.Promise||(window.Promise=r.a),n.default.use(h.a),new n.default({el:"#app",router:u.a,render:function(t){return t(s.a)},beforeCreate:function(){n.default.prototype.$bus=this}})},function(t,e,a){"use strict";function i(t){a(400)}var r=a(146),n=a(402),s=a(4),o=i,h=s(r.a,n.a,!1,o,null,null);e.a=h.exports},function(t,e,a){var i=a(401);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(3)("862e2594",i,!0,{})},function(t,e,a){e=t.exports=a(2)(!1),e.push([t.i,'.noData{padding-top:30px;text-align:center;color:#666}.app{height:100%}.app .topWrap{display:-ms-flexbox;display:flex;height:44px;width:100%;border-bottom:1px solid #d9d9d9;box-sizing:border-box}.app .topWrap .logoWrap{width:120px;height:100%;background-color:#de432d;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}.app .topWrap .tabs{width:100%;height:43px;display:-ms-flexbox;display:flex;padding:0 30px;box-sizing:border-box}.app .topWrap .tabs .tab{height:100%;line-height:43px;padding:0 30px;font-size:15px;color:#666;position:relative;cursor:pointer}.app .topWrap .tabs .tab:after{position:absolute;left:0;top:100%;content:" ";height:1px;width:100%;background-color:transparent}.app .topWrap .tabs .tab.active{color:#ec6941}.app .topWrap .tabs .tab.active:after{background-color:#ec6941}.app .content{height:calc(100% - 44px - 30px);overflow-y:auto}.app .bottomWrap{height:30px;padding:0 15px;font-size:14px;color:red;box-sizing:border-box;border-top:1px solid #d9d9d9;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}',""])},function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app"},[a("div",{staticClass:"topWrap"},[t._m(0),t._v(" "),a("div",{staticClass:"tabs"},t._l(t.tabsAry,function(e,i){return a("div",{key:i,staticClass:"tab",class:{active:t.activeIndex===i},on:{click:function(a){return t.changeTab(i,e)}}},[t._v(t._s(e.Text))])}),0)]),t._v(" "),a("div",{ref:"content",staticClass:"content"},[a("router-view")],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowBottomWrap,expression:"isShowBottomWrap"}],staticClass:"bottomWrap"},[t._v("\n    郑重声明：本网站所刊载的所有资料及图表仅供参考使用。投资者依据本网站提供的信息、资料及图表进行金融、证券等投资所造成的盈亏与本网站无关。\n  ")])])},r=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"logoWrap"},[i("img",{attrs:{src:a(403),alt:"logo"}})])}],n={render:i,staticRenderFns:r};e.a=n},function(t,e,a){t.exports=a.p+"images/logo.c8c4794b.png"},function(t,e,a){"use strict";var i=a(7),r=a(405),n=a(406),s=a(410),o=a(418),h=a(486),l=a(498),u=a(506);i.default.use(r.a);var c=r.a.prototype.push,d=r.a.prototype.replace;r.a.prototype.push=function(t,e,a){return e||a?c.call(this,t,e,a):c.call(this,t).catch(function(t){return t})},r.a.prototype.replace=function(t,e,a){return e||a?d.call(this,t,e,a):d.call(this,t).catch(function(t){return t})};var f=[{path:"/",redirect:"/home"},{path:"/home",component:n.a},{path:"/setting",component:s.a},{path:"/indexEdit",component:o.a},{path:"/strategyEdit",component:h.a},{path:"/strategyRun",component:l.a},{path:"/customStockPool",component:u.a}],m=new r.a({routes:f});e.a=m},function(t,e,a){"use strict";function i(t,e){}function r(t,e){for(var a in e)t[a]=e[a];return t}function n(t){try{return decodeURIComponent(t)}catch(t){}return t}function s(t,e,a){void 0===e&&(e={});var i,r=a||o;try{i=r(t||"")}catch(t){i={}}for(var n in e){var s=e[n];i[n]=Array.isArray(s)?s.map(jt):jt(s)}return i}function o(t){var e={};return(t=t.trim().replace(/^(\?|#|&)/,""))?(t.split("&").forEach(function(t){var a=t.replace(/\+/g," ").split("="),i=n(a.shift()),r=a.length>0?n(a.join("=")):null;void 0===e[i]?e[i]=r:Array.isArray(e[i])?e[i].push(r):e[i]=[e[i],r]}),e):e}function h(t){var e=t?Object.keys(t).map(function(e){var a=t[e];if(void 0===a)return"";if(null===a)return Kt(e);if(Array.isArray(a)){var i=[];return a.forEach(function(t){void 0!==t&&(null===t?i.push(Kt(e)):i.push(Kt(e)+"="+Kt(t)))}),i.join("&")}return Kt(e)+"="+Kt(a)}).filter(function(t){return t.length>0}).join("&"):null;return e?"?"+e:""}function l(t,e,a,i){var r=i&&i.options.stringifyQuery,n=e.query||{};try{n=u(n)}catch(t){}var s={name:e.name||t&&t.name,meta:t&&t.meta||{},path:e.path||"/",hash:e.hash||"",query:n,params:e.params||{},fullPath:d(e,r),matched:t?c(t):[]};return a&&(s.redirectedFrom=d(a,r)),Object.freeze(s)}function u(t){if(Array.isArray(t))return t.map(u);if(t&&"object"==typeof t){var e={};for(var a in t)e[a]=u(t[a]);return e}return t}function c(t){for(var e=[];t;)e.unshift(t),t=t.parent;return e}function d(t,e){var a=t.path,i=t.query;void 0===i&&(i={});var r=t.hash;void 0===r&&(r="");var n=e||h;return(a||"/")+n(i)+r}function f(t,e){return e===Jt?t===e:!!e&&(t.path&&e.path?t.path.replace(zt,"")===e.path.replace(zt,"")&&t.hash===e.hash&&m(t.query,e.query):!(!t.name||!e.name)&&(t.name===e.name&&t.hash===e.hash&&m(t.query,e.query)&&m(t.params,e.params)))}function m(t,e){if(void 0===t&&(t={}),void 0===e&&(e={}),!t||!e)return t===e;var a=Object.keys(t).sort(),i=Object.keys(e).sort();return a.length===i.length&&a.every(function(a,r){var n=t[a];if(i[r]!==a)return!1;var s=e[a];return null==n||null==s?n===s:"object"==typeof n&&"object"==typeof s?m(n,s):String(n)===String(s)})}function C(t,e){return 0===t.path.replace(zt,"/").indexOf(e.path.replace(zt,"/"))&&(!e.hash||t.hash===e.hash)&&p(t.query,e.query)}function p(t,e){for(var a in e)if(!(a in t))return!1;return!0}function D(t){for(var e=0;e<t.matched.length;e++){var a=t.matched[e];for(var i in a.instances){var r=a.instances[i],n=a.enteredCbs[i];if(r&&n){delete a.enteredCbs[i];for(var s=0;s<n.length;s++)r._isBeingDestroyed||n[s](r)}}}}function v(t,e,a,i){var n=e.props=g(a,i);if(n){n=e.props=r({},n);var s=e.attrs=e.attrs||{};for(var o in n)t.props&&o in t.props||(s[o]=n[o],delete n[o])}}function g(t,e){switch(typeof e){case"undefined":return;case"object":return e;case"function":return e(t);case"boolean":return e?t.params:void 0}}function S(t,e,a){var i=t.charAt(0);if("/"===i)return t;if("?"===i||"#"===i)return e+t;var r=e.split("/");a&&r[r.length-1]||r.pop();for(var n=t.replace(/^\//,"").split("/"),s=0;s<n.length;s++){var o=n[s];".."===o?r.pop():"."!==o&&r.push(o)}return""!==r[0]&&r.unshift(""),r.join("/")}function T(t){var e="",a="",i=t.indexOf("#");i>=0&&(e=t.slice(i),t=t.slice(0,i));var r=t.indexOf("?");return r>=0&&(a=t.slice(r+1),t=t.slice(0,r)),{path:t,query:a,hash:e}}function y(t){return t.replace(/\/\//g,"/")}function I(t,e){for(var a,i=[],r=0,n=0,s="",o=e&&e.delimiter||"/";null!=(a=ie.exec(t));){var h=a[0],l=a[1],u=a.index;if(s+=t.slice(n,u),n=u+h.length,l)s+=l[1];else{var c=t[n],d=a[2],f=a[3],m=a[4],C=a[5],p=a[6],D=a[7];s&&(i.push(s),s="");var v=null!=d&&null!=c&&c!==d,g="+"===p||"*"===p,S="?"===p||"*"===p,T=a[2]||o,y=m||C;i.push({name:f||r++,prefix:d||"",delimiter:T,optional:S,repeat:g,partial:v,asterisk:!!D,pattern:y?w(y):D?".*":"[^"+b(T)+"]+?"})}}return n<t.length&&(s+=t.substr(n)),s&&i.push(s),i}function x(t,e){return _(I(t,e),e)}function L(t){return encodeURI(t).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function M(t){return encodeURI(t).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function _(t,e){for(var a=new Array(t.length),i=0;i<t.length;i++)"object"==typeof t[i]&&(a[i]=new RegExp("^(?:"+t[i].pattern+")$",E(e)));return function(e,i){for(var r="",n=e||{},s=i||{},o=s.pretty?L:encodeURIComponent,h=0;h<t.length;h++){var l=t[h];if("string"!=typeof l){var u,c=n[l.name];if(null==c){if(l.optional){l.partial&&(r+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(Zt(c)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(c)+"`");if(0===c.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<c.length;d++){if(u=o(c[d]),!a[h].test(u))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(u)+"`");r+=(0===d?l.prefix:l.delimiter)+u}}else{if(u=l.asterisk?M(c):o(c),!a[h].test(u))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+u+'"');r+=l.prefix+u}}else r+=l}return r}}function b(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function w(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function F(t,e){return t.keys=e,t}function E(t){return t&&t.sensitive?"":"i"}function A(t,e){var a=t.source.match(/\((?!\?)/g);if(a)for(var i=0;i<a.length;i++)e.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return F(t,e)}function N(t,e,a){for(var i=[],r=0;r<t.length;r++)i.push(R(t[r],e,a).source);return F(new RegExp("(?:"+i.join("|")+")",E(a)),e)}function O(t,e,a){return P(I(t,a),e,a)}function P(t,e,a){Zt(e)||(a=e||a,e=[]),a=a||{};for(var i=a.strict,r=!1!==a.end,n="",s=0;s<t.length;s++){var o=t[s];if("string"==typeof o)n+=b(o);else{var h=b(o.prefix),l="(?:"+o.pattern+")";e.push(o),o.repeat&&(l+="(?:"+h+l+")*"),l=o.optional?o.partial?h+"("+l+")?":"(?:"+h+"("+l+"))?":h+"("+l+")",n+=l}}var u=b(a.delimiter||"/"),c=n.slice(-u.length)===u;return i||(n=(c?n.slice(0,-u.length):n)+"(?:"+u+"(?=$))?"),n+=r?"$":i&&c?"":"(?="+u+"|$)",F(new RegExp("^"+n,E(a)),e)}function R(t,e,a){return Zt(e)||(a=e||a,e=[]),a=a||{},t instanceof RegExp?A(t,e):Zt(t)?N(t,e,a):O(t,e,a)}function k(t,e,a){e=e||{};try{var i=ne[t]||(ne[t]=Qt.compile(t));return"string"==typeof e.pathMatch&&(e[0]=e.pathMatch),i(e,{pretty:!0})}catch(t){return""}finally{delete e[0]}}function B(t,e,a,i){var n="string"==typeof t?{path:t}:t;if(n._normalized)return n;if(n.name){n=r({},t);var o=n.params;return o&&"object"==typeof o&&(n.params=r({},o)),n}if(!n.path&&n.params&&e){n=r({},n),n._normalized=!0;var h=r(r({},e.params),n.params);if(e.name)n.name=e.name,n.params=h;else if(e.matched.length){var l=e.matched[e.matched.length-1].path;n.path=k(l,h,"path "+e.path)}return n}var u=T(n.path||""),c=e&&e.path||"/",d=u.path?S(u.path,c,a||n.append):c,f=s(u.query,n.query,i&&i.options.parseQuery),m=n.hash||u.hash;return m&&"#"!==m.charAt(0)&&(m="#"+m),{_normalized:!0,path:d,query:f,hash:m}}function Y(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey||t.defaultPrevented||void 0!==t.button&&0!==t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){if(/\b_blank\b/i.test(t.currentTarget.getAttribute("target")))return}return t.preventDefault&&t.preventDefault(),!0}}function H(t){if(t)for(var e,a=0;a<t.length;a++){if(e=t[a],"a"===e.tag)return e;if(e.children&&(e=H(e.children)))return e}}function V(t){if(!V.installed||re!==t){V.installed=!0,re=t;var e=function(t){return void 0!==t},a=function(t,a){var i=t.$options._parentVnode;e(i)&&e(i=i.data)&&e(i=i.registerRouteInstance)&&i(t,a)};t.mixin({beforeCreate:function(){e(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),t.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,a(this,this)},destroyed:function(){a(this)}}),Object.defineProperty(t.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(t.prototype,"$route",{get:function(){return this._routerRoot._route}}),t.component("RouterView",qt),t.component("RouterLink",le);var i=t.config.optionMergeStrategies;i.beforeRouteEnter=i.beforeRouteLeave=i.beforeRouteUpdate=i.created}}function G(t,e,a,i){var r=e||[],n=a||Object.create(null),s=i||Object.create(null);t.forEach(function(t){W(r,n,s,t)});for(var o=0,h=r.length;o<h;o++)"*"===r[o]&&(r.push(r.splice(o,1)[0]),h--,o--);return{pathList:r,pathMap:n,nameMap:s}}function W(t,e,a,i,r,n){var s=i.path,o=i.name,h=i.pathToRegexpOptions||{},l=U(s,r,h.strict);"boolean"==typeof i.caseSensitive&&(h.sensitive=i.caseSensitive);var u={path:l,regex:X(l,h),components:i.components||{default:i.component},instances:{},enteredCbs:{},name:o,parent:r,matchAs:n,redirect:i.redirect,beforeEnter:i.beforeEnter,meta:i.meta||{},props:null==i.props?{}:i.components?i.props:{default:i.props}};if(i.children&&i.children.forEach(function(i){var r=n?y(n+"/"+i.path):void 0;W(t,e,a,i,u,r)}),e[u.path]||(t.push(u.path),e[u.path]=u),void 0!==i.alias)for(var c=Array.isArray(i.alias)?i.alias:[i.alias],d=0;d<c.length;++d){var f=c[d],m={path:f,children:i.children};W(t,e,a,m,r,u.path||"/")}o&&(a[o]||(a[o]=u))}function X(t,e){var a=Qt(t,[],e);return a}function U(t,e,a){return a||(t=t.replace(/\/$/,"")),"/"===t[0]?t:null==e?t:y(e.path+"/"+t)}function K(t,e){function a(t){G(t,h,u,c)}function i(t,a,i){var r=B(t,a,!1,e),n=r.name;if(n){var o=c[n];if(!o)return s(null,r);var l=o.regex.keys.filter(function(t){return!t.optional}).map(function(t){return t.name});if("object"!=typeof r.params&&(r.params={}),a&&"object"==typeof a.params)for(var d in a.params)!(d in r.params)&&l.indexOf(d)>-1&&(r.params[d]=a.params[d]);return r.path=k(o.path,r.params,'named route "'+n+'"'),s(o,r,i)}if(r.path){r.params={};for(var f=0;f<h.length;f++){var m=h[f],C=u[m];if(j(C.regex,r.path,r.params))return s(C,r,i)}}return s(null,r)}function r(t,a){var r=t.redirect,n="function"==typeof r?r(l(t,a,null,e)):r;if("string"==typeof n&&(n={path:n}),!n||"object"!=typeof n)return s(null,a);var o=n,h=o.name,u=o.path,d=a.query,f=a.hash,m=a.params;if(d=o.hasOwnProperty("query")?o.query:d,f=o.hasOwnProperty("hash")?o.hash:f,m=o.hasOwnProperty("params")?o.params:m,h){c[h];return i({_normalized:!0,name:h,query:d,hash:f,params:m},void 0,a)}if(u){var C=z(u,t);return i({_normalized:!0,path:k(C,m,'redirect route with path "'+C+'"'),query:d,hash:f},void 0,a)}return s(null,a)}function n(t,e,a){var r=k(a,e.params,'aliased route with path "'+a+'"'),n=i({_normalized:!0,path:r});if(n){var o=n.matched,h=o[o.length-1];return e.params=n.params,s(h,e)}return s(null,e)}function s(t,a,i){return t&&t.redirect?r(t,i||a):t&&t.matchAs?n(t,a,t.matchAs):l(t,a,i,e)}var o=G(t),h=o.pathList,u=o.pathMap,c=o.nameMap;return{match:i,addRoutes:a}}function j(t,e,a){var i=e.match(t);if(!i)return!1;if(!a)return!0;for(var r=1,s=i.length;r<s;++r){var o=t.keys[r-1];o&&(a[o.name||"pathMatch"]="string"==typeof i[r]?n(i[r]):i[r])}return!0}function z(t,e){return S(t,e.parent?e.parent.path:"/",!0)}function J(){return ce.now().toFixed(3)}function q(){return de}function Z(t){return de=t}function Q(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var t=window.location.protocol+"//"+window.location.host,e=window.location.href.replace(t,""),a=r({},window.history.state);return a.key=q(),window.history.replaceState(a,"",e),window.addEventListener("popstate",et),function(){window.removeEventListener("popstate",et)}}function $(t,e,a,i){if(t.app){var r=t.options.scrollBehavior;r&&t.app.$nextTick(function(){var n=at(),s=r.call(t,e,a,i?n:null);s&&("function"==typeof s.then?s.then(function(t){ht(t,n)}).catch(function(t){}):ht(s,n))})}}function tt(){var t=q();t&&(fe[t]={x:window.pageXOffset,y:window.pageYOffset})}function et(t){tt(),t.state&&t.state.key&&Z(t.state.key)}function at(){var t=q();if(t)return fe[t]}function it(t,e){var a=document.documentElement,i=a.getBoundingClientRect(),r=t.getBoundingClientRect();return{x:r.left-i.left-e.x,y:r.top-i.top-e.y}}function rt(t){return ot(t.x)||ot(t.y)}function nt(t){return{x:ot(t.x)?t.x:window.pageXOffset,y:ot(t.y)?t.y:window.pageYOffset}}function st(t){return{x:ot(t.x)?t.x:0,y:ot(t.y)?t.y:0}}function ot(t){return"number"==typeof t}function ht(t,e){var a="object"==typeof t;if(a&&"string"==typeof t.selector){var i=me.test(t.selector)?document.getElementById(t.selector.slice(1)):document.querySelector(t.selector);if(i){var r=t.offset&&"object"==typeof t.offset?t.offset:{};r=st(r),e=it(i,r)}else rt(t)&&(e=nt(t))}else a&&rt(t)&&(e=nt(t));e&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:e.x,top:e.y,behavior:t.behavior}):window.scrollTo(e.x,e.y))}function lt(t,e){tt();var a=window.history;try{if(e){var i=r({},a.state);i.key=q(),a.replaceState(i,"",t)}else a.pushState({key:Z(J())},"",t)}catch(a){window.location[e?"replace":"assign"](t)}}function ut(t){lt(t,!0)}function ct(t,e,a){var i=function(r){r>=t.length?a():t[r]?e(t[r],function(){i(r+1)}):i(r+1)};i(0)}function dt(t,e){return pt(t,e,pe.redirected,'Redirected when going from "'+t.fullPath+'" to "'+Dt(e)+'" via a navigation guard.')}function ft(t,e){var a=pt(t,e,pe.duplicated,'Avoided redundant navigation to current location: "'+t.fullPath+'".');return a.name="NavigationDuplicated",a}function mt(t,e){return pt(t,e,pe.cancelled,'Navigation cancelled from "'+t.fullPath+'" to "'+e.fullPath+'" with a new navigation.')}function Ct(t,e){return pt(t,e,pe.aborted,'Navigation aborted from "'+t.fullPath+'" to "'+e.fullPath+'" via a navigation guard.')}function pt(t,e,a,i){var r=new Error(i);return r._isRouter=!0,r.from=t,r.to=e,r.type=a,r}function Dt(t){if("string"==typeof t)return t;if("path"in t)return t.path;var e={};return De.forEach(function(a){a in t&&(e[a]=t[a])}),JSON.stringify(e,null,2)}function vt(t){return Object.prototype.toString.call(t).indexOf("Error")>-1}function gt(t,e){return vt(t)&&t._isRouter&&(null==e||t.type===e)}function St(t){return function(e,a,i){var r=!1,n=0,s=null;Tt(t,function(t,e,a,o){if("function"==typeof t&&void 0===t.cid){r=!0,n++;var h,l=xt(function(e){It(e)&&(e=e.default),t.resolved="function"==typeof e?e:re.extend(e),a.components[o]=e,--n<=0&&i()}),u=xt(function(t){var e="Failed to resolve async component "+o+": "+t;s||(s=vt(t)?t:new Error(e),i(s))});try{h=t(l,u)}catch(t){u(t)}if(h)if("function"==typeof h.then)h.then(l,u);else{var c=h.component;c&&"function"==typeof c.then&&c.then(l,u)}}}),r||i()}}function Tt(t,e){return yt(t.map(function(t){return Object.keys(t.components).map(function(a){return e(t.components[a],t.instances[a],t,a)})}))}function yt(t){return Array.prototype.concat.apply([],t)}function It(t){return t.__esModule||ve&&"Module"===t[Symbol.toStringTag]}function xt(t){var e=!1;return function(){for(var a=[],i=arguments.length;i--;)a[i]=arguments[i];if(!e)return e=!0,t.apply(this,a)}}function Lt(t){if(!t)if(ue){var e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^https?:\/\/[^\/]+/,"")}else t="/";return"/"!==t.charAt(0)&&(t="/"+t),t.replace(/\/$/,"")}function Mt(t,e){var a,i=Math.max(t.length,e.length);for(a=0;a<i&&t[a]===e[a];a++);return{updated:e.slice(0,a),activated:e.slice(a),deactivated:t.slice(a)}}function _t(t,e,a,i){var r=Tt(t,function(t,i,r,n){var s=bt(t,e);if(s)return Array.isArray(s)?s.map(function(t){return a(t,i,r,n)}):a(s,i,r,n)});return yt(i?r.reverse():r)}function bt(t,e){return"function"!=typeof t&&(t=re.extend(t)),t.options[e]}function wt(t){return _t(t,"beforeRouteLeave",Et,!0)}function Ft(t){return _t(t,"beforeRouteUpdate",Et)}function Et(t,e){if(e)return function(){return t.apply(e,arguments)}}function At(t){return _t(t,"beforeRouteEnter",function(t,e,a,i){return Nt(t,a,i)})}function Nt(t,e,a){return function(i,r,n){return t(i,r,function(t){"function"==typeof t&&(e.enteredCbs[a]||(e.enteredCbs[a]=[]),e.enteredCbs[a].push(t)),n(t)})}}function Ot(t){var e=window.location.pathname;return t&&0===e.toLowerCase().indexOf(t.toLowerCase())&&(e=e.slice(t.length)),(e||"/")+window.location.search+window.location.hash}function Pt(t){var e=Ot(t);if(!/^\/#/.test(e))return window.location.replace(y(t+"/#"+e)),!0}function Rt(){var t=kt();return"/"===t.charAt(0)||(Ht("/"+t),!1)}function kt(){var t=window.location.href,e=t.indexOf("#");return e<0?"":t=t.slice(e+1)}function Bt(t){var e=window.location.href,a=e.indexOf("#");return(a>=0?e.slice(0,a):e)+"#"+t}function Yt(t){Ce?lt(Bt(t)):window.location.hash=t}function Ht(t){Ce?ut(Bt(t)):window.location.replace(Bt(t))}function Vt(t,e){return t.push(e),function(){var a=t.indexOf(e);a>-1&&t.splice(a,1)}}function Gt(t,e,a){var i="hash"===a?"#"+e:e;return t?y(t+"/"+i):i}var Wt=/[!'()*]/g,Xt=function(t){return"%"+t.charCodeAt(0).toString(16)},Ut=/%2C/g,Kt=function(t){return encodeURIComponent(t).replace(Wt,Xt).replace(Ut,",")},jt=function(t){return null==t||"object"==typeof t?t:String(t)},zt=/\/?$/,Jt=l(null,{path:"/"}),qt={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(t,e){var a=e.props,i=e.children,n=e.parent,s=e.data;s.routerView=!0;for(var o=n.$createElement,h=a.name,l=n.$route,u=n._routerViewCache||(n._routerViewCache={}),c=0,d=!1;n&&n._routerRoot!==n;){var f=n.$vnode?n.$vnode.data:{};f.routerView&&c++,f.keepAlive&&n._directInactive&&n._inactive&&(d=!0),n=n.$parent}if(s.routerViewDepth=c,d){var m=u[h],C=m&&m.component;return C?(m.configProps&&v(C,s,m.route,m.configProps),o(C,s,i)):o()}var p=l.matched[c],g=p&&p.components[h];if(!p||!g)return u[h]=null,o();u[h]={component:g},s.registerRouteInstance=function(t,e){var a=p.instances[h];(e&&a!==t||!e&&a===t)&&(p.instances[h]=e)},(s.hook||(s.hook={})).prepatch=function(t,e){p.instances[h]=e.componentInstance},s.hook.init=function(t){t.data.keepAlive&&t.componentInstance&&t.componentInstance!==p.instances[h]&&(p.instances[h]=t.componentInstance),D(l)};var S=p.props&&p.props[h];return S&&(r(u[h],{route:l,configProps:S}),v(g,s,l,S)),o(g,s,i)}},Zt=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},Qt=R,$t=I,te=x,ee=_,ae=P,ie=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");Qt.parse=$t,Qt.compile=te,Qt.tokensToFunction=ee,Qt.tokensToRegExp=ae;var re,ne=Object.create(null),se=[String,Object],oe=[String,Array],he=function(){},le={name:"RouterLink",props:{to:{type:se,required:!0},tag:{type:String,default:"a"},exact:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:oe,default:"click"}},render:function(t){var e=this,a=this.$router,i=this.$route,n=a.resolve(this.to,i,this.append),s=n.location,o=n.route,h=n.href,u={},c=a.options.linkActiveClass,d=a.options.linkExactActiveClass,m=null==c?"router-link-active":c,p=null==d?"router-link-exact-active":d,D=null==this.activeClass?m:this.activeClass,v=null==this.exactActiveClass?p:this.exactActiveClass,g=o.redirectedFrom?l(null,B(o.redirectedFrom),null,a):o;u[v]=f(i,g),u[D]=this.exact?u[v]:C(i,g);var S=u[v]?this.ariaCurrentValue:null,T=function(t){Y(t)&&(e.replace?a.replace(s,he):a.push(s,he))},y={click:Y};Array.isArray(this.event)?this.event.forEach(function(t){y[t]=T}):y[this.event]=T;var I={class:u},x=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:h,route:o,navigate:T,isActive:u[D],isExactActive:u[v]});if(x){if(1===x.length)return x[0];if(x.length>1||!x.length)return 0===x.length?t():t("span",{},x)}if("a"===this.tag)I.on=y,I.attrs={href:h,"aria-current":S};else{var L=H(this.$slots.default);if(L){L.isStatic=!1;var M=L.data=r({},L.data);M.on=M.on||{};for(var _ in M.on){var b=M.on[_];_ in y&&(M.on[_]=Array.isArray(b)?b:[b])}for(var w in y)w in M.on?M.on[w].push(y[w]):M.on[w]=T;var F=L.data.attrs=r({},L.data.attrs);F.href=h,F["aria-current"]=S}else I.on=y}return t(this.tag,I,this.$slots.default)}},ue="undefined"!=typeof window,ce=ue&&window.performance&&window.performance.now?window.performance:Date,de=J(),fe=Object.create(null),me=/^#\d/,Ce=ue&&function(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&(window.history&&"function"==typeof window.history.pushState)}(),pe={redirected:2,aborted:4,cancelled:8,duplicated:16},De=["params","query","hash"],ve="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,ge=function(t,e){this.router=t,this.base=Lt(e),this.current=Jt,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};ge.prototype.listen=function(t){this.cb=t},ge.prototype.onReady=function(t,e){this.ready?t():(this.readyCbs.push(t),e&&this.readyErrorCbs.push(e))},ge.prototype.onError=function(t){this.errorCbs.push(t)},ge.prototype.transitionTo=function(t,e,a){var i,r=this;try{i=this.router.match(t,this.current)}catch(t){throw this.errorCbs.forEach(function(e){e(t)}),t}var n=this.current;this.confirmTransition(i,function(){r.updateRoute(i),e&&e(i),r.ensureURL(),r.router.afterHooks.forEach(function(t){t&&t(i,n)}),r.ready||(r.ready=!0,r.readyCbs.forEach(function(t){t(i)}))},function(t){a&&a(t),t&&!r.ready&&(gt(t,pe.redirected)&&n===Jt||(r.ready=!0,r.readyErrorCbs.forEach(function(e){e(t)})))})},ge.prototype.confirmTransition=function(t,e,a){var r=this,n=this.current;this.pending=t;var s=function(t){!gt(t)&&vt(t)&&(r.errorCbs.length?r.errorCbs.forEach(function(e){e(t)}):(i(!1,"uncaught error during route navigation:"),console.error(t))),a&&a(t)},o=t.matched.length-1,h=n.matched.length-1;if(f(t,n)&&o===h&&t.matched[o]===n.matched[h])return this.ensureURL(),s(ft(n,t));var l=Mt(this.current.matched,t.matched),u=l.updated,c=l.deactivated,d=l.activated,m=[].concat(wt(c),this.router.beforeHooks,Ft(u),d.map(function(t){return t.beforeEnter}),St(d)),C=function(e,a){if(r.pending!==t)return s(mt(n,t));try{e(t,n,function(e){!1===e?(r.ensureURL(!0),s(Ct(n,t))):vt(e)?(r.ensureURL(!0),s(e)):"string"==typeof e||"object"==typeof e&&("string"==typeof e.path||"string"==typeof e.name)?(s(dt(n,t)),"object"==typeof e&&e.replace?r.replace(e):r.push(e)):a(e)})}catch(t){s(t)}};ct(m,C,function(){ct(At(d).concat(r.router.resolveHooks),C,function(){if(r.pending!==t)return s(mt(n,t));r.pending=null,e(t),r.router.app&&r.router.app.$nextTick(function(){D(t)})})})},ge.prototype.updateRoute=function(t){this.current=t,this.cb&&this.cb(t)},ge.prototype.setupListeners=function(){},ge.prototype.teardown=function(){this.listeners.forEach(function(t){t()}),this.listeners=[],this.current=Jt,this.pending=null};var Se=function(t){function e(e,a){t.call(this,e,a),this._startLocation=Ot(this.base)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var t=this;if(!(this.listeners.length>0)){var e=this.router,a=e.options.scrollBehavior,i=Ce&&a;i&&this.listeners.push(Q());var r=function(){var a=t.current,r=Ot(t.base);t.current===Jt&&r===t._startLocation||t.transitionTo(r,function(t){i&&$(e,t,a,!0)})};window.addEventListener("popstate",r),this.listeners.push(function(){window.removeEventListener("popstate",r)})}},e.prototype.go=function(t){window.history.go(t)},e.prototype.push=function(t,e,a){var i=this,r=this,n=r.current;this.transitionTo(t,function(t){lt(y(i.base+t.fullPath)),$(i.router,t,n,!1),e&&e(t)},a)},e.prototype.replace=function(t,e,a){var i=this,r=this,n=r.current;this.transitionTo(t,function(t){ut(y(i.base+t.fullPath)),$(i.router,t,n,!1),e&&e(t)},a)},e.prototype.ensureURL=function(t){if(Ot(this.base)!==this.current.fullPath){var e=y(this.base+this.current.fullPath);t?lt(e):ut(e)}},e.prototype.getCurrentLocation=function(){return Ot(this.base)},e}(ge),Te=function(t){function e(e,a,i){t.call(this,e,a),i&&Pt(this.base)||Rt()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var t=this;if(!(this.listeners.length>0)){var e=this.router,a=e.options.scrollBehavior,i=Ce&&a;i&&this.listeners.push(Q());var r=function(){var e=t.current;Rt()&&t.transitionTo(kt(),function(a){i&&$(t.router,a,e,!0),Ce||Ht(a.fullPath)})},n=Ce?"popstate":"hashchange";window.addEventListener(n,r),this.listeners.push(function(){window.removeEventListener(n,r)})}},e.prototype.push=function(t,e,a){var i=this,r=this,n=r.current;this.transitionTo(t,function(t){Yt(t.fullPath),$(i.router,t,n,!1),e&&e(t)},a)},e.prototype.replace=function(t,e,a){var i=this,r=this,n=r.current;this.transitionTo(t,function(t){Ht(t.fullPath),$(i.router,t,n,!1),e&&e(t)},a)},e.prototype.go=function(t){window.history.go(t)},e.prototype.ensureURL=function(t){var e=this.current.fullPath;kt()!==e&&(t?Yt(e):Ht(e))},e.prototype.getCurrentLocation=function(){return kt()},e}(ge),ye=function(t){function e(e,a){t.call(this,e,a),this.stack=[],this.index=-1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.push=function(t,e,a){var i=this;this.transitionTo(t,function(t){i.stack=i.stack.slice(0,i.index+1).concat(t),i.index++,e&&e(t)},a)},e.prototype.replace=function(t,e,a){var i=this;this.transitionTo(t,function(t){i.stack=i.stack.slice(0,i.index).concat(t),e&&e(t)},a)},e.prototype.go=function(t){var e=this,a=this.index+t;if(!(a<0||a>=this.stack.length)){var i=this.stack[a];this.confirmTransition(i,function(){var t=e.current;e.index=a,e.updateRoute(i),e.router.afterHooks.forEach(function(e){e&&e(i,t)})},function(t){gt(t,pe.duplicated)&&(e.index=a)})}},e.prototype.getCurrentLocation=function(){var t=this.stack[this.stack.length-1];return t?t.fullPath:"/"},e.prototype.ensureURL=function(){},e}(ge),Ie=function(t){void 0===t&&(t={}),this.app=null,this.apps=[],this.options=t,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=K(t.routes||[],this);var e=t.mode||"hash";switch(this.fallback="history"===e&&!Ce&&!1!==t.fallback,this.fallback&&(e="hash"),ue||(e="abstract"),this.mode=e,e){case"history":this.history=new Se(this,t.base);break;case"hash":this.history=new Te(this,t.base,this.fallback);break;case"abstract":this.history=new ye(this,t.base)}},xe={currentRoute:{configurable:!0}};Ie.prototype.match=function(t,e,a){return this.matcher.match(t,e,a)},xe.currentRoute.get=function(){return this.history&&this.history.current},Ie.prototype.init=function(t){var e=this;if(this.apps.push(t),t.$once("hook:destroyed",function(){var a=e.apps.indexOf(t);a>-1&&e.apps.splice(a,1),e.app===t&&(e.app=e.apps[0]||null),e.app||e.history.teardown()}),!this.app){this.app=t;var a=this.history;if(a instanceof Se||a instanceof Te){var i=function(t){var i=a.current,r=e.options.scrollBehavior;Ce&&r&&"fullPath"in t&&$(e,t,i,!1)},r=function(t){a.setupListeners(),i(t)};a.transitionTo(a.getCurrentLocation(),r,r)}a.listen(function(t){e.apps.forEach(function(e){e._route=t})})}},Ie.prototype.beforeEach=function(t){return Vt(this.beforeHooks,t)},Ie.prototype.beforeResolve=function(t){return Vt(this.resolveHooks,t)},Ie.prototype.afterEach=function(t){return Vt(this.afterHooks,t)},Ie.prototype.onReady=function(t,e){this.history.onReady(t,e)},Ie.prototype.onError=function(t){this.history.onError(t)},Ie.prototype.push=function(t,e,a){var i=this;if(!e&&!a&&"undefined"!=typeof Promise)return new Promise(function(e,a){i.history.push(t,e,a)});this.history.push(t,e,a)},Ie.prototype.replace=function(t,e,a){var i=this;if(!e&&!a&&"undefined"!=typeof Promise)return new Promise(function(e,a){i.history.replace(t,e,a)});this.history.replace(t,e,a)},Ie.prototype.go=function(t){this.history.go(t)},Ie.prototype.back=function(){this.go(-1)},Ie.prototype.forward=function(){this.go(1)},Ie.prototype.getMatchedComponents=function(t){var e=t?t.matched?t:this.resolve(t).route:this.currentRoute;return e?[].concat.apply([],e.matched.map(function(t){return Object.keys(t.components).map(function(e){return t.components[e]})})):[]},Ie.prototype.resolve=function(t,e,a){e=e||this.history.current;var i=B(t,e,a,this),r=this.match(i,e),n=r.redirectedFrom||r.fullPath;return{location:i,route:r,href:Gt(this.history.base,n,this.mode),normalizedTo:i,resolved:r}},Ie.prototype.addRoutes=function(t){this.matcher.addRoutes(t),this.history.current!==Jt&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(Ie.prototype,xe),Ie.install=V,Ie.version="3.4.9",Ie.isNavigationFailure=gt,Ie.NavigationFailureType=pe,ue&&window.Vue&&window.Vue.use(Ie),e.a=Ie},function(t,e,a){"use strict";function i(t){a(407)}var r=a(147),n=a(409),s=a(4),o=i,h=s(r.a,n.a,!1,o,null,null);e.a=h.exports},function(t,e,a){var i=a(408);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(3)("13c45d48",i,!0,{})},function(t,e,a){e=t.exports=a(2)(!1),e.push([t.i,".noData{padding-top:30px;text-align:center;color:#666}.homeWrap{font-size:14px;color:#333}.homeWrap .bottomWrap{height:30px;padding:0 15px;font-size:14px;color:red;box-sizing:border-box;border-top:1px solid #d9d9d9;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}.homeWrap .el-form-item .seeAgreementLink{color:#409eff;cursor:pointer}.homeWrap .panelWrap{padding:48px 0 24px;margin-left:119px;margin-right:119px;border-bottom:1px solid #d9d9d9}.homeWrap .panelWrap:nth-child(3){border-bottom:none}.homeWrap .panelWrap .btn{color:#eb6100;cursor:pointer}.homeWrap .panelWrap .title{font-weight:700;line-height:1;margin-bottom:22px;padding-left:4px}.homeWrap .panelWrap .title .versionType{margin-left:15px;color:red;font-size:16px}.homeWrap .panelWrap .list{line-height:40px;color:#526075;padding-left:5px}.homeWrap .panelWrap .list .item{display:-ms-flexbox;display:flex}.homeWrap .panelWrap .list .item .name{width:93px;display:inline-block}.homeWrap .panelWrap .list .item .count{width:48px;display:inline-block}.homeWrap .panelWrap .list .item .isSaveWrap{padding-left:25px}.homeWrap .panelWrap .list .item>div:first-child{padding-right:25px}.homeWrap .panelWrap .list .item .btnsWrap{padding-left:57px}.homeWrap .panelWrap .list .item .redText{padding-left:25px;padding-right:25px;color:red}.homeWrap .panelWrap .list .item .progressWrap{width:300px;display:-ms-flexbox;display:flex;height:40px;-ms-flex-align:center;align-items:center;padding-left:15px;box-sizing:border-box}.homeWrap .panelWrap .list .item .progressWrap .taskname{display:inline-block;width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin-right:10px;box-sizing:border-box}.homeWrap .panelWrap .list .item .progressWrap .el-progress{width:calc(100% - 200px)}.homeWrap .panelWrap input[type=password],.homeWrap .panelWrap input[type=text]{width:250px}.homeWrap .panelWrap .el-input.is-active .el-input__inner,.homeWrap .panelWrap .el-input__inner:focus{border-color:#f19149}.homeWrap .panelWrap .el-button--primary{background-color:#eb6100;box-shadow:-1px 6px 10px 0 rgba(235,97,0,.26);border-radius:4px;border:1px solid #de432d}.homeWrap .panelWrap .el-button--primary.is-disabled{opacity:.5}.homeWrap .registerForm .codeWrap .el-input{width:calc(100% - 102px);margin-right:9px}.homeWrap .registerForm .btn{color:#eb6100;cursor:pointer}",""])},function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"homeWrap"},[a("div",{staticClass:"panelWrap"},[a("div",{staticClass:"title"},[t._v("基本信息")]),t._v(" "),a("div",{staticClass:"list"},[a("div",{staticClass:"item"},[t._v("Hqchartpy2版本号："+t._s(t.baseInfo.version))]),t._v(" "),a("div",{staticClass:"item"},[t._v("平台版本号："+t._s(t.baseInfo.plateVersion))]),t._v(" "),a("div",{staticClass:"item"},[t._v("服务地址："+t._s(t.baseInfo.host))]),t._v(" "),a("div",{staticClass:"item"},[t._v("端口："+t._s(t.baseInfo.port))]),t._v(" "),a("div",{staticClass:"item"},[t._v("页面版本号：19250")]),t._v(" "),a("div",{staticClass:"item"},[t._v("py后台版本号："+t._s(t.baseInfo.pythonVersion))])])]),t._v(" "),a("div",{staticClass:"panelWrap"},[a("div",{staticClass:"title"},[t._v("数据状态")]),t._v(" "),a("div",{staticClass:"list"},t._l(t.dataStatusAry,function(e,i){return a("div",{key:i,staticClass:"item"},[a("div",[a("span",{staticClass:"name"},[t._v(t._s(e.name)+"：")]),a("span",{staticClass:"count"},[t._v(t._s(e.counts))]),t._v("条 加载时间："+t._s(e.loadTime||"--"))]),t._v(" "),a("div",[t._v("最后更新时间："+t._s(e.updateTime))]),t._v(" "),a("div",{staticClass:"isSaveWrap"},[t._v("缓存："+t._s(e.isCache?"是":"否"))]),t._v(" "),a("div",{staticClass:"btnsWrap"},[a("el-button",{attrs:{type:"primary",size:"small",disabled:1===e.syncStatus||1===e.loadStatus},on:{click:function(a){return t.synchronizationFun(e)}}},[t._v("同步")]),t._v(" "),a("el-button",{attrs:{type:"default",size:"small",disabled:1===e.loadStatus||1===e.syncStatus},on:{click:function(a){return t.loadingFun(e)}}},[t._v("加载")]),t._v(" "),a("el-button",{attrs:{type:"default",size:"small"},on:{click:function(a){return t.goToDetailData(e)}}},[t._v("浏览")])],1),t._v(" "),1===e.type&&1!==e.loadStatus&&1!==e.syncStatus?a("div",{staticClass:"redText"},[t._v("日线数据全部加载到内存需要2.5G以上的内存")]):t._e(),t._v(" "),1===e.syncStatus||1===e.loadStatus&&(1===e.type||2===e.type)?a("div",{staticClass:"progressWrap"},[a("span",{staticClass:"taskname"},[t._v(t._s(e.taskname))]),t._v(" "),a("el-progress",{attrs:{percentage:e.percent}})],1):t._e()])}),0)]),t._v(" "),a("div",{staticClass:"panelWrap"},[t._m(0),t._v(" "),a("el-form",{ref:"form",attrs:{model:t.form,rules:t.loginRules,"label-width":"85px",size:"small"}},[a("el-form-item",{attrs:{label:"数据账号",prop:"accout"}},[a("el-input",{attrs:{placeholder:"请输入账号",disabled:t.isLogin},model:{value:t.form.accout,callback:function(e){t.$set(t.form,"accout",e)},expression:"form.accout"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"数据密码",prop:"psw"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入密码",disabled:t.isLogin},model:{value:t.form.psw,callback:function(e){t.$set(t.form,"psw",e)},expression:"form.psw"}})],1),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-checkbox",{attrs:{disabled:t.isLogin},model:{value:t.form.isSelectedAgreement,callback:function(e){t.$set(t.form,"isSelectedAgreement",e)},expression:"form.isSelectedAgreement"}},[t._v("我已阅读并同意 "),a("span",{staticClass:"btn",on:{click:function(e){return t.seeAgreementFun("one")}}},[t._v("《隐私政策》")]),t._v("与"),a("span",{staticClass:"btn",on:{click:function(e){return t.seeAgreementFun("two")}}},[t._v("《用户服务协议》")])])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.loginBtnFun}},[t._v(t._s(t.isLogin?"退出":"登录"))]),t._v(" "),a("el-button",{attrs:{type:"default"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("注册")])],1)],1)],1),t._v(" "),a("div",{staticClass:"bottomWrap"},[t._v("\n    郑重声明：本网站所刊载的所有资料及图表仅供参考使用。投资者依据本网站提供的信息、资料及图表进行金融、证券等投资所造成的盈亏与本网站无关。\n  ")]),t._v(" "),a("el-dialog",{attrs:{title:"注册",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"registerForm",staticClass:"registerForm",attrs:{rules:t.registerRules,model:t.registerForm,"label-width":"72px",size:"small"}},[a("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[a("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:t.registerForm.phone,callback:function(e){t.$set(t.registerForm,"phone",e)},expression:"registerForm.phone"}})],1),t._v(" "),a("el-form-item",{staticClass:"codeWrap",attrs:{label:"验证码",prop:"code"}},[a("el-input",{attrs:{placeholder:"请输入验证码"},model:{value:t.registerForm.code,callback:function(e){t.$set(t.registerForm,"code",e)},expression:"registerForm.code"}}),a("el-button",{attrs:{type:"primary"},on:{click:t.getCode}},[t._v("获取验证码")])],1),t._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"psw"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:t.registerForm.psw,callback:function(e){t.$set(t.registerForm,"psw",e)},expression:"registerForm.psw"}})],1),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-checkbox",{model:{value:t.registerForm.isSelectedAgreement,callback:function(e){t.$set(t.registerForm,"isSelectedAgreement",e)},expression:"registerForm.isSelectedAgreement"}},[t._v("我已阅读并同意 "),a("span",{staticClass:"btn",on:{click:function(e){return t.seeAgreementFun("one")}}},[t._v("《隐私政策》")]),t._v("与"),a("span",{staticClass:"btn",on:{click:function(e){return t.seeAgreementFun("two")}}},[t._v("《用户服务协议》")])])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit("registerForm",t.goRegister)}}},[t._v("提交")])],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})],1)],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title"},[t._v("权限信息"),a("span",{staticClass:"versionType"},[t._v("免费版")])])}],n={render:i,staticRenderFns:r};e.a=n},function(t,e,a){"use strict";function i(t){a(411)}var r=a(148),n=a(417),s=a(4),o=i,h=s(r.a,n.a,!1,o,null,null);e.a=h.exports},function(t,e,a){var i=a(412);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(3)("1cf762c3",i,!0,{})},function(t,e,a){e=t.exports=a(2)(!1),e.push([t.i,".noData{padding-top:30px;text-align:center;color:#666}.settingWrap .panelWrap{padding:48px 0 24px;margin-left:119px;margin-right:119px;border-bottom:1px solid #d9d9d9}.settingWrap .panelWrap .title{font-weight:700;line-height:1;margin-bottom:22px;padding-left:4px}.settingWrap .panelWrap .list{line-height:40px;color:#526075;padding-left:5px}.settingWrap .panelWrap .list .item{display:-ms-flexbox;display:flex}.settingWrap .panelWrap .list .item .name{width:93px;display:inline-block}.settingWrap .panelWrap .list .item>div:first-child{padding-right:25px}.settingWrap .panelWrap .list .item .btnsWrap{padding-left:57px}.settingWrap .panelWrap .el-form-item--small .el-form-item__content{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.settingWrap .panelWrap .el-form-item{padding-left:5px}.settingWrap .panelWrap .el-input{width:316px;margin-right:17px}.settingWrap .panelWrap .el-input.is-active .el-input__inner,.settingWrap .panelWrap .el-input__inner:focus{border-color:#f19149}.settingWrap .panelWrap .el-button--primary{background-color:#eb6100;box-shadow:-1px 6px 10px 0 rgba(235,97,0,.26);border-radius:4px;border:1px solid #de432d}",""])},function(t,e,a){"use strict";function i(t){a(414)}var r=a(149),n=a(416),s=a(4),o=i,h=s(r.a,n.a,!1,o,null,null);e.a=h.exports},function(t,e,a){var i=a(415);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(3)("77da2318",i,!0,{})},function(t,e,a){e=t.exports=a(2)(!1),e.push([t.i,".filePathWrap{display:inline;height:33px}.filePathWrap label{display:inline-block;line-height:1;white-space:nowrap;background:#fff;border:1px solid #dcdfe6;color:#606266;text-align:center;box-sizing:border-box;outline:0;margin:0;transition:.1s;font-weight:500;padding:9px 15px;font-size:12px;border-radius:3px;cursor:pointer}.filePathWrap label:hover{color:#409eff;border-color:#c6e2ff;background-color:#ecf5ff}.filePathWrap label:active{color:#3a8ee6;border-color:#3a8ee6;outline:0}.filePathWrap input[type=file]{opacity:0}",""])},function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"filePathWrap"},[a("label",{attrs:{for:t.domId}},[t._v("选择")]),t._v(" "),a("input",{attrs:{type:"file",id:t.domId,name:"selectFile"}})])},r=[],n={render:i,staticRenderFns:r};e.a=n},function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"settingWrap"},[a("div",{staticClass:"panelWrap"},[a("div",{staticClass:"title"},[t._v("数据设置")]),t._v(" "),a("el-form",{ref:"form",attrs:{"label-width":"123px",size:"small","label-position":"left"}},[t._l(t.form,function(e,i){return a("el-form-item",{key:i,attrs:{label:e.name+"目录："}},[a("el-input",{model:{value:e.dataPath,callback:function(a){t.$set(e,"dataPath",a)},expression:"formItem.dataPath"}}),a("file-path",{attrs:{index:i,domId:"seletdata"+i},on:{getpath:t.getDatapath}})],1)}),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")])],1)],2)],1)])},r=[],n={render:i,staticRenderFns:r};e.a=n},function(t,e,a){"use strict";function i(t){a(419)}var r=a(150),n=a(485),s=a(4),o=i,h=s(r.a,n.a,!1,o,null,null);e.a=h.exports},function(t,e,a){var i=a(420);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(3)("34bfe2b5",i,!0,{})},function(t,e,a){e=t.exports=a(2)(!1),e.push([t.i,".noData{padding-top:30px;text-align:center;color:#666}.elTabsRun{margin-top:-30px}.kline{width:100%;position:relative}.tableWrapInDialog{height:600px}.tableWrapInDialog .paginationWrapInDialog{width:100%;height:50px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}.indexEditWrap{width:100%;height:100%;position:relative}.indexEditWrap .el-dialog__footer{padding:0}.indexEditWrap .left,.indexEditWrap .right{position:absolute;top:0;height:100%;box-sizing:border-box}.indexEditWrap .left{left:0;width:240px;border-right:1px solid #d9d9d9;overflow-y:auto;overflow-x:hidden}.indexEditWrap .left .el-menu{border-right:none;min-height:100%}.indexEditWrap .left .el-menu .el-menu-item,.indexEditWrap .left .el-menu .el-submenu__title{height:33px;line-height:33px}.indexEditWrap .right{left:240px;width:calc(100% - 240px)}.indexEditWrap .right .rightContentWrap{height:100%}.indexEditWrap .right .rightContentWrap .spaceBox{width:100%;height:7px;background-color:#f7f8f9}.indexEditWrap .right .rightContentWrap .el-tabs--card>.el-tabs__header{border-bottom:1px solid #d9d9d9;background-color:#f7f8f9}.indexEditWrap .right .rightContentWrap .el-tabs--card>.el-tabs__header .el-tabs__item{height:30px;line-height:30px}.indexEditWrap .right .rightContentWrap .el-tabs--card>.el-tabs__header .el-tabs__item.is-active{border-bottom-color:1px solid #d9d9d9;background-color:#fff}.indexEditWrap .right .rightContentWrap .commonTabContentWrap{height:calc(100% - 7px - 31px - 15px)}.indexEditWrap .right .rightContentWrap .commonTabContentWrap .editorWrap{display:-ms-flexbox;display:flex;padding:0 10px;height:342px}.indexEditWrap .right .rightContentWrap .commonTabContentWrap .editorWrap .selectInfoWrap{height:84px}.indexEditWrap .right .rightContentWrap .commonTabContentWrap .editorWrap .selectInfoWrap .oneLineWrap{width:100%;height:42px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.indexEditWrap .right .rightContentWrap .commonTabContentWrap .editorWrap .selectInfoWrap .oneLineWrap .labelSymbol,.indexEditWrap .right .rightContentWrap .commonTabContentWrap .editorWrap .selectInfoWrap .oneLineWrap .timeRange{padding-left:55px}.indexEditWrap .right .rightContentWrap .commonTabContentWrap .editorWrap .selectInfoWrap .oneLineWrap .el-input{width:100px}.indexEditWrap .right .rightContentWrap .commonTabContentWrap .editorWrap .selectInfoWrap .oneLineWrap .el-select .el-input{width:140px}.indexEditWrap .right .rightContentWrap .commonTabContentWrap .editorWrap .paramsEditWrap{width:592px;height:calc(100% - 84px);box-sizing:border-box;background-color:#f7f8f9;overflow-y:auto;border:1px solid #d9d9d9}.indexEditWrap .right .rightContentWrap .commonTabContentWrap .editorWrap .paramsEditWrap .editTable{width:100%;border-spacing:0;border:none;border-collapse:collapse}.indexEditWrap .right .rightContentWrap .commonTabContentWrap .editorWrap .paramsEditWrap .editTable .noData{text-align:center;padding-top:40px}.indexEditWrap .right .rightContentWrap .commonTabContentWrap .editorWrap .paramsEditWrap .editTable .strongFont{font-weight:700}.indexEditWrap .right .rightContentWrap .commonTabContentWrap .editorWrap .paramsEditWrap .editTable tr>td:first-child,.indexEditWrap .right .rightContentWrap .commonTabContentWrap .editorWrap .paramsEditWrap .editTable tr>td:nth-child(2),.indexEditWrap .right .rightContentWrap .commonTabContentWrap .editorWrap .paramsEditWrap .editTable tr>td:nth-child(3),.indexEditWrap .right .rightContentWrap .commonTabContentWrap .editorWrap .paramsEditWrap .editTable tr>td:nth-child(4){width:107px}.indexEditWrap .right .rightContentWrap .commonTabContentWrap .editorWrap .paramsEditWrap .editTable thead td{line-height:32px;text-align:center}.indexEditWrap .right .rightContentWrap .commonTabContentWrap .editorWrap .paramsEditWrap .editTable .box{padding:5px;height:35px;text-align:center;box-sizing:border-box}.indexEditWrap .right .rightContentWrap .commonTabContentWrap .editorWrap .paramsEditWrap .editTable .box input[type=text]{width:78px;box-sizing:border-box;height:100%;border:1px solid #d9d9d9;outline:none;text-align:center;vertical-align:top}.indexEditWrap .right .rightContentWrap .commonTabContentWrap .editorWrap .paramsEditWrap .editTable .box input[type=text]:focus{border:1px solid #2196f3}.indexEditWrap .right .rightContentWrap .commonTabContentWrap .editorWrap .paramsEditWrap .addBtn{cursor:pointer;width:26px;height:26px;line-height:26px;text-align:center;background-color:#efefef;border-radius:3px;border:1px solid #dcdcdc;margin-left:10px}.indexEditWrap .right .rightContentWrap .commonTabContentWrap .editorWrap .paramsEditWrap .addBtn .el-icon-plus{font-weight:700;color:#666;font-size:23px}.indexEditWrap .right .rightContentWrap .commonTabContentWrap .editorWrap .paramsBtnsWrap{height:42px;display:-ms-flexbox;display:flex;padding-left:22px;-ms-flex-align:center;align-items:center}.indexEditWrap .right .rightContentWrap .commonTabContentWrap .codeWrap{height:calc(100% - 342px);padding:10px;box-sizing:border-box}.indexEditWrap .right .rightContentWrap .commonTabContentWrap .codeWrap h3{height:18px;line-height:18px;padding-top:5px;padding-bottom:15px}.indexEditWrap .right .rightContentWrap .commonTabContentWrap .codeWrap .code{height:calc(100% - 18px - 20px);border:1px solid #d9d9d9;box-sizing:border-box}.indexEditWrap .right .rightContentWrap .commonTabContentWrap .codeWrap .code .CodeMirror,.indexEditWrap .right .rightContentWrap .commonTabContentWrap .codeWrap .code .vue-codemirror{height:100%}.indexEditWrap .right .rightContentWrap .commonTabContentWrap+.noData{padding-top:100px;color:#666;text-align:center}",""])},function(t,e,a){"use strict";t.exports.Chart=a(422).default,t.exports.Stock=a(465).default,t.exports.RegressionTest=a(466).default},function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(){}function s(){this.DataMap=new _r.default,this.Get=function(t){return this.DataMap.has(t)?this.DataMap.get(t):null},this.Add=function(t){this.DataMap.set(t.ID,t)}}function o(){this.DataMap=new _r.default([["MA",this.MA],["均线",this.MA],["MA4",this.MA4],["MA5",this.MA5],["MA6",this.MA6],["MA7",this.MA7],["MA8",this.MA8],["BOLL",this.BOLL],["BOLL副图",this.BOLL2],["BBI",this.BBI],["DKX",this.DKX],["MIKE",this.MIKE],["PBX",this.PBX],["ENE",this.ENE],["MACD",this.MACD],["KDJ",this.KDJ],["MACD2",this.MACD2],["VOL",this.VOL],["RSI",this.RSI],["BRAR",this.BRAR],["WR",this.WR],["BIAS",this.BIAS],["OBV",this.OBV],["DMI",this.DMI],["CR",this.CR],["PSY",this.PSY],["CCI",this.CCI],["DMA",this.DMA],["TRIX",this.TRIX],["VR",this.VR],["EMV",this.EMV],["ROC",this.ROC],["MTM",this.MTM],["FSL",this.FSL],["CYR",this.CYR],["MASS",this.MASS],["WAD",this.WAD],["CHO",this.CHO],["ADTM",this.ADTM],["HSL",this.HSL],["BIAS36",this.BIAS36],["BIAS_QL",this.BIAS_QL],["DPO",this.DPO],["OSC",this.OSC],["ATR",this.ATR],["NVI",this.NVI],["PVI",this.PVI],["UOS",this.UOS],["CYW",this.CYW],["LON",this.LON],["NDB",this.NDB],["SKDJ",this.SKDJ],["KD",this.KD],["FKX",this.FKX],["DKCOL",this.DKCOL],["UDL",this.UDL],["MFI",this.MFI],["LWR",this.LWR],["MARSI",this.MARSI],["CYD",this.CYD],["CYF",this.CYF],["TAPI",this.TAPI],["VMACD",this.VMACD],["QACD",this.QACD],["VPT",this.VPT],["WVAD",this.WVAD],["DBQR",this.DBQR],["JS",this.JS],["CYE",this.CYE],["QR",this.QR],["GDX",this.GDX],["JLHB",this.JLHB],["PCNT",this.PCNT],["BTX",this.BTX],["AMO",this.AMO],["VRSI",this.VRSI],["HSCOL",this.HSCOL],["DBQRV",this.DBQRV],["DBLB",this.DBLB],["ACD",this.ACD],["EXPMA",this.EXPMA],["EXPMA_S",this.EXPMA_S],["HMA",this.HMA],["LMA",this.LMA],["VMA",this.VMA],["AMV",this.AMV],["BBIBOLL",this.BBIBOLL],["ALLIGAT",this.ALLIGAT],["ZX",this.ZX],["XS",this.XS],["XS2",this.XS2],["SG-XDT",this.SG_XDT],["SG-SMX",this.SG_SMX],["SG-LB",this.SG_LB],["SG-PF",this.SG_PF],["RAD",this.RAD],["SHT",this.SHT],["ZLJC",this.ZLJC],["ZLMM",this.ZLMM],["SLZT",this.SLZT],["ADVOL",this.ADVOL],["CYC",this.CYC],["CYS",this.CYS],["CYQKL",this.CYQKL],["SCR",this.SCR],["ASR",this.ASR],["SAR",this.SAR],["TJCJL",this.TJCJL],["量比",this.VOLRate],["平均K线",this.HeikinAshi],["ADL",this.ADL],["SQJZ",this.SQJZ],["XT",this.XT],["CFJT",this.CFJT],["CYX",this.CYX],["WAVE",this.WAVE],["VOL-TDX",this.VOL_TDX],["EMPTY",this.EMPTY],["神奇九转",this.NineTurns],["散户线",this.ShareholderCount],["NXTS",this.NXTS],["FKX",this.FKX],["两融资金",this.Margin4],["ZSDB",this.ZSDB],["CJL2",this.CJL],["ASI",this.ASI],["DC",this.DC],["DEMA",this.DEMA],["VWAP",this.VWAP],["飞龙四式",this.Dragon4_Main],["飞龙四式-附图",this.Dragon4_Fig],["资金分析",this.FundsAnalysis],["融资占比",this.MarginProportion],["负面新闻",this.NewsNegative],["涨跌趋势",this.UpDownAnalyze],["北上资金",this.HK2SHSZ],["股东人数",this.ShareHolder],["两融余额",this.Margin2],["两融余额2",this.Margin3],["Zealink-资金吸筹",this.Zealink_Index1],["Zealink-牛熊区间",this.Zealink_Index2],["Zealink-持仓信号",this.Zealink_Index3],["Zealink-增减持",this.Zealink_Index4],["Zealink-大宗交易",this.Zealink_Index5],["Zealink-信托持股",this.Zealink_Index6],["Zealink-官网新闻",this.Zealink_Index7],["Zealink-高管要闻",this.Zealink_Index8],["Zealink-股权质押",this.Zealink_Index9],["Zealink-操盘BS点",this.Zealink_Index10],["Zealink-操盘BS点2",this.Zealink_Index11],["放心股-操盘BS点",this.FXG_BSPoint],["放心股-涨停多空线",this.FXG_INDEX],["放心股-涨停吸筹区",this.FXG_INDEX2],["放心股-量能黄金点",this.FXG_INDEX3],["五彩K线-十字星",this.COLOR_KSTAR1],["五彩K线-早晨之星",this.COLOR_KSTAR2],["五彩K线-黄昏之星",this.COLOR_KSTAR3],["五彩K线-长十字",this.COLOR_SHI1],["五彩K线-身怀六甲",this.COLOR_K220],["五彩K线-三个白武士",this.COLOR_K300],["五彩K线-三只乌鸦",this.COLOR_K310],["五彩K线-光头阳线",this.COLOR_K380],["五彩K线-光脚阴线",this.COLOR_K390],["五彩K线-垂死十字",this.COLOR_K134],["五彩K线-早晨十字星",this.COLOR_K140],["五彩K线-黄昏十字星",this.COLOR_K150],["五彩K线-射击之星",this.COLOR_K160],["五彩K线-倒转锤头",this.COLOR_K165],["五彩K线-锤头",this.COLOR_K170],["五彩K线-吊颈",this.COLOR_K180],["五彩K线-穿头破脚",this.COLOR_K190],["五彩K线-出水芙蓉",this.COLOR_CSFR],["五彩K线-乌云盖顶",this.COLOR_WYGD],["五彩K线-曙光初现",this.COLOR_SGCJ],["五彩K线-十字胎",this.COLOR_SZTAI],["五彩K线-剑",this.COLOR_SWORD],["五彩K线-平顶",this.COLOR_PINGDING],["五彩K线-平底",this.COLOR_PINGDI],["五彩K线-大阳烛",this.COLOR_DAYANZHU],["五彩K线-大阴烛",this.COLOR_DAYINGZHU],["五彩K线-好友反攻",this.COLOR_HYFG],["五彩K线-跳空缺口",this.COLOR_TKQK],["五彩K线-双飞乌鸦",this.COLOR_SFWY],["五彩K线-上升三部曲",this.COLOR_SSSBQ],["五彩K线-下跌三部曲",this.COLOR_XDSBQ],["五彩K线-长下影",this.COLOR_CHXY],["五彩K线-长上影",this.COLOR_CHSY],["五彩K线-分离",this.COLOR_FENLI],["交易系统-BIAS",this.TRADE_BIAS],["交易系统-CCI",this.TRADE_CCI],["交易系统-DMI",this.TRADE_DMI],["交易系统-KD",this.TRADE_KD],["交易系统-BOLL",this.TRADE_BOLL],["交易系统-KDJ",this.TRADE_KDJ],["交易系统-MA",this.TRADE_MA],["交易系统-MACD",this.TRADE_MACD],["交易系统-MTM",this.TRADE_MTM],["交易系统-PSY",this.TRADE_PSY],["交易系统-ROC",this.TRADE_ROC],["交易系统-RSI",this.TRADE_RSI],["交易系统-VR",this.TRADE_VR],["交易系统-DPSJ",this.TRADE_DPSJ],["TEST",this.TEST]])}function h(t,e){this.DivElement=t,this.DivToolElement=null,this.JSChartContainer,this.CanvasElement=document.createElement("canvas"),this.CanvasElement.className="jschart-drawing",this.CanvasElement.id=C(),this.CanvasElement.setAttribute("tabindex",0),this.CanvasElement.style&&(this.CanvasElement.style.outline="none"),t.hasChildNodes()&&Fr.Chart.Log("[JSChart::JSChart] divElement hasChildNodes",t.childNodes),t.appendChild(this.CanvasElement),this.OffscreenCanvasElement,1==e&&(this.OffscreenCanvasElement=document.createElement("canvas")),this.ModifyIndexDialog=new di(t),this.ChangeIndexDialog=new fi(t),this.MinuteDialog=new mi(t),this.OnSize=function(t){var e=parseInt(this.DivElement.style.height.replace("px",""));this.ToolElement&&(e-=this.ToolElement.style.height.replace("px","")),this.CanvasElement.height=e,this.CanvasElement.width=parseInt(this.DivElement.style.width.replace("px","")),this.CanvasElement.style.width=this.CanvasElement.width+"px",this.CanvasElement.style.height=this.CanvasElement.height+"px";var a=c();this.CanvasElement.height*=a,this.CanvasElement.width*=a,this.OffscreenCanvasElement&&(this.OffscreenCanvasElement.height=this.CanvasElement.height,this.OffscreenCanvasElement.width=this.CanvasElement.width),Fr.Chart.Log("[JSChart::OnSize] devicePixelRatio="+window.devicePixelRatio+", height="+this.CanvasElement.height+", width="+this.CanvasElement.width),t&&0==t.Redraw||this.JSChartContainer&&(this.JSChartContainer.OnSize&&t&&1==t.Type?this.JSChartContainer.OnSize():(this.JSChartContainer.Frame&&this.JSChartContainer.Frame.SetSizeChage(!0),this.JSChartContainer.Draw()))},this.AdjustChartBorder=function(t){var e=c();t.Frame.ChartBorder.Left*=e,t.Frame.ChartBorder.Right*=e,t.Frame.ChartBorder.Top*=e,t.Frame.ChartBorder.Bottom*=e},this.AdjustTitleHeight=function(t){for(var e=c(),a=0;a<t.Frame.SubFrame.length;++a)t.Frame.SubFrame[a].Frame.ChartBorder.TitleHeight*=e;t.ChartCorssCursor.TextHeight*=e},this.CreateKLineChartContainer=function(t){var e=null;if(e="历史K线图横屏"===t.Type?new Na(this.CanvasElement):new _a(this.CanvasElement,this.OffscreenCanvasElement),t.NetworkFilter&&(e.NetworkFilter=t.NetworkFilter),e.ModifyIndexDialog=this.ModifyIndexDialog,e.ChangeIndexDialog=this.ChangeIndexDialog,e.MinuteDialog=this.MinuteDialog,1==t.IsShowRightMenu&&(e.RightMenu=new gi(this.DivElement)),t.ScriptError&&(e.ScriptErrorCallback=t.ScriptError),e.SelectRectRightMenu=new Si(this.DivElement),1==t.EnableScrollUpDown&&(e.EnableScrollUpDown=t.EnableScrollUpDown),1==t.DisableMouse&&(e.DisableMouse=t.DisableMouse),t.TouchMoveMinAngle&&(e.TouchMoveMinAngle=t.TouchMoveMinAngle),t.EnableZoomUpDown&&(e.EnableZoomUpDown=t.EnableZoomUpDown),he.IsString(t.SplashTitle)&&(e.LoadDataSplashTitle=t.SplashTitle),he.IsBool(t.EnableZoomIndexWindow)&&(e.EnableZoomIndexWindow=t.EnableZoomIndexWindow),he.IsBool(t.IsDrawPictureXY)&&(e.IsDrawPictureXY=t.IsDrawPictureXY),t.EnableYDrag){var a=t.EnableYDrag;he.IsBool(a.Left)&&(e.EnableYDrag.Left=a.Left),he.IsBool(a.Right)&&(e.EnableYDrag.Right=a.Right)}if(t.KLine&&(t.KLine.DragMode>=0&&(e.DragMode=t.KLine.DragMode),t.KLine.Right>=0&&(e.Right=t.KLine.Right),t.KLine.Period>=0&&(e.Period=t.KLine.Period),t.KLine.MaxReqeustDataCount>0&&(e.MaxReqeustDataCount=t.KLine.MaxReqeustDataCount),t.KLine.Info&&t.KLine.Info.length>0&&e.SetKLineInfo(t.KLine.Info,!1),t.KLine.IndexTreeApiUrl&&(e.ChangeIndexDialog.IndexTreeApiUrl=t.KLine.IndexTreeApiUrl),0==t.KLine.KLineDoubleClick&&(e.MinuteDialog=this.MinuteDialog=null),null!=t.KLine.IndexTreeApiUrl&&(e.ChangeIndexDialog.IndexTreeApiUrl=t.KLine.IndexTreeApiUrl),0==t.KLine.IsShowTooltip&&(e.IsShowTooltip=!1),t.KLine.MaxRequestMinuteDayCount>0&&(e.MaxRequestMinuteDayCount=t.KLine.MaxRequestMinuteDayCount),t.KLine.DrawType&&(e.KLineDrawType=t.KLine.DrawType),t.KLine.FirstShowDate>19910101&&(e.CustomShow={Date:t.KLine.FirstShowDate,PageSize:t.KLine.PageSize}),t.KLine.RightSpaceCount>0&&(e.RightSpaceCount=t.KLine.RightSpaceCount),t.KLine.ZoomType>0&&(e.ZoomType=t.KLine.ZoomType),t.KLine.DataWidth>=1&&(e.KLineSize={DataWidth:t.KLine.DataWidth}),he.IsNumber(t.KLine.RightFormula)&&(e.RightFormula=t.KLine.RightFormula)),t.EnableFlowCapital){var a=t.EnableFlowCapital;1==a.BIT&&(e.EnableFlowCapital.BIT=a.BIT)}if(he.IsBool(t.EnableBorderDrag)&&(e.EnableBorderDrag=t.EnableBorderDrag),t.Page&&(t.Page.Day&&1==t.Page.Day.Enable&&(e.Page.Day.Enable=!0),t.Page.Minute&&1==t.Page.Minute.Enable&&(e.Page.Minute.Enable=!0)),t.DragDownload&&(t.DragDownload.Day&&1==t.DragDownload.Day.Enable&&(e.DragDownload.Day.Enable=!0),t.DragDownload.Minute&&1==t.DragDownload.Minute.Enable&&(e.DragDownload.Minute.Enable=!0)),t.Language&&("CN"===t.Language?e.LanguageID=tn.LANGUAGE_CHINESE_ID:"EN"===t.Language?e.LanguageID=tn.LANGUAGE_ENGLISH_ID:"TC"===t.Language&&(e.LanguageID=tn.LANGUAGE_TRADITIONAL_CHINESE_ID)),t.SourceDatatLimit&&e.SetSourceDatatLimit(t.SourceDatatLimit),t.DrawPicture&&t.DrawPicture.StorageKey&&e.ChartDrawStorage&&e.ChartDrawStorage.Load(t.DrawPicture.StorageKey),t.DrawTool&&t.DrawTool.StorageKey&&e.ChartDrawStorage&&e.ChartDrawStorage.Load(t.DrawTool.StorageKey),he.IsNumber(t.StepPixel)&&(e.StepPixel=t.StepPixel),t.ZoomStepPixel>0&&(e.ZoomStepPixel=t.ZoomStepPixel),1==t.IsApiPeriod&&(e.IsApiPeriod=t.IsApiPeriod),!t.Windows||t.Windows.length<=0)return null;if(e.Create(t.Windows.length,t.Listener),t.Border){var a=t.Border;he.IsNumber(t.Border.Left)?e.Frame.ChartBorder.Left=t.Border.Left:t.Border.Left=e.Frame.ChartBorder.Left,he.IsNumber(t.Border.Right)?e.Frame.ChartBorder.Right=t.Border.Right:t.Border.Right=e.Frame.ChartBorder.Right,he.IsNumber(t.Border.Top)?e.Frame.ChartBorder.Top=t.Border.Top:t.Border.Top=e.Frame.ChartBorder.Top,he.IsNumber(t.Border.Bottom)?e.Frame.ChartBorder.Bottom=t.Border.Bottom:t.Border.Bottom=e.Frame.ChartBorder.Bottom,a.AutoLeft&&(e.Frame.AutoLeftBorder=a.AutoLeft),a.AutoRight&&(e.Frame.AutoRightBorder=a.AutoRight)}if(this.AdjustChartBorder(e),t.KLine&&t.KLine.PageSize>0){var i=e.GetMaxMinPageSize();i.Max>10&&i.Max<t.KLine.PageSize?e.PageSize=i.Max:i.Min>10&&i.Min>t.KLine.PageSize?e.PageSize=i.Min:e.PageSize=t.KLine.PageSize}if(!0===t.IsCorssOnlyDrawKLine&&(e.ChartCorssCursor.IsOnlyDrawKLine=t.IsCorssOnlyDrawKLine),!0===t.CorssCursorTouchEnd&&(e.CorssCursorTouchEnd=t.CorssCursorTouchEnd),1==t.IsClickShowCorssCursor&&(e.IsClickShowCorssCursor=t.IsClickShowCorssCursor),t.CorssCursorInfo){var a=t.CorssCursorInfo;isNaN(t.CorssCursorInfo.Left)||(e.ChartCorssCursor.ShowTextMode.Left=t.CorssCursorInfo.Left),isNaN(t.CorssCursorInfo.Right)||(e.ChartCorssCursor.ShowTextMode.Right=t.CorssCursorInfo.Right),isNaN(t.CorssCursorInfo.Bottom)||(e.ChartCorssCursor.ShowTextMode.Bottom=t.CorssCursorInfo.Bottom),!1===t.CorssCursorInfo.IsShowCorss&&(e.ChartCorssCursor.IsShowCorss=t.CorssCursorInfo.IsShowCorss),1==t.CorssCursorInfo.IsShowClose&&(e.ChartCorssCursor.IsShowClose=t.CorssCursorInfo.IsShowClose),t.CorssCursorInfo.PressTime&&(e.PressTime=t.CorssCursorInfo.PressTime),he.IsNumber(t.CorssCursorInfo.HPenType)&&(e.ChartCorssCursor.HPenType=t.CorssCursorInfo.HPenType),t.CorssCursorInfo.VPenType>0&&(e.ChartCorssCursor.VPenType=t.CorssCursorInfo.VPenType),he.IsNumber(a.VLineType)&&(e.ChartCorssCursor.VLineType=a.VLineType),t.CorssCursorInfo.DateFormatType>0&&(e.ChartCorssCursor.StringFormatX.DateFormatType=t.CorssCursorInfo.DateFormatType),he.IsBool(a.IsDrawXRangeBG)&&(e.ChartCorssCursor.IsDrawXRangeBG=a.IsDrawXRangeBG),he.IsBool(t.CorssCursorInfo.IsFixXLastTime)&&(e.ChartCorssCursor.IsFixXLastTime=t.CorssCursorInfo.IsFixXLastTime),a.RightButton&&he.IsBool(a.RightButton.Enable)&&(e.ChartCorssCursor.RightButton.Enable=a.RightButton.Enable)}if(t.CorssCursor={},t.CorssCursor.TitleHeight=e.ChartCorssCursor.TextHeight,t.Frame)for(var r=0;r<t.Frame.length;++r){var a=t.Frame[r];if(e.Frame.SubFrame[r]){var n=e.Frame.SubFrame[r].Frame;a.SplitCount&&(e.Frame.SubFrame[r].Frame.YSplitOperator.SplitCount=a.SplitCount),a.StringFormat&&(e.Frame.SubFrame[r].Frame.YSplitOperator.StringFormat=a.StringFormat),he.IsNumber(a.FloatPrecision)&&(e.Frame.SubFrame[r].Frame.YSplitOperator.FloatPrecision=a.FloatPrecision),a.Custom&&(e.Frame.SubFrame[r].Frame.YSplitOperator.Custom=a.Custom),he.IsNumber(a.SplitType)&&(e.Frame.SubFrame[r].Frame.YSplitOperator.SplitType=a.SplitType),isNaN(a.Height)||(e.Frame.SubFrame[r].Height=a.Height),!1!==a.IsShowLeftText&&!0!==a.IsShowLeftText||(e.Frame.SubFrame[r].Frame.IsShowYText[0]=a.IsShowLeftText,e.Frame.SubFrame[r].Frame.YSplitOperator.IsShowLeftText=a.IsShowLeftText),!1!==a.IsShowRightText&&!0!==a.IsShowRightText||(e.Frame.SubFrame[r].Frame.IsShowYText[1]=a.IsShowRightText,e.Frame.SubFrame[r].Frame.YSplitOperator.IsShowRightText=a.IsShowRightText),a.TopSpace>=0&&(e.Frame.SubFrame[r].Frame.ChartBorder.TopSpace=a.TopSpace),a.BottomSpace>=0&&(e.Frame.SubFrame[r].Frame.ChartBorder.BottomSpace=a.BottomSpace),a.RightTextPosition>0&&(e.Frame.SubFrame[r].Frame.YTextPosition[1]=a.RightTextPosition),a.LeftTextPosition>0&&(e.Frame.SubFrame[r].Frame.YTextPosition[0]=a.LeftTextPosition),0==a.IsShowXLine&&(e.Frame.SubFrame[r].Frame.IsShowXLine=a.IsShowXLine),0==a.IsShowYLine&&(e.Frame.SubFrame[r].Frame.IsShowYLine=a.IsShowYLine),he.IsNumber(a.YTextBaseline)&&(e.Frame.SubFrame[r].Frame.YTextBaseline=a.YTextBaseline),a.YCoordinateType>0&&(e.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=a.YCoordinateType),1==a.IsYReverse&&(e.Frame.SubFrame[0].Frame.CoordinateType=1),he.IsNumber(a.PercentageTextFormat)&&(n.YSplitOperator.PercentageTextFormat=a.PercentageTextFormat),a.DefaultYMaxMin&&(e.Frame.SubFrame[r].Frame.YSplitOperator.DefaultYMaxMin=a.DefaultYMaxMin),he.IsBool(a.EnableRemoveZero)&&(e.Frame.SubFrame[r].Frame.YSplitOperator.EnableRemoveZero=a.EnableRemoveZero),he.IsPlusNumber(a.MinYDistance)&&(e.Frame.SubFrame[r].Frame.MinYDistance=a.MinYDistance),he.IsNumber(a.BorderLine)&&(e.Frame.SubFrame[r].Frame.BorderLine=a.BorderLine),he.IsBool(a.IsShowIndexTitle)&&(e.Frame.SubFrame[r].Frame.IsShowIndexTitle=a.IsShowIndexTitle),he.IsBool(a.IsDrawTitleBottomLine)&&(n.IsDrawTitleBottomLine=a.IsDrawTitleBottomLine)}}if(t.KLine&&(0==t.KLine.ShowKLine&&(e.ChartPaint[0].IsShow=!1),t.KLine.InfoPosition>0&&(e.ChartPaint[0].InfoPosition=t.KLine.InfoPosition),0==t.KLine.IsShowMaxMinPrice&&(e.ChartPaint[0].IsShowMaxMinPrice=t.KLine.IsShowMaxMinPrice)),t.KLineTitle&&(0==t.KLineTitle.IsShowName&&(e.TitlePaint[0].IsShowName=!1),0==t.KLineTitle.IsShowSettingInfo&&(e.TitlePaint[0].IsShowSettingInfo=!1),0==t.KLineTitle.IsShow&&(e.TitlePaint[0].IsShow=!1)),t.Overlay)for(var r=0;r<t.Overlay.length;++r){var a=t.Overlay[r];e.OverlaySymbol(a.Symbol,a)}if(t.ExtendChart)for(var r=0;r<t.ExtendChart.length;++r){var a=t.ExtendChart[r];e.CreateExtendChart(a.Name,a)}var s=new o;if(t.ColorIndex){var a=t.ColorIndex,h=s.Get(a.Index);h&&(h.ID=a.Index,e.ColorIndex=new zi(h.Name,h.Script,h.Args,h))}if(t.TradeIndex){var a=t.TradeIndex,l=s.Get(a.Index);l&&(l.ID=a.Index,e.TradeIndex=new zi(l.Name,l.Script,l.Args,l))}for(var r=0;r<t.Windows.length;++r){var a=t.Windows[r];if(a.Script)e.WindowIndex[r]=new zi(a.Name,a.Script,a.Args,a);else if(a.JsonData)e.WindowIndex[r]=new Qa(a.Name,a.Script,a.Args,a);else if(a.Local&&a.Local.Data)e.WindowIndex[r]=new Zi(a.Local.Name,a.Local.Args,{JsonData:a.Local.Data});else if(a.API){var u=a.API;e.WindowIndex[r]=new qi(u.Name,u.Script,u.Args,a)}else{var c=La.Get(a.Index);if(c)e.WindowIndex[r]=c.Create(),e.WindowIndex[r].SetArgs&&e.WindowIndex[r].SetArgs(a.Args),e.CreateWindowIndex(r);else{var d=s.Get(a.Index);if(!d)continue;a.Lock&&(d.Lock=a.Lock),d.ID=a.Index;var f=d.Args;a.Args&&(f=a.Args),a.IsShortTitle&&(d.IsShortTitle=a.IsShortTitle),a.TitleFont&&(d.TitleFont=a.TitleFont),e.WindowIndex[r]=new zi(d.Name,d.Script,f,d),a.StringFormat>0&&(e.WindowIndex[r].StringFormat=a.StringFormat),a.FloatPrecision>=0&&(e.WindowIndex[r].FloatPrecision=a.FloatPrecision)}}null!=a.Modify&&(e.Frame.SubFrame[r].Frame.ModifyIndex=a.Modify),null!=a.Change&&(e.Frame.SubFrame[r].Frame.ChangeIndex=a.Change),null!=a.Close&&(e.Frame.SubFrame[r].Frame.CloseIndex=a.Close),null!=a.Overlay&&(e.Frame.SubFrame[r].Frame.OverlayIndex=a.Overlay),1==a.IsDrawTitleBG&&(e.Frame.SubFrame[r].Frame.IsDrawTitleBG=a.IsDrawTitleBG),he.IsNumber(a.TitleHeight)?e.Frame.SubFrame[r].Frame.ChartBorder.TitleHeight=a.TitleHeight:a.TitleHeight=e.Frame.SubFrame[r].Frame.ChartBorder.TitleHeight,0==a.IsShowTitleArraw&&(e.Frame.SubFrame[r].Frame.IsShowTitleArraw=!1),0==a.IsShowIndexName&&(e.Frame.SubFrame[r].Frame.IsShowIndexName=!1),0==a.IsShowOverlayIndexName&&(e.Frame.SubFrame[r].Frame.IsShowOverlayIndexName=!1),he.IsNumber(a.IndexParamSpace)&&(e.Frame.SubFrame[r].Frame.IndexParamSpace=a.IndexParamSpace),he.IsNumber(a.IndexTitleSpace)&&(e.Frame.SubFrame[r].Frame.IndexTitleSpace=a.IndexTitleSpace),a.OverlayIndexType&&(he.IsNumber(a.OverlayIndexType.Position)&&(e.Frame.SubFrame[r].Frame.OverlayIndexType.Position=a.OverlayIndexType.Position),he.IsNumber(a.OverlayIndexType.LineSpace)&&(e.Frame.SubFrame[r].Frame.OverlayIndexType.LineSpace=a.OverlayIndexType.LineSpace))}if(t.OverlayIndexFrameWidth>40&&(e.OverlayIndexFrameWidth=t.OverlayIndexFrameWidth),he.IsNonEmptyArray(t.OverlayIndex))for(var r=0;r<t.OverlayIndex.length;++r){var a=t.OverlayIndex[r];if(!(a.Windows>=e.Frame.SubFrame.length)){var m=(0,Lr.default)(a),C=JSON.parse(m);a.Index&&(C.IndexName=a.Index),a.Windows>=0&&(C.WindowIndex=a.Windows),e.CreateOverlayWindowsIndex(C)}}return this.AdjustTitleHeight(e),e},this.CreateCustomKLineChartContainer=function(t){var e=new Fa(this.CanvasElement);if(e.ModifyIndexDialog=this.ModifyIndexDialog,e.ChangeIndexDialog=this.ChangeIndexDialog,e.MinuteDialog=this.MinuteDialog,1==t.IsShowRightMenu&&(e.RightMenu=new gi(this.DivElement)),t.KLine&&(t.KLine.DragMode>=0&&(e.DragMode=t.KLine.DragMode),t.KLine.Right>=0&&(e.Right=t.KLine.Right),t.KLine.Period>=0&&(e.Period=t.KLine.Period),t.KLine.MaxReqeustDataCount>0&&(e.MaxReqeustDataCount=t.KLine.MaxReqeustDataCount),t.KLine.Info&&t.KLine.Info.length>0&&e.SetKLineInfo(t.KLine.Info,!1),t.KLine.IndexTreeApiUrl&&(e.ChangeIndexDialog.IndexTreeApiUrl=t.KLine.IndexTreeApiUrl),0==t.KLine.KLineDoubleClick&&(e.MinuteDialog=this.MinuteDialog=null),null!=t.KLine.IndexTreeApiUrl&&(e.ChangeIndexDialog.IndexTreeApiUrl=t.KLine.IndexTreeApiUrl),t.KLine.PageSize>0&&(e.PageSize=t.KLine.PageSize),0==t.KLine.IsShowTooltip&&(e.IsShowTooltip=!1)),t.CustomStock&&(e.CustomStock=t.CustomStock),t.QueryDate&&(e.QueryDate=t.QueryDate),!t.Windows||t.Windows.length<=0)return null;if(e.Create(t.Windows.length),t.Border&&(isNaN(t.Border.Left)||(e.Frame.ChartBorder.Left=t.Border.Left),isNaN(t.Border.Right)||(e.Frame.ChartBorder.Right=t.Border.Right),isNaN(t.Border.Top)||(e.Frame.ChartBorder.Top=t.Border.Top)),0==t.IsShowCorssCursorInfo&&(e.ChartCorssCursor.IsShowText=t.IsShowCorssCursorInfo),t.Frame)for(var a=0;a<t.Frame.length;++a){var i=t.Frame[a];i.SplitCount&&(e.Frame.SubFrame[a].Frame.YSplitOperator.SplitCount=i.SplitCount),i.StringFormat&&(e.Frame.SubFrame[a].Frame.YSplitOperator.StringFormat=i.StringFormat)}t.KLineTitle&&(0==t.KLineTitle.IsShowName&&(e.TitlePaint[0].IsShowName=!1),0==t.KLineTitle.IsShowSettingInfo&&(e.TitlePaint[0].IsShowSettingInfo=!1));for(var r=new o,a=0;a<t.Windows.length;++a){var i=t.Windows[a];if(i.Script)e.WindowIndex[a]=new zi(i.Name,i.Script,i.Args,i);else{var n=La.Get(i.Index);if(n)e.WindowIndex[a]=n.Create(),e.CreateWindowIndex(a);else{var s=r.Get(i.Index);if(!s)continue;i.Lock&&(s.Lock=i.Lock),e.WindowIndex[a]=new zi(s.Name,s.Script,s.Args,s)}}null!=i.Modify&&(e.Frame.SubFrame[a].Frame.ModifyIndex=i.Modify),null!=i.Change&&(e.Frame.SubFrame[a].Frame.ChangeIndex=i.Change),isNaN(i.TitleHeight)||(e.Frame.SubFrame[a].Frame.ChartBorder.TitleHeight=i.TitleHeight)}return e},this.CreateMinuteChartContainer=function(t){var e=null;e="分钟走势图横屏"===t.Type?new Oa(this.CanvasElement):new ba(this.CanvasElement),t.NetworkFilter&&(e.NetworkFilter=t.NetworkFilter),e.ModifyIndexDialog=this.ModifyIndexDialog,e.ChangeIndexDialog=this.ChangeIndexDialog;var a=2;if(t.Windows&&t.Windows.length>0&&(a+=t.Windows.length),1==t.EnableScrollUpDown&&(e.EnableScrollUpDown=t.EnableScrollUpDown),1==t.DisableMouse&&(e.DisableMouse=t.DisableMouse),t.ScriptError&&(e.ScriptErrorCallback=t.ScriptError),he.IsString(t.SplashTitle)&&(e.LoadDataSplashTitle=t.SplashTitle),he.IsBool(t.EnableSelectRect)&&(e.EnableSelectRect=t.EnableSelectRect),he.IsBool(t.EnableZoomIndexWindow)&&(e.EnableZoomIndexWindow=t.EnableZoomIndexWindow),he.IsBool(t.IsDrawPictureXY)&&(e.IsDrawPictureXY=t.IsDrawPictureXY),he.IsBool(t.EnableNewIndex)&&(e.EnableNewIndex=t.EnableNewIndex),e.SelectRectDialog=new Ci(this.DivElement),t.Minute&&(0==t.Minute.IsShowTooltip&&(e.IsShowTooltip=!1),t.Minute.DragMode>=0&&(e.DragMode=t.Minute.DragMode)),t.Language&&("CN"===t.Language?e.LanguageID=tn.LANGUAGE_CHINESE_ID:"EN"===t.Language?e.LanguageID=tn.LANGUAGE_ENGLISH_ID:"TC"===t.Language&&(e.LanguageID=tn.LANGUAGE_TRADITIONAL_CHINESE_ID)),t.Info&&t.Info.length>0&&e.SetMinuteInfo(t.Info,!1),t.DrawTool&&t.DrawTool.StorageKey&&e.ChartDrawStorage&&e.ChartDrawStorage.Load(t.DrawTool.StorageKey),t.BeforeOpen){var i=t.BeforeOpen;he.IsBool(i.IsShow)&&(e.IsShowBeforeData=i.IsShow),he.IsNumber(i.Width)&&(e.ExtendWidth.Left=i.Width)}if(t.AfterClose){var i=t.AfterClose;he.IsBool(i.IsShow)&&(e.IsShowAfterData=i.IsShow),he.IsNumber(i.Width)&&(e.ExtendWidth.Right=i.Width)}if(e.Create(a,t.Listener),t.CorssCursorInfo){var i=t.CorssCursorInfo;isNaN(t.CorssCursorInfo.Left)||(e.ChartCorssCursor.ShowTextMode.Left=t.CorssCursorInfo.Left),isNaN(t.CorssCursorInfo.Right)||(e.ChartCorssCursor.ShowTextMode.Right=t.CorssCursorInfo.Right),isNaN(t.CorssCursorInfo.Bottom)||(e.ChartCorssCursor.ShowTextMode.Bottom=t.CorssCursorInfo.Bottom),!1===t.CorssCursorInfo.IsShowCorss&&(e.ChartCorssCursor.IsShowCorss=t.CorssCursorInfo.IsShowCorss),t.CorssCursorInfo.RightTextFormat>0&&(e.ChartCorssCursor.TextFormat.Right=t.CorssCursorInfo.RightTextFormat),1==t.CorssCursorInfo.IsOnlyDrawMinute&&(e.ChartCorssCursor.IsOnlyDrawMinute=t.CorssCursorInfo.IsOnlyDrawMinute),he.IsBool(t.CorssCursorInfo.IsFixXLastTime)&&(e.ChartCorssCursor.IsFixXLastTime=t.CorssCursorInfo.IsFixXLastTime),i.RightButton&&he.IsBool(i.RightButton.Enable)&&(e.ChartCorssCursor.RightButton.Enable=i.RightButton.Enable)}if(t.MinuteInfo&&e.CreateMinuteInfo(t.MinuteInfo),1==t.IsShowRightMenu&&(e.RightMenu=new Ti(this.DivElement)),t.DayCount>1&&(e.DayCount=t.DayCount),t.Border){var i=t.Border;isNaN(t.Border.Left)||(e.Frame.ChartBorder.Left=t.Border.Left),isNaN(t.Border.Right)||(e.Frame.ChartBorder.Right=t.Border.Right),isNaN(t.Border.Top)||(e.Frame.ChartBorder.Top=t.Border.Top),isNaN(t.Border.Bottom)||(e.Frame.ChartBorder.Bottom=t.Border.Bottom),i.AutoLeft&&(e.Frame.AutoLeftBorder=i.AutoLeft),i.AutoRight&&(e.Frame.AutoRightBorder=i.AutoRight)}if(t.SplashTitle&&(e.ChartSplashPaint.SplashTitle=t.SplashTitle),he.IsBool(t.EnableBorderDrag)&&(e.EnableBorderDrag=t.EnableBorderDrag),this.AdjustChartBorder(e),t.Frame){for(var r=0;r<t.Frame.length;++r){var i=t.Frame[r];e.Frame.SubFrame[r]&&(i.SplitCount&&(e.Frame.SubFrame[r].Frame.YSplitOperator.SplitCount=i.SplitCount),i.StringFormat&&(e.Frame.SubFrame[r].Frame.YSplitOperator.StringFormat=i.StringFormat),0==i.IsShowLeftText&&(e.Frame.SubFrame[r].Frame.IsShowYText[0]=i.IsShowLeftText,e.Frame.SubFrame[r].Frame.YSplitOperator.IsShowLeftText=i.IsShowLeftText),0==i.IsShowRightText&&(e.Frame.SubFrame[r].Frame.IsShowYText[1]=i.IsShowRightText,e.Frame.SubFrame[r].Frame.YSplitOperator.IsShowRightText=i.IsShowRightText),i.Height>=0&&(e.Frame.SubFrame[r].Height=i.Height),i.Custom&&(e.Frame.SubFrame[r].Frame.YSplitOperator.Custom=i.Custom),i.RightTextFormat>0&&(e.Frame.SubFrame[r].Frame.YSplitOperator.RightTextFormat=i.RightTextFormat),he.IsNumber(i.TitleHeight)&&(e.Frame.SubFrame[r].Frame.ChartBorder.TitleHeight=i.TitleHeight),he.IsNumber(i.BorderLine)&&(e.Frame.SubFrame[r].Frame.BorderLine=i.BorderLine),he.IsBool(i.EnableRemoveZero)&&(e.Frame.SubFrame[r].Frame.YSplitOperator.EnableRemoveZero=i.EnableRemoveZero),he.IsNumber(i.FloatPrecision)&&(e.Frame.SubFrame[r].Frame.YSplitOperator.FloatPrecision=i.FloatPrecision),he.IsNumber(i.YTextBaseline)&&(e.Frame.SubFrame[r].Frame.YTextBaseline=i.YTextBaseline))}e.UpdateXShowText()}if(t.ExtendChart)for(var r=0;r<t.ExtendChart.length;++r){var i=t.ExtendChart[r];e.CreateExtendChart(i.Name,i)}if(t.Overlay)for(var r=0;r<t.Overlay.length;++r){var i=t.Overlay[r];e.OverlaySymbol(i.Symbol,i)}if(t.MinuteLine){if(0==t.MinuteLine.IsDrawAreaPrice&&(e.ChartPaint[0].IsDrawArea=!1),0==t.MinuteLine.IsShowLead&&(e.IsShowLead=!1),0==t.MinuteLine.IsShowAveragePrice){e.ChartPaint[1].IsShow=!1,e.TitlePaint[0].IsShowAveragePrice=!1;for(var r=0;r<e.ExtendChartPaint.length;++r){var i=e.ExtendChartPaint[r];"MinuteTooltipPaint"==i.ClassName&&(i.IsShowAveragePrice=!1)}}t.MinuteLine.SplitType>0&&(e.Frame.SubFrame[0].Frame.YSplitOperator.SplitType=t.MinuteLine.SplitType)}if(t.MinuteTitle){var i=t.MinuteTitle;he.IsBool(i.IsShowName)&&(e.TitlePaint[0].IsShowName=i.IsShowName),he.IsBool(i.IsShowDate)&&(e.TitlePaint[0].IsShowDate=i.IsShowDate),he.IsBool(i.IsShowTime)&&(e.TitlePaint[0].IsShowTime=i.IsShowTime),he.IsBool(i.IsTitleShowLatestData)&&(e.IsTitleShowLatestData=i.IsTitleShowLatestData),he.IsBool(i.IsAlwaysShowLastData)&&(e.TitlePaint[0].IsAlwaysShowLastData=i.IsAlwaysShowLastData)}if(!0===t.CorssCursorTouchEnd&&(e.CorssCursorTouchEnd=t.CorssCursorTouchEnd),!0===t.IsShowBeforeData&&(e.IsShowBeforeData=t.IsShowBeforeData),he.IsNonEmptyArray(t.Windows))for(var n=new o,r=0;r<t.Windows.length;++r){var s=2+r,i=t.Windows[r];if(i.Script)e.WindowIndex[s]=new zi(i.Name,i.Script,i.Args,i);else if(i.API){var h=i.API;e.WindowIndex[s]=new qi(h.Name,h.Script,h.Args,i)}else{var l=La.Get(i.Index);if(l)e.WindowIndex[s]=l.Create(),e.CreateWindowIndex(s);else{var u=n.Get(i.Index);if(!u)continue;u.ID=i.Index;var c=u.Args;i.Args&&(c=i.Args),e.WindowIndex[s]=new zi(u.Name,u.Script,c,u),i.StringFormat>0&&(e.WindowIndex[s].StringFormat=i.StringFormat),i.FloatPrecision>=0&&(e.WindowIndex[s].FloatPrecision=i.FloatPrecision)}}null!=i.Modify&&(e.Frame.SubFrame[s].Frame.ModifyIndex=i.Modify),null!=i.Change&&(e.Frame.SubFrame[s].Frame.ChangeIndex=i.Change),null!=i.Close&&(e.Frame.SubFrame[s].Frame.CloseIndex=i.Close),isNaN(i.TitleHeight)||(e.Frame.SubFrame[s].Frame.ChartBorder.TitleHeight=i.TitleHeight)}if(this.AdjustTitleHeight(e),he.IsNonEmptyArray(t.OverlayIndex))for(var r=0;r<t.OverlayIndex.length;++r){var i=t.OverlayIndex[r];if(!(i.Windows>=e.Frame.SubFrame.length)){var d=(0,Lr.default)(i),f=JSON.parse(d);i.Index&&(f.IndexName=i.Index),i.Windows>=0&&(f.WindowIndex=i.Windows),e.CreateOverlayWindowsIndex(f)}}return e},this.CreateHistoryMinuteChartContainer=function(t){var e=new wa(this.CanvasElement),a=2;t.Windows&&t.Windows.length>0&&(a+=t.Windows.length),e.Create(a),0==t.IsShowCorssCursorInfo&&(e.ChartCorssCursor.IsShowText=t.IsShowCorssCursorInfo),t.Border&&(isNaN(t.Border.Left)||(e.Frame.ChartBorder.Left=t.Border.Left),isNaN(t.Border.Right)||(e.Frame.ChartBorder.Right=t.Border.Right),isNaN(t.Border.Top)||(e.Frame.ChartBorder.Top=t.Border.Top),isNaN(t.Border.Bottom)||(e.Frame.ChartBorder.Bottom=t.Border.Bottom));var i=new o;if(t.Windows)for(var r=0;r<t.Windows.length;++r){var n=t.Windows[r];if(n.Script)e.WindowIndex[2+parseInt(r)]=new zi(n.Name,n.Script,n.Args);else{var s=La.Get(n.Index);if(s)e.WindowIndex[2+parseInt(r)]=s.Create(),e.CreateWindowIndex(2+parseInt(r));else{var h=i.Get(n.Index);if(!h)continue;e.WindowIndex[2+parseInt(r)]=new zi(h.Name,h.Script,h.Args)}}isNaN(n.TitleHeight)||(e.Frame.SubFrame[2+parseInt(r)].Frame.ChartBorder.TitleHeight=n.TitleHeight)}return e.TradeDate=20181009,t.HistoryMinute.TradeDate&&(e.TradeDate=t.HistoryMinute.TradeDate),null!=t.HistoryMinute.IsShowName&&(e.TitlePaint[0].IsShowName=t.HistoryMinute.IsShowName),null!=t.HistoryMinute.IsShowDate&&(e.TitlePaint[0].IsShowDate=t.HistoryMinute.IsShowDate),e},this.CreateKLineTrainChartContainer=function(t){var e=!1;if("简单K线训练"==t.Type||"简单K线训练横屏"==t.Type){var a="简单K线训练横屏"==t.Type,i=new Aa(this.CanvasElement,a);e=!0}else var a="K线训练横屏"==t.Type,i=new Ea(this.CanvasElement,a);if(t.NetworkFilter&&(i.NetworkFilter=t.NetworkFilter),1==t.IsApiPeriod&&(i.IsApiPeriod=t.IsApiPeriod),i.ModifyIndexDialog=this.ModifyIndexDialog,i.ChangeIndexDialog=this.ChangeIndexDialog,t.ScriptError&&(i.ScriptErrorCallback=t.ScriptError),t.KLine&&(t.KLine.Right>=0&&(i.Right=t.KLine.Right),t.KLine.Period>=0&&(i.Period=t.KLine.Period),t.KLine.MaxReqeustDataCount>0&&(i.MaxReqeustDataCount=t.KLine.MaxReqeustDataCount),t.KLine.Info&&t.KLine.Info.length>0&&i.SetKLineInfo(t.KLine.Info,!1),t.KLine.PageSize>0&&(i.PageSize=t.KLine.PageSize),0==t.KLine.IsShowTooltip&&(i.IsShowTooltip=!1),t.KLine.MaxRequestMinuteDayCount>0&&(i.MaxRequestMinuteDayCount=t.KLine.MaxRequestMinuteDayCount),t.KLine.DrawType&&(i.KLineDrawType=t.KLine.DrawType),he.IsNumber(t.KLine.RightSpaceCount)&&!e&&(i.RightSpaceCount=t.KLine.RightSpaceCount)),t.Train&&(t.Train.DataCount&&(i.TrainDataCount=t.Train.DataCount),t.Train.Callback&&(i.TrainCallback=t.Train.Callback),t.Train.StartDate&&(i.TrainStartDate=t.Train.StartDate)),!t.Windows||t.Windows.length<=0)return null;if(i.Create(t.Windows.length),t.Border){var r=t.Border;isNaN(t.Border.Left)||(i.Frame.ChartBorder.Left=t.Border.Left),isNaN(t.Border.Right)||(i.Frame.ChartBorder.Right=t.Border.Right),isNaN(t.Border.Top)||(i.Frame.ChartBorder.Top=t.Border.Top),isNaN(t.Border.Bottom)||(i.Frame.ChartBorder.Bottom=t.Border.Bottom),r.AutoLeft&&(i.Frame.AutoLeftBorder=r.AutoLeft),r.AutoRight&&(i.Frame.AutoRightBorder=r.AutoRight)}if(this.AdjustChartBorder(i),0==t.IsShowCorssCursorInfo&&(i.ChartCorssCursor.IsShowText=t.IsShowCorssCursorInfo),!0===t.IsCorssOnlyDrawKLine&&(i.ChartCorssCursor.IsOnlyDrawKLine=t.IsCorssOnlyDrawKLine),!0===t.CorssCursorTouchEnd&&(i.CorssCursorTouchEnd=t.CorssCursorTouchEnd),1==t.IsClickShowCorssCursor&&(i.IsClickShowCorssCursor=t.IsClickShowCorssCursor),t.CorssCursorInfo&&(isNaN(t.CorssCursorInfo.Left)||(i.ChartCorssCursor.ShowTextMode.Left=t.CorssCursorInfo.Left),isNaN(t.CorssCursorInfo.Right)||(i.ChartCorssCursor.ShowTextMode.Right=t.CorssCursorInfo.Right),isNaN(t.CorssCursorInfo.Bottom)||(i.ChartCorssCursor.ShowTextMode.Bottom=t.CorssCursorInfo.Bottom),!1===t.CorssCursorInfo.IsShowCorss&&(i.ChartCorssCursor.IsShowCorss=t.CorssCursorInfo.IsShowCorss),1==t.CorssCursorInfo.IsShowClose&&(i.ChartCorssCursor.IsShowClose=t.CorssCursorInfo.IsShowClose),t.CorssCursorInfo.PressTime&&(i.PressTime=t.CorssCursorInfo.PressTime),t.CorssCursorInfo.HPenType>0&&(i.ChartCorssCursor.HPenType=t.CorssCursorInfo.HPenType),t.CorssCursorInfo.VPenType>0&&(i.ChartCorssCursor.VPenType=t.CorssCursorInfo.VPenType)),t.CorssCursor={},t.CorssCursor.TitleHeight=i.ChartCorssCursor.TextHeight,t.Frame)for(var n=0;n<t.Frame.length;++n){var r=t.Frame[n];i.Frame.SubFrame[n]&&(r.SplitCount&&(i.Frame.SubFrame[n].Frame.YSplitOperator.SplitCount=r.SplitCount),r.StringFormat&&(i.Frame.SubFrame[n].Frame.YSplitOperator.StringFormat=r.StringFormat),he.IsNumber(r.FloatPrecision)&&(i.Frame.SubFrame[n].Frame.YSplitOperator.FloatPrecision=r.FloatPrecision),r.Custom&&(i.Frame.SubFrame[n].Frame.YSplitOperator.Custom=r.Custom),he.IsNumber(r.SplitType)&&(i.Frame.SubFrame[n].Frame.YSplitOperator.SplitType=r.SplitType),r.Height>0&&(i.Frame.SubFrame[n].Height=r.Height),0==r.IsShowLeftText&&(i.Frame.SubFrame[n].Frame.YSplitOperator.IsShowLeftText=r.IsShowLeftText),0==r.IsShowRightText&&(i.Frame.SubFrame[n].Frame.YSplitOperator.IsShowRightText=r.IsShowRightText))}if(t.KLine&&(0==t.KLine.ShowKLine&&(i.ChartPaint[0].IsShow=!1),t.KLine.InfoPosition>0&&(i.ChartPaint[0].InfoPosition=t.KLine.InfoPosition),0==t.KLine.IsShowMaxMinPrice&&(i.ChartPaint[0].IsShowMaxMinPrice=t.KLine.IsShowMaxMinPrice)),t.KLineTitle&&(0==t.KLineTitle.IsShowName&&(i.TitlePaint[0].IsShowName=!1),0==t.KLineTitle.IsShowSettingInfo&&(i.TitlePaint[0].IsShowSettingInfo=!1),0==t.KLineTitle.IsShow&&(i.TitlePaint[0].IsShow=!1)),t.ExtendChart)for(var n=0;n<t.ExtendChart.length;++n){var r=t.ExtendChart[n];i.CreateExtendChart(r.Name,r)}if(he.IsNonEmptyArray(t.Windows))for(var s=new o,n=0;n<t.Windows.length;++n){var r=t.Windows[n];if(r.Script)i.WindowIndex[n]=new zi(r.Name,r.Script,r.Args,r);else{var h=La.Get(r.Index);if(h)i.WindowIndex[n]=h.Create(),i.CreateWindowIndex(n);else{var l=s.Get(r.Index);if(!l)continue;r.Lock&&(l.Lock=r.Lock),i.WindowIndex[n]=new zi(l.Name,l.Script,l.Args,l)}}null!=r.Modify&&(i.Frame.SubFrame[n].Frame.ModifyIndex=r.Modify),null!=r.Change&&(i.Frame.SubFrame[n].Frame.ChangeIndex=r.Change),null!=r.Close&&(i.Frame.SubFrame[n].Frame.CloseIndex=r.Close),isNaN(r.TitleHeight)||(i.Frame.SubFrame[n].Frame.ChartBorder.TitleHeight=r.TitleHeight)}return this.AdjustTitleHeight(i),i},this.CreateDepthChartContainer=function(t){var e=null;if(e=new Pa(this.CanvasElement),t.NetworkFilter&&(e.NetworkFilter=t.NetworkFilter),1==t.EnableScrollUpDown&&(e.EnableScrollUpDown=t.EnableScrollUpDown),he.IsPlusNumber(t.MaxVolRate)&&(e.MaxVolRate=t.MaxVolRate),t.ZoomStepPixel>0&&(e.ZoomStepPixel=t.ZoomStepPixel),he.IsString(t.SplashTitle)&&(e.LoadDataSplashTitle=t.SplashTitle),t.Language&&("CN"===t.Language?e.LanguageID=tn.LANGUAGE_CHINESE_ID:"EN"===t.Language?e.LanguageID=tn.LANGUAGE_ENGLISH_ID:"TC"===t.Language&&(e.LanguageID=tn.LANGUAGE_TRADITIONAL_CHINESE_ID)),e.Create(t.Listener),t.Border&&(he.IsNumber(t.Border.Left)?e.Frame.ChartBorder.Left=t.Border.Left:t.Border.Left=e.Frame.ChartBorder.Left,he.IsNumber(t.Border.Right)?e.Frame.ChartBorder.Right=t.Border.Right:t.Border.Right=e.Frame.ChartBorder.Right,he.IsNumber(t.Border.Top)?e.Frame.ChartBorder.Top=t.Border.Top:t.Border.Top=e.Frame.ChartBorder.Top,he.IsNumber(t.Border.Bottom)?e.Frame.ChartBorder.Bottom=t.Border.Bottom:t.Border.Bottom=e.Frame.ChartBorder.Bottom),this.AdjustChartBorder(e),!0===t.CorssCursorTouchEnd&&(e.CorssCursorTouchEnd=t.CorssCursorTouchEnd),t.CorssCursorInfo){var a=t.CorssCursorInfo;he.IsNumber(a.HPenType)&&(e.ChartCorssCursor.HPenType=a.HPenType),he.IsNumber(a.VPenType)&&(e.ChartCorssCursor.VPenType=a.VPenType),he.IsBool(a.IsShowTooltip)&&(e.ChartCorssCursor.IsShowTooltip=a.IsShowTooltip)}if(t.Frame){var a=t.Frame;a.SplitCount&&(e.Frame.YSplitOperator.SplitCount=a.SplitCount),he.IsNumber(a.SplitType)&&(e.Frame.YSplitOperator.SplitType=a.SplitType),he.IsNumber(a.Height)&&(e.Frame.Height=a.Height),he.IsNumber(a.YLineType)&&(e.Frame.YSplitOperator.LineType=a.YLineType),he.IsNumber(a.XLineType)&&(e.Frame.XSplitOperator.LineType=a.XLineType),Array.isArray(a.IgnoreYValue)&&(e.Frame.YSplitOperator.IgnoreYValue=a.IgnoreYValue),!1!==a.IsShowLeftText&&!0!==a.IsShowLeftText||(e.Frame.IsShowYText[0]=a.IsShowLeftText,e.Frame.YSplitOperator.IsShowLeftText=a.IsShowLeftText),!1!==a.IsShowRightText&&!0!==a.IsShowRightText||(e.Frame.IsShowYText[1]=a.IsShowRightText,e.Frame.YSplitOperator.IsShowRightText=a.IsShowRightText),0==a.IsShowXLine&&(e.Frame.IsShowXLine=a.IsShowXLine),0==a.IsShowYLine&&(e.Frame.IsShowYLine=a.IsShowYLine),he.IsNumber(a.XSplitCount)&&(e.Frame.XSplitOperator.SplitCount=a.XSplitCount)}return e},this.SetOption=function(t){var e=null;switch(t.Type){case"历史K线图":case"历史K线图横屏":e=this.CreateKLineChartContainer(t);break;case"自定义指数历史K线图":e=this.CreateCustomKLineChartContainer(t);break;case"分钟走势图":case"分钟走势图横屏":e=this.CreateMinuteChartContainer(t);break;case"历史分钟走势图":e=this.CreateHistoryMinuteChartContainer(t);break;case"K线训练":case"K线训练横屏":case"简单K线训练":case"简单K线训练横屏":e=this.CreateKLineTrainChartContainer(t);break;case"深度图":e=this.CreateDepthChartContainer(t);break;case"简单图形":return this.CreateSimpleChart(t);case"饼图":case"雷达图":return this.CreatePieChart(t);case"地图":return this.CreateMapChart(t);default:return!1}if(!e)return!1;if(t.OnCreatedCallback&&t.OnCreatedCallback(e),null!=t.IsAutoUpdate&&(e.IsAutoUpdate=t.IsAutoUpdate),t.AutoUpdateFrequency>0&&(e.AutoUpdateFrequency=t.AutoUpdateFrequency),t.EventCallback)for(var a=0;a<t.EventCallback.length;++a){var i=t.EventCallback[a];e.AddEventCallback(i)}t.Symbol?(e.Draw(),e.ChangeSymbol(t.Symbol),this.JSChartContainer=e,this.DivElement.JSChart=this,this.JSChartContainer.Draw()):(e.DrawEmpty(),this.JSChartContainer=e,this.DivElement.JSChart=this),he.IsBool(t.CheckLatestVerion)&&0==t.CheckLatestVerion||null==h.LastVersion&&e&&"function"==typeof e.GetLatestVersion&&e.GetLatestVersion()},this.CreateSimpleChart=function(t){var e=new Ra(this.CanvasElement);t.MainDataControl&&(e.MainDataControl=t.MainDataControl),e.Create(),t.Border&&(isNaN(t.Border.Left)||(e.Frame.ChartBorder.Left=t.Border.Left),isNaN(t.Border.Right)||(e.Frame.ChartBorder.Right=t.Border.Right),isNaN(t.Border.Top)||(e.Frame.ChartBorder.Top=t.Border.Top)),e.Draw(),e.RequestData(),this.JSChartContainer=e,this.DivElement.JSChart=this,this.JSChartContainer.Draw()},this.CreatePieChart=function(t){var e=new ka(this.CanvasElement);t.MainDataControl&&(e.MainDataControl=t.MainDataControl),t.Radius&&(e.Radius=t.Radius),e.Create(),t.Border&&(isNaN(t.Border.Left)||(e.Frame.ChartBorder.Left=t.Border.Left),isNaN(t.Border.Right)||(e.Frame.ChartBorder.Right=t.Border.Right),isNaN(t.Border.Top)||(e.Frame.ChartBorder.Top=t.Border.Top)),this.AdjustChartBorder(e),t.Frame&&0==t.Frame[0].IsShowBorder&&(e.Frame.IsShowBorder=t.Frame[0].IsShowBorder),e.Draw(),e.RequestData(),this.JSChartContainer=e,this.DivElement.JSChart=this,this.JSChartContainer.Draw()},this.CreateMapChart=function(t){var e=new Ba(this.CanvasElement);t.MainDataControl&&(e.MainDataControl=t.MainDataControl),e.Create(),t.Border&&(isNaN(t.Border.Left)||(e.Frame.ChartBorder.Left=t.Border.Left),isNaN(t.Border.Right)||(e.Frame.ChartBorder.Right=t.Border.Right),isNaN(t.Border.Top)||(e.Frame.ChartBorder.Top=t.Border.Top)),e.Draw(),e.RequestData(),this.JSChartContainer=e,this.DivElement.JSChart=this,this.JSChartContainer.Draw()},this.CreateToolbar=function(t){},this.CreateSettingDiv=function(t){},this.Focus=function(){this.CanvasElement&&this.CanvasElement.focus()},this.ChangeSymbol=function(t,e){this.JSChartContainer&&this.JSChartContainer.ChangeSymbol(t,e)},this.ChangeIndex=function(t,e,a){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeIndex&&this.JSChartContainer.ChangeIndex(t,e,a)},this.AddIndexWindow=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddIndexWindow&&this.JSChartContainer.AddIndexWindow(t,e)},this.AddScriptIndexWindow=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddScriptIndexWindow&&this.JSChartContainer.AddScriptIndexWindow(t,e)},this.AddAPIIndexWindow=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddAPIIndexWindow&&this.JSChartContainer.AddAPIIndexWindow(t,e)},this.RemoveIndexWindow=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.RemoveIndexWindow&&this.JSChartContainer.RemoveIndexWindow(t)},this.ChangeScriptIndex=function(t,e,a){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeScriptIndex&&this.JSChartContainer.ChangeScriptIndex(t,e,a)},this.ChangePyScriptIndex=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangePyScriptIndex&&this.JSChartContainer.ChangePyScriptIndex(t,e)},this.GetIndexInfo=function(){return this.JSChartContainer&&"function"==typeof this.JSChartContainer.GetIndexInfo?this.JSChartContainer.GetIndexInfo():[]},this.ChangeInstructionIndex=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeInstructionIndex&&this.JSChartContainer.ChangeInstructionIndex(t)},this.ChangeInstructionScriptIndex=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeInstructionIndex&&this.JSChartContainer.ChangeInstructionScriptIndex(t)},this.CancelInstructionIndex=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.CancelInstructionIndex&&this.JSChartContainer.CancelInstructionIndex()},this.ChangePeriod=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangePeriod&&this.JSChartContainer.ChangePeriod(t,e)},this.ChangeRight=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeRight&&this.JSChartContainer.ChangeRight(t)},this.OverlaySymbol=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.OverlaySymbol&&this.JSChartContainer.OverlaySymbol(t,e)},this.DeleteOverlaySymbol=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.DeleteOverlaySymbol&&this.JSChartContainer.DeleteOverlaySymbol(t)},this.SetFirstShowDate=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.SetFirstShowDate&&this.JSChartContainer.SetFirstShowDate(t)},this.ChangeKLineDrawType=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeKLineDrawType&&this.JSChartContainer.ChangeKLineDrawType(t,e)},this.ChangeIndexWindowCount=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeIndexWindowCount&&this.JSChartContainer.ChangeIndexWindowCount(t,e)},this.ClearOverlaySymbol=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ClearOverlaySymbol&&this.JSChartContainer.ClearOverlaySymbol()},this.DeleteKLineInfo=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.DeleteKLineInfo&&this.JSChartContainer.DeleteKLineInfo(t)},this.ClearKLineInfo=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ClearKLineInfo&&this.JSChartContainer.ClearKLineInfo()},this.AddKLineInfo=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddKLineInfo&&this.JSChartContainer.AddKLineInfo(t,e)},this.ChangMainDataControl=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.SetMainDataConotrl&&this.JSChartContainer.SetMainDataConotrl(t)},this.AddOverlayIndex=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddOverlayIndex&&this.JSChartContainer.AddOverlayIndex(t)},this.MoveOverlayIndex=function(t,e,a){this.JSChartContainer&&"function"==typeof this.JSChartContainer.MoveOverlayIndex&&this.JSChartContainer.MoveOverlayIndex(t,e,a)},this.MoveOverlayIndexToNewWindow=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.MoveOverlayIndexToNewWindow&&this.JSChartContainer.MoveOverlayIndexToNewWindow(t,e)},this.DeleteOverlayWindowsIndex=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.DeleteOverlayWindowsIndex&&this.JSChartContainer.DeleteOverlayWindowsIndex(t)},this.StopAutoUpdate=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.StopAutoUpdate&&this.JSChartContainer.StopAutoUpdate()},this.ChartDestory=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChartDestory&&this.JSChartContainer.ChartDestory()},this.SetDepthMapData=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.SetDepthMapData&&this.JSChartContainer.SetDepthMapData(t,e)},this.ForceLandscape=function(t){this.JSChartContainer&&(Fr.Chart.Log("[JSChart::ForceLandscape] bForceLandscape="+t),this.JSChartContainer.IsForceLandscape=t)},this.LockIndex=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.LockIndex&&(Fr.Chart.Log("[JSChart:LockIndex] lockData",t),this.JSChartContainer.LockIndex(t))},this.ChangeTradeDate=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeTradeDate&&(Fr.Chart.Log("[JSChart:ChangeTradeDate] date",t),this.JSChartContainer.ChangeTradeDate(t))},this.ChangeDayCount=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeDayCount&&(Fr.Chart.Log("[JSChart:ChangeDayCount] count",t),this.JSChartContainer.ChangeDayCount(t))},this.ShowCallAuctionData=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ShowCallAuctionData&&(Fr.Chart.Log("[JSChart:ShowCallAuctionData] obj, option ",t,e),this.JSChartContainer.ShowCallAuctionData(t,e))},this.StartAnimation=function(t){if(this.JSChartContainer&&"function"==typeof this.JSChartContainer.StartAnimation)return Fr.Chart.Log("[JSChart:StartAnimation] start."),this.JSChartContainer.StartAnimation(t)},this.StopAnimation=function(){if(this.JSChartContainer&&"function"==typeof this.JSChartContainer.StopAnimation)return Fr.Chart.Log("[JSChart:StopAnimation] start."),this.JSChartContainer.StopAnimation()},this.SaveToImage=function(t,e){if(this.JSChartContainer&&"function"==typeof this.JSChartContainer.SaveToImage)return this.JSChartContainer.SaveToImage(t,e)},this.SaveToImageUrl=function(t,e){if(this.JSChartContainer&&"function"==typeof this.JSChartContainer.SaveToImageUrl)return this.JSChartContainer.SaveToImageUrl(t,e)},this.AddEventCallback=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddEventCallback&&(Fr.Chart.Log("[JSChart:AddEventCallback] ",t),this.JSChartContainer.AddEventCallback(t))},this.SetLanguage=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.SetLanguage&&(Fr.Chart.Log("[JSChart:SetLanguage] ",t),this.JSChartContainer.SetLanguage(t))},this.ChangeIndexTemplate=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeIndexTemplate&&(Fr.Chart.Log("[JSChart:ChangeIndexTemplate] ",t),this.JSChartContainer.ChangeIndexTemplate(t))},this.SetChartDrawOption=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.SetChartDrawOption&&(Fr.Chart.Log("[JSChart:SetChartDrawOption] ",t),this.JSChartContainer.SetChartDrawOption(t))},this.CreateChartDrawPicture=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.CreateChartDrawPicture&&(Fr.Chart.Log("[JSChart:CreateChartDrawPicture] ",t),this.JSChartContainer.CreateChartDrawPicture(t,e))},this.AddChartDrawPicture=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddChartDrawPicture&&(Fr.Chart.Log("[JSChart:AddChartDrawPicture] ",t),this.JSChartContainer.AddChartDrawPicture(t))},this.ClearChartDrawPicture=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ClearChartDrawPicture&&this.JSChartContainer.ClearChartDrawPicture(t)},this.ReloadResource=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ReloadResource&&(Fr.Chart.Log("[JSChart:ReloadResource] "),this.JSChartContainer.ReloadResource(t))},this.EnableSplashScreen=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.EnableSplashScreen&&(Fr.Chart.Log("[JSChart:EnableSplashScreen] "),this.JSChartContainer.EnableSplashScreen(t))}}function l(){this.Start=[],this.Clear=function(){this.Start=[]},this.AddTouchStart=function(t,e,a){if(this.Start.length>0){var i=this.Start[this.Start.length-1],r=a-i.Time;r>0&&r<300?this.Start.push({X:t,Y:e,Time:a}):this.Start=[]}else this.Start.push({X:t,Y:e,Time:a})},this.IsVaildDBClick=function(){return 2==this.Start.length},this.AddTouchEnd=function(t){if(!(this.Start.length<=0)){var e=this.Start[this.Start.length-1],a=t-e.Time;a>=0&&a<150||(this.Start=[])}}}function u(t,e){var a=this;this.ClassName="JSChartContainer";this.Frame,this.ChartPaint=new Array,this.ChartPaintEx=[],this.ChartInfo=new Array,this.ChartInfoPaint,this.ExtendChartPaint=new Array,this.TitlePaint=new Array,this.OverlayChartPaint=new Array,this.ChartDrawPicture=new Array,this.ChartDrawStorage,this.ChartDrawOption={IsLockScreen:!1,Zoom:5},this.CurrentChartDrawPicture=null,this.SelectChartDrawPicture=null,this.MoveOnChartDrawPicture=null,this.IsDrawPictureXY=!1,this.EnableShowCorssCursor={DrawPicture:!0},this.ChartPictureMenu,this.ChartCorssCursor,this.IsClickShowCorssCursor=!1,this.ChartSplashPaint=null,this.LoadDataSplashTitle="数据加载中",e?(this.Canvas=e.getContext("2d"),this.OffscreenCanvasElement=e,this.ShowCanvas=t.getContext("2d")):(this.Canvas=t.getContext("2d"),this.ShowCanvas=null),this.UIElement=t,this.MouseDrag,this.PhoneTouchInfo,this.DragMode=1,this.EnableBorderDrag=!0,this.BorderDrag,this.YDrag,this.TouchStatus={CorssCursorShow:!1},this.DragTimer,this.EnableScrollUpDown=!1,this.ClickChartTimer=null,this.CursorIndex=0,this.LastPoint=new S,this.IsForceLandscape=!1,this.CorssCursorTouchEnd=!1,this.IsTitleShowLatestData=!1,this.StepPixel=4,this.ZoomStepPixel=5,this.TouchMoveMinAngle=70,this.EnableAnimation=!1,this.Tooltip=document.createElement("div"),this.Tooltip.className="jschart-tooltip",this.Tooltip.style.background=$r.TooltipBGColor,this.Tooltip.style.opacity=$r.TooltipAlpha,this.Tooltip.style["pointer-events"]="none",this.Tooltip.id=C(),t.parentNode.appendChild(this.Tooltip),this.IsShowTooltip=!0,this.SelectRect=document.createElement("div"),this.SelectRect.className="jschart-selectrect",this.SelectRect.style.background=$r.SelectRectBGColor,this.SelectRect.style["pointer-events"]="none",this.SelectRect.id=C(),this.SelectRect.oncontextmenu=function(){return!1},t.parentNode.appendChild(this.SelectRect),this.SelectRectRightMenu,this.FrameSplitData=new _r.default,this.FrameSplitData.set("double",new Ta),this.FrameSplitData.set("price",new ya),this.mapEvent=new _r.default,this.IsOnTouch=!1,this.TouchDrawCount=0,this.DisableMouse=!1,this.LanguageID=tn.LANGUAGE_CHINESE_ID,this.PressTime=500,this.NetworkFilter,this.LastMouseStatus={},this.ClickDownPoint,this.IsDestroy=!1,this.EnableYDrag={Left:!1,Right:!1},this.EnableZoomIndexWindow=!1,this.PhoneDBClick=new l,this.ChartDestory=function(){this.IsDestroy=!0,this.StopAutoUpdate(),null!=this.GetLatestVersionTimer&&(clearTimeout(this.GetLatestVersionTimer),this.GetLatestVersionTimer=null)},this.GetLatestVersionTimer=null,this.GetLatestVersion=function(){var t=this;null!=this.GetLatestVersionTimer&&(clearTimeout(this.GetLatestVersionTimer),this.GetLatestVersionTimer=null);var e=Math.floor(50*Math.random()),a=18e4+1e3*e;Fr.Chart.Log("[JSChartContainer::GetLatestVersion] wait for get hqchart latest version. ",a),this.GetLatestVersionTimer=setTimeout(function(){var e=0,a=0;t.Frame&&t.Frame.ChartBorder&&(e=t.Frame.ChartBorder.GetChartWidth(),a=t.Frame.ChartBorder.GetChartHeight());var i=atob("aHR0cHM6Ly9ocWNoYXJ0LnplYWxpbmsuY29tL2FwaS9HZXRWZXJzaW9u")+"?width="+e+"&height="+a+"&type=h5";null==h.LastVersion&&n.HttpRequest({url:i,type:"get",dataType:"json",async:!0,success:function(t){Fr.Chart.Log("[JSChartContainer::GetLatestVersion] hqchart latest version. ",t),h.LastVersion=t},error:function(t,e,a){Fr.Chart.Log("[JSChartContainer::GetLatestVersion] Get HQChart latest version failed.",t)}})},a)},this.AddEventCallback=function(t){if(t&&t.event&&t.callback){var e={Callback:t.callback,Source:t};this.mapEvent.set(t.event,e)}},this.RemoveEventCallback=function(t){this.mapEvent.has(t)&&this.mapEvent.delete(t)},this.GetEventCallback=function(t){return this.mapEvent.has(t)?this.mapEvent.get(t):null},this.GetIndexEvent=function(){return this.GetEventCallback(Nr.RECV_INDEX_DATA)},this.GetOverlayIndexEvent=function(){return this.GetEventCallback(Nr.RECV_OVERLAY_INDEX_DATA)},t.onmousemove=function(t){a.UIOnMouseMove(t)},t.oncontextmenu=function(t){return a.UIOnContextMenu(t)},t.ondblclick=function(t){a.UIOnDblClick(t)},t.onmousedown=function(t){a.UIOnMouseDown(t)},t.onmouseout=function(t){a.UIOnMounseOut(t)},t.onmouseleave=function(t){a.UIOnMouseleave(t)},this.UIOnMouseMove=function(t){var e=c(),a=(t.clientX-this.UIElement.getBoundingClientRect().left)*e,i=(t.clientY-this.UIElement.getBoundingClientRect().top)*e;if(this.MoveOnChartDrawPicture=null,!(this.ChartSplashPaint&&1==this.ChartSplashPaint.IsEnableSplash||1==this.DisableMouse||this.BorderDrag||this.YDrag)){var r={X:a,Y:i,IsInClient:this.IsMouseOnClient(a,i)};this.LastMouseStatus.OnMouseMove=r,this.OnMouseMove(a,i,t)}},this.IsMouseOnClient=function(t,e){return this.Canvas.beginPath(),this.Canvas.rect(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetTop(),this.Frame.ChartBorder.GetWidth(),this.Frame.ChartBorder.GetHeight()),this.Canvas.isPointInPath(t,e)},this.UIOnContextMenu=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var e=t.clientX-this.UIElement.getBoundingClientRect().left,a=t.clientY-this.UIElement.getBoundingClientRect().top;return"function"==typeof this.OnRightMenu&&this.OnRightMenu(e,a,t),!1}},this.UIOnDblClick=function(t){var e=c(),a=(t.clientX-this.UIElement.getBoundingClientRect().left)*e,i=(t.clientY-this.UIElement.getBoundingClientRect().top)*e;this.OnDoubleClick(a,i,t)},this.TryYDrag=function(t,e){if(!this.EnableYDrag)return null;if(!this.EnableYDrag.Left&&!this.EnableYDrag.Right)return null;if(!this.Frame||!this.Frame.PtInFrameY)return null;var a=this.Frame.PtInFrameY(t,e);return!a||a.Index<0?null:a.Left&&this.EnableYDrag.Left&&this.Frame.IsEnableDragY(a.Index)?a:a.Right&&this.EnableYDrag.Right&&this.Frame.IsEnableDragY(a.Index)?a:null},this.TryUpDownDrag=function(t,e){var a=this.Frame.PtInFrame(t,e);if(a<0)return null;var i=this.Frame.SubFrame[a];if(!i||!i.Frame)return null;var r=i.Frame;return r.YSplitOperator&&r.YSplitOperator.FixedYMaxMin?{Index:a,X:t,Y:e}:null},this.TryRectSelectDrag=function(t,e){var a=this.GetRectSelectPaint();return a?a.GetPointCount()<=0?null:{Item:a.PtInPaint(t,e),X:t,Y:e}:null},this.TryClickCrossCursor=function(t,e,a){if(this.ChartCorssCursor){var i=this.ChartCorssCursor.PtInButton(t,e);if(!i)return!1;var r=this.GetEventCallback(Nr.ON_CLICK_CROSSCURSOR_RIGHT);if(r&&r.Callback){var n={Button:i,e:a};r.Callback(r,n,this)}return!0}},this.UIOnMouseDown=function(t){var e=this;if(this.MoveOnChartDrawPicture=null,!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){this.ClickDownPoint={X:t.clientX,Y:t.clientY},this.IsOnTouch=!0,this.BorderDrag=null,this.YDrag=null,this.UpDownDrag=null,this.RectSelectDrag=null;var a=c(),i=(t.clientX-this.UIElement.getBoundingClientRect().left)*a,r=(t.clientY-this.UIElement.getBoundingClientRect().top)*a,n=this.Frame.PtInButtons(i,r);if(n&&this.ClickFrameButton)return void this.ClickFrameButton(n);if(!(this.TryClickCrossCursor(i,r,t)||this.TryClickLock&&this.TryClickLock(i,r))){this.HideSelectRect(),this.SelectRectRightMenu&&this.SelectRectRightMenu.Hide(),this.ChartPictureMenu&&this.ChartPictureMenu.Hide();var s=this.GetRectSelectPaint();if(s&&s.GetPointCount()>0){var o=s.PtInPaint(i,r);o&&(this.UIElement.style.cursor="ew-resize",this.RectSelectDrag={Index:o.PointIndex},Fr.Chart.Log("[JSChartContainer::UIOnMouseDown] drag rect select ",o))}if(!this.RectSelectDrag&&this.ClearRectSelect(!1)&&this.Draw(),this.EnableBorderDrag&&this.Frame){var h=this.Frame.PtInFrameBorder(i,r);h&&h.Index>=0&&(this.UIElement.style.cursor="n-resize",this.BorderDrag={Index:h.Index},Fr.Chart.Log("[JSChartContainer::UIOnMouseDown] DragBorder ",h))}if(!this.BorderDrag){var l=this.TryYDrag(i,r);if(l)this.UIElement.style.cursor=0==l.Position?"n-resize":"row-resize",this.YDrag=l,Fr.Chart.Log("[JSChartContainer::UIOnMouseDown] dragY ",l);else{var u=this.TryUpDownDrag(i,r);u&&(this.UIElement.style.cursor="pointer",this.UpDownDrag=u,Fr.Chart.Log("[JSChartContainer::UIOnMouseDown] dragUpDown ",u))}}if(0!=this.DragMode){var d={Click:{},LastMove:{}};d.Click.X=t.clientX,d.Click.Y=t.clientY,d.Click.IsInFrameBottom=this.Frame.PtInFrameBottom(i,r),d.LastMove.X=t.clientX,d.LastMove.Y=t.clientY,this.MouseDrag=d;var f=this.GetActiveDrawPicture();if(this.SelectChartDrawPicture=null,this.BorderDrag);else if(this.YDrag||this.UpDownDrag||this.RectSelectDrag);else if(this.CurrentChartDrawPicture){var m=this.CurrentChartDrawPicture;2==m.Status?this.SetChartDrawPictureThirdPoint(d.Click.X,d.Click.Y):(this.SetChartDrawPictureFirstPoint(d.Click.X,d.Click.Y),this.FinishChartDrawPicturePoint()&&this.DrawDynamicInfo())}else{var C={};if(C.X=(t.clientX-this.UIElement.getBoundingClientRect().left)*a,C.Y=(t.clientY-this.UIElement.getBoundingClientRect().top)*a,this.GetChartDrawPictureByPoint(C)){1==C.ChartDrawPicture.EnableMove?(C.ChartDrawPicture.Status=20,C.ChartDrawPicture.ValueToPoint(),C.ChartDrawPicture.MovePointIndex=C.PointIndex,this.CurrentChartDrawPicture=C.ChartDrawPicture,this.SelectChartDrawPicture=C.ChartDrawPicture):(this.CurrentChartDrawPicture=null,this.SelectChartDrawPicture=null);var p=this.GetEventCallback(Nr.ON_CLICK_DRAWPICTURE);if(p&&p.Callback){var D={DrawPicture:C.ChartDrawPicture};p.Callback(p,D,this)}else this.OnSelectChartPicture(C.ChartDrawPicture)}else{null!=this.ClickChartTimer&&(clearTimeout(this.ClickChartTimer),this.ClickChartTimer=null);var v=this,g={X:this.ClickDownPoint.X,Y:this.ClickDownPoint.Y};this.ClickChartTimer=setTimeout(function(){v.TryClickPaintEvent(Nr.ON_CLICK_CHART_PAINT,g,t)},250),null!=f.Select.Guid&&null==this.SelectChartDrawPicture&&this.DrawDynamicInfo()}}document.onmousemove=function(t){e.DocOnMouseMove(t)},document.onmouseup=function(t){e.DocOnMouseUp(t)}}}}},this.DocOnMouseMove=function(e){if(!this.ChartSplashPaint||1!=this.IsEnableSplash){var a=this.MouseDrag;if(a){var i=Math.abs(a.LastMove.X-e.clientX),r=Math.abs(a.LastMove.Y-e.clientY),n=this.RectSelectDrag&&this.RectSelectDrag.Index>=0;if(this.BorderDrag&&this.BorderDrag.Index>=0){if(Math.abs(a.LastMove.Y-e.clientY)<5)return;var s=e.clientY-a.LastMove.Y;this.OnMoveFromeBorder(this.BorderDrag.Index,s),a.LastMove.X=e.clientX,a.LastMove.Y=e.clientY}else if(this.YDrag&&this.YDrag.Index>=0){if(r<5)return;var s=e.clientY-a.LastMove.Y;Fr.Chart.Log("[JSChartContainer::DocOnMouseMove] YDrag ",this.YDrag,s),this.OnZoomUpDownFrameY(this.YDrag,s),a.LastMove.X=e.clientX,a.LastMove.Y=e.clientY}else if(this.CurrentChartDrawPicture){var o=this.CurrentChartDrawPicture;if(1==o.Status||2==o.Status){if(Math.abs(a.LastMove.X-e.clientX)<5&&Math.abs(a.LastMove.Y-e.clientY)<5)return;this.SetChartDrawPictureSecondPoint(e.clientX,e.clientY)&&this.DrawDynamicInfo()}else if(3==o.Status)this.SetChartDrawPictureThirdPoint(e.clientX,e.clientY)&&this.DrawDynamicInfo();else if(20==o.Status){if(Math.abs(a.LastMove.X-e.clientX)<5&&Math.abs(a.LastMove.Y-e.clientY)<5)return;this.MoveChartDrawPicture(e.clientX-a.LastMove.X,e.clientY-a.LastMove.Y)&&this.DrawDynamicInfo()}a.LastMove.X=e.clientX,a.LastMove.Y=e.clientY}else if(1==this.DragMode||n)this.OnDragMode_One({X:i,Y:r},e);else if(2==this.DragMode){var h=Math.abs(a.LastMove.Y-e.clientY);if(i<5&&h<5)return;this.UIElement.style.cursor="default";var l=a.Click.X-t.getBoundingClientRect().left,u=a.Click.Y-t.getBoundingClientRect().top,c=e.clientX-t.getBoundingClientRect().left,d=e.clientY-t.getBoundingClientRect().top;this.ShowSelectRect(l,u,c,d),a.LastMove.X=e.clientX,a.LastMove.Y=e.clientY}}}},this.OnDragMode_One=function(t,e){var a=t.X,i=t.Y,r=this.MouseDrag;if(!(a<5&&i<5)){var n=!1,s=!1;if(i>=5&&this.UpDownDrag&&this.UpDownDrag.Index>=0){var o=e.clientY-r.LastMove.Y;Fr.Chart.Log("[JSChartContainer::OnDragMode_One] UpDownDrag ",this.UpDownDrag,o),this.UIElement.style.cursor="pointer",this.OnUpDonwFrameY(this.UpDownDrag,o)&&(n=!0,s=!0),r.LastMove.Y=e.clientY}if(a>=5){var h=!0;if(r.LastMove.X<e.clientX&&(h=!1),this.RectSelectDrag&&this.RectSelectDrag.Index>=0){var l={X:e.clientX,Y:e.clientY,PointIndex:this.RectSelectDrag.Index,Name:"MoveRectSelectLine"};this.MoveRectSelectPoint(l)&&(n=!0)}else{var u="pointer";r.Click.IsInFrameBottom&&(u="ew-resize");if(a<this.GetMoveOneStepWidth())return this.UIElement.style.cursor=u,void(n&&this.Draw());r.Click&&r.Click.IsInFrameBottom?this.XCoordinateZoom(a,h)&&(this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.ResetFrameXYSplit(),n=!0):this.DataMove(a,h)?(this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.ResetFrameXYSplit(),n=!0):s||this.DragDownloadData&&this.DragDownloadData(),this.UIElement.style.cursor=u}r.LastMove.X=e.clientX}n&&(this.Draw(),this.OnKLinePageChange("datamove"))}},this.DocOnMouseUp=function(e){document.onmousemove=null,document.onmouseup=null;var a="MinuteChartContainer"==this.ClassName||"MinuteChartHScreenContainer"==this.ClassName,i=this.RectSelectDrag&&this.RectSelectDrag.Index>=0,r=!0;if(this.CurrentChartDrawPicture){var n=this.CurrentChartDrawPicture;2==n.Status||1==n.Status||3==n.Status?(n.PointStatus=n.Status,this.FinishChartDrawPicturePoint()?this.DrawDynamicInfo():r=!1):20==n.Status&&this.FinishMoveChartDrawPicture()&&this.DrawDynamicInfo()}else if(i)this.OnDragSelectRectMouseUp&&this.OnDragSelectRectMouseUp(e);else if(a)this.OnMinuteSelectRectMouseUp&&this.OnMinuteSelectRectMouseUp(e);else if(2==this.DragMode){var s=this.MouseDrag;s.LastMove.X=e.clientX,s.LastMove.Y=e.clientY;var o=new T,h=c();if(o.XStart=(s.Click.X-t.getBoundingClientRect().left)*h,o.YStart=(s.Click.Y-t.getBoundingClientRect().top)*h,o.XEnd=(s.LastMove.X-t.getBoundingClientRect().left)*h,o.YEnd=(s.LastMove.Y-t.getBoundingClientRect().top)*h,o.JSChartContainer=this,o.Stock={Symbol:this.Symbol,Name:this.Name},!this.BorderDrag&&this.GetSelectRectData(o)){var l=this.GetEventCallback(Nr.ON_SELECT_RECT),u=this.GetRectSelectPaint();if(l&&l.Callback){var d={X:s.LastMove.X-t.getBoundingClientRect().left,Y:s.LastMove.Y-t.getBoundingClientRect().top,SelectData:o,RectSelectPaint:u};l.Callback(l,d,this)}a?(this.HideSelectRect(),this.UpdateSelectRect(o.Start,o.End)):this.SelectRectRightMenu&&(e.data={Chart:this,X:s.LastMove.X-t.getBoundingClientRect().left,Y:s.LastMove.Y-t.getBoundingClientRect().top,SelectData:o,RectSelectPaint:u},this.SelectRectRightMenu.DoModal(e))}else this.TryClickPaintEvent(Nr.ON_CLICKUP_CHART_PAINT,this.ClickDownPoint,e)}else this.TryClickPaintEvent(Nr.ON_CLICKUP_CHART_PAINT,this.ClickDownPoint,e),this.ClickEvent(e);Fr.Chart.Log("[KLineChartContainer::document.onmouseup]",e),this.UIElement.style.cursor="default",this.MouseDrag=null,this.ClickDownPoint=null,this.IsOnTouch=!1,this.BorderDrag&&this.BorderDrag.Index>=0&&this.Frame.SaveSubFrameHeightRate(),this.BorderDrag=null,this.YDrag=null,this.UpDownDrag=null,this.RectSelectDrag=null,!0===r&&(this.CurrentChartDrawPicture=null)},this.UIOnMounseOut=function(t){Fr.Chart.Log("[KLineChartContainer::UIOnMounseOut]",t),this.UIOnMouseMove(t)},this.UIOnMouseleave=function(t){Fr.Chart.Log("[KLineChartContainer::UIOnMouseleave]",t)},this.ClickEvent=function(e){var a=this.GetEventCallback(Nr.ON_CLICK);if(!a||!a.Callback)return!1;if(this.ClickDownPoint.X!=e.clientX||this.ClickDownPoint.Y!=e.clientY)return!1;var i=c(),r=(e.clientX-t.getBoundingClientRect().left)*i,n=(e.clientY-t.getBoundingClientRect().top)*i,s={X:e.clientX,Y:e.clientY,FrameID:-1};if(this.Canvas.beginPath(),this.Canvas.rect(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetTop(),this.Frame.ChartBorder.GetWidth(),this.Frame.ChartBorder.GetHeight()),this.Canvas.isPointInPath(r,n)){var o={},h=this.Frame.GetYData(n,o);if(he.IsNumber(o.FrameID)&&o.FrameID>=0){var l=this.Frame.GetXData(r);s.FrameID=o.FrameID,s.Data={X:l,Y:h}}}return a.Callback(a,s,this),!0},this.PtInChartPaintTooltip=function(t,e,a){for(var i=0;i<this.ChartPaint.length;++i){var r=this.ChartPaint[i];if(r.GetTooltipData(t,e,a))return r}return null},this.PtInOverlayChartPaintTooltip=function(t,e,a){for(var i=0;i<this.OverlayChartPaint.length;++i){var r=this.OverlayChartPaint[i];if(r.GetTooltipData(t,e,a))return r}return null},this.TryClickPaintEvent=function(e,a,i){var r=this.GetEventCallback(e);if(r&&r.Callback&&a.X==i.clientX&&a.Y==i.clientY){var n=c(),s=(i.clientX-t.getBoundingClientRect().left)*n,o=(i.clientY-t.getBoundingClientRect().top)*n,h=new Q,l=null,u=this.PtInChartPaintTooltip(s,o,h);if(u&&(l={Symbol:this.Symbol,Name:this.Name}),u||(u=this.PtInOverlayChartPaintTooltip(s,o,h))&&(l={Symbol:h.ChartPaint.Symbol,Name:h.ChartPaint.Title}),h.Data){var d={X:i.clientX,Y:i.clientY,Stock:l,Tooltip:h};return r.Callback(r,d,this),!0}}return!1},this.IsPhoneDragging=function(t){var e=t.changedTouches.length,a=t.touches.length;return 1==e&&1==a},this.IsPhonePinching=function(t){var e=t.changedTouches.length,a=t.touches.length;return(1==e||2==e)&&2==a},this.PreventTouchEvent=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()},this.GetToucheData=function(t,e){for(var a=new Array,i=c(),r=0;r<t.touches.length;++r){var n=t.touches[r];e?a.push({clientX:n.clientY*i,clientY:n.clientX*i,pageX:n.pageY*i,pageY:n.pageX*i}):a.push({clientX:n.clientX*i,clientY:n.clientY*i,pageX:n.pageX*i,pageY:n.pageY*i})}return a},this.IsSingleTouch=function(t){return 1==t.touches.length},this.StopDragTimer=function(){he.IsNumber(this.DragTimer)&&(clearTimeout(this.DragTimer),this.DragTimer=null)},this.GetMoveAngle=function(t,e){var a=Math.abs(t.X-e.X),i=Math.abs(t.Y-e.Y);return 180*Math.atan(a/i)/Math.PI},t.ontouchstart=function(t){a.OnTouchStart(t)},t.ontouchmove=function(t){a.OnTouchMove(t)},t.ontouchend=function(t){a.OnTouchEnd(t)},this.AddPhoneDBClickInfo=function(t,e,a){var i={X:t,Y:e,Time:a};this.PhoneDBClickInfo.Start.push(i)},this.ClearPhoneDBClickInfo=function(){this.PhoneDBClickInfo.Start=[]},this.IsShortPhoneClick=function(t,e,a){},this.OnTouchStart=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){this.IsOnTouch=!0,this.TouchDrawCount=0,this.PhonePinch=null,this.StopDragTimer();var e=this.IsSingleTouch(t);if((0==this.EnableScrollUpDown||!e||this.DragMode==Pr.CLICK_TOUCH_MODE_ID&&1==this.TouchStatus.CorssCursorShow)&&t.cancelable&&t.preventDefault(),this.IsPhoneDragging(t)){if(this.TryClickLock||this.TryClickIndexTitle){var a=this.GetToucheData(t,this.IsForceLandscape),i=this.PointAbsoluteToRelative(a[0].clientX,a[0].clientY,!0),r=i.X,n=i.Y;if(this.TryClickLock&&this.TryClickLock(r,n))return;if(this.TryClickIndexTitle&&this.TryClickIndexTitle(r,n))return}var s=!0;this.ChartDrawOption.IsLockScreen?s=!1:this.DragMode==Pr.CLICK_TOUCH_MODE_ID?1==this.TouchStatus.CorssCursorShow&&(s=!1):this.DragMode==Pr.DISABLE_DRAG_ID?s=!1:e||(s=!1);var o={Click:{},LastMove:{}},a=this.GetToucheData(t,this.IsForceLandscape);o.Click.X=a[0].clientX,o.Click.Y=a[0].clientY,o.LastMove.X=a[0].clientX,o.LastMove.Y=a[0].clientY,this.MouseDrag=o,this.PhoneTouchInfo={Start:{X:a[0].clientX,Y:a[0].clientY},End:{X:a[0].clientX,Y:a[0].clientY}},this.SelectChartDrawPicture&&(this.SelectChartDrawPicture.IsSelected=!1),this.SelectChartDrawPicture=null;if(this.CurrentChartDrawPicture){return 2==this.CurrentChartDrawPicture.Status?this.SetChartDrawPictureThirdPoint(o.Click.X,o.Click.Y,!0):(this.SetChartDrawPictureFirstPoint(o.Click.X,o.Click.Y,!0),this.FinishChartDrawPicturePoint()&&this.DrawDynamicInfo({Corss:!1,Tooltip:!1})),void(t.cancelable&&t.preventDefault())}var i=this.PointAbsoluteToRelative(a[0].clientX,a[0].clientY,!0),h={X:i.X,Y:i.Y};c();if(this.GetChartDrawPictureByPoint(h)){h.ChartDrawPicture.Status=20,h.ChartDrawPicture.ValueToPoint(),h.ChartDrawPicture.MovePointIndex=h.PointIndex,h.ChartDrawPicture.IsSelected=!0,this.CurrentChartDrawPicture=h.ChartDrawPicture,this.SelectChartDrawPicture=h.ChartDrawPicture;var l=this.GetEventCallback(Nr.ON_CLICK_DRAWPICTURE);if(l&&l.Callback){var u={DrawPicture:h.ChartDrawPicture};l.Callback(l,u,this)}return void(t.cancelable&&t.preventDefault())}if(s){var d=this;this.DragTimer=setTimeout(function(){if(o.Click.X==o.LastMove.X&&o.Click.Y==o.LastMove.Y){d.MouseDrag;d.MouseDrag=null,d.DragMode==Pr.CLICK_TOUCH_MODE_ID&&(d.TouchStatus.CorssCursorShow=!0),d.MoveCorssCursor(o.Click,t)}},d.PressTime)}this.EnableZoomIndexWindow&&(this.PhoneDBClick.AddTouchStart(a[0].clientX,a[0].clientY,Date.now()),Fr.Chart.Log("[JSChartContainer::OnTouchStart] PhoneDBClick ",this.PhoneDBClick)),this.ChartDrawOption.IsLockScreen?this.MouseDrag=null:this.DragMode==Pr.CLICK_TOUCH_MODE_ID||(this.DragMode==Pr.DISABLE_DRAG_ID?(this.MouseDrag=null,this.MoveCorssCursor(o.Click,t)):this.IsClickShowCorssCursor&&this.MoveCorssCursor(o.Click,t)),this.TouchEvent({EventID:Nr.ON_PHONE_TOUCH,FunctionName:"OnTouchStart"},t)}else if(this.IsPhonePinching(t)){var f={Start:{},Last:{}},a=this.GetToucheData(t,this.IsForceLandscape);f.Start={X:a[0].pageX,Y:a[0].pageY,X2:a[1].pageX,Y2:a[1].pageY},f.Last={X:a[0].pageX,Y:a[0].pageY,X2:a[1].pageX,Y2:a[1].pageY},this.PhonePinch=f,this.SelectChartDrawPicture=null}}},this.OnTouchMove=function(e){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var a=this.GetToucheData(e,this.IsForceLandscape);if(this.IsPhoneDragging(e)){var i=this.MouseDrag;if(null==i)this.IsForceLandscape&&(y=t.getBoundingClientRect().width-a[0].clientY),this.ChartDrawOption.IsLockScreen||this.MoveCorssCursor({X:a[0].clientX,Y:a[0].clientY},e);else{var r=this.GetMoveAngle(i.LastMove,{X:a[0].clientX,Y:a[0].clientY}),n=Math.abs(i.LastMove.X-a[0].clientX),s=Math.abs(i.LastMove.Y-a[0].clientY);n=parseInt(n);var o=this.DragMode==Pr.CLICK_TOUCH_MODE_ID&&1==this.TouchStatus.CorssCursorShow;if(this.CurrentChartDrawPicture){var h=this.CurrentChartDrawPicture;if(1==h.Status||2==h.Status){if(n<5&&s<5)return;this.SetChartDrawPictureSecondPoint(a[0].clientX,a[0].clientY,!0)&&this.DrawDynamicInfo()}else if(3==h.Status)this.SetChartDrawPictureThirdPoint(a[0].clientX,a[0].clientY,!0)&&this.DrawDynamicInfo();else if(20==h.Status){if(n<5&&s<5)return;this.MoveChartDrawPicture(a[0].clientX-i.LastMove.X,a[0].clientY-i.LastMove.Y,!0)&&this.DrawDynamicInfo()}i.LastMove.X=a[0].clientX,i.LastMove.Y=a[0].clientY}else if(o){this.MouseDrag;this.MouseDrag=null,this.MoveCorssCursor(i.Click,e)}else if(1==this.DragMode||0==o){if((s>0&&n<=3||r<=this.TouchMoveMinAngle)&&1==this.EnableScrollUpDown)return void this.StopDragTimer();if(n<5||r<=this.TouchMoveMinAngle)return void this.PreventTouchEvent(e);var l=!0;i.LastMove.X<a[0].clientX&&(l=!1);var u=this.GetMoveOneStepWidth();if(n<u)return;this.DataMove(n,l)?(this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.ResetFrameXYSplit(),this.Draw(),this.OnKLinePageChange("OnTouchMove")):this.DragDownloadData&&this.DragDownloadData(),i.LastMove.X=a[0].clientX,i.LastMove.Y=a[0].clientY}}this.PhoneTouchInfo&&(this.PhoneTouchInfo.End.X=a[0].clientX,this.PhoneTouchInfo.End.Y=a[0].clientY)}else if(this.IsPhonePinching(e)){if(this.DragMode==Pr.DISABLE_DRAG_ID)return;this.PreventTouchEvent(e);var c=this.PhonePinch;if(!c)return;if(this.EnableZoomUpDown&&!1===this.EnableZoomUpDown.Touch)return;var d=Math.abs(a[0].pageY-a[1].pageY),f=Math.abs(c.Last.Y-c.Last.Y2),m=d-f,C=Math.abs(a[0].pageX-a[1].pageX),p=Math.abs(c.Last.X-c.Last.X2),D=C-p,v=this.ZoomStepPixel;if(Math.abs(m)<v&&Math.abs(D)<v)return;var g=m;if(Math.abs(m)<v&&(g=D),g>0){var S={IsLockRight:this.IsZoomLockRight};if(S.Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),!this.Frame.ZoomUp(S))return;this.CursorIndex=S.Index,this.UpdatePointByCursorIndex(),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),this.StopDragTimer()}else{var S={IsLockRight:this.IsZoomLockRight};if(S.Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),!this.Frame.ZoomDown(S))return;this.CursorIndex=S.Index,this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),this.StopDragTimer()}c.Last={X:a[0].pageX,Y:a[0].pageY,X2:a[1].pageX,Y2:a[1].pageY}}this.PreventTouchEvent(e)}},this.OnTouchEnd=function(t){if(Fr.Chart.Log("[KLineChartContainer:OnTouchEnd]",t),!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var e=!0;if(this.CurrentChartDrawPicture){var a=this.CurrentChartDrawPicture;2==a.Status||1==a.Status||3==a.Status?(a.PointStatus=a.Status,this.FinishChartDrawPicturePoint()?this.DrawDynamicInfo():e=!1):20==a.Status&&this.FinishMoveChartDrawPicture()&&this.DrawDynamicInfo()}if(this.EnableZoomIndexWindow){var i=Date.now();this.PhoneDBClick.AddTouchEnd(i),this.PhoneDBClick.IsVaildDBClick()&&(this.OnTouchDBClick(this.PhoneDBClick.Start),this.PhoneDBClick.Clear())}this.IsOnTouch=!1,!0===e&&(this.CurrentChartDrawPicture=null),this.StopDragTimer(),this.TouchEvent({EventID:Nr.ON_PHONE_TOUCH,FunctionName:"OnTouchEnd"},t),this.OnTouchFinished(),this.TouchDrawCount=0}},this.OnTouchDBClick=function(t){var e=this.PointAbsoluteToRelative(t[0].X,t[0].Y,!0),a=e.X,i=e.Y;Fr.Chart.Log("[KLineChartContainer:OnTouchDBClick] Phone dbclick absolute ["+a+","+i+"], soruce ["+t[0].X+","+t[0].Y+"]");var r=this.Frame.PtInFrame(a,i);if(Fr.Chart.Log("[KLineChartContainer::OnTouchDBClick] frameId",r),r>=this.Frame.ZoomStartWindowIndex&&this.ZoomIndexWindow(r,{X:a,Y:i}))return this.Frame.SetSizeChage(!0),this.Draw(),!0},this.TouchEvent=function(t,e){var a=t.EventID,i=this.GetEventCallback(a);if(!i||!i.Callback)return!1;var r=this.PhoneTouchInfo;if(!r||!r.Start||!r.End)return!1;var n=c(),s=r.End.X/n,o=r.End.Y/n,h=r.End.X-this.UIElement.getBoundingClientRect().left*n,l=r.End.Y-this.UIElement.getBoundingClientRect().top*n,u={X:s,Y:o,FrameID:-1,FunctionName:t.FunctionName,Drag:{Start:{X:r.Start.X/n,Y:r.Start.Y/n},End:{X:r.End.X/n,Y:r.End.Y/n}}};if(this.Canvas.beginPath(),this.Canvas.rect(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetTop(),this.Frame.ChartBorder.GetWidth(),this.Frame.ChartBorder.GetHeight()),this.Canvas.isPointInPath(h,l))if(this.Frame&&this.Frame.IsHScreen){var d={},f=this.Frame.GetYData(h,d);if(he.IsNumber(d.FrameID)&&d.FrameID>=0){var m=this.Frame.GetXData(l);u.FrameID=d.FrameID,u.Data={X:m,Y:f}}}else{var d={},f=this.Frame.GetYData(l,d);if(he.IsNumber(d.FrameID)&&d.FrameID>=0){var m=this.Frame.GetXData(h);u.FrameID=d.FrameID,u.Data={X:m,Y:f}}}return i.Callback(i,u,this),!0},this.MoveCorssCursor=function(t,e){var a=c(),i=t.X-this.UIElement.getBoundingClientRect().left*a,r=t.Y-this.UIElement.getBoundingClientRect().top*a;this.DragMode==Pr.CLICK_TOUCH_MODE_ID&&(this.TouchStatus.CorssCursorShow=!0),this.OnMouseMove(i,r,e,!0)},this.DrawEmpty=function(){this.UIElement.width<=0||this.UIElement.height<=0||(this.Canvas.clearRect(0,0,this.UIElement.width,this.UIElement.height),this.Frame&&(this.Frame.ScreenImageData=null,this.Frame.Draw()))},this.Draw=function(){var t=this;if(this.ChartCorssCursor&&(this.ChartCorssCursor.Status=0),!(this.UIElement.width<=0||this.UIElement.height<=0)){this.Canvas.clearRect(0,0,this.UIElement.width,this.UIElement.height);var e=c();if(this.Canvas.lineWidth=e,this.ChartSplashPaint&&this.ChartSplashPaint.IsEnableSplash)return this.Frame.ClearCoordinateText(),this.Frame.Draw({IsEnableSplash:this.ChartSplashPaint.IsEnableSplash}),void this.ChartSplashPaint.Draw();if(this.Frame.SetDrawDepthMap(function(){for(var e=0;e<t.ExtendChartPaint.length;++e){var a=t.ExtendChartPaint[e];a.IsCallbackDraw&&a.Draw()}}),this.Frame.Draw(),this.Frame.DrawCustomVertical){var a=this.GetEventCallback(Nr.ON_CUSTOM_VERTICAL_DRAW);this.Frame.DrawCustomVertical(a)}this.Frame.CalculateLock();for(var i=0;i<this.ChartPaint.length;++i){var r=this.ChartPaint[i];r.IsDrawFirst&&r.Draw()}for(var i=0;i<this.ChartPaint.length;++i){var r=this.ChartPaint[i];r.IsDrawFirst||r.Draw()}for(var i=0;i<this.ChartPaintEx.length;++i){var r=this.ChartPaintEx[i];r.Draw()}for(var i=0;i<this.OverlayChartPaint.length;++i){var r=this.OverlayChartPaint[i];r.Draw()}this.Frame.DrawOveraly&&this.Frame.DrawOveraly();for(var i=0;i<this.ExtendChartPaint.length;++i){var r=this.ExtendChartPaint[i];r.IsCallbackDraw||(r.IsDynamic||0!=r.IsAnimation||r.Draw())}this.Frame.DrawInsideHorizontal&&this.Frame.DrawInsideHorizontal(),this.Frame.DrawCustomHorizontal&&this.Frame.DrawCustomHorizontal(),this.Frame.DrawEx&&this.Frame.DrawEx({Symbol:this.Symbol}),this.ChartInfoPaint&&this.ChartInfoPaint.Draw(),this.Frame.DrawLock(),this.Frame.DrawLogo(),this.Frame.Snapshot();for(var i=0;i<this.ExtendChartPaint.length;++i){var r=this.ExtendChartPaint[i];r.IsCallbackDraw||r.IsDynamic&&!1===r.DrawAfterTitle&&r.Draw()}for(var i=0;i<this.ChartDrawPicture.length;++i){var r=this.ChartDrawPicture[i];r.IsDrawFirst&&r.Draw()}this.IsDrawPictureXY&&(this.CurrentChartDrawPicture?this.Frame.DrawPictureCoordinate(this.CurrentChartDrawPicture,{Symbol:this.Symbol,Period:this.Period}):this.SelectChartDrawPicture&&this.Frame.DrawPictureCoordinate(this.SelectChartDrawPicture,{Symbol:this.Symbol,Period:this.Period})),null==this.LastPoint.X&&null==this.LastPoint.Y||this.ChartCorssCursor&&(this.ChartCorssCursor.LastPoint=this.LastPoint,this.ChartCorssCursor.CursorIndex=this.CursorIndex,this.DragMode==Pr.CLICK_TOUCH_MODE_ID?1==this.TouchStatus.CorssCursorShow&&this.ChartCorssCursor.Draw():!0===this.CorssCursorTouchEnd&&this.MouseDrag||1==this.CorssCursorTouchEnd&&0==this.IsOnTouch||this.ChartCorssCursor.Draw());var n=this.GetDrawStatus();n.DrawName="Draw";for(var s=this.GetEventCallback(Nr.ON_TITLE_DRAW),o=this.GetEventCallback(Nr.ON_INDEXTITLE_DRAW),i=0;i<this.TitlePaint.length;++i){var r=this.TitlePaint[i];r.IsDynamic&&(r.CursorIndex=this.CursorIndex,"DynamicChartTitlePainting"==r.ClassName?r.OnDrawEvent=o:r.OnDrawEvent=s,r.OnDrawEvent&&(r.OnDrawEvent.FunctionName="Draw",r.OnDrawEvent.PointPosition=null),r.DrawStatus=n,r.Draw())}for(var i=0;i<this.ExtendChartPaint.length;++i){var r=this.ExtendChartPaint[i];r.IsCallbackDraw||r.IsDynamic&&!0===r.DrawAfterTitle&&0==r.IsAnimation&&r.Draw()}if(this.EnableAnimation)for(var i=0;i<this.ExtendChartPaint.length;++i){var r=this.ExtendChartPaint[i];!0===r.IsAnimation&&r.Draw()}for(var i=0;i<this.ChartDrawPicture.length;++i){var r=this.ChartDrawPicture[i];r.IsDrawFirst||r.Draw()}if(this.CurrentChartDrawPicture&&10!=this.CurrentChartDrawPicture.Status&&this.CurrentChartDrawPicture.Draw(),this.OffscreenToShowCanvas(),this.mapEvent.has(Nr.CHART_STATUS)){var h=this.mapEvent.get(Nr.CHART_STATUS),l={};"function"==typeof this.GetChartStatus&&(l=this.GetChartStatus()),h.Callback(h,l,this)}++this.TouchDrawCount}},this.OffscreenToShowCanvas=function(){this.ShowCanvas&&(this.ShowCanvas.clearRect(0,0,this.UIElement.width,this.UIElement.height),this.ShowCanvas.drawImage(this.OffscreenCanvasElement,0,0))},this.GetDrawStatus=function(){var t={Point:{X:this.LastPoint.X,Y:this.LastPoint.Y},IsOnTouch:this.IsOnTouch,CorssCursorTouchEnd:this.CorssCursorTouchEnd,IsTitleShowLatestData:this.IsTitleShowLatestData,IsMinuteChart:"MinuteChartContainer"==this.ClassName||"MinuteChartHScreenContainer"==this.ClassName};return t.FrameID=this.Frame.PtInFrame(this.LastPoint.X,this.LastPoint.Y),t},this.DrawDynamicInfo=function(t){if(null!=this.Frame.ScreenImageData){var e=!1;if(this.ChartCorssCursor&&(null==this.ChartCorssCursor.PointX&&null==this.ChartCorssCursor.PointY||(e=!0)),0==(e=!0))for(var a=0;a<this.ExtendChartPaint.length;++a){var i=this.ExtendChartPaint[a];if(!i.IsCallbackDraw&&(i.IsDynamic&&i.IsEraseBG)){e=!0;break}}e&&this.Canvas.putImageData(this.Frame.ScreenImageData,0,0);for(var a=0;a<this.ExtendChartPaint.length;++a){var i=this.ExtendChartPaint[a];i.IsCallbackDraw||i.IsDynamic&&!1===i.DrawAfterTitle&&0==i.IsAnimation&&i.Draw()}for(var a=0;a<this.ChartDrawPicture.length;++a){var i=this.ChartDrawPicture[a];i.IsDrawFirst&&i.Draw()}this.IsDrawPictureXY&&(this.CurrentChartDrawPicture?this.Frame.DrawPictureCoordinate(this.CurrentChartDrawPicture,{Symbol:this.Symbol,Period:this.Period}):this.SelectChartDrawPicture&&this.Frame.DrawPictureCoordinate(this.SelectChartDrawPicture,{Symbol:this.Symbol,Period:this.Period})),this.ChartCorssCursor&&(this.ChartCorssCursor.LastPoint=this.LastPoint,this.ChartCorssCursor.CursorIndex=this.CursorIndex,t&&0==t.Corss||(this.DragMode==Pr.CLICK_TOUCH_MODE_ID?1==this.TouchStatus.CorssCursorShow&&this.ChartCorssCursor.Draw():!1===this.IsOnTouch&&!0===this.CorssCursorTouchEnd||this.CurrentChartDrawPicture?!0===this.IsOnTouch&&this.CurrentChartDrawPicture&&this.EnableShowCorssCursor&&1==this.EnableShowCorssCursor.DrawPicture&&this.ChartCorssCursor.Draw():this.ChartCorssCursor.Draw()));var r=null;t&&"OnMouseMove"==t.ParentFunction&&t.Point&&(r=this.Frame.PtInFrame(t.Point.X,t.Point.Y));var n=this.GetDrawStatus();n.DrawName="DrawDynamicInfo";for(var a=0;a<this.TitlePaint.length;++a){var i=this.TitlePaint[a];i.IsDynamic&&(i.CursorIndex=this.CursorIndex,i.OnDrawEvent&&(i.OnDrawEvent.FunctionName="DrawDynamicInfo",i.OnDrawEvent.PointPosition=r),i.DrawStatus=n,"DynamicMinuteTitlePainting"==i.ClassName&&(t&&he.IsNumber(t.ClientPos)&&t.Point?i.PointInfo={ClientPos:t.ClientPos,Point:{X:t.Point.X,Y:t.Point.Y}}:i.PointInfo=null),i.Draw())}for(var a=0;a<this.ExtendChartPaint.length;++a){var i=this.ExtendChartPaint[a];if(!i.IsCallbackDraw){if("KLineTooltipPaint"==i.ClassName&&t){if(0==t.Tooltip)continue;t.Point&&(i.LatestPoint=t.Point)}else"MinuteTooltipPaint"==i.ClassName&&t&&t.Point&&(i.LatestPoint=t.Point);i.IsDynamic&&!0===i.DrawAfterTitle&&i.Draw()}}if(this.EnableAnimation)for(var a=0;a<this.ExtendChartPaint.length;++a){var i=this.ExtendChartPaint[a];!0===i.IsAnimation&&i.Draw()}for(var a=0;a<this.ChartDrawPicture.length;++a){var i=this.ChartDrawPicture[a];i.IsDrawFirst||i.Draw()}this.CurrentChartDrawPicture&&10!=this.CurrentChartDrawPicture.Status&&this.CurrentChartDrawPicture.Draw(),this.OffscreenToShowCanvas(),++this.TouchDrawCount}},this.DrawAnimation=function(){if(this.EnableAnimation){if(this.Frame.ScreenImageData&&!this.IsOnTouch){for(var t=0;t<this.ExtendChartPaint.length;++t){var e=this.ExtendChartPaint[t];!0===e.IsAnimation&&(e.IsMoveStep=!0)}this.DrawDynamicInfo()}var a=this;window.requestAnimationFrame(function(){a.DrawAnimation()})}},this.StartAnimation=function(t){for(var e=!1,a=null,i=0;i<this.ExtendChartPaint.length;++i){var r=this.ExtendChartPaint[i];if("BarragePaint"===r.ClassName){e=!0,a=r.BarrageList;break}}if(!e){var n=new oe;n.Canvas=this.Canvas,n.ChartBorder=this.Frame.ChartBorder,n.ChartFrame=this.Frame,n.HQChart=this,n.SetOption(t),this.ExtendChartPaint.push(n),a=n.BarrageList}this.EnableAnimation=!0;var s=this;return window.requestAnimationFrame(function(){s.DrawAnimation()}),a},this.StopAnimation=function(){this.EnableAnimation=!1,this.DrawDynamicInfo()},this.GetChartTooltipData=function(t,e,a){var i=new Q;if(this.ChartInfoPaint&&this.ChartInfoPaint.GetTooltipData(t,e,i))return i;if(this.PtInChartPaintTooltip(t,e,i))return i;if(he.IsNonEmptyArray(this.Frame.SubFrame))for(var r=0;r<this.Frame.SubFrame.length;++r)for(var n=this.Frame.SubFrame[r],s=0;s<n.OverlayIndex.length;++s)for(var o=n.OverlayIndex[s],h=0;h<o.ChartPaint.length;++h){var l=o.ChartPaint[h];if(l.GetTooltipData(t,e,i))return i}return this.PtInOverlayChartPaintTooltip(t,e,i)?i:null},this.OnMouseMove=function(t,e,a,i){this.LastPoint.X=t,this.LastPoint.Y=e;var r=null,n=this.Frame.PtInFrame(t,e);he.IsNumber(n)&&n>=0&&(this.CursorIndex=this.Frame.GetXData(t));var s=this.GetRectSelectPaint();if(s&&s.GetPointCount()>0){var o=s.PtInPaint(t,e);o&&(r={Cursor:"ew-resize",Name:"DragRectSelect"},Fr.Chart.Log("[JSChartContainer::OnMouseMove] drag rect select ",o))}if(this.EnableBorderDrag&&this.Frame){var h=this.Frame.PtInFrameBorder(t,e);h&&h.Index>=0&&(r={Cursor:"n-resize",Name:"DragBorder"},Fr.Chart.Log("[JSChartContainer::OnMouseMove] drag border ",h))}if(this.EnableYDrag&&this.Frame&&!r){var l=this.TryYDrag(t,e);l&&(r={Cursor:0==l.Position?"n-resize":"row-resize",Name:"DragY"},Fr.Chart.Log("[JSChartContainer::OnMouseMove] drag y ",l))}var u=this.Frame.PtInButtons(t,e);if(u&&(r={Cursor:"pointer",Name:"FrameButton"},Fr.Chart.Log("[JSChartContainer::OnMouseMove] frame button ",u)),this.ChartCorssCursor){var c=this.ChartCorssCursor.PtInButton(t,e);c&&(r={Cursor:"pointer",Name:"CorssCursorButton"},Fr.Chart.Log("[JSChartContainer::OnMouseMove] cross cursor button ",c))}"KLineChartContainer"==this.ClassName&&this.Frame.PtInFrameBottom(t,e)&&(r={Cursor:"ew-resize",Name:"FrameButtom"},Fr.Chart.Log("[JSChartContainer::OnMouseMove] frame bottom "));var d=!1;if(this.CurrentChartDrawPicture)this.CurrentChartDrawPicture.SetLastPoint&&this.CurrentChartDrawPicture.SetLastPoint({X:t,Y:e}),d=!0;else{var f={};f.X=t,f.Y=e,this.GetChartDrawPictureByPoint(f)&&f.ChartDrawPicture&&1==f.ChartDrawPicture.EnableMove?(100===f.PointIndex?this.UIElement.style.cursor="move":this.UIElement.style.cursor="pointer",d=!0,this.MoveOnChartDrawPicture=f.ChartDrawPicture):this.MouseDrag||(this.UIElement.style.cursor="default")}var m=this.PtInClient(t,e),C={ParentFunction:"OnMouseMove",Point:{X:t,Y:e},IsPhone:!0===i,ClientPos:m};if(!a||"mouseout"!=a.type&&"mouseleave"!=a.type||(C.Corss=!1),this.SetCorssCursorIndex&&this.SetCorssCursorIndex(C),this.DrawDynamicInfo(C),r&&(this.UIElement.style.cursor=r.Cursor),this.IsShowTooltip&&0==d){var p=this.GetChartTooltipData(t,e);if(p&&p.Data){if(!0===i)var D=a.touches[0],v=D.clientX-this.UIElement.getBoundingClientRect().left,g=D.clientY-this.UIElement.getBoundingClientRect().top;else var v=a.clientX-this.UIElement.getBoundingClientRect().left,g=a.clientY-this.UIElement.getBoundingClientRect().top;this.ShowTooltip(v,g,p)}else this.HideTooltip()}},this.OnKeyDown=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){switch(t.keyCode?t.keyCode:t.which){case 37:if(this.CursorIndex<=.99999){if(!this.DataMoveLeft()){this.DragDownloadData&&this.DragDownloadData();break}this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),this.OnKLinePageChange("keydown")}else--this.CursorIndex,this.UpdatePointByCursorIndex(),this.DrawDynamicInfo(),this.ShowTooltipByKeyDown();break;case 39:var e=0;if(e=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount,this.CursorIndex+1>=e){if(!this.DataMoveRight())break;this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),this.OnKLinePageChange("keydown")}else{var a=null;if(!(a=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data))break;if(this.CursorIndex+a.DataOffset+1>=a.Data.length)break;++this.CursorIndex,this.UpdatePointByCursorIndex(),this.DrawDynamicInfo(),this.ShowTooltipByKeyDown()}break;case 38:if(this.EnableZoomUpDown&&!1===this.EnableZoomUpDown.Keyboard)break;var i={ZoomType:this.ZoomType,IsLockRight:this.IsZoomLockRight};if(i.Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),!this.Frame.ZoomUp(i))break;this.CursorIndex=i.Index,this.UpdatePointByCursorIndex(),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),this.OnKLinePageChange("keydown");break;case 40:if(this.EnableZoomUpDown&&!1===this.EnableZoomUpDown.Keyboard)break;var i={ZoomType:this.ZoomType,IsLockRight:this.IsZoomLockRight};if(i.Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),!this.Frame.ZoomDown(i))break;this.CursorIndex=i.Index,this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),this.OnKLinePageChange("keydown");break;case 46:if(!this.SelectChartDrawPicture)break;var r=this.SelectChartDrawPicture;Fr.Chart.Log(r,"drawPicturedrawPicturedrawPicture"),this.SelectChartDrawPicture=null,this.ClearChartDrawPicture(r);break;case 32:this.OnMarkRectSelect(t);break;default:return}t.preventDefault?t.preventDefault():t.returnValue=!1}},this.OnDoubleClick=function(t,e,a){},this.ZoomIndexWindow=function(t,e){return!(t<0||t>=this.Frame.SubFrame.length)&&this.Frame.ZoomIndexWindow(t,e)},this.RemoveMinSizeWindows=function(){if(this.Frame.ZoomWindowsInfo){for(var t=[],e=[],a=0;a<this.Frame.SubFrame.length;++a){var i=this.Frame.SubFrame[a];i.Frame.ClearToolbar(),i.Frame.IsMinSize?t.push(a):e.push(a)}if(this.Frame.ZoomWindowsInfo=null,!(t.length<=0)){for(var a=0;a<t.length;++a)this.DeleteIndexPaint(t[a]);for(var r=[],n=[],s=[this.TitlePaint[0]],a=0;a<e.length;++a){var o=e[a];r[a]=this.Frame.SubFrame[o],n[a]=this.WindowIndex[o],s[a+1]=this.TitlePaint[o+1]}this.Frame.SubFrame=r,this.WindowIndex=n,this.TitlePaint=s;for(var a=0;a<this.Frame.SubFrame.length;++a){var i=this.Frame.SubFrame[a].Frame;a==this.Frame.SubFrame.length-1?i.XSplitOperator.ShowText=!0:i.XSplitOperator.ShowText=!1,i.Identify=a}if(he.IsNonEmptyArray(this.ChartDrawPicture)){for(var h=[],a=0;a<this.ChartDrawPicture.length;++a)for(var i=this.ChartDrawPicture[a],l=0;l<this.Frame.SubFrame.length;++l)if(i.Frame==this.Frame.SubFrame[l].Frame){h.push(i);break}this.ChartDrawPicture=h}}}},this.PtInClient=function(t,e){if(this.Canvas.beginPath(),!0===this.Frame.IsHScreen){var a=this.Frame.ChartBorder.GetHScreenBorder();this.Canvas.rect(a.Left,a.TopEx,a.Right-a.Left,a.BottomEx-a.TopEx)}else{var a=this.Frame.ChartBorder.GetBorder();if(a.DayBorder){for(var i=0;i<a.DayBorder.length;++i){var r=a.DayBorder[i];if(this.Canvas.beginPath(),this.Canvas.rect(r.LeftEx,a.TopEx,r.RightEx-r.LeftEx,a.BottomEx-a.TopEx),this.Canvas.isPointInPath(t,e))return 1;if(this.Canvas.beginPath(),this.Canvas.rect(r.Left,a.TopEx,r.LeftEx-r.Left,a.BottomEx-a.TopEx),this.Canvas.isPointInPath(t,e))return 200+parseInt(i);if(this.Canvas.beginPath(),this.Canvas.rect(r.RightEx,a.TopEx,r.Right-r.RightEx,a.BottomEx-a.TopEx),this.Canvas.isPointInPath(t,e))return 300+parseInt(i)}return-1}this.Canvas.rect(a.LeftEx,a.Top,a.RightEx-a.LeftEx,a.Bottom-a.Top)}return this.Canvas.isPointInPath(t,e)?1:this.Frame.ChartBorder.LeftExtendWidth>10&&(this.Canvas.beginPath(),!0===this.Frame.IsHScreen?this.Canvas.rect(a.Left,a.Top,a.Right-a.Left,a.TopEx-a.Top):this.Canvas.rect(a.Left,a.Top,a.LeftEx-a.Left,a.Bottom-a.Top),this.Canvas.isPointInPath(t,e))?2:this.Frame.ChartBorder.RightExtendWidth>10&&(this.Canvas.beginPath(),!0===this.Frame.IsHScreen?this.Canvas.rect(a.Left,a.BottomEx,a.Right-a.Left,a.Bottom-a.BottomEx):this.Canvas.rect(a.RightEx,a.Top,a.Right-a.RightEx,a.Bottom-a.Top),this.Canvas.isPointInPath(t,e))?3:-1},this.OnMoveFromeBorder=function(t,e){this.Frame&&this.Frame.OnMoveFromeBorder(t,e)&&(this.Frame.SetFrameBorderSizeChange(),this.Frame.ReDrawToolbar(),this.Draw())},this.OnZoomUpDownFrameY=function(t,e){this.Frame&&this.Frame.OnZoomUpDownFrameY(t,e)&&(this.Frame.SetSizeChage(!0),this.Draw())},this.OnUpDonwFrameY=function(t,e){return!!this.Frame&&(!!this.Frame.OnUpDonwFrameY(t,e)&&(this.Frame.SetSizeChage(!0),!0))},this.CancelZoomUpDownFrameY=function(t){this.Frame&&this.Frame.CancelZoomUpDownFrameY(t)&&(this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw())},this.IsKLineContainer=function(){return"KLineChartContainer"==this.ClassName||"KLineChartHScreenContainer"==this.ClassName||"KLineTrainChartContainer"==this.ClassName||"CustomKLineChartContainer"==this.ClassName},this.UpdatePointByCursorIndex=function(t){var e={X:null,Y:null};e.X=this.Frame.GetXFromIndex(this.CursorIndex);var a=Math.abs(this.CursorIndex-.5);this.IsKLineContainer()&&(a=this.CursorIndex);var i=this.Frame.Data;if(i.DataOffset+a<i.Data.length){var r=i.Data[i.DataOffset+a].Close;e.Y=this.Frame.GetYFromData(r)}if(1==t&&this.ChartCorssCursor)if(1==this.ChartCorssCursor.Status);else{this.LastPoint.X=this.Frame.GetXFromIndex(this.CursorIndex);var a=Math.abs(this.CursorIndex-.5);a=parseInt(a.toFixed(0)),this.IsKLineContainer()&&(a=this.CursorIndex),this.LastPoint.Y=null}else 2==t&&this.ChartCorssCursor?(this.LastPoint.Y=null,this.LastPoint.X=null):(this.LastPoint.X=e.X,this.LastPoint.Y=e.Y)},this.ShowTooltipByKeyDown=function(){var t=Math.abs(this.CursorIndex-.5);t=parseInt(t.toFixed(0)),"KLineChartContainer"!=this.ClassName&&"KLineTrainChartContainer"!=this.ClassName||(t=this.CursorIndex);var e=this.Frame.Data,a=new Q;a.Data=e.Data[e.DataOffset+t],a.ChartPaint=this.ChartPaint[0];var i=c();0===i&&(i=1),this.ShowTooltip(this.LastPoint.X/i,this.LastPoint.Y/i,a)},this.ShowTooltip=function(t,e,a){if(this.IsShowTooltip){var i=c(),r=15/i;if(0===a.Type){var n=(p(),t),s=e,o=qr.Create("HistoryDataStringFormat");if(o.Value=a,o.Symbol=this.Symbol,o.LanguageID=this.LanguageID,!o.Operator())return;var h=25*o.LineCount;o.Height>0&&(h=o.Height);var l=o.Width;this.Tooltip.style.width=l+"px",this.Tooltip.style.height=h+"px",this.Tooltip.style.position="absolute",n+l>this.UIElement.getBoundingClientRect().width?this.Tooltip.style.left=n-l+"px":this.Tooltip.style.left=n+"px",s+r+h>this.UIElement.getBoundingClientRect().height-5?this.Tooltip.style.top=s-h+"px":this.Tooltip.style.top=s+r+"px",this.Tooltip.className="jschart-tooltip",this.Tooltip.innerHTML=o.Text,this.Tooltip.style.display="block"}else if(1===a.Type){var n=(p(),t),s=e,o=qr.Create("KLineInfoDataStringFormat");if(o.Value=a,o.Symbol=this.Symbol,o.LanguageID=this.LanguageID,!o.Operator())return;var l=o.Width;this.Tooltip.className="jchart-klineinfo-tooltip",this.Tooltip.style.position="absolute",n+l>this.UIElement.getBoundingClientRect().width?this.Tooltip.style.left=n-l+"px":this.Tooltip.style.left=n+"px",this.Tooltip.style.top=s+r+"px",this.Tooltip.style.width=l+"px",this.Tooltip.style.height=null,this.Tooltip.innerHTML=o.Text,this.Tooltip.style.display="block"}else if(2==a.Type){var n=t,s=e,o=qr.Create("KLineTradeDataStringFormat");if(o.Value=a,o.Symbol=this.Symbol,o.LanguageID=this.LanguageID,!o.Operator())return;var l=o.Width;this.Tooltip.className="jchart-klinetrade-tooltip",this.Tooltip.style.position="absolute",this.Tooltip.style.left=n+"px",this.Tooltip.style.top=s+r+"px",this.Tooltip.style.width=l+"px",this.Tooltip.style.height=null,this.Tooltip.innerHTML=o.Text,this.Tooltip.style.display="block"}else if(3==a.Type){var n=t,s=e,o=qr.Create("MinuteInfoDataStringFormat");if(o.Value=a,o.Symbol=this.Symbol,o.LanguageID=this.LanguageID,!o.Operator())return;var l=o.Width;this.Tooltip.className="jchart-minuteinfo-tooltip",this.Tooltip.style.position="absolute",this.Tooltip.style.left=n+"px",this.Tooltip.style.top=s+r+"px",this.Tooltip.style.width=l+"px",this.Tooltip.style.height=null,this.Tooltip.innerHTML=o.Text,this.Tooltip.style.display="block"}else if(4==a.Type){var n=t,s=e,o=qr.Create("IconDataStringFormat");if(o.Value=a,o.Symbol=this.Symbol,o.LanguageID=this.LanguageID,!o.Operator())return;var l=o.Width;this.Tooltip.className="jchart-iconinfo-tooltip",this.Tooltip.style.position="absolute",this.Tooltip.style.left=n+"px",this.Tooltip.style.top=s+r+"px",this.Tooltip.style.width=l+"px",this.Tooltip.style.height=null,this.Tooltip.innerHTML=o.Text,this.Tooltip.style.display="block"}else if(5==a.Type){var n=t,s=e,o=qr.Create("ChartOXDataStringFormat");if(o.Value=a,o.Symbol=this.Symbol,o.Period=this.Period,o.LanguageID=this.LanguageID,!o.Operator())return;var l=o.Width;this.Tooltip.className="jchart-chartox-tooltip",this.Tooltip.style.position="absolute",this.Tooltip.style.left=n+"px",this.Tooltip.style.top=s+r+"px",this.Tooltip.style.width=l+"px",this.Tooltip.style.height=null,this.Tooltip.innerHTML=o.Text,this.Tooltip.style.display="block"}}},this.HideTooltip=function(){"none"!=this.Tooltip.style.display&&(this.Tooltip.style.display="none")},this.ShowSelectRect=function(t,e,a,i){var r=t,n=e,s=this.Frame.ChartBorder.GetBorder(),o=s.Right,h=s.Left;t>o&&(t=o),a>o&&(a=o),t<h&&(t=h),a<h&&(a=h),t>a&&(r=a),e>i&&(n=i);var l=Math.abs(t-a),u=Math.abs(e-i);this.SelectRect.style.width=l+"px",this.SelectRect.style.height=u+"px",this.SelectRect.style.position="absolute",this.SelectRect.style.left=r+"px",this.SelectRect.style.top=n+"px",this.SelectRect.style.display="block"},this.UpdateSelectRect=function(t,e){if(this.ChartPaint[0].Data){var a=this.GetRectSelectPaint();if(a){var i=this.ChartPaint[0].Data,r=i.Data[t],n=i.Data[e];Fr.Chart.Log("[JSChartContainer::UpdateSelectRect]",r,n),a.SetPoint(r,{Index:0}),a.SetPoint(n,{Index:1}),this.Draw()}}},this.HideSelectRect=function(){this.SelectRect.style.display="none"},this.ResetFrameXYSplit=function(){"function"==typeof this.Frame.ResetXYSplit&&this.Frame.ResetXYSplit()},this.UpdateFrameMaxMin=function(){for(var t=new Array,e=new Array,a=0;a<this.ChartPaint.length;++a){var i=this.ChartPaint[a];0!=i.IsShow&&e.push(this.ChartPaint[a])}for(var a=0;a<this.OverlayChartPaint.length;++a)e.push(this.OverlayChartPaint[a]);for(var a=0;a<e.length;++a){var r=e[a],n=r.GetMaxMin();if(null!=n&&null!=n.Max&&null!=n.Min){var s=null;for(var o in t)if(t[o].Frame==r.ChartFrame){s=t[o];break}s?(s.Range.Max<n.Max&&(s.Range.Max=n.Max),s.Range.Min>n.Min&&(s.Range.Min=n.Min)):(s={OverlayFrame:[]},s.Frame=r.ChartFrame,s.Range=n,t.push(s))}}for(var h=new _r.default,a=0;a<t.length;++a){var i=t[a];h.set(i.Frame.Identify,i)}for(var a=0;a<this.Frame.SubFrame.length;++a)for(var l=this.Frame.SubFrame[a],o=0;o<l.OverlayIndex.length;++o){var u=l.OverlayIndex[o],c=u.Frame;if(1==c.IsShareY&&(c.MainFrame&&h.has(c.MainFrame.Identify))){var s=h.get(c.MainFrame.Identify);if(s&&(s.OverlayFrame.push(c),!1!==c.IsCalculateYMaxMin))for(var d=0;d<u.ChartPaint.length;++d){var r=u.ChartPaint[d],n=r.GetMaxMin();null!=n&&null!=n.Max&&null!=n.Min&&(s.Range.Max<n.Max&&(s.Range.Max=n.Max),s.Range.Min>n.Min&&(s.Range.Min=n.Min))}}}for(var a=0;a<t.length;++a){var i=t[a];if(i.Frame&&i.Range&&(null!=i.Range.Max&&null!=i.Range.Min)){i.Frame.YSpecificMaxMin?(i.Frame.HorizontalMax=i.Frame.YSpecificMaxMin.Max,i.Frame.HorizontalMin=i.Frame.YSpecificMaxMin.Min):(i.Frame.HorizontalMax=i.Range.Max,i.Frame.HorizontalMin=i.Range.Min),i.Frame.XYSplit=!0;for(var o in i.OverlayFrame)i.OverlayFrame[o].XYSplit=!0}}for(var a=0;a<this.Frame.SubFrame.length;++a)for(var l=this.Frame.SubFrame[a],o=0;o<l.OverlayIndex.length;++o){var u=l.OverlayIndex[o];!0!==u.Frame.IsShareY&&u.UpdateFrameMaxMin()}},this.DataMoveLeft=function(){var t=null;return!!(t=this.Frame.Data?this.Frame.SubFrame[0].Frame.Data:this.Frame.Data)&&(!(t.DataOffset<=0)&&(--t.DataOffset,!0))},this.DataMoveRight=function(){var t=null;if(!(t=this.Frame.Data?this.Frame.SubFrame[0].Frame.Data:this.Frame.Data))return!1;var e=0;return!!(e=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount)&&(!(e+t.DataOffset>=t.Data.length)&&(++t.DataOffset,!0))},this.UpdataDataoffset=function(){var t=null;if(t=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data){for(var e in this.ChartPaint){var a=this.ChartPaint[e];a.Data&&(a.Data.DataOffset=t.DataOffset)}for(var e in this.OverlayChartPaint){var a=this.OverlayChartPaint[e];a.Data&&(a.Data.DataOffset=t.DataOffset)}for(var e in this.Frame.SubFrame){var i=this.Frame.SubFrame[e];for(var r in i.OverlayIndex){var n=i.OverlayIndex[r];for(var s in n.ChartPaint){var a=n.ChartPaint[s];a.Data&&(a.Data.DataOffset=t.DataOffset)}}}}},this.GetMoveOneStepWidth=function(){if(he.IsPlusNumber(this.StepPixel))return this.StepPixel;var t=c(),e=this.Frame.SubFrame[0].Frame,a=e.DataWidth,i=e.DistanceWidth,r=this.StepPixel,r=(a+i)/t;return r<1&&(r=1),r},this.DataMove=function(t,e){var a=this.GetMoveOneStepWidth(),i=t;if((t=parseInt(t/a))<=0)return!1;var r=null;if(!(r=this.Frame.Data?this.Frame.SubFrame[0].Frame.Data:this.Frame.Data))return!1;var n=0;if(!(n=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount))return!1;if(this.Frame.SubFrame&&this.Frame.SubFrame.length>0&&this.Frame.SubFrame[0].Frame){var s=this.Frame.SubFrame[0].Frame;(s.DataWidth<=1||s.DistanceWidth<=1)&&he.IsPlusNumber(this.StepPixel)&&(t=i*this.StepPixel)}if(e){if(this.RightSpaceCount>0){if(n+r.DataOffset>=r.Data.length+this.RightSpaceCount-1)return!1;r.DataOffset+=t,r.DataOffset+n>=r.Data.length+this.RightSpaceCount&&(r.DataOffset=r.Data.length-(n-this.RightSpaceCount))}else{if(n+r.DataOffset>=r.Data.length)return!1;r.DataOffset+=t,r.DataOffset+n>=r.Data.length&&(r.DataOffset=r.Data.length-n)}return!0}return!(r.DataOffset<=0)&&(r.DataOffset-=t,r.DataOffset<0&&(r.DataOffset=0),!0)},this.XCoordinateZoom=function(t,e){var a=this.GetMoveOneStepWidth();return!((t=parseInt(t/a))<=0)&&this.Frame.XCoordinateZoom(e)},this.GetSubFrameIndex=function(t,e){if(!this.Frame.SubFrame||this.Frame.SubFrame.length<=0)return-1;for(var a in this.Frame.SubFrame){var i=this.Frame.SubFrame[a].Frame,r=i.ChartBorder.GetLeft(),n=i.ChartBorder.GetTop(),s=i.ChartBorder.GetHeight(),o=i.ChartBorder.GetWidth();if(this.Canvas.beginPath(),this.Canvas.rect(r,n,o,s),this.Canvas.isPointInPath(t,e))return parseInt(a)}return 0},this.GetDataIndexByPoint=function(t){var e=this.Frame;this.Frame.SubFrame&&this.Frame.SubFrame.length>0&&(e=this.Frame.SubFrame[0].Frame);var a=null;if((a=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data)&&e){var i=parseInt(e.GetXData(t));return a.DataOffset+i}},this.GetSelectRectData=function(t){if(Math.abs(t.XStart-t.XEnd)<5)return!1;var e=(this.PtInClient(t.XStart,t.YStart),this.PtInClient(t.XEnd,t.YEnd),null);if(!(e=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data))return!1;var a=this.GetDataIndexByPoint(t.XStart),i=this.GetDataIndexByPoint(t.XEnd);return!(Math.abs(a-i)<2)&&(t.Data=e,a>i?(t.Start=i,t.End=a):(t.Start=a,t.End=i),!0)},this.GetChartDrawPictureByPoint=function(t){for(var e in this.ChartDrawPicture){var a=this.ChartDrawPicture[e],i=a.IsPointIn(t.X,t.Y);if(!1!==i&&i>=0)return t.ChartDrawPicture=a,t.PointIndex=i,!0}return!1},this.SaveToImage=function(t,e){if(this.UIElement.width<=0||this.UIElement.height<=0)return null;if(this.ChartSplashPaint&&this.ChartSplashPaint.IsEnableSplash)return null;Fr.Chart.Log("[JSChartContainer::SaveToImage]",this.UIElement);var a="rgb(255,255,255)";e&&(a=e),this.Canvas.clearRect(0,0,this.UIElement.width,this.UIElement.height),this.Canvas.fillStyle=a,this.Canvas.fillRect(0,0,this.UIElement.width,this.UIElement.height);var i=c();this.Canvas.lineWidth=i,this.Frame.Draw();for(var r in this.ChartPaint){var n=this.ChartPaint[r];n.IsDrawFirst&&n.Draw()}for(var r in this.ChartPaint){var n=this.ChartPaint[r];n.IsDrawFirst||n.Draw()}for(var r in this.ChartPaintEx){var n=this.ChartPaintEx[r];n.Draw()}for(var r in this.OverlayChartPaint){var n=this.OverlayChartPaint[r];n.Draw()}for(var r in this.ExtendChartPaint){var n=this.ExtendChartPaint[r];n.IsDynamic||0!=n.IsAnimation||n.Draw()}this.Frame.DrawInsideHorizontal&&this.Frame.DrawInsideHorizontal(),this.Frame.DrawLock();for(var r in this.ExtendChartPaint){var n=this.ExtendChartPaint[r];n.IsDynamic&&!1===n.DrawAfterTitle&&n.Draw()}null==this.LastPoint.X&&null==this.LastPoint.Y||this.ChartCorssCursor&&(this.ChartCorssCursor.LastPoint=this.LastPoint,this.ChartCorssCursor.CursorIndex=this.CursorIndex);for(var r in this.TitlePaint){var n=this.TitlePaint[r];n.IsDynamic&&(n.CursorIndex=this.CursorIndex,n.Draw())}for(var r in this.ExtendChartPaint){var n=this.ExtendChartPaint[r];n.IsDynamic&&!0===n.DrawAfterTitle&&0==n.IsAnimation&&n.Draw()}if(this.EnableAnimation)for(var r in this.ExtendChartPaint){var n=this.ExtendChartPaint[r];!0===n.IsAnimation&&n.Draw()}for(var r in this.ChartDrawPicture){var n=this.ChartDrawPicture[r];n.Draw()}this.CurrentChartDrawPicture&&10!=this.CurrentChartDrawPicture.Status&&this.CurrentChartDrawPicture.Draw();var s=this.UIElement.toDataURL(t||"image/png",1);return Fr.Chart.Log("[JSChartContainer::SaveToImage] data= ",s),s},this.SaveToImageUrl=function(t,e){t||(t={Format:"image/png",ColorGB:"rgb(255,255,255)"});var a=this.SaveToImage(t.Format,t.ColorGB),i={Base64:a,BucketName:"downloadcache",Path:"hqchart/hq_snapshot"},r=$r.Domain+"/API/FileUploadForBase64";n.HttpRequest({url:r,method:"POST",dataType:"json",data:i,success:function(t){Fr.Chart.Log("[JSChartContainer::SaveToImageUrl] recv data",t);var a={Path:t.relativeurl,Domain:"https://opensourcedownload.zealink.com"};a.Url=a.Domain+"/"+a.Path,e&&e(!0,a,"")},error:function(t){Fr.Chart.Log("[JSChartContainer::SaveToImageUrl] error ",t),e&&e(!1,null,"upload failed")}})},this.SetLanguage=function(t){var e=null;switch(t){case"EN":e=tn.LANGUAGE_ENGLISH_ID;break;case"CN":e=tn.LANGUAGE_CHINESE_ID;break;case"TC":e=tn.LANGUAGE_TRADITIONAL_CHINESE_ID;break;default:return void console.warn("[JSChartContainer::SetLanguage] language="+t+" error")}if(this.LanguageID!=e){this.LanguageID=e,this.ChartCorssCursor&&this.ChartCorssCursor.StringFormatY&&(this.ChartCorssCursor.StringFormatY.LanguageID=this.LanguageID);for(var a in this.TitlePaint){var i=this.TitlePaint[a];i&&(i.LanguageID=this.LanguageID)}this.Frame&&this.Frame.SetLanguage&&this.Frame.SetLanguage(this.LanguageID),this.Frame.SetSizeChage(!0),this.Draw()}},this.ReloadTiltePaintResource=function(t){for(var e in this.TitlePaint){var a=this.TitlePaint[e];a.ReloadResource&&a.ReloadResource(t)}},this.ReloadExtendChartPaintResource=function(t){for(var e in this.ExtendChartPaint){var a=this.ExtendChartPaint[e];a.ReloadResource&&a.ReloadResource(t)}},this.ReloadResource=function(t){this.ReloadBorder(t),this.ReloadTiltePaintResource(t.Resource),this.ReloadChartPaint(t.Resource),this.ReloadFrame(t.Resource),this.ReloadExtendChartPaintResource(t.Resource),this.ReloadChartCorssCursor(t,t.Resource),t.Update&&this.Update?this.Update({UpdateCursorIndexType:2}):1==t.Draw&&this.Draw()},this.ReloadBorder=function(t){if(t){var e=c();if(t.Border){var a=t.Border;he.IsNumber(a.Left)&&(this.Frame.ChartBorder.Left=a.Left*e),he.IsNumber(a.Right)&&(this.Frame.ChartBorder.Right=a.Right*e),he.IsNumber(a.Top)&&(this.Frame.ChartBorder.Top=a.Top*e),he.IsNumber(a.Bottom)&&(this.Frame.ChartBorder.Bottom=a.Bottom*e)}for(var i in t.Windows){var a=t.Windows[i];if(!(i>=this.Frame.SubFrame.length)){var r=this.Frame.SubFrame[i],n=r.Frame.ChartBorder;he.IsNumber(a.TitleHeight)&&(n.TitleHeight=a.TitleHeight*e)}}for(var i in t.Frame){var a=t.Frame[i];if(!(i>=this.Frame.SubFrame.length)){var r=this.Frame.SubFrame[i],n=r.Frame.ChartBorder;a.TopSpace>=0&&(n.TopSpace=a.TopSpace*e),a.BottomSpace>=0&&(n.BottomSpace=a.BottomSpace*e)}}}},this.ReloadFrame=function(t){for(var e in this.Frame.SubFrame){var a=this.Frame.SubFrame[e],i=a.Frame;i&&i.ReloadResource&&i.ReloadResource(t)}},this.ReloadChartPaint=function(t){for(var e in this.ChartPaint){var a=this.ChartPaint[e];a&&a.ReloadResource&&a.ReloadResource(t)}},this.ReloadChartCorssCursor=function(t,e){var a=c();if(t&&t.CorssCursor){var i=t.CorssCursor;he.IsNumber(i.TitleHeight)&&(this.ChartCorssCursor.TextHeight=i.TitleHeight*a)}this.ChartCorssCursor.ReloadResource&&this.ChartCorssCursor.ReloadResource(e)},this.SetDepthMapData=function(t,e){for(var a in t){var i=t[a];for(var r in this.ExtendChartPaint){var n=this.ExtendChartPaint[r];if(n.ID==i.ID){n.Data=i.Data;break}}}e&&this.Draw()},this.PointAbsoluteToRelative=function(t,e,a){var i={X:t,Y:e},r=c(),n=this.UIElement.getBoundingClientRect();return a?(i.X=t-n.left*r,i.Y=e-n.top*r):(i.X=(t-n.left)*r,i.Y=(e-n.top)*r),i},this.SetChartDrawPictureFirstPoint=function(t,e,a){var i=this.CurrentChartDrawPicture;if(!i)return!1;if(!this.Frame.SubFrame||this.Frame.SubFrame.length<=0)return!1;var r=this.PointAbsoluteToRelative(t,e,a),n=r.X,s=r.Y;for(var o in this.Frame.SubFrame){var h=this.Frame.SubFrame[o].Frame,l=h.ChartBorder.GetLeft(),u=h.ChartBorder.GetTopEx(),c=h.ChartBorder.GetHeight(),d=h.ChartBorder.GetWidth();if(this.Canvas.beginPath(),this.Canvas.rect(l,u,d,c),this.Canvas.isPointInPath(n,s)){i.Frame=h;break}}return!!i.Frame&&(i.Point[0]=new S,i.Point[0].X=n,i.Point[0].Y=s,i.Status=1,!0)},this.SetChartDrawPictureSecondPoint=function(t,e,a){var i=this.CurrentChartDrawPicture;if(!i)return!1;var r=this.PointAbsoluteToRelative(t,e,a);return i.Point[1]=new S,i.Point[1].X=r.X,i.Point[1].Y=r.Y,i.Status=2,!0},this.SetChartDrawPictureThirdPoint=function(t,e,a){var i=this.CurrentChartDrawPicture;if(!i)return!1;var r=this.PointAbsoluteToRelative(t,e,a);return i.Point[2]=new S,i.Point[2].X=r.X,i.Point[2].Y=r.Y,i.Status=3,!0},this.MoveChartDrawPicture=function(t,e,a){var i=this.CurrentChartDrawPicture;if(!i)return!1;var r=c();a&&(r=1);var n=t*r,s=e*r;return i.Move(n,s),!0},this.FinishChartDrawPicturePoint=function(){var t=this.CurrentChartDrawPicture;if(!t)return!1;if(t.PointCount!=t.Point.length)return!1;if("ChartDrawRuler"==t.ClassName)return this.CurrentChartDrawPicture=null,!0;t.Status=10,t.PointToValue(),this.ChartDrawPicture.push(t),this.CurrentChartDrawPicture=null;var e=this.GetEventCallback(Nr.ON_FINISH_DRAWPICTURE);if(e&&e.Callback){var a={DrawPicture:t};e.Callback(e,a,this)}else t.FinishedCallback&&t.FinishedCallback(t);return this.ChartDrawStorage&&this.ChartDrawStorage.SaveDrawData(t),!0},this.OnSelectChartPicture=function(t){Fr.Chart.Log("[JSChartContainer::OnSelectChartPicture",t),this.ChartPictureMenu||(this.ChartPictureMenu=new yi(this.UIElement.parentNode));var e={data:{ChartPicture:t,HQChart:this}};this.ChartPictureMenu.DoModal(e)},this.FinishMoveChartDrawPicture=function(){var t=this.CurrentChartDrawPicture;return!!t&&(t.PointCount==t.Point.length&&(t.Status=10,t.PointToValue(),this.ChartDrawStorage&&this.ChartDrawStorage.SaveDrawData(t),this.CurrentChartDrawPicture=null,!0))},this.ClearChartDrawPicture=function(t){if(t)for(var e in this.ChartDrawPicture)this.ChartDrawPicture[e]==t&&(this.ChartDrawStorage&&this.ChartDrawStorage.DeleteDrawData(t),this.ChartDrawPicture.splice(e,1),this.Draw());else this.ChartDrawPicture=[],this.ChartDrawStorage&&this.ChartDrawStorage.Clear(),this.Draw()},this.GetActiveDrawPicture=function(){var t={Move:{Guid:null},Select:{Guid:null},MoveOn:{Guid:null}};return this.CurrentChartDrawPicture&&(t.Move={Guid:this.CurrentChartDrawPicture.Guid}),this.SelectChartDrawPicture&&(t.Select={Guid:this.SelectChartDrawPicture.Guid}),this.MoveOnChartDrawPicture&&(t.MoveOn={Guid:this.MoveOnChartDrawPicture.Guid}),t},this.SetChartDrawOption=function(t){he.IsBool(t.IsLockScreen)&&(this.ChartDrawOption.IsLockScreen=t.IsLockScreen),he.IsNumber(t.Zoom)&&t.Zoom>=0&&(this.ChartDrawOption.Zoom=t.Zoom)},this.EnableShowCorssCursorLine=function(t){this.ChartCorssCursor&&(this.ChartCorssCursor.IsShowCorss=t)},this.GetExtendChartByClassName=function(t){for(var e=0;e<this.ExtendChartPaint.length;++e){var a=this.ExtendChartPaint[e];if(a.ClassName==t)return{Index:e,Chart:a}}return null},this.GetExtendChartRightWidth=function(){for(var t=0,e=0;e<this.ExtendChartPaint.length;++e){var a=this.ExtendChartPaint[e];a&&("StockChip"!=a.ClassName&&"DrawToolsButton"!=a.ClassName||he.IsNumber(a.Width)&&(t+=a.Width))}return t},this.DeleteExtendChart=function(t){t.Index>=this.ExtendChartPaint.length||this.ExtendChartPaint[t.Index]==t.Chart&&("function"==typeof t.Chart.Clear&&t.Chart.Clear(),this.ExtendChartPaint.splice(t.Index,1))},this.EnableSplashScreen=function(t){this.ChartSplashPaint&&t&&(he.IsString(t.Title)&&this.ChartSplashPaint.SetTitle(t.Title),this.ChartSplashPaint.EnableSplash(!0),!1!==t.Draw&&this.Draw())},this.SetSubFrameOption=function(t,e){if(e){if(e.Window){var a=e.Window;null!=a.Modify&&(t.Frame.ModifyIndex=a.Modify),null!=a.Change&&(t.Frame.ChangeIndex=a.Change),null!=a.Close&&(t.Frame.CloseIndex=a.Close),null!=a.Overlay&&(t.Frame.OverlayIndex=a.Overlay),1==a.IsDrawTitleBG&&(t.Frame.IsDrawTitleBG=a.IsDrawTitleBG),a.OverlayIndexType&&(he.IsNumber(a.OverlayIndexType.Position)&&(t.Frame.OverlayIndexType.Position=a.OverlayIndexType.Position),he.IsNumber(a.OverlayIndexType.LineSpace)&&(t.Frame.OverlayIndexType.LineSpace=a.OverlayIndexType.LineSpace))}he.IsNumber(e.SplitCount)&&(t.Frame.YSplitOperator.SplitCount=e.SplitCount),he.IsNumber(e.TitleHeight)&&(t.Frame.ChartBorder.TitleHeight=e.TitleHeight),he.IsBool(e.IsShowTitleArraw)&&(t.Frame.IsShowTitleArraw=e.IsShowTitleArraw),he.IsBool(e.IsShowIndexName)&&(t.Frame.IsShowIndexName=e.IsShowIndexName),he.IsBool(e.IsShowOverlayIndexName)&&(t.Frame.IsShowOverlayIndexName=e.IsShowOverlayIndexName),he.IsNumber(e.IndexParamSpace)&&(t.Frame.IndexParamSpace=e.IndexParamSpace),he.IsBool(e.IsShowXLine)&&(t.Frame.IsShowXLine=e.IsShowXLine),he.IsBool(e.IsShowYLine)&&(t.Frame.IsShowYLine=e.IsShowYLine),he.IsBool(e.IsShowIndexTitle)&&(t.Frame.IsShowIndexTitle=e.IsShowIndexTitle),he.IsBool(e.IsShowLeftText)&&(t.Frame.IsShowYText[0]=e.IsShowLeftText,t.Frame.YSplitOperator.IsShowLeftText=e.IsShowLeftText),he.IsBool(e.IsShowRightText)&&(t.Frame.IsShowYText[1]=e.IsShowRightText,t.Frame.YSplitOperator.IsShowRightText=e.IsShowRightText)}},this.AddNewSubFrame=function(t){var e=this,a=this.Frame.SubFrame.length,i=this.CreateSubFrameItem(a),r=c();i.Frame.ChartBorder.TitleHeight*=r,this.Frame.SubFrame[a]=i;var n=new Pe;n.Frame=this.Frame.SubFrame[a].Frame,n.Canvas=this.Canvas,n.LanguageID=this.LanguageID,n.GetEventCallback=function(t){return e.GetEventCallback(t)},this.TitlePaint[a+1]=n,this.SetSubFrameOption(i,t);for(var s=0;s<this.Frame.SubFrame.length;++s){var o=this.Frame.SubFrame[s].Frame;s==this.Frame.SubFrame.length-1?o.XSplitOperator.ShowText=!0:o.XSplitOperator.ShowText=!1}return this.UpdataDataoffset(),this.Frame.SetSizeChage(!0),this.UpdateXShowText&&this.UpdateXShowText(),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw(),a},this.AddIndexWindow=function(t,e){var a=new o,i=a.Get(t);if(i){this.RemoveMinSizeWindows();var r=this.AddNewSubFrame(e),n={Name:i.Name,Script:i.Script,Args:i.Args,ID:t,KLineType:i.KLineType,YSpecificMaxMin:i.YSpecificMaxMin,YSplitScale:i.YSplitScale,FloatPrecision:i.FloatPrecision,Condition:i.Condition,StringFormat:i.StringFormat,OutName:i.OutName};if(e&&(e.FloatPrecision>=0&&(n.FloatPrecision=e.FloatPrecision),e.StringFormat>0&&(n.StringFormat=e.StringFormat),e.Args&&(n.Args=e.Args)),this.WindowIndex[r]=new zi(n.Name,n.Script,n.Args,n),"MinuteChartContainer"==this.ClassName||"MinuteChartHScreenContainer"==this.ClassName)var s=this.SourceData;else var s=this.ChartPaint[0].Data;this.BindIndexData(r,s)}},this.AddAPIIndexWindow=function(t,e){if(t.API){this.RemoveMinSizeWindows();var a=this.AddNewSubFrame(e),i=t.API;if(this.WindowIndex[a]=new qi(i.Name,i.Script,i.Args,t),"MinuteChartContainer"==this.ClassName||"MinuteChartHScreenContainer"==this.ClassName)var r=this.SourceData;else var r=this.ChartPaint[0].Data;this.BindIndexData(a,r)}},this.AddScriptIndexWindow=function(t,e){if(t&&t.Script&&t.Name){this.RemoveMinSizeWindows();var a=this.AddNewSubFrame(e),i={Name:t.Name,Script:t.Script,Args:t.Args,ID:t.Name,KLineType:t.KLineType,YSpecificMaxMin:t.YSpecificMaxMin,YSplitScale:t.YSplitScale,FloatPrecision:t.FloatPrecision,Condition:t.Condition,StringFormat:t.StringFormat,OutName:t.OutName};if(t.ID&&(i.ID=t.ID),this.WindowIndex[a]=new zi(i.Name,i.Script,i.Args,i),"MinuteChartContainer"==this.ClassName||"MinuteChartHScreenContainer"==this.ClassName)var r=this.SourceData;else var r=this.ChartPaint[0].Data;this.BindIndexData(a,r)}},this.GetRectSelectPaint=function(){for(var t=0;t<this.ExtendChartPaint.length;++t){var e=this.ExtendChartPaint[t];if("RectSelectPaint"==e.ClassName)return e}return null},this.SetRectSelectData=function(t){var e=this.GetRectSelectPaint();return!!e&&(2!=e.GetPointCount()&&e.SetPoint(t))},this.MoveRectSelectPoint=function(e){var a=this.GetRectSelectPaint();if(!a)return!1;if(!this.ChartPaint[0]||!this.ChartPaint[0].Data)return!1;var i=this.ChartPaint[0].Data;if(!this.Frame.SubFrame[0])return!1;var r=this.Frame.SubFrame[0].Frame,n=c(),s=(e.X-t.getBoundingClientRect().left)*n,o=r.GetXData(s);o=parseInt(o.toFixed(0));var h=o+i.DataOffset;h>=i.Data.length&&(h=i.Data.length-1);var l=i.Data[h];if(Fr.Chart.Log("[KLineChartContainer::MoveRectSelectPoint] point, item",e.PointIndex,l),!a.SetPoint(l,{Index:e.PointIndex}))return!1;var u=this.GetEventCallback(Nr.ON_DRAG_SELECT_RECT);if(u){var d=a.GetSelectRectData(),f={X:e.X,Y:e.Y,SelectData:d,RectSelectPaint:a};u.Callback(u,f,this)}return!0},this.ClearRectSelect=function(t){var e=this.GetRectSelectPaint();return!!e&&(t&&(e.PreventClose=!1),e.ClearPoint())},this.DeleteOverlayIndex=function(t,e){var a=null;if(he.IsNumber(e)){if(e>=0&&e<this.Frame.SubFrame.length)for(var i=this.Frame.SubFrame[e],r=0;r<i.OverlayIndex.length;++r){var n=i.OverlayIndex[r];if(n.Identify===t){i.OverlayIndex.splice(r,1),a=e;break}}}else for(var s=0;s<this.Frame.SubFrame.length;++s)for(var i=this.Frame.SubFrame[s],r=0;r<i.OverlayIndex.length;++r){var n=i.OverlayIndex[r];if(n.Identify===t){i.OverlayIndex.splice(r,1),a=s;break}}if(null==a)return console.warn("[JSChartContainer::DeleteOverlayIndex] can't find overlay index. [identify="+t+"]"),!1;var o=a+1,h=this.TitlePaint[o];return h.OverlayIndex.has(t)&&h.OverlayIndex.delete(t),h.OverlayDynamicTitle.has(t)&&h.OverlayDynamicTitle.delete(t),!0},this.MoveOverlayIndex=function(t,e,a){if(!t||!e||!a)return!1;if(!he.IsNumber(t.WindowIndex)||t.WindowIndex<0||t.WindowIndex>=this.Frame.SubFrame.length)return!1;if(!he.IsNumber(e.WindowIndex)||e.WindowIndex<0||e.WindowIndex>=this.Frame.SubFrame.length)return!1;for(var i=this.Frame.SubFrame[t.WindowIndex],r=null,n=0;n<i.OverlayIndex.length;++n){var s=i.OverlayIndex[n];if(s.Identify===t.IndexID){r=s;break}}if(!r)return!1;var o=this.Frame.SubFrame[e.WindowIndex];o.Interval=this.OverlayIndexFrameWidth;var h=new B,l=this.CreateOverlayFrame();l.Canvas=this.Canvas,l.MainFrame=o.Frame,l.ChartBorder=o.Frame.ChartBorder,l.IsShow=r.Frame.IsShow,l.YSplitOperator=new ue,l.YSplitOperator.LanguageID=this.LanguageID,l.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),l.YSplitOperator.Frame=l,l.YSplitOperator.ChartBorder=l.ChartBorder,l.YSplitOperator.SplitCount=o.Frame.YSplitOperator.SplitCount,h.Frame=l;var u=this.CloneOverlayScript(r.Script);u.OverlayIndex={IsOverlay:!0,Identify:h.Identify,WindowIndex:e.WindowIndex,Frame:h},h.Script=u,o.OverlayIndex.push(h),0==a.Operator&&this.DeleteOverlayIndex(r.Identify,t.WindowIndex);var c=this.GetMainData();this.BindOverlayIndexData(h,e.WindowIndex,c),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.MoveOverlayIndexToNewWindow=function(t,e){var a=this;if(!t||!e)return!1;if(!he.IsNumber(t.WindowIndex)||t.WindowIndex<0||t.WindowIndex>=this.Frame.SubFrame.length)return!1;for(var i=this.Frame.SubFrame[t.WindowIndex],r=null,n=0;n<i.OverlayIndex.length;++n){var s=i.OverlayIndex[n];if(s.Identify===t.IndexID){r=s;break}}if(!r)return!1;this.RemoveMinSizeWindows();var o=this.Frame.SubFrame.length,h=this.CreateSubFrameItem(o),l=c();h.Frame.ChartBorder.TitleHeight*=l,this.Frame.SubFrame[o]=h;var u=new Pe;u.Frame=this.Frame.SubFrame[o].Frame,u.Canvas=this.Canvas,u.LanguageID=this.LanguageID,u.GetEventCallback=function(t){return a.GetEventCallback(t)},this.TitlePaint[o+1]=u,this.SetSubFrameOption(h,e);for(var n=0;n<this.Frame.SubFrame.length;++n){var i=this.Frame.SubFrame[n].Frame;n==this.Frame.SubFrame.length-1?i.XSplitOperator.ShowText=!0:i.XSplitOperator.ShowText=!1}0==e.Operator&&this.DeleteOverlayIndex(r.Identify,t.WindowIndex),this.UpdataDataoffset(),this.Frame.SetSizeChage(!0),this.UpdateXShowText&&this.UpdateXShowText(),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw(),this.WindowIndex[o]=this.CloneScript(r.Script);var d=this.GetMainData();this.BindIndexData(o,d)},this.GetMainData=function(){switch(this.ClassName){case"MinuteChartContainer":case"MinuteChartHScreenContainer":return this.SourceData;case"KLineChartContainer":case"KLineChartHScreenContainer":return this.ChartPaint[0].Data}},this.CreateOverlayFrame=function(){switch(this.ClassName){case"KLineChartContainer":return new O;case"KLineChartHScreenContainer":return new R;case"MinuteChartContainer":return new E;case"MinuteChartHScreenContainer":return new A}},this.CloneScript=function(t){var e=null;switch(t.ClassName){case"ScriptIndex":case"OverlayScriptIndex":e=new zi;break;case"APIScriptIndex":e=new qi}return t.CopyTo(e),e},this.CloneOverlayScript=function(t){var e=null;switch(t.ClassName){case"ScriptIndex":e=new zi;break;case"APIScriptIndex":e=new qi;break;case"OverlayScriptIndex":e=new Ji}return t.CopyTo(e),e}}function c(){return"undefined"==typeof window?1:window.devicePixelRatio||1}function d(t,e,a){if(!t)return null;e&&(t.font=e);var i="擎";he.IsString(a)&&(i=a);var r=t.measureText(i),n=r.fontBoundingBoxAscent+r.fontBoundingBoxDescent;return he.IsNumber(n)||(n=r.width+2*c()),n}function f(t){this.JSChartContainer&&this.JSChartContainer.OnKeyDown&&this.JSChartContainer.OnKeyDown(t)}function m(t,e){var a=1;if(isNaN(t))return t;t<0&&(a=-1);var i=Math.pow(10,e),r=Math.round(Math.abs(t)*i)/i*a;if(/^(\d+(?:\.\d+)?)(e)([\-]?\d+)$/.test(r))var n=r.toFixed2(e);else var n=r.toString();var s=n.indexOf(".");for(s<0&&e>0&&(s=n.length,n+=".");n.length<=s+e;)n+="0";return n}function C(){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return"guid"+(t()+t())+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}function p(){var t={},e=0,a=0;return document.documentElement&&document.documentElement.scrollTop?(e=document.documentElement.scrollTop,a=document.documentElement.scrollLeft):document.body&&(e=document.body.scrollTop,a=document.body.scrollLeft),t.Top=e,t.Left=a,t}function D(t){return parseInt(t)+.5}function v(t,e){return t%2==0?Math.floor(e):Math.floor(e)+.5}function g(t){return.5+t<<0}function S(){this.X,this.Y}function T(){this.Data,this.JSChartContainer,this.Start,this.End,this.XStart,this.YStart,this.XEnd,this.YEnd}function I(){this.Value,this.Message=[],this.TextColor=$r.FrameSplitTextColor,this.Font=$r.FrameSplitTextFont,this.LineColor=$r.FrameSplitPen,this.LineDash=null,this.LineType=1,this.ExtendData}function L(){this.UIElement,this.Left=50,this.Right=80,this.Top=50,this.Bottom=50,this.TitleHeight=24,this.TopSpace=0,this.BottomSpace=0,this.LeftExtendWidth=0,this.RightExtendWidth=0,this.MultiDayMinute={Count:1,Left:0,Right:0},this.GetBorder=function(){var t={Left:this.Left,LeftEx:this.Left+this.LeftExtendWidth,Right:this.UIElement.width-this.Right,RightEx:this.UIElement.width-this.Right-this.RightExtendWidth,Top:this.Top,TopEx:this.Top+this.TitleHeight+this.TopSpace,TopTitle:this.Top+this.TitleHeight,Bottom:this.UIElement.height-this.Bottom,BottomEx:this.UIElement.height-this.Bottom-this.BottomSpace,ChartWidth:this.UIElement.width,ChartHeight:this.UIElement.height};if(this.MultiDayMinute&&this.MultiDayMinute.Count>1&&(this.MultiDayMinute.Left>0||this.MultiDayMinute.Right>0)){for(var e=this.UIElement.width-this.Left-this.Right,a=e/this.MultiDayMinute.Count,i=[],r=0;r<this.MultiDayMinute.Count;++r){var n={Left:this.Left+a*r,Right:this.Left+a*(r+1)};n.LeftEx=n.Left+this.MultiDayMinute.Left,n.RightEx=n.Right-this.MultiDayMinute.Right,i.push(n)}t.DayBorder=i}return t},this.GetHScreenBorder=function(){return{Left:this.Left,LeftEx:this.Left+this.BottomSpace,Right:this.UIElement.width-this.Right,RightEx:this.UIElement.width-this.Right-this.TitleHeight-this.TopSpace,RightTitle:this.UIElement.width-this.Right-this.TitleHeight,Top:this.Top,TopEx:this.Top+this.LeftExtendWidth,Bottom:this.UIElement.height-this.Bottom,BottomEx:this.UIElement.height-this.Bottom-this.RightExtendWidth,ChartWidth:this.UIElement.width,ChartHeight:this.UIElement.height}},this.PtInClient=function(t,e,a,i){if(i){var r=this.GetHScreenBorder();a.rect(r.Left,r.TopEx,r.Right-r.Left,r.BottomEx-r.TopEx)}else{var r=this.GetBorder();if(r.DayBorder){for(var n=0;n<r.DayBorder.length;++n){var s=r.DayBorder[n];if(a.beginPath(),a.rect(s.LeftEx,r.TopEx,s.RightEx-s.LeftEx,r.BottomEx-r.TopEx),a.isPointInPath(t,e))return 1;if(a.beginPath(),a.rect(s.Left,r.TopEx,s.LeftEx-s.Left,r.BottomEx-r.TopEx),a.isPointInPath(t,e))return 200+parseInt(n);if(a.beginPath(),a.rect(s.RightEx,r.TopEx,s.Right-s.RightEx,r.BottomEx-r.TopEx),a.isPointInPath(t,e))return 300+parseInt(n)}return-1}a.rect(r.LeftEx,r.Top,r.RightEx-r.LeftEx,r.Bottom-r.Top)}return a.isPointInPath(t,e)?1:this.LeftExtendWidth>10&&(a.beginPath(),!0===i?a.rect(r.Left,r.Top,r.Right-r.Left,r.TopEx-r.Top):a.rect(r.Left,r.Top,r.LeftEx-r.Left,r.Bottom-r.Top),a.isPointInPath(t,e))?2:this.RightExtendWidth>10&&(a.beginPath(),!0===i?a.rect(r.Left,r.BottomEx,r.Right-r.Left,r.Bottom-r.BottomEx):a.rect(r.RightEx,r.Top,r.Right-r.RightEx,r.Bottom-r.Top),a.isPointInPath(t,e))?3:-1},this.GetChartWidth=function(){return this.UIElement.width},this.GetChartHeight=function(){return this.UIElement.height},this.GetLeft=function(){return this.Left+this.LeftExtendWidth},this.GetRight=function(){return this.UIElement.width-this.Right-this.RightExtendWidth},this.GetTop=function(){return this.Top},this.GetTopEx=function(){return this.Top+this.TitleHeight+this.TopSpace},this.GetTopTitle=function(){return this.Top+this.TitleHeight},this.GetBottom=function(){return this.UIElement.height-this.Bottom},this.GetBottomEx=function(){return this.UIElement.height-this.Bottom-this.BottomSpace},this.GetWidth=function(){return this.UIElement.width-this.Left-this.Right-this.LeftExtendWidth-this.RightExtendWidth},this.GetHeight=function(){return this.UIElement.height-this.Top-this.Bottom},this.GetHeightEx=function(){return this.UIElement.height-this.Top-this.Bottom-this.TitleHeight-this.TopSpace-this.BottomSpace},this.GetRightEx=function(){return this.UIElement.width-this.Right-this.TitleHeight-this.TopSpace},this.GetWidthEx=function(){return this.UIElement.width-this.Left-this.Right-this.TitleHeight-this.TopSpace-this.BottomSpace},this.GetLeftEx=function(){return this.Left+this.BottomSpace},this.GetRightTitle=function(){return this.UIElement.width-this.Right-this.TitleHeight},this.GetTitleHeight=function(){return this.TitleHeight}}function M(){this.HorizontalInfo=new Array,this.VerticalInfo=new Array,this.ClassName="IChartFramePainting",this.Canvas,this.Identify,this.ChartBorder,this.PenBorder=$r.FrameBorderPen,this.TitleBGColor=$r.FrameTitleBGColor,this.IsShow=!0,this.SizeChange=!0,this.XYSplit=!0,this.HorizontalMax,this.HorizontalMin,this.XPointCount=10,this.YSplitOperator,this.XSplitOperator,this.Data,this.IsLocked=!1,this.LockPaint=null,this.YSpecificMaxMin=null,this.IsShowBorder=!0,this.IsShowTitleArraw=!0,this.IsShowIndexName=!0,this.IsShowOverlayIndexName=!0,this.OverlayIndexType={Position:0,LineSpace:5},this.IndexParamSpace=2,this.IndexTitleSpace=0,this.IsShowIndexTitle=!0,this.IsDrawTitleBottomLine=!1,this.BorderLine=null,this.Buttons=[],this.IsMinSize=!1,this.LogoTextColor=$r.FrameLogo.TextColor,this.LogoTextFont=$r.FrameLogo.Font,this.PtInButtons=function(t,e){for(var a=0;a<this.Buttons.length;++a){var i=this.Buttons[a];if(i.Rect){var r=i.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(r.Left,r.Top,r.Width,r.Height),this.Canvas.isPointInPath(t,e))return{ID:i.ID,Rect:r}}}return null},this.GetBorder=function(){return this.IsHScreen?this.ChartBorder.GetHScreenBorder():this.ChartBorder.GetBorder()},this.Draw=function(){this.Buttons=[],this.DrawFrame(),this.DrawBorder(),this.SizeChange=!1,this.XYSplit=!1},this.DrawFrame=function(){},this.ClearCoordinateText=function(t){if(he.IsNonEmptyArray(this.HorizontalInfo))for(var e=0;e<this.HorizontalInfo.length;++e){var a=this.HorizontalInfo[e];a&&a.Message&&Array.isArray(a.Message)&&(a.Message[0]=a.Message[1]=null)}if(he.IsNonEmptyArray(this.VerticalInfo))for(var e=0;e<this.VerticalInfo.length;++e){var a=this.VerticalInfo[e];a&&a.Message&&Array.isArray(a.Message)&&(a.Message[0]=a.Message[1]=null)}},this.DrawBorder=function(){if(this.IsShowBorder&&!this.IsMinSize){var t=1==this.IsHScreen?this.ChartBorder.GetHScreenBorder():this.ChartBorder.GetBorder(),e=D(t.Left),a=D(t.Top),i=D(t.Right),r=D(t.Bottom),n=i-e,s=r-a;null==this.BorderLine?(this.Canvas.strokeStyle=this.PenBorder,this.Canvas.strokeRect(e,a,n,s)):he.IsPlusNumber(this.BorderLine)&&(this.Canvas.strokeStyle=this.PenBorder,this.Canvas.beginPath(),(1&this.BorderLine)>0&&(this.Canvas.moveTo(e,a),this.Canvas.lineTo(i,a)),(2&this.BorderLine)>0&&(this.Canvas.moveTo(e,r),this.Canvas.lineTo(i,r)),(4&this.BorderLine)>0&&(this.Canvas.moveTo(e,a),this.Canvas.lineTo(e,r)),(8&this.BorderLine)>0&&(this.Canvas.moveTo(i,a),this.Canvas.lineTo(i,r)),this.Canvas.stroke())}},this.DrawTitleBG=function(){if(!(this.ChartBorder.TitleHeight<=0)){var t=this.GetBorder(),e=D(t.Left),a=D(t.Top),i=D(t.Right),r=D(this.ChartBorder.GetTopTitle()),n=i-e,s=r-a;this.Canvas.fillStyle=this.TitleBGColor,this.Canvas.fillRect(e,a,n,s),this.IsDrawTitleBottomLine&&(this.Canvas.strokeStyle=this.PenBorder,this.Canvas.beginPath(),this.Canvas.moveTo(e,D(t.TopTitle)),this.Canvas.lineTo(i,D(t.TopTitle)),this.Canvas.stroke())}},this.DrawLock=function(){this.IsLocked&&(null==this.LockPaint&&(this.LockPaint=new Wt),this.LockPaint.Canvas=this.Canvas,this.LockPaint.ChartBorder=this.ChartBorder,this.LockPaint.ChartFrame=this,this.LockPaint.Draw(!0))},this.DrawLogo=function(){var t=this.GetBorder(),e=$r.FrameLogo.Text;if(he.IsString(e))if(this.Canvas.fillStyle=this.LogoTextColor,this.Canvas.font=this.LogoTextFont,this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom",this.IsHScreen){var a=t.Left+5,i=t.Top+5;this.Canvas.save(),this.Canvas.translate(a,i),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(e,0,0),this.Canvas.restore()}else{var a=t.Left+5,i=t.Bottom-5;this.Canvas.fillText(e,a,i)}},this.CalculateLock=function(){this.IsLocked&&(null==this.LockPaint&&(this.LockPaint=new Wt),this.LockPaint.Canvas=this.Canvas,this.LockPaint.ChartBorder=this.ChartBorder,this.LockPaint.ChartFrame=this,this.LockPaint.Draw(!1))},this.SetLock=function(t){if(!t)return void(this.IsLocked=!1);this.IsLocked=!0,this.LockPaint||(this.LockPaint=new Wt),t.Callback&&(this.LockPaint.Callback=t.Callback),t.IndexName&&(this.LockPaint.IndexName=t.IndexName),t.ID&&(this.LockPaint.LockID=t.ID),t.BG&&(this.LockPaint.BGColor=t.BG),t.Text&&(this.LockPaint.Title=t.Text),t.TextColor&&(this.LockPaint.TextColor=t.TextColor),t.Font&&(this.LockPaint.Font=t.Font),t.Count&&(this.LockPaint.LockCount=t.Count),t.MinWidth>0&&(this.LockPaint.MinWidth=t.MinWidth)},this.GetLockRect=function(){return this.IsLocked&&this.LockPaint?this.LockPaint.LockRect:null},this.ReloadResource=function(t){t||(this.PenBorder=$r.FrameBorderPen,this.TitleBGColor=$r.FrameTitleBGColor);for(var e in this.HorizontalInfo){var a=this.HorizontalInfo[e];a.Font&&(a.Font=$r.FrameSplitTextFont),a.TextColor&&(a.TextColor=$r.FrameSplitTextColor),a.LineColor&&(a.LineColor=$r.FrameSplitPen)}for(var e in this.VerticalInfo){var a=this.VerticalInfo[e];a.Font&&(a.Font=$r.FrameSplitTextFont),a.TextColor&&(a.TextColor=$r.FrameSplitTextColor),a.LineColor&&(a.LineColor=$r.FrameSplitPen)}},this.GetFontHeight=function(t){return d(this.Canvas,t,"擎")},this.GetScaleTextWidth=function(){}}function _(){this.newMethod=M,this.newMethod(),delete this.newMethod,this.ClassName="NoneFrame",this.Snapshot=function(){},this.SetSizeChage=function(t){this.SizeChange=t,this.Position={X:this.ChartBorder.UIElement.offsetLeft,Y:this.ChartBorder.UIElement.offsetTop,W:this.ChartBorder.UIElement.clientWidth,H:this.ChartBorder.UIElement.clientHeight}}}function b(){this.newMethod=M,this.newMethod(),delete this.newMethod,this.ClassName="AverageWidthFrame",this.DataWidth=50*c(),this.DistanceWidth=10*c(),this.MinXDistance=30*c(),this.MinYDistance=12*c(),this.CoordinateType=0,this.IsShowYText=[!0,!0],this.XBottomOffset=$r.Frame.XBottomOffset,this.YTextTopOffset=$r.Frame.YTopOffset,this.YTextPosition=[0,0],this.YTextPadding=[$r.Frame.YTextPadding[0],$r.Frame.YTextPadding[1]],this.IsShowXLine=!0,this.IsShowYLine=!0,this.YInsideOffset=0,this.YTextBaseline=0,this.MultiTextFormat=0,this.RightTextMaxWidth=0,this.ShortYLineLength=5,this.ShortXLineLength=5,this.DrawDepthMapCallback,this.DrawPicture={BGColor:$r.DrawPicture.XYCoordinate.BGColor,TextBGColor:$r.DrawPicture.XYCoordinate.TextBGColor,TextColor:$r.DrawPicture.XYCoordinate.TextColor,Font:$r.DrawPicture.XYCoordinate.Font},this.DrawFrame=function(){if(this.XPointCount>0){var t=this.ChartBorder.GetWidth()/(6*this.XPointCount);this.DistanceWidth=2*t,this.DataWidth=4*t}this.DrawHorizontal(),this.DrawVertical()},this.GetYFromData=function(t,e){if(this.Logarithmic&&this.GetYLogarithmicFromData)return this.GetYLogarithmicFromData(t,e);if(!1===e){if(1==this.CoordinateType){var a=this.ChartBorder.GetHeightEx()*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return this.ChartBorder.GetTopEx()+a}var a=this.ChartBorder.GetHeightEx()*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return this.ChartBorder.GetBottomEx()-a}if(1==this.CoordinateType){if(t<=this.HorizontalMin)return this.ChartBorder.GetTopEx();if(t>=this.HorizontalMax)return this.ChartBorder.GetBottomEx();var a=this.ChartBorder.GetHeightEx()*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return this.ChartBorder.GetTopEx()+a}if(t<=this.HorizontalMin)return this.ChartBorder.GetBottomEx();if(t>=this.HorizontalMax)return this.ChartBorder.GetTopEx();var a=this.ChartBorder.GetHeightEx()*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return this.ChartBorder.GetBottomEx()-a},this.DrawHorizontal=function(){if(this.RightTextMaxWidth=0,he.IsNonEmptyArray(this.HorizontalInfo)){for(var t=this.ChartBorder.GetBorder(),e=t.Left,a=t.Right,i=t.Bottom,r=this.ChartBorder.GetTopTitle(),n=this.ChartBorder.Right,s=this.ChartBorder.Left,o=s>10&&!0===this.IsShowYText[0]&&2!=this.YTextPosition[0],h=n>10&&!0===this.IsShowYText[1]&&2!=this.YTextPosition[1],l=null,u=c(),d=(t.BottomEx-t.TopEx)/this.HorizontalInfo.length,f=[],m=this.HorizontalInfo.length-1;m>=0;--m){var C=this.HorizontalInfo[m],p=this.GetYFromData(C.Value);if(!(null!=p&&null!=l&&Math.abs(p-l)<this.MinYDistance)){var v=D(p);p!=i&&this.IsShowYLine&&(this.Canvas.strokeStyle=C.LineColor,2==C.LineType?(this.Canvas.save(),C.LineDash?this.Canvas.setLineDash(C.LineDash):this.Canvas.setLineDash([5*u,5*u]),this.Canvas.beginPath(),this.Canvas.moveTo(e,v),this.Canvas.lineTo(a,v),this.Canvas.stroke(),this.Canvas.restore()):3==C.LineType||8==C.LineType||9==C.LineType||C.LineType>0&&($r.FrameYLineDash?(this.Canvas.setLineDash($r.FrameYLineDash),this.Canvas.beginPath(),this.Canvas.moveTo(e,v),this.Canvas.lineTo(a,v),this.Canvas.stroke(),this.Canvas.setLineDash([])):(this.Canvas.beginPath(),this.Canvas.moveTo(e,v),this.Canvas.lineTo(a,v),this.Canvas.stroke())));var g=p;if(p>=i-2?this.Canvas.textBaseline="bottom":p<=r+2?(this.Canvas.textBaseline="top",g+=this.YTextTopOffset):this.Canvas.textBaseline="middle",this.Canvas.strokeStyle=C.TextColor,this.Canvas.fillStyle=C.TextColor,null!=C.Message[0]&&o&&(null!=C.Font&&(this.Canvas.font=C.Font),this.Canvas.textAlign="right",this.Canvas.fillText(C.Message[0],e-this.YTextPadding[0],g)),null!=C.Message[1]&&h){null!=C.Font&&(this.Canvas.font=C.Font);var S=a;if(3==C.LineType){var T=this.ShortYLineLength*c();this.Canvas.beginPath(),this.Canvas.moveTo(S,v),this.Canvas.lineTo(S+T,v),this.Canvas.stroke(),S+=T}if(this.Canvas.textAlign="left",Array.isArray(C.Message[1]))if(1==this.MultiTextFormat){C.ExtendData&&C.ExtendData.Font&&(this.Canvas.font=C.ExtendData.Font);var y={Text:[{Text:C.Message[1][0],Width:this.Canvas.measureText(C.Message[1][0]).width},{Text:C.Message[1][1],Width:this.Canvas.measureText(C.Message[1][1]).width}],X:S+2,Y:g,TextBaseline:this.Canvas.textBaseline,Item:C};f.push(y)}else if(2==this.MultiTextFormat){this.Canvas.fillText(C.Message[1][0],S+this.YTextPadding[1],g);var I=this.Canvas.measureText("M").width;d>2*I&&this.Canvas.fillText(C.Message[1][1],S+this.YTextPadding[1],g+I)}else this.Canvas.fillText(C.Message[1][0],S+this.YTextPadding[1],g);else this.Canvas.fillText(C.Message[1],S+this.YTextPadding[1],g)}l=p}}he.IsNonEmptyArray(f)&&1==this.MultiTextFormat&&this.DrawHorizontalMuText(f)}},this.DrawHorizontalMuText=function(t){for(var e=[null,null],a=0;a<t.length;++a){var i=t[a],r=i.Text[0].Width;he.IsNumber(e[0])?e[0]<r&&(e[0]=r):e[0]=r,r=i.Text[1].Width,he.IsNumber(e[1])?e[1]<r&&(e[1]=r):e[1]=r}for(var a=0;a<t.length;++a){var i=t[a],n=i.Item;this.Canvas.textBaseline=n.TextBaseline,n.ExtendData&&n.ExtendData.Font?this.Canvas.font=n.ExtendData.Font:n.Font&&(this.Canvas.font=n.Font),n.ExtendData&&n.ExtendData.PriceColor?this.Canvas.fillStyle=n.ExtendData.PriceColor:this.Canvas.fillStyle=n.TextColor,this.Canvas.textAlign="right";var s=i.X+e[1];this.Canvas.fillText(i.Text[1].Text,s,i.Y),n.ExtendData&&n.ExtendData.SplitColor?this.Canvas.fillStyle=n.ExtendData.SplitColor:this.Canvas.fillStyle=n.TextColor,this.Canvas.textAlign="left";var o=this.Canvas.measureText("/").width;this.Canvas.fillText("/",s,i.Y),n.ExtendData&&n.ExtendData.PercentageColor?this.Canvas.fillStyle=n.ExtendData.PercentageColor:this.Canvas.fillStyle=n.TextColor,this.Canvas.textAlign="right";var s=i.X+e[1]+e[0]+o;this.Canvas.fillText(i.Text[0].Text,s,i.Y);var h=e[1]+e[0]+4*o;this.RightTextMaxWidth<h&&(this.RightTextMaxWidth=h)}},this.DrawInsideClientHorizontal=function(){var t=this.GetBorder();if(t.DayBorder&&he.IsNonEmptyArray(t.DayBorder))var e=t.DayBorder[0],a=e.LeftEx,e=t.DayBorder[t.DayBorder.length-1],i=e.RightEx,r=t.Bottom,n=t.TopTitle;else var a=t.LeftEx,i=t.RightEx,r=t.Bottom,n=t.TopTitle;for(var s=c(),o=null,h=null,l=this.HorizontalInfo.length-1;l>=0;--l){var e=this.HorizontalInfo[l],u=this.GetYFromData(e.Value);if(!(null!=u&&null!=o&&Math.abs(u-o)<this.MinYDistance)){if(e.Message[2]){null!=e.Font&&(this.Canvas.font=e.Font),this.Canvas.fillStyle=e.TextColor,this.Canvas.textAlign="left";var d=u;u>=r-2?this.Canvas.textBaseline="bottom":u<=n+2?(this.Canvas.textBaseline="top",d+=this.YTextTopOffset):this.Canvas.textBaseline="middle";var f={X:a,Y:d,Text:{BaseLine:this.Canvas.textBaseline,TextAlign:this.Canvas.textAlign,Font:this.Canvas.font,Value:e.Message[0]}};this.IsOverlayMaxMin&&this.IsOverlayMaxMin(f)||(this.Canvas.fillText(e.Message[2],a+1*s,d),(null==h||h>d)&&(this.YInsideOffset=this.Canvas.measureText(e.Message[2]).width+4*c(),h=d))}if(e.Message[3]){null!=e.Font&&(this.Canvas.font=e.Font),this.Canvas.fillStyle=e.TextColor,this.Canvas.textAlign="right";var d=u;u>=r-2?this.Canvas.textBaseline="bottom":u<=n+2?(this.Canvas.textBaseline="top",d+=this.YTextTopOffset):this.Canvas.textBaseline="middle";var m=this.Canvas.measureText(e.Message[3]).width,f={X:i-m,Y:d,Text:{BaseLine:this.Canvas.textBaseline,TextAlign:this.Canvas.textAlign,Font:this.Canvas.font,Value:e.Message[1]}};this.IsOverlayMaxMin&&this.IsOverlayMaxMin(f)||this.Canvas.fillText(e.Message[3],i-1*s,d)}o=u}}},this.DrawInsideHorizontal=function(){if(!0!==this.IsHScreen&&!this.IsMinSize&&(!1!==this.IsShowYText[0]||!1!==this.IsShowYText[1])){this.DrawInsideClientHorizontal();var t=this.ChartBorder.GetBorder(),e=t.Left,a=t.Right,i=t.Bottom,r=t.TopTitle,n=this.ChartBorder.Right,s=this.ChartBorder.Left,o=(this.ChartBorder.TitleHeight,(s<10||2==this.YTextPosition[0])&&!0===this.IsShowYText[0]),h=(n<10||2==this.YTextPosition[1])&&!0===this.IsShowYText[1];if(o||h)for(var l=c(),u=null,d=null,f=this.HorizontalInfo.length-1;f>=0;--f){var m=this.HorizontalInfo[f],C=this.GetYFromData(m.Value);if(!(null!=C&&null!=u&&Math.abs(C-u)<this.MinYDistance)){if(null!=m.Message[0]&&o){null!=m.Font&&(this.Canvas.font=m.Font),this.Canvas.fillStyle=m.TextColor,this.Canvas.textAlign="left";var p=C;C>=i-2?this.Canvas.textBaseline="bottom":C<=r+2?(this.Canvas.textBaseline="top",p+=this.YTextTopOffset):1==this.YTextBaseline?this.Canvas.textBaseline="bottom":this.Canvas.textBaseline="middle";var D={X:e,Y:p,Text:{BaseLine:this.Canvas.textBaseline,TextAlign:this.Canvas.textAlign,Font:this.Canvas.font,Value:m.Message[0]}};this.IsOverlayMaxMin&&this.IsOverlayMaxMin(D)||(this.Canvas.fillText(m.Message[0],e+1*l,p),(null==d||d>p)&&(this.YInsideOffset=this.Canvas.measureText(m.Message[0]).width+4*c(),d=p))}if(null!=m.Message[1]&&h){null!=m.Font&&(this.Canvas.font=m.Font),this.Canvas.fillStyle=m.TextColor,this.Canvas.textAlign="right";var p=C;if(C>=i-2?this.Canvas.textBaseline="bottom":C<=r+2?(this.Canvas.textBaseline="top",p+=this.YTextTopOffset):1==this.YTextBaseline?this.Canvas.textBaseline="bottom":this.Canvas.textBaseline="middle",Array.isArray(m.Message[1]))var v=m.Message[1][0];else var v=m.Message[1];var g=this.Canvas.measureText(v).width,D={X:a-g,Y:p,Text:{BaseLine:this.Canvas.textBaseline,TextAlign:this.Canvas.textAlign,Font:this.Canvas.font,Value:m.Message[1]}};this.IsOverlayMaxMin&&this.IsOverlayMaxMin(D)||this.Canvas.fillText(v,a-1*l,p)}u=C}}}},this.GetXFromIndex=function(t){var e=this.XPointCount;return 1==e?0==t?this.ChartBorder.GetLeft():this.ChartBorder.GetRight():e<=0?this.ChartBorder.GetLeft():t>=e?this.ChartBorder.GetRight():this.ChartBorder.GetLeft()+this.ChartBorder.GetWidth()*t/e},this.DrawVertical=function(){var t=this.GetBorder(),e=t.TopTitle,a=t.Bottom,i=t.RightEx,r=c();if(!(this.ChartBorder.Bottom<=5*c())){var n=null,s=null;for(var o in this.VerticalInfo){var h=this.GetXFromIndex(this.VerticalInfo[o].Value);if(h>i)break;if(!(null!=n&&Math.abs(h-n)<this.MinXDistance)){var l=this.VerticalInfo[o],u=D(h);if(this.IsShowXLine&&(2==l.LineType?(this.Canvas.strokeStyle=this.VerticalInfo[o].LineColor,l.LineDash?this.Canvas.setLineDash(l.LineDash):this.Canvas.setLineDash([5*r,5*r]),this.Canvas.beginPath(),this.Canvas.moveTo(u,e),this.Canvas.lineTo(u,a),this.Canvas.stroke(),this.Canvas.setLineDash([])):3==l.LineType||l.LineType>0&&($r.FrameXLineDash?(this.Canvas.strokeStyle=this.VerticalInfo[o].LineColor,this.Canvas.setLineDash($r.FrameXLineDash),this.Canvas.beginPath(),this.Canvas.moveTo(u,e),this.Canvas.lineTo(u,a),this.Canvas.stroke(),this.Canvas.setLineDash([])):(this.Canvas.strokeStyle=this.VerticalInfo[o].LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(u,e),this.Canvas.lineTo(u,a),this.Canvas.stroke()))),l.BG&&l.BG.Color){var d=l.BG;this.Canvas.fillStyle=d.Color;var f=this.GetXFromIndex(d.Index.Start),m=this.GetXFromIndex(d.Index.End),C=this.ChartBorder.Bottom;he.IsNumber(d.Height)&&(C=d.Height);var p={Left:f,Width:m-f,Top:t.Bottom,Height:C};this.Canvas.fillRect(p.Left,p.Top,p.Width,p.Height)}if(null!=this.VerticalInfo[o].Message[0]){null!=this.VerticalInfo[o].Font&&(this.Canvas.font=this.VerticalInfo[o].Font);var v=0;this.Canvas.fillStyle=l.TextColor,this.Canvas.strokeStyle=l.TextColor;var g=this.Canvas.measureText(this.VerticalInfo[o].Message[0]).width;if(h<g/2?(this.Canvas.textAlign="left",this.Canvas.textBaseline="top",v=h):h+g/2>=this.ChartBorder.GetChartWidth()?(this.Canvas.textAlign="right",this.Canvas.textBaseline="top",v=h-g):(this.Canvas.textAlign="center",this.Canvas.textBaseline="top",v=h-g/2),null==s||v>s){var S=a;if(3==l.LineType){var T=this.ShortXLineLength*r;this.Canvas.beginPath(),this.Canvas.moveTo(u,S),this.Canvas.lineTo(u,S+T),this.Canvas.stroke(),S+=T+2*r}this.Canvas.fillText(this.VerticalInfo[o].Message[0],h,S+this.XBottomOffset),s=v+g}}n=h}}}},this.GetYData=function(t,e){return this.Logarithmic&&this.GetYLogarithmicFromData?this.GetYLogarithmicData(t):1==this.CoordinateType?0==e?(t-this.ChartBorder.GetTopEx())/this.ChartBorder.GetHeightEx()*(this.HorizontalMax-this.HorizontalMin)+this.HorizontalMin:t<this.ChartBorder.GetTopEx()?this.HorizontalMin:t>this.ChartBorder.GetBottomEx()?this.HorizontalMax:(t-this.ChartBorder.GetTopEx())/this.ChartBorder.GetHeightEx()*(this.HorizontalMax-this.HorizontalMin)+this.HorizontalMin:0==e?(this.ChartBorder.GetBottomEx()-t)/this.ChartBorder.GetHeightEx()*(this.HorizontalMax-this.HorizontalMin)+this.HorizontalMin:t<this.ChartBorder.GetTopEx()?this.HorizontalMax:t>this.ChartBorder.GetBottomEx()?this.HorizontalMin:(this.ChartBorder.GetBottomEx()-t)/this.ChartBorder.GetHeightEx()*(this.HorizontalMax-this.HorizontalMin)+this.HorizontalMin},this.GetXData=function(t){return t<=this.ChartBorder.GetLeft()?0:t>=this.ChartBorder.GetRight()?this.XPointCount:(t-this.ChartBorder.GetLeft())*(1*this.XPointCount/this.ChartBorder.GetWidth())},this.DrawPictureXCoordinate=function(t,e,a){if(!this.IsHScreen&&e&&he.IsNonEmptyArray(e.Points)){var i=this.GetBorder(),r=i.Left,n=i.Right;this.Canvas.font=this.DrawPicture.Font;var s=this.GetFontHeight();if(e.X){var o=e.X,h=o.Min.X,l=o.Max.X;h<r&&(h=r),l>n&&(l=n),this.Canvas.fillStyle=this.DrawPicture.BGColor,this.Canvas.fillRect(h,i.Bottom,l-h,s)}for(var u=0;u<e.Points.length;++u){var c=e.Points[u];if(!(c.X<r||c.X>n)){var d=this.GetXData(c.X,!1),d=Math.round(d),f=this.GetKItem(d);if(f){var m=he.FormatDateString(f.Date,null);Z.IsMinutePeriod(a.Period)&&(m+=" "+he.FormatTimeString(f.Time,"HH:MM"));var C=this.Canvas.measureText(m).width+2,p=c.X-C/2;p<r&&(p=r),this.Canvas.fillStyle=this.DrawPicture.TextBGColor,this.Canvas.fillRect(p,i.Bottom,C,s),this.Canvas.fillStyle=this.DrawPicture.TextColor;var D=i.Bottom+s;this.Canvas.fillText(m,p+1,D)}}}}},this.GetKItem=function(t){if(!this.Data)return null;if(!he.IsNonEmptyArray(this.Data.Data))return null;var e=this.Data.DataOffset+t;return this.Data.Data[e]},this.DrawPictureYCoordinate=function(t,e,a){if(!this.IsHScreen&&e&&he.IsNonEmptyArray(e.Points)){var i=this.GetBorder(),r=i.TopEx,n=i.BottomEx,s=i.Right;this.Canvas.font=this.DrawPicture.Font;var o=this.GetFontHeight();this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom";var h=2;a&&a.Symbol&&(h=Oi(a.Symbol));for(var l=0,u=0;u<e.Points.length;++u){var c=e.Points[u],d=this.GetYData(c.Y),f=d.toFixed(h),m=this.Canvas.measureText(f).width;l<m&&(l=m),e.Points[u].Text=f}if(l+=this.YTextPadding[1]+2,e.Y){var C=e.Y,p=C.Min.Y,D=C.Max.Y;C.Min.Y<r&&(p=r),C.Max.Y>n&&(D=n),this.Canvas.fillStyle=this.DrawPicture.BGColor,this.Canvas.fillRect(s,p,l+5,D-p)}for(var u=0;u<e.Points.length;++u){var c=e.Points[u];if(!(c.Y<r||c.Y>n)){this.Canvas.fillStyle=this.DrawPicture.TextBGColor,this.Canvas.fillRect(s,c.Y-o/2,l,o),this.Canvas.fillStyle=this.DrawPicture.TextColor;var v=c.Y+o/2;this.Canvas.fillText(c.Text,s+this.YTextPadding[1],v)}}}},this.GetCustomItemTextInfo=function(t,e,a){var i=e?t.Message[0]:t.Message[1],r=[],n=0;if(Array.isArray(i)){for(var s=0;s<i.length;++s){var o=this.Canvas.measureText(i[s].Text).width;o>n&&(n=o),r.push({Text:i[s].Text,Width:o+2*a})}n>0&&(n+=2*a)}else n=this.Canvas.measureText(i).width+2*a,r.push({Text:i,Width:n});return{MaxWidth:n,Text:r}},this.DrawCustomItem=function(t){if((t.Message[1]||t.Message[0])&&!(t.Value>this.HorizontalMax||t.Value<this.HorizontalMin)){var e=this.ChartBorder.GetLeft(),a=this.ChartBorder.GetRight(),i=this.ChartBorder.GetBottom(),r=this.ChartBorder.GetTopTitle(),n=this.ChartBorder.Right,s=this.ChartBorder.Left;this.ChartBorder.TitleHeight;this.IsHScreen&&(s=this.ChartBorder.Top,n=this.ChartBorder.Bottom,r=this.ChartBorder.GetTop(),i=this.ChartBorder.GetBottom());var o=c(),h=18*o,l=h,u=this.GetYFromData(t.Value);if(t.Message[0])if(s<10){null!=t.Font&&(this.Canvas.font=t.Font),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";var d=this.GetCustomItemTextInfo(t,!0,o),f=d.MaxWidth,m=this.GetFontHeight();l=m>h?m:h;var C=t.LineColor,p=this.RGBToStruct(t.LineColor);p&&(C="rgba("+p.R+", "+p.G+", "+p.B+", "+$r.FrameLatestPrice.BGAlpha+")");for(var D=u,v=0;v<d.Text.length;++v){var g=d.Text[v];if(this.IsHScreen){var S=r,T=D-l/2-1*o;this.Canvas.fillStyle=C,this.Canvas.fillRect(T,S,l,g.Width),this.DrawHScreenText({X:D,Y:S},{Text:g.Text,Color:t.TextColor,XOffset:1*o,YOffset:2*o}),0==v&&this.DrawLine(S+g.Width,i,D,t.LineColor,t.LineType),D-=l+1*o}else{var S=D-l/2-1*o,T=e+1*o;this.Canvas.fillStyle=C,this.Canvas.fillRect(T,S,g.Width,l),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(g.Text,T+1*o,D),0==v&&this.DrawLine(T+g.Width,a,D,t.LineColor,t.LineType),D+=l+1*o}}}else{null!=t.Font&&(this.Canvas.font=t.Font),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle";var d=this.GetCustomItemTextInfo(t,!0,o),f=d.MaxWidth,m=this.GetFontHeight();l=m>h?m:h;for(var D=u,v=0;v<d.Text.length;++v){var g=d.Text[v];if(this.IsHScreen){if(0==v)var S=r-g.Width;else var S=r-f;var T=D-l/2-1*o;this.Canvas.fillStyle=t.LineColor,this.Canvas.fillRect(T,S,l,g.Width),this.DrawHScreenText({X:D,Y:S},{Text:g.Text,Color:t.TextColor,XOffset:1*o,YOffset:2*o}),0==v&&this.DrawLine(S+g.Width,i,D,t.LineColor,t.LineType),D-=l+1*o}else{var S=D-l/2-1*o;if(0==v)var y=e-g.Width,T=e;else var y=e-f,T=e-(f-g.Width);this.Canvas.fillStyle=t.LineColor,this.Canvas.fillRect(y,S,g.Width,l),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(g.Text,T-1*o,D),0==v&&this.DrawLine(e,a,D,t.LineColor,t.LineType),D+=l+1*o}}}else if(t.Message[1])if(n<10){null!=t.Font&&(this.Canvas.font=t.Font),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";var d=this.GetCustomItemTextInfo(t,!1,o),f=d.MaxWidth,m=this.GetFontHeight();l=m>h?m:h;var C=t.LineColor,p=this.RGBToStruct(t.LineColor);p&&(C="rgba("+p.R+", "+p.G+", "+p.B+", "+$r.FrameLatestPrice.BGAlpha+")");for(var D=u,v=0;v<d.Text.length;++v){var g=d.Text[v];if(this.IsHScreen){var S=i-g.Width,T=D-l/2-1*o;this.Canvas.fillStyle=C,this.Canvas.fillRect(T,S,l,f),this.DrawHScreenText({X:D,Y:S},{Text:g.Text,Color:t.TextColor,XOffset:1*o,YOffset:2*o}),0==v&&this.DrawLine(r,S,D,t.LineColor,t.LineType),D-=l+1*o}else{var S=D-l/2-1*o,T=a-g.Width;this.Canvas.fillStyle=C,this.Canvas.fillRect(T,S,f,l),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(g.Text,T+1*o,D),0==v&&this.DrawLine(e,T,D,t.LineColor,t.LineType),D+=l+1*o}}}else{null!=t.Font&&(this.Canvas.font=t.Font),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";var d=this.GetCustomItemTextInfo(t,!1,o),f=d.MaxWidth,m=this.GetFontHeight();l=m>h?m:h;for(var D=u,v=0;v<d.Text.length;++v){var g=d.Text[v];if(this.IsHScreen){var S=i,T=D-l/2-1*o;this.Canvas.fillStyle=t.LineColor,this.Canvas.fillRect(T,S,l,g.Width),this.DrawHScreenText({X:D,Y:S},{Text:g.Text,Color:t.TextColor,XOffset:1*o,YOffset:2*o}),0==v&&this.DrawLine(r,S,D,t.LineColor,t.LineType),D-=l+1*o}else{var S=D-l/2-1*o;if(0==v)var T=a;else var T=a+f-g.Width;this.Canvas.fillStyle=t.LineColor,this.Canvas.fillRect(T,S,g.Width,l),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(g.Text,T+1*o,D),0==v&&this.DrawLine(e,a,D,t.LineColor,t.LineType),D+=l+1*o}}}}},this.DrawDotLine=function(t,e,a,i){var r=c();this.Canvas.save(),this.Canvas.strokeStyle=i,this.Canvas.setLineDash([5*r,5*r]),this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(D(a),t),this.Canvas.lineTo(D(a),e)):(this.Canvas.moveTo(t,D(a)),this.Canvas.lineTo(e,D(a))),this.Canvas.stroke(),this.Canvas.restore()},this.DrawLine=function(t,e,a,i,r){-1!=r&&(0==r?(this.Canvas.strokeStyle=i,this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(D(a),t),this.Canvas.lineTo(D(a),e)):(this.Canvas.moveTo(t,D(a)),this.Canvas.lineTo(e,D(a))),this.Canvas.stroke()):this.DrawDotLine(t,e,a,i))},this.DrawHScreenText=function(t,e){this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=e.Color,this.Canvas.save(),this.Canvas.translate(t.X,t.Y),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(e.Text,e.XOffset,e.YOffset),this.Canvas.restore()},this.RGBToStruct=function(t){if(/^(rgb|RGB)/.test(t)){var e=t.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),a={};return 3!=e.length?null:(a.R=Number(e[0]),a.G=Number(e[1]),a.B=Number(e[2]),a)}return null},this.GetScaleTextWidth=function(){var t=(this.ChartBorder.GetBorder(),c());if(this.IsHScreen)var e=this.ChartBorder.Top,a=this.ChartBorder.Bottom,i=e>10*t&&!0===this.IsShowYText[0]&&2!=this.YTextPosition[0],r=a>10*t&&!0===this.IsShowYText[1]&&2!=this.YTextPosition[1];else var n=this.ChartBorder.Right,s=this.ChartBorder.Left,i=s>10&&!0===this.IsShowYText[0]&&2!=this.YTextPosition[0],r=n>10&&!0===this.IsShowYText[1]&&2!=this.YTextPosition[1];if(!r&&!i)return null;for(var o={Left:null,Right:null},h=0,l=0;l<this.HorizontalInfo.length;++l){var u=null,d=this.HorizontalInfo[l];if(d&&(null!=d.Font&&(this.Canvas.font=d.Font),null!=d.Message[0]&&i&&(u=this.Canvas.measureText(d.Message[0]).width,(null==o.Left||o.Left<u)&&(o.Left=u)),null!=d.Message[1]&&r)){if(null!=d.Font&&(this.Canvas.font=d.Font),Array.isArray(d.Message[1]))if(1==this.MultiTextFormat){if(d.ExtendData){d.ExtendData.Font&&(this.Canvas.font=d.ExtendData.Font);var f=this.Canvas.measureText(d.Message[1][0]).width,m=this.Canvas.measureText(d.Message[1][1]).width,C=this.Canvas.measureText("/").width;u=f+C,h<m&&(h=m)}}else if(2==this.MultiTextFormat){u=this.Canvas.measureText(d.Message[1][0]).width;var p=this.Canvas.measureText(d.Message[1][1]).width;u<p&&(u=p)}else u=this.Canvas.measureText(d.Message[1][0]).width;else u=this.Canvas.measureText(d.Message[1]).width;(null==o.Right||o.Right<u)&&(o.Right=u)}}return he.IsNumber(o.Right)&&(o.Right+=h),he.IsNumber(o.Left)&&(o.Left+=this.YTextPadding[0]),he.IsNumber(o.Right)&&(o.Right+=this.YTextPadding[1]),{TextWidth:o}},this.ClearToolbar=function(){if(this.ToolbarID){var t=document.getElementById(this.ToolbarID);t&&(this.ChartBorder.UIElement.parentNode.removeChild(t),this.ToolbarRect=null)}},this.HideToolbar=function(){if(this.ToolbarID){this.ToolbarRect=null;var t=document.getElementById(this.ToolbarID);t&&"none"!=t.style.display&&(t.style.display="none")}}}function w(){this.newMethod=b,this.newMethod(),delete this.newMethod,this.ClassName="MinuteFrame",this.DataWidth=1*c(),this.DistanceWidth=1*c(),this.MinuteCount=243,this.BeforeBGColor=$r.Minute.Before.BGColor,this.MultiDayBorderPen=$r.FrameBorderPen,this.CustomHorizontalInfo=[],this.RightFrame=null,this.ToolbarID=C(),this.ReDrawToolbar=!1,this.DayCount=1,this.ModifyIndex=!0,this.ChangeIndex=!0,this.CloseIndex=!0,this.ModifyIndexEvent,this.ChangeIndexEvent,this.ToolbarRect=null,this.IsShowPositionTitle=!1,this.LastCalculateStatus={Width:0,XPointCount:0},this.BeforeCloseIcon={Family:$r.Minute.Before.CloseIcon.Family,Text:$r.Minute.Before.CloseIcon.Text,Color:$r.Minute.Before.CloseIcon.Color,Size:$r.Minute.Before.CloseIcon.Size},this.BeforeOpenVerticalInfo=[],this.AfterCloseVerticalInfo=[],this.DrawFrame=function(){this.IsMinSize||(this.SplitXYCoordinate(),this.DrawBeforeDataBG(),this.YInsideOffset=0,this.DrawTitleBG(),this.DrawHorizontal(),this.DrawVertical()),1!=this.SizeChange&&1!=this.ReDrawToolbar||(this.DrawToolbar(),this.ReDrawToolbar=!1)},this.SuperDrawBorder=this.DrawBorder,this.DrawBorder=function(){if(this.IsShowBorder&&!this.IsMinSize&&(this.SuperDrawBorder(),1==this.Identify)){var t=this.ChartBorder.GetBorder(),e=D(t.Left),a=D(t.Top),i=D(t.Right);this.Canvas.strokeStyle=this.PenBorder,this.Canvas.beginPath(),this.Canvas.moveTo(e,a),this.Canvas.lineTo(i,a),this.Canvas.save(),this.Canvas.lineWidth=2*c(),this.Canvas.stroke(),this.Canvas.restore()}},this.DrawVolTitle=function(t){if(an.IsShowMinuteVolTitle(t)&&1==this.Identify){var e=c(),a=this.ChartBorder.GetLeft()+2*e+this.YInsideOffset,i=this.ChartBorder.GetTopEx()+2*e;if(this.Canvas.textAlign="left",this.Canvas.textBaseline="top",$r.Minute.VolBarColor||$r.Minute.VolTitleColor){$r.Minute.VolBarColor?this.Canvas.fillStyle=$r.Minute.VolBarColor:this.Canvas.fillStyle=$r.Minute.VolTitleColor;var r=this.YSplitOperator.LanguageID,n=en.GetText("MVol-Vol",r);this.Canvas.fillText(n,a,i),a+=this.Canvas.measureText(n).width,a+=6*c()}this.IsShowPositionTitle&&(n=en.GetText("MVol-Position",r),this.Canvas.fillStyle=$r.Minute.PositionColor,this.Canvas.fillText(n,a,i))}},this.DrawToolbar=function(){if(void 0!==wr.default&&!(this.Identify<2)&&this.ChartBorder.UIElement){var t=document.getElementById(this.ToolbarID);if(!t||0!=this.SizeChange||0!=this.ReDrawToolbar){if(t||(t=document.createElement("div"),t.className="klineframe-toolbar",t.id=this.ToolbarID,t.oncontextmenu=function(){return!1},t.setAttribute("identify",this.Identify.toString()),this.ChartBorder.UIElement.parentNode.appendChild(t)),!this.ModifyIndex&&!this.ChangeIndex&&!this.OverlayIndex)return void("none"!=t.style.display&&(t.style.display="none"));var e=c(),a=parseInt(this.ChartBorder.UIElement.parentElement.style.width.replace("px","")),i=(parseInt(this.ChartBorder.UIElement.parentElement.style.height.replace("px","")),this.ChartBorder.GetTitleHeight()),r=a-this.ChartBorder.Right/e-100,n=this.ChartBorder.GetTop()/e;if(!this.ToolbarRect||this.ToolbarRect.Left!=r||this.ToolbarRect.Top!=n||100!=this.ToolbarRect.Width||this.ToolbarRect.Height!=i/e){this.ToolbarRect={Left:r,Top:n,Width:100,Height:i/e};var s="<span class='index_param icon iconfont icon-index_param' id='modifyindex' style='cursor:pointer;margin-left:2px;margin-right:2px;' title='调整指标参数'></span><span class='index_change icon iconfont icon-change_index' id='changeindex' style='cursor:pointer;margin-left:2px;margin-right:2px;' title='切换指标'></span>";this.CloseIndex&&(s+="<span class='index_close icon iconfont icon-close' id='closeindex' style='cursor:pointer;margin-left:2px;margin-right:2px;' title='关闭指标窗口'></span>"),t.style.left=r+"px",t.style.top=n+"px",t.style.width="100px",t.style.height=i/e+"px",t.innerHTML=s;this.ChartBorder.UIElement.JSChartContainer,this.Identify;this.ModifyIndex?"function"==typeof this.ModifyIndexEvent&&(0,wr.default)("#"+t.id+" .index_param").click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify},this.ModifyIndexEvent):(0,wr.default)("#"+t.id+" .index_param").hide(),this.ChangeIndex?"function"==typeof this.ChangeIndexEvent&&(0,wr.default)("#"+t.id+" .index_change").click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify,IsOverlay:!1},this.ChangeIndexEvent):(0,wr.default)("#"+t.id+" .index_change").hide(),(0,wr.default)("#"+t.id+" .index_close").click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify},function(t){var e=t.data.Chart,a=t.data.Identify;e.RemoveIndexWindow(a)}),t.style.display="block"}}}},this.DrawMultiDayBeforeDataBG=function(t){var e=t.DayBorder,a=D(t.Top),i=D(t.Bottom),r=i-a;this.Canvas.fillStyle=this.BeforeBGColor,this.Canvas.strokeStyle=this.MultiDayBorderPen;for(var n in e){var s=0,o=e[n],h=D(o.Left),l=D(o.LeftEx),u=l-h;u>3&&(this.Canvas.fillRect(h,a,u,r),++s);var h=D(o.RightEx),l=D(o.Right),u=l-h;u>3&&(this.Canvas.fillRect(h,a,u,r),++s),2==s&&n!=e.length-1&&(this.Canvas.beginPath(),this.Canvas.moveTo(l,a),this.Canvas.lineTo(l,i),this.Canvas.stroke())}},this.DrawCallAuctionVertical=function(t,e,a,i){if(e){var r=a.TopTitle,n=a.Bottom,s=(a.Left,a.LeftEx),o=c(),h=null,l=null;for(var u in t){var d=t[u],f=this.GetLeftExtendXFromIndex(d.Value,e);if(f>s)break;if(!(null!=h&&Math.abs(f-h)<this.MinXDistance)){var m=D(f);if(this.IsShowXLine&&(2==d.LineType?(this.Canvas.strokeStyle=d.LineColor,this.Canvas.setLineDash([5*o,5*o]),this.Canvas.beginPath(),this.Canvas.moveTo(m,r),this.Canvas.lineTo(m,n),this.Canvas.stroke(),this.Canvas.setLineDash([])):3==d.LineType||d.LineType>0&&($r.FrameXLineDash?(this.Canvas.strokeStyle=d.LineColor,this.Canvas.setLineDash($r.FrameXLineDash),this.Canvas.beginPath(),this.Canvas.moveTo(m,r),this.Canvas.lineTo(m,n),this.Canvas.stroke(),this.Canvas.setLineDash([])):(this.Canvas.strokeStyle=d.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(m,r),this.Canvas.lineTo(m,n),this.Canvas.stroke()))),null!=d.Message[0]&&this.ChartBorder.Bottom>5*o){null!=d.Font&&(this.Canvas.font=d.Font);var C=0;this.Canvas.fillStyle=d.TextColor,this.Canvas.strokeStyle=d.TextColor;var p=this.Canvas.measureText(d.Message[0]).width;if(f<p/2?(this.Canvas.textAlign="left",this.Canvas.textBaseline="top",C=f):f+p/2>=a.ChartWidth?(this.Canvas.textAlign="right",this.Canvas.textBaseline="top",C=f-p):(this.Canvas.textAlign="center",this.Canvas.textBaseline="top",C=f-p/2),null==l||C>l){var v=n;if(3==d.LineType){var g=this.ShortXLineLength*o;this.Canvas.beginPath(),this.Canvas.moveTo(m,v),this.Canvas.lineTo(m,v+g),this.Canvas.stroke(),v+=g+2*o}this.Canvas.fillText(d.Message[0],f,v+this.XBottomOffset),l=C+p}}h=f}}}},this.DrawBeforeDataBG=function(){var t=this.ChartBorder.GetBorder();if(t.DayBorder)return void this.DrawMultiDayBeforeDataBG(t);if(!(this.ChartBorder.LeftExtendWidth<10&&this.ChartBorder.RightExtendWidth<10)){var e=D(t.Top),a=D(t.Bottom);if(this.Canvas.fillStyle=this.BeforeBGColor,this.ChartBorder.LeftExtendWidth>10){var i=D(t.Left),r=D(this.ChartBorder.GetLeft()),n=r-i,s=a-e;if(this.Canvas.fillRect(i,e,n,s),0==this.Identify){this.Canvas.font=this.BeforeCloseIcon.Size+"px "+this.BeforeCloseIcon.Family,this.Canvas.fillStyle=this.BeforeCloseIcon.Color,this.Canvas.textAlign="left",this.Canvas.textBaseline="top",this.Canvas.fillText(this.BeforeCloseIcon.Text,t.Left,t.TopEx);var o={Left:t.Left,Top:t.TopEx,Width:this.BeforeCloseIcon.Size,Height:this.BeforeCloseIcon.Size};this.Buttons.push({Rect:o,Name:"集合竞价关闭按钮",ID:Rr.CLOSE_BEFOREOPEN_ID})}this.DrawCallAuctionVertical(this.BeforeOpenVerticalInfo,this.YSplitOperator.BeforeOpenData,t,!0)}if(this.ChartBorder.RightExtendWidth>10){this.Canvas.fillStyle=this.BeforeBGColor;var i=D(this.ChartBorder.GetRight()),r=D(t.Right),n=r-i,s=a-e;this.Canvas.fillRect(i,e,n,s)}}},this.DrawPictureXCoordinate=function(t,e,a){if(!this.IsHScreen&&e&&he.IsNonEmptyArray(e.Points)){var i=this.GetBorder(),r=i.Left,n=i.Right;this.Canvas.font=this.DrawPicture.Font;var s=this.GetFontHeight();if(e.X){var o=e.X,h=o.Min.X,l=o.Max.X;h<r&&(h=r),l>n&&(l=n),this.Canvas.fillStyle=this.DrawPicture.BGColor,this.Canvas.fillRect(h,i.Bottom,l-h,s)}for(var u=0;u<e.Points.length;++u){var c=e.Points[u];if(!(c.X<r||c.X>n)){var d=parseInt(this.GetXData(c.X)),f=this.GetKItem(d,a);if(f){var m=he.FormatTimeString(f.Time,"HH:MM"),C=this.Canvas.measureText(m).width+2,p=c.X-C/2;p<r&&(p=r),this.Canvas.fillStyle=this.DrawPicture.TextBGColor,this.Canvas.fillRect(p,i.Bottom,C,s),this.Canvas.fillStyle=this.DrawPicture.TextColor;var D=i.Bottom+s;this.Canvas.fillText(m,p+1,D)}}}}},this.GetKItem=function(t,e){if(!this.Data)return null;if(!he.IsNonEmptyArray(this.Data.Data))return null;if(t<this.Data.Data.length)return this.Data.Data[t];var a=this.Data.Data[this.Data.Data.length-1],i=rn.GetTimeData(e.Symbol),r=t%i.length,n=i[r];return{Date:a.Date,Time:n}},this.SplitXYCoordinate=function(){0!=this.XYSplit&&(null!=this.YSplitOperator&&this.YSplitOperator.Operator(),null!=this.XSplitOperator&&this.XSplitOperator.Operator())},this.GetMultiDayXFromIndex=function(t,e){var a=e.DayBorder,i=t%this.MinuteCount,r=parseInt(t/this.MinuteCount);r>=a.length&&(r=a.length-1);var n=a[r],s=this.MinuteCount-1;if(i>=s)return n.RightEx;var o=n.RightEx-n.LeftEx;return n.LeftEx+o*i/s},this.GetXFromIndex=function(t){var e=this.XPointCount-1,a=this.ChartBorder.GetBorder();if(a.DayBorder)return this.GetMultiDayXFromIndex(t,a);if(1==e)return 0==t?a.LeftEx:a.RightEx;if(e<=0)return a.LeftEx;if(t>=e)return a.RightEx;var i=a.RightEx-a.LeftEx;return a.LeftEx+i*t/e},this.GetMultiDayXData=function(t,e){for(var a=e.DayBorder,i=0;i<a.length;++i){var r=a[i];if(t>=r.Left&&t<=r.Right){var n=this.MinuteCount-1,s=this.MinuteCount*i;if(t<=r.LeftEx)return 0+s;if(t>=r.RightEx)return n+s;var o=r.RightEx-r.LeftEx;return(t-r.LeftEx)*(1*n/o)+s}}},this.GetXData=function(t){var e=this.XPointCount-1;e<0&&(e=0);var a=this.ChartBorder.GetBorder();if(a.DayBorder)return this.GetMultiDayXData(t,a);if(t<=a.LeftEx)return 0;if(t>=a.RightEx)return e;var i=a.RightEx-a.LeftEx;return(t-a.LeftEx)*(1*e/i)},this.DrawCustomHorizontal=function(){if(!this.IsMinSize)for(var t in this.CustomHorizontalInfo){var e=this.CustomHorizontalInfo[t];switch(e.Type){case 0:case 1:this.DrawCustomItem(e)}}},this.GetLeftExtendXFromIndex=function(t,e){var a=e.TotalCount-1,i=this.ChartBorder.GetBorder();return i.DayBorder?this.GetLeftExtendMultiDayXFromIndex(t,e,i):i.Left+this.ChartBorder.LeftExtendWidth*t/a},this.GetLeftExtendMultiDayXFromIndex=function(t,e,a){var i=a.DayBorder,r=i[e.Index],n=e.TotalCount-1,s=r.Left;return s+(r.LeftEx-s)*t/n},this.GetLeftExtendMultiDayXData=function(t,e,a){var i=a.DayBorder;for(var r in i){var n=i[r];if(t>=n.Left&&t<=n.LeftEx){var s=e[r].TotalCount-1,o=n.Left,h=n.LeftEx,l=h-o,u=1*s/l*(t-o);return{DayIndex:parseInt(r),DataIndex:u}}}},this.GetLeftExtendXData=function(t,e){var a=this.ChartBorder.GetBorder();if(a.DayBorder)return this.GetLeftExtendMultiDayXData(t,e,a);var i=e.TotalCount-1;i<0&&(i=0);var r=a.Left,n=a.LeftEx;return t<=r?0:t>=n?i:1*i/(n-r)*(t-r)},this.MoveXIndexLeft=function(t,e){if(Fr.Chart.Log("[MinuteFrame::MoveXIndexLeft] obj ",e),2==e.DataType){var a=e.IndexData.DayIndex,i=e.IndexData.DataIndex-t,r=-1;if(20==e.IndexData.Type)r=0;else if(10==e.IndexData.Type)r=1;else{if(30!=e.IndexData.Type)return!1;r=2}for(var n=a,s=r;n>=0;--n){for(var o=e.Data[n];s>=0;--s){var h=o[s];if(h.DayItem&&h.DayItem.Data){for(null==i&&(i=h.DayItem.Data.length-1);i>=0;--i){var l=h.DayItem.Data[i];if(l){if(10==h.Type){var u=this.MinuteCount*n+i;return e.Point.X=this.GetXFromIndex(u),e.Point.Y=this.GetYFromData(l.Close),e.IndexData.CursorIndex=u,e.IndexData.DayIndex=n,e.IndexData.DataIndex=i,e.IndexData.Type=h.Type,!0}if(20==h.Type){if(!he.IsNumber(l.Price))continue;return e.Point.X=this.GetLeftExtendXFromIndex(i,h.DayItem),e.Point.Y=this.GetLeftExtendYFromData(l.Price),e.IndexData.CursorIndex=-1,e.IndexData.DayIndex=n,e.IndexData.DataIndex=i,e.IndexData.Type=h.Type,!0}if(30==h.Type){if(!he.IsNumber(l.Price))continue;return e.Point.X=this.GetRightExtendXFromIndex(i,h.DayItem),e.Point.Y=this.GetRightExtendYFromData(l.Price),e.IndexData.CursorIndex=-1,e.IndexData.DayIndex=n,e.IndexData.DataIndex=i,e.IndexData.Type=h.Type,!0}}}i=null}}s=2}return!1}if(1==e.DataType){var a=e.IndexData.DayIndex,i=e.IndexData.DataIndex-t,r=-1;if(2==e.IndexData.Type)r=0;else if(1==e.IndexData.Type)r=1;else{if(3!=e.IndexData.Type)return!1;r=2}for(var n=r;n>=0;--n){var h=e.Data[n];if(h&&h.DayItem&&h.DayItem.Data){for(null==i&&(i=h.DayItem.Data.length-1);i>=0;--i){var l=h.DayItem.Data[i];if(l){if(1==h.Type){var u=i;return e.Point.X=this.GetXFromIndex(u),e.Point.Y=this.GetYFromData(l.Close),e.IndexData.CursorIndex=u,e.IndexData.DayIndex=0,e.IndexData.DataIndex=i,e.IndexData.Type=h.Type,!0}if(2==h.Type){if(!he.IsNumber(l.Price))continue;return e.Point.X=this.GetLeftExtendXFromIndex(i,h.DayItem),e.Point.Y=this.GetLeftExtendYFromData(l.Price),e.IndexData.CursorIndex=-1,e.IndexData.DayIndex=0,e.IndexData.DataIndex=i,e.IndexData.Type=h.Type,!0}if(3==h.Type){if(!he.IsNumber(l.Price))continue;return e.Point.X=this.GetRightExtendXFromIndex(i,h.DayItem),e.Point.Y=this.GetRightExtendYFromData(l.Price),e.IndexData.CursorIndex=-1,e.IndexData.DayIndex=0,e.IndexData.DataIndex=i,e.IndexData.Type=h.Type,!0}}}i=null}}}},this.MoveXIndexRight=function(t,e){if(Fr.Chart.Log("[MinuteFrame::MoveXIndexRight] obj ",e),2==e.DataType){var a=e.IndexData.DayIndex,i=e.IndexData.DataIndex+t,r=-1;if(20==e.IndexData.Type)r=0;else if(10==e.IndexData.Type)r=1;else{if(30!=e.IndexData.Type)return!1;r=2}for(var n=a,s=r;n<e.Data.length;++n){for(var o=e.Data[n];s<3;++s){var h=o[s];if(h.DayItem&&h.DayItem.Data){for(null==i&&(i=0);i<h.DayItem.Data.length;++i){var l=h.DayItem.Data[i];if(l){if(10==h.Type){var u=this.MinuteCount*n+i;return e.Point.X=this.GetXFromIndex(u),e.Point.Y=this.GetYFromData(l.Close),e.IndexData.CursorIndex=u,e.IndexData.DayIndex=n,e.IndexData.DataIndex=i,e.IndexData.Type=h.Type,!0}if(20==h.Type){if(!he.IsNumber(l.Price))continue;return e.Point.X=this.GetLeftExtendXFromIndex(i,h.DayItem),e.Point.Y=this.GetLeftExtendYFromData(l.Price),e.IndexData.CursorIndex=-1,e.IndexData.DayIndex=n,e.IndexData.DataIndex=i,e.IndexData.Type=h.Type,!0}if(30==h.Type){if(!he.IsNumber(l.Price))continue;return e.Point.X=this.GetRightExtendXFromIndex(i,h.DayItem),e.Point.Y=this.GetRightExtendYFromData(l.Price),e.IndexData.CursorIndex=-1,e.IndexData.DayIndex=n,e.IndexData.DataIndex=i,e.IndexData.Type=h.Type,!0}}}i=null}}s=0}return!1}if(1==e.DataType){var a=e.IndexData.DayIndex,i=e.IndexData.DataIndex+t,r=-1;if(2==e.IndexData.Type)r=0;else if(1==e.IndexData.Type)r=1;else{if(3!=e.IndexData.Type)return!1;r=2}for(var n=r;n<e.Data.length;++n){var h=e.Data[n];if(h.DayItem&&h.DayItem.Data){for(null==i&&(i=0);i<h.DayItem.Data.length;++i){var l=h.DayItem.Data[i];if(l){if(1==h.Type){var u=i;return e.Point.X=this.GetXFromIndex(u),e.Point.Y=this.GetYFromData(l.Close),e.IndexData.CursorIndex=u,e.IndexData.DayIndex=0,e.IndexData.DataIndex=i,e.IndexData.Type=h.Type,!0}if(2==h.Type){if(!he.IsNumber(l.Price))continue;return e.Point.X=this.GetLeftExtendXFromIndex(i,h.DayItem),e.Point.Y=this.GetLeftExtendYFromData(l.Price),e.IndexData.CursorIndex=-1,e.IndexData.DayIndex=0,e.IndexData.DataIndex=i,e.IndexData.Type=h.Type,!0}if(3==h.Type){if(!he.IsNumber(l.Price))continue;return e.Point.X=this.GetRightExtendXFromIndex(i,h.DayItem),e.Point.Y=this.GetRightExtendYFromData(l.Price),e.IndexData.CursorIndex=-1,e.IndexData.DayIndex=0,e.IndexData.DataIndex=i,e.IndexData.Type=h.Type,!0}}}i=null}}}},this.GetLeftExtendXValidData=function(t,e){if(this.ChartBorder.GetBorder().DayBorder){var a=this.GetLeftExtendXData(t,e.Data),i=parseInt(a.DataIndex.toFixed(0)),r=e.Data[a.DayIndex];if(i>=0&&i<r.Data.length){var n=r.Data[i];if(he.IsNumber(n.Price))return e.IndexData.DataIndex=i,!0}i<0?i=0:i>=r.Data.length&&(i=r.Data.length-1);for(var s=-1,o=i;o>=0;--o){var n=r.Data[o];if(he.IsNumber(n.Price)){s=o;break}}return!(s<0||(e.IndexData.DataIndex=s,e.IndexData.Point.X=this.GetLeftExtendXFromIndex(s,r),Fr.Chart.Log("[MinuteFrame::GetLeftExtendXValidData] DayIndex:"+e.IndexData.DayIndex+", Type:"+e.IndexData.Type+", x:"+t+"=>"+e.IndexData.Point.X+", index:"+i+"=>"+s),0))}var i=this.GetLeftExtendXData(t,e.Data);if((i=parseInt(i.toFixed(0)))>=0&&i<e.Data.Data.length){var n=e.Data.Data[i];if(he.IsNumber(n.Price))return e.IndexData.DataIndex=i,!0}i<0?i=0:i>=e.Data.Data.length&&(i=e.Data.Data.length-1);for(var s=-1,o=i;o>=0;--o){var n=e.Data.Data[o];if(he.IsNumber(n.Price)){s=o;break}}if(s<0)for(var o=i+1;o<e.Data.Data.length;++o){var n=e.Data.Data[o];if(he.IsNumber(n.Price)){s=o;break}}return!(s<0)&&(e.IndexData.DataIndex=s,e.IndexData.Point.X=this.GetLeftExtendXFromIndex(s,e.Data),Fr.Chart.Log("[MinuteFrame::GetLeftExtendXValidData] DayIndex:"+e.IndexData.DayIndex+", Type:"+e.IndexData.Type+", x:"+t+"=>"+e.IndexData.Point.X+", index:"+i+"=>"+s),!0)},this.GetRightExtendXValidData=function(t,e){},this.GetLeftExtendYFromData=function(t,e,a){if(!a||!a.Range)return this.GetYFromData(t,e);var i=a.Range,r=this.ChartBorder.GetBorder(),n=r.BottomEx-r.TopEx,s=n*(t-i.Min)/(i.Max-i.Min);return r.BottomEx-s},this.GetLeftExtendYData=function(t,e,a){if(!a||!a.Range)return this.GetYData(t,e);var i=a.Range,r=this.ChartBorder.GetBorder(),n=r.BottomEx-r.TopEx;return(r.BottomEx-t)/n*(i.Max-i.Min)+i.Min},this.GetRightExtendMultiDayXFromIndex=function(t,e,a){var i=a.DayBorder,r=i[e.Index],n=e.TotalCount-1,s=r.RightEx;return s+(r.Right-s)*t/n},this.GetRightExtendXFromIndex=function(t,e){var a=e.TotalCount-1,i=this.ChartBorder.GetBorder();return i.DayBorder?this.GetRightExtendMultiDayXFromIndex(t,e,i):i.RightEx+this.ChartBorder.RightExtendWidth*t/a},this.GetRightExtendYFromData=function(t,e,a){return this.GetLeftExtendYFromData(t,e,a)},this.GetRightExtendYData=function(t,e,a){return a&&a.Range?this.GetLeftExtendYData(t,e,a):this.GetYData(t,e)},this.GetRightExtendMultiDayXData=function(t,e,a){var i=a.DayBorder;for(var r in i){var n=i[r];if(t>=n.RightEx&&t<=n.Right){var s=e[r].TotalCount-1,o=n.RightEx,h=n.Right,l=h-o,u=1*s/l*(t-o);return{DayIndex:parseInt(r),DataIndex:u}}}},this.GetRightExtendXData=function(t,e){var a=this.ChartBorder.GetBorder();if(a.DayBorder)return this.GetRightExtendMultiDayXData(t,e,a);var i=e.TotalCount-1;i<0&&(i=0);var r=a.RightEx,n=a.Right;return t<=r?0:t>=n?i:1*i/(n-r)*(t-r)}}function F(){this.newMethod=w,this.newMethod(),delete this.newMethod,this.ClassName="MinuteHScreenFrame",this.IsHScreen=!0,this.DrawTitleBG=function(){if(!(this.ChartBorder.TitleHeight<=0)){var t=this.ChartBorder.GetHScreenBorder(),e=D(t.RightEx),a=D(t.Top),i=D(t.Bottom),r=this.ChartBorder.TitleHeight,n=i-a;this.Canvas.fillStyle=this.TitleBGColor,this.Canvas.fillRect(e,a,r,n)}},this.DrawToolbar=function(){},this.DrawBeforeDataBG=function(){if(!(this.ChartBorder.LeftExtendWidth<10&&this.ChartBorder.RightExtendWidth<10)){var t=this.ChartBorder.GetHScreenBorder(),e=D(t.Left),a=D(t.Right);if(this.Canvas.fillStyle=this.BeforeBGColor,this.ChartBorder.LeftExtendWidth>10){var i=D(t.Top),r=D(t.TopEx),n=a-e,s=r-i;this.Canvas.fillRect(e,i,n,s)}if(this.ChartBorder.RightExtendWidth>10){var i=t.BottomEx,r=t.Bottom,n=a-e,s=r-i;this.Canvas.fillRect(e,i,n,s)}}},this.GetYData=function(t){var e=this.ChartBorder.GetHScreenBorder();if(t<e.LeftEx)return this.HorizontalMin;if(t>e.RightEx)return this.HorizontalMax;var a=e.RightEx-e.LeftEx;return(t-e.LeftEx)/a*(this.HorizontalMax-this.HorizontalMin)+this.HorizontalMin},this.GetXData=function(t){var e=this.ChartBorder.GetHScreenBorder(),a=this.XPointCount-1;if(a<0&&(a=0),t<=e.TopEx)return 0;if(t>=e.BottomEx)return a;var i=e.BottomEx-e.TopEx;return(t-e.TopEx)*(1*a/i)},this.GetXFromIndex=function(t){var e=this.XPointCount-1,a=this.ChartBorder.GetHScreenBorder();if(1==e)return 0==t?a.TopEx:a.BottomEx;if(e<=0)return a.TopEx;if(t>=e)return a.BottomEx;var i=a.BottomEx-a.TopEx;return a.TopEx+i*t/e},this.GetYFromData=function(t){var e=this.ChartBorder.GetHScreenBorder();if(t<=this.HorizontalMin)return e.LeftEx;if(t>=this.HorizontalMax)return e.RightEx;var a=(e.RightEx-e.LeftEx)*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return e.LeftEx+a},this.DrawVolTitle=function(t){if(an.IsShowMinuteVolTitle(t)&&1==this.Identify){var e=c(),a=this.ChartBorder.GetRight()-2*e,i=this.ChartBorder.GetTopEx()+2*e,r=a,n=i;this.Canvas.save(),this.Canvas.translate(r,n),this.Canvas.rotate(90*Math.PI/180);var s=this.YInsideOffset;if(this.Canvas.textAlign="left",this.Canvas.textBaseline="top",$r.Minute.VolBarColor||$r.Minute.VolTitleColor){$r.Minute.VolBarColor?this.Canvas.fillStyle=$r.Minute.VolBarColor:this.Canvas.fillStyle=$r.Minute.VolTitleColor;var o=this.YSplitOperator.LanguageID,h=en.GetText("MVol-Vol",o);this.Canvas.fillText(h,s,0),s+=this.Canvas.measureText(h).width,s+=6*c()}this.IsShowPositionTitle&&(h=en.GetText("MVol-Position",o),this.Canvas.fillStyle=$r.Minute.PositionColor,this.Canvas.fillText(h,s,0)),this.Canvas.restore()}},this.DrawHorizontal=function(){for(var t=this.ChartBorder.GetHScreenBorder(),e=t.Top,a=t.Bottom,i=t.Left,r=t.Right,n=this.ChartBorder.Top,s=this.ChartBorder.Bottom,o=null,h=this.HorizontalInfo.length-1;h>=0;--h){var l=this.HorizontalInfo[h],u=this.GetYFromData(l.Value);if(!(null!=u&&Math.abs(u-o)<this.MinYDistance)){if(this.Canvas.strokeStyle=l.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(D(u),e),this.Canvas.lineTo(D(u),a),this.Canvas.stroke(),u>=r-2)this.Canvas.textBaseline="top",u=r;else if(u<=i+2){if(this.Canvas.textBaseline="bottom",null!=(u=i)&&Math.abs(u-o)<2*this.MinYDistance)continue}else this.Canvas.textBaseline="middle";if(null!=l.Message[0]&&n>10){null!=l.Font&&(this.Canvas.font=l.Font),this.Canvas.fillStyle=l.TextColor,this.Canvas.textAlign="right";var c=u,d=e;this.Canvas.save(),this.Canvas.translate(c,d),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(l.Message[0],-2,0),this.Canvas.restore()}if(null!=l.Message[1]&&s>10){null!=l.Font&&(this.Canvas.font=l.Font),this.Canvas.fillStyle=l.TextColor,this.Canvas.textAlign="left";var c=u,d=a;this.Canvas.save(),this.Canvas.translate(c,d),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(l.Message[1],2,0),this.Canvas.restore()}o=u}}},this.DrawInsideClientHorizontal=function(){for(var t=this.GetBorder(),e=t.Left,a=t.Right,i=t.BottomEx,r=t.TopEx,n=(c(),null),s=this.HorizontalInfo.length-1;s>=0;--s){var o=this.HorizontalInfo[s];if(o&&o.Message[2]&&o.Message[3]){var h=this.GetYFromData(o.Value);if(!(null!=h&&null!=n&&Math.abs(h-n)<this.MinYDistance)){if(h>=a-2)this.Canvas.textBaseline="top",h=a;else if(h<=e+2){if(this.Canvas.textBaseline="bottom",null!=(h=e)&&Math.abs(h-n)<2*this.MinYDistance)continue}else this.Canvas.textBaseline="middle";if(o.Message[2]){null!=o.Font&&(this.Canvas.font=o.Font),this.Canvas.fillStyle=o.TextColor,this.Canvas.textAlign="left";var l=h,u=r;this.Canvas.save(),this.Canvas.translate(l,u),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(o.Message[2],2,0),this.Canvas.restore()}if(o.Message[3]){null!=o.Font&&(this.Canvas.font=o.Font),this.Canvas.fillStyle=o.TextColor,this.Canvas.textAlign="right";var l=h,u=i;this.Canvas.save(),this.Canvas.translate(l,u),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(o.Message[3],-2,0),this.Canvas.restore()}n=h}}}},this.DrawVertical=function(){var t=this.ChartBorder.GetHScreenBorder(),e=t.Left,a=t.Right,i=t.Bottom,r=null;for(var n in this.VerticalInfo){var s=this.GetXFromIndex(this.VerticalInfo[n].Value);if(s>i)break;if(!(null!=r&&Math.abs(s-r)<this.MinXDistance)){if(this.Canvas.strokeStyle=this.VerticalInfo[n].LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(e,D(s)),this.Canvas.lineTo(a,D(s)),this.Canvas.stroke(),null!=this.VerticalInfo[n].Message[0]){null!=this.VerticalInfo[n].Font&&(this.Canvas.font=this.VerticalInfo[n].Font),this.Canvas.fillStyle=this.VerticalInfo[n].TextColor;var o=this.Canvas.measureText(this.VerticalInfo[n].Message[0]).width;s<o/2?(this.Canvas.textAlign="left",this.Canvas.textBaseline="top"):s+o/2>=this.ChartBorder.GetChartHeight()?(this.Canvas.textAlign="right",this.Canvas.textBaseline="top"):(this.Canvas.textAlign="center",this.Canvas.textBaseline="top");var h=e,l=s;this.Canvas.save(),this.Canvas.translate(h,l),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(this.VerticalInfo[n].Message[0],0,0),this.Canvas.restore()}r=s}}},this.DrawInsideHorizontal=function(){if(!this.IsMinSize&&(!1!==this.IsShowYText[0]||!1!==this.IsShowYText[1])){this.DrawInsideClientHorizontal();var t=this.ChartBorder.GetHScreenBorder(),e=t.Left,a=t.RightEx,i=t.Top,r=t.Bottom,n=this.ChartBorder.Top,s=this.ChartBorder.Bottom,o=(this.ChartBorder.TitleHeight,c());if(n<10*o&&!0===this.IsShowYText[0]||s<10*o&&!0===this.IsShowYText[1])for(var o=c(),h=null,l=null,u=this.HorizontalInfo.length-1;u>=0;--u){var d=this.HorizontalInfo[u],f=this.GetYFromData(d.Value);if(!(null!=f&&null!=h&&Math.abs(f-h)<this.MinYDistance)){if(null!=d.Message[0]&&n<10*o&&!0===this.IsShowYText[0]){null!=d.Font&&(this.Canvas.font=d.Font),this.Canvas.fillStyle=d.TextColor,this.Canvas.textAlign="left",this.Canvas.textBaseline=f>=a-2?"top":f<=e+2?"bottom":"middle";var m=(this.Canvas.textBaseline,this.Canvas.textAlign,this.Canvas.font,d.Message[0],f),C=i;this.Canvas.save(),this.Canvas.translate(m,C),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(d.Message[0],2*o,0),this.Canvas.restore(),(null==l||l<m)&&(this.YInsideOffset=this.Canvas.measureText(d.Message[0]).width+4*c(),l=m)}if(null!=d.Message[1]&&s<10*o&&!0===this.IsShowYText[1]){null!=d.Font&&(this.Canvas.font=d.Font),this.Canvas.fillStyle=d.TextColor,this.Canvas.textAlign="right",this.Canvas.textBaseline=f>=a-2?"top":f<=e+2?"bottom":"middle";var p=this.Canvas.measureText(d.Message[1]).width,m=(this.Canvas.textBaseline,this.Canvas.textAlign,this.Canvas.font,d.Message[1],f),C=r;this.Canvas.save(),this.Canvas.translate(m,C),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(d.Message[1],-2*o,0),this.Canvas.restore()}h=f}}}},this.GetLeftExtendXFromIndex=function(t,e){var a=e.TotalCount-1;return this.ChartBorder.GetHScreenBorder().Top+this.ChartBorder.LeftExtendWidth*t/a},this.GetLeftExtendXData=function(t,e){var a=e.TotalCount-1;a<0&&(a=0);var i=this.ChartBorder.GetHScreenBorder(),r=i.Top,n=i.TopEx;return t<=r?0:t>=n?a:1*a/(n-r)*(t-r)},this.GetLeftExtendYFromData=function(t,e,a){if(!a||!a.Range)return this.GetYFromData(t,e);var i=a.Range,r=this.ChartBorder.GetHScreenBorder(),n=r.RightEx-r.LeftEx,s=n*(t-i.Min)/(i.Max-i.Min);return r.LeftEx+s},this.GetLeftExtendYData=function(t,e,a){if(!a||!a.Range)return this.GetYData(y,e);var i=a.Range,r=this.ChartBorder.GetHScreenBorder(),n=r.RightEx-r.LeftEx;return(t-r.LeftEx)/n*(i.Max-i.Min)+i.Min},this.GetRightExtendXFromIndex=function(t,e){var a=e.TotalCount-1;return this.ChartBorder.GetHScreenBorder().BottomEx+this.ChartBorder.RightExtendWidth*t/a},this.GetRightExtendXData=function(t,e){var a=e.TotalCount-1;a<0&&(a=0);var i=this.ChartBorder.GetHScreenBorder(),r=i.BottomEx,n=i.Bottom;return t<=r?0:t>=n?a:1*a/(n-r)*(t-r)},this.GetRightExtendYFromData=function(t,e,a){return a&&a.Range?this.GetLeftExtendYFromData(t,e,a):this.GetYFromData(t,e)}}function E(){this.newMethod=w,this.newMethod(),delete this.newMethod,this.ClassName="OverlayMinuteFrame",this.IsShow=!0,this.IsShareY=!1,this.IsCalculateYMaxMin=!0,this.Draw=function(){this.SplitXYCoordinate(),this.IsShow,this.SizeChange=!1,this.XYSplit=!1},this.GetScaleTextWidth=function(){return{TextWidth:0}},this.SplitXYCoordinate=function(){if(0!=this.XYSplit)if(this.IsShareY){this.HorizontalMax=this.MainFrame.HorizontalMax,this.HorizontalMin=this.MainFrame.HorizontalMin,this.HorizontalInfo=[];for(var t in this.MainFrame.HorizontalInfo){var e=this.MainFrame.HorizontalInfo[t];this.HorizontalInfo.push(e)}}else null!=this.YSplitOperator&&this.YSplitOperator.Operator()}}function A(){this.newMethod=F,this.newMethod(),delete this.newMethod,this.ClassName="OverlayMinuteHScreenFrame",this.IsShow=!0,this.Draw=function(){this.SplitXYCoordinate(),this.IsShow,this.SizeChange=!1,this.XYSplit=!1},this.SplitXYCoordinate=function(){if(0!=this.XYSplit)if(this.IsShareY){this.HorizontalMax=this.MainFrame.HorizontalMax,this.HorizontalMin=this.MainFrame.HorizontalMin,this.HorizontalInfo=[];for(var t in this.MainFrame.HorizontalInfo){var e=this.MainFrame.HorizontalInfo[t];this.HorizontalInfo.push(e)}}else null!=this.YSplitOperator&&this.YSplitOperator.Operator()}}function N(){this.newMethod=b,this.newMethod(),delete this.newMethod,this.ClassName="KLineFrame",this.ToolbarID=C(),this.ModifyIndex=!0,this.ChangeIndex=!0,this.CloseIndex=!0,this.OverlayIndex=!1,this.ModifyIndexEvent,this.ChangeIndexEvent,this.ToolbarRect=null,this.ReDrawToolbar=!1,this.LastCalculateStatus={Width:0,XPointCount:0},this.CustomHorizontalInfo=[],this.IsDrawTitleBG=!1,this.CustomVerticalInfo=[],this.DrawCustomVerticalEvent,this.RightSpaceCount=0,this.Logarithmic=null,this.CustomToolbar=[],this.DrawToolbar=function(){if(void 0!==wr.default&&this.ChartBorder.UIElement&&this.ChartBorder.UIElement.parentNode){var t=document.getElementById(this.ToolbarID);if(!t||0!=this.SizeChange||0!=this.ReDrawToolbar){if(t||(t=document.createElement("div"),t.className="klineframe-toolbar",t.id=this.ToolbarID,t.oncontextmenu=function(){return!1},t.setAttribute("identify",this.Identify.toString()),this.ChartBorder.UIElement.parentNode.appendChild(t)),!(this.ModifyIndex||this.ChangeIndex||this.OverlayIndex||this.CloseIndex||he.IsNonEmptyArray(this.CustomToolbar)))return void("none"!=t.style.display&&(t.style.display="none"));var e=c(),a=parseInt(this.ChartBorder.UIElement.parentElement.style.width.replace("px","")),i=(parseInt(this.ChartBorder.UIElement.parentElement.style.height.replace("px","")),this.ChartBorder.GetTitleHeight()),r=a-this.ChartBorder.Right/e-100,n=this.ChartBorder.GetTop()/e;if(!this.ToolbarRect||this.ToolbarRect.Left!=r||this.ToolbarRect.Top!=n||100!=this.ToolbarRect.Width||this.ToolbarRect.Height!=i/e){this.ToolbarRect={Left:r,Top:n,Width:100,Height:i/e};var s="<span class='index_param icon iconfont icon-index_param' id='modifyindex' style='cursor:pointer;margin-left:2px;margin-right:2px;' title='调整指标参数'></span><span class='index_change icon iconfont icon-change_index' id='changeindex' style='cursor:pointer;margin-left:2px;margin-right:2px;' title='切换指标'></span><span class='index_overlay icon iconfont icon-overlay_index' id='overlayindex' style='cursor:pointer;margin-left:2px;margin-right:2px;' title='叠加指标'></span>";if(0!==this.Identify&&this.CloseIndex&&(s+="<span class='index_close icon iconfont icon-close' id='closeindex' style='cursor:pointer;margin-left:2px;margin-right:2px;' title='关闭指标窗口'></span>"),he.IsNonEmptyArray(this.CustomToolbar))for(var o=0;o<this.CustomToolbar.length;++o){var h=this.CustomToolbar[o];s+=h.Html}t.style.left=r+"px",t.style.top=n+"px",t.style.width="100px",t.style.height=i/e+"px",t.innerHTML=s;this.ChartBorder.UIElement.JSChartContainer,this.Identify;if(this.ModifyIndex?"function"==typeof this.ModifyIndexEvent&&(0,wr.default)("#"+t.id+" .index_param").click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify},this.ModifyIndexEvent):(0,wr.default)("#"+t.id+" .index_param").hide(),this.ChangeIndex?"function"==typeof this.ChangeIndexEvent&&(0,wr.default)("#"+t.id+" .index_change").click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify,IsOverlay:!1},this.ChangeIndexEvent):(0,wr.default)("#"+t.id+" .index_change").hide(),this.OverlayIndex?(0,wr.default)("#"+t.id+" .index_overlay").click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify,IsOverlay:!0},this.ChangeIndexEvent):(0,wr.default)("#"+t.id+" .index_overlay").hide(),(0,wr.default)("#"+t.id+" .index_close").click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify},function(t){var e=t.data.Chart,a=t.data.Identify;e.RemoveIndexWindow(a)}),he.IsNonEmptyArray(this.CustomToolbar))for(var o=0;o<this.CustomToolbar.length;++o){var h=this.CustomToolbar[o];(0,wr.default)("#"+h.ID).click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify,ID:h.ID},h.Click)}t.style.display="block"}}}},this.DrawFrame=function(){this.IsMinSize||(this.SplitXYCoordinate(),1==this.SizeChange&&(this.CalculateDataWidth(),this.Logarithmic&&this.SplitLogarithmicXYCoordinate()),this.DrawDepthMapCallback&&this.DrawDepthMapCallback(),this.DrawTitleBG(),this.DrawHorizontal(),this.DrawVertical()),1!=this.SizeChange&&1!=this.ReDrawToolbar||(this.DrawToolbar(),this.ReDrawToolbar=!1)},this.GetXFromIndex=function(t,e){if(!1===e)if(t>=0)for(var a=this.ChartBorder.GetLeft()+$r.FrameLeftMargin+this.DistanceWidth/2+this.DataWidth/2,i=1;i<=t;++i)a+=this.DistanceWidth+this.DataWidth;else for(var a=this.ChartBorder.GetLeft()-(this.DistanceWidth/2+this.DataWidth+this.DistanceWidth),r=Math.abs(t),i=1;i<r;++i)a-=this.DistanceWidth+this.DataWidth;else{t<0&&(t=0),t>this.xPointCount-1&&(t=this.xPointCount-1);for(var a=this.ChartBorder.GetLeft()+$r.FrameLeftMargin+this.DistanceWidth/2+this.DataWidth/2,i=1;i<=t;++i)a+=this.DistanceWidth+this.DataWidth}return a},this.GetXData=function(t,e){var a=this.DistanceWidth,i=this.DataWidth,r=this.ChartBorder.GetLeft()+$r.FrameLeftMargin;if(0==e){if(t<this.ChartBorder.GetLeft()){for(var n=-1,s=this.ChartBorder.GetLeft()-(a/2+i+a);n>-1e4&&!(s<=t);)s-=i+a,--n;return n}for(var n=0,s=r+a/2+i+a;n<1e4&&!(s>=t);)s+=i+a,++n;return n}if(t<=this.ChartBorder.GetLeft())return 0;if(t>=this.ChartBorder.GetRight())return this.XPointCount-1;for(var o=this.ChartBorder.GetRight()-$r.FrameRightMargin,n=0,s=r+a/2+i+a;s<o&&n<1e4&&n+1<this.XPointCount&&!(s>=t);)s+=i+a,++n;return n},this.CalculateDataWidth=function(){if(!(this.XPointCount<2)){var t=this.GetFrameWidth()-$r.FrameMargin;if(this.ZoomIndex>=0&&this.LastCalculateStatus.Width==t&&this.LastCalculateStatus.XPointCount==this.XPointCount){var e=this.DistanceWidth/2+$r.FrameLeftMargin+(this.DataWidth+this.DistanceWidth)*(this.XPointCount-1);this.DataWidth,this.DistanceWidth,this.XPointCount;if(e<=t)return}this.LastCalculateStatus.Width=t,this.LastCalculateStatus.XPointCount=this.XPointCount;for(var a=0;a<Ur.length;++a)if((Ur[a][0]+Ur[a][1])*this.XPointCount<t)return this.ZoomIndex=a,this.DataWidth=Ur[a][0],this.DistanceWidth=Ur[a][1],this.TrimKLineDataWidth(t),void Fr.Chart.Log("[KLineFrame::CalculateDataWidth] ZOOM_SEED, DataWidth, DistanceWidth, XPointCount",Ur[this.ZoomIndex],this.DataWidth,this.DistanceWidth,this.XPointCount);this.ZoomIndex=Ur.length-1,this.DataWidth=t/this.XPointCount,this.DistanceWidth=0}},this.OnSize=function(t){for(var e=this.GetFrameWidth()-$r.FrameMargin,a=0,i=this.DistanceWidth/2+$r.FrameLeftMargin+(this.DataWidth+this.DistanceWidth);i<e;i+=this.DataWidth+this.DistanceWidth,++a);return t.CurCount=this.XPointCount,t.CalcCount=a,t.DataWidth=this.DataWidth,t.DistanceWidth=this.DistanceWidth,t.Changed=!1,this.LastCalculateStatus.Width=e,t.CurCount==t.CalcCount?t:(this.XPointCount=a,this.LastCalculateStatus.XPointCount=this.XPointCount,this.Data&&(this.Data.DataOffset+=t.CurCount-t.CalcCount,this.Data.DataOffset<0&&(this.Data.DataOffset=0),t.Changed=!0),t)},this.SetDataWidth=function(t){var e=Ur.length-1;for(var a in Ur){if(Ur[a][0]<=t){e=parseInt(a)-1;break}}this.ZoomIndex=e,this.DataWidth=Ur[this.ZoomIndex][0],this.DistanceWidth=Ur[this.ZoomIndex][1];for(var i=this.GetFrameWidth()-$r.FrameMargin,r=0,n=this.DistanceWidth/2+$r.FrameLeftMargin+(this.DataWidth+this.DistanceWidth);n<=i;n+=this.DataWidth+this.DistanceWidth,++r);return this.XPointCount=r,this.LastCalculateStatus.XPointCount=this.XPointCount,this.LastCalculateStatus.Width=i,{XPointCount:this.XPointCount,DataWidth:this.DataWidth,DistanceWidth:this.DistanceWidth}},this.TrimKLineDataWidth=function(t){var e=Ur[this.ZoomIndex][0],a=Ur[this.ZoomIndex][1];if(1==e&&0==a)return void(this.DataWidth=t/this.XPointCount);for(;;){if((this.DistanceWidth+this.DataWidth)*this.XPointCount+this.DistanceWidth>t){this.DistanceWidth-=.01;break}this.DistanceWidth+=.01}},this.IsOverlayMaxMin=function(t){if(!this.ChartKLine)return!1;if(!this.ChartKLine.Max||!this.ChartKLine.Min)return!1;var e=this.Canvas.measureText(t.Text.Value).width+4;"right"===t.Text.TextAlign&&(t.X-=e);var a=this.ChartKLine.Max,i=this.ChartKLine.Min,r=!1,n=!1;if(a.X>=t.X&&a.X<=t.X+e){var s=a.Y+20,o=a.Y-20;(s>=t.Y-20&&s<=t.Y+20||o>=t.Y-20&&o<=t.Y+20)&&(r=!0)}if(1==r)return!0;if(i.X>=t.X&&i.X<=t.X+e){var s=i.Y+20,o=i.Y-20;(s>=t.Y-20&&s<=t.Y+20||o>=t.Y-20&&o<=t.Y+20)&&(n=!0)}return r||n},this.SplitXYCoordinate=function(){0!=this.XYSplit&&(null!=this.YSplitOperator&&this.YSplitOperator.Operator(),null!=this.XSplitOperator&&this.XSplitOperator.Operator(),this.Logarithmic&&this.SplitLogarithmicXYCoordinate())},this.SplitLogarithmicXYCoordinate=function(){for(var t=this.Logarithmic.Up,e=this.Logarithmic.Down,a=0,i=0,r=Math.max(t.length,e.length),n=[],s=0;s<r;++s)n[s]=2*s;for(var s=0,o=n.length-1;s<t.length;++s,--o){var h=t[s];h.LogHeight=n[o],a+=h.LogHeight,++i}for(var s=0,o=n.length-1;s<e.length;++s,--o){var h=e[s];h.LogHeight=n[o],a+=h.LogHeight,++i}var l=2*c(),u=this.ChartBorder.GetTopEx(),d=this.ChartBorder.GetBottomEx(),f=d-u,m=(f-a*l)/i;if(m<0&&(m=0,l=f/a),1==this.CoordinateType){for(var C=u,s=e.length-1;s>=0;--s){var h=e[s];h.Height=m+l*h.LogHeight,h.Top=C,h.Bottom=h.Top+h.Height,C=h.Bottom}for(var p=d,s=t.length-1;s>=0;--s){var h=t[s];h.Height=m+l*h.LogHeight,h.Bottom=p,h.Top=p-h.Height,p=h.Top}}else{for(var C=u,s=t.length-1;s>=0;--s){var h=t[s];h.Height=m+l*h.LogHeight,h.Top=C,h.Bottom=h.Top+h.Height,C=h.Bottom}for(var p=d,s=e.length-1;s>=0;--s){var h=e[s];h.Height=m+l*h.LogHeight,h.Bottom=p,h.Top=p-h.Height,p=h.Top}}Fr.Chart.Log("[KLineFrame::SplitLogarithmicXYCoordinate]",this.Logarithmic)},this.GetYLogarithmicFromData=function(t,e){if(1==this.CoordinateType){if(t<=this.HorizontalMin)return this.ChartBorder.GetTopEx();if(t>=this.HorizontalMax)return this.ChartBorder.GetBottomEx();if(t>this.Logarithmic.OpenPrice){var a=this.Logarithmic.Up;for(var i in a){var r=a[i];if(t>=r.Start&&t<=r.End){var n=r.Bottom-r.Top,s=n*(t-r.Start)/(r.End-r.Start);return r.Top+s}}}else{var o=this.Logarithmic.Down;for(var i in o){var r=o[i];if(t>=r.Start&&t<=r.End){var n=r.Bottom-r.Top,s=n*(t-r.Start)/(r.End-r.Start);return r.Top+s}}}}else{if(t<=this.HorizontalMin)return this.ChartBorder.GetBottomEx();if(t>=this.HorizontalMax)return this.ChartBorder.GetTopEx();if(t>this.Logarithmic.OpenPrice){var a=this.Logarithmic.Up;for(var i in a){var r=a[i];if(t>=r.Start&&t<=r.End){var n=r.Bottom-r.Top,s=n*(t-r.Start)/(r.End-r.Start);return r.Bottom-s}}}else{var o=this.Logarithmic.Down;for(var i in o){var r=o[i];if(t>=r.Start&&t<=r.End){var n=r.Bottom-r.Top,s=n*(t-r.Start)/(r.End-r.Start);return r.Bottom-s}}}}},this.GetYLogarithmicData=function(t){if(1==this.CoordinateType){if(t<this.ChartBorder.GetTopEx())return this.HorizontalMin;if(t>this.ChartBorder.GetBottomEx())return this.HorizontalMax;var e=this.Logarithmic.Up;for(var a in e){var i=e[a];if(t>=i.Top&&t<=i.Bottom)return(t-i.Top)/i.Height*(i.End-i.Start)+i.Start}var r=this.Logarithmic.Down;for(var a in r){var i=r[a];if(t>=i.Top&&t<=i.Bottom)return(t-i.Top)/i.Height*(i.End-i.Start)+i.Start}}else{if(t<this.ChartBorder.GetTopEx())return this.HorizontalMax;if(t>this.ChartBorder.GetBottomEx())return this.HorizontalMin;var e=this.Logarithmic.Up;for(var a in e){var i=e[a];if(t>=i.Top&&t<=i.Bottom)return(i.Bottom-t)/i.Height*(i.End-i.Start)+i.Start}var r=this.Logarithmic.Down;for(var a in r){var i=r[a];if(t>=i.Top&&t<=i.Bottom)return(i.Bottom-t)/i.Height*(i.End-i.Start)+i.Start}}},this.CalculateCount=function(t){var e=this.GetFrameWidth()-$r.FrameMargin;return parseInt(e/(Ur[t][0]+Ur[t][1]))},this.ZoomUp=function(t){if(this.ZoomIndex<=0)return!1;if(this.Data.DataOffset<0)return!1;var e=this.Data.Data.length,a=e+this.RightSpaceCount,i=0,r=this.Data.DataOffset+this.XPointCount-1,n=this.Data.DataOffset+t.Index;r>=e&&(i=r-(this.Data.Data.length-1),r=this.Data.Data.length-1,i>this.RightSpaceCount&&(i=this.RightSpaceCount));var s=this.CalculateCount(this.ZoomIndex-1);Fr.Chart.Log("[KLineFrame::ZoomUp] old status. XPointCount="+s+" ZoomIndex="+this.ZoomIndex+" DataCount= "+this.Data.Data.length+" rightSpaceCount="+i);var o=!1;if(--this.ZoomIndex,1==t.IsLockRight){var h=this.Data.DataOffset+this.XPointCount;if(s>h)s=h,this.XPointCount=s,this.Data.DataOffset=0;else{var l=r-(s-i)+1;this.XPointCount=s,this.Data.DataOffset=l,this.Data.DataOffset<0&&(this.Data.DataOffset=0)}}else if(s>=a)this.Data.DataOffset=0,this.XPointCount=s,o=!0,Fr.Chart.Log("[KLineFrame::ZoomUp] Show all data. XPointCount="+s+" ZoomIndex="+this.ZoomIndex+" DataCount= "+e);else{var l=r-(s-i)+1;if(1==t.ZoomType){var u=this.XPointCount-s+1,c=parseInt(t.Index/this.XPointCount*u),d=this.Data.DataOffset+c;d<e&&(l=this.Data.DataOffset+c)}this.XPointCount=s,this.Data.DataOffset=l,this.Data.DataOffset<0&&(this.Data.DataOffset=0),Fr.Chart.Log("[KLineFrame::ZoomUp] calculate. XPointCount="+s+" ZoomIndex="+this.ZoomIndex+" DataCount= "+e+" DataOffset="+this.Data.DataOffset)}if(this.DataWidth=Ur[this.ZoomIndex][0],this.DistanceWidth=Ur[this.ZoomIndex][1],!o){var f=this.GetFrameWidth()-$r.FrameMargin;this.TrimKLineDataWidth(f)}return this.LastCalculateStatus.XPointCount=this.XPointCount,t.Index=n-this.Data.DataOffset,!0},this.XCoordinateZoom=function(t){var e=this.XPointCount;if(t){if(this.ZoomIndex<=0)return!1;if(this.Data.DataOffset<0)return!1;var a=this.ZoomIndex-1,i=this.CalculateCount(a),r=this.Data.Data.length,n=e-i;if(n<=0)return!1;this.Data.DataOffset+=n,this.Data.DataOffset>r&&(this.Data.DataOffset=0)}else{if(this.ZoomIndex+1>=Ur.length)return!1;if(this.Data.DataOffset<0)return!1;var a=this.ZoomIndex+1,i=this.CalculateCount(a),n=i-e;this.Data.DataOffset-=n,this.Data.DataOffset<0&&(this.Data.DataOffset=0)}this.XPointCount=i,this.ZoomIndex=a,this.DataWidth=Ur[this.ZoomIndex][0],this.DistanceWidth=Ur[this.ZoomIndex][1];var s=this.GetFrameWidth()-$r.FrameMargin;return this.TrimKLineDataWidth(s),this.LastCalculateStatus.XPointCount=this.XPointCount,!0},this.ZoomDown=function(t){if(this.ZoomIndex+1>=Ur.length)return!1;if(this.Data.DataOffset<0)return!1;if(this.Data.DataOffset<=0&&1==t.IsLockRight)return!1;var e=this.Data.Data.length,a=e+this.RightSpaceCount,i=0,r=this.Data.DataOffset+this.XPointCount-1;r>=this.Data.Data.length&&(i=r-(this.Data.Data.length-1),r=this.Data.Data.length-1,i>this.RightSpaceCount&&(i=this.RightSpaceCount));var n=this.CalculateCount(this.ZoomIndex+1),s=this.Data.DataOffset+t.Index;Fr.Chart.Log("[KLineFrame::ZoomDown] old status. XPointCount="+n+" ZoomIndex="+this.ZoomIndex+" DataCount= "+this.Data.Data.length+" lastCursorIndex="+s+" rightSpaceCount="+i);var o=!1;if(++this.ZoomIndex,1==t.IsLockRight){var h=this.Data.DataOffset+this.XPointCount;if(n>h)n=h,this.XPointCount=n,this.Data.DataOffset=0;else{var l=r-(n-i)+1;this.XPointCount=n,this.Data.DataOffset=l,this.Data.DataOffset<0&&(this.Data.DataOffset=0)}}else if(n>=a)this.XPointCount=n,this.Data.DataOffset=0,o=!0,Fr.Chart.Log("[KLineFrame::ZoomDown] Show all data. XPointCount="+n+" ZoomIndex="+this.ZoomIndex+" DataCount= "+e);else{var l=r-(n-i)+1;if(1==t.ZoomType){var u=n-this.XPointCount+1,c=parseInt(t.Index/this.XPointCount*u),l=this.Data.DataOffset-c;l+(n-this.RightSpaceCount)>=e&&(l=this.Data.DataOffset-u)}this.XPointCount=n,this.Data.DataOffset=l,this.Data.DataOffset<0&&(this.Data.DataOffset=0),Fr.Chart.Log("[KLineFrame::ZoomDown] calculate. XPointCount="+n+" ZoomIndex="+this.ZoomIndex+" DataCount= "+e+" DataOffset="+this.Data.DataOffset)}if(this.DataWidth=Ur[this.ZoomIndex][0],this.DistanceWidth=Ur[this.ZoomIndex][1],!o){var d=this.GetFrameWidth()-$r.FrameMargin;this.TrimKLineDataWidth(d)}return this.LastCalculateStatus.XPointCount=this.XPointCount,t.Index=s-this.Data.DataOffset,!0},this.GetFrameWidth=function(){if(this.IsHScreen){var t=this.ChartBorder.GetHScreenBorder();return t.BottomEx-t.TopEx}var t=this.ChartBorder.GetBorder();return t.RightEx-t.LeftEx},this.DrawCustomHorizontal=function(){if(!this.IsMinSize)for(var t in this.CustomHorizontalInfo){var e=this.CustomHorizontalInfo[t];switch(e.Type){case 0:case 1:this.DrawCustomItem(e)}}},this.DrawCustomVerticalItem=function(t){this.Canvas.save(),1==t.Data.Line.Type&&this.Canvas.setLineDash([5,5]),this.Canvas.strokeStyle=t.Data.Line.Color,this.Canvas.beginPath(),t.IsHScreen?(this.Canvas.moveTo(t.Top,D(t.X)),this.Canvas.lineTo(t.Bottom,D(t.X))):(this.Canvas.moveTo(D(t.X),t.Top),this.Canvas.lineTo(D(t.X),t.Bottom)),this.Canvas.stroke(),this.Canvas.restore()},this.DrawCustomVertical=function(){if(this.CustomVerticalInfo&&!(this.CustomVerticalInfo.length<=0)&&this.Data){var t=this.IsHScreen,e=this.ChartBorder.GetTopEx(),a=this.ChartBorder.GetBottomEx(),i=this.DataWidth,r=this.DistanceWidth,n=this.ChartBorder.GetLeft()+r/2+2;t&&(n=this.ChartBorder.GetTop()+r/2+2,e=this.ChartBorder.GetLeftEx(),a=this.ChartBorder.GetRightEx());for(var s=0,o=this.Data.DataOffset;o<this.Data.Data.length&&s<this.XPointCount;++o,++s,n+=i+r){var h=this.Data.Data[o];for(var l in this.CustomVerticalInfo){var u=this.CustomVerticalInfo[l];if(0==u.Type){if(he.IsNumber(u.Time)){if(h.Date!=u.Date||h.Time!=u.Time)continue}else if(h.Date!=u.Date)continue;var c=n,d=n+i,f=c+(d-c)/2,m={X:f,Top:e,Bottom:a,Data:u,IsHScreen:t};this.DrawCustomVerticalItem(m),this.DrawCustomVerticalEvent&&this.DrawCustomVerticalEvent.Callback(this.DrawCustomVerticalEvent,m,this);break}}}for(var o=1;s<this.XPointCount;++o,++s,n+=i+r)for(var l in this.CustomVerticalInfo){var u=this.CustomVerticalInfo[l];if(1==u.Type&&u.Space==o){var c=n,d=n+i,f=c+(d-c)/2,m={X:f,Top:e,Bottom:a,Data:u,IsHScreen:t};this.DrawCustomVerticalItem(m),this.DrawCustomVerticalEvent&&this.DrawCustomVerticalEvent.Callback(this.DrawCustomVerticalEvent,m,this);break}}}}}function O(){this.newMethod=N,this.newMethod(),delete this.newMethod,this.ClassName="OverlayKLineFrame",this.MainFrame=null,this.IsShareY=!1,this.IsCalculateYMaxMin=!0,this.RightOffset=50,this.PenBorder=$r.OverlayFrame.BolderPen,this.IsShow=!0,this.Title=null,this.TitleColor=$r.OverlayFrame.TitleColor,this.TitleFont=$r.OverlayFrame.TitleFont,this.Draw=function(){this.SplitXYCoordinate(),this.IsShow&&(this.DrawVertical(),this.DrawHorizontal(),this.DrawTitle()),this.SizeChange=!1,this.XYSplit=!1},this.DrawTitle=function(){if(this.Title){var t=this.ChartBorder.GetBorder(),e=this.ChartBorder.GetTopTitle(),a=t.Bottom,i=t.Right;i+=this.RightOffset,this.Canvas.fillStyle=this.TitleColor,this.Canvas.font=this.TitleFont,this.Canvas.textAlign="center",this.Canvas.textBaseline="top";var r=i-2,n=e+(a-e)/2;this.Canvas.save(),this.Canvas.translate(r,n),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(this.Title,0,0),this.Canvas.restore()}},this.GetScaleTextWidth=function(){if(!this.IsShow)return null;var t=(this.ChartBorder.GetBorder(),c());if(this.IsHScreen)var e=this.ChartBorder.Bottom,a=e>10*t&&!0===this.IsShowYText[1]&&2!=this.YTextPosition[1];else var i=this.ChartBorder.Right,a=i>10&&!0===this.IsShowYText[1]&&2!=this.YTextPosition[1];if(!a)return null;for(var r={Left:null,Right:0},n=0;n<this.HorizontalInfo.length;++n){var s=null,o=this.HorizontalInfo[n];o&&(null!=o.Message[1]&&a&&(null!=o.Font&&(this.Canvas.font=o.Font),s=this.Canvas.measureText(o.Message[1]).width,r.Right<s&&(r.Right=s)))}return{TextWidth:r}},this.SplitXYCoordinate=function(){if(0!=this.XYSplit)if(this.IsShareY){this.HorizontalMax=this.MainFrame.HorizontalMax,this.HorizontalMin=this.MainFrame.HorizontalMin,this.HorizontalInfo=[];for(var t in this.MainFrame.HorizontalInfo){var e=this.MainFrame.HorizontalInfo[t];this.HorizontalInfo.push(e)}this.CoordinateType=this.MainFrame.CoordinateType}else null!=this.YSplitOperator&&this.YSplitOperator.Operator()},this.DrawHorizontal=function(){var t=this.ChartBorder.GetBorder(),e=(t.Left,t.Right),a=t.Bottom,i=this.ChartBorder.GetTopTitle(),r=this.ChartBorder.Right;e+=this.RightOffset;for(var n=null,s=this.HorizontalInfo.length-1;s>=0;--s){var o=this.HorizontalInfo[s],h=this.GetYFromData(o.Value);if(!(null!=h&&Math.abs(h-n)<this.MinYDistance)){if(this.Canvas.textBaseline=h>=a-2?"bottom":h<=i+2?"top":"middle",this.Canvas.strokeStyle=this.PenBorder,this.Canvas.beginPath(),this.Canvas.moveTo(e-2,D(h)),this.Canvas.lineTo(e,D(h)),this.Canvas.stroke(),null!=o.Message[1]&&r>10){null!=o.Font&&(this.Canvas.font=o.Font);var l=o.Message[1];Array.isArray(o.Message[1])&&(l=o.Message[1][0]),this.Canvas.fillStyle=o.TextColor,this.Canvas.textAlign="left",this.Canvas.fillText(l,e+2,h)}n=h}}},this.DrawVertical=function(){var t=this.ChartBorder.GetBorder(),e=t.TopEx,a=t.Right,i=t.BottomEx;a+=this.RightOffset,this.Canvas.strokeStyle=this.PenBorder,this.Canvas.beginPath(),this.Canvas.moveTo(D(a),D(e)),this.Canvas.lineTo(D(a),D(i)),this.Canvas.stroke()}}function P(){this.newMethod=N,this.newMethod(),delete this.newMethod,this.ClassName="KLineHScreenFrame",this.IsHScreen=!0,this.DrawTitleBG=function(){if(!(this.ChartBorder.TitleHeight<=0)){var t=this.ChartBorder.GetHScreenBorder(),e=D(t.RightTitle),a=D(t.Top),i=D(t.Bottom),r=this.ChartBorder.TitleHeight,n=i-a;this.Canvas.fillStyle=this.TitleBGColor,this.Canvas.fillRect(e,a,r,n)}},this.DrawToolbar=function(){},this.GetYFromData=function(t,e){var a=this.ChartBorder.GetHScreenBorder();if(!1===e){var i=(a.RightEx-a.LeftEx)*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return a.LeftEx+i}if(t<=this.HorizontalMin)return a.LeftEx;if(t>=this.HorizontalMax)return a.RightEx;var i=(a.RightEx-a.LeftEx)*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return a.LeftEx+i},this.DrawHorizontal=function(){for(var t=this.ChartBorder.GetHScreenBorder(),e=t.Top,a=t.Bottom,i=this.ChartBorder.Top,r=this.ChartBorder.Bottom,n=t.Left,s=(t.Right,null),o=c(),h=i>10*o&&!0===this.IsShowYText[0]&&2!=this.YTextPosition[0],l=r>10*o&&!0===this.IsShowYText[1]&&2!=this.YTextPosition[1],u=this.HorizontalInfo.length-1;u>=0;--u){var d=this.HorizontalInfo[u],f=this.GetYFromData(d.Value);if(!(null!=f&&Math.abs(f-s)<this.MinYDistance)){if(f!=n&&(2==d.LineType?(this.Canvas.strokeStyle=d.LineColor,this.Canvas.setLineDash([5*o,5*o]),this.Canvas.beginPath(),this.Canvas.moveTo(D(f),e),this.Canvas.lineTo(D(f),a),this.Canvas.stroke(),this.Canvas.setLineDash([])):d.LineType>0&&(this.Canvas.strokeStyle=d.LineColor,$r.FrameYLineDash?(this.Canvas.setLineDash($r.FrameYLineDash),this.Canvas.beginPath(),this.Canvas.moveTo(D(f),e),this.Canvas.lineTo(D(f),a),this.Canvas.stroke(),this.Canvas.setLineDash([])):(this.Canvas.beginPath(),this.Canvas.moveTo(D(f),e),this.Canvas.lineTo(D(f),a),this.Canvas.stroke()))),null!=d.Message[0]&&h){null!=d.Font&&(this.Canvas.font=d.Font),this.Canvas.fillStyle=d.TextColor,this.Canvas.textAlign="right",this.Canvas.textBaseline="middle";var m=f,C=e;this.Canvas.save(),this.Canvas.translate(m,C),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(d.Message[0],-2,0),this.Canvas.restore()}if(null!=d.Message[1]&&l){null!=d.Font&&(this.Canvas.font=d.Font),this.Canvas.fillStyle=d.TextColor,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";var p;p=Array.isArray(d.Message[1])?d.Message[1][0]:d.Message[1];var m=f,C=a;this.Canvas.save(),this.Canvas.translate(m,C),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(p,2,0),this.Canvas.restore()}s=f}}},this.DrawInsideHorizontal=function(){if(!this.IsMinSize&&(!1!==this.IsShowYText[0]||!1!==this.IsShowYText[1])){var t=this.ChartBorder.GetLeft(),e=this.ChartBorder.GetRightEx(),a=this.ChartBorder.GetTop(),i=this.ChartBorder.GetBottom(),r=this.ChartBorder.Top,n=this.ChartBorder.Bottom,s=(this.ChartBorder.TitleHeight,c()),o=(r<10*s||2==this.YTextPosition[0])&&!0===this.IsShowYText[0],h=(n<10*s||2==this.YTextPosition[1])&&!0===this.IsShowYText[1];if(o||h)for(var s=c(),l=null,u=this.HorizontalInfo.length-1;u>=0;--u){var d=this.HorizontalInfo[u],f=this.GetYFromData(d.Value);if(!(null!=f&&null!=l&&Math.abs(f-l)<this.MinYDistance)){if(null!=d.Message[0]&&o){null!=d.Font&&(this.Canvas.font=d.Font),this.Canvas.fillStyle=d.TextColor,this.Canvas.textAlign="left",this.Canvas.textBaseline=f>=e-2?"top":f<=t+2?"bottom":"middle";var m=(this.Canvas.textBaseline,this.Canvas.textAlign,this.Canvas.font,d.Message[0],f),C=a;this.Canvas.save(),this.Canvas.translate(m,C),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(d.Message[0],-2,0),this.Canvas.restore()}if(null!=d.Message[1]&&h){null!=d.Font&&(this.Canvas.font=d.Font),this.Canvas.fillStyle=d.TextColor,this.Canvas.textAlign="right",this.Canvas.textBaseline=f>=e-2?"top":f<=t+2?"bottom":"middle";var p=this.Canvas.measureText(d.Message[1]).width,m=(this.Canvas.textBaseline,this.Canvas.textAlign,this.Canvas.font,d.Message[1],f),C=i;this.Canvas.save(),this.Canvas.translate(m,C),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(d.Message[1],2,0),this.Canvas.restore()}l=f}}}},this.GetXFromIndex=function(t){t<0&&(t=0),t>this.xPointCount-1&&(t=this.xPointCount-1);for(var e=this.ChartBorder.GetHScreenBorder(),a=e.TopEx+$r.FrameLeftMargin+this.DistanceWidth/2+this.DataWidth/2,i=1;i<=t;++i)a+=this.DistanceWidth+this.DataWidth;return a},this.DrawVertical=function(){var t=this.ChartBorder.GetHScreenBorder(),e=t.Left,a=t.RightTitle,i=t.Bottom,r=c(),n=null;for(var s in this.VerticalInfo){var o=this.GetXFromIndex(this.VerticalInfo[s].Value);if(o>=i)break;if(!(null!=n&&Math.abs(o-n)<80)){var h=this.VerticalInfo[s];if(2==h.LineType?(this.Canvas.strokeStyle=this.VerticalInfo[s].LineColor,this.Canvas.setLineDash([5*r,5*r]),this.Canvas.beginPath(),this.Canvas.moveTo(e,D(o)),this.Canvas.lineTo(a,D(o)),this.Canvas.stroke(),this.Canvas.setLineDash([])):h.LineType>0&&(this.Canvas.strokeStyle=this.VerticalInfo[s].LineColor,$r.FrameXLineDash?(this.Canvas.setLineDash($r.FrameXLineDash),this.Canvas.beginPath(),this.Canvas.moveTo(e,D(o)),this.Canvas.lineTo(a,D(o)),this.Canvas.stroke(),this.Canvas.setLineDash([])):(this.Canvas.beginPath(),this.Canvas.moveTo(e,D(o)),this.Canvas.lineTo(a,D(o)),this.Canvas.stroke())),null!=this.VerticalInfo[s].Message[0]){null!=this.VerticalInfo[s].Font&&(this.Canvas.font=this.VerticalInfo[s].Font),this.Canvas.fillStyle=this.VerticalInfo[s].TextColor;o<this.Canvas.measureText(this.VerticalInfo[s].Message[0]).width/2?(this.Canvas.textAlign="left",this.Canvas.textBaseline="top"):(this.Canvas.textAlign="center",this.Canvas.textBaseline="top");var l=e,u=o;this.Canvas.save(),this.Canvas.translate(l,u),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(this.VerticalInfo[s].Message[0],0,this.XBottomOffset),this.Canvas.restore()}n=o}}},this.GetYData=function(t){var e=this.ChartBorder.GetHScreenBorder();if(t<e.LeftEx)return this.HorizontalMin;if(t>e.RightEx)return this.HorizontalMax;var a=e.RightEx-e.LeftEx;return(t-e.LeftEx)/a*(this.HorizontalMax-this.HorizontalMin)+this.HorizontalMin},this.GetXData=function(t){var e=this.ChartBorder.GetHScreenBorder();if(t<=e.TopEx)return 0;if(t>=e.BottomEx)return this.XPointCount-1;for(var a=e.TopEx,i=e.BottomEx,r=this.DistanceWidth,n=this.DataWidth,s=0,o=a+r/2+n+r;o<i&&s<1e4&&s+1<this.XPointCount&&!(o>t);)o+=n+r,++s;return s}}function R(){this.newMethod=P,this.newMethod(),delete this.newMethod,this.ClassName="OverlayKLineHScreenFrame",this.MainFrame=null,this.IsShareY=!1,this.IsCalculateYMaxMin=!0,this.RightOffset=50,this.PenBorder=$r.OverlayFrame.BolderPen,this.IsShow=!0,this.Title=null,this.TitleColor=$r.OverlayFrame.TitleColor,this.TitleFont=$r.OverlayFrame.TitleFont,this.Draw=function(){this.SplitXYCoordinate(),this.IsShow&&(this.DrawVertical(),this.DrawHorizontal(),this.DrawTitle()),this.SizeChange=!1,this.XYSplit=!1},this.DrawTitle=function(){},this.SplitXYCoordinate=function(){if(0!=this.XYSplit)if(this.IsShareY){this.HorizontalMax=this.MainFrame.HorizontalMax,this.HorizontalMin=this.MainFrame.HorizontalMin,this.HorizontalInfo=[];for(var t in this.MainFrame.HorizontalInfo){var e=this.MainFrame.HorizontalInfo[t];this.HorizontalInfo.push(e)}}else null!=this.YSplitOperator&&this.YSplitOperator.Operator()},this.DrawHorizontal=function(){},this.DrawVertical=function(){},this.GetScaleTextWidth=function(){return{TextWidth:0}}}function k(){this.Frame,this.Height,this.OverlayIndex=[],this.Interval=60}function B(){this.Frame,this.ChartPaint=[],this.Identify=C(),this.Scprit,this.UpdateFrameMaxMin=function(){var t={Max:null,Min:null};if(this.Frame.IsShareY)return void(this.Frame.XYSplit=!0);if(this.Frame.YSpecificMaxMin)t.Max=this.Frame.YSpecificMaxMin.Max,t.Min=this.Frame.YSpecificMaxMin.Min;else for(var e in this.ChartPaint){var a=this.ChartPaint[e],i=a.GetMaxMin();he.IsNumber(i.Max)&&(null==t.Max||t.Max<i.Max)&&(t.Max=i.Max),he.IsNumber(i.Min)&&(null==t.Min||t.Min>i.Min)&&(t.Min=i.Min)}null!=t.Max&&null!=t.Min&&(this.Frame.HorizontalMax=t.Max,this.Frame.HorizontalMin=t.Min,this.Frame.XYSplit=!0)}}function Y(){this.SubFrame=new Array,this.SizeChange=!0,this.ChartBorder,this.Canvas,this.ScreenImageData,this.Data,this.Position,this.SizeChange=!0,this.MinSubFrameHeight=$r.DragSubFrameBorder.MinFrameHeight,this.DragBorderHeight=$r.DragSubFrameBorder.TopBorderHeight,this.AutoLeftBorder=null,this.AutoRightBorder=null,this.OverlayBlankWidth=40,this.AuotRightWidth,this.ZoomWindowsInfo=null,this.ZoomStartWindowIndex=1,this.OnMoveFromeBorder=function(t,e){if(this.SubFrame.length<=0)return!1;for(var a=this.SubFrame[t],i=null,r=t+1;r<this.SubFrame.length;++r){var n=this.SubFrame[r];if(n.Height>0){i=n;break}}if(!a||!i)return!1;var s=a.Frame.ChartBorder.Bottom,o=i.Frame.ChartBorder.Top;a.Frame.ChartBorder.Bottom-=e,i.Frame.ChartBorder.Top+=e;var h=a.Frame.ChartBorder.GetHeightEx(),l=i.Frame.ChartBorder.GetHeightEx();return!(h<this.MinSubFrameHeight&&e<0||l<this.MinSubFrameHeight&&e>0)||(a.Frame.ChartBorder.Bottom=s,i.Frame.ChartBorder.Top=o,!1)},this.ReDrawToolbar=function(){for(var t in this.SubFrame)this.SubFrame[t].Frame.ReDrawToolbar=!0},this.SetFrameBorderSizeChange=function(){var t=this.SubFrame[0];if(t&&t.Frame){var e=t.Frame.YSplitOperator;e&&2==e.CoordinateType&&(t.Frame.XYSplit=!0)}},this.CancelZoomUpDownFrameY=function(t){var e=t.Index;if(this.SubFrame.length<=0)return!1;if(!this.SubFrame[e])return!1;var a=this.SubFrame[e],i=a.Frame,r=i.YSplitOperator;if(r.FixedYMaxMin){r.FixedYMaxMin=null,r.EnableZoomUpDown=!1,i.XYSplit=!0;for(var n in a.OverlayIndex){var s=a.OverlayIndex[n];s.Frame.IsShareY&&(s.Frame.XYSplit=!0)}return Fr.Chart.Log("[HQTradeFrame::CancelZoomUpDownFrameY]"),!0}return!1},this.OnZoomUpDownFrameY=function(t,e){var a=t.Index;if(this.SubFrame.length<=0)return!1;if(!this.SubFrame[a])return!1;var i=this.SubFrame[a],r=i.Frame,n=r.ChartBorder.GetTopEx(),s=r.ChartBorder.GetBottomEx(),o=r.HorizontalMax,h=r.HorizontalMin,l=(o-h)*Math.abs(e)/(s-n),u=r.YSplitOperator,c={Max:o,Min:h};if(1==t.Position){var d=e>0?-l:l;c.Max+=d}else if(2==t.Position){var d=e>0?-l:l;c.Min+=d}else{if(0!=t.Position)return!1;var d=e>0?l:-l;c.Max+=d,c.Min-=d}if(c.Max>c.Min){u.FixedYMaxMin=c,u.EnableZoomUpDown=!0,r.XYSplit=!0;for(var f in i.OverlayIndex){var m=i.OverlayIndex[f];m.Frame.IsShareY&&(m.Frame.XYSplit=!0)}return Fr.Chart.Log("[HQTradeFrame::OnZoomUpDownFrameY] Max="+c.Max+", Min="+c.Min),!0}return!1},this.OnUpDonwFrameY=function(t,e){var a=t.Index;if(this.SubFrame.length<=0)return!1;if(!this.SubFrame[a])return!1;var i=this.SubFrame[a],r=i.Frame,n=r.ChartBorder.GetTopEx(),s=r.ChartBorder.GetBottomEx(),o=r.YSplitOperator;if(!o)return!1;var h=r.HorizontalMax,l=r.HorizontalMin,u=(h-l)*Math.abs(e)/(s-n),c=e>0?-u:u,d={Max:h,Min:l};d.Max-=c,d.Min-=c,o.FixedYMaxMin=d,o.EnableZoomUpDown=!0,r.XYSplit=!0;for(var f in i.OverlayIndex){var m=i.OverlayIndex[f];m.Frame.IsShareY&&(m.Frame.XYSplit=!0)}return Fr.Chart.Log("[HQTradeFrame::OnUpDonwFrameY] Max="+d.Max+", Min="+d.Min+", yMove="+e+", moveStep="+u),!0},this.ClearUpDonwFrameYData=function(t){if(!(this.SubFrame.length<=0))if(t){var e=t.Index;if(e<0||e>=this.SubFrame.length)return;var a=this.SubFrame[e];if(!a||!a.Frame||!a.Frame.YSplitOperator)return;var i=a.Frame.YSplitOperator;1==i.EnableZoomUpDown&&(i.FixedYMaxMin=null)}else for(var r=0;r<this.SubFrame.length;++r){var a=this.SubFrame[r];if(a&&a.Frame&&a.Frame.YSplitOperator){var i=a.Frame.YSplitOperator;1==i.EnableZoomUpDown&&(i.FixedYMaxMin=null)}}},this.ClearCoordinateText=function(t){for(var e=0;e<this.SubFrame.length;++e){var a=this.SubFrame[e];a.Frame&&a.Frame.ClearCoordinateText(t)}},this.RestoreIndexWindows=function(){if(!this.ZoomWindowsInfo)return!1;for(var t=(this.SubFrame[this.ZoomWindowsInfo.FrameID],this.ZoomStartWindowIndex);t<this.ZoomWindowsInfo.Data.length;++t){var e=this.ZoomWindowsInfo.Data[t],a=this.SubFrame[t];a.Height=e.Height,a.Frame.IsMinSize=!1,a.Frame.ReDrawToolbar=!0,a.Frame.XSplitOperator.ShowText=e.ShowXText,a.Frame.XYSplit=!0;for(var i=0;i<a.OverlayIndex.length;++i){a.OverlayIndex[i].Frame.IsMinSize=!1}}return this.ZoomWindowsInfo=null,!0},this.ZoomIndexWindow=function(t,e){var a=this.SubFrame[t];if(!a)return!1;if(this.ZoomWindowsInfo)return this.RestoreIndexWindows();for(var i={FrameID:t,Data:[]},r=0;r<this.SubFrame.length;++r){var n=this.SubFrame[r];i.Data[r]={Height:n.Height,ShowXText:n.Frame.XSplitOperator.ShowText}}this.ZoomWindowsInfo=i;for(var s=0,r=this.ZoomStartWindowIndex;r<this.SubFrame.length;++r){var n=this.SubFrame[r],o=n.Frame;if(o.XYSplit=!0,s+=n.Height,r!=t){n.Height=0,o.IsMinSize=!0,o.HideToolbar(),o.XSplitOperator.ShowText=!1;for(var h=0;h<n.OverlayIndex.length;++h){n.OverlayIndex[h].Frame.IsMinSize=!0}}}return a.Height=s,a.Frame.XSplitOperator.ShowText=!0,!0},this.SaveSubFrameHeightRate=function(){for(var t=this.ChartBorder.GetHeight(),e=0;e<this.SubFrame.length;++e){var a=this.SubFrame[e],i=a.Frame.ChartBorder.GetHeight(),r=i/t*100;a.Height=r}},this.CalculateChartBorder=function(){if(!(this.SubFrame.length<=0)){for(var t=this.ChartBorder.GetTop(),e=this.ChartBorder.GetHeight(),a=0,i=0;i<this.SubFrame.length;++i){var r=this.SubFrame[i];a+=r.Height}for(var i=0;i<this.SubFrame.length;++i){var r=this.SubFrame[i];r.Frame.ChartBorder.Top=t,r.Frame.ChartBorder.Left=this.ChartBorder.Left,r.Frame.ChartBorder.Right=this.ChartBorder.Right,r.Frame.ChartBorder.LeftExtendWidth=this.ChartBorder.LeftExtendWidth,r.Frame.ChartBorder.RightExtendWidth=this.ChartBorder.RightExtendWidth;var n=e*(r.Height/a)+t;r.Frame.ChartBorder.Bottom=this.ChartBorder.GetChartHeight()-n,t=n}}},this.SetExtendWidth=function(t){if(t){var e=null,a=null;he.IsNumber(t.Left)&&(e=t.Left,this.ChartBorder.LeftExtendWidth=e),he.IsNumber(t.Right)&&(a=t.Right,this.ChartBorder.RightExtendWidth=a);for(var i in this.SubFrame){var r=this.SubFrame[i];null!=e&&(r.Frame.ChartBorder.LeftExtendWidth=e),null!=a&&(r.Frame.ChartBorder.RightExtendWidth=a)}}},this.CalculateChartBorder2=function(){if(!(this.SubFrame.length<=0)){var t=this.ChartBorder.Top,e=this.ChartBorder.Bottom,a=this.ChartBorder.GetHeight(),i=0;for(var r in this.SubFrame){var n=this.SubFrame[r];i+=n.Height}var s=0;for(var r in this.SubFrame){var n=this.SubFrame[r];n.Frame.ChartBorder.Top=t,n.Frame.ChartBorder.Left=this.ChartBorder.Left,n.Frame.ChartBorder.Right=this.ChartBorder.Right,n.Frame.ChartBorder.X=this.ChartBorder.X,n.Frame.ChartBorder.Y=this.ChartBorder.Y,n.Frame.ChartBorder.Width=this.ChartBorder.Width,n.Frame.ChartBorder.Height=this.ChartBorder.Height;var o=a*(n.Height/i);s+=o,e=this.ChartBorder.Bottom+(a-s),n.Frame.ChartBorder.Bottom=e,t+=o}}},this.GetScaleTextWidth=function(){for(var t={Left:null,Right:null,OverlayRight:0},e=[],a=0;a<this.SubFrame.length;++a){var i=this.SubFrame[a];if(!(i.Height<=0)){var r=i.Frame;if(r&&r.XSplitOperator){var n=r.HorizontalMax,s=r.HorizontalMin;r.YSplitOperator.Operator();var o=r.GetScaleTextWidth();if(r.HorizontalMax=n,r.HorizontalMin=s,o&&o.TextWidth){var h=o.TextWidth;he.IsNumber(h.Left)&&(null==t.Left||t.Left<h.Left)&&(t.Left=h.Left),he.IsNumber(h.Right)&&(null==t.Right||t.Right<h.Right)&&(t.Right=h.Right)}if(he.IsNonEmptyArray(i.OverlayIndex))for(var l=0,u=0;l<i.OverlayIndex.length;++l){var c=i.OverlayIndex[l];if(c.Frame){var n=c.Frame.HorizontalMax,s=c.Frame.HorizontalMin;c.Frame.YSplitOperator.Operator();var o=c.Frame.GetScaleTextWidth();if(c.Frame.HorizontalMax=n,c.Frame.HorizontalMin=s,c.RightWidth={Index:-1,Width:0},o&&o.TextWidth){var h=o.TextWidth;he.IsNumber(h.Right)&&(c.RightWidth.Index=u,c.RightWidth.Width=h.Right,e[u]?e[u][a]=c.RightWidth:(e[u]=[],e[u][a]=c.RightWidth),++u)}}}}}}for(var d=[],a=0;a<e.length;++a){for(var f=e[a],m=0,l=0;l<f.length;++l)if(f[l]){var i=f[l].Width;m<i&&(m=i)}m>0&&(m+=this.OverlayBlankWidth);for(var l=0;l<f.length;++l)f[l]&&(f[l].Width=m);d[a]=m}for(var a=0;a<d.length;++a){var o=d[a];he.IsNumber(o)&&(t.OverlayRight+=o)}return t},this.IsFrameXYSplit=function(){for(var t in this.SubFrame){var e=this.SubFrame[t];if(e.Frame.XYSplit)return!0;for(var a=0;a<e.OverlayIndex.length;++a){if(e.OverlayIndex[a].Frame.XYSplit)return!0}}return!1},this.Draw=function(t){!0===this.SizeChange&&this.CalculateChartBorder();var e=!1;if(t&&!0===t.IsEnableSplash&&(e=!0),0==e&&(this.AutoLeftBorder||this.AutoRightBorder)&&this.IsFrameXYSplit()){this.AutoRightOverlayWidth=[];var a=this.GetScaleTextWidth();if(he.IsNumber(a.Left)&&this.AutoLeftBorder){var i=0;he.IsNumber(this.AutoLeftBorder.Blank)&&(i=this.AutoLeftBorder.Blank);var r=a.Left+i;he.IsNumber(this.AutoLeftBorder.MinWidth)&&this.AutoLeftBorder.MinWidth>r&&(r=this.AutoLeftBorder.MinWidth),this.IsHScreen?this.ChartBorder.Top=r:this.ChartBorder.Left=r;for(var n=0;n<this.SubFrame.length;++n){var s=this.SubFrame[n];this.IsHScreen?s.Frame.ChartBorder.Top=r:s.Frame.ChartBorder.Left=r}}if(he.IsNumber(a.Right)&&this.AutoRightBorder){var i=0;he.IsNumber(this.AutoRightBorder.Blank)&&(i=this.AutoRightBorder.Blank);var r=a.Right+i;if(he.IsNumber(this.AutoRightBorder.MinWidth)&&this.AutoRightBorder.MinWidth>r&&(r=this.AutoRightBorder.MinWidth),this.AuotRightWidth=r,he.IsPlusNumber(a.OverlayRight)&&(r+=this.OverlayBlankWidth,this.AuotRightWidth=r,r+=a.OverlayRight),this.GetExtendChartRightWidth){r+=this.GetExtendChartRightWidth()}this.IsHScreen?(this.ChartBorder.Bottom!=r&&!0,this.ChartBorder.Bottom=r):(this.ChartBorder.Right!=r&&!0,this.ChartBorder.Right=r);for(var n=0;n<this.SubFrame.length;++n){var s=this.SubFrame[n];this.IsHScreen?s.Frame.ChartBorder.Bottom=r:s.Frame.ChartBorder.Right=r,s.Frame.ReDrawToolbar=!0}}this.SetSizeChage(!0)}for(var n in this.SubFrame){var s=this.SubFrame[n];if(!(s.Height<=0))if(s.Frame.Draw(),this.AutoRightBorder)for(var o=this.AuotRightWidth,h=0;h<s.OverlayIndex.length;++h){var l=s.OverlayIndex[h];l.Frame.DataWidth=s.Frame.DataWidth,l.Frame.DistanceWidth=s.Frame.DistanceWidth,l.Frame.XPointCount=s.Frame.XPointCount,l.ChartPaint.length>0&&l.Frame&&(l.Frame.RightOffset=o,l.Frame.Draw(),o+=l.RightWidth.Width)}else{var o=s.Interval;s.Frame.RightTextMaxWidth>o&&(o=s.Frame.RightTextMaxWidth);for(var h in s.OverlayIndex){var l=s.OverlayIndex[h];l.Frame.DataWidth=s.Frame.DataWidth,l.Frame.DistanceWidth=s.Frame.DistanceWidth,l.Frame.XPointCount=s.Frame.XPointCount,l.ChartPaint.length>0&&l.Frame&&(l.Frame.RightOffset=o,l.Frame.Draw(),l.Frame.IsShow&&(o+=s.Interval))}}}this.SizeChange=!1},this.DrawOveraly=function(){for(var t in this.SubFrame){var e=this.SubFrame[t];for(var a in e.OverlayIndex){var i=e.OverlayIndex[a];for(var r in i.ChartPaint)i.ChartPaint[r].IsShow&&i.ChartPaint[r].Draw()}}},this.DrawPictureCoordinate=function(t,e){if(t&&t.Frame&&he.IsNonEmptyArray(t.Point)&&t.GetXYCoordinate){var a=t.GetXYCoordinate();t.Frame.DrawPictureYCoordinate(t,a,e);for(var i=0;i<this.SubFrame.length;++i){var r=this.SubFrame[i];if(r&&r.Frame&&r.Frame.XSplitOperator.ShowText){r.Frame.DrawPictureXCoordinate(t,a,e);break}}}},this.DrawLock=function(){for(var t in this.SubFrame){this.SubFrame[t].Frame.DrawLock()}},this.DrawLogo=function(){for(var t=0;t<this.SubFrame.length;++t){var e=this.SubFrame[t];if(e.Frame.DrawLogo){e.Frame.DrawLogo();break}}},this.CalculateLock=function(){for(var t in this.SubFrame){this.SubFrame[t].Frame.CalculateLock()}},this.DrawInsideHorizontal=function(){for(var t in this.SubFrame){var e=this.SubFrame[t];e.Frame.DrawInsideHorizontal&&e.Frame.DrawInsideHorizontal()}},this.DrawCustomHorizontal=function(){for(var t in this.SubFrame){var e=this.SubFrame[t];e.Frame.DrawCustomHorizontal&&e.Frame.DrawCustomHorizontal()}},this.DrawEx=function(t){for(var e in this.SubFrame){var a=this.SubFrame[e];"MinuteFrame"!=a.Frame.ClassName&&"MinuteHScreenFrame"!=a.Frame.ClassName||1!=e||a.Frame.DrawVolTitle(t.Symbol)}},this.DrawCustomVertical=function(t){for(var e in this.SubFrame){var a=this.SubFrame[e];a.Frame.DrawCustomVerticalEvent=t,a.Frame.DrawCustomVertical&&a.Frame.DrawCustomVertical()}},this.SetSizeChage=function(t){this.SizeChange=t;for(var e in this.SubFrame){var a=this.SubFrame[e];a.Frame.SizeChange=t;for(var i in a.OverlayIndex){var r=a.OverlayIndex[i];r.Frame&&(r.Frame.SizeChange=t)}}this.ChartBorder.UIElement&&(this.Position={X:this.ChartBorder.UIElement.offsetLeft,Y:this.ChartBorder.UIElement.offsetTop,W:this.ChartBorder.UIElement.clientWidth,H:this.ChartBorder.UIElement.clientHeight})},this.SetDrawDepthMap=function(t){for(var e in this.SubFrame){this.SubFrame[e].Frame.DrawDepthMapCallback=t}},this.Snapshot=function(){this.ScreenImageData=this.Canvas.getImageData(0,0,this.ChartBorder.GetChartWidth(),this.ChartBorder.GetChartHeight())},this.GetXData=function(t){return this.SubFrame[0].Frame.GetXData(t)},this.GetYData=function(t,e){for(var a,i=0;i<this.SubFrame.length;++i){var r=this.SubFrame[i],n=r.Frame.ChartBorder.GetLeft(),s=r.Frame.ChartBorder.GetTopEx(),o=r.Frame.ChartBorder.GetWidth(),h=r.Frame.ChartBorder.GetHeightEx();if(r.Frame.Canvas.beginPath(),r.Frame.Canvas.rect(n,s,o,h),r.Frame.Canvas.isPointInPath(n,t)){a=r.Frame,e&&(e.FrameID=i);break}}if(null!=a){a.RightFrame&&(e.RightYValue=a.RightFrame.GetYData(t));var l=a.GetYData(t);if(1==a.YSplitOperator.CoordinateType){var u=a.YSplitOperator.GetFirstOpenPrice();e.RightYValue=((l-u)/u*100).toFixed(2)+"%"}return l}},this.PtInFrame=function(t,e){for(var a=0;a<this.SubFrame.length;++a){var i=this.SubFrame[a],r=i.Frame.ChartBorder.GetLeft(),n=i.Frame.ChartBorder.GetTop(),s=i.Frame.ChartBorder.GetWidth(),o=i.Frame.ChartBorder.GetHeight();if(i.Frame.Canvas.beginPath(),i.Frame.Canvas.rect(r,n,s,o),i.Frame.Canvas.isPointInPath(t,e))return a}return-1},this.PtInButtons=function(t,e){for(var a in this.SubFrame){var i=this.SubFrame[a],r=i.Frame.PtInButtons(t,e);if(r)return r}return null},this.PtInFrameBottom=function(t,e){var a=this.ChartBorder.GetLeft(),i=this.ChartBorder.GetBottom(),r=this.ChartBorder.GetWidth(),n=this.ChartBorder.Bottom;return this.Canvas.beginPath(),this.Canvas.rect(a,i,r,n),!!this.Canvas.isPointInPath(t,e)},this.GetXFromIndex=function(t){return this.SubFrame[0].Frame.GetXFromIndex(t)},this.GetYFromData=function(t){return this.SubFrame[0].Frame.GetYFromData(t)},this.ZoomUp=function(t){var e=this.SubFrame[0].Frame.ZoomUp(t);return this.UpdateAllFrame(),e},this.ZoomDown=function(t){var e=this.SubFrame[0].Frame.ZoomDown(t);return this.UpdateAllFrame(),e},this.XCoordinateZoom=function(t,e){var a=this.SubFrame[0].Frame.XCoordinateZoom(t,e);return this.UpdateAllFrame(),a},this.ResetXYSplit=function(){for(var t in this.SubFrame)this.SubFrame[t].Frame.XYSplit=!0},this.SetLanguage=function(t){for(var e in this.SubFrame){var a=this.SubFrame[e];a&&a.Frame&&(a.Frame.YSplitOperator&&(a.Frame.YSplitOperator.LanguageID=t),a.Frame.XSplitOperator&&(a.Frame.XSplitOperator.LanguageID=t))}},this.GetCurrentPageSize=function(){if(this.SubFrame.length<=0)return null;var t=this.SubFrame[0];return t&&t.Frame?t.Frame.XPointCount:null},this.OnSize=function(){var t={};return this.SubFrame[0].Frame.OnSize(t),this.UpdateAllFrame(),t},this.SetDataWidth=function(t){var e=this.SubFrame[0].Frame.SetDataWidth(t);return this.UpdateAllFrame(),e},this.UpdateAllFrame=function(){for(var t=this.SubFrame[0].Frame,e=0;e<this.SubFrame.length;++e){var a=this.SubFrame[e];e>0&&(a.Frame.XPointCount=t.XPointCount,a.Frame.ZoomIndex=t.ZoomIndex,a.Frame.DataWidth=t.DataWidth,a.Frame.DistanceWidth=t.DistanceWidth,a.Frame.LastCalculateStatus.Width=t.LastCalculateStatus.Width,a.Frame.LastCalculateStatus.XPointCount=t.LastCalculateStatus.XPointCount);for(var i in a.OverlayIndex){var r=this.SubFrame[e].OverlayIndex[i];r.Frame.XPointCount=t.XPointCount,r.Frame.ZoomIndex=t.ZoomIndex,r.Frame.DataWidth=t.DataWidth,r.Frame.DistanceWidth=t.DistanceWidth,r.Frame.LastCalculateStatus.Width=t.LastCalculateStatus.Width,r.Frame.LastCalculateStatus.XPointCount=t.LastCalculateStatus.XPointCount}}},this.PtInFrameBorder=function(t,e){for(var a=this.DragBorderHeight,i=0;i<this.SubFrame.length-1;++i){var r=this.SubFrame[i];if(!(r.Frame.Heigh<=0)){var n=r.Frame.ChartBorder.GetBottom(),s=r.Frame.ChartBorder.GetLeft(),o=r.Frame.ChartBorder.GetRight();if(r.Frame.Canvas.beginPath(),r.Frame.Canvas.rect(s,n-a/2,o-s,a),r.Frame.Canvas.isPointInPath(t,e))return{Index:i,Bottom:!0}}}return null},this.IsEnableDragY=function(t){if(!this.SubFrame)return!1;var e=this.SubFrame[t];if(!e||!e.Frame||!e.Frame.YSplitOperator)return!1;var a=e.Frame.YSplitOperator;return"function"==typeof a.IsEnableDragY&&a.IsEnableDragY()},this.PtInFrameY=function(t,e){for(var a=0;a<this.SubFrame.length;++a){var i=this.SubFrame[a];if(!(i.Frame.Heigh<=0)){var r=i.Frame.ChartBorder.Right,n=i.Frame.ChartBorder.GetBorder(),s=n.Bottom,o=n.TopTitle,h=(n.Left,n.Right),l=s-o;if(l/3>30)var u=o+30,c=s-30;else var d=l/3,u=o+d,c=s-d;var f=0;if(e<u?f=1:e>c&&(f=2),r>=10&&(i.Frame.Canvas.beginPath(),i.Frame.Canvas.rect(h,o,r,s-o),i.Frame.Canvas.isPointInPath(t,e)))return{Index:a,Right:!0,Left:!1,Position:f};var m=i.Frame.ChartBorder.Left;if(m>=10&&(i.Frame.Canvas.beginPath(),i.Frame.Canvas.rect(0,o,m,s-o),i.Frame.Canvas.isPointInPath(t,e)))return{Index:a,Right:!1,Left:!0,Position:f}}}return null},this.SetDayCount=function(t){this.ChartBorder.MultiDayMinute.Count=t;for(var e=0;e<this.SubFrame.length;++e){var a=this.SubFrame[e];a.Frame&&(a.Frame.DayCount=t,a.Frame.ChartBorder.MultiDayMinute.Count=t)}},this.SetMultiDayMinuteWidth=function(t){if(t){he.IsNumber(t.Left)&&(this.ChartBorder.MultiDayMinute.Left=t.Left),he.IsNumber(t.Right)&&(this.ChartBorder.MultiDayMinute.Right=t.Right);for(var e=0;e<this.SubFrame.length;++e){var a=this.SubFrame[e];a.Frame&&(he.IsNumber(t.Left)&&(a.Frame.ChartBorder.MultiDayMinute.Left=t.Left),he.IsNumber(t.Right)&&(a.Frame.ChartBorder.MultiDayMinute.Right=t.Right))}}}}function H(){this.newMethod=Y,this.newMethod(),delete this.newMethod,this.IsHScreen=!0,this.CalculateChartBorder=function(){if(!(this.SubFrame.length<=0)){var t=this.ChartBorder.GetHScreenBorder(),e=this.ChartBorder.Right,a=t.Right,i=t.Right-t.Left,r=0;for(var n in this.SubFrame){var s=this.SubFrame[n];r+=s.Height}for(var n in this.SubFrame){var s=this.SubFrame[n];s.Frame.ChartBorder.Top=this.ChartBorder.Top,s.Frame.ChartBorder.Bottom=this.ChartBorder.Bottom;var o=i*(s.Height/r);s.Frame.ChartBorder.Right=e,s.Frame.ChartBorder.Left=a-o,e+=o,a-=o}}},this.GetYData=function(t,e){for(var a,i=0;i<this.SubFrame.length;++i){var r=this.SubFrame[i],n=r.Frame.ChartBorder.GetLeftEx(),s=r.Frame.ChartBorder.GetTop(),o=r.Frame.ChartBorder.GetWidthEx(),h=r.Frame.ChartBorder.GetHeight();if(r.Frame.Canvas.beginPath(),r.Frame.Canvas.rect(n,s,o,h),r.Frame.Canvas.isPointInPath(t,s)){a=r.Frame,e&&(e.FrameID=i);break}}if(null!=a)return a.GetYData(t)}}function V(){this.newMethod=b,this.newMethod(),delete this.newMethod,this.ScreenImageData,this.Position,this.ClassName="DepthChartFrame",this.VerticalRange={Max:88,Min:8,Center:null,MaxDiffer:null,Differ:null,Step:.05},this.AskPrice,this.BidPrice,this.MinZoom=.05,this.SetPriceList=function(t,e){this.AskPrice=t,this.BidPrice=e},this.DrawFrame=function(){this.SplitXYCoordinate(),this.DrawHorizontal(),this.DrawVertical()},this.GetXFromIndex=function(t){var e=this.ChartBorder.GetLeft();this.ChartBorder.GetRight();return e+this.ChartBorder.GetWidth()*(t-this.VerticalRange.Min)/(this.VerticalRange.Max-this.VerticalRange.Min)},this.GetXData=function(t){var e=this.ChartBorder.GetLeft();this.ChartBorder.GetRight();return(t-e)/this.ChartBorder.GetWidth()*(this.VerticalRange.Max-this.VerticalRange.Min)+this.VerticalRange.Min},this.GetXFromPrice=function(t){var e=!1,a=this.GetPrice(this.BidPrice,t);if(null==a&&(a=this.GetPrice(this.AskPrice,t),e=!0),null==a&&this.BidPrice&&Array.isArray(this.BidPrice)&&this.BidPrice.length>0){var i=this.BidPrice[0];t<i&&(e=!1,a=i)}if(null==a&&this.AskPrice&&Array.isArray(this.AskPrice)&&this.AskPrice.length>0){var r=this.AskPrice[this.AskPrice.length-1];t>r&&(e=!0,a=r)}return null==a?null:{X:this.GetXFromIndex(a),Price:a,IsAsk:e}},this.GetPrice=function(t,e){if(!t||!Array.isArray(t)||t.length<=0)return null;if(e<t[0]||e>t[t.length-1])return null;var a=null;for(var i in t){var r=t[i];if(e==r)return r;if(e<r)return a;a=r}},this.SplitXYCoordinate=function(){0!=this.XYSplit&&(null!=this.YSplitOperator&&this.YSplitOperator.Operator(),null!=this.XSplitOperator&&this.XSplitOperator.Operator())},this.Snapshot=function(){this.ScreenImageData=this.Canvas.getImageData(0,0,this.ChartBorder.GetChartWidth(),this.ChartBorder.GetChartHeight())},this.SetSizeChage=function(t){this.SizeChange=t,this.Position={X:this.ChartBorder.UIElement.offsetLeft,Y:this.ChartBorder.UIElement.offsetTop,W:this.ChartBorder.UIElement.clientWidth,H:this.ChartBorder.UIElement.clientHeight}},this.SetDrawDepthMap=function(t){},this.PtInFrame=function(t,e){var a=this.ChartBorder.GetLeft(),i=this.ChartBorder.GetTop(),r=this.ChartBorder.GetWidth(),n=this.ChartBorder.GetHeight();return this.Canvas.beginPath(),this.Canvas.rect(a,i,r,n),this.Canvas.isPointInPath(t,e)?0:-1},this.PtInFrameBorder=function(t,e){return null},this.ZoomUp=function(){var t=this.VerticalRange,e=t.Differ;return!(e<t.MaxDiffer*this.MinZoom)&&(e-=t.Differ*t.Step,t.Differ=e,t.Min=t.Center-t.Differ,t.Max=t.Center+t.Differ,!0)},this.ZoomDown=function(){var t=this.VerticalRange,e=t.Differ;return e!=t.MaxDiffer&&(e+=t.Differ*t.Step,e>t.MaxDiffer&&(e=t.MaxDiffer),t.Differ=e,t.Min=t.Center-t.Differ,t.Max=t.Center+t.Differ,!0)}}function G(){this.newMethod=b,this.newMethod(),delete this.newMethod,this.ScreenImageData,this.Position,this.DrawFrame=function(){if(this.XPointCount>0){var t=this.ChartBorder.GetWidth()/(6*this.XPointCount);this.DistanceWidth=2*t,this.DataWidth=4*t}this.SplitXYCoordinate(),this.DrawHorizontal(),this.DrawVertical()},this.GetXFromIndex=function(t){t<0&&(t=0),t>this.xPointCount-1&&(t=this.xPointCount-1);for(var e=this.ChartBorder.GetLeft()+2+this.DistanceWidth/2+this.DataWidth/2,a=1;a<=t;++a)e+=this.DistanceWidth+this.DataWidth;return e},this.SplitXYCoordinate=function(){0!=this.XYSplit&&(null!=this.YSplitOperator&&this.YSplitOperator.Operator(),null!=this.XSplitOperator&&this.XSplitOperator.Operator())},this.Snapshot=function(){this.ScreenImageData=this.Canvas.getImageData(0,0,this.ChartBorder.GetChartWidth(),this.ChartBorder.GetChartHeight())},this.SetSizeChage=function(t){this.SizeChange=t,this.Position={X:this.ChartBorder.UIElement.offsetLeft,Y:this.ChartBorder.UIElement.offsetTop,W:this.ChartBorder.UIElement.clientWidth,H:this.ChartBorder.UIElement.clientHeight}},this.SetDrawDepthMap=function(t){},this.PtInFrame=function(t,e){var a=this.ChartBorder.GetLeft(),i=this.ChartBorder.GetTop(),r=this.ChartBorder.GetWidth(),n=this.ChartBorder.GetHeight();return this.Canvas.beginPath(),this.Canvas.rect(a,i,r,n),this.Canvas.isPointInPath(t,e)?0:-1},this.PtInFrameBorder=function(t,e){return null}}function W(){this.Date,this.YClose,this.Open,this.Close,this.High,this.Low,this.Vol,this.Amount,this.Time,this.FlowCapital=null,this.Position=null,this.YFClose=null,this.FClose=null,this.Stop,this.Up,this.Down,this.Unchanged,this.ExtendData,this.BFactor,this.AFactor,this.OrderFlow}function X(){this.Close,this.Open,this.High,this.Low,this.Vol,this.Amount,this.DateTime,this.Increase,this.Risefall,this.AvPrice,this.Lead=null,this.Time,this.Date,this.Position=null,this.YClearing}function U(){this.Time,this.Date,this.Price,this.AvPrice,this.Vol=[],this.ColorID}function K(){this.Time,this.Date,this.Price,this.AvPrice,this.Vol=[],this.ColorID}function z(){this.Date,this.Time,this.Value}function J(){this.ID,this.Date,this.Title,this.InfoType,this.ExtendData}function q(){this.PeriodCallback=new _r.default,this.GetPeriodCallback=function(t){return this.PeriodCallback.has(t)?this.PeriodCallback.get(t):null},this.AddPeriodCallback=function(t){if(he.IsNumber(t.Period)&&t.Callback){var e={Period:t.Period,Callback:t.Callback};this.PeriodCallback.set(t.Period,e)}},this.RemovePeriodCallback=function(t){this.PeriodCallback.has(t.ID)&&this.PeriodCallback.delete(t.ID)}}function Z(){this.Data=new Array,this.DataOffset=0,this.Period=0,this.Right=0,this.Symbol,this.Data2=new Array,this.GetCloseMA=function(t){for(var e=new Array,a=0,i=this.Data.length;a<i;a++)if(a<t)e[a]=null;else{for(var r=0,n=0;n<t;n++)r+=this.Data[a-n].Close;e[a]=r/t}return e},this.GetVolMA=function(t){for(var e=new Array,a=0,i=this.Data.length;a<i;a++)if(a<t)e[a]=null;else{for(var r=0,n=0;n<t;n++)r+=this.Data[a-n].Vol;e[a]=r/t}return e},this.GetAmountMA=function(t){for(var e=new Array,a=0,i=this.Data.length;a<i;a++)if(a<t)e[a]=null;else{for(var r=0,n=0;n<t;n++)r+=this.Data[a-n].Amount;e[a]=r/t}return e},this.GetClose=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Close;return t},this.GetYClose=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].YClose;return t},this.GetHigh=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].High;return t},this.GetLow=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Low;return t},this.GetOpen=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Open;return t},this.GetVol=function(t){var e=1;he.IsNumber(t)&&(e=t);var a=new Array;for(var i in this.Data)a[i]=this.Data[i].Vol/e;return a},this.GetAmount=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Amount;return t},this.GetPosition=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Position;return t},this.GetSettlementPrice=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].FClose;return t},this.GetIsEqual=function(){var t=[];for(var e in this.Data){var a=this.Data[e];t[e]=a.Close==a.Open?1:0}return t},this.GetIsUp=function(){var t=[];for(var e in this.Data){var a=this.Data[e];t[e]=a.Close>a.Open?1:0}return t},this.GetIsDown=function(){var t=[];for(var e in this.Data){var a=this.Data[e];t[e]=a.Close<a.Open?1:0}return t},this.GetLead=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Lead;return t},this.GetDate=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Date;return t},this.GetTime=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Time;return t},this.GetUp=function(){var t=[];for(var e in this.Data)t[e]=this.Data[e].Up;return t},this.GetDown=function(){var t=[];for(var e in this.Data)t[e]=this.Data[e].Down;return t},this.GetYear=function(){var t=new Array;for(var e in this.Data)t[e]=parseInt(this.Data[e].Date/1e4);return t},this.GetMonth=function(){var t=new Array;for(var e in this.Data)t[e]=parseInt(this.Data[e].Date%1e4/100);return t},this.GetAvPrice=function(){var t=new Array;for(var e in this.Data){var a=this.Data[e].AvPrice;he.IsNumber(a)?t[e]=a:t[e]=0}return t},this.GetDateRange=function(){if(!this.Data||this.Data.length<=0)return null;var t=this.Data[0],e=this.Data[this.Data.length-1],a={Start:{Date:t.Date},End:{Date:e.Date}};return he.IsNumber(t.Time)&&(a.Start.Time=t.Time),he.IsNumber(e.Time)&&(a.End.Time=e.Time),a},this.GetDateList=function(){if(!this.Data||this.Data.length<=0)return null;for(var t=[],e=new Ir.default,a=0;a<this.Data.length;++a){var i=this.Data[a];he.IsNumber(i.Date)&&(e.has(i.Date)||(e.add(i.Date),t.push(i.Date)))}return t},this.GetMinutePeriodData=function(t){if(q.GetMinutePeriodData)return q.GetMinutePeriodData(t,this.Data,this);var e=new Array,a=5;if(5==t)a=5;else if(6==t)a=15;else if(7==t)a=30;else if(8==t)a=60;else if(11==t)a=120;else{if(12!=t)return t>Vr&&t<=Gr?(a=t-Vr,this.GetMinuteCustomPeriodData(a)):this.Data;a=240}for(var i=!1,r=null,n=null,s=0;s<this.Data.length;){i=!0;for(var o=0;o<a&&s<this.Data.length;++s){i&&(r=new W,e.push(r),i=!1);var h=this.Data[s];if(null!=h){if((925!=h.Time||null!=n&&924==n)&&(930!=h.Time||null!=n&&929==n)&&(1300!=h.Time||null!=n&&1259==n)&&++o,r.Date=h.Date,r.Time=h.Time,n=r.Time,null!=h.Open&&null!=h.Close&&(null==r.Open||null==r.Close?(r.Open=h.Open,r.High=h.High,r.Low=h.Low,r.YClose=h.YClose,r.Close=h.Close,r.Vol=h.Vol,r.Amount=h.Amount,r.FlowCapital=h.FlowCapital,r.Position=h.Position,r.YFClose=h.YFClose,r.FClose=h.FClose):(r.High<h.High&&(r.High=h.High),r.Low>h.Low&&(r.Low=h.Low),r.Close=h.Close,r.Vol+=h.Vol,null!=h.Amount&&(r.Amount+=h.Amount),r.Position=h.Position,r.FlowCapital=h.FlowCapital,r.FClose=h.FClose),s+1<this.Data.length)){var l=this.Data[s+1];if(l&&l.Date!=h.Date){++s;break}}}else++o}}return e},this.GetMinuteCustomPeriodData=function(t){for(var e=new Array,a=t,i=!1,r=null,n=0;n<this.Data.length;){i=!0;for(var s=0;s<a&&n<this.Data.length;++n,++s){i&&(r=new W,e.push(r),i=!1);var o=this.Data[n];null!=o&&(r.Date=o.Date,r.Time=o.Time,null!=o.Open&&null!=o.Close&&(null==r.Open||null==r.Close?(r.Open=o.Open,r.High=o.High,r.Low=o.Low,r.YClose=o.YClose,r.Close=o.Close,r.Vol=o.Vol,r.Amount=o.Amount,r.FlowCapital=o.FlowCapital,r.Position=o.Position,r.YFClose=o.YFClose,r.FClose=o.FClose):(r.High<o.High&&(r.High=o.High),r.Low>o.Low&&(r.Low=o.Low),r.Close=o.Close,r.Vol+=o.Vol,null!=o.Amount&&(r.Amount+=o.Amount),r.Position=o.Position,r.FlowCapital=o.FlowCapital,r.FClose=o.FClose)))}}return e},this.GetDayPeriodData=function(t){if(t>Yr&&t<=Hr)return this.GetDayCustomPeriodData(t-Yr);var e=an.IsBIT(this.Symbol),a=new Array,i=0,r=2,n=null;for(var s in this.Data){var o=!1,h=this.Data[s];switch(t){case 1:if(e)var l=Z.GetSunday(h.Date);else var l=Z.GetFirday(h.Date);l!=i&&(o=!0,i=l);break;case 21:if(e)var l=Z.GetSunday(h.Date);else var l=Z.GetFirday(h.Date);l!=i&&(++r,r>=2&&(o=!0,r=0),i=l);break;case 2:parseInt(h.Date/100)!=parseInt(i/100)&&(o=!0,i=h.Date);break;case 3:parseInt(h.Date/1e4)!=parseInt(i/1e4)&&(o=!0,i=h.Date);break;case 22:var u=Z.GetHalfYear(h.Date);u!=i&&(o=!0,i=u);break;case 9:var c=Z.GetQuarter(h.Date);c=10*parseInt(h.Date/1e4)+c;var d=Z.GetQuarter(i);d=10*parseInt(i/1e4)+d,c!=d&&(o=!0,i=h.Date)}if(o){if(n=new W,n.Date=h.Date,a.push(n),null==h.Open||null==h.Close)continue;n.Open=h.Open,n.High=h.High,n.Low=h.Low,n.YClose=h.YClose,n.Close=h.Close,n.Vol=h.Vol,n.Amount=h.Amount,n.FlowCapital=h.FlowCapital,n.Position=h.Position,n.YFClose=h.YFClose,n.FClose=h.FClose}else{if(null==n)continue;if(null==h.Open||null==h.Close)continue;null==n.Open||null==n.Close?(n.Open=h.Open,n.High=h.High,n.Low=h.Low,n.YClose=h.YClose,n.Close=h.Close,n.Vol=h.Vol,n.Amount=h.Amount,n.FlowCapital=h.FlowCapital,n.Position=h.Position,n.YFClose=h.YFClose,n.FClose=h.FClose):(n.High<h.High&&(n.High=h.High),n.Low>h.Low&&(n.Low=h.Low),n.Close=h.Close,n.Vol+=h.Vol,null!=h.Amount&&(n.Amount+=h.Amount),n.Position=h.Position,n.FlowCapital=h.FlowCapital,n.Date=h.Date,n.FClose=h.FClose)}}return a},this.GetDayCustomPeriodData=function(t){for(var e=[],a=t,i=!1,r=null,n=0;n<this.Data.length;){i=!0;for(var s=0;s<a&&n<this.Data.length;++n,++s){i&&(r=new W,e.push(r),i=!1);var o=this.Data[n];null!=o&&(r.Date=o.Date,null!=o.Open&&null!=o.Close&&(null==r.Open||null==r.Close?(r.Open=o.Open,r.High=o.High,r.Low=o.Low,r.YClose=o.YClose,r.Close=o.Close,r.Vol=o.Vol,r.Amount=o.Amount,r.FlowCapital=o.FlowCapital,r.Position=o.Position,r.YFClose=o.YFClose,r.FClose=o.FClose):(r.High<o.High&&(r.High=o.High),r.Low>o.Low&&(r.Low=o.Low),r.Close=o.Close,r.Vol+=o.Vol,null!=o.Amount&&(r.Amount+=o.Amount),r.Position=o.Position,r.FlowCapital=o.FlowCapital,r.FClose=o.FClose)))}}return e},this.GetPeriodData=function(t){var e=Br.GetPeriodCallback(t);if(e)return e.Callback(t,this.Data,this);if(an.IsBIT(this.Symbol)&&(5==t||6==t||7==t||8==t||t>Vr&&t<=Gr)){var a=5;return 5==t?a=5:6==t?a=15:7==t?a=30:8==t?a=60:11==t?a=120:12==t?a=240:t>Vr&&t<=Gr&&(a=t-Vr),this.GetMinuteCustomPeriodData(a)}return Z.IsDayPeriod(t,!1)?this.GetDayPeriodData(t):Z.IsMinutePeriod(t,!1)?this.GetMinutePeriodData(t):void 0},this.GetRightData=function(t,e){var a=[];if(this.Data.length<=0)return a;if(e&&1==e.AlgorithmType){for(var i=0;i<this.Data.length;++i){var r=this.Data[i],n=1==t?r.BFactor:r.AFactor;a[i]=W.CopyRight(r,n)}return a}if(1==t){var s=this.Data.length-1,n=1,o=this.Data[s].YClose;for(a[s]=W.Copy(this.Data[s]),--s;s>=0&&o==this.Data[s].Close;--s)a[s]=W.Copy(this.Data[s]),o=this.Data[s].YClose;for(;s>=0;--s){var h=this.Data[s].Close;o!=h&&0!=h&&(n*=o/h),a[s]=W.CopyRight(this.Data[s],n),o=this.Data[s].YClose}}else if(2==t){var s=0,n=1,l=this.Data[s].Close;for(a[s]=W.Copy(this.Data[s]),++s;s<this.Data.length&&l==this.Data[s].YClose;++s)a[s]=W.Copy(this.Data[s]),l=this.Data[s].Close;for(;s<this.Data.length;++s)l!=this.Data[s].YClose&&(n*=l/this.Data[s].YClose),a[s]=W.CopyRight(this.Data[s],n),l=this.Data[s].Close}return a},this.GetRightDate=this.GetRightData,this.GetOverlayData=function(t,e){for(var a=[],i=0,r=0;i<this.Data.length;){var n=this.Data[i].Date;if(r>=t.length)a[i]=new W,a[i].Date=n,++i;else{var s=t[r].Date;s==n?(a[i]=new W,a[i].Date=t[r].Date,a[i].YClose=t[r].YClose,a[i].Open=t[r].Open,a[i].High=t[r].High,a[i].Low=t[r].Low,a[i].Close=t[r].Close,a[i].Vol=t[r].Vol,a[i].Amount=t[r].Amount,a[i].Stop=t[r].Stop,a[i].Up=t[r].Up,a[i].Down=t[r].Down,a[i].Unchanged=t[r].Unchanged,++r,++i):s<n?++r:(a[i]=new W,a[i].Date=n,++i)}}return a},this.GetOverlayMinuteData=function(t,e){for(var a=[],i=0,r=0;i<this.Data.length;){var n=this.Data[i].Date,s=this.Data[i].Time;if(r>=t.length)a[i]=new W,a[i].Date=n,a[i].Time=s,++i;else{var o=t[r].Date,h=t[r].Time;o==n&&h==s?(a[i]=new W,a[i].Date=t[r].Date,a[i].Time=t[r].Time,a[i].YClose=t[r].YClose,a[i].Open=t[r].Open,a[i].High=t[r].High,a[i].Low=t[r].Low,a[i].Close=t[r].Close,a[i].Vol=t[r].Vol,a[i].Amount=t[r].Amount,a[i].Stop=t[r].Stop,a[i].Up=t[r].Up,a[i].Down=t[r].Down,a[i].Unchanged=t[r].Unchanged,++r,++i):o<n||o==n&&h<s?++r:(a[i]=new W,a[i].Date=n,a[i].Time=s,++i)}}return a},this.GetFittingData=function(t){for(var e=new Array,a=0,i=0;a<this.Data.length;){var r=this.Data[a].Date;if(i>=t.length)e[a]=null,++a;else{var n=t[i].Date;if(n==r){var s=new z;s.Date=t[i].Date,s.Value=t[i].Value,e[a]=s,++i,++a}else n<r?++i:(e[a]=new z,e[a].Date=r,++a)}}return e},this.GetFittingData2=function(t,e){for(var a=new Array,i=0,r=0;i<this.Data.length;){var n=this.Data[i].Date;if(r>=t.length)a[i]=new z,a[i].Date=n,a[i].Value=e,++i;else{var s=t[r].Date;if(s==n){var o=new z;o.Date=t[r].Date,o.Value=t[r].Value,a[i]=o,++r,++i}else s<n?++r:(a[i]=new z,a[i].Date=n,a[i].Value=e,++i)}}return a},this.GetDateIndex=function(t){for(var e=0,a=0;e<this.Data.length;){var i=this.Data[e].Date;if(a>=t.length)break;var r=t[a];r.Date==i?(r.Index=e,++a):r.Date<i?++a:++e}},this.GetDateTimeIndex=function(t){for(var e=0,a=0;e<this.Data.length;){var i=this.Data[e].Date,r=this.Data[e].Time;if(a>=t.length)break;var n=t[a];n.Date==i&&n.Time==r?(n.Index=e,++a):n.Date<i||n.Date==i&&n.Time<r?++a:++e}},this.GetMinuteFittingData=function(t){for(var e=[],a=0,i=0;a<this.Data.length;){var r=this.Data[a].Date,n=this.Data[a].Time;if(i>=t.length)e[a]=null,++a;else{var s=t[i].Date,o=t[i].Time,h=t[i];if(s==r&&o==n){var l=new z;l.Date=h.Date,l.Time=h.Time,l.Value=h.Value,e[a]=l,++i,++a}else if(s<r||s==r&&o<n)++i;else{var l=new z;l.Date=r,l.Time=n,e[a]=l,++a}}}return e},this.GetFittingFinanceData=function(t){for(var e=[],a=0,i=0;a<this.Data.length;){var r=this.Data[a].Date;if(i<t.length){if(r<t[i].Date){++a;continue}}if(i+1<t.length&&t[i].Date<r&&t[i+1].Date<=r)++i;else{var n=new z;n.Date=r,i<t.length?(n.Value=t[i].Value,n.FinanceDate=t[i].Date):(n.Value=null,n.FinanceDate=null),e[a]=n,++a}}return e},this.GetMinuteFittingFinanceData=function(t){var e=[];if(!Array.isArray(t)||t.length<=0)return e;var a=0,i=t[0];for(a=0;a<this.Data.length;++a){var r=this.Data[a].Date,n=this.Data[a].Time;if(r>i.Date||r==i.Date&&n>=i.Time)break}for(var s=0;a<this.Data.length;){var r=this.Data[a].Date,n=this.Data[a].Time;if(s+1<t.length&&(t[s].Date<r&&t[s+1].Date<=r||t[s].Date==r&&t[s].Time<n&&t[s+1].Time<=n))++s;else{var o=new z;o.Date=r,o.Time=n,s<t.length?(o.Value=t[s].Value,o.FinanceDate=t[s].Date,o.FinanceTime=t[s].Time):(o.Value=null,o.FinanceDate=null,o.FinanceTime=null),e[a]=o,++a}}return e},this.GetFittingTradeData=function(t,e,a){for(var i=[],r=!1,n=0,s=0;n<this.Data.length;){var o=this.Data[n].Date;if(s<t.length&&t[s].Date>o){var h=new z;h.Date=o,h.Value=e,i[n]=h,++n}else if(s+1<t.length&&t[s].Date<o&&t[s+1].Date<=o)++s,r=!1;else{var h=new z;if(h.Date=o,h.Value=e,h.FinanceDate=null,s<t.length){var l=t[s];0==this.Period&&!0===a?l.Date==h.Date&&(h.Value=l.Value,h.FinanceDate=l.Date,r=!0):0==r&&(h.Value=l.Value,h.FinanceDate=l.Date,r=!0)}i[n]=h,++n}}return i},this.GetMinuteFittingTradeData=function(t,e,a){for(var i=[],r=!1,n=0,s=0;n<this.Data.length;){var o=this.Data[n].Date,h=this.Data[n].Time;if(s<t.length&&(t[s].Date>o||t[s].Date==o&&t[s].Time>h)){var l=new z;l.Date=o,l.Time=h,l.Value=e,i[n]=l,++n}else if(s+1<t.length&&(t[s].Date<o&&t[s+1].Date<=o||t[s].Date==o&&t[s].Time<h&&t[s+1].Time<=h))++s,r=!1;else{var l=new z;if(l.Date=o,l.FinanceDate=null,l.Time=h,l.Value=e,s<t.length){var u=t[s];4==this.Period&&!0===a?u.Date==l.Date&&u.Time==l.Time&&(l.Value=u.Value,l.FinanceDate=u.Date,l.FinanceTime=u.Time,r=!0):0==r&&(l.Value=u.Value,l.FinanceDate=u.Date,l.FinanceTime=u.Time,r=!0)}i[n]=l,++n}}return i},this.GetFittingMarketValueData=function(t){for(var e=[],a=0,i=0;a<this.Data.length;){var r=this.Data[a].Date,n=this.Data[a].Close;if(i+1<t.length&&t[i].Date<r&&t[i+1].Date<=r)++i;else{var s=new z;s.Date=r,s.Value=t[i].Value*n,s.FinanceDate=t[i].Date,e[a]=s,++a}}return e},this.GetFittingMonthData=function(t){for(var e=new Array,a=null,i=0,r=0;i<this.Data.length;){var n=this.Data[i].Date;if(r>=t.length)e[i]=null,++i;else{var s=t[r].Date;if(s==n){var o=new z;o.Date=t[r].Date,o.Value=t[r].Value,o.Text=t[r].Text,e[i]=o,++r,++i}else if(null!=a&&a<s&&n>s){var o=new z;o.Date=n,o.OverlayDate=t[r].Date,o.Value=t[r].Value,o.Text=t[r].Text,e[i]=o,++r,++i}else s<n?++r:(e[i]=new z,e[i].Date=n,++i);a=n}}return e},this.GetValue=function(){var t=[];for(var e in this.Data)if(this.Data[e]&&null!=this.Data[e].Value){var a=this.Data[e].Value;isNaN(a)?a instanceof Array?t[e]=a:t[e]=null:t[e]=a}else t[e]=null;return t},this.GetObject=function(){var t=[];for(var e in this.Data)if(this.Data[e]&&this.Data[e].Value){var a=this.Data[e].Value;t[e]=a}else t[e]=null;return t},this.GetPeriodSingleData=function(t){var e=new Array,a=0,i=2,r=null;for(var n in this.Data){var s=!1,o=this.Data[n];if(null!=o&&null!=o.Date){switch(t){case 1:var h=Z.GetFirday(o.Date);h!=a&&(s=!0,a=h);break;case 21:var h=Z.GetFirday(o.Date);h!=a&&(++i,i>=2&&(s=!0,i=0),a=h);break;case 2:parseInt(o.Date/100)!=parseInt(a/100)&&(s=!0,a=o.Date);break;case 3:parseInt(o.Date/1e4)!=parseInt(a/1e4)&&(s=!0,a=o.Date);break;case 9:var l=Z.GetQuarter(o.Date);l=10*parseInt(o.Date/1e4)+l;var u=Z.GetQuarter(a);u=10*parseInt(a/1e4)+u,l!=u&&(s=!0,a=o.Date)}if(s)r=new z,r.Date=o.Date,r.Value=o.Value,e.push(r);else{if(null==r)continue;if(null==o.Value||isNaN(o.Value))continue;(null==r.Value||isNaN(r.Value))&&(r.Value=o.Value)}}}return e},this.GetMinuteAvPrice=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].AvPrice;return t},this.MergeMinuteData=function(t){if(!this.Data||this.Data.length<=0)return this.Data=t,!0;for(var e=this.Data[0],a=0,i=null,r=0;r<t.length;++r){var n=t[r];if(n.Date>e.Date){a=r,i=n;break}if(n.Date==e.Date&&n.Time>=e.Time){a=r,i=n;break}}if(null==i)return!1;for(var s=null,o=!1,r=this.Data.length-1;r>=0;--r){var h=this.Data[r].Date,l=this.Data[r].Time;if(i.Date>h||i.Date==h&&i.Time>=l){s=r,i.Date==h&&i.Time==l&&(o=!0);break}}if(null==s)return!1;var u=s,r=a;if(1==o){var n=t[r];if(u-1>0){var c=this.Data[u-1];n.YClose||(n.YClose=c.Close),!he.IsNumber(n.FlowCapital)&&he.IsNumber(c.FlowCapital)&&(n.FlowCapital=c.FlowCapital)}var d=W.Copy(n);this.Data[u]=d,++u,++r}else++u;for(;r<t.length;){var n=t[r];if(u>=this.Data.length-1){if(u-1>0){var c=this.Data[u-1];n.YClose||(n.YClose=c.Close),!he.IsNumber(n.FlowCapital)&&he.IsNumber(c.FlowCapital)&&(n.FlowCapital=c.FlowCapital)}var d=W.Copy(n);this.Data[u]=d,++u,++r}else{var f=this.Data[u];f.Date==n.Date&&f.Time==n.Time?(W.CopyTo(f,n),++u,++r):++u}}return!0},this.ConverPeriod=function(t,e,a){for(var i=[],r=null,n=Z.IsMinutePeriod(e,!0),s=Z.IsMinutePeriod(a,!0),o=n&&s,h=n&&!s,l=!n&&!s,u=0,c=0;u<this.Data.length;++u){for(var d=this.Data[u];c<t.length;++c){var f=t[c];if(o){if(f.Date>d.Date||f.Date==d.Date&&f.Time>=d.Time){r=f;break}}else if((h||l)&&f.Date>=d.Date){r=f;break}}var m=null;r?(m=W.Copy(r),m.PDate=r.Date,m.PTime=r.Time):m=new W,m.Date=d.Date,(o||h)&&(m.Time=d.Time),i.push(m)}return Fr.Chart.Log("[ChartData::ConverPeriod] result",i),i},this.GetRef=function(t){for(var e=[],a=0;a<this.Data.length;++a){e[a]=null;var i=this.Data[a];if(a-t<0){var r=new W;r.Date=i.Date,r.Time=i.Time,e[a]=r}else{var n=this.Data[a-t],r=W.Copy(n);r.Date=i.Date,r.Time=i.Time,e[a]=r}}return e},this.FitKLineIndex=function(t,e,a,i){for(var r=this.Data.length,n=t.length,s=[Z.IsMinutePeriod(a,!0),Z.IsMinutePeriod(i,!0)],o=[Z.IsDayPeriod(a,!0),Z.IsDayPeriod(i,!0)],h=Z.GetKLineDataTime(this.Data[0]),l=[],u=n,c=0;c<n;++c){var d=Z.GetKLineDataTime(t[c]);if(o[0]&&o[1]||s[0]&&o[1]){if(d.Date>=h.Date){u=c;break}}else if(s[0]&&s[1]){if(d.Date>h.Date){u=c;break}if(d.Date==h.Date&&d.Time>=h.Time){u=c;break}}}for(var c=0,f=u;c<r;){var d=Z.GetKLineDataTime(this.Data[c]);if(f>=n){var m={Date:d.Date,Time:d.Time,Index:-1};l[c]=m,++c}else{var C=Z.GetKLineDataTime(t[f]);if(o[0]&&o[1]||s[0]&&o[1])if(C.Date==d.Date){var m={Date:d.Date,Time:d.Time,Index:f,Data2:C.Date,Time2:C.Time};l[c]=m,++c}else if(f+1<n){var p=Z.GetKLineDataTime(t[f+1]);if(C.Date<=d.Date&&p.Date>d.Date){var m={Date:d.Date,Time:d.Time,Index:f+1,Data2:p.Date,Time2:p.Time};l[c]=m,++c}else if(p.Date<=d.Date)++f;else{var m={Date:d.Date,Time:d.Time,Index:-1};l[c]=m,++c}}else++f;else if(s[0]&&s[1])if(C.Date==d.Date&&C.Time==d.Time){var m={Date:d.Date,Time:d.Time,Index:f,Data2:C.Date,Time2:C.Time};l[c]=m,++c}else if(f+1<n){var p=Z.GetKLineDataTime(t[f+1]);if(C.Date<d.Date&&p.Date>d.Date||C.Date==d.Date&&C.Time<d.Time&&p.Date==d.Date&&p.Time>d.Time||C.Date==d.Date&&C.Time<d.Time&&p.Date>d.Date||C.Date<d.Date&&p.Date==d.Date&&p.Time>d.Time){var m={Date:d.Date,Time:d.Time,Index:f+1,Data2:p.Date,Time2:p.Time};l[c]=m,++c}else if(p.Date<d.Date||p.Date==d.Date&&p.Time<=d.Time)++f;else{var m={Date:d.Date,Time:d.Time,Index:-1};l[c]=m,++c}}else++f}}var D=[];for(var c in e){var d=e[c];if(Array.isArray(d.Data)){var v=[];D[c]={Data:v,Name:d.Name};for(var f=0;f<l.length;++f){var g=l[f];v[f]=null,g&&g.Index>=0&&g.Index<d.Data.length&&(v[f]=d.Data[g.Index])}}else D[c]={Data:d.Data,Name:d.Name}}return D},this.FindDataIndexByDateTime=function(t){var e=0;for(var a in t)t[a].Index=-1;for(var a in this.Data){var i=this.Data[a];for(var r in t){var n=t[r];if(!(n.Index>=0)){if(he.IsNumber(n.Time)){if(n.Date==i.Date&&n.Time==i.Time){n.Index=parseInt(a),++e;break}}else if(n.Date==i.Date){n.Index=parseInt(a),++e;break}if(e>=t.length)break}}}},this.CloneData=function(t){var e=[];if("HistoryData"==t)for(var a in this.Data){var i=this.Data[a],r=W.Copy(i);e.push(r)}return e},this.GetAPIDataIndex=function(t,e){var a=[];if(t&&e){for(var i=this.Data.length,r=t.length,n=Z.GetKLineDataTime(this.Data[0]),s=r,s=r,o=0;o<r;++o){var h=t[o],l=e[o];if(h>n.Date||h==n.Date&&l>=n.Time){s=o;break}}for(var o=0,u=s;o<i;){var c=this.Data[o];if(u>=r){var d={KDate:c.Date,KTime:c.Time,KIndex:o,Index:-1};a[o]=d,++o}else{var h=t[u],l=e[u];if(h==c.Date&&l==c.Time){var d={KDate:c.Date,KTime:c.Time,KIndex:o,Index:u,Data:h,Time:l};a[o]=d,++o}else if(u+1<r){var f=t[u+1],m=e[u+1];if(h<c.Date&&f>c.Date||h==c.Date&&l<c.Time&&f==c.Date&&m>c.Time||h==c.Date&&l<c.Time&&f>c.Date||h<c.Date&&f==c.Date&&m>c.Time){var d={KDate:c.Date,KTime:c.Time,KIndex:o,Index:u,Data:h,Time:l};a[o]=d,++o}else if(f<c.Date||f==c.Date&&m<=c.Time)++u;else{var d={KDate:c.Date,KTime:c.Time,KIndex:o,Index:-1};a[o]=d,++o}}else++u}}}else if(t){for(var i=this.Data.length,r=t.length,n=Z.GetKLineDataTime(this.Data[0]),s=r,o=0;o<r;++o){var c=t[o];if(c>=n.Date){s=o;break}}for(var o=0,u=s;o<i;){var c=this.Data[o];if(u>=r){var d={KDate:c.Date,KIndex:o,Index:-1};a[o]=d,++o}else{var C=t[u];if(C==c.Date){var d={KDate:c.Date,KIndex:o,Index:u,Data:C};a[o]=d,++o}else if(u+1<r){var p=t[u+1];if(C<=c.Date&&p>c.Date){var d={KDate:c.Date,KIndex:o,Index:u,Data:C};a[o]=d,++o}else if(p<=c.Date)++u;else{var d={KDate:c.Date,KIndex:o,Index:-1};a[o]=d,++o}}else++u}}}return a},this.FixKData=function(t,e){return Z.IsDayPeriod(e,!0)?this.FixKData_Day(t):Z.IsMinutePeriod(e,!0)?this.FixKData_Minute(t):null},this.FixKData_Day=function(t){for(var e=[],a=t.length,i=0,r=0;i<this.Data.length;){var n=this.Data[i];if(r<a){var s=t[r];if(s.Date>n.Date){++i;continue}}if(r+1<a){var s=t[r],o=t[r+1];if(s.Date<n.Date&&o.Date<=n.Date){++r;continue}}var h=new W;h.Date=n.Date;var l=r<a?r:a-1,s=t[l];h.Close=s.Close,h.High=s.High,h.Low=s.Low,h.Open=s.Open,h.YClose=s.YClose,h.Amount=s.Amount,h.Vol=s.Vol,h.ExDate=s.Date,e[i]=h,++i}return e},this.FixKData_Minute=function(t){for(var e=[],a=t.length,i=0,r=0;i<this.Data.length;){var n=this.Data[i],s=Z.DateTimeToNumber(n);if(r<a){var o=t[r],h=Z.DateTimeToNumber(o);if(h>s){++i;continue}}if(r+1<a){var o=t[r],l=t[r+1],h=Z.DateTimeToNumber(o),u=Z.DateTimeToNumber(l);if(h<s&&u<=s){++r;continue}}var c=new W;c.Date=n.Date,c.Time=n.Time;var d=r<a?r:a-1,o=t[d];c.Close=o.Close,c.High=o.High,c.Low=o.Low,c.Open=o.Open,c.YClose=o.YClose,c.Amount=o.Amount,c.Vol=o.Vol,c.ExDate=o.Date,c.ExTime=o.Time,e[i]=c,++i}return e}}function Q(){this.ChartPaint,this.Data,this.Type=0}function $(t,e,a,i){this.X=t,this.Y=e,this.Width=a,this.Height=i}function tt(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.ClassName="IChartPainting",this.Data=new Z,this.NotSupportMessage=null,this.MessageFont=$r.Index.NotSupport.Font,this.MessageColor=$r.Index.NotSupport.TextColor,this.IsDrawFirst=!1,this.IsShow=!0,this.GetEventCallback,this.Draw=function(){},this.GetBorder=function(){return this.ChartFrame.IsHScreen?this.ChartBorder.GetHScreenBorder():this.ChartBorder.GetBorder()},this.ClipClient=function(t){if(1==t)var e=this.ChartBorder.GetLeftEx(),a=this.ChartBorder.GetRightEx(),i=this.ChartBorder.GetTop(),r=this.ChartBorder.GetBottom();else var e=this.ChartBorder.GetLeft(),a=this.ChartBorder.GetRight(),i=this.ChartBorder.GetTopEx(),r=this.ChartBorder.GetBottomEx();this.Canvas.beginPath(),this.Canvas.rect(e,i,a-e,r-i),this.Canvas.clip()},this.GetYFromData=function(t,e){return this.ChartFrame.GetYFromData(t,e)},this.IsMinuteFrame=function(){return"MinuteFrame"==this.ChartFrame.ClassName||"MinuteHScreenFrame"==this.ChartFrame.ClassName||"OverlayMinuteFrame"==this.ChartFrame.ClassName||"OverlayMinuteHScreenFrame"==this.ChartFrame.ClassName},this.DrawNotSupportmessage=function(){this.Canvas.font=this.MessageFont,this.Canvas.fillStyle=this.MessageColor;var t=this.ChartBorder.GetLeft(),e=this.ChartBorder.GetWidth(),a=this.ChartBorder.GetTopEx(),i=this.ChartBorder.GetHeightEx(),r=t+e/2,n=a+i/2;this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillText(this.NotSupportMessage,r,n)},this.GetTooltipData=function(t,e,a){return!1},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={};if(e.Min=null,e.Max=null,!this.Data||!this.Data.Data)return e;for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];null==r||isNaN(r)||(null==e.Max&&(e.Max=r),null==e.Min&&(e.Min=r),e.Max<r&&(e.Max=r),e.Min>r&&(e.Min=r))}return e},this.GetDynamicFont=function(t,e,a,i,r,n){var s=c();if(a*=s,i*=s,a==i){var o=a.toFixed(0)+"px "+n;return o}var h=t+e;r&&(0==r.Type?r.Value>0&&(h=t*r.Value):1==r.Type?r.Value>0&&(h=(t+e)*r.Value):2==r.Type&&he.IsNumber(r.Value)&&(h=t+e+2*r.Value*s)),h<i?h=i:h>a&&(h=a);var o=h.toFixed(0)+"px "+n;return o},this.GetLockRect=function(){return this.ChartFrame.GetLockRect()},this.SetFillStyle=function(t,e,a,i,r){if(Array.isArray(t)){var n=this.Canvas.createLinearGradient(e,a,i,r),s=1/t.length;for(var o in t)n.addColorStop(o*s,t[o]);this.Canvas.fillStyle=n}else this.Canvas.fillStyle=t},this.GetDynamicIconSize=function(t,e,a,i,r){var n=c();if(a*=n,i*=n,a==i)return a;var s=t+e-2*n;return r&&(0==r.Type?r.Value>0&&(s=t*r.Value):1==r.Type?r.Value>0&&(s=(t+e)*r.Value):2==r.Type&&he.IsNumber(r.Value)&&(s=t+e+2*r.Value*n)),s<i?s=i:s>a&&(s=a),s},this.GetFontHeight=function(t){return d(this.Canvas,t,"擎")}}function et(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.ClassName="ChartKLine",this.Symbol,this.DrawType=0,this.CloseLineColor=$r.CloseLineColor,this.CloseLineAreaColor=$r.CloseLineAreaColor,this.CloseLineWidth=$r.CloseLineWidth,this.UpColor=$r.UpBarColor,this.DownColor=$r.DownBarColor,this.UnchagneColor=$r.UnchagneBarColor,this.ColorData,this.TradeData,this.TradeIcon=$r.KLine.TradeIcon,this.TooltipRect=[],this.InfoTooltipRect=[],this.TradeIconTooltipRect=[],this.IsShowMaxMinPrice=!0,this.IsShowKTooltip=!0,this.TextFont=$r.KLine.MaxMin.Font,this.TextColor=$r.KLine.MaxMin.Color,this.InfoData,this.InfoPosition=0,this.PtMax,this.PtMin,this.TickSymbol="╳",this.TickFontName="arial",this.Period,this.ShowRange={},this.CustomKLine,this.DrawKRange={Start:null,End:null},this.OrderFlow={UpColor:{BG:$r.OrderFlow.UpColor.BG,Border:$r.OrderFlow.UpColor.Border},DownColor:{BG:$r.OrderFlow.DownColor.BG,Border:$r.OrderFlow.DownColor.Border},UnchagneColor:{BG:$r.OrderFlow.UnchagneColor.BG,Border:$r.OrderFlow.UnchagneColor.Border},Text:{Color:$r.OrderFlow.Text.Color,Family:$r.OrderFlow.Text.Family,FontMaxSize:$r.OrderFlow.Text.FontMaxSize,MaxValue:$r.OrderFlow.Text.MaxValue},Line:{UpDownColor:$r.OrderFlow.Line.UpDownColor,MiddleColor:$r.OrderFlow.Line.MiddleColor},ShowType:0,AlwaysShowOrderText:$r.OrderFlow.AlwaysShowOrderText},this.IsShowOrderText=!1,this.ReloadResource=function(t){this.TextFont=$r.KLine.MaxMin.Font,this.TextColor=$r.KLine.MaxMin.Color,this.CloseLineColor=$r.CloseLineColor,this.CloseLineAreaColor=$r.CloseLineAreaColor,this.CloseLineWidth=$r.CloseLineWidth,this.UpColor=$r.UpBarColor,this.DownColor=$r.DownBarColor,this.UnchagneColor=$r.UnchagneBarColor,this.OrderFlow.UpColor={BG:$r.OrderFlow.UpColor.BG,Border:$r.OrderFlow.UpColor.Border},this.OrderFlow.DownColor={BG:$r.OrderFlow.DownColor.BG,Border:$r.OrderFlow.DownColor.Border},this.OrderFlow.UnchagneColor={BG:$r.OrderFlow.UnchagneColor.BG,Border:$r.OrderFlow.UnchagneColor.Border},this.OrderFlow.Text={Color:$r.OrderFlow.Text.Color,Family:$r.OrderFlow.Text.Family,FontMaxSize:$r.OrderFlow.Text.FontMaxSize,MaxValue:$r.OrderFlow.Text.MaxValue},this.OrderFlow.Line={UpDownColor:$r.OrderFlow.Line.UpDownColor,MiddleColor:$r.OrderFlow.Line.MiddleColor}},this.ClearCustomKLine=function(){this.CustomKLine=null},this.GetCustomKLine=function(t){if(!this.CustomKLine)return null;if(!t)return null;var e=1e6*t.Date;return he.IsNumber(t.Time)&&(e+=t.Time),this.CustomKLine.has(e)?this.CustomKLine.get(e):null},this.DrawAKLine=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartFrame.XPointCount;if(t)var r=this.ChartBorder.GetHScreenBorder(),n=r.TopEx+a/2+$r.FrameLeftMargin,s=r.BottomEx;else var r=this.ChartBorder.GetBorder(),n=r.LeftEx+a/2+$r.FrameLeftMargin,s=r.RightEx;for(var o=(this.UpColor,this.DownColor,this.UnchagneColor,{X:null,Y:null,Value:null,Align:"left"}),h={X:null,Y:null,Value:null,Align:"left"},l=this.Data.DataOffset,u=0;l<this.Data.Data.length&&u<i;++l,++u,n+=e+a){var c=this.Data.Data[l];if(null!=c.Open&&null!=c.High&&null!=c.Low&&null!=c.Close){var d=n,f=n+e;if(f>s)break;var m=d+(f-d)/2,C=this.GetYFromData(c.Low,!1),p=this.GetYFromData(c.High,!1),v=this.GetYFromData(c.Open,!1),g=this.GetYFromData(c.Close,!1);if((null==o.Value||o.Value<c.High)&&(o.X=m,o.Y=p,o.Value=c.High,o.Align=u<i/2?"left":"right"),(null==h.Value||h.Value>c.Low)&&(h.X=m,h.Y=C,h.Value=c.Low,h.Align=u<i/2?"left":"right"),c.Open<c.Close?this.Canvas.strokeStyle=this.UpColor:c.Open>c.Close?this.Canvas.strokeStyle=this.DownColor:this.Canvas.strokeStyle=this.UnchagneColor,this.ColorData&&(l<this.ColorData.length&&this.ColorData[l]>0?this.UpColor:this.DownColor),this.Canvas.beginPath(),t?(this.Canvas.moveTo(p,D(m)),this.Canvas.lineTo(C,D(m))):(this.Canvas.moveTo(D(m),p),this.Canvas.lineTo(D(m),C)),this.Canvas.stroke(),e>=4&&(this.Canvas.beginPath(),t?(this.Canvas.moveTo(D(v),d),this.Canvas.lineTo(D(v),m)):(this.Canvas.moveTo(d,D(v)),this.Canvas.lineTo(m,D(v))),this.Canvas.stroke(),this.Canvas.beginPath(),t?(this.Canvas.moveTo(D(g),f),this.Canvas.lineTo(D(g),m)):(this.Canvas.moveTo(f,D(g)),this.Canvas.lineTo(m,D(g))),this.Canvas.stroke()),0==this.Data.DataType){var S={Xleft:d,XRight:f,YMax:p,XCenter:m,YMin:C,DayData:c,Index:u};this.DrawInfo(S)}}}this.PtMax=o,this.PtMin=h},this.DrawCloseArea=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartFrame.XPointCount;if(t)var r=this.ChartBorder.GetHScreenBorder(),n=r.TopEx+a/2+$r.FrameLeftMargin,s=r.BottomEx;else var r=this.ChartBorder.GetBorder(),n=r.LeftEx+a/2+$r.FrameLeftMargin,s=r.RightEx;var o=!0,h=null;this.Canvas.beginPath(),this.Canvas.strokeStyle=this.CloseLineColor,he.IsNumber(this.CloseLineWidth)&&(this.Canvas.lineWidth=this.CloseLineWidth);for(var l=null,u=this.Data.DataOffset,c=0;u<this.Data.Data.length&&c<i;++u,++c,n+=e+a){var d=this.Data.Data[u];if(null!=d.Open&&null!=d.High&&null!=d.Low&&null!=d.Close){var f=n,m=n+e;if(m>s)break;var C=f+(m-f)/2,p=this.GetYFromData(d.Close,!1);o?(t?(this.Canvas.moveTo(p,C),h={X:p,Y:C}):(this.Canvas.moveTo(C,p),h={X:C,Y:p}),o=!1):t?this.Canvas.lineTo(p,C):this.Canvas.lineTo(C,p),u==this.Data.Data.length-1&&(l={X:C,Y:p,XLeft:f,XRight:m,KItem:d,ChartRight:s})}}if(this.DrawLastPointEvent(l),!o){if(this.Canvas.stroke(),t?(this.Canvas.lineTo(r.Left,C),this.Canvas.lineTo(r.Left,h.Y)):(this.Canvas.lineTo(C,r.Bottom),this.Canvas.lineTo(h.X,r.Bottom)),this.Canvas.closePath(),Array.isArray(this.CloseLineAreaColor))if(t){var D=this.Canvas.createLinearGradient(this.ChartBorder.GetRightEx(),this.ChartBorder.GetTop(),this.ChartBorder.GetLeft(),this.ChartBorder.GetTop());D.addColorStop(0,this.CloseLineAreaColor[0]),D.addColorStop(1,this.CloseLineAreaColor[1]),this.Canvas.fillStyle=D}else{var v=this.Canvas.createLinearGradient(h.X,this.ChartBorder.GetTopEx(),h.X,this.ChartBorder.GetBottom());v.addColorStop(0,this.CloseLineAreaColor[0]),v.addColorStop(1,this.CloseLineAreaColor[1]),this.Canvas.fillStyle=v}else this.Canvas.fillStyle=this.CloseLineAreaColor;this.Canvas.fill()}},this.DrawCloseLine=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartFrame.XPointCount;if(t)var r=this.ChartBorder.GetHScreenBorder(),n=r.TopEx+a/2+$r.FrameLeftMargin,s=r.BottomEx;else var r=this.ChartBorder.GetBorder(),n=r.LeftEx+a/2+$r.FrameLeftMargin,s=r.RightEx;var o=!0;this.Canvas.beginPath(),this.Canvas.strokeStyle=this.CloseLineColor,he.IsNumber(this.CloseLineWidth)&&(this.Canvas.lineWidth=this.CloseLineWidth);for(var h=this.Data.DataOffset,l=0;h<this.Data.Data.length&&l<i;++h,++l,n+=e+a){var u=this.Data.Data[h];if(null!=u.Open&&null!=u.High&&null!=u.Low&&null!=u.Close){var c=n,d=n+e;if(d>s)break;var f=c+(d-c)/2,m=this.GetYFromData(u.Close,!1);o?(t?this.Canvas.moveTo(m,f):this.Canvas.moveTo(f,m),o=!1):t?this.Canvas.lineTo(m,f):this.Canvas.lineTo(f,m)}}0==o&&this.Canvas.stroke()},this.DrawKBar=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetBorder(),r=i.LeftEx+a/2+$r.FrameLeftMargin,n=i.RightEx,s=this.ChartFrame.XPointCount;if(t){var i=this.ChartBorder.GetHScreenBorder();r=i.TopEx+a/2+$r.FrameLeftMargin,n=i.BottomEx}var o={X:null,Y:null,Value:null,Align:"left"},h={X:null,Y:null,Value:null,Align:"left"},l=this.UpColor,u=this.DownColor,c=this.UnchagneColor;this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=s;var d=null;this.DrawKRange.Start=this.Data.DataOffset;for(var f=this.Data.DataOffset,m=0;f<this.Data.Data.length&&m<s;++f,++m,r+=e+a,++this.ShowRange.DataCount){var C=this.Data.Data[f];if(this.ShowRange.End=f,null!=C.Open&&null!=C.High&&null!=C.Low&&null!=C.Close){var p=r,D=r+e;if(D>n)break;var v=p+(D-p)/2,g=this.GetYFromData(C.Low,!1),S=this.GetYFromData(C.High,!1),T=this.GetYFromData(C.Open,!1),y=this.GetYFromData(C.Close,!1),I=S;this.DrawKRange.End=f,(null==o.Value||o.Value<C.High)&&(o.X=v,o.Y=S,o.Value=C.High,o.Align=m<s/2?"left":"right"),(null==h.Value||h.Value>C.Low)&&(h.X=v,h.Y=g,h.Value=C.Low,h.Align=m<s/2?"left":"right"),this.ColorData&&(l=u=c=f<this.ColorData.length&&this.ColorData[f]>0?this.UpColor:this.DownColor);var x=this.GetCustomKLine(C);if(x){var L=x.Color;L||(L=C.Open<C.Close?l:C.Open>C.Close?u:c);var M=this.DrawType;he.IsNumber(x.DrawType)&&(M=x.DrawType),this.DrawKBar_Custom(C,e,L,M,x,v,I,p,D,g,S,T,y,i,t)}else C.Open<C.Close?this.DrawKBar_Up(C,e,l,this.DrawType,v,I,p,D,g,S,T,y,t):C.Open>C.Close?this.DrawKBar_Down(C,e,u,this.DrawType,v,I,p,D,g,S,T,y,t):this.DrawKBar_Unchagne(C,e,c,this.DrawType,v,I,p,D,g,S,T,y,t);if(this.IsShowKTooltip&&!t){var _=Math.min(T,y),b=Math.max(T,y);Math.abs(T-y)<5&&(_=Math.min(S,_-5),b=Math.max(g,b+5));var w=new $(p,_,e,b-_);this.TooltipRect.push([f,w])}if(0==this.Data.DataType){var F={Xleft:p,XRight:D,XCenter:v,YMax:S,YMin:g,DayData:C,Index:m};this.DrawInfo(F)}f==this.Data.Data.length-1&&(d={X:v,Y:y,XLeft:p,XRight:D,KItem:C,ChartRight:n})}}this.DrawLastPointEvent(d),this.PtMax=o,this.PtMin=h},this.DrawKBar_Up=function(t,e,a,i,r,n,s,o,h,l,u,c,d){var f=3==i||6==i;if(e>=4){if(f&&e%2!=0&&(e-=1),this.Canvas.strokeStyle=a,t.High>t.Close){if(this.Canvas.beginPath(),d)this.Canvas.moveTo(D(n),D(r)),this.Canvas.lineTo(D(3==i?Math.max(c,u):c),D(r));else if(f){var m=s+e/2;this.Canvas.moveTo(D(m),D(n)),this.Canvas.lineTo(D(m),D(Math.min(c,u)))}else this.Canvas.moveTo(D(r),D(n)),this.Canvas.lineTo(D(r),D(c));this.Canvas.stroke(),n=c}else n=c;if(this.Canvas.fillStyle=a,d?Math.abs(u-n)<1?this.Canvas.fillRect(g(n),g(s),1,g(e)):f?(this.Canvas.beginPath(),this.Canvas.rect(D(n),D(s),g(u-n),g(e)),this.Canvas.stroke()):this.Canvas.fillRect(g(n),g(s),g(u-n),g(e)):Math.abs(u-n)<1?this.Canvas.fillRect(g(s),g(n),g(e),1):f?(this.Canvas.beginPath(),this.Canvas.rect(D(s),D(n),g(e),g(u-n)),this.Canvas.stroke()):this.Canvas.fillRect(g(s),g(Math.min(n,u)),g(e),g(Math.abs(u-n))),t.Open>t.Low){if(this.Canvas.beginPath(),d)this.Canvas.moveTo(D(3==i?Math.min(c,u):n),D(r)),this.Canvas.lineTo(D(h),D(r));else if(f){var m=s+e/2;this.Canvas.moveTo(D(m),D(Math.max(c,u))),this.Canvas.lineTo(D(m),D(h))}else this.Canvas.moveTo(D(r),D(n)),this.Canvas.lineTo(D(r),D(h));this.Canvas.stroke()}}else this.Canvas.beginPath(),d?(this.Canvas.moveTo(l,D(r)),this.Canvas.lineTo(h,D(r))):(this.Canvas.moveTo(D(r),l),this.Canvas.lineTo(D(r),h)),this.Canvas.strokeStyle=a,this.Canvas.stroke()},this.DrawKBar_Down=function(t,e,a,i,r,n,s,o,h,l,u,c,d){var f=6==i;if(e>=4){if(f&&e%2!=0&&(e-=1),this.Canvas.strokeStyle=a,t.High>t.Close){if(this.Canvas.beginPath(),d)this.Canvas.moveTo(D(n),D(r)),this.Canvas.lineTo(D(u),D(r));else if(f){var m=s+e/2;this.Canvas.moveTo(D(m),D(n)),this.Canvas.lineTo(D(m),D(Math.min(c,u)))}else this.Canvas.moveTo(D(r),D(n)),this.Canvas.lineTo(D(r),D(u));this.Canvas.stroke(),n=u}else n=u;if(this.Canvas.fillStyle=a,d?Math.abs(c-n)<1?this.Canvas.fillRect(g(n),g(s),1,g(e)):this.Canvas.fillRect(g(n),g(s),g(c-n),g(e)):Math.abs(c-n)<1?this.Canvas.fillRect(g(s),g(n),g(e),1):f?(this.Canvas.beginPath(),this.Canvas.rect(D(s),D(Math.min(n,c)),g(e),g(Math.abs(c-n))),this.Canvas.stroke()):this.Canvas.fillRect(g(s),g(Math.min(n,c)),g(e),g(Math.abs(c-n))),t.Open>t.Low){if(this.Canvas.beginPath(),d)this.Canvas.moveTo(D(n),D(r)),this.Canvas.lineTo(D(h),D(r));else if(f){var m=s+e/2;this.Canvas.moveTo(D(m),D(Math.max(c,u))),this.Canvas.lineTo(D(m),D(h))}else this.Canvas.moveTo(D(r),D(n)),this.Canvas.lineTo(D(r),D(h));this.Canvas.stroke()}}else this.Canvas.beginPath(),d?(this.Canvas.moveTo(l,D(r)),this.Canvas.lineTo(h,D(r))):(this.Canvas.moveTo(D(r),l),this.Canvas.lineTo(D(r),h)),this.Canvas.strokeStyle=a,this.Canvas.stroke()},this.DrawKBar_Unchagne=function(t,e,a,i,r,n,s,o,h,l,u,c,d){if(e>=4){if(e%2!=0&&(e-=1),this.Canvas.strokeStyle=a,this.Canvas.beginPath(),t.High>t.Close){if(d)this.Canvas.moveTo(n,D(r)),this.Canvas.lineTo(u,D(r));else{var f=D(s+e/2);this.Canvas.moveTo(f,n),this.Canvas.lineTo(f,u)}n=u}else n=u;if(d?(this.Canvas.moveTo(D(n),D(s)),this.Canvas.lineTo(D(n),D(o))):(this.Canvas.moveTo(D(s),D(n)),this.Canvas.lineTo(D(s+e),D(n))),t.Open>t.Low)if(d)this.Canvas.moveTo(D(n),D(r)),this.Canvas.lineTo(D(h),D(r));else{var f=D(s+e/2);this.Canvas.moveTo(f,D(n)),this.Canvas.lineTo(f,D(h))}this.Canvas.stroke()}else this.Canvas.beginPath(),d?(this.Canvas.moveTo(l,D(r)),this.Canvas.lineTo(h,D(r))):(this.Canvas.moveTo(D(r),l),this.Canvas.lineTo(D(r),h)),this.Canvas.strokeStyle=a,this.Canvas.stroke()},this.DrawKBar_Custom=function(t,e,a,i,r,n,s,o,h,l,u,c,d,f,m){if(r.BGColor){this.Canvas.fillStyle=r.BGColor;var C=this.ChartFrame.DistanceWidth;if(m){var p=o-C/2,v=h+C/2,S=f.RightEx,T=f.LeftEx;this.Canvas.fillRect(g(T),g(p),g(S-T),g(v-p))}else{var y=o-C/2,I=h+C/2,x=f.TopEx,L=f.BottomEx;this.Canvas.fillRect(g(y),g(x),g(I-y),g(L-x))}}e>=4?(this.Canvas.strokeStyle=a,t.High>t.Close?(this.Canvas.beginPath(),m?(this.Canvas.moveTo(D(s),D(n)),this.Canvas.lineTo(D(3==i?Math.max(d,c):d),D(n))):(this.Canvas.moveTo(D(n),D(s)),this.Canvas.lineTo(D(n),D(3==i?Math.min(d,c):d))),this.Canvas.stroke(),s=d):s=d,this.Canvas.fillStyle=a,m?Math.abs(c-s)<1?this.Canvas.fillRect(g(s),g(o),1,g(e)):3==i?(this.Canvas.beginPath(),this.Canvas.rect(D(s),D(o),g(c-s),g(e)),this.Canvas.stroke()):this.Canvas.fillRect(g(s),g(o),g(c-s),g(e)):Math.abs(c-s)<1?this.Canvas.fillRect(g(o),g(s),g(e),1):3==i?(this.Canvas.beginPath(),this.Canvas.rect(D(o),D(s),g(e),g(c-s)),this.Canvas.stroke()):this.Canvas.fillRect(g(o),g(Math.min(s,c)),g(e),g(Math.abs(c-s))),t.Open>t.Low&&(this.Canvas.beginPath(),m?(this.Canvas.moveTo(D(3==i?Math.min(d,c):s),D(n)),this.Canvas.lineTo(D(l),D(n))):(this.Canvas.moveTo(D(n),D(3==i?Math.max(d,c):s)),this.Canvas.lineTo(D(n),D(l))),this.Canvas.stroke())):(this.Canvas.beginPath(),m?(this.Canvas.moveTo(u,D(n)),this.Canvas.lineTo(l,D(n))):(this.Canvas.moveTo(D(n),u),this.Canvas.lineTo(D(n),l)),this.Canvas.strokeStyle=a,this.Canvas.stroke())},this.DrawTrade=function(){if(this.TradeData){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetLeft()+a/2+2,r=this.ChartBorder.GetRight(),n=this.ChartFrame.XPointCount;t&&(i=this.ChartBorder.GetTop()+a/2+2,r=this.ChartBorder.GetBottom());var s=this.TradeData.Sell,o=this.TradeData.Buy,h=e;h>10&&(h=10);for(var l=this.Data.DataOffset,u=0;l<this.Data.Data.length&&u<n;++l,++u,i+=e+a){var c=this.Data.Data[l];if(null!=c.Open&&null!=c.High&&null!=c.Low&&null!=c.Close){var d=!1,f=!1;if(s&&l<s.length&&(f=s[l]>0),o&&l<o.length&&(d=o[l]>0),f||d){var m=i,C=i+e;if(C>r)break;var p=m+(C-m)/2,D=this.GetYFromData(c.Low,!1),v=this.GetYFromData(c.High,!1);this.GetYFromData(c.Open,!1),this.GetYFromData(c.Close,!1);d&&(this.Canvas.fillStyle=this.UpColor,this.Canvas.strokeStyle=this.UnchagneColor,this.Canvas.beginPath(),t?(this.Canvas.moveTo(D-1,p),this.Canvas.lineTo(D-h-1,p-h/2),this.Canvas.lineTo(D-h-1,p+h/2)):(this.Canvas.moveTo(p,D+1),this.Canvas.lineTo(p-h/2,D+h+1),this.Canvas.lineTo(p+h/2,D+h+1)),this.Canvas.closePath(),this.Canvas.fill(),this.Canvas.stroke()),f&&(this.Canvas.fillStyle=this.DownColor,this.Canvas.strokeStyle=this.UnchagneColor,this.Canvas.beginPath(),t?(this.Canvas.moveTo(v+1,p),this.Canvas.lineTo(v+h+1,p-h/2),this.Canvas.lineTo(v+h+1,p+h/2)):(this.Canvas.moveTo(p,v-1),this.Canvas.lineTo(p-h/2,v-h-1),this.Canvas.lineTo(p+h/2,v-h-1)),this.Canvas.closePath(),this.Canvas.fill(),this.Canvas.stroke())}}}}},this.DrawTick=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetLeft()+a/2+2;t&&(i=this.ChartBorder.GetTop()+a/2+2);var r=this.ChartBorder.GetRight();t&&(r=this.ChartBorder.GetBottom());var n=this.ChartFrame.XPointCount,s=parseInt(e);s<=1?s=2:s>=18&&(s=18);var o=c(),h=s*o;this.Canvas.beginPath(),this.Canvas.font=s*o+"px "+this.TickFontName;for(var l=this.Data.DataOffset,u=0;l<this.Data.Data.length&&u<n;++l,++u,i+=e+a){var d=this.Data.Data[l];if(null!=d.Open&&null!=d.High&&null!=d.Low&&null!=d.Close){var f=i,m=i+e;if(m>r)break;var C=f+(m-f)/2,p=this.ChartFrame.GetYFromData(d.Close,!1);if(0===d.Flag?this.Canvas.fillStyle=this.UpColor:1==d.Flag?this.Canvas.fillStyle=this.DownColor:this.Canvas.fillStyle=this.UnchagneColor,this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",t?this.Canvas.fillText(this.TickSymbol,p,C):this.Canvas.fillText(this.TickSymbol,C,p),this.IsShowKTooltip&&!t){var D=new $(C-h/2,p-h/2,h,h);this.TooltipRect.push([l,D])}}}},this.ClipTickClient=function(t){var e=this.GetBorder();if(1==t)var a=this.ChartBorder.GetLeftEx(),i=this.ChartBorder.GetRightEx(),r=this.ChartBorder.GetTop(),n=this.ChartBorder.GetBottom();else var a=e.Left,i=e.Right,r=e.TopTitle,n=e.Bottom;this.Canvas.beginPath(),this.Canvas.rect(a,r,i-a,n-r),this.Canvas.clip()},this.Draw=function(){if(this.IsShowOrderText=!1,this.TooltipRect=[],this.InfoTooltipRect=[],this.TradeIconTooltipRect=[],this.PtMax={X:null,Y:null,Value:null,Align:"left"},this.PtMin={X:null,Y:null,Value:null,Align:"left"},this.DrawKRange={Start:null,End:null},this.ChartFrame.ChartKLine={Max:null,Min:null},this.IsShow){if(Z.IsTickPeriod(this.Period))return this.Canvas.save(),1==this.DrawType?(this.ClipClient(this.ChartFrame.IsHScreen),this.DrawCloseLine()):(this.ClipTickClient(this.ChartFrame.IsHScreen),this.DrawTick()),void this.Canvas.restore();if(this.Canvas.save(),this.ClipClient(this.ChartFrame.IsHScreen),1==this.DrawType)return this.DrawCloseLine(),void this.Canvas.restore();2==this.DrawType?this.DrawAKLine():4==this.DrawType?this.DrawCloseArea():5==this.DrawType?this.DrawOrderFlow():this.DrawKBar(),this.TradeIcon?this.DrawTradeIcon():this.DrawTrade(),this.Canvas.restore(),this.IsShowMaxMinPrice&&(!0===this.ChartFrame.IsHScreen?this.HScreenDrawMaxMinPrice(this.PtMax,this.PtMin):this.DrawMaxMinPrice(this.PtMax,this.PtMin))}},this.DrawMaxMinPrice=function(t,e){if(null!=t.X&&null!=t.Y&&null!=t.Value&&null!=e.X&&null!=e.Y&&null!=e.Value){var a=$r.KLine.MaxMin.LeftArrow,i=$r.KLine.MaxMin.RightArrow,r=$r.KLine.MaxMin.HighYOffset,n=$r.KLine.MaxMin.LowYOffset,s=Oi(this.Symbol);this.Canvas.font=this.TextFont,this.Canvas.fillStyle=this.TextColor;var o=this.ChartBorder.GetTopEx(),h=this.ChartBorder.GetBottomEx(),l=t;1==this.ChartFrame.CoordinateType?(t.Y<e.Y&&(l=e),this.Canvas.textBaseline="top"):(t.Y>e.Y&&(l=e),this.Canvas.textBaseline="bottom"),this.Canvas.textAlign=l.Align;var u=(l.Align,l.X);he.IsNumber(r)&&(l.Y+=r);var c=l.Value.toFixed(s);"left"==l.Align?c=a+c:c+=i,l.Y>o-2&&(this.Canvas.fillText(c,u,l.Y),this.ChartFrame.ChartKLine.Max={X:u,Y:l.Y,Text:{BaseLine:"bottom"}});var d=e;1==this.ChartFrame.CoordinateType?(e.Y>t.Y&&(d=t),this.Canvas.textBaseline="bottom"):(t.Y>e.Y&&(l=e),this.Canvas.textBaseline="top"),this.Canvas.textAlign=d.Align;var u=(d.Align,d.X);he.IsNumber(n)&&(d.Y+=n);var c=e.Value.toFixed(s);"left"==d.Align?c=a+c:c+=i,d.Y<h+1&&(this.Canvas.fillText(c,u,d.Y),this.ChartFrame.ChartKLine.Min={X:u,Y:d.Y,Text:{BaseLine:"top"}})}},this.HScreenDrawMaxMinPrice=function(t,e){if(null!=t.X&&null!=t.Y&&null!=t.Value&&null!=e.X&&null!=e.Y&&null!=e.Value){var a=$r.KLine.MaxMin.LeftArrow,i=$r.KLine.MaxMin.RightArrow,r=$r.KLine.MaxMin.HighYOffset,n=$r.KLine.MaxMin.LowYOffset,s=Oi(this.Symbol),o=t.Y,h=t.X;he.IsNumber(r)&&(o+=r),this.Canvas.save(),this.Canvas.translate(o,h),this.Canvas.rotate(90*Math.PI/180),this.Canvas.font=this.TextFont,this.Canvas.fillStyle=this.TextColor,this.Canvas.textAlign=t.Align,this.Canvas.textBaseline="bottom";var l=t.Value.toFixed(s);"left"==t.Align?l=a+l:l+=i,this.Canvas.fillText(l,0,0),this.Canvas.restore();var o=e.Y,h=e.X;he.IsNumber(n)&&(o+=n),this.Canvas.save(),this.Canvas.translate(o,h),this.Canvas.rotate(90*Math.PI/180),this.Canvas.font=this.TextFont,this.Canvas.fillStyle=this.TextColor,this.Canvas.textAlign=e.Align,this.Canvas.textBaseline="top";var l=e.Value.toFixed(s);"left"==e.Align?l=a+l:l+=i,this.Canvas.fillText(l,0,0),this.Canvas.restore()}},this.DrawInfo=function(t){if(this.InfoData&&!(this.InfoData.length<=0)){var e=!0===this.ChartFrame.IsHScreen,a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartBorder.GetBottom(),n=this.ChartBorder.GetTop(),s=this.InfoData.get(t.DayData.Date.toString());if(s&&!(s.Data.length<=0)){var o=c(),h=a+i,l=18*o,u=!0;h<=15&&(u=!1),h<l&&(h=l);var d="",f=new _r.default,m=t.YMax+1*o,C=t.YMin+1*o+h,p=!0,D=0;for(var v in s.Data){var g=s.Data[v],S=f.get(g.InfoType);if(S)S.Data.push(g);else{var T=ti.GetIconFont(g.InfoType);if(this.Canvas.fillStyle=T.Color,this.Canvas.font=h+"px "+T.Family,e){this.Canvas.textBaseline="middle",this.Canvas.textAlign="left",this.Canvas.fillText(T.HScreenText,m,t.XCenter,h);var y=new $(t.XCenter-h/2,m-h,h,h),I={Data:new Array(g),Rect:y,Type:g.InfoType,TextRect:{X:m,Y:t.XCenter}};f.set(g.InfoType,I),m+=h}else if(this.Canvas.textBaseline="bottom",this.Canvas.textAlign="center",1===this.InfoPosition){var x=r+D;this.Canvas.fillText(T.Text,t.XCenter,x,h);var y=new $(t.XCenter-h/2,x-h,h,h),I={Data:new Array(g),Rect:y,Type:g.InfoType,TextRect:{X:t.XCenter,Y:x}};f.set(g.InfoType,I),D-=h}else if(p){this.Canvas.fillText(T.Text,t.XCenter,m,h);var y=new $(t.XCenter-h/2,m-h,h,h),I={Data:new Array(g),Rect:y,Type:g.InfoType,TextRect:{X:t.XCenter,Y:m}};f.set(g.InfoType,I),m-=h,m-h<n&&(p=!1)}else{this.Canvas.fillText(T.Text,t.XCenter,C,h);var y=new $(t.XCenter-h/2,C-h,h,h),I={Data:new Array(g),Rect:y,Type:g.InfoType,TextRect:{X:t.XCenter,Y:C}};f.set(g.InfoType,I),C+=h}}}var L;$r.KLine.NumIcon&&(L=e?$r.KLine.NumIcon.HScreenText:$r.KLine.NumIcon.Text);var M=!0,_=!1,b=void 0;try{for(var w,F=(0,Tr.default)(f);!(M=(w=F.next()).done);M=!0){var t=w.value,E=t[1];if(E.Data.length>=2&&L&&u){var A=E.Data.length;A>=L.length&&(A=0),this.Canvas.fillStyle=$r.KLine.NumIcon.Color;var d=L[A];this.Canvas.fillText(d,E.TextRect.X,E.TextRect.Y,h)}e||this.InfoTooltipRect.push(E)}}catch(t){_=!0,b=t}finally{try{!M&&F.return&&F.return()}finally{if(_)throw b}}}}},this.DrawTradeIcon=function(){if(this.TradeData){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetLeft()+a/2+2,r=this.ChartBorder.GetRight(),n=this.ChartFrame.XPointCount;t&&(i=this.ChartBorder.GetTop()+a/2+2,r=this.ChartBorder.GetBottom());var s=this.TradeData.Sell,o=this.TradeData.Buy,h=e+a,l=c(),u=24*l,d=12*l;h<d?h=d:h>u&&(h=u),this.Canvas.font=h+"px "+this.TradeIcon.Family;for(var f=this.Data.DataOffset,m=0;f<this.Data.Data.length&&m<n;++f,++m,i+=e+a){var C=this.Data.Data[f];if(null!=C.Open&&null!=C.High&&null!=C.Low&&null!=C.Close){var p=!1,D=!1;if(s&&f<s.length&&(D=s[f]>0),o&&f<o.length&&(p=o[f]>0),D||p){var v=i,g=i+e;if(g>r)break;var S=v+(g-v)/2,T=this.GetYFromData(C.Low,!1),y=this.GetYFromData(C.High,!1);this.GetYFromData(C.Open,!1),this.GetYFromData(C.Close,!1);if(p)if(this.Canvas.fillStyle=this.TradeIcon.Buy.Color,t)this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillText(this.TradeIcon.Buy.HScreenText,T,S);else{this.Canvas.textAlign="center",this.Canvas.textBaseline="top",this.Canvas.fillText(this.TradeIcon.Buy.Text,S,T);var I=new $(S-h/2,T,h,h),x={Data:{Type:1,KData:C,Name:this.TradeData.Name,Param:this.TradeData.Param},Rect:I,TextRect:{X:S,Y:T}};this.TradeIconTooltipRect.push(x)}if(D)if(this.Canvas.fillStyle=this.TradeIcon.Sell.Color,t)this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillText(this.TradeIcon.Sell.HScreenText,y,S);else{this.Canvas.textAlign="center",this.Canvas.textBaseline="bottom",this.Canvas.fillText(this.TradeIcon.Sell.Text,S,y);var I=new $(S-h/2,y-h,h,h),x={Data:{Type:2,KData:C,Name:this.TradeData.Name,Param:this.TradeData.Param},Rect:I,TextRect:{X:S,Y:y}};this.TradeIconTooltipRect.push(x)}}}}}},this.GetTooltipData=function(t,e,a){for(var i in this.TradeIconTooltipRect){var r=this.TradeIconTooltipRect[i];if(r.Rect){var n=r.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(n.X,n.Y,n.Width,n.Height),this.Canvas.isPointInPath(t,e))return Fr.Chart.Log("[ChartKLine::GetTooltipData] trade icon ",r),a.Data=r,a.ChartPaint=this,a.Type=2,!0}}for(var i in this.InfoTooltipRect){var r=this.InfoTooltipRect[i];if(r.Rect){var n=r.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(n.X,n.Y,n.Width,n.Height),this.Canvas.isPointInPath(t,e))return a.Data=r,a.ChartPaint=this,a.Type=1,!0}}for(var i in this.TooltipRect){var n=this.TooltipRect[i][1];if(this.Canvas.beginPath(),this.Canvas.rect(n.X,n.Y,n.Width,n.Height),this.Canvas.isPointInPath(t,e)){var s=this.TooltipRect[i][0];return a.Data=this.Data.Data[s],a.ChartPaint=this,a.Type=0,!0}}return!1},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={};if(e.Max=null,e.Min=null,1==this.DrawType||4==this.DrawType)for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];he.IsNumber(r.Close)&&(null==e.Max&&(e.Max=r.Close),null==e.Min&&(e.Min=r.Close),e.Max<r.Close&&(e.Max=r.Close),e.Min>r.Close&&(e.Min=r.Close))}else for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(null!=r.Open&&null!=r.High&&null!=r.Low&&null!=r.Close)if(5==this.DrawType&&r.OrderFlow&&he.IsNumber(r.OrderFlow.PriceOffset)){var n=r.High,s=r.Low;if(he.IsNonEmptyArray(r.OrderFlow.High))for(var o=0;o<r.OrderFlow.High.length;++o){var h=r.OrderFlow.High[o];n<h.Price&&(n=h.Price)}if(he.IsNonEmptyArray(r.OrderFlow.Low))for(var o=0;o<r.OrderFlow.Low.length;++o){var h=r.OrderFlow.Low[o];s>h.Price&&(s=h.Price)}n+=r.OrderFlow.PriceOffset,s-=r.OrderFlow.PriceOffset,null==e.Max&&(e.Max=n),null==e.Min&&(e.Min=s),e.Max<n&&(e.Max=n),e.Min>s&&(e.Min=s)}else null==e.Max&&(e.Max=r.High),null==e.Min&&(e.Min=r.Low),e.Max<r.High&&(e.Max=r.High),e.Min>r.Low&&(e.Min=r.Low)}return e},this.GetAllPrice=function(){for(var t=this.ChartFrame.XPointCount,e=new Ir.default,a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(null!=r.Open&&null!=r.High&&null!=r.Low&&null!=r.Close){var n=r.Close;e.add(n)}}var s=[],o=!0,h=!1,l=void 0;try{for(var u,c=(0,Tr.default)(e);!(o=(u=c.next()).done);o=!0){var d=u.value;s.push(d)}}catch(t){h=!0,l=t}finally{try{!o&&c.return&&c.return()}finally{if(h)throw l}}return s.sort(function(t,e){return t-e}),s},this.DrawLastPointEvent=function(t){if(this.GetEventCallback){var e=this.GetEventCallback(Nr.ON_DRAW_KLINE_LAST_POINT);if(e){var a={Data:this.ChartFrame.DataWidth,Distance:this.ChartFrame.DistanceWidth};if(t)var i={LastPoint:{X:t.X,Y:t.Y,XLeft:t.XLeft,XRight:t.XRight},KItem:t.KItem,DrawType:this.DrawType,KWidth:a,ChartRight:t.ChartRight};else var i={LastPoint:null,KItem:null,KWidth:a};e.Callback(e,i,this)}}},this.DrawOrderFlow=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetBorder(),r=i.LeftEx+a/2+$r.FrameLeftMargin,n=i.RightEx,s=this.ChartFrame.XPointCount;if(t){var i=this.ChartBorder.GetHScreenBorder();r=i.TopEx+a/2+$r.FrameLeftMargin,n=i.BottomEx}this.UpColor,this.DownColor,this.UnchagneColor;this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=s;for(var o=this.ChartFrame.HorizontalMax,h=this.ChartFrame.HorizontalMin,l=this.Data.DataOffset,u=this.Data.DataOffset+s,c=0;c<this.Data.Data.length;++c){var d=this.Data.Data[c];if(d&&d.OrderFlow&&he.IsNonEmptyArray(d.OrderFlow.Order))for(var f=0;f<d.OrderFlow.Order.length;++f){var m=d.OrderFlow.Order[f];if(m.HBar&&(he.IsNumber(m.HBar.Width)&&he.IsNumber(m.Price)&&!(m.Price>o||m.Price<h))){var C=Math.ceil(c+m.HBar.Width),p=Math.min(c,C),D=Math.max(c,C);D<l||p>u||this.DrawOrderFlowHBar(c,d.OrderFlow,m,e,a)}}}for(var c=this.Data.DataOffset,f=0;c<this.Data.Data.length&&f<s;++c,++f,r+=e+a,++this.ShowRange.DataCount){var v=this.Data.Data[c];if(this.ShowRange.End=c,null!=v.Open&&null!=v.High&&null!=v.Low&&null!=v.Close){var g=r,S=r+e;if(S>n)break;var T=g+(S-g)/2,y=this.GetYFromData(v.Low,!1),I=this.GetYFromData(v.High,!1),x=this.GetYFromData(v.Open,!1),L=this.GetYFromData(v.Close,!1),M={Low:y,High:I,Open:x,Close:L},_={Left:g,Center:T,Right:S,DataWidth:e};if(this.DrawOrderFlowBar(v.OrderFlow,v,_,M,t),this.IsShowKTooltip&&!t){var b=Math.min(x,L),w=Math.max(x,L);Math.abs(x-L)<5&&(b=Math.min(I,b-5),w=Math.max(y,w+5));var F=new $(g,b,e,w-b);this.TooltipRect.push([c,F])}if(0==this.Data.DataType){var E={Xleft:g,XRight:S,XCenter:T,YMax:I,YMin:y,DayData:v,Index:f};this.DrawInfo(E)}c==this.Data.Data.length-1&&{X:T,Y:L,XLeft:g,XRight:S,KItem:v,ChartRight:n}}}},this.DrawOrderFlowBar=function(t,e,a,i,r){var n=Math.min(i.Open,i.Close),s=Math.max(i.Open,i.Close),o=Math.abs(i.Open-i.Close),h=0;t&&he.IsNumber(t.PriceOffset)&&(h=this.GetPriceYOffset(t.PriceOffset));var l=this.GetDynamicOrderFlowFont(h,a.DataWidth/2);this.IsShowOrderText=h>5&&a.DataWidth>10,this.OrderFlow.AlwaysShowOrderText&&(this.IsShowOrderText=!0);var u;u=e.Open<e.Close?this.OrderFlow.UpColor:e.Open>e.Close?this.OrderFlow.DownColor:this.OrderFlow.UnchagneColor;var c=a.DataWidth<4;c?(this.Canvas.strokeStyle=u.Border,this.Canvas.beginPath(),this.Canvas.moveTo(D(a.Center),n-h/2),this.Canvas.lineTo(D(a.Center),s+h/2),this.Canvas.stroke()):(this.Canvas.fillStyle=u.BG,this.Canvas.fillRect(g(a.Left),g(n-h/2),g(a.DataWidth),g(o+h))),this.Canvas.textBaseline="middle",this.Canvas.textAlign="center",this.Canvas.font=l;var d=a.DataWidth/2,f=d/2;if(t&&he.IsNonEmptyArray(t.Order))for(var m=0;m<t.Order.length;++m){var C=t.Order[m],p=this.GetYFromData(C.Price,!1),v={Left:a.Left,Right:a.Center,Bottom:p+h/2,Top:p-h/2};v.Width=v.Right-v.Left,v.Height=v.Bottom-v.Top,C.Ask.BG&&(this.Canvas.fillStyle=C.Ask.BG,this.Canvas.fillRect(g(v.Left),g(v.Top),g(v.Width),g(v.Height)));var S=null;if(he.IsString(C.Ask.Text)?S=C.Ask.Text:he.IsNumber(C.Ask.Value)&&(S=C.Ask.Value.toString()),S&&this.IsShowOrderText)if(C.Ask.Color?this.Canvas.fillStyle=C.Ask.Color:this.Canvas.fillStyle=this.OrderFlow.Text.Color,C.Ask.Font){var T=this.GetDynamicOrderFlowFont(h,a.DataWidth/2,C.Ask.Font);this.Canvas.font=T,this.Canvas.fillText(S,a.Left+f,p),this.Canvas.font=l}else this.Canvas.fillText(S,a.Left+f,p);var v={Left:a.Center,Right:a.Right,Bottom:p+h/2,Top:p-h/2};v.Width=v.Right-v.Left,v.Height=v.Bottom-v.Top,C.Bid.BG&&(this.Canvas.fillStyle=C.Bid.BG,this.Canvas.fillRect(g(v.Left),g(v.Top),g(v.Width),g(v.Height)));var S=null;if(he.IsString(C.Bid.Text)?S=C.Bid.Text:he.IsNumber(C.Bid.Value)&&(S=C.Bid.Value.toString()),S&&this.IsShowOrderText)if(C.Bid.Color?this.Canvas.fillStyle=C.Bid.Color:this.Canvas.fillStyle=this.OrderFlow.Text.Color,C.Bid.Font){var T=this.GetDynamicOrderFlowFont(h,a.DataWidth/2,C.Bid.Font);this.Canvas.font=T,this.Canvas.fillText(S,a.Center+f,p),this.Canvas.font=l}else this.Canvas.fillText(S,a.Center+f,p)}(i.High<n||i.Low>s)&&(this.Canvas.strokeStyle=this.OrderFlow.Line.UpDownColor,i.High<n&&(this.Canvas.beginPath(),this.Canvas.moveTo(D(a.Center),i.High-h/2),this.Canvas.lineTo(D(a.Center),n-h/2),this.Canvas.stroke()),i.Low>s&&(this.Canvas.beginPath(),this.Canvas.moveTo(D(a.Center),i.Low+h/2),this.Canvas.lineTo(D(a.Center),s+h/2),this.Canvas.stroke())),!c&&Math.abs(i.Open-i.Close)>1&&(this.Canvas.strokeStyle=this.OrderFlow.Line.MiddleColor,this.Canvas.beginPath(),this.Canvas.moveTo(D(a.Center),n-h/2),this.Canvas.lineTo(D(a.Center),s+h/2),this.Canvas.stroke()),c||(this.Canvas.beginPath(),this.Canvas.strokeStyle=u.Border,this.Canvas.rect(D(a.Left),D(n-h/2),g(a.DataWidth),g(o+h)),this.Canvas.stroke());var l=this.GetDynamicOrderFlowFont(h,a.DataWidth);if(t&&he.IsNonEmptyArray(t.High)&&this.IsShowOrderText)for(var m=0;m<t.High.length;++m){var S,C=t.High[m];if(he.IsString(C.Text)?S=C.Text:he.IsNumber(C.Value)&&(S=C.Value.toString()),S){C.Color?this.Canvas.fillStyle=C.Color:this.Canvas.fillStyle=this.OrderFlow.Text.Color;var p=this.GetYFromData(C.Price,!1);if(C.Font){var T=this.GetDynamicOrderFlowFont(h,a.DataWidth,C.Font);this.Canvas.font=T,this.Canvas.fillText(S,a.Center,p),this.Canvas.font=l}else this.Canvas.fillText(S,a.Center,p)}}if(t&&he.IsNonEmptyArray(t.Low)&&this.IsShowOrderText)for(var m=0;m<t.Low.length;++m){var S,C=t.Low[m];if(he.IsString(C.Text)?S=C.Text:he.IsNumber(C.Value)&&(S=C.Value.toString()),S){C.Color?this.Canvas.fillStyle=C.Color:this.Canvas.fillStyle=this.OrderFlow.Text.Color;var p=this.GetYFromData(C.Price,!1);if(C.Font){var T=this.GetDynamicOrderFlowFont(h,a.DataWidth,C.Font);this.Canvas.font=T,this.Canvas.fillText(S,a.Center,p),this.Canvas.font=l}else this.Canvas.fillText(S,a.Center,p)}}},this.GetPriceYOffset=function(t){var e=this.ChartFrame;return e.ChartBorder.GetHeightEx()*t/(e.HorizontalMax-e.HorizontalMin)},this.GetDynamicOrderFlowFont=function(t,e,a){var i=parseInt(t)-2;t<5&&(i=parseInt(t)),i>this.OrderFlow.Text.FontMaxSize?i=this.OrderFlow.Text.FontMaxSize:i<=0&&(i=1);for(var r=this.FormatFontString(i,this.OrderFlow.Text.Family,a),n=i;n>0;n-=2){var r=this.FormatFontString(n,this.OrderFlow.Text.Family,a);this.Canvas.font=r;if(this.Canvas.measureText(this.OrderFlow.Text.MaxValue).width+2<e)break}return r},this.FormatFontString=function(t,e,a){var i;return a?a.Weight&&(i=a.Weight+" "+t+"px "+e):i=t+"px "+e,i},this.DrawOrderFlowHBar=function(t,e,a,i,r){var n=this.ShowRange.Start,s=(this.ShowRange.Start,this.ShowRange.ShowCount,this.GetYFromData(a.Price,!1)),o=parseInt(t+a.HBar.Width),h=t-n,l=o-n;if(h<0&&(h=0),l<0&&(l=0),h<=l){var u=(this.ChartBorder.GetRight(),this.ChartFrame.XPointCount,n),c=this.GetPriceYOffset(e.PriceOffset),d=this.ChartFrame.GetXFromIndex(h)-i/2;if(1==a.HBar.Type)for(var f=0,m=t+1;f<a.HBar.Width&&m<this.Data.Data.length;++f,++m){var C=this.Data.Data[m];if(C.Close<a.Price){l=m-1-u;break}}else if(2==a.HBar.Type)for(var f=0,m=t+1;f<a.HBar.Width&&m<this.Data.Data.length;++f,++m){var C=this.Data.Data[m];if(C.Close>a.Price){l=m-1-u;break}}if(l<0)return;var p=this.ChartFrame.GetXFromIndex(l)+i/2,D=s-c/2,v=c+.5;he.IsNumber(a.HBar.Height)&&(v=a.HBar.Height*c+.1);var S=a.HBar.Width-parseInt(a.HBar.Width);S>1e-6&&(p+=(i+r)*S),this.Canvas.fillStyle=a.HBar.Color,this.Canvas.fillRect(g(d),g(D),g(p-d),g(v))}}}function at(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.ClassName="ChartColorKline",this.Symbol,this.Color="rgb(0,255,44)",this.IsEmptyBar=!1,this.DrawType=0,this.KLineColor,this.DrawName,this.Draw=function(){if(this.IsShow)if("DRAWCOLORKLINE"==this.DrawName)this.DrawColorBar();else{if(!this.KLineColor)return;this.DrawBar()}},this.DrawUpBarItem=function(t,e,a,i){var r=!0===this.ChartFrame.IsHScreen,n=e,s=e+a,o=n+(s-n)/2,h=this.ChartFrame.GetYFromData(t.Low),l=this.ChartFrame.GetYFromData(t.High),u=this.ChartFrame.GetYFromData(t.Open),c=this.ChartFrame.GetYFromData(t.Close),d=l;a>=4?(t.High>t.Close?(this.Canvas.beginPath(),r?(this.Canvas.moveTo(D(d),D(o)),this.Canvas.lineTo(D(3==this.DrawType?Math.max(c,u):c),D(o))):(this.Canvas.moveTo(D(o),D(d)),this.Canvas.lineTo(D(o),D(3==this.DrawType?Math.min(c,u):c))),this.Canvas.stroke(),d=c):d=c,r?Math.abs(u-d)<1?this.Canvas.fillRect(g(d),g(n),1,g(a)):3==this.DrawType?(this.Canvas.beginPath(),this.Canvas.rect(D(d),D(n),g(u-d),g(a)),this.Canvas.stroke()):this.Canvas.fillRect(g(d),g(n),g(u-d),g(a)):Math.abs(u-d)<1?this.Canvas.fillRect(g(n),g(d),g(a),1):3==this.DrawType?(this.Canvas.beginPath(),this.Canvas.rect(D(n),D(d),g(a),g(u-d)),this.Canvas.stroke()):this.Canvas.fillRect(g(n),g(Math.min(d,u)),g(a),g(Math.abs(u-d))),t.Open>t.Low&&(this.Canvas.beginPath(),r?(this.Canvas.moveTo(D(3==this.DrawType?Math.min(c,u):d),D(o)),this.Canvas.lineTo(D(h),D(o))):(this.Canvas.moveTo(D(o),D(3==this.DrawType?Math.max(c,u):d)),this.Canvas.lineTo(D(o),D(h))),this.Canvas.stroke())):(this.Canvas.beginPath(),r?(this.Canvas.moveTo(l,D(o)),this.Canvas.lineTo(h,D(o))):(this.Canvas.moveTo(D(o),l),this.Canvas.lineTo(D(o),h)),this.Canvas.stroke())},this.DrawDownBarItem=function(t,e,a,i){var r=!0===this.ChartFrame.IsHScreen,n=e,s=e+a,o=n+(s-n)/2,h=this.ChartFrame.GetYFromData(t.Low),l=this.ChartFrame.GetYFromData(t.High),u=this.ChartFrame.GetYFromData(t.Open),c=this.ChartFrame.GetYFromData(t.Close),d=l;a>=4?(t.High>t.Close?(this.Canvas.beginPath(),r?(this.Canvas.moveTo(D(d),D(o)),this.Canvas.lineTo(D(u),D(o))):(this.Canvas.moveTo(D(o),D(d)),this.Canvas.lineTo(D(o),D(u))),this.Canvas.stroke(),d=u):d=u,r?Math.abs(c-d)<1?this.Canvas.fillRect(g(d),g(n),1,g(a)):this.Canvas.fillRect(g(d),g(n),g(c-d),g(a)):Math.abs(c-d)<1?this.Canvas.fillRect(g(n),g(d),g(a),1):this.Canvas.fillRect(g(n),g(Math.min(d,c)),g(a),g(Math.abs(c-d))),t.Open>t.Low&&(this.Canvas.beginPath(),r?(this.Canvas.moveTo(D(d),D(o)),this.Canvas.lineTo(D(h),D(o))):(this.Canvas.moveTo(D(o),D(d)),this.Canvas.lineTo(D(o),D(h))),this.Canvas.stroke())):(this.Canvas.beginPath(),r?(this.Canvas.moveTo(l,D(o)),this.Canvas.lineTo(h,D(o))):(this.Canvas.moveTo(D(o),l),this.Canvas.lineTo(D(o),h)),this.Canvas.stroke())},this.DrawUnChangeBarItem=function(t,e,a,i){var r=!0===this.ChartFrame.IsHScreen,n=e,s=e+a,o=n+(s-n)/2,h=this.ChartFrame.GetYFromData(t.Low),l=this.ChartFrame.GetYFromData(t.High),u=this.ChartFrame.GetYFromData(t.Open),c=(this.ChartFrame.GetYFromData(t.Close),l);a>=4?(this.Canvas.beginPath(),t.High>t.Close?(r?(this.Canvas.moveTo(c,D(o)),this.Canvas.lineTo(u,D(o))):(this.Canvas.moveTo(D(o),c),this.Canvas.lineTo(D(o),u)),c=u):c=u,r?(this.Canvas.moveTo(D(c),D(n)),this.Canvas.lineTo(D(c),D(s))):(this.Canvas.moveTo(D(n),D(c)),this.Canvas.lineTo(D(s),D(c))),t.Open>t.Low&&(r?(this.Canvas.moveTo(D(c),D(o)),this.Canvas.lineTo(D(h),D(o))):(this.Canvas.moveTo(D(o),D(c)),this.Canvas.lineTo(D(o),D(h)))),this.Canvas.stroke()):(this.Canvas.beginPath(),r?(this.Canvas.moveTo(l,D(o)),this.Canvas.lineTo(h,D(o))):(this.Canvas.moveTo(D(o),l),this.Canvas.lineTo(D(o),h)),this.Canvas.stroke())},this.DrawBar=function(){var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartBorder.GetLeft()+e/2+2,i=this.ChartBorder.GetRight(),r=this.ChartFrame.XPointCount;this.IsHScreen&&(a=this.ChartBorder.GetTop()+e/2+2,i=this.ChartBorder.GetBottom());for(var n=this.Data.DataOffset,s=0;n<this.Data.Data.length&&s<r;++n,++s,a+=t+e){var o=this.Data.Data[n];if(null!=o.Open&&null!=o.High&&null!=o.Low&&null!=o.Close&&this.KLineColor.has(n)){var h=this.KLineColor.get(n);if(a+t>i)break;h.Color?(this.Canvas.strokeStyle=h.Color,this.Canvas.fillStyle=h.Color):(this.Canvas.strokeStyle=this.Color,this.Canvas.fillStyle=this.Color),o.Open<o.Close?this.DrawUpBarItem(o,a,t,h):o.Open>o.Close?this.DrawDownBarItem(o,a,t,h):this.DrawUnChangeBarItem(o,a,t,h)}}},this.DrawColorBar=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetBorder(),r=i.LeftEx+a/2+$r.FrameLeftMargin,n=i.RightEx,s=this.ChartFrame.XPointCount;if(t){var i=this.ChartBorder.GetHScreenBorder();r=i.TopEx+a/2+$r.FrameLeftMargin,n=i.BottomEx}for(var o=this.Data.DataOffset,h=0;o<this.Data.Data.length&&h<s;++o,++h,r+=e+a){var l=this.Data.Data[o];if(l&&(he.IsNumber(l.Open)&&he.IsNumber(l.High)&&he.IsNumber(l.Low)&&he.IsNumber(l.Close))){var u=r,c=r+e;if(c>n)break;var d=u+(c-u)/2,f=this.GetYFromData(l.Low,!1),m=this.GetYFromData(l.High,!1),C=this.GetYFromData(l.Open,!1),p=this.GetYFromData(l.Close,!1),D=m;l.Open==l.Close?this.DrawKBar_Unchagne(l,e,this.Color,this.IsEmptyBar,d,D,u,c,f,m,C,p,t):this.DrawKBar_Custom(l,e,this.Color,this.IsEmptyBar,d,D,u,c,f,m,C,p,t)}}},this.DrawKBar_Unchagne=function(t,e,a,i,r,n,s,o,h,l,u,c,d){if(e>=4){if(e%2!=0&&(e-=1),this.Canvas.strokeStyle=a,this.Canvas.beginPath(),t.High>t.Close){if(d)this.Canvas.moveTo(n,D(r)),this.Canvas.lineTo(u,D(r));else{var f=D(s+e/2);this.Canvas.moveTo(f,n),this.Canvas.lineTo(f,u)}n=u}else n=u;if(d?(this.Canvas.moveTo(D(n),D(s)),this.Canvas.lineTo(D(n),D(o))):(this.Canvas.moveTo(D(s),D(n)),this.Canvas.lineTo(D(s+e),D(n))),t.Open>t.Low)if(d)this.Canvas.moveTo(D(n),D(r)),this.Canvas.lineTo(D(h),D(r));else{var f=D(s+e/2);this.Canvas.moveTo(f,D(n)),this.Canvas.lineTo(f,D(h))}this.Canvas.stroke()}else this.Canvas.beginPath(),d?(this.Canvas.moveTo(l,D(r)),this.Canvas.lineTo(h,D(r))):(this.Canvas.moveTo(D(r),l),this.Canvas.lineTo(D(r),h)),this.Canvas.strokeStyle=a,this.Canvas.stroke()},this.DrawKBar_Custom=function(t,e,a,i,r,n,s,o,h,l,u,c,d){if(i&&e%2!=0&&(e-=1),e>=4){if(this.Canvas.strokeStyle=a,t.High>t.Close){if(this.Canvas.beginPath(),d)this.Canvas.moveTo(D(n),D(r)),this.Canvas.lineTo(D(i?Math.max(c,u):c),D(r));else if(i){var f=s+e/2;this.Canvas.moveTo(D(f),D(n)),this.Canvas.lineTo(D(f),D(Math.min(c,u)))}else this.Canvas.moveTo(D(r),D(n)),this.Canvas.lineTo(D(r),D(c));this.Canvas.stroke(),n=c}else n=c;if(this.Canvas.fillStyle=a,d?Math.abs(u-n)<1?this.Canvas.fillRect(g(n),g(s),1,g(e)):i?(this.Canvas.beginPath(),this.Canvas.rect(D(n),D(s),g(u-n),g(e)),this.Canvas.stroke()):this.Canvas.fillRect(g(n),g(s),g(u-n),g(e)):Math.abs(u-n)<1?this.Canvas.fillRect(g(s),g(n),g(e),1):i?(this.Canvas.beginPath(),this.Canvas.rect(D(s),D(n),g(e),g(u-n)),this.Canvas.stroke()):this.Canvas.fillRect(g(s),g(Math.min(n,u)),g(e),g(Math.abs(u-n))),t.Open>t.Low){if(this.Canvas.beginPath(),d)this.Canvas.moveTo(D(i?Math.min(c,u):n),D(r)),this.Canvas.lineTo(D(h),D(r));else if(i){var f=s+e/2;this.Canvas.moveTo(D(f),D(Math.max(c,u))),this.Canvas.lineTo(D(f),D(h))}else this.Canvas.moveTo(D(r),D(n)),this.Canvas.lineTo(D(r),D(h));this.Canvas.stroke()}}else this.Canvas.beginPath(),d?(this.Canvas.moveTo(l,D(r)),this.Canvas.lineTo(h,D(r))):(this.Canvas.moveTo(D(r),l),this.Canvas.lineTo(D(r),h)),this.Canvas.strokeStyle=a,this.Canvas.stroke()},this.GetMaxMin=function(){var t={Max:null,Min:null};if("DRAWCOLORKLINE"==this.DrawName)for(var e=this.ChartFrame.XPointCount,a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<e;++a,++i){var r=this.Data.Data[a];r&&(null!=r.Open&&null!=r.High&&null!=r.Low&&null!=r.Close&&(null==t.Max&&(t.Max=r.High),null==t.Min&&(t.Min=r.Low),t.Max<r.High&&(t.Max=r.High),t.Min>r.Low&&(t.Min=r.Low)))}return t}}function it(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.ClassName="ChartOverlayKLine",this.Color="rgb(65,105,225)",this.MainData,this.SourceData,this.Title,this.DrawType=0,this.CustomDrawType=null,this.Status=Kr.STATUS_NONE_ID,this.IsDelete=!1,this.CloseLineWidth=$r.CloseLineWidth,this.SetOption=function(t){t&&he.IsNumber(t.DrawType)&&(this.CustomDrawType=t.DrawType)},this.DrawKBar=function(t){var e=!0===this.ChartFrame.IsHScreen,a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartBorder.GetLeft()+i/2+2;e&&(r=this.ChartBorder.GetTop()+i/2+2);var n=this.ChartBorder.GetRight();e&&(n=this.ChartBorder.GetBottom());var s=this.ChartFrame.XPointCount,o=this.DrawType;null!=this.CustomDrawType&&(o=this.CustomDrawType);for(var h=!0,l=null,u=this.Data.DataOffset,c=0;u<this.Data.Data.length&&c<s;++u,++c,r+=a+i){var d=this.Data.Data[u];if(d&&null!=d.Open&&null!=d.High&&null!=d.Low&&null!=d.Close){null==l&&(l=d.Open),h&&(this.Canvas.strokeStyle=this.Color,this.Canvas.fillStyle=this.Color,this.Canvas.beginPath(),h=!1);var f=r,m=r+a;if(m>n)break;var C=f+(m-f)/2,p=this.GetYFromData(d.Low/l*t,!1),v=this.GetYFromData(d.High/l*t,!1),S=this.GetYFromData(d.Open/l*t,!1),T=this.GetYFromData(d.Close/l*t,!1),y=v;d.Open<d.Close?a>=4?(d.High>d.Close?(e?(this.Canvas.moveTo(D(y),D(C)),this.Canvas.lineTo(D(3==this.DrawType?Math.max(T,S):T),D(C))):(this.Canvas.moveTo(D(C),D(y)),this.Canvas.lineTo(D(C),D(3==this.DrawType?Math.min(T,S):T))),y=T):y=T,e?Math.abs(S-y)<1?this.Canvas.fillRect(g(y),g(f),1,g(a)):3==o?this.Canvas.rect(D(y),D(f),g(S-y),g(a)):this.Canvas.fillRect(g(y),g(f),g(S-y),g(a)):Math.abs(S-y)<1?this.Canvas.fillRect(g(f),g(y),g(a),1):3==o?this.Canvas.rect(D(f),D(y),g(a),g(S-y)):this.Canvas.fillRect(g(f),g(y),g(a),g(S-y)),d.Open>d.Low&&(e?(this.Canvas.moveTo(D(3==this.DrawType?Math.min(T,S):y),D(C)),this.Canvas.lineTo(D(p),D(C))):(this.Canvas.moveTo(D(C),D(3==this.DrawType?Math.max(T,S):y)),this.Canvas.lineTo(D(C),D(p))))):e?(this.Canvas.moveTo(v,D(C)),this.Canvas.lineTo(p,D(C))):(this.Canvas.moveTo(D(C),v),this.Canvas.lineTo(D(C),p)):d.Open>d.Close?a>=4?(d.High>d.Close?(e?(this.Canvas.moveTo(D(y),D(C)),this.Canvas.lineTo(D(S),D(C))):(this.Canvas.moveTo(D(C),D(y)),this.Canvas.lineTo(D(C),D(S))),y=S):y=S,e?Math.abs(T-y)<1?this.Canvas.fillRect(g(y),g(f),1,g(a)):this.Canvas.fillRect(g(y),g(f),g(T-y),g(a)):Math.abs(T-y)<1?this.Canvas.fillRect(g(f),g(y),g(a),1):this.Canvas.fillRect(g(f),g(y),g(a),g(T-y)),d.Open>d.Low&&(e?(this.Canvas.moveTo(D(y),D(C)),this.Canvas.lineTo(D(p),D(C))):(this.Canvas.moveTo(D(C),D(y)),this.Canvas.lineTo(D(C),D(p))))):e?(this.Canvas.moveTo(v,D(C)),this.Canvas.lineTo(p,D(C))):(this.Canvas.moveTo(D(C),v),this.Canvas.lineTo(D(C),p)):a>=4?(d.High>d.Close?(e?(this.Canvas.moveTo(y,D(C)),this.Canvas.lineTo(S,D(C))):(this.Canvas.moveTo(D(C),y),this.Canvas.lineTo(D(C),S)),y=S):y=S,e?(this.Canvas.moveTo(D(y),D(f)),this.Canvas.lineTo(D(y),D(m))):(this.Canvas.moveTo(D(f),D(y)),this.Canvas.lineTo(D(m),D(y))),d.Open>d.Low&&(e?(this.Canvas.moveTo(D(y),D(C)),this.Canvas.lineTo(D(p),D(C))):(this.Canvas.moveTo(D(C),D(y)),this.Canvas.lineTo(D(C),D(p))))):e?(this.Canvas.moveTo(v,D(C)),this.Canvas.lineTo(p,D(C))):(this.Canvas.moveTo(D(C),v),this.Canvas.lineTo(D(C),p));var I=Math.min(p,v,S,T),x=Math.max(p,v,S,T),L=new $(f,I,a,x-I);this.TooltipRect.push([u,L])}}0==h&&this.Canvas.stroke()},this.DrawAKLine=function(t){var e=!0===this.ChartFrame.IsHScreen,a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartBorder.GetLeft()+i/2+2;e&&(r=this.ChartBorder.GetTop()+i/2+2);var n=this.ChartBorder.GetRight();e&&(n=this.ChartBorder.GetBottom());var s=this.ChartFrame.XPointCount,o=null;this.Canvas.strokeStyle=this.Color;for(var h=this.Data.DataOffset,l=0;h<this.Data.Data.length&&l<s;++h,++l,r+=a+i){var u=this.Data.Data[h];if(null!=u.Open&&null!=u.High&&null!=u.Low&&null!=u.Close){null==o&&(o=u.Open);var c=r,d=r+a;if(d>n)break;var f=c+(d-c)/2,m=this.GetYFromData(u.Low/o*t,!1),C=this.GetYFromData(u.High/o*t,!1),p=this.GetYFromData(u.Open/o*t,!1),v=this.GetYFromData(u.Close/o*t,!1);this.Canvas.beginPath(),e?(this.Canvas.moveTo(C,D(f)),this.Canvas.lineTo(m,D(f))):(this.Canvas.moveTo(D(f),C),this.Canvas.lineTo(D(f),m)),this.Canvas.stroke(),a>=4&&(this.Canvas.beginPath(),e?(this.Canvas.moveTo(D(p),c),this.Canvas.lineTo(D(p),f)):(this.Canvas.moveTo(c,D(p)),this.Canvas.lineTo(f,D(p))),this.Canvas.stroke(),this.Canvas.beginPath(),e?(this.Canvas.moveTo(D(v),d),this.Canvas.lineTo(D(v),f)):(this.Canvas.moveTo(d,D(v)),this.Canvas.lineTo(f,D(v))),this.Canvas.stroke())}}},this.DrawCloseLine=function(t){var e=!0===this.ChartFrame.IsHScreen,a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartBorder.GetLeft()+i/2+2;e&&(r=this.ChartBorder.GetTop()+i/2+2);var n=this.ChartBorder.GetRight();e&&(n=this.ChartBorder.GetBottom());var s=this.ChartFrame.XPointCount,o=null,h=!0;this.Canvas.strokeStyle=this.Color,he.IsNumber(this.CloseLineWidth)&&(this.Canvas.lineWidth=this.CloseLineWidth),this.Canvas.beginPath();for(var l=this.Data.DataOffset,u=0;l<this.Data.Data.length&&u<s;++l,++u,r+=a+i){var c=this.Data.Data[l];if(null!=c.Open&&null!=c.High&&null!=c.Low&&null!=c.Close){null==o&&(o=c.Open);var d=r,f=r+a;if(f>n)break;var m=d+(f-d)/2,C=this.GetYFromData(c.Close/o*t,!1);h?(e?this.Canvas.moveTo(C,m):this.Canvas.moveTo(m,C),h=!1):e?this.Canvas.lineTo(C,m):this.Canvas.lineTo(m,C)}}0==h&&this.Canvas.stroke()},this.Draw=function(){if(this.TooltipRect=[],this.InfoTooltipRect=[],this.MainData&&this.Data){for(var t=this.ChartFrame.XPointCount,e=null,a=this.Data.DataOffset,i=0;a<this.MainData.Data.length&&i<t;++a,++i){var r=this.MainData.Data[a];if(null!=r.Open&&null!=r.High&&null!=r.Low&&null!=r.Close){e=r.Open;break}}if(null!=e){var n=this.DrawType;null!=this.CustomDrawType&&(n=this.CustomDrawType),this.Canvas.save(),this.ClipClient(this.ChartFrame.IsHScreen),1==n?this.DrawCloseLine(e):2==n?this.DrawAKLine(e):this.DrawKBar(e),this.Canvas.restore()}}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={};if(e.Max=null,e.Min=null,!this.MainData||!this.Data)return e;for(var a=null,i=this.Data.DataOffset,r=0;i<this.MainData.Data.length&&r<t;++i,++r){var n=this.MainData.Data[i];if(null!=n.Open&&null!=n.High&&null!=n.Low&&null!=n.Close){a=n.Close;break}}if(null==a)return e;for(var s,o,h=null,i=this.Data.DataOffset,r=0;i<this.Data.Data.length&&r<t;++i,++r){var n=this.Data.Data[i];n&&null!=n.Open&&null!=n.High&&null!=n.Low&&null!=n.Close&&(null==h&&(h=n.Open),s=n.High/h*a,o=n.Low/h*a,null==e.Max&&(e.Max=s),null==e.Min&&(e.Min=o),e.Max<s&&(e.Max=s),e.Min>o&&(e.Min=o))}return e},this.GetTooltipData=function(t,e,a){for(var i in this.TooltipRect){var r=this.TooltipRect[i][1];if(this.Canvas.beginPath(),this.Canvas.rect(r.X,r.Y,r.Width,r.Height),this.Canvas.isPointInPath(t,e)){var n=this.TooltipRect[i][0];return a.Data=this.Data.Data[n],a.ChartPaint=this,!0}}return!1}}function rt(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMinuteVolumBar",this.UpColor=$r.UpBarColor,this.DownColor=$r.DownBarColor,this.UnchangeColor=$r.UnchagneBarColor,this.CustomColor=$r.Minute.VolBarColor,this.YClose,this.Symbol,this.BeforeOpenData,this.AfterCloseData,this.BeforeVolColor=$r.Minute.Before.VolColor,this.MultiDayBeforeOpenData,this.MultiDayAfterCloseData,this.Draw=function(){var t=!0===this.ChartFrame.IsHScreen;if(t)var e=this.ChartBorder.GetHScreenBorder(),a=e.BottomEx;else var e=this.ChartBorder.GetBorder(),a=e.RightEx;this.DrawBeforeOpen(),this.DrawMultiDayBeforeOpen();var i=this.ChartFrame.XPointCount,r=this.ChartFrame.GetYFromData(0),n=this.YClose,s=this.Data,o=an.IsShowMinuteColorVolBar(this.Symbol);o&&(this.Canvas.strokeStyle=this.CustomColor);for(var h=s.DataOffset,l=0;h<s.Data.length&&l<i;++h,++l){var u=s.Data[h],c=null;if(u){var d=null;if(c=u.Vol,d=u.Close,c){var f=this.ChartFrame.GetYFromData(c),m=this.ChartFrame.GetXFromIndex(h);if(m>a)break;o||(this.Canvas.strokeStyle=d>=n?this.UpColor:this.DownColor),this.Canvas.beginPath(),t?(this.Canvas.moveTo(f,D(m)),this.Canvas.lineTo(r,D(m))):(this.Canvas.moveTo(D(m),f),this.Canvas.lineTo(D(m),r)),this.Canvas.stroke(),d&&(n=d)}}}this.DrawAfterClose(),this.DrawMultiDayAfterClose()},this.DrawBeforeOpen=function(){this.ChartBorder.LeftExtendWidth<10||this.BeforeOpenData&&this.DrawCallAuction(-1,this.BeforeOpenData,!0)},this.DrawAfterClose=function(){this.ChartBorder.RightExtendWidth<10||this.AfterCloseData&&this.DrawCallAuction(-1,this.AfterCloseData,!1)},this.DrawMultiDayBeforeOpen=function(){if(!(this.ChartBorder.MultiDayMinute.Count<=1||this.ChartBorder.MultiDayMinute.Left<=0)&&this.MultiDayBeforeOpenData)for(var t in this.MultiDayBeforeOpenData){var e=this.MultiDayBeforeOpenData[t];this.DrawCallAuction(parseInt(t),e,!0)}},this.DrawMultiDayAfterClose=function(){if(!(this.ChartBorder.MultiDayMinute.Count<=1||this.ChartBorder.MultiDayMinute.Right<=0)&&this.MultiDayAfterCloseData)for(var t in this.MultiDayAfterCloseData){var e=this.MultiDayAfterCloseData[t];this.DrawCallAuction(parseInt(t),e,!1)}},this.DrawCallAuction=function(t,e,a){if(e){e.Index=t;var i=this.GetBorder(),r=!0===this.ChartFrame.IsHScreen,n=this.YClose,s=this.ChartFrame.GetYFromData(0);if(1==e.Ver)for(var o in e.Data){var h=e.Data[o];if(h&&he.IsNumber(h.Vol[0])){if(a)var l=this.ChartFrame.GetLeftExtendXFromIndex(o,e),u=this.ChartFrame.GetLeftExtendYFromData(h.Vol[0]);else var l=this.ChartFrame.GetRightExtendXFromIndex(o,e),u=this.ChartFrame.GetRightExtendYFromData(h.Vol[0]);this.Canvas.strokeStyle=h.Price>=n?this.UpColor:this.DownColor,this.Canvas.beginPath(),r?(this.Canvas.moveTo(u,D(l)),this.Canvas.lineTo(s,D(l))):(this.Canvas.moveTo(D(l),u),this.Canvas.lineTo(D(l),s)),this.Canvas.stroke(),h.Price&&(n=h.Price)}}else if(2==e.Ver||3==e.Ver){var c={Max:e.VolMax,Min:e.VolMin};for(var o in e.Data){var h=e.Data[o];if(h){if(he.IsPlusNumber(h.Vol[0])){if(a)var l=this.ChartFrame.GetLeftExtendXFromIndex(o,e),u=this.ChartFrame.GetLeftExtendYFromData(h.Vol[0],!1,{Range:c});else var l=this.ChartFrame.GetRightExtendXFromIndex(o,e),u=this.ChartFrame.GetRightExtendYFromData(h.Vol[0],!1,{Range:c});this.Canvas.strokeStyle=this.GetBarColor(h.ColorID),this.Canvas.beginPath(),r?(this.Canvas.moveTo(u,D(l)),this.Canvas.lineTo(s,D(l))):(this.Canvas.moveTo(D(l),u),this.Canvas.lineTo(D(l),s)),this.Canvas.stroke()}if(he.IsPlusNumber(h.Vol[1])){if(a)var l=this.ChartFrame.GetLeftExtendXFromIndex(o,e),u=this.ChartFrame.GetLeftExtendYFromData(h.Vol[1],!1,{Range:c});else var l=this.ChartFrame.GetRightExtendXFromIndex(o,e),u=this.ChartFrame.GetRightExtendYFromData(h.Vol[1],!1,{Range:c});this.Canvas.strokeStyle=this.GetBarColor(h.ColorID),this.Canvas.beginPath(),r?(u-=s,u=i.RightEx-u,this.Canvas.moveTo(u,D(l)),this.Canvas.lineTo(i.RightEx,D(l))):(u-=s,u=i.TopEx-u,this.Canvas.moveTo(D(l),u),this.Canvas.lineTo(D(l),i.TopEx)),this.Canvas.stroke()}}}}}},this.GetBarColor=function(t){switch(t){case 0:return this.UnchangeColor;case 1:return this.UpColor;case 2:return this.DownColor}if(this.BeforeVolColor&&Array.isArray(this.BeforeVolColor)){var e=t-3;if(e>=0&&e<this.BeforeVolColor.length)return this.BeforeVolColor[e]}return this.UnchangeColor},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={};e.Min=0,e.Max=null;for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];r&&r.Vol&&(null==e.Max&&(e.Max=r.Vol),e.Max<r.Vol&&(e.Max=r.Vol))}return e}}function nt(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.ClassName="ChartErrorMessage",this.Draw=function(){this.IsShow&&this.NotSupportMessage&&this.DrawNotSupportmessage()}}function st(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.ClassName="ChartLine",this.Color="rgb(255,193,37)",this.LineWidth,this.DrawType=0,this.IsDotLine=!1,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize){if(this.NotSupportMessage)return void this.DrawNotSupportmessage();if(this.Data&&this.Data.Data)switch(this.DrawType){case 0:return this.DrawLine();case 1:return this.DrawStraightLine()}}},this.DrawLine=function(){var t=!0===this.ChartFrame.IsHScreen,e=(this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight());t&&(e=this.ChartBorder.GetBottom());var a=this.ChartFrame.XPointCount;this.Canvas.save(),this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*c()),this.IsDotLine&&this.Canvas.setLineDash($r.DOTLINE.LineDash);for(var i=!0,r=0,n=this.Data.DataOffset,s=0;n<this.Data.Data.length&&s<a;++n,++s){var o=this.Data.Data[n];if(null!=o){var h=this.ChartFrame.GetXFromIndex(s),l=this.GetYFromData(o);if(h>e)break;i?(this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath(),t?this.Canvas.moveTo(l,h):this.Canvas.moveTo(h,l),i=!1):t?this.Canvas.lineTo(l,h):this.Canvas.lineTo(h,l),++r}}r>0&&this.Canvas.stroke(),this.Canvas.restore()},this.DrawStraightLine=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.IsMinuteFrame(),a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartFrame.XPointCount;if(t)var n=this.ChartBorder.GetHScreenBorder(),s=n.BottomEx,o=n.TopEx+i/2+$r.FrameLeftMargin;else var n=this.ChartBorder.GetBorder(),o=n.LeftEx+i/2+$r.FrameLeftMargin,s=n.RightEx;var h=this.GetLockRect();h&&(s=t?h.Top:h.Left),this.Canvas.save(),this.ClipClient(t),this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*c()),this.Canvas.strokeStyle=this.Color,this.IsDotLine&&this.Canvas.setLineDash($r.DOTLINE.LineDash);for(var l=!0,u=0,d=this.Data.DataOffset,f=0;d<this.Data.Data.length&&f<r;++d,++f,o+=a+i){var m=this.Data.Data[d];if(null!=m){if(e)var C=this.ChartFrame.GetXFromIndex(f);else{var p=o,D=o+a;if(D>s)break;var C=p+(D-p)/2}var v=this.GetYFromData(m,!1);if(C>s)break;l?(this.Canvas.beginPath(),t?this.Canvas.moveTo(v,C):this.Canvas.moveTo(C,v),l=!1):t?this.Canvas.lineTo(v,C):this.Canvas.lineTo(C,v),++u}else u>0&&this.Canvas.stroke(),l=!0,u=0}u>0&&this.Canvas.stroke(),this.Canvas.restore()}}function ot(){this.newMethod=st,this.newMethod(),delete this.newMethod,this.ClassName="ChartSubLine",this.Color="rgb(255,193,37)",this.LineWidth,this.DrawType=0,this.IsDotLine=!1,this.SubFrame={Max:null,Min:null},this.Draw=function(){if(this.IsShow&&this.Data&&this.Data.Data)switch(this.CalculateDataMaxMin(),this.DrawType){case 0:return this.DrawLine();case 1:return this.DrawStraightLine()}},this.GetYFromData=function(t){if(!0===this.ChartFrame.IsHScreen){if(t<=this.SubFrame.Min)return this.ChartBorder.GetLeftEx();if(t>=this.SubFrame.Max)return this.ChartBorder.GetRightEx();var e=this.ChartBorder.GetWidthEx()*(t-this.SubFrame.Min)/(this.SubFrame.Max-this.SubFrame.Min);return this.ChartBorder.GetLeftEx()+e}if(t<=this.SubFrame.Min)return this.ChartBorder.GetBottomEx();if(t>=this.SubFrame.Max)return this.ChartBorder.GetTopEx();var a=this.ChartBorder.GetHeightEx()*(t-this.SubFrame.Min)/(this.SubFrame.Max-this.SubFrame.Min);return this.ChartBorder.GetBottomEx()-a},this.CalculateDataMaxMin=function(){this.SubFrame={Max:null,Min:null};var t=!0===this.ChartFrame.IsHScreen,e=this.ChartBorder.GetRight();t&&(e=this.ChartBorder.GetBottom());for(var a=this.ChartFrame.XPointCount,i=this.Data.DataOffset,r=0;i<this.Data.Data.length&&r<a;++i,++r){var n=this.Data.Data[i];if(null!=n){if(this.ChartFrame.GetXFromIndex(r)>e)break;(null==this.SubFrame.Min||this.SubFrame.Min>n)&&(this.SubFrame.Min=n),(null==this.SubFrame.Max||this.SubFrame.Max<n)&&(this.SubFrame.Max=n)}}},this.GetMaxMin=function(){return{Min:null,Max:null}}}function ht(){this.newMethod=st,this.newMethod(),delete this.newMethod,this.MainData=new Z,this.Draw=function(){if(this.Data&&this.Data.Data&&this.MainData&&this.MainData.Data)switch(this.DrawType){case 0:return this.DrawLine();case 1:return this.DrawStraightLine()}},this.GetFirstVaildIndex=function(){for(var t=this.Data.DataOffset,e=t,a=0;e<this.MainData.Data.length&&e<this.Data.Data.length;++e,++a){var i=this.MainData.Data[e],r=this.Data.Data[e];if(he.IsNumber(i)&&he.IsNumber(r))return{Index:a,DataOffset:e,OverlayValue:r,MainValue:i}}return null},this.DrawStraightLine=function(){var t=this.GetFirstVaildIndex();if(t){var e=!0===this.ChartFrame.IsHScreen,a=(this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight());e&&(a=this.ChartBorder.GetBottom());var i=this.ChartFrame.XPointCount,r=this.GetLockRect();r&&(a=e?r.Top:r.Left),this.Canvas.save(),this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*c()),this.Canvas.strokeStyle=this.Color,this.IsDotLine&&this.Canvas.setLineDash([3,5]);for(var n=!0,s=0,o=0,h=t.DataOffset,l=t.Index;h<this.Data.Data.length&&l<i;++h,++l){var u=this.Data.Data[h];if(null!=u){var d=this.ChartFrame.GetXFromIndex(l),f=u-t.OverlayValue;o=0!=t.OverlayValue?1+f/Math.abs(t.OverlayValue):1+f;var m=t.MainValue*o,C=this.GetYFromData(m);if(d>a)break;n?(this.Canvas.beginPath(),e?this.Canvas.moveTo(C,d):this.Canvas.moveTo(d,C),n=!1):e?this.Canvas.lineTo(C,d):this.Canvas.lineTo(d,C),++s}else s>0&&this.Canvas.stroke(),n=!0,s=0}s>0&&this.Canvas.stroke(),this.Canvas.restore()}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={};e.Min=null,e.Max=null;var a=this.GetFirstVaildIndex();if(!a)return e;for(var i=a.DataOffset,r=a.Index;i<this.Data.Data.length&&r<t;++i,++r){var n=this.Data.Data[i];if(he.IsNumber(n)){var s=n-a.OverlayValue;0!=a.OverlayValue?rate=1+s/Math.abs(a.OverlayValue):rate=1+s;var o=a.MainValue*rate;null==e.Max&&(e.Max=o),null==e.Min&&(e.Min=o),e.Max<o&&(e.Max=o),e.Min>o&&(e.Min=o)}}return e}}function lt(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.ClassName="ChartPartLine",this.LineWidth,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize)return this.NotSupportMessage?void this.DrawNotSupportmessage():void(this.Data&&this.Data.Data&&this.DrawLine())},this.DrawLine=function(){var t=!0===this.ChartFrame.IsHScreen,e=(this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight());t&&(e=this.ChartBorder.GetBottom());var a=this.ChartFrame.XPointCount;this.Canvas.save(),this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*c());for(var i,r=0,n={X:null,Y:null},s=!1,o=this.Data.DataOffset,h=0;o<this.Data.Data.length&&h<a;++o,++h){var l=this.Data.Data[o];if(null!=l&&null!=l.Value){var u=l.Value,d=l.RGB,f=this.ChartFrame.GetXFromIndex(h),m=this.ChartFrame.GetYFromData(u);if(f>e)break;d!=i||1==s?(i&&r>0&&this.Canvas.stroke(),r=0,i=d,this.Canvas.strokeStyle=d,this.Canvas.beginPath(),null!=n.X&&null!=n.Y?(t?this.Canvas.moveTo(n.Y,n.X):this.Canvas.moveTo(n.X,n.Y),t?this.Canvas.lineTo(m,f):this.Canvas.lineTo(f,m),++r):t?this.Canvas.moveTo(m,f):this.Canvas.moveTo(f,m)):(t?this.Canvas.lineTo(m,f):this.Canvas.lineTo(f,m),++r),n.X=f,n.Y=m,s=!1}else n.X=null,n.Y=null,s=!0}r>0&&this.Canvas.stroke(),this.Canvas.restore()},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={};e.Min=null,e.Max=null;for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];r&&r.Value&&((null==e.Max||e.Max<r.Value)&&(e.Max=r.Value),(null==e.Min||e.Min>r.Value)&&(e.Min=r.Value))}return e}}function ut(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.ClassName="ChartSlopeLine",this.Color="rgb(255,193,37)",this.IsDotLine=!1,this.LineWidth,this.Option,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize){if(this.NotSupportMessage)return void this.DrawNotSupportmessage();if(this.Data&&this.Data.Data){this.Canvas.save(),this.Canvas.strokeStyle=this.Color,this.IsDotLine&&this.Canvas.setLineDash($r.DOTLINE.LineDash);var t=this.ChartBorder.GetLeft(),e=this.ChartBorder.GetTopEx(),a=this.ChartBorder.GetRight(),i=this.ChartBorder.GetBottom(),r=this.ChartBorder.GetRight(),n=this.ChartFrame.XPointCount;this.Canvas.beginPath(),this.Canvas.rect(t,e,a-t,i-e),this.Canvas.clip();for(var s=this.Data.DataOffset,o=0;s<this.Data.Data.length&&o<n;++s,++o){var h=this.Data.Data[s];if(he.IsNumber(h)){var l=this.Option[s];if(l){var u=this.ChartFrame.GetXFromIndex(o),c=this.ChartFrame.GetYFromData(h),d=l.Length*$r.DRAWSL.PixelWidth;if(u>r)break;var f=Math.sqrt(d*d/(1+l.Slope*l.Slope)),m=f*l.Slope;this.Canvas.beginPath(),2==l.Direct?(this.Canvas.moveTo(u-f,c+m),this.Canvas.lineTo(u+f,c-m)):1==l.Direct?(this.Canvas.moveTo(u,c),this.Canvas.lineTo(u-f,c+m)):(this.Canvas.moveTo(u,c),this.Canvas.lineTo(u+f,c-m)),this.Canvas.stroke()}}}this.Canvas.restore()}}}}function ct(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.ClassName="ChartPointDot",this.Color="rgb(255,193,37)",this.Radius=1,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize){if(this.NotSupportMessage)return void this.DrawNotSupportmessage();if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=(this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight());!0===t&&(e=this.ChartBorder.GetBottom());var a=this.ChartFrame.XPointCount;this.Canvas.save(),this.Canvas.fillStyle=this.Color;for(var i=this.Data.DataOffset,r=0;i<this.Data.Data.length&&r<a;++i,++r){var n=this.Data.Data[i];if(null!=n){var s=this.ChartFrame.GetXFromIndex(r),o=this.ChartFrame.GetYFromData(n);if(s>e)break;this.Canvas.beginPath(),t?this.Canvas.arc(o,s,this.Radius,0,2*Math.PI,!0):this.Canvas.arc(s,o,this.Radius,0,2*Math.PI,!0),this.Canvas.closePath(),this.Canvas.fill()}}this.Canvas.restore()}}}}function dt(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.Color="rgb(255,193,37)",this.LineWidth,this.ClassName="ChartStick",this.DrawLine=function(){if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=(this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight());!0===t&&(e=this.ChartBorder.GetBottom());var a=this.ChartFrame.XPointCount;this.Canvas.save(),this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*c());for(var i=!0,r=0,n=this.Data.DataOffset,s=0;n<this.Data.Data.length&&s<a;++n,++s){var o=this.Data.Data[n];if(null!=o){var h=this.ChartFrame.GetXFromIndex(s),l=this.ChartFrame.GetYFromData(o);if(h>e)break;i?(this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath(),t?this.Canvas.moveTo(l,h):this.Canvas.moveTo(h,l),i=!1):t?this.Canvas.lineTo(l,h):this.Canvas.lineTo(h,l),++r}}r>0&&this.Canvas.stroke(),this.Canvas.restore()}},this.DrawStick=function(){if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartBorder.GetRight();t&&(e=this.ChartBorder.GetBottom());var a=this.ChartFrame.XPointCount,i=this.ChartBorder.GetBottom(),r=this.ChartBorder.GetLeft();this.Canvas.save(),this.Canvas.strokeStyle=this.Color,this.LineWidth&&(this.Canvas.lineWidth=this.LineWidth*c());for(var n=this.Canvas.lineWidth,s=this.Data.DataOffset,o=0;s<this.Data.Data.length&&o<a;++s,++o){var h=this.Data.Data[s];if(null!=h){var l=this.ChartFrame.GetXFromIndex(o),u=this.ChartFrame.GetYFromData(h);if(l>e)break;if(this.Canvas.beginPath(),t)this.Canvas.moveTo(r,l),this.Canvas.lineTo(u,l),this.Canvas.stroke();else{var d=v(n,l);this.Canvas.moveTo(d,u),this.Canvas.lineTo(d,i)}this.Canvas.stroke()}}this.Canvas.restore()}},this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize)return this.NotSupportMessage?void this.DrawNotSupportmessage():void(this.Data&&this.Data.Data&&this.DrawStick())}}function ft(){this.newMethod=dt,this.newMethod(),delete this.newMethod,this.ClassName="ChartLineStick",this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize){if(this.NotSupportMessage)return void this.DrawNotSupportmessage();this.DrawStick(),this.DrawLine()}}}function mt(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.UpColor=$r.UpBarColor,this.DownColor=$r.DownBarColor,this.HistoryData,this.KLineDrawType=0,this.ClassName="ChartVolStick",this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize){if(!0===this.ChartFrame.IsHScreen)return void this.HScreenDraw();var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartBorder.GetBorder(),i=a.LeftEx+e/2+$r.FrameLeftMargin,r=a.RightEx,n=this.ChartFrame.XPointCount,s=this.GetLockRect();s&&(r=s.Left);var o=this.IsMinuteFrame(),h=this.ChartFrame.GetYFromData(0);if(t>=4){h=g(h);for(var l=this.Data.DataOffset,u=0;l<this.Data.Data.length&&u<n;++l,++u,i+=t+e){var c=this.Data.Data[l],d=this.HistoryData.Data[l];if(null!=c&&null!=d){var f=i,m=i+t;if(m>r)break;var C=this.ChartFrame.GetYFromData(c),p=this.GetBarColor(d),v=p.IsUp;this.Canvas.fillStyle=p.Color;var S=g(Math.abs(h-C)>=1?h-C:1);C=h-S,6==this.KLineDrawType?(this.Canvas.strokeStyle=p.Color,this.Canvas.beginPath(),this.Canvas.rect(D(f),D(C),g(t),S),this.Canvas.stroke()):!v||1!=this.KLineDrawType&&2!=this.KLineDrawType&&3!=this.KLineDrawType?this.Canvas.fillRect(g(f),C,g(t),S):(this.Canvas.strokeStyle=this.UpColor,this.Canvas.beginPath(),this.Canvas.rect(D(f),D(C),g(t),S),this.Canvas.stroke())}}}else for(var l=this.Data.DataOffset,u=0;l<this.Data.Data.length&&u<n;++l,++u,i+=t+e){var c=this.Data.Data[l],d=this.HistoryData.Data[l];if(null!=c&&null!=d){var C=this.ChartFrame.GetYFromData(c);if(o)var T=this.ChartFrame.GetXFromIndex(u);else var f=i,m=i+t,T=f+(m-f)/2;if(T>r)break;var p=this.GetBarColor(d);this.Canvas.strokeStyle=p.Color;var T=this.ChartFrame.GetXFromIndex(u);this.Canvas.beginPath(),this.Canvas.moveTo(D(T),C),this.Canvas.lineTo(D(T),h),this.Canvas.stroke()}}}},this.HScreenDraw=function(){var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartBorder.GetHScreenBorder(),i=a.TopEx+e/2+$r.FrameLeftMargin,r=a.BottomEx,n=this.ChartFrame.XPointCount,s=this.GetLockRect();s&&(r=s.Top);var o=this.ChartFrame.GetYFromData(0);if(t>=4){o=g(o);for(var h=this.Data.DataOffset,l=0;h<this.Data.Data.length&&l<n;++h,++l,i+=t+e){var u=this.Data.Data[h],c=this.HistoryData.Data[h];if(null!=u&&null!=c){var d=i;if(i+t>r)break;var f=this.ChartFrame.GetYFromData(u),m=!1;c.Close>=c.Open?(m=!0,this.Canvas.fillStyle=this.UpColor):this.Canvas.fillStyle=this.DownColor;var C=g(f-o);!m||1!=this.KLineDrawType&&2!=this.KLineDrawType&&3!=this.KLineDrawType?this.Canvas.fillRect(o,g(d),C,g(t)):(this.Canvas.strokeStyle=this.UpColor,this.Canvas.beginPath(),this.Canvas.rect(D(o),D(d),C,g(t)),this.Canvas.stroke())}}}else for(var h=this.Data.DataOffset,l=0;h<this.Data.Data.length&&l<n;++h,++l,i+=t+e){var u=this.Data.Data[h],c=this.HistoryData.Data[h];if(null!=u&&null!=c){var f=this.ChartFrame.GetYFromData(u),p=this.ChartFrame.GetXFromIndex(l);if(p>r)break;c.Close>c.Open?this.Canvas.strokeStyle=this.UpColor:this.Canvas.strokeStyle=this.DownColor;var p=this.ChartFrame.GetXFromIndex(l);this.Canvas.beginPath(),this.Canvas.moveTo(f,D(p)),this.Canvas.lineTo(o,D(p)),this.Canvas.stroke()}}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={};e.Min=0,e.Max=null;for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];null==e.Max&&(e.Max=r),e.Max<r&&(e.Max=r)}return e},this.GetBarColor=function(t){return t.Close>=t.Open?{Color:this.UpColor,IsUp:!0}:{Color:this.DownColor,IsUp:!1}}}function Ct(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.ClassName="ChartVericaltLine",this.LineWidth=2,this.LineCap,this.Draw=function(){if(!this.ChartFrame.IsMinSize){var t=1==this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.GetBorder(),r=this.ChartFrame.XPointCount;if(t)var n=i.RightEx,s=i.LeftEx,o=i.TopEx+a/2+$r.FrameLeftMargin;else var n=i.TopEx,s=i.BottomEx,o=i.LeftEx+a/2+$r.FrameLeftMargin;this.Canvas.save(),this.Canvas.strokeStyle=this.Color,this.LineType&&this.Canvas.setLineDash(this.LineType),this.LineCap&&(this.Canvas.lineCap=this.LineCap),this.Canvas.beginPath();var h=this.Canvas.lineWidth;this.LineWidth>0&&(h=this.LineWidth*c(),this.Canvas.lineWidth=h);for(var l=0,u=this.Data.DataOffset,d=0;u<this.Data.Data.length&&d<r;++u,++d,o+=e+a){if(this.Data.Data[u]){var f=o+e/2;f=v(h,f),t?(this.Canvas.moveTo(n,f),this.Canvas.lineTo(s,f)):(this.Canvas.moveTo(f,n),this.Canvas.lineTo(f,s)),++l}}l>0&&this.Canvas.stroke(),this.Canvas.restore()}},this.GetMaxMin=function(){return{Min:null,Max:null}}}function pt(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.ClassName="ChartHorizontalLine",this.LineWidth=2,this.LineCap,this.ExtendType=0,this.Draw=function(){if(!this.ChartFrame.IsMinSize){var t=1==this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.GetBorder(),r=this.ChartFrame.XPointCount;if(t)var n=i.TopEx,s=i.BottomEx,o=i.TopEx+a/2+$r.FrameLeftMargin;else var n=i.LeftEx,s=i.RightEx,o=i.LeftEx+a/2+$r.FrameLeftMargin;this.Canvas.save(),this.Canvas.strokeStyle=this.Color,this.LineType&&this.Canvas.setLineDash(this.LineType),this.LineCap&&(this.Canvas.lineCap=this.LineCap),this.Canvas.beginPath();var h=this.Canvas.lineWidth;this.LineWidth>0&&(h=this.LineWidth*c(),this.Canvas.lineWidth=h);for(var l=0,u=this.Data.DataOffset,d=0;u<this.Data.Data.length&&d<r;++u,++d,o+=e+a){var f=this.Data.Data[u];if(f&&he.IsNumber(f)){var m=this.ChartFrame.GetYFromData(f);m=v(h,m);var C=o+e/2;C=v(h,C),3==this.ExtendType?t?(this.Canvas.moveTo(m,n),this.Canvas.lineTo(m,s)):(this.Canvas.moveTo(n,m),this.Canvas.lineTo(s,m)):1==this.ExtendType?t?(this.Canvas.moveTo(m,n),this.Canvas.lineTo(m,C)):(this.Canvas.moveTo(n,m),this.Canvas.lineTo(C,m)):t?(this.Canvas.moveTo(m,C),this.Canvas.lineTo(m,s)):(this.Canvas.moveTo(C,m),this.Canvas.lineTo(s,m)),++l}}l>0&&this.Canvas.stroke(),this.Canvas.restore()}}}function Dt(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.ClassName="ChartLineMultiData",this.Color="rgb(255,193,37)",this.PointColor,this.PointRadius,this.LineWidth,this.Draw=function(){if(this.NotSupportMessage)return void this.DrawNotSupportmessage();if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=(this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight());t&&(e=this.ChartBorder.GetBottom());var a=this.ChartFrame.XPointCount;this.Canvas.save(),he.IsPlusNumber(this.LineWidth)&&(this.Canvas.lineWidth=this.LineWidth*c());for(var i,r=!0,n=0,s=[],o=this.Data.DataOffset,h=0;o<this.Data.Data.length&&h<a;++o,++h){var l=this.Data.Data[o];if(l){var u=this.ChartFrame.GetXFromIndex(h);if(u>e)break;i=Array.isArray(l)?l:[l];for(var d=0;d<i.length;++d){var f=i[d];if(f){var m=f.Value,C=this.ChartFrame.GetYFromData(m);r?(this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath(),t?this.Canvas.moveTo(C,u):this.Canvas.moveTo(u,C),r=!1,1===f.Type&&s.push({X:u,Y:C})):(t?this.Canvas.lineTo(C,u):this.Canvas.lineTo(u,C),1===f.Type&&s.push({X:u,Y:C})),++n}}}}n>0&&this.Canvas.stroke(),this.DrawPoint(s),this.Canvas.restore()}},this.DrawPoint=function(t){if(this.PointColor&&he.IsPlusNumber(this.PointRadius))for(var e=this.PointRadius*c(),a=0;a<t.length;++a){var i=t[a];this.Canvas.beginPath(),this.Canvas.arc(i.X,i.Y,e,0,360,!1),this.Canvas.fillStyle=this.PointColor,this.Canvas.fill(),this.Canvas.closePath()}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={};if(e.Min=null,e.Max=null,!this.Data||!this.Data.Data)return e;for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(r){var n;n=Array.isArray(r)?r:[r];for(var i=0;i<n.length;++i){var s=n[i].Value;he.IsNumber(s)&&(null==e.Max&&(e.Max=s),null==e.Min&&(e.Min=s),e.Max<s&&(e.Max=s),e.Min>s&&(e.Min=s))}}}return e}}function vt(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.ClassName="ChartStickLine",this.Color="rgb(255,193,37)",this.BarType=0,this.LineDotted=[3,3],this.Width=0,this.SetEmptyBar=function(){if(1!=this.BarType&&-1!=this.BarType)return!1;this.Canvas.lineWidth=c(),this.Canvas.strokeStyle=this.Color;var t=$r.EmptyBarBGColor;return t&&(this.Canvas.fillStyle=t),-1==this.BarType&&this.Canvas.setLineDash(this.LineDotted),!0},this.IsEmptyBar=function(){return 1==this.BarType||-1==this.BarType},this.Draw=function(){if(!this.ChartFrame.IsMinSize){if(this.NotSupportMessage)return void this.DrawNotSupportmessage();if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetRight();this.ChartFrame.ZoomIndex;t&&(i=this.ChartBorder.GetBottom());var r=this.ChartFrame.XPointCount,n=this.ChartBorder.GetLeft()+a/2+2;t&&(n=this.ChartBorder.GetTop()+a/2+2);var s=this.IsMinuteFrame();this.Canvas.save();var o=!1,h=!1,l=$r.EmptyBarBGColor;if(s)this.Width>1?this.Canvas.lineWidth=2*c():this.Canvas.lineWidth=c(),this.Canvas.strokeStyle=this.Color;else if(0==this.Width)this.SetEmptyBar();else if(3==this.Width||50==this.Width)e>=4?(h=!0,this.SetEmptyBar(),this.IsEmptyBar()||(this.Canvas.fillStyle=this.Color),this.Canvas.strokeStyle=this.Color):(this.Canvas.lineWidth=c(),this.Canvas.strokeStyle=this.Color);else if(101==this.Width){var u=e+a+1*c();this.Canvas.lineWidth=u,this.Canvas.strokeStyle=this.Color}else if(this.Width<=3){var d=2*c(),f=e*(this.Width/3);f<d&&(f=d),this.SetEmptyBar(),this.IsEmptyBar()||(this.Canvas.fillStyle=this.Color),o=!0}else{var f=this.Width*c()+e;this.SetEmptyBar(),this.IsEmptyBar()||(this.Canvas.fillStyle=this.Color),o=!0}for(var m=this.Data.DataOffset,C=0;m<this.Data.Data.length&&C<r;++m,++C,n+=e+a){var p=this.Data.Data[m];if(null!=p){var v=p.Value,S=p.Value2;null==S&&(S=0);var T=this.ChartFrame.GetXFromIndex(C),y=this.ChartFrame.GetYFromData(v),I=this.ChartFrame.GetYFromData(S);if(T>i)break;if(o)if(t){var x=T-f/2,L=f;this.IsEmptyBar()?(this.Canvas.beginPath(),this.Canvas.rect(D(Math.min(y,I)),D(x),g(Math.abs(y-I)),g(L)),this.Canvas.stroke()):this.Canvas.fillRect(g(Math.min(y,I)),g(x),g(Math.abs(y-I)),g(L))}else{var x=T-f/2,L=f;x+L>i&&(L=i-x),this.IsEmptyBar()?(l&&this.Canvas.fillRect(g(x),g(Math.min(y,I)),g(L),g(Math.abs(y-I))),this.Canvas.beginPath(),this.Canvas.rect(D(x),D(Math.min(y,I)),g(L),g(Math.abs(y-I))),this.Canvas.stroke()):this.Canvas.fillRect(g(x),g(Math.min(y,I)),g(L),g(Math.abs(y-I)))}else if(h)this.IsEmptyBar()?t?(this.Canvas.beginPath(),this.Canvas.rect(D(Math.min(y,I)),D(n),g(Math.abs(y-I)),g(e)),this.Canvas.stroke()):(l&&this.Canvas.fillRect(g(n),g(Math.min(y,I)),g(e),g(Math.abs(y-I))),this.Canvas.beginPath(),this.Canvas.rect(D(n),D(Math.min(y,I)),g(e),g(Math.abs(y-I))),this.Canvas.stroke()):t?this.Canvas.fillRect(g(Math.min(y,I)),g(n),g(Math.abs(y-I)),g(e)):this.Canvas.fillRect(g(n),g(Math.min(y,I)),g(e),g(Math.abs(y-I)));else if(t)this.Canvas.beginPath(),this.Canvas.moveTo(y,D(T)),this.Canvas.lineTo(I,D(T)),this.Canvas.stroke();else{var M=parseInt(T.toString())+.5;this.Canvas.beginPath(),this.Canvas.moveTo(M,y),this.Canvas.lineTo(M,I),this.Canvas.stroke()}}}this.Canvas.restore()}}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={};if(e.Min=null,e.Max=null,!this.Data||!this.Data.Data)return e;for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(null!=r){var n=r.Value2;if(null==n&&(n=0),null!=r&&!isNaN(r.Value)&&!isNaN(n)){var s=Math.max(r.Value,n),o=Math.min(r.Value,n);null==e.Max&&(e.Max=s),null==e.Min&&(e.Min=o),e.Max<s&&(e.Max=s),e.Min>o&&(e.Min=o)}}}return e}}function gt(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.ClassName="ChartText",this.TextFont="14px 微软雅黑",this.Draw=function(){if(this.NotSupportMessage)return void this.DrawNotSupportmessage();if(this.Data&&this.Data.Data){var t=(this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight());this.ChartFrame.XPointCount;for(var e in this.Data.Data){var a=this.Data.Data[e];if(null!=a){var i=a.Value;if("Left"==a.Position){var r=this.ChartFrame.GetXFromIndex(0),n=this.ChartFrame.GetYFromData(i);if(r>t)continue;this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=a.Color,this.Canvas.font=this.TextFont,this.Canvas.fillText(a.Message,r,n)}}}}},this.GetMaxMin=function(){var t=(this.ChartFrame.XPointCount,{});if(t.Min=null,t.Max=null,!this.Data||!this.Data.Data)return t;for(var e in this.Data.Data){var a=this.Data.Data[e];if(null!=a&&!isNaN(a.Value)){var i=a.Value;null==t.Max&&(t.Max=i),null==t.Min&&(t.Min=i),t.Max<i&&(t.Max=i),t.Min>i&&(t.Min=i)}}return t}}function St(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.ClassName="ChartSingleText",this.Color="rgb(255,193,37)",this.TextFont="14px 微软雅黑",this.Text,this.TextAlign="left",this.TextBG,this.Direction=0,this.FixedFontSize=-1,this.YOffset=0,this.Position,this.IconFont,this.IconSize={Max:$r.DRAWICON.Icon.MaxSize,Min:$r.DRAWICON.Icon.MinSize,Zoom:{Type:$r.DRAWICON.Icon.Zoom.Type,Value:$r.DRAWICON.Icon.Zoom.Value},YOffset:$r.DRAWICON.Icon.YOffset},this.TextSize={Max:$r.DRAWICON.Text.MaxSize,Min:$r.DRAWICON.Text.MinSize,Zoom:{Type:$r.DRAWICON.Text.Zoom.Type,Value:$r.DRAWICON.Text.Zoom.Value},FontName:$r.DRAWICON.Text.FontName,YOffset:$r.DRAWICON.Text.YOffset},this.Font={DRAWTEXT_FIX:$r.DRAWTEXT_FIX.Font,DRAWNUMBER_FIX:$r.DRAWNUMBER_FIX.Font},this.ReloadResource=function(t){"DRAWTEXT"==this.Name?this.TextSize={Max:$r.DRAWTEXT.MaxSize,Min:$r.DRAWTEXT.MinSize,Zoom:{Type:$r.DRAWTEXT.Zoom.Type,Value:$r.DRAWTEXT.Zoom.Value},FontName:$r.DRAWTEXT.FontName,YOffset:$r.DRAWTEXT.YOffset}:"DRAWNUMBER"==this.Name?this.TextSize={Max:$r.DRAWNUMBER.MaxSize,Min:$r.DRAWNUMBER.MinSize,Zoom:{Type:$r.DRAWNUMBER.Zoom.Type,Value:$r.DRAWNUMBER.Zoom.Value},FontName:$r.DRAWNUMBER.FontName,YOffset:$r.DRAWNUMBER.YOffset}:"DRAWTEXT_FIX"==this.Name?this.Font.DRAWTEXT_FIX=$r.DRAWTEXT_FIX.Font:"DRAWNUMBER_FIX"==this.Name&&(this.Font.DRAWNUMBER_FIX=$r.DRAWNUMBER_FIX.Font)},this.SuperGetMaxMin=this.GetMaxMin,this.GetMaxMin=function(){return"DRAWTEXT_FIX"==this.Name||"DRAWNUMBER_FIX"==this.Name?{Min:null,Max:null}:"DRAWTEXTREL"==this.Name||"DRAWTEXTABS"==this.Name?{Min:null,Max:null}:this.SuperGetMaxMin()},this.DrawRectText=function(){if(this.DrawData){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.GetBorder();if("DRAWTEXTREL"==this.Name)if(t)var a=e.RightTitle-e.LeftEx,i=e.BottomEx-e.TopEx,r=this.DrawData.Point.X/1e3*i+e.TopEx,n=e.RightTitle-this.DrawData.Point.Y/1e3*i;else var i=e.RightEx-e.LeftEx,a=e.BottomEx-e.TopTitle,r=this.DrawData.Point.X/1e3*i+e.LeftEx,n=this.DrawData.Point.Y/1e3*a+e.TopTitle;else{if("DRAWTEXTABS"!=this.Name)return;if(t)var r=this.DrawData.Point.X+e.TopEx,n=e.RightTitle-this.DrawData.Point.Y;else var r=this.DrawData.Point.X+e.LeftEx,n=this.DrawData.Point.Y+e.TopTitle}1==this.Direction?this.Canvas.textBaseline="bottom":2==this.Direction?this.Canvas.textBaseline="top":this.Canvas.textBaseline="middle",this.Canvas.textAlign="left",this.Canvas.font=this.TextFont,this.Canvas.fillStyle=this.Color,this.DrawText(this.DrawData.Text,r,n,t)}},this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize){if(this.NotSupportMessage)return void this.DrawNotSupportmessage();if("DRAWTEXTREL"==this.Name||"DRAWTEXTABS"==this.Name)return void this.DrawRectText();if(this.Position)return void this.DrawPosition();if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=this.IsMinuteFrame(),a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartBorder.GetLeft()+i/2+$r.FrameLeftMargin,n=this.ChartBorder.GetRight(),s=this.ChartBorder.GetTopEx(),o=this.ChartBorder.GetBottomEx();t&&(n=this.ChartBorder.GetBottom(),s=this.ChartBorder.GetRightEx(),o=this.ChartBorder.GetLeftEx(),r=this.ChartBorder.GetTop()+i/2+$r.FrameLeftMargin);var h=this.ChartFrame.XPointCount,l=Array.isArray(this.Text),u=c(),d={Text:{},Font:{}};if(1==this.Direction?(this.Canvas.textBaseline="bottom",d.Text={Baseline:"bottom"}):2==this.Direction?(this.Canvas.textBaseline="top",d.Text={Baseline:"top"}):(this.Canvas.textBaseline="middle",d.Text={Baseline:"middle"}),this.IconFont){if(this.Color=this.IconFont.Color,this.Text=this.IconFont.Text,this.FixedFontSize>0)var f=this.FixedFontSize;else var f=this.GetDynamicIconSize(a,i,this.IconSize.Max,this.IconSize.Min,this.IconSize.Zoom);this.Canvas.font=f+"px "+this.IconFont.Family}else this.FixedFontSize>0?this.TextFont=this.FixedFontSize+"px "+this.TextSize.FontName:this.TextFont=this.GetDynamicFont(a,i,this.TextSize.Max,this.TextSize.Min,this.TextSize.Zoom,this.TextSize.FontName),this.Canvas.font=this.TextFont;d.Font={Height:this.GetFontHeight()};for(var m=this.Data.DataOffset,C=0;m<this.Data.Data.length&&C<h;++m,++C,r+=a+i){var p=this.Data.Data[m];if(null!=p){if(e)var v=this.ChartFrame.GetXFromIndex(C);else{var g=r,S=r+a;if(S>n)break;var v=g+(S-g)/2}var T=this.ChartFrame.GetYFromData(p);if(v>n)break;if(this.Canvas.textAlign=this.TextAlign,this.Canvas.fillStyle=this.Color,d.Text.Color=this.Color,d.Text.Align=this.TextAlign,d.X=v,d.Y=T,this.YOffset>0&&this.Direction>0){var y=T;this.Canvas.setLineDash([5,10]),this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath(),t?(1==this.Direction?(T=s-this.YOffset*u,y+=5*u):(T=o+this.YOffset*u,y-=5*u),this.Canvas.moveTo(D(y),D(v)),this.Canvas.lineTo(D(T),D(v))):(1==this.Direction?(T=s+this.YOffset*u,y+=5*u):(T=o-this.YOffset*u,y-=5*u),this.Canvas.moveTo(D(v),D(y)),this.Canvas.lineTo(D(v),D(T))),this.Canvas.stroke(),this.Canvas.setLineDash([])}if(l){var I=this.Text[m];if(!I)continue;"DRAWNUMBER"==this.Name&&(1==this.Direction?T-=$r.DRAWABOVE.YOffset*u:2==this.Direction&&(T+=this.TextSize.YOffset*u)),"DRAWTEXT"==this.Name?this.DrawTextV2(I,d,t):this.DrawText(I,v,T,t)}else"DRAWICON"==this.Name?1==this.Direction?T-=$r.DRAWABOVE.YOffset*u:2==this.Direction&&(this.IconFont?T+=this.IconSize.YOffset*u:T+=this.TextSize.YOffset*u):"DRAWTEXT"==this.Name&&(1==this.Direction?T-=$r.DRAWABOVE.YOffset*u:2==this.Direction&&(T+=this.TextSize.YOffset*u)),"DRAWTEXT"==this.Name?this.DrawTextV2(this.Text,d,t):this.DrawText(this.Text,v,T,t)}}}}},this.DrawPosition=function(){if(this.Text){var t=!0===this.ChartFrame.IsHScreen;if(t)var e=this.ChartBorder.GetRightEx()-this.ChartBorder.GetWidthEx()*this.Position.Y,a=this.ChartBorder.GetTop()+this.ChartBorder.GetHeight()*this.Position.X;else var a=this.ChartBorder.GetLeft()+this.ChartBorder.GetWidth()*this.Position.X,e=this.ChartBorder.GetTopEx()+this.ChartBorder.GetHeightEx()*this.Position.Y;if(this.Canvas.fillStyle=this.Color,"DRAWTEXT_FIX"==this.Name?this.Canvas.font=this.Font.DRAWTEXT_FIX:"DRAWNUMBER_FIX"==this.Name&&(this.Canvas.font=this.Font.DRAWNUMBER_FIX),0==this.Position.Type?this.Canvas.textAlign="left":1==this.Position.Type?this.Canvas.textAlign="right":this.Canvas.textAlign="center",1==this.Direction?this.Canvas.textBaseline="bottom":2==this.Direction?this.Canvas.textBaseline="top":this.Canvas.textBaseline="middle",Array.isArray(this.Text)){if(!this.Data||!this.Data.Data)return;for(var i=this.ChartFrame.XPointCount,r=this.Data.DataOffset,n=0;r<this.Data.Data.length&&n<i;++r,++n){var s=this.Text[r];if(s){this.DrawText(s,a,e,t);break}}}else this.DrawText(this.Text,a,e,t)}},this.DrawText=function(t,e,a,i){i?(this.Canvas.save(),this.Canvas.translate(a,e),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(t,0,0),this.Canvas.restore()):this.Canvas.fillText(t,e,a)},this.DrawTextV2=function(t,e,a){var i=this.Canvas.measureText(t).width;if(a){var r=e.Y,n=e.X;if("right"==e.Text.Align?n-=i:"center"==e.Text.Align&&(n-=i/2),"top"==e.Text.Baseline?r-=e.Font.Height:"middle"==e.Text.Baseline&&(r-=e.Font.Height/2),this.TextBG&&(this.TextBG.Color||this.TextBG.Border)){var s=this.TextBG.Margin,o=r-s[0],h=n-s[2],l=i+s[2]+s[3],u=e.Font.Height+s[0]+s[1];this.TextBG.Color&&(this.Canvas.fillStyle=this.TextBG.Color,this.Canvas.fillRect(o,h,u,l)),this.TextBG.Border&&(this.Canvas.strokeStyle=this.TextBG.Border,this.Canvas.strokeRect(D(o),D(h),g(u),g(l)))}this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left",this.Canvas.fillStyle=e.Text.Color,this.Canvas.save(),this.Canvas.translate(r,n),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(t,0,0),this.Canvas.restore()}else{var r=e.X,n=e.Y;if("right"==e.Text.Align?r-=i:"center"==e.Text.Align&&(r-=i/2),"top"==e.Text.Baseline?n+=e.Font.Height:"middle"==e.Text.Baseline&&(n+=e.Font.Height/2),this.TextBG&&(this.TextBG.Color||this.TextBG.Border)){var s=this.TextBG.Margin,o=r-s[2],h=n-e.Font.Height-s[1],l=i+s[2]+s[3],u=e.Font.Height+s[0]+s[1];this.TextBG.Color&&(this.Canvas.fillStyle=this.TextBG.Color,this.Canvas.fillRect(o,h,l,u)),this.TextBG.Border&&(this.Canvas.strokeStyle=this.TextBG.Border,this.Canvas.strokeRect(D(o),D(h),g(l),g(u)))}this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left",this.Canvas.fillStyle=e.Text.Color,this.Canvas.fillText(t,r,n)}}}function Tt(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.ClassName="ChartStraightLine",this.Color="rgb(255,193,37)",this.Draw=function(){if(this.Data&&this.Data.Data&&1==this.Data.Data.length){var t=(this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight(),this.ChartFrame.XPointCount),e=this.Data.Data[0],a=this.ChartFrame.GetYFromData(e),i=this.ChartFrame.GetXFromIndex(0),r=this.ChartFrame.GetXFromIndex(t-1),n=parseInt(a.toString())+.5;this.Canvas.beginPath(),this.Canvas.moveTo(i,n),this.Canvas.lineTo(r,n),this.Canvas.strokeStyle=this.Color,this.Canvas.stroke()}},this.GetMaxMin=function(){var t=(this.ChartFrame.XPointCount,{});return t.Min=null,t.Max=null,this.Data&&this.Data.Data?1!=this.Data.Data.length?t:(t.Min=this.Data.Data[0],t.Max=this.Data.Data[0],t):t}}function yt(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.ClassName="ChartStraightArea",this.Color="rgb(255,193,37)",this.Font="11px 微软雅黑",this.Draw=function(){if(!this.ChartFrame.IsMinSize){if(this.NotSupportMessage)return void this.DrawNotSupportmessage();if(this.Data&&this.Data.Data){if(!0===this.ChartFrame.IsHScreen)return void this.HScreenDraw();var t=(this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight(),this.ChartBorder.GetBottom(),this.ChartBorder.GetLeft()),e=this.ChartFrame.XPointCount,a=this.ChartFrame.GetXFromIndex(e-1);for(var i in this.Data.Data){var r=this.Data.Data[i];if(null!=r&&!isNaN(r.Value)&&!isNaN(r.Value2)&&null!=r.Color){var n=Math.max(r.Value,r.Value2),s=Math.min(r.Value,r.Value2),o=this.ChartFrame.GetYFromData(n),h=this.ChartFrame.GetYFromData(s);if(this.Canvas.fillStyle=r.Color,this.Canvas.fillRect(g(t),g(o),g(a-t),g(h-o)),r.Title&&r.TitleColor){this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=r.TitleColor,this.Canvas.font=this.Font;var l=o+(h-o)/2;this.Canvas.fillText(r.Title,a,l)}}}}}},this.HScreenDraw=function(){var t=this.ChartBorder.GetBottom(),e=this.ChartBorder.GetTop(),a=this.ChartBorder.GetHeight();for(var i in this.Data.Data){var r=this.Data.Data[i];if(null!=r&&!isNaN(r.Value)&&!isNaN(r.Value2)&&null!=r.Color){var n=Math.max(r.Value,r.Value2),s=Math.min(r.Value,r.Value2),o=this.ChartFrame.GetYFromData(n),h=this.ChartFrame.GetYFromData(s);if(this.Canvas.fillStyle=r.Color,this.Canvas.fillRect(g(h),g(e),g(o-h),g(a)),r.Title&&r.TitleColor){var l=o+(h-o)/2,u=t;this.Canvas.save(),this.Canvas.translate(l,u),this.Canvas.rotate(90*Math.PI/180),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=r.TitleColor,this.Canvas.font=this.Font,this.Canvas.fillText(r.Title,0,-2),this.Canvas.restore()}}}},this.GetMaxMin=function(){var t=(this.ChartFrame.XPointCount,{});if(t.Min=null,t.Max=null,!this.Data||!this.Data.Data)return t;for(var e in this.Data.Data){var a=this.Data.Data[e];if(null!=a&&!isNaN(a.Value)&&!isNaN(a.Value2)){var i=Math.max(a.Value,a.Value2),r=Math.min(a.Value,a.Value2);null==t.Max&&(t.Max=i),null==t.Min&&(t.Min=r),t.Max<i&&(t.Max=i),t.Min>r&&(t.Min=r)}}return t}}function It(){this.newMethod=st,this.newMethod(),delete this.newMethod,this.ClassName="ChartMinutePriceLine",this.YClose,this.IsDrawArea=!0,this.AreaColor="rgba(0,191,255,0.1)",this.IsShowLead=!1,this.LeadData,this.UpColor=$r.UpBarColor,this.DownColor=$r.DownBarColor,this.BeforeOpenData,this.BeforeLineColor=$r.Minute.Before.LineColor,this.BeforeAvPriceColor=$r.Minute.Before.AvPriceColor,this.BeforePoint={Color:$r.Minute.Before.Point.Color,Radius:$r.Minute.Before.Point.Radius},this.AfterCloseData,this.MultiDayBeforeOpenData,this.MultiDayAfterCloseData,this.ColorLineData,this.Source,this.Draw=function(){if(this.NotSupportMessage)return void this.DrawNotSupportmessage();if(this.IsShow){var t=!0===this.ChartFrame.IsHScreen;this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight();!0===t&&this.ChartBorder.GetBottom();var e=this.ChartFrame.XPointCount,a=this.ChartFrame.MinuteCount,i=this.ChartBorder.GetBottomEx(),r=this.ChartBorder.GetLeftEx(),n=this.Data;if(this.DrawBeforeOpen(),this.DrawMultiDayBeforeOpen(),this.IsShowLead&&this.DrawLead(),n){for(var s=!0,o={},h={},l=0,u=0,c=n.DataOffset,d=0;c<n.Data.length&&d<e;++c,++d){var f=null;if(f=n.Data[c],++u,null!=f){var m=this.ChartFrame.GetXFromIndex(d),C=this.ChartFrame.GetYFromData(f);s?(this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath(),t?this.Canvas.moveTo(C,m):this.Canvas.moveTo(m,C),s=!1,o={X:m,Y:C}):t?this.Canvas.lineTo(C,m):this.Canvas.lineTo(m,C),h.X=m,h.Y=C,h.Price=f,++l,u>=a&&(s=!0,this.Canvas.stroke(),this.IsDrawArea&&(t?(this.Canvas.lineTo(r,m),this.Canvas.lineTo(r,o.X),this.SetFillStyle(this.AreaColor,this.ChartBorder.GetRightEx(),i,this.ChartBorder.GetLeftEx(),i)):(this.Canvas.lineTo(m,i),this.Canvas.lineTo(o.X,i),this.SetFillStyle(this.AreaColor,r,this.ChartBorder.GetTopEx(),r,i)),this.Canvas.fill()),u=0,l=0)}}if(l>0&&(this.Canvas.stroke(),this.IsDrawArea&&(t?(this.Canvas.lineTo(r,m),this.Canvas.lineTo(r,o.X),this.SetFillStyle(this.AreaColor,this.ChartBorder.GetRightEx(),i,this.ChartBorder.GetLeftEx(),i)):(this.Canvas.lineTo(m,i),this.Canvas.lineTo(o.X,i),this.SetFillStyle(this.AreaColor,r,this.ChartBorder.GetTopEx(),r,i)),this.Canvas.fill())),this.DrawColorLine(),this.DrawAfterClose(),this.DrawMultiDayAfterClose(),this.GetEventCallback){var p=this.GetEventCallback(Nr.ON_DRAW_MINUTE_LAST_POINT);if(p){var n={LastPoint:{X:h.X,Y:h.Y},Price:h.Price};p.Callback(p,n,this)}}}}},this.DrawLead=function(){if(this.LeadData){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.XPointCount,a=this.ChartFrame.MinuteCount,i=(this.ChartBorder.GetBottomEx(),this.ChartBorder.GetTopEx());if(!0===t&&(i=this.ChartBorder.GetRightEx()),!(e>a)){for(var r=[],n=null,s=null,o=this.ChartFrame.GetYFromData(this.YClose),h=(o-i)/3,l=this.LeadData,u=l.DataOffset,c=0;u<l.Data.length&&c<e;++u,++c){var d=l.Data[u];if(he.IsNumber(d)&&0!=d){var f=this.ChartFrame.GetXFromIndex(c);(null==n||n<d)&&(n=d),(null==s||s>d)&&(s=d),r.push({X:f,Value:d})}}if(!(r.length<=0)){var m=Math.max(Math.abs(n),Math.abs(s));for(var u in r){var C=r[u];C.Value>0?this.Canvas.strokeStyle=this.UpColor:this.Canvas.strokeStyle=this.DownColor;var p=o-C.Value*h/m,f=D(C.X);this.Canvas.beginPath(),!0===t?(this.Canvas.moveTo(o,f),this.Canvas.lineTo(p,f)):(this.Canvas.moveTo(f,o),this.Canvas.lineTo(f,p)),this.Canvas.stroke()}}}}},this.DrawBeforeOpen=function(){this.ChartBorder.LeftExtendWidth<10||this.BeforeOpenData&&this.DrawCallAuction(-1,this.BeforeOpenData,!0)},this.DrawAfterClose=function(){this.ChartBorder.RightExtendWidth<10||this.AfterCloseData&&this.DrawCallAuction(-1,this.AfterCloseData,!1)},this.DrawMultiDayBeforeOpen=function(){if(!(this.ChartBorder.MultiDayMinute.Count<=1||this.ChartBorder.MultiDayMinute.Left<=0)&&this.MultiDayBeforeOpenData)for(var t in this.MultiDayBeforeOpenData){var e=this.MultiDayBeforeOpenData[t];this.DrawCallAuction(parseInt(t),e,!0)}},this.DrawMultiDayAfterClose=function(){if(!(this.ChartBorder.MultiDayMinute.Count<=1||this.ChartBorder.MultiDayMinute.Right<=0)&&this.MultiDayAfterCloseData)for(var t in this.MultiDayAfterCloseData){var e=this.MultiDayAfterCloseData[t];this.DrawCallAuction(parseInt(t),e,!1)}},this.DrawCallAuction=function(t,e,a){if(e){e.Index=t;var i=!0===this.ChartFrame.IsHScreen,r=!0,n=0;e.TotalCount;if(3==e.Ver){for(var s in e.Data){var o=e.Data[s];if(o&&he.IsNumber(o.AvPrice)){if(a)var h=this.ChartFrame.GetLeftExtendXFromIndex(s,e),l=this.ChartFrame.GetLeftExtendYFromData(o.AvPrice);else var h=this.ChartFrame.GetRightExtendXFromIndex(s,e),l=this.ChartFrame.GetRightExtendYFromData(o.AvPrice);r?(this.Canvas.strokeStyle=this.BeforeAvPriceColor,this.Canvas.beginPath(),i?this.Canvas.moveTo(l,h):this.Canvas.moveTo(h,l),r=!1):i?this.Canvas.lineTo(l,h):this.Canvas.lineTo(h,l),++n}}n>0&&this.Canvas.stroke()}var r=!0,n=0,u=[];for(var s in e.Data){var o=e.Data[s];if(o&&he.IsNumber(o.Price)){if(a)var h=this.ChartFrame.GetLeftExtendXFromIndex(s,e),l=this.ChartFrame.GetLeftExtendYFromData(o.Price);else var h=this.ChartFrame.GetRightExtendXFromIndex(s,e),l=this.ChartFrame.GetRightExtendYFromData(o.Price);r?(this.Canvas.strokeStyle=this.BeforeLineColor,this.Canvas.beginPath(),i?this.Canvas.moveTo(l,h):this.Canvas.moveTo(h,l),r=!1,u.push({X:h,Y:l})):(i?this.Canvas.lineTo(l,h):this.Canvas.lineTo(h,l),u.push({X:h,Y:l})),++n}else if(0==s&&a&&he.IsNumber(this.YClose)){var h=this.ChartFrame.GetLeftExtendXFromIndex(s,e),l=this.ChartFrame.GetLeftExtendYFromData(this.YClose);this.Canvas.strokeStyle=this.BeforeLineColor,this.Canvas.beginPath(),i?this.Canvas.moveTo(l,h):this.Canvas.moveTo(h,l),r=!1}}if(n>0&&this.Canvas.stroke(),2==e.Ver&&this.BeforePoint.Radius>0){this.Canvas.fillStyle=this.BeforePoint.Color;for(var s in u){var o=u[s];this.Canvas.beginPath(),i?this.Canvas.arc(o.Y,o.X,this.BeforePoint.Radius,0,2*Math.PI):this.Canvas.arc(o.X,o.Y,this.BeforePoint.Radius,0,2*Math.PI),this.Canvas.fill()}}}},this.FindColorLineItem=function(t){if(!t||!this.ColorLineData)return null;for(var e in this.ColorLineData){var a=this.ColorLineData[e];if(a.Date==t.Date&&t.Time>=a.Start&&t.Time<=a.End)return a}return null},this.DrawColorLine=function(){if(this.ColorLineData&&this.Source&&this.Data){var t=!0===this.ChartFrame.IsHScreen,e=(this.ChartBorder.GetBorder(),this.ChartFrame.XPointCount),a=(this.ChartFrame.MinuteCount,this.Data),i=!0,r={},n=0,s=null;this.Canvas.save();for(var o=a.DataOffset,h=0;o<a.Data.length&&h<e;++o,++h){var l=null;l=a.Data[o];var u=this.Source.Data[o];if(l&&u){var c=this.FindColorLineItem(u);if(c){s&&s!=c.Color&&(this.Canvas.stroke(),i=!0);var d=this.ChartFrame.GetXFromIndex(h),f=this.ChartFrame.GetYFromData(l);i?(this.Canvas.strokeStyle=c.Color,he.IsNumber(c.LineWidth)&&(this.Canvas.lineWidth=c.LineWidth),this.Canvas.beginPath(),t?this.Canvas.moveTo(f,d):this.Canvas.moveTo(d,f),i=!1,{X:d,Y:f},s=c.Color):t?this.Canvas.lineTo(f,d):this.Canvas.lineTo(d,f),r.X=d,r.Y=f,r.Price=l,++n}else n>0&&(this.Canvas.stroke(),i=!0)}}n>0&&this.Canvas.stroke(),this.Canvas.restore()}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={};if(null==this.YClose)return e;if(!this.IsShow)return e;if(e.Min=this.YClose,e.Max=this.YClose,this.ChartBorder.LeftExtendWidth>10&&this.BeforeOpenData)for(var a in this.BeforeOpenData.Data){var i=this.BeforeOpenData.Data[a];i&&(he.IsNumber(i.Price)&&(null==e.Max&&(e.Max=i.Price),null==e.Min&&(e.Min=i.Price),e.Max<i.Price&&(e.Max=i.Price),e.Min>i.Price&&(e.Min=i.Price)),3==this.BeforeOpenData.Ver&&he.IsNumber(i.AvPrice)&&(null==e.Max&&(e.Max=i.AvPrice),null==e.Min&&(e.Min=i.AvPrice),e.Max<i.AvPrice&&(e.Max=i.AvPrice),e.Min>i.AvPrice&&(e.Min=i.AvPrice)))}for(var r=this.Data,a=r.DataOffset,n=0;a<r.Data.length&&n<t;++a,++n){var s=null;s=r.Data[a],null!=s&&(null==e.Max&&(e.Max=s),null==e.Min&&(e.Min=s),e.Max<s&&(e.Max=s),e.Min>s&&(e.Min=s))}if(e.Max==this.YClose&&e.Min==this.YClose)return e.Max=this.YClose+.1*this.YClose,e.Min=this.YClose-.1*this.YClose,e;var o=Math.max(Math.abs(this.YClose-e.Max),Math.abs(this.YClose-e.Min));return e.Max=this.YClose+o,e.Min=this.YClose-o,e},this.GetTooltipData=function(t,e,a){var i=!0===this.ChartFrame.IsHScreen;if(i)return!1;if(!this.IsShow)return!1;if(!this.Data||!he.IsNonEmptyArray(this.Data.Data))return!1;if(1!=this.ChartBorder.PtInClient(t,e,this.Canvas,i))return!1;var r=this.Data,n=this.ChartFrame.GetXData(t),s=Math.ceil(n),o=Math.floor(n);if(s>=r.Data.length||o>=r.Data.length)return!1;if(s==o){r.Data[o]}else{var h=r.Data[o],l=r.Data[s],u={X:this.ChartFrame.GetXFromIndex(o),Y:this.ChartFrame.GetYFromData(h)},c={X:this.ChartFrame.GetXFromIndex(s),Y:this.ChartFrame.GetYFromData(l)};if(this.Canvas.beginPath(),this.Canvas.moveTo(u.X,u.Y+5),this.Canvas.lineTo(u.X,u.Y-5),this.Canvas.lineTo(c.X,c.Y-5),this.Canvas.lineTo(c.X,c.Y+5),this.Canvas.closePath(),this.Canvas.isPointInPath(t,e))return a.Data={Index:n,Start:{Index:o,Item:r.Data[o]},End:{Index:s,Value:r.Data[s]}},a.ChartPaint=this,a.Type=5,!0}return!1}}function xt(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.Color="rgb(65,105,225)",this.MainData,this.MainYClose,this.SourceData,this.ClassName="ChartOverlayMinutePriceLine",this.Title,this.Symbol,this.YClose,this.Status=Kr.STATUS_NONE_ID,this.Draw=function(){if(this.Data){if(this.NotSupportMessage)return void this.DrawNotSupportmessage();var t=!0===this.ChartFrame.IsHScreen;this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight();!0===t&&this.ChartBorder.GetBottom();for(var e=this.ChartFrame.XPointCount,a=this.ChartFrame.MinuteCount,i=!0,r=0,n=this.Data.DataOffset+0,s=0;n<this.Data.Data.length&&s<e;++n,++s){var o=this.Data.Data[n].Close;if(null!=o){var h=o/this.YClose*this.MainYClose,l=this.ChartFrame.GetXFromIndex(s),u=this.ChartFrame.GetYFromData(h);i?(this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath(),t?this.Canvas.moveTo(u,l):this.Canvas.moveTo(l,u),i=!1):t?this.Canvas.lineTo(u,l):this.Canvas.lineTo(l,u),++r,r>=a&&(i=!0,this.Canvas.stroke(),r=0)}}r>0&&this.Canvas.stroke()}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={};if(null==this.YClose)return e;e.Min=this.MainYClose,e.Max=this.MainYClose;for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a].Close;if(null!=r){var r=r/this.YClose*this.MainYClose;null==e.Max&&(e.Max=r),null==e.Min&&(e.Min=r),e.Max<r&&(e.Max=r),e.Min>r&&(e.Min=r)}}if(e.Max==this.MainYClose&&e.Min==this.MainYClose)return e.Max=this.MainYClose+.1*this.MainYClose,e.Min=this.MainYClose-.1*this.MainYClose,e;var n=Math.max(Math.abs(this.MainYClose-e.Max),Math.abs(this.MainYClose-e.Min));return e.Max=this.MainYClose+n,e.Min=this.MainYClose-n,e},this.GetTooltipData=function(t,e,a){var i=!0===this.ChartFrame.IsHScreen;if(i)return!1;if(!this.IsShow)return!1;if(!this.Data||!he.IsNonEmptyArray(this.Data.Data))return!1;if(!he.IsNumber(this.YClose)||!he.IsNumber(this.MainYClose))return!1;if(1!=this.ChartBorder.PtInClient(t,e,this.Canvas,i))return!1;var r=this.Data,n=this.ChartFrame.GetXData(t),s=Math.ceil(n),o=Math.floor(n);if(s>=r.Data.length||o>=r.Data.length)return!1;if(s==o){r.Data[o]}else{var h=r.Data[o].Close;h=h/this.YClose*this.MainYClose;var l=r.Data[s].Close;l=l/this.YClose*this.MainYClose;var u={X:this.ChartFrame.GetXFromIndex(o),Y:this.ChartFrame.GetYFromData(h)},c={X:this.ChartFrame.GetXFromIndex(s),Y:this.ChartFrame.GetYFromData(l)};if(this.Canvas.beginPath(),this.Canvas.moveTo(u.X,u.Y+5),this.Canvas.lineTo(u.X,u.Y-5),this.Canvas.lineTo(c.X,c.Y-5),this.Canvas.lineTo(c.X,c.Y+5),this.Canvas.closePath(),this.Canvas.isPointInPath(t,e))return a.Data={Index:n,Start:{Index:o,Item:r.Data[o]},End:{Index:s,Value:r.Data[s]}},a.ChartPaint=this,a.Type=6,!0}return!1}}function Lt(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMinuteInfo",this.Data=new _r.default,this.SourceData,this.ChartMinutePrice,this.YClose,this.HQChartBorder,this.TextColor=$r.MinuteInfo.TextColor,this.Font=$r.MinuteInfo.Font,this.PointColor=$r.MinuteInfo.PointColor,this.LineColor=$r.MinuteInfo.LineColor,this.TextBGColor=$r.MinuteInfo.TextBGColor,this.PixelTatio=c(),this.TextHeight=20,this.TextRectCache=[],this.InfoDrawCache=[],this.FrameBottom,this.FrameTop,this.FrameLeft,this.FrameRight,this.YOffset=5,this.IsHScreen=!1,this.IsDrawFull=!1,this.TooltipRect=[],this.SetOption=function(t){t.TextColor&&(this.TextColor=t.TextColor),t.TextBGColor&&(this.TextBGColor=t.TextBGColor),t.Font&&(this.Font=t.Font),t.PointColor&&(this.PointColor=t.PointColor),t.LineColor&&(this.LineColor=t.LineColor),t.TextHeight>0&&(this.TextHeight=t.TextHeight),1==t.IsDrawFull&&(this.IsDrawFull=!0)},this.Draw=function(){if(this.TooltipRect=[],this.ChartMinutePrice&&this.Data&&!(this.Data.size<=0)){this.TextRectCache=[],this.InfoDrawCache=[],this.PixelTatio=c(),this.YOffset=5*this.PixelTatio,this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartFrame.XPointCount;this.ChartFrame.MinuteCount;this.FrameBottom=this.ChartBorder.GetBottom(),this.IsDrawFull&&this.HQChartBorder&&(this.FrameBottom=this.HQChartBorder.GetBottom()),this.FrameTop=this.ChartBorder.GetTop(),this.FrameLeft=this.ChartBorder.GetLeft(),this.FrameRight=this.ChartBorder.GetRight(),this.IsHScreen&&(this.FrameRight=this.ChartBorder.GetBottom(),this.FrameLeft=this.ChartBorder.GetTop(),this.FrameBottom=this.ChartBorder.GetLeft(),this.FrameTop=this.ChartBorder.GetRight()),this.YClose=this.ChartMinutePrice.YClose;for(var e=this.ChartMinutePrice.Source,a=e.DataOffset,i=0;a<e.Data.length&&i<t;++a,++i){var r=e.Data[a];if(r){var n=r.DateTime;this.Data.has(n)&&(this.IsHScreen?this.CalcuateInfoHScreenPosition(this.Data.get(n),i,r):this.CalcuateInfoPosition(this.Data.get(n),i,r))}}for(var a in this.InfoDrawCache){var r=this.InfoDrawCache[a];this.DrawInfoLines(r)}for(var a in this.InfoDrawCache){var r=this.InfoDrawCache[a];if(this.DrawInfoText(r),!this.IsHScreen){var s=r.Border,o=new $(s.X,s.Y,s.Width,s.Height),h={Data:{Item:r},Rect:o};this.TooltipRect.push(h)}}this.TextRectCache=[],this.InfoDrawCache=[]}},this.CalcuateInfoPosition=function(t,e,a){if(t&&t.Data&&!(t.Data.length<=0)){var i=t.Data[0];this.Canvas.font=this.Font;var r,n=this.Canvas.measureText(i.Title).width+4*this.PixelTatio,s=this.TextHeight*this.PixelTatio,o=this.ChartFrame.GetXFromIndex(e);r=he.IsNumber(i.Price)?this.ChartFrame.GetYFromData(i.Price):this.ChartFrame.GetYFromData(a.Close),o=D(o);var h=o<this.FrameLeft+Math.abs(this.FrameLeft-this.FrameRight)/2,l=[2,4,6,8,3,5,7],u=s+l[e%l.length]*this.PixelTatio,c={Y:[{Value:r+(s+this.YOffset),Offset:u},{Value:r-(2*s+this.YOffset),Offset:-u}]};a.Close<this.YClose&&(c.Y=c.Y.reverse());var d={X:o,Y:null,Width:n,Height:s};h||(d.X-=d.Width),this.FixTextRect(d,c);var f={Border:d,Start:{X:o,Y:r},IsLeft:h,Title:i.Title,Date:i.Date,Time:i.Time};i.Content&&(f.Content=i.Content),i.Link&&(f.Link=i.Link),i.Color&&(f.Color=i.Color),i.BGColor&&(f.BGColor=i.BGColor),this.InfoDrawCache.push(f),this.TextRectCache.push(d)}},this.CalcuateInfoHScreenPosition=function(t,e,a){if(t&&t.Data&&!(t.Data.length<=0)){var i=t.Data[0];this.Canvas.font=this.Font;var r,n=this.Canvas.measureText(i.Title).width+4*this.PixelTatio,s=this.TextHeight*this.PixelTatio,o=this.ChartFrame.GetXFromIndex(e);r=he.IsNumber(i.Price)?this.ChartFrame.GetYFromData(i.Price):this.ChartFrame.GetYFromData(a.Close),o=D(o);var h=o<this.FrameLeft+Math.abs(this.FrameLeft-this.FrameRight)/2,l=[2,4,6,8,3,5,7],u=s+l[e%l.length]*this.PixelTatio,c={X:[{Value:r+(s+this.YOffset),Offset:u},{Value:r-(2*s+this.YOffset),Offset:-u}]};a.Close>this.YClose&&(c.X=c.X.reverse());var d={X:null,Y:o,Width:s,Height:n};h||(d.Y-=d.Height),this.FixHScreenTextRect(d,c);var f={Border:d,Start:{X:r,Y:o},IsLeft:h,Title:i.Title};this.InfoDrawCache.push(f),this.TextRectCache.push(d)}},this.DrawInfoLines=function(t){var e=t.Border,a=t.IsLeft;this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(D(t.Start.X),t.Start.Y),a?this.Canvas.lineTo(D(t.Start.X),e.Y):this.IsHScreen?this.Canvas.lineTo(e.X,e.Y+e.Height):this.Canvas.lineTo(D(t.Start.X),e.Y),this.Canvas.stroke(),this.Canvas.fillStyle=this.PointColor,this.Canvas.beginPath(),this.Canvas.arc(t.Start.X,t.Start.Y,5,0,2*Math.PI),this.Canvas.closePath(),this.Canvas.fill()},this.DrawInfoText=function(t){var e=t.Border,a=e.X,i=e.Y;t.BGColor?this.Canvas.fillStyle=t.BGColor:this.Canvas.fillStyle=this.TextBGColor,this.Canvas.fillRect(a,i,e.Width,e.Height),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.rect(a,i,e.Width,e.Height),this.Canvas.stroke(),this.IsHScreen&&(this.Canvas.save(),this.Canvas.translate(e.X,e.Y),this.Canvas.rotate(90*Math.PI/180),a=0,i=0),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",t.Color?this.Canvas.fillStyle=t.Color:this.Canvas.fillStyle=this.TextColor,this.Canvas.font=this.Font,this.IsHScreen?this.Canvas.fillText(t.Title,a+2*this.PixelTatio,i-e.Width/2):this.Canvas.fillText(t.Title,a+2*this.PixelTatio,i+e.Height/2),this.IsHScreen&&this.Canvas.restore()},this.FixTextRect=function(t,e){for(var a in e.Y){var i=e.Y[a];t.Y=i.Value;for(var r,n=0;n<10;++n){var s=!1;for(var o in this.TextRectCache){var h=this.TextRectCache[o];if(this.IsOverlap(h,t)){s=!0;break}}if(0==s)return;if(r=t.Y,(r+=i.Offset)+t.Height>this.FrameBottom||r<this.FrameTop)break;t.Y=r}}},this.FixHScreenTextRect=function(t,e){for(var a in e.X){var i=e.X[a];t.X=i.Value;for(var r,n=0;n<10;++n){var s=!1;for(var o in this.TextRectCache){var h=this.TextRectCache[o];if(this.IsOverlap(h,t)){s=!0;break}}if(0==s)return;if(r=t.X,(r+=i.Offset)+t.Width<this.FrameBottom||r>this.FrameTop)break;t.X=r}}},this.IsOverlap=function(t,e){return t.X+t.Width>e.X&&e.X+e.Width>t.X&&t.Y+t.Height>e.Y&&e.Y+e.Height>t.Y},this.GetMaxMin=function(){return{Min:null,Max:null}},this.GetTooltipData=function(t,e,a){for(var i in this.TooltipRect){var r=this.TooltipRect[i];if(r.Rect){var n=r.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(n.X,n.Y,n.Width,n.Height),this.Canvas.isPointInPath(t,e))return a.Data=r,a.ChartPaint=this,a.Type=3,!0}}return!1}}function Mt(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMACD",this.UpColor=$r.UpBarColor,this.DownColor=$r.DownBarColor,this.LineWidth=1,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize){if(this.NotSupportMessage)return void this.DrawNotSupportmessage();if(!0===this.ChartFrame.IsHScreen)return void this.HScreenDraw();var t=this.IsMinuteFrame(),e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetBorder(),r=i.LeftEx+a/2+$r.FrameLeftMargin,n=i.RightEx,s=this.ChartFrame.XPointCount,o=this.GetLockRect();o&&(n=o.Left);var h=this.ChartFrame.GetYFromData(0),l=this.LineWidth*c();50==this.LineWidth?l=e:l>e&&(l=e);var u=this.Canvas.lineWidth;this.Canvas.lineWidth=l;for(var d=this.Data.DataOffset,f=0;d<this.Data.Data.length&&f<s;++d,++f,r+=e+a){var m=this.Data.Data[d];if(null!=m){if(t)var C=this.ChartFrame.GetXFromIndex(f);else{var p=r,D=r+e;if(D>n)break;var C=p+(D-p)/2}var g=this.ChartFrame.GetYFromData(m);if(C>n)break;var S=v(l,C);this.Canvas.beginPath(),this.Canvas.moveTo(S,h),this.Canvas.lineTo(S,g),this.Canvas.strokeStyle=m>=0?this.UpColor:this.DownColor,this.Canvas.stroke(),this.Canvas.closePath()}}this.Canvas.lineWidth=u}},this.HScreenDraw=function(){var t=this.ChartFrame.DataWidth,e=(this.ChartFrame.DistanceWidth,this.ChartBorder.GetHScreenBorder()),a=e.BottomEx,i=this.ChartFrame.XPointCount,r=this.GetLockRect();r&&(a=r.Top);var n=this.ChartFrame.GetYFromData(0),s=this.LineWidth*c();50==this.LineWidth?s=t:s>t&&(s=t);var o=this.Canvas.lineWidth;this.Canvas.lineWidth=s;for(var h=this.Data.DataOffset,l=0;h<this.Data.Data.length&&l<i;++h,++l){var u=this.Data.Data[h];if(null!=u){var d=this.ChartFrame.GetXFromIndex(l),f=this.ChartFrame.GetYFromData(u);if(d>a)break;this.Canvas.beginPath(),this.Canvas.moveTo(n,D(d)),this.Canvas.lineTo(f,D(d)),this.Canvas.strokeStyle=u>=0?this.UpColor:this.DownColor,this.Canvas.stroke(),this.Canvas.closePath()}}this.Canvas.lineWidth=o}}function _t(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.ClassName="ChartBar",this.UpBarColor=$r.UpBarColor,this.DownBarColor=$r.DownBarColor,this.Draw=function(){if(!this.ChartFrame.IsMinSize){if(this.NotSupportMessage)return void this.DrawNotSupportmessage();var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartBorder.GetRight(),i=this.ChartFrame.XPointCount,r=this.ChartBorder.GetLeft()+e/2+2,n=this.ChartFrame.GetYFromData(0);if(t>=4){n=g(n);for(var s=this.Data.DataOffset,o=0;s<this.Data.Data.length&&o<i;++s,++o,r+=t+e){var h=this.Data.Data[s];if(null!=h&&0!=h){var l=r,u=r+t;if(u>a)break;var c=this.ChartFrame.GetXFromIndex(o),d=this.ChartFrame.GetYFromData(h);this.Canvas.fillStyle=h>0?this.UpBarColor:this.DownBarColor;var f=g(Math.abs(n-d));d=n-d>0?n-f:n+f,this.Canvas.fillRect(g(l),d,g(t),f)}}}else for(var s=this.Data.DataOffset,o=0;s<this.Data.Data.length&&o<i;++s,++o,r+=t+e){var h=this.Data.Data[s];if(null!=h&&0!=h){var l=r,u=r+t;if(u>a)break;var c=this.ChartFrame.GetXFromIndex(o),d=this.ChartFrame.GetYFromData(h);this.Canvas.strokeStyle=h>0?this.UpBarColor:this.DownBarColor,this.Canvas.beginPath(),this.Canvas.moveTo(D(c),d),this.Canvas.lineTo(D(c),n),this.Canvas.stroke()}}}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={};e.Min=0,e.Max=null;for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];null==e.Max&&(e.Max=r),e.Max<r&&(e.Max=r)}return e}}function bt(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.IsDrawFirst=!0,this.ClassName="ChartBand",this.FirstColor=$r.Index.LineColor[0],this.SecondColor=$r.Index.LineColor[1],this.Draw=function(){if(!this.ChartFrame.IsMinSize){if(this.NotSupportMessage)return void this.DrawNotSupportmessage();for(var t=this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartFrame.XPointCount,r=this.ChartBorder.GetLeft()+a/2+2,n=0,s=0,o=0,h=[],l=[],u=this.Data.DataOffset,c=0;u<this.Data.Data.length&&c<i;++u,++c,r+=e+a){for(h=[],l=[];u<this.Data.Data.length&&c<i;++u,++c,r+=e+a){var d=this.Data.Data[u];if(null==d||null==d.Value||null==d.Value2)break;n=this.ChartFrame.GetXFromIndex(c),s=this.ChartFrame.GetYFromData(d.Value),o=this.ChartFrame.GetYFromData(d.Value2),t?(h.push({x:s,y:n}),l.push({x:o,y:n})):(h.push({x:n,y:s}),l.push({x:n,y:o}))}h.length>1&&l.length>1&&this.DrawBand(h,l)}}},this.DrawBand=function(t,e){this.Canvas.save(),this.Canvas.beginPath();for(var a=0;a<t.length;++a)0==a?this.Canvas.moveTo(t[a].x,t[a].y):this.Canvas.lineTo(t[a].x,t[a].y);for(var a=e.length-1;a>=0;--a)this.Canvas.lineTo(e[a].x,e[a].y);this.Canvas.closePath(),this.Canvas.clip(),this.Canvas.moveTo(t[0].x,this.ChartBorder.GetBottom());for(var a=0;a<t.length;++a)this.Canvas.lineTo(t[a].x,t[a].y);this.Canvas.lineTo(t[t.length-1].x,this.ChartBorder.GetBottom()),this.Canvas.closePath(),this.Canvas.fillStyle=this.FirstColor,this.Canvas.fill(),this.Canvas.beginPath(),this.Canvas.moveTo(e[0].x,this.ChartBorder.GetBottom());for(var a=0;a<e.length;++a)this.Canvas.lineTo(e[a].x,e[a].y);this.Canvas.lineTo(e[e.length-1].x,this.ChartBorder.GetBottom()),this.Canvas.closePath(),this.Canvas.fillStyle=this.SecondColor,this.Canvas.fill(),this.Canvas.restore()},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={};e.Min=null,e.Max=null;for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(null!=r&&null!=r.Value&&null!=r.Value2){var n=r.Value>r.Value2?r.Value:r.Value2,s=r.Value<r.Value2?r.Value:r.Value2;null==e.Max?e.Max=n:e.Max<n&&(e.Max=n),null==e.Min?e.Min=s:e.Min>s&&(e.Min=s)}}return e}}function wt(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.IsDrawFirst=!0,this.ClassName="ChartLineArea",this.Color="rgb(56,67,99)",this.IsHScreen=!1,this.Draw=function(){if(!this.ChartFrame.IsMinSize){if(this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.NotSupportMessage)return void this.DrawNotSupportmessage();if(this.Data&&this.Data.Data){for(var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartFrame.XPointCount,i=this.ChartBorder.GetLeft()+e/2+$r.FrameLeftMargin,r=0,n=0,s=0,o=[],h=this.Data.DataOffset,l=0;h<this.Data.Data.length&&l<a;++h,++l,i+=t+e){var u=this.Data.Data[h];o[h]=null,null!=u&&null!=u.Value&&null!=u.Value2&&(r=this.ChartFrame.GetXFromIndex(l),n=this.ChartFrame.GetYFromData(u.Value),s=this.ChartFrame.GetYFromData(u.Value2),this.IsHScreen?o[h]={Line:{X:n,Y:r},Line2:{X:s,Y:r}}:o[h]={Line:{X:r,Y:n},Line2:{X:r,Y:s}})}this.Canvas.fillStyle=this.Color;var c=!0,d=0,f=[];for(var h in o){var m=o[h];if(m)c?(this.Canvas.beginPath(),this.Canvas.moveTo(m.Line.X,m.Line.Y),c=!1):this.Canvas.lineTo(m.Line.X,m.Line.Y),f.push(m),++d;else{if(d>0){for(var l=f.length-1;l>=0;--l){var C=f[l];this.Canvas.lineTo(C.Line2.X,C.Line2.Y)}this.Canvas.closePath(),this.Canvas.fill()}c=!0,d=0,f=[]}}if(d>0){for(var l=f.length-1;l>=0;--l){var C=f[l];this.Canvas.lineTo(C.Line2.X,C.Line2.Y)}this.Canvas.closePath(),this.Canvas.fill()}}}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={};e.Min=null,e.Max=null;for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(r&&null!=r.Value&&null!=r.Value2){var n=r.Value>r.Value2?r.Value:r.Value2,s=r.Value<r.Value2?r.Value:r.Value2;null==e.Max?e.Max=n:e.Max<n&&(e.Max=n),null==e.Min?e.Min=s:e.Min>s&&(e.Min=s)}}return e}}function Ft(){this.newMethod=wt,this.newMethod(),delete this.newMethod,this.IsDrawFirst=!0,this.IsHScreen=!1,this.ClassName="ChartFillRGN",this.DrawRGB=function(t){var e=!0,a=0,i=[],r=null;for(var n in t){var s=t[n];if(!s||r&&s.Color!=r){if(a>0){for(var o=i.length-1;o>=0;--o){var h=i[o];this.Canvas.lineTo(h.Line2.X,h.Line2.Y)}this.Canvas.closePath(),this.Canvas.fillStyle=r,this.Canvas.fill()}e=!0,a=0,i=[],r=null}s&&(e?(this.Canvas.beginPath(),this.Canvas.moveTo(s.Line.X,s.Line.Y),e=!1,r=s.Color):this.Canvas.lineTo(s.Line.X,s.Line.Y),i.push(s),++a)}if(a>0){for(var o=i.length-1;o>=0;--o){var h=i[o];this.Canvas.lineTo(h.Line2.X,h.Line2.Y)}this.Canvas.closePath(),this.Canvas.fillStyle=r,this.Canvas.fill()}},this.Draw=function(){if(!this.ChartFrame.IsMinSize){if(this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.NotSupportMessage)return void this.DrawNotSupportmessage();if(this.Data&&this.Data.Data){for(var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartFrame.XPointCount,i=this.ChartBorder.GetLeft()+e/2+$r.FrameLeftMargin,r=0,n=0,s=0,o=[],h=this.Data.DataOffset,l=0;h<this.Data.Data.length&&l<a;++h,++l,i+=t+e){var u=this.Data.Data[h];o[h]=null,null!=u&&null!=u.Value&&null!=u.Value2&&u.Color&&(r=this.ChartFrame.GetXFromIndex(l),n=this.ChartFrame.GetYFromData(u.Value),s=this.ChartFrame.GetYFromData(u.Value2),this.IsHScreen?o[h]={Line:{X:n,Y:r},Line2:{X:s,Y:r},Color:u.Color}:o[h]={Line:{X:r,Y:n},Line2:{X:r,Y:s},Color:u.Color})}this.DrawRGB(o)}}}}function Et(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.IsDrawFirst=!1,this.ClassName="ChartFLOATRGN",this.Color="rgb(56,67,99)",this.IsHScreen=!1,this.Draw=function(){if(!this.ChartFrame.IsMinSize){if(this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.NotSupportMessage)return void this.DrawNotSupportmessage();if(this.Data&&this.Data.Data){for(var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartFrame.XPointCount,i=this.ChartBorder.GetLeft()+e/2+$r.FrameLeftMargin,r=0,n=0,s=0,o=[],h=this.Data.DataOffset,l=0;h<this.Data.Data.length&&l<a;++h,++l,i+=t+e){var u=this.Data.Data[h];o[h]=null,u&&he.IsNumber(u.Value)&&he.IsNumber(u.Value2)&&u.Color&&(r=this.ChartFrame.GetXFromIndex(l),n=this.ChartFrame.GetYFromData(u.Value),this.IsHScreen?o[h]={Line:{X:n,Y:r},Line2:{X:n+u.Value2*c(),Y:r},Color:u.Color}:o[h]={Line:{X:r,Y:n},Line2:{X:r,Y:n-u.Value2*c()},Color:u.Color})}var d=null;for(var h in o){var u=o[h];if(d&&u)if(this.IsHScreen){var f=u.Line.Y-d.Line.Y;r=d.Line.Y+f/2,n=d.Line.X+(u.Line.X-d.Line.X)/2,s=d.Line2.X+(u.Line2.X-d.Line2.X)/2,d.RightLine={X:n,Y:r},d.RightLine2={X:s,Y:r},u.LeftLine={X:n,Y:r},u.LeftLine2={X:s,Y:r}}else{var f=u.Line.X-d.Line.X;r=d.Line.X+f/2,n=d.Line.Y+(u.Line.Y-d.Line.Y)/2,s=d.Line2.Y+(u.Line2.Y-d.Line2.Y)/2,d.RightLine={X:r,Y:n},d.RightLine2={X:r,Y:s},u.LeftLine={X:r,Y:n},u.LeftLine2={X:r,Y:s}}d=u}this.DrawRGB(o)}}},this.DrawRGB=function(t){var e=!0,a=0,i=[],r=null;if(this.IsHScreen)var n=this.ChartBorder.GetLeftEx(),s=this.ChartBorder.GetRightEx(),o=this.ChartBorder.GetTop(),h=this.ChartBorder.GetBottom();else var n=this.ChartBorder.GetLeft(),s=this.ChartBorder.GetRight(),o=this.ChartBorder.GetTopEx(),h=this.ChartBorder.GetBottomEx();this.Canvas.save(),this.Canvas.beginPath(),this.Canvas.rect(n,o,s-n,h-o),this.Canvas.clip();for(var l in t){var u=t[l];if(!u||r&&u.Color!=r){if(a>0){var c=i[i.length-1],d=i[0];c.RightLine&&(this.Canvas.lineTo(c.RightLine.X,c.RightLine.Y),this.Canvas.lineTo(c.RightLine2.X,c.RightLine2.Y));for(var f=i.length-1;f>=0;--f){var m=i[f];this.Canvas.lineTo(m.Line2.X,m.Line2.Y)}d.LeftLine2&&this.Canvas.lineTo(d.LeftLine2.X,d.LeftLine2.Y),this.Canvas.closePath(),this.Canvas.fillStyle=r,this.Canvas.fill()}e=!0,a=0,i=[],r=null}u&&(e?(this.Canvas.beginPath(),u.LeftLine?(this.Canvas.moveTo(u.LeftLine.X,u.LeftLine.Y),this.Canvas.lineTo(u.Line.X,u.Line.Y)):this.Canvas.moveTo(u.Line.X,u.Line.Y),e=!1,r=u.Color):this.Canvas.lineTo(u.Line.X,u.Line.Y),i.push(u),++a)}if(a>0){var c=i[i.length-1],d=i[0];c.RightLine&&(this.Canvas.lineTo(c.RightLine.X,c.RightLine.Y),this.Canvas.lineTo(c.RightLine2.X,c.RightLine2.Y));for(var f=i.length-1;f>=0;--f){var m=i[f];this.Canvas.lineTo(m.Line2.X,m.Line2.Y)}d.LeftLine2&&this.Canvas.lineTo(d.LeftLine2.X,d.LeftLine2.Y),this.Canvas.closePath(),this.Canvas.fillStyle=r,this.Canvas.fill()}this.Canvas.restore()},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={};e.Min=null,e.Max=null;for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(r&&he.IsNumber(r.Value)){var n=r.Value;null==e.Max?e.Max=n:e.Max<n&&(e.Max=n),null==e.Min?e.Min=n:e.Min>n&&(e.Min=n)}}return e}}function At(){this.newMethod=Ft,this.newMethod(),delete this.newMethod,this.IsDrawFirst=!0,this.IsHScreen=!1,this.ClassName="ChartFillBGRGN",this.DrawVerticalRGN=function(){for(var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartFrame.XPointCount,i=this.ChartBorder.GetLeft()+e/2+$r.FrameLeftMargin,r=this.ChartBorder.GetTopEx(),n=this.ChartBorder.GetBottomEx(),s=r,o=n,h=[],l=this.Data.DataOffset,u=0;l<this.Data.Data.length&&u<a;++l,++u,i+=t+e){var c=this.Data.Data[l];h[l]=null,c&&c.Color&&(x=this.ChartFrame.GetXFromIndex(u),this.IsHScreen?h[l]={Line:{X:s,Y:x},Line2:{X:o,Y:x},Color:c.Color}:h[l]={Line:{X:x,Y:s},Line2:{X:x,Y:o},Color:c.Color})}this.DrawRGB(h)},this.Draw=function(){if(!this.ChartFrame.IsMinSize){if(this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.NotSupportMessage)return void this.DrawNotSupportmessage();if(this.Data&&this.Data.Data){if("FILLVERTICALRGN"==this.Name)return void this.DrawVerticalRGN();var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartFrame.XPointCount,i=this.ChartBorder.GetLeft()+e/2+$r.FrameLeftMargin,r=this.ChartBorder.GetTopEx(),n=this.ChartBorder.GetBottomEx(),s=0,o=0,h=r;"FILLBOTTOMRGN"==this.Name&&(h=n);for(var l=[],u=this.Data.DataOffset,c=0;u<this.Data.Data.length&&c<a;++u,++c,i+=t+e){var d=this.Data.Data[u];l[u]=null,null!=d&&null!=d.Value&&d.Color&&(s=this.ChartFrame.GetXFromIndex(c),o=this.ChartFrame.GetYFromData(d.Value),this.IsHScreen?l[u]={Line:{X:o,Y:s},Line2:{X:h,Y:s},Color:d.Color}:l[u]={Line:{X:s,Y:o},Line2:{X:s,Y:h},Color:d.Color})}this.DrawRGB(l)}}},this.DrawRGB=function(t){var e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=(a+e)/2,r=!0,n=0,s=[],o=null;for(var h in t){var l=t[h];if(!l||o&&l.Color!=o){if(n>0){for(var u=s.length-1;u>=0;--u){var c=s[u];this.Canvas.lineTo(c.Line2.X+i,c.Line2.Y),this.Canvas.lineTo(c.Line2.X-i,c.Line2.Y)}this.Canvas.closePath(),this.Canvas.fillStyle=o,this.Canvas.fill()}r=!0,n=0,s=[],o=null}l&&(r?(this.Canvas.beginPath(),this.Canvas.moveTo(l.Line.X-i,l.Line.Y),this.Canvas.lineTo(l.Line.X+i,l.Line.Y),r=!1,o=l.Color):(this.Canvas.lineTo(l.Line.X-i,l.Line.Y),this.Canvas.lineTo(l.Line.X+i,l.Line.Y)),s.push(l),++n)}if(n>0){for(var u=s.length-1;u>=0;--u){var c=s[u];this.Canvas.lineTo(c.Line2.X+i,c.Line2.Y),this.Canvas.lineTo(c.Line2.X-i,c.Line2.Y)}this.Canvas.closePath(),this.Canvas.fillStyle=o,this.Canvas.fill()}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={};e.Min=null,e.Max=null;for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(r&&null!=r.Value){var r=r.Value;null==e.Max?e.Max=r:e.Max<r&&(e.Max=r),null==e.Min?e.Min=r:e.Min>r&&(e.Min=r)}}return e}}function Nt(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.IsDrawFirst=!0,this.ClassName="ChartChannel",this.IsHScreen=!1,this.PointCount=0,this.DataWidth=0,this.DistanceWidth=0,this.ChartRight=0,this.LineColor="RGB(255,0,0)",this.LineDotted=[3,3],this.AreaColor="RGB(255,222,173)",this.LineWidth=1,this.CalculateData=function(){for(var t=[],e=[],a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<this.PointCount;++a,++i){var r=this.Data.Data[a];if(r&&he.IsNumber(r.Value)&&he.IsNumber(r.Value2)){var n=this.ChartFrame.GetXFromIndex(i);if(n>this.ChartRight)break;var s=this.ChartFrame.GetYFromData(r.Value),o=this.ChartFrame.GetYFromData(r.Value2);e.push({X:n,Y:s,Y2:o})}else e.length>0&&(t.push(e),e=[])}return e.length>0&&t.push(e),t},this.DrawArea=function(t){if(!(t.length<=0)){this.Canvas.beginPath();var e=0,a=t[0];this.IsHScreen?this.Canvas.moveTo(a.Y,a.X):this.Canvas.moveTo(a.X,a.Y);for(var i=1;i<t.length;++i){var r=t[i];this.IsHScreen?this.Canvas.lineTo(r.Y,r.X):this.Canvas.lineTo(r.X,r.Y),++e}for(var i=t.length-1;i>=0;--i){var r=t[i];this.IsHScreen?this.Canvas.lineTo(r.Y2,r.X):this.Canvas.lineTo(r.X,r.Y2),++e}this.Canvas.closePath(),this.Canvas.fillStyle=this.AreaColor,this.Canvas.fill()}},this.DrawLine=function(t){this.Canvas.strokeStyle=this.LineColor;for(var e=0;e<2;++e){for(var a=!0,i=0,r=0;r<t.length;++r){var n=t[r];a?(this.Canvas.beginPath(),this.IsHScreen?this.Canvas.moveTo(0===e?n.Y:n.Y2,n.X):this.Canvas.moveTo(n.X,0===e?n.Y:n.Y2),a=!1):this.IsHScreen?this.Canvas.lineTo(0===e?n.Y:n.Y2,n.X):this.Canvas.lineTo(n.X,0===e?n.Y:n.Y2),++i}i>0&&this.Canvas.stroke()}},this.Draw=function(){if(!this.ChartFrame.IsMinSize){if(this.NotSupportMessage)return void this.DrawNotSupportmessage();this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.PointCount=this.ChartFrame.XPointCount,this.DataWidth=this.ChartFrame.DataWidth,this.DistanceWidth=this.ChartFrame.DistanceWidth,this.IsHScreen?this.ChartRight=this.ChartBorder.GetBottom():this.ChartRight=this.ChartBorder.GetRight();var t=this.CalculateData();if(t&&!(t.length<=0)){this.Canvas.save(),this.Canvas.lineWidth=this.LineWidth*c(),this.Canvas.setLineDash(this.LineDotted);for(var e=0;e<t.length;++e){var a=t[e];this.DrawArea(a),this.DrawLine(a)}this.Canvas.restore()}}},this.GetMaxMin=function(){for(var t=this.ChartFrame.XPointCount,e={Min:null,Max:null},a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(null!=r&&null!=r.Value&&null!=r.Value2){var n=r.Value>r.Value2?r.Value:r.Value2,s=r.Value<r.Value2?r.Value:r.Value2;null==e.Max?e.Max=n:e.Max<n&&(e.Max=n),null==e.Min?e.Min=s:e.Min>s&&(e.Min=s)}}return e}}function Ot(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.ClassName="ChartBackground",this.Color=null,this.ColorAngle=0,this.IsDrawFirst=!0,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Color&&!(this.Color.length<=0)){if(this.IsHScreen=!0===this.ChartFrame.IsHScreen,2==this.Color.length){if(this.IsHScreen)if(0==this.ColorAngle)var t={X:this.ChartBorder.GetRight(),Y:this.ChartBorder.GetTopEx()},e={X:this.ChartBorder.GetLeft(),Y:this.ChartBorder.GetTopEx()};else var t={X:this.ChartBorder.GetLeft(),Y:this.ChartBorder.GetTopEx()},e={X:this.ChartBorder.GetLeft(),Y:this.ChartBorder.GetBottomEx()};else if(0==this.ColorAngle)var t={X:this.ChartBorder.GetLeft(),Y:this.ChartBorder.GetTopEx()},e={X:this.ChartBorder.GetLeft(),Y:this.ChartBorder.GetBottomEx()};else var t={X:this.ChartBorder.GetLeft(),Y:this.ChartBorder.GetTopEx()},e={X:this.ChartBorder.GetRight(),Y:this.ChartBorder.GetTopEx()};var a=this.Canvas.createLinearGradient(t.X,t.Y,e.X,e.Y);a.addColorStop(0,this.Color[0]),a.addColorStop(1,this.Color[1]),this.Canvas.fillStyle=a}else{if(1!=this.Color.length)return;this.Canvas.fillStyle=this.Color[0]}if("DRAWGBK2"==this.Name||"KLINE_BG"==this.Name)return void this.DrawRegion();if(this.IsHScreen)var i=this.ChartBorder.GetLeftEx(),r=this.ChartBorder.GetTop(),n=this.ChartBorder.GetWidthEx(),s=this.ChartBorder.GetHeight();else var i=this.ChartBorder.GetLeft(),r=this.ChartBorder.GetTopEx(),n=this.ChartBorder.GetWidth(),s=this.ChartBorder.GetHeightEx();this.Canvas.fillRect(i,r,n,s)}},this.DrawRegion=function(){var t=this.ChartFrame.XPointCount,e=this.ChartBorder.GetLeft()+i/2+$r.FrameLeftMargin,a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartBorder.GetTopEx(),n=this.ChartBorder.GetBottomEx();this.IsHScreen&&(r=this.ChartBorder.GetRightEx(),n=this.ChartBorder.GetLeftEx());for(var s=[],o=this.Data.DataOffset,h=0;o<this.Data.Data.length&&h<t;++o,++h,e+=a+i){var l=this.Data.Data[o];if(s[o]=null,he.IsNumber(l)&&!(l<=0)){var u=this.ChartFrame.GetXFromIndex(h);this.ChartFrame.GetYFromData(l.Value);this.IsHScreen?s[o]={Line:{X:n,Y:u},Line2:{X:r,Y:u}}:s[o]={Line:{X:u,Y:r},Line2:{X:u,Y:n}}}}this.DrawBG(s)},this.DrawBG=function(t){var e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=(a+e)/2,r=!0,n=0,s=[],o=null;for(var h in t){var l=t[h];if(!l||o&&l.Color!=o){if(n>0){for(var u=s.length-1;u>=0;--u){var c=s[u];this.IsHScreen?(this.Canvas.lineTo(c.Line2.X,c.Line2.Y+i),this.Canvas.lineTo(c.Line2.X,c.Line2.Y-i)):(this.Canvas.lineTo(c.Line2.X+i,c.Line2.Y),this.Canvas.lineTo(c.Line2.X-i,c.Line2.Y))}this.Canvas.closePath(),this.Canvas.fill()}r=!0,n=0,s=[],o=null}l&&(r?(this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(l.Line.X,l.Line.Y-i),this.Canvas.lineTo(l.Line.X,l.Line.Y+i)):(this.Canvas.moveTo(l.Line.X-i,l.Line.Y),this.Canvas.lineTo(l.Line.X+i,l.Line.Y)),r=!1,o=l.Color):this.IsHScreen?(this.Canvas.lineTo(l.Line.X,l.Line.Y-i),this.Canvas.lineTo(l.Line.X,l.Line.Y+i)):(this.Canvas.lineTo(l.Line.X-i,l.Line.Y),this.Canvas.lineTo(l.Line.X+i,l.Line.Y)),s.push(l),++n)}if(n>0){for(var u=s.length-1;u>=0;--u){var c=s[u];this.IsHScreen?(this.Canvas.lineTo(c.Line2.X,c.Line2.Y+i),this.Canvas.lineTo(c.Line2.X,c.Line2.Y-i)):(this.Canvas.lineTo(c.Line2.X+i,c.Line2.Y),this.Canvas.lineTo(c.Line2.X-i,c.Line2.Y))}this.Canvas.closePath(),this.Canvas.fill()}},this.GetMaxMin=function(){return{Min:null,Max:null}}}function Pt(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.ClassName="ChartRectangle",this.Color=[],this.Rect,this.BorderColor=$r.FrameBorderPen,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Color&&this.Rect&&!(this.Color.length<=0)){this.Canvas.strokeStyle=this.BorderColor;var t=!1;if(2==this.Color.length)this.Canvas.fillStyle=this.Color[0],t=!0;else{if(1!=this.Color.length)return;this.Color[0]&&(this.Canvas.fillStyle=this.Color[0],t=!0)}var e=this.ChartBorder.GetWidth(),a=this.ChartBorder.GetHeightEx(),i=this.Rect.Left/1e3*e,r=this.Rect.Top/1e3*a,n=this.Rect.Right/1e3*e,s=this.Rect.Bottom/1e3*a;i=this.ChartBorder.GetLeft()+i,r=this.ChartBorder.GetTopEx()+r,n=this.ChartBorder.GetLeft()+n,s=this.ChartBorder.GetTopEx()+s;var o=Math.abs(i-n),h=Math.abs(r-s);t&&this.Canvas.fillRect(i,r,o,h),this.Canvas.rect(D(i),D(r),g(o),g(h)),this.Canvas.stroke()}}}function Rt(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.ClassName="ChartTextLine",this.Text,this.Line,this.Price,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Text&&this.Line&&he.IsNumber(this.Price)){this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartBorder.GetLeft(),e=this.ChartBorder.GetRight(),a=this.ChartBorder.GetBottomEx(),i=this.ChartBorder.GetTopEx(),r=this.ChartFrame.GetYFromData(this.Price),n=0;if(this.Text.Title){var s=t+2*c(),o=r;this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";var h=8*c();r-h<i?(this.Canvas.textBaseline="top",o=i):r+h>a&&(this.Canvas.textBaseline="bottom",o=a),this.Canvas.fillStyle=this.Text.Color,this.Canvas.font=this.Text.Font,this.Canvas.fillText(this.Text.Title,s,o),n=this.Canvas.measureText(this.Text.Title).width+4*c()}if(this.Line.Type>0){2==this.Line.Type&&(this.Canvas.save(),this.Canvas.setLineDash([3,5]));var s=t+n;this.Canvas.strokeStyle=this.Line.Color,this.Canvas.beginPath(),this.Canvas.moveTo(s,D(r)),this.Canvas.lineTo(e,D(r)),this.Canvas.stroke(),2==this.Line.Type&&this.Canvas.restore()}}},this.GetMaxMin=function(){var t={Min:null,Max:null};return he.IsNumber(this.Price)&&(t.Min=this.Price,t.Max=this.Price),t}}function kt(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMultiBar",this.Bars=[],this.IsHScreen=!1,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Data&&!(this.Data.length<=0)){this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset,a=this.ChartFrame.DataWidth,i=c(),r=[];for(var n in this.Bars){var s=this.Bars[n],o={Point:[],Color:s.Color,Width:a,Type:0};s.Type>0&&(o.Type=s.Type),s.Width>0?(o.Width=s.Width*i,o.Width>a&&(o.Width=a)):o.Width<4&&(o.Width=1*i);for(var h in s.Point){var l=s.Point[h];if(he.IsNumber(l.Index)){var u=l.Index-e;if(u>=0&&u<t){var d=this.ChartFrame.GetXFromIndex(u),f=this.ChartFrame.GetYFromData(l.Value),m=this.ChartFrame.GetYFromData(l.Value2);o.Point.push({X:d,Y:f,Y2:m})}}}o.Point.length>0&&r.push(o)}for(var n in r){var s=r[n];s.Width>=4?1==s.Type?this.DrawHollowBar(s):this.DrawFillBar(s):this.DrawLineBar(s)}}},this.DrawLineBar=function(t){this.Canvas.strokeStyle=t.Color;var e=this.Canvas.lineWidth;this.Canvas.lineWidth=t.Width;for(var a in t.Point){var i=t.Point[a];this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(D(i.Y),D(i.X)),this.Canvas.lineTo(D(i.Y2),D(i.X))):(this.Canvas.moveTo(D(i.X),D(i.Y)),this.Canvas.lineTo(D(i.X),D(i.Y2))),this.Canvas.stroke()}this.Canvas.lineWidth=e},this.DrawFillBar=function(t){this.Canvas.fillStyle=t.Color;for(var e in t.Point){var a=t.Point[e],i=a.X-t.Width/2,r=Math.min(a.Y,a.Y2),n=t.Width,s=Math.abs(a.Y-a.Y2);this.IsHScreen?this.Canvas.fillRect(g(r),g(i),g(s),g(n)):this.Canvas.fillRect(g(i),g(r),g(n),g(s))}},this.DrawHollowBar=function(t){this.Canvas.strokeStyle=t.Color;for(var e in t.Point){var a=t.Point[e],i=a.X-t.Width/2,r=Math.min(a.Y,a.Y2),n=t.Width,s=Math.abs(a.Y-a.Y2);this.Canvas.beginPath(),this.IsHScreen?this.Canvas.rect(D(r),D(i),g(s),g(n)):this.Canvas.rect(D(i),D(r),g(n),g(s)),this.Canvas.stroke()}this.Canvas.lineWidth=1},this.GetMaxMin=function(){var t={Min:null,Max:null},e=this.ChartFrame.XPointCount,a=this.Data.DataOffset,i=a+e;for(var r in this.Bars){var n=this.Bars[r];for(var s in n.Point){var o=n.Point[s];if(o.Index>=a&&o.Index<i){var h=Math.min(o.Value,o.Value2),l=Math.max(o.Value,o.Value2);null==t.Max?t.Max=l:t.Max<l&&(t.Max=l),null==t.Min?t.Min=h:t.Min>h&&(t.Min=h)}}}return t}}function Bt(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMultiLine",this.Lines=[],this.LineDash,this.LineWidth=1,this.IsHScreen=!1,this.ArrawAngle=35,this.ArrawLength=10,this.ArrawLineWidth=5,this.Arrow={Start:!1,End:!1},this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Data&&!(this.Data.length<=0)){this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset,a=[],i=[];for(var r in this.Lines){var n=this.Lines[r],s={Point:[],Color:n.Color},o={Start:[],End:[]};n.BGColor&&(s.BGColor=n.BGColor);for(var h=0;h<n.Point.length;++h){var l=n.Point[h];if(he.IsNumber(l.Index)){var u=l.Index-e;if(u>=0&&u<t){var d=this.ChartFrame.GetXFromIndex(u),f=this.ChartFrame.GetYFromData(l.Value,!1),m={X:d,Y:f,End:!1};s.Point.push(m),0!=h&&1!=h||o.Start.push(m),h!=n.Point.length-1&&h!=n.Point.length-2||o.End.push(m)}else s.Point.length>0&&(s.Point[s.Point.length-1].End=!0)}}s.Point.length>=2&&(a.push(s),i.push(o))}var C=c();this.Canvas.save();for(var r in a){this.LineDash&&this.Canvas.setLineDash(this.LineDash),he.IsPlusNumber(this.LineWidth)?this.Canvas.lineWidth=this.LineWidth*C:this.Canvas.lineWidth=1*C;var p=a[r];this.DrawLine(p,i[r])}this.Canvas.restore()}},this.DrawLine=function(t,e){if(t.BGColor){this.Canvas.fillStyle=t.BGColor;for(var a in t.Point){var i=t.Point[a];0==a?(this.Canvas.beginPath(),this.IsHScreen?this.Canvas.moveTo(i.Y,i.X):this.Canvas.moveTo(i.X,i.Y)):this.IsHScreen?this.Canvas.lineTo(i.Y,i.X):this.Canvas.lineTo(i.X,i.Y)}this.Canvas.closePath(),this.Canvas.fill()}this.Canvas.strokeStyle=t.Color;var r=0;for(var a in t.Point){var i=t.Point[a];0==r?(this.Canvas.beginPath(),this.IsHScreen?this.Canvas.moveTo(i.Y,i.X):this.Canvas.moveTo(i.X,i.Y),++r):(this.IsHScreen?this.Canvas.lineTo(i.Y,i.X):this.Canvas.lineTo(i.X,i.Y),++r),1==i.End&&(r>0&&this.Canvas.stroke(),r=0)}r>0&&this.Canvas.stroke(),2==e.End.length&&1==this.Arrow.End&&this.DrawArrow(e.End[0],e.End[1]),2==e.Start.length&&1==this.Arrow.Start&&this.DrawArrow(e.Start[1],e.Start[0])},this.DrawArrow=function(t,e){var a=this.ArrawAngle,i=this.ArrawLength,r=180*Math.atan2(t.Y-e.Y,t.X-e.X)/Math.PI,n=(r+a)*Math.PI/180,s=(r-a)*Math.PI/180,o=i*Math.cos(n),h=i*Math.sin(n),l=i*Math.cos(s),u=i*Math.sin(s);this.Canvas.beginPath();var d=e.X+o,f=e.Y+h;this.Canvas.moveTo(d,f),this.Canvas.lineTo(e.X,e.Y),d=e.X+l,f=e.Y+u,this.Canvas.lineTo(d,f),this.Canvas.setLineDash([]),this.Canvas.lineWidth=this.ArrawLineWidth*c(),this.Canvas.stroke()},this.GetMaxMin=function(){var t={Min:null,Max:null},e=this.ChartFrame.XPointCount,a=this.Data.DataOffset,i=a+e;for(var r in this.Lines){var n=this.Lines[r];for(var s in n.Point){var o=n.Point[s];o.Index>=a&&o.Index<i&&(null==t.Max?t.Max=o.Value:t.Max<o.Value&&(t.Max=o.Value),null==t.Min?t.Min=o.Value:t.Min>o.Value&&(t.Min=o.Value))}}return t}}function Yt(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMultiText",this.Texts=[],this.Font=$r.DefaultTextFont,this.Color=$r.DefaultTextColor,this.IsHScreen=!1,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Data&&!(this.Data.length<=0)&&this.Texts){this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset,a=this.ChartBorder.GetLeft(),i=this.ChartBorder.GetRight();this.IsHScreen&&(a=this.ChartBorder.GetTop(),i=this.ChartBorder.GetBottom());for(var r in this.Texts){var n=this.Texts[r];if(n.Text&&he.IsNumber(n.Index)){var s=n.Index-e;if(s>=0&&s<t){var o=this.ChartFrame.GetXFromIndex(s),h=this.ChartFrame.GetYFromData(n.Value);n.Color?this.Canvas.fillStyle=n.Color:this.Canvas.fillStyle=this.Color,n.Font?this.Canvas.font=n.Font:this.Canvas.font=this.Font;var l=this.Canvas.measureText(n.Text).width;if(this.Canvas.textAlign="center",o+l/2>=i?(this.Canvas.textAlign="right",o=i):o-l/2<a&&(this.Canvas.textAlign="left",o=a),1==n.Baseline?this.Canvas.textBaseline="top":2==n.Baseline?this.Canvas.textBaseline="bottom":this.Canvas.textBaseline="middle",this.IsHScreen?(this.Canvas.save(),this.Canvas.translate(h,o),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(n.Text,0,0),this.Canvas.restore()):this.Canvas.fillText(n.Text,o,h),n.Line){var u=this.Data.Data[n.Index],c="H"==n.Line.KData?u.High:u.Low,d=this.ChartFrame.GetYFromData(c),f=h;Array.isArray(n.Line.Offset)&&2==n.Line.Offset.length&&(f>d?(f-=n.Line.Offset[1],d+=n.Line.Offset[0]):f<d&&(f+=n.Line.Offset[1],d-=n.Line.Offset[0])),this.Canvas.save(),n.Line.Dash&&this.Canvas.setLineDash(n.Line.Dash),n.Line.Width>0&&(this.Canvas.lineWidth=n.Line.Width),this.Canvas.strokeStyle=n.Line.Color,this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(f,D(o)),this.Canvas.lineTo(d,D(o))):(this.Canvas.moveTo(D(o),f),this.Canvas.lineTo(D(o),d)),this.Canvas.stroke(),this.Canvas.restore()}}}}}},this.GetMaxMin=function(){var t={Min:null,Max:null};if(!this.Texts)return t;var e=this.ChartFrame.XPointCount,a=this.Data.DataOffset,i=a+e;for(var r in this.Texts){var n=this.Texts[r];n.Index>=a&&n.Index<i&&(null==t.Max?t.Max=n.Value:t.Max<n.Value&&(t.Max=n.Value),null==t.Min?t.Min=n.Value:t.Min>n.Value&&(t.Min=n.Value))}return t}}function Ht(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMultiSVGIcon",this.Icon,this.IconSize={Max:$r.DRAWICON.Icon.MaxSize,Min:$r.DRAWICON.Icon.MinSize,Zoom:{Type:$r.DRAWICON.Icon.Zoom.Type,Value:$r.DRAWICON.Icon.Zoom.Value}},this.Family,this.Color=$r.DefaultTextColor,this.IsHScreen=!1,this.IconRect=[],this.Draw=function(){if(this.IconRect=[],this.IsShow&&!this.ChartFrame.IsMinSize&&this.Data&&!(this.Data.length<=0)&&this.Family&&this.Icon&&he.IsNonEmptyArray(this.Icon)){this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset;this.DataWidth=this.ChartFrame.DataWidth,this.DistanceWidth=this.ChartFrame.DistanceWidth;var a=this.GetBorder();if(this.IsHScreen)var i=a.TopEx,r=a.BottomEx;else var i=a.LeftEx,r=a.RightEx;var n=this.GetDynamicIconSize(this.DataWidth,this.DistanceWidth,this.IconSize.Max,this.IconSize.Min,this.IconSize.Zoom);this.Canvas.font=n+"px "+this.Family;for(var s=0;s<this.Icon.length;++s){var o=this.Icon[s];if(he.IsNumber(o.Index)){var h=o.Index-e;if(h>=0&&h<t){var l=this.ChartFrame.GetXFromIndex(h),u=this.ChartFrame.GetYFromData(o.Value);o.Color?this.Canvas.fillStyle=o.Color:this.Canvas.fillStyle=this.Color;var c=this.Canvas.measureText(o.Text).width;this.Canvas.textAlign="center";var d=new $(l-n/2,u-n/2,n,n);if(l+c/2>=r?(this.Canvas.textAlign="right",l+=this.DataWidth/2,d.X=l-n):l-c/2<i&&(this.Canvas.textAlign="left",l-=this.DataWidth/2,d.X=l),1==o.Baseline?(this.Canvas.textBaseline="top",d.Y=u):2==o.Baseline?(this.Canvas.textBaseline="bottom",d.Y=u-n):(this.Canvas.textBaseline="middle",d.Y=u-n/2),this.IsHScreen?(this.Canvas.save(),this.Canvas.translate(u,l),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(o.Symbol,0,0),this.Canvas.restore()):(this.Canvas.fillText(o.Symbol,l,u),o.Text&&this.IconRect.push({Index:s,Rect:d,Item:o})),o.Line){var f=this.Data.Data[o.Index],m="H"==o.Line.KData?f.High:f.Low,C=this.ChartFrame.GetYFromData(m),p=u;Array.isArray(o.Line.Offset)&&2==o.Line.Offset.length&&(p>C?(p-=o.Line.Offset[1],C+=o.Line.Offset[0]):p<C&&(p+=o.Line.Offset[1],C-=o.Line.Offset[0])),this.Canvas.save(),o.Line.Dash&&this.Canvas.setLineDash(o.Line.Dash),o.Line.Width>0&&(this.Canvas.lineWidth=o.Line.Width),this.Canvas.strokeStyle=o.Line.Color,this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(p,D(l)),this.Canvas.lineTo(C,D(l))):(this.Canvas.moveTo(D(l),p),this.Canvas.lineTo(D(l),C)),this.Canvas.stroke(),this.Canvas.restore()}}}}}},this.GetTooltipData=function(t,e,a){if(!he.IsNonEmptyArray(this.IconRect))return!1;for(var i=0;i<this.IconRect.length;++i){var r=this.IconRect[i];if(r.Rect){var n=r.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(n.X,n.Y,n.Width,n.Height),this.Canvas.isPointInPath(t,e))return Fr.Chart.Log("[ChartMultiSVGIcon::GetTooltipData] icon ",r),a.Data=r,a.ChartPaint=this,a.Type=4,!0}}return!1},this.GetMaxMin=function(){var t={Min:null,Max:null},e=this.ChartFrame.XPointCount,a=this.Data.DataOffset,i=a+e;for(var r in this.Icon){var n=this.Icon[r];n.Index>=a&&n.Index<i&&(null==t.Max?t.Max=n.Value:t.Max<n.Value&&(t.Max=n.Value),null==t.Min?t.Min=n.Value:t.Min>n.Value&&(t.Min=n.Value))}return t}}function Vt(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMultiHtmlDom",this.Texts=[],this.IsHScreen=!1,this.DrawCallback,this.DrawItem=[],this.EnableDraw=!0,this.HQChart,this.Draw=function(){this.EnableDraw&&(this.DrawItem=[],this.DrawCallback&&this.DrawCallback(1,{Self:this}),this.DrawDom(),this.DrawCallback&&this.DrawCallback(2,{Self:this,DrawItem:this.DrawItem}))},this.DrawDom=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Data&&!(this.Data.length<=0)){this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset,a=this.ChartBorder.GetTopEx(),i=this.ChartBorder.GetBottomEx(),r=c();if(this.HQChart)var n=this.HQChart.UIElement.getBoundingClientRect().left,s=this.HQChart.UIElement.getBoundingClientRect().top;else var n=null,s=null;for(var o in this.Texts){var h=this.Texts[o];if(h.Text&&he.IsNumber(h.Index)){var l=this.IsMinuteFrame(),u=h.Index-e,d=this.Data.Data[h.Index],f={KData:d,Item:h,IsShow:!1,Self:this};if(u>=0&&u<t){var m=this.ChartFrame.GetXFromIndex(u);if("Top"==h.Value)var C=a;else if("Bottom"==h.Value)var C=i;else var C=this.ChartFrame.GetYFromData(h.Value);f.X=m/r,f.Y=C/r,f.UIElement={Left:n,Top:s},f.IsShow=!0}if(this.DrawItem.push(f),this.DrawCallback&&this.DrawCallback(3,f),h.Line){if(l)var p=this.Data.Data[h.Index];else var d=this.Data.Data[h.Index],p="H"==h.Line.KData?d.High:d.Low;var g=this.ChartFrame.GetYFromData(p),S=C;Array.isArray(h.Line.Offset)&&2==h.Line.Offset.length&&(S>g?(S-=h.Line.Offset[1],g+=h.Line.Offset[0]):S<g&&(S+=h.Line.Offset[1],g-=h.Line.Offset[0])),this.Canvas.save(),h.Line.Dash&&this.Canvas.setLineDash(h.Line.Dash);var T=c(),y=1*T;h.Line.Width>0&&(y=h.Line.Width*T),this.Canvas.lineWidth=y,this.Canvas.strokeStyle=h.Line.Color,this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(S,D(m)),this.Canvas.lineTo(g,D(m))):(this.Canvas.moveTo(v(y,m),S),this.Canvas.lineTo(v(y,m),g)),this.Canvas.stroke(),this.Canvas.restore()}}}}},this.GetMaxMin=function(){var t={Min:null,Max:null},e=this.ChartFrame.XPointCount,a=this.Data.DataOffset,i=a+e;for(var r in this.Texts){var n=this.Texts[r];he.IsNumber(n.Index)&&(n.Index>=a&&n.Index<i&&(null==t.Max?t.Max=n.Value:t.Max<n.Value&&(t.Max=n.Value),null==t.Min?t.Min=n.Value:t.Min>n.Value&&(t.Min=n.Value)))}return t}}function Gt(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.ClassName="ChartOX",this.Font,this.Family=$r.ChartOX.Family,this.Color=[$r.ChartOX.Up.Color,$r.ChartOX.Down.Color],this.Text=[$r.ChartOX.Up.Text,$r.ChartOX.Down.Text],this.IsHScreen=!1,this.SquareSize=10,this.OXData=null,this.SquareLineColor=$r.ChartOX.SquareLineColor,this.TooltipData=[],this.CalcualteSquare=function(){if(this.IsHScreen)var t=this.ChartBorder.GetHScreenBorder(),e=t.LeftEx,a=t.RightEx;else var t=this.ChartBorder.GetBorder(),e=t.TopEx,a=t.BottomEx;this.SquareSize=(a-e)/(this.OXData.Max-this.OXData.Min)*this.OXData.BlockSize;var i=parseInt(this.SquareSize);this.Font=i+"px "+this.Family},this.DrawSquares=function(){if(this.Canvas.beginPath(),this.Canvas.strokeStyle=this.SquareLineColor,this.IsHScreen)var t=this.ChartBorder.GetHScreenBorder(),e=t.Top,a=t.Bottom;else var t=this.ChartBorder.GetBorder(),e=t.Left,a=t.Right,i=t.TopEx,r=t.BottomEx;for(var n=this.OXData.StartPrice;n<this.OXData.Max;n+=this.OXData.BlockSize){var s=this.ChartFrame.GetYFromData(n);this.IsHScreen?(this.Canvas.moveTo(D(s),t.Top),this.Canvas.lineTo(D(s),t.Bottom)):(this.Canvas.moveTo(e,D(s)),this.Canvas.lineTo(a,D(s)))}for(var n=this.OXData.StartPrice;n>this.OXData.Min;n-=this.OXData.BlockSize){var s=this.ChartFrame.GetYFromData(n);this.IsHScreen?(this.Canvas.moveTo(D(s),t.Top),this.Canvas.lineTo(D(s),t.Bottom)):(this.Canvas.moveTo(e,D(s)),this.Canvas.lineTo(a,D(s)))}for(var o=e+$r.FrameLeftMargin,h=o;h<a;h+=this.SquareSize)this.IsHScreen?(this.Canvas.moveTo(t.LeftEx,D(h)),this.Canvas.lineTo(t.RightEx,D(h))):(this.Canvas.moveTo(D(h),i),this.Canvas.lineTo(D(h),r));this.Canvas.stroke()},this.Draw=function(){if(this.TooltipData=[],!this.ChartFrame.IsMinSize){if(this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.NotSupportMessage)return void this.DrawNotSupportmessage();if(this.OXData&&this.OXData.Data)if(this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.CalcualteSquare(),this.DrawSquares(),this.IsHScreen){var t=this.ChartBorder.GetTop(),e=this.ChartBorder.GetBottom(),a=t+$r.FrameLeftMargin;this.Canvas.textBaseline="middle",this.Canvas.textAlign="center",this.Canvas.font=this.Font;for(var i=0;i<this.OXData.Data.length&&!(a>e);++i,a+=this.SquareSize){var r=this.OXData.Data[i];this.Canvas.fillStyle=this.Color[r.Type];var n=this.Text[r.Type];if(he.IsNonEmptyArray(r.Data))for(var s=0;s<r.Data.length;++s){var o=r.Data[s],h=this.ChartFrame.GetYFromData(o+this.OXData.BlockSize/2);this.Canvas.fillText(n,h,a+this.SquareSize/2)}}}else{var t=this.ChartBorder.GetLeft(),e=this.ChartBorder.GetRight(),a=t+$r.FrameLeftMargin;this.Canvas.textBaseline="middle",this.Canvas.textAlign="center",this.Canvas.font=this.Font;for(var i=0;i<this.OXData.Data.length&&!(a>e);++i,a+=this.SquareSize){var r=this.OXData.Data[i];this.Canvas.fillStyle=this.Color[r.Type];var n=this.Text[r.Type],l={X:a,Width:this.SquareSize},u=null,c=null;if(he.IsNonEmptyArray(r.Data)){for(var s=0;s<r.Data.length;++s){var o=r.Data[s],h=this.ChartFrame.GetYFromData(o+this.OXData.BlockSize/2);this.Canvas.fillText(n,a+this.SquareSize/2,h),null==u?u=o:u<o&&(u=o),null==c?c=o:c>o&&(c=o)}l.Y=this.ChartFrame.GetYFromData(u+this.OXData.BlockSize),l.Height=this.ChartFrame.GetYFromData(c)-l.Y;var d={Data:r,Rect:l};this.TooltipData.push(d)}}}}},this.GetTooltipData=function(t,e,a){for(var i in this.TooltipData){var r=this.TooltipData[i];if(r.Rect){var n=r.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(n.X,n.Y,n.Width,n.Height),this.Canvas.isPointInPath(t,e))return Fr.Chart.Log("[ChartOX::GetTooltipData] item ",r),a.Data=r,a.ChartPaint=this,a.Type=5,!0}}return!1},this.GetMaxMin=function(){var t={Min:null,Max:null};return this.OXData&&(he.IsNumber(this.OXData.Max)&&(t.Max=this.OXData.Max),he.IsNumber(this.OXData.Min)&&(t.Min=this.OXData.Min)),t}}function Wt(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.ClassName="ChartLock",this.WidthDiv=.2,this.LockCount=20,this.BGColor=$r.LockBGColor,this.TextColor=$r.LockTextColor,this.Font=$r.DefaultTextFont,this.Title="🔒开通权限",this.LockRect=null,this.LockID,this.Callback,this.IndexName,this.MinWidth=null,this.Draw=function(t){if(this.LockRect=null,this.NotSupportMessage)return void this.DrawNotSupportmessage();if(!0===this.ChartFrame.IsHScreen)return void this.HScreenDraw(t);var e=this.ChartBorder.GetRight(),a=0;if(null!=this.ChartFrame.Data){var i=this.ChartFrame.DataWidth,r=this.ChartFrame.DistanceWidth;e=this.ChartBorder.GetLeft()+r/2+2;for(var n=this.ChartBorder.GetRight(),s=this.ChartFrame.XPointCount,o=this.ChartFrame.Data.DataOffset,h=0;o<this.ChartFrame.Data.Data.length&&h<s;++o,++h,e+=i+r){var l=this.ChartFrame.Data.Data[o];if(null!=l.Open&&null!=l.High&&null!=l.Low&&null!=l.Close){if(e+i>n)break}}a=(i+r)*this.LockCount}0==a&&(a=(e-this.ChartBorder.GetLeft())*this.WidthDiv);var u=e-a;u<this.ChartBorder.GetLeft()&&(u=this.ChartBorder.GetLeft());var c=this.ChartBorder.GetBottom()-this.ChartBorder.GetTop(),d=this.ChartBorder.GetRight()-u;if(this.MinWidth>10&&d<this.MinWidth&&(d=this.MinWidth,(u=this.ChartBorder.GetRight()-d)<this.ChartBorder.GetLeft()&&(u=this.ChartBorder.GetLeft())),t){this.Canvas.fillStyle=this.BGColor,this.Canvas.fillRect(u,this.ChartBorder.GetTop(),d,c);var f=u+d/2,m=this.ChartBorder.GetTop()+c/2;this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.font=this.Font,this.Canvas.fillText(this.Title,f,m)}this.LockRect={Left:u,Top:this.ChartBorder.GetTop(),Width:d,Heigh:c}},this.HScreenDraw=function(t){var e=this.ChartBorder.GetBottom(),a=0;if(null!=this.ChartFrame.Data){var i=this.ChartFrame.DataWidth,r=this.ChartFrame.DistanceWidth;e=this.ChartBorder.GetTop()+r/2+2;for(var n=this.ChartBorder.GetBottom(),s=this.ChartFrame.XPointCount,o=this.ChartFrame.Data.DataOffset,h=0;o<this.ChartFrame.Data.Data.length&&h<s;++o,++h,e+=i+r){var l=this.ChartFrame.Data.Data[o];if(null!=l.Open&&null!=l.High&&null!=l.Low&&null!=l.Close){if(e+i>n)break}}a=(i+r)*this.LockCount}0==a&&(a=(e-this.ChartBorder.GetTop())*this.WidthDiv);var u=e-a;u<this.ChartBorder.GetTop()&&(u=this.ChartBorder.GetTop());var c=this.ChartBorder.GetRight()-this.ChartBorder.GetLeft(),d=this.ChartBorder.GetBottom()-u;this.Canvas.fillStyle=this.BGColor,this.Canvas.fillRect(this.ChartBorder.GetLeft(),u,c,d);var f=this.ChartBorder.GetLeft()+c/2,m=u+d/2;this.Canvas.save(),this.Canvas.translate(f,m),this.Canvas.rotate(90*Math.PI/180),this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.font=this.Font,this.Canvas.fillText(this.Title,0,0),this.Canvas.restore(),this.LockRect={Left:this.ChartBorder.GetLeft(),Top:u,Width:c,Heigh:d}},this.GetTooltipData=function(t,e,a){return null!=this.LockRect&&(this.Canvas.beginPath(),this.Canvas.rect(this.LockRect.Left,this.LockRect.Top,this.LockRect.Width,this.LockRect.Heigh),!!this.Canvas.isPointInPath(t,e)&&(a.Data={ID:this.LockID,Callback:this.Callback,IndexName:this.IndexName},a.ChartPaint=this,!0))}}function Xt(){this.newMethod=St,this.newMethod(),delete this.newMethod,this.ClassName="ChartBuySell",this.TextFont=$r.KLineTrain.Font,this.LastDataIcon=$r.KLineTrain.LastDataIcon,this.BuyIcon=$r.KLineTrain.BuyIcon,this.SellIcon=$r.KLineTrain.SellIcon,this.BuySellData=new _r.default,this.IconFont=$r.KLineTrain.IconFont,this.LastDataDrawType=0,this.LastDataIndex=-1,this.AddTradeItem=function(t){if(this.BuySellData.has(t.Key)){this.BuySellData.get(t.Key).Data.push(t)}else this.BuySellData.set(t.Key,{Data:[t]})},this.ClearTradeData=function(){this.BuySellData=new _r.default},this.Draw=function(){if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetRight();!0===t&&(i=this.ChartBorder.GetBottom());var r=this.ChartFrame.XPointCount;if(this.IconFont){var n=c(),s=e+a,o=18*n;s<o&&(s=o),this.Canvas.font=s+"px "+this.IconFont.Family}else this.Canvas.font=this.TextFont;for(var h=this.Data.DataOffset,l=0;h<this.Data.Data.length&&l<r;++h,++l){var u=this.Data.Data[h];if(null!=u){var d=this.ChartFrame.GetXFromIndex(l);if(d>i)break;var f=!1;if(1==this.LastDataDrawType?h==this.LastDataIndex&&(f=!0):h==this.Data.Data.length-1&&(f=!0),f){var d=this.ChartFrame.GetXFromIndex(l),m=this.ChartFrame.GetYFromData(u.High);this.Canvas.textAlign="center",this.Canvas.textBaseline="bottom",this.IconFont?(this.Canvas.fillStyle=this.IconFont.Last.Color,this.DrawText(this.IconFont.Last.Text,d,m,t)):(this.Canvas.fillStyle=this.LastDataIcon.Color,this.Canvas.font=this.TextFont,this.DrawText(this.LastDataIcon.Text,d,m,t))}var C=h;if(this.BuySellData.has(C)){var p=this.BuySellData.get(C),m=this.ChartFrame.GetYFromData(u.High),D=this.ChartFrame.GetYFromData(u.Low),v=[!1,!1];for(var g in p.Data){if(1==v[0]&&1==v[1])break;var S=p.Data[g];0==S.Op&&0==v[0]?(this.Canvas.textAlign="center",this.Canvas.textBaseline="top",this.IconFont?(this.Canvas.fillStyle=this.IconFont.Buy.Color,this.DrawText(this.IconFont.Buy.Text,d,D,t)):(this.Canvas.fillStyle=this.BuyIcon.Color,this.DrawText(this.BuyIcon.Text,d,D,t)),v[0]=!0):1==S.Op&&0==v[1]&&(this.Canvas.textAlign="center",this.Canvas.textBaseline="bottom",this.IconFont?(this.Canvas.fillStyle=this.IconFont.Sell.Color,this.DrawText(this.IconFont.Sell.Text,d,m,t)):(this.Canvas.fillStyle=this.SellIcon.Color,this.DrawText(this.SellIcon.Text,d,m,t)),v[1]=!0)}}}}}}}function Ut(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.ClassName="ChartOrderbookDepth",this.Data=null,this.AskColor={Line:$r.DepthChart.AskColor.Line,Area:$r.DepthChart.AskColor.Area},this.BidColor={Line:$r.DepthChart.BidColor.Line,Area:$r.DepthChart.BidColor.Area},this.LineWidth=$r.DepthChart.LineWidth,this.Draw=function(){if(this.Data){var t=this.Canvas.lineWidth;this.Canvas.lineWidth=this.LineWidth*c(),this.DrawArea(this.Data.Bids,this.BidColor.Line,this.BidColor.Area,!0),this.DrawArea(this.Data.Asks,this.AskColor.Line,this.AskColor.Area,!1),this.Canvas.lineWidth=t}},this.DrawArea=function(t,e,a,i){var r=this.ChartFrame.VerticalRange,n=[];for(var s in t){var o=t[s];if(i){if(o.Price<r.Min)break}else if(o.Price>r.Max)break;var h=this.ChartFrame.GetXFromIndex(o.Price),l=this.ChartFrame.GetYFromData(o.Vol);n.push({X:h,Y:l})}if(!(n.length<=1)){var u=this.ChartBorder.GetLeft(),c=this.ChartBorder.GetBottom(),d=this.ChartBorder.GetRight();this.Canvas.beginPath(),this.Canvas.moveTo(n[0].X,c);for(var s in n){var o=n[s];this.Canvas.lineTo(o.X,o.Y)}this.Canvas.lineTo(i?u:d,n[n.length-1].Y),this.Canvas.lineTo(i?u:d,c),this.Canvas.lineTo(n[0].X,c),this.Canvas.closePath(),this.Canvas.fillStyle=a,this.Canvas.fill(),this.Canvas.beginPath(),this.Canvas.moveTo(n[0].X,c);for(var s in n){var o=n[s];this.Canvas.lineTo(o.X,o.Y)}this.Canvas.lineTo(i?u:d,n[n.length-1].Y),this.Canvas.strokeStyle=e,this.Canvas.stroke()}},this.GetMaxMin=function(){var t={Min:null,Max:null,XMin:null,XMax:null},e=this.ChartFrame.VerticalRange;for(var a in this.Data.Asks){var i=this.Data.Asks[a];if(i.Price>e.Max)break;(null==t.XMin||t.XMin>i.Price)&&(t.XMin=i.Price),(null==t.XMax||t.XMax<i.Price)&&(t.XMax=i.Price),(null==t.Min||t.Min>i.Vol)&&(t.Min=i.Vol),(null==t.Max||t.Max<i.Vol)&&(t.Max=i.Vol)}for(var a in this.Data.Bids){var i=this.Data.Bids[a];if(i.Price<e.Min)break;(null==t.XMin||t.XMin>i.Price)&&(t.XMin=i.Price),(null==t.XMax||t.XMax<i.Price)&&(t.XMax=i.Price),(null==t.Min||t.Min>i.Vol)&&(t.Min=i.Vol),(null==t.Max||t.Max<i.Vol)&&(t.Max=i.Vol)}return t}}function Kt(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.Radius=100,this.Distance=30,this.txtLine=20,this.paddingX=20/3,this.Draw=function(){if(!(this.Data&&this.Data.Data&&this.Data.Data.length>0))return this.DrawEmptyData();var t=(this.ChartBorder.GetLeft(),this.ChartBorder.GetRight(),this.ChartBorder.GetTop(),this.ChartBorder.GetBottom(),this.ChartBorder.GetWidth()),e=this.ChartBorder.GetHeight();if(isNaN(this.Radius)){var a=this.Radius.replace("%","");a/=100,t>=e&&(this.Radius=a*e),t<e&&(this.Radius=a*t)}this.Canvas.save(),this.Canvas.translate(t/2,e/2);var i=0;for(var r in this.Data.Data)i+=this.Data.Data[r].Value;var n=0,s=0;for(var o in this.Data.Data){var h=this.Data.Data[o],l=(h.Value/i).toFixed(2);this.Canvas.beginPath(),this.Canvas.moveTo(0,0),s+=2*l*Math.PI,this.Canvas.strokeStyle="white",this.Canvas.fillStyle=h.Color,this.Canvas.arc(0,0,this.Radius,n,s),this.Canvas.fill(),this.Canvas.closePath(),this.Canvas.stroke(),this.Canvas.beginPath(),this.Canvas.strokeStyle=h.Color,this.Canvas.moveTo(0,0);var u=(this.Radius+this.Distance)*Math.cos(s-(s-n)/2),c=(this.Radius+this.Distance)*Math.sin(s-(s-n)/2);this.Canvas.lineTo(u,c);var d=this.txtLine,f=this.paddingX;if(this.Canvas.textAlign="left",s-(s-n)/2<1.5*Math.PI&&s-(s-n)/2>.5*Math.PI&&(d=-this.txtLine,f=-this.paddingX,this.Canvas.textAlign="right"),this.Canvas.lineTo(u+d,c),this.Canvas.stroke(),h.Text)this.Canvas.fillText(h.Text,u+d+f,c);else{var m=h.Name+":"+h.Value;this.Canvas.fillText(m,u+d+f,c)}n+=2*l*Math.PI}this.Canvas.restore()},this.DrawEmptyData=function(){Fr.Chart.Log("[ChartPie::DrawEmptyData]")}}function jt(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.BorderPoint=[],this.DataPoint=[],this.CenterPoint={},this.StartAngle=0,this.Color="rgb(198,198,198)",this.AreaColor="rgba(242,154,118,0.4)",this.AreaLineColor="rgb(242,154,118)",this.TitleFont=24*c()+"px 微软雅黑",this.TitleColor="rgb(102,102,102)",this.BGColor=["rgb(255,255,255)","rgb(224,224,224)"],this.DrawBorder=function(){if(!(this.BorderPoint.length<=0)){this.Canvas.font=this.TitleFont,this.Canvas.strokeStyle=this.Color;var t=[1,.8,.6,.4,.2];for(var e in t){var a=t[e],i=!0;for(var r in this.BorderPoint){var n=this.BorderPoint[r];n.X=this.CenterPoint.X+n.Radius*Math.cos(n.Angle*Math.PI/180)*a,n.Y=this.CenterPoint.Y+n.Radius*Math.sin(n.Angle*Math.PI/180)*a,i?(this.Canvas.beginPath(),this.Canvas.moveTo(n.X,n.Y),i=!1):this.Canvas.lineTo(n.X,n.Y)}this.Canvas.closePath(),this.Canvas.stroke(),this.Canvas.fillStyle=this.BGColor[e%2==0?0:1],this.Canvas.fill()}this.Canvas.beginPath();for(var s in this.BorderPoint){var n=this.BorderPoint[s];n.X=this.CenterPoint.X+n.Radius*Math.cos(n.Angle*Math.PI/180),n.Y=this.CenterPoint.Y+n.Radius*Math.sin(n.Angle*Math.PI/180),this.Canvas.moveTo(this.CenterPoint.X,this.CenterPoint.Y),this.Canvas.lineTo(n.X,n.Y),this.DrawText(n)}this.Canvas.stroke()}},this.DrawArea=function(){if(this.DataPoint&&!(this.DataPoint.length<=0)){this.Canvas.fillStyle=this.AreaColor,this.Canvas.strokeStyle=this.AreaLineColor,this.Canvas.beginPath();var t=!0;for(var e in this.DataPoint){var a=this.DataPoint[e];t?(this.Canvas.beginPath(),this.Canvas.moveTo(a.X,a.Y),t=!1):this.Canvas.lineTo(a.X,a.Y)}this.Canvas.closePath(),this.Canvas.fill(),this.Canvas.stroke()}},this.DrawText=function(t){if(t.Text){this.Canvas.fillStyle=this.TitleColor;var e=t.X,a=t.Y;t.Angle>0&&t.Angle<45?(this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",e+=2):t.Angle>=0&&t.Angle<90?(this.Canvas.textAlign="left",this.Canvas.textBaseline="top",e+=2):t.Angle>=90&&t.Angle<135?(this.Canvas.textAlign="right",this.Canvas.textBaseline="top",e-=2):t.Angle>=135&&t.Angle<180?(this.Canvas.textAlign="right",this.Canvas.textBaseline="top",e-=2):t.Angle>=180&&t.Angle<225?(this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",e-=2):t.Angle>=225&&t.Angle<=270?(this.Canvas.textAlign="center",this.Canvas.textBaseline="bottom"):t.Angle>270&&t.Angle<315?(this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom",e+=2):(this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",e+=2),this.Canvas.fillText(t.Text,e,a)}},this.Draw=function(){this.BorderPoint=[],this.DataPoint=[],this.CenterPoint={},this.Data&&this.Data.Data&&this.Data.Data.length>0?this.CalculatePoints(this.Data.Data):this.CalculatePoints(null),this.DrawBorder(),this.DrawArea()},this.CalculatePoints=function(t){for(var e=this.ChartBorder.GetLeft(),a=(this.ChartBorder.GetRight(),this.ChartBorder.GetTop()),i=(this.ChartBorder.GetBottom(),this.ChartBorder.GetWidth()),r=this.ChartBorder.GetHeight(),n={X:e+i/2,Y:a+r/2},s=Math.min(i/2,r/2)-2,o=Math.max(5,t?t.length:0),h=360/o,l=0;l<o;++l){var u={Index:l,Radius:s,Angle:l*h+this.StartAngle},c=u.Angle;if(t&&l<t.length){var d=t[l],f={Index:l,Text:d.Text};if(u.Text=d.Name,d.Value){var m=d.Value;m>=1&&(m=1);var C=s*m;f.X=n.X+C*Math.cos(c*Math.PI/180),f.Y=n.Y+C*Math.sin(c*Math.PI/180)}else f.X=n.X,f.Y=n.Y;this.DataPoint.push(f)}this.BorderPoint.push(u)}this.CenterPoint=n},this.DrawEmptyData=function(){Fr.Chart.Log("[ChartPie::DrawEmptyData]")}}function zt(){this.newMethod=tt,this.newMethod(),delete this.newMethod,this.ImageData=null,this.Left,this.Top,this.Width,this.Height,this.ImageWidth,this.ImageHeight,this.DefaultColor=[217,222,239],this.Color=[{Name:"海南",Color:"rgb(217,222,223)"},{Name:"内蒙古",Color:"rgb(217,222,225)"},{Name:"新疆",Color:"rgb(217,222,226)"},{Name:"青海",Color:"rgb(217,222,227)"},{Name:"西藏",Color:"rgb(217,222,228)"},{Name:"云南",Color:"rgb(217,222,229)"},{Name:"黑龙江",Color:"rgb(217,222,230)"},{Name:"吉林",Color:"rgb(217,222,231)"},{Name:"辽宁",Color:"rgb(217,222,232)"},{Name:"河北",Color:"rgb(217,222,233)"},{Name:"山东",Color:"rgb(217,222,234)"},{Name:"江苏",Color:"rgb(217,222,235)"},{Name:"浙江",Color:"rgb(217,222,236)"},{Name:"福建",Color:"rgb(217,222,237)"},{Name:"广东",Color:"rgb(217,222,238)"},{Name:"广西",Color:"rgb(217,222,239)"},{Name:"贵州",Color:"rgb(217,222,240)"},{Name:"湖南",Color:"rgb(217,222,241)"},{Name:"江西",Color:"rgb(217,222,242)"},{Name:"安徽",Color:"rgb(217,222,243)"},{Name:"湖北",Color:"rgb(217,222,244)"},{Name:"重庆",Color:"rgb(217,222,245)"},{Name:"四川",Color:"rgb(217,222,246)"},{Name:"甘肃",Color:"rgb(217,222,247)"},{Name:"陕西",Color:"rgb(217,222,248)"},{Name:"山西",Color:"rgb(217,222,249)"},{Name:"河南",Color:"rgb(217,222,250)"}],this.Draw=function(){var t=this.ChartBorder.GetLeft()+1,e=(this.ChartBorder.GetRight(),this.ChartBorder.GetTop()+1),a=(this.ChartBorder.GetBottom(),this.ChartBorder.GetWidth()-2),i=this.ChartBorder.GetHeight()-2,r=CHINA_MAP_IMAGE.width,n=CHINA_MAP_IMAGE.height,s=r,o=n;if(i<o||a<s)return void(this.ImageData=null);if(this.Left==t&&this.Top==e&&this.Width==a&&this.Height==i&&this.ImageWidth==r&&this.ImageHeight==n||(this.ImageData=null,this.ImageWidth=r,this.ImageHeight=n,this.Left=t,this.Top=e,this.Width=a,this.Height=i,Fr.Chart.Log(r,n)),null==this.ImageData){this.Canvas.drawImage(CHINA_MAP_IMAGE,0,0,r,n,t,e,s,o),this.ImageData=this.Canvas.getImageData(t,e,s,o);var h=new Ir.default,l=new _r.default,u=new _r.default;if(this.Data.length>0)for(var c in this.Data){var d=this.Data[c];u.set(d.Name,d.Color)}Fr.Chart.Log(this.Data);for(var f in this.Color){var m=this.Color[f];u.has(m.Name)?l.set(m.Color,u.get(m.Name)):h.add(m.Color)}for(var C,p=0;p<this.ImageData.data.length;p+=4)if(C="rgb("+this.ImageData.data[p]+","+this.ImageData.data[p+1]+","+this.ImageData.data[p+2]+")",h.has(C))this.ImageData.data[p]=this.DefaultColor[0],this.ImageData.data[p+1]=this.DefaultColor[1],this.ImageData.data[p+2]=this.DefaultColor[2];else if(l.has(C)){var D=l.get(C);this.ImageData.data[p]=D[0],this.ImageData.data[p+1]=D[1],this.ImageData.data[p+2]=D[2]}this.Canvas.clearRect(t,e,s,o),this.Canvas.putImageData(this.ImageData,t,e,0,0,s,o)}else this.Canvas.putImageData(this.ImageData,t,e,0,0,s,o)}}function Jt(){this.DataMap=new _r.default([["FrameSplitPaint",{Create:function(){return new ae}}],["RectSelectPaint",{Create:function(){return new ie}}]]),this.Create=function(t){return this.DataMap.has(t)?this.DataMap.get(t).Create():null},this.Add=function(t,e){this.DataMap.set(t,{Create:e.Create})}}function qt(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.Data,this.IsDynamic=!1,this.IsAnimation=!1,this.ClassName="IExtendChartPainting",this.SizeChange=!0,this.IsEraseBG=!1,this.DrawAfterTitle=!1,this.IsCallbackDraw=!1,this.Left=5,this.Right=5,this.Top=5,this.Bottom=5,this.Draw=function(){},this.SetOption=function(t){},this.GetFontHeight=function(t){return d(this.Canvas,t,"擎")}}function Zt(){this.newMethod=qt,this.newMethod(),delete this.newMethod,this.IsDynamic=!0,this.IsEraseBG=!0,this.DrawAfterTitle=!0,this.ClassName="KLineTooltipPaint",this.BorderColor=$r.TooltipPaint.BorderColor,this.BGColor=$r.TooltipPaint.BGColor,this.TitleColor=$r.TooltipPaint.TitleColor,this.DateTimeColor=$r.TooltipPaint.DateTimeColor,this.VolColor=$r.TooltipPaint.VolColor,this.AmountColor=$r.TooltipPaint.AmountColor,this.LatestPoint,this.ShowPosition=0,this.Left=1*c(),this.Top=5*c(),this.Width=50,this.Height=100,this.LineHeight=15*c(),this.Font=[$r.TooltipPaint.TitleFont],this.HQChart,this.KLineTitlePaint,this.IsHScreen=!1,this.LanguageID=tn.LANGUAGE_CHINESE_ID,this.ReloadResource=function(t){this.BorderColor=$r.TooltipPaint.BorderColor,this.BGColor=$r.TooltipPaint.BGColor,this.TitleColor=$r.TooltipPaint.TitleColor,this.DateTimeColor=$r.TooltipPaint.DateTimeColor,this.VolColor=$r.TooltipPaint.VolColor,this.AmountColor=$r.TooltipPaint.AmountColor},this.GetLeft=function(){return this.IsHScreen?this.ChartBorder.GetRightEx()-this.Height-this.Top:0==this.ShowPosition?this.ChartBorder.GetLeft()+this.Left:this.ChartBorder.GetRight()-this.Width-this.Left},this.GetTop=function(){return this.IsHScreen?0==this.ShowPosition?this.ChartBorder.GetTop()+this.Left:this.ChartBorder.GetBottom()-this.Width-this.Left:this.ChartBorder.GetTopEx()+this.Top},this.IsEnableDraw=function(){if(!this.HQChart||!this.HQChart.TitlePaint||!this.HQChart.TitlePaint[0])return!1;if(this.HQChart.DragMode==Pr.CLICK_TOUCH_MODE_ID){if(0==this.HQChart.TouchStatus.CorssCursorShow)return!1}else if(!this.HQChart.IsOnTouch)return!1;return!this.HQChart.CurrentChartDrawPicture},this.Draw=function(){if(this.IsEnableDraw()){this.KLineTitlePaint=this.HQChart.TitlePaint[0];var t=this.KLineTitlePaint.GetCurrentKLineData();if(t){var e,a=8;this.HQChart.Symbol&&(e=this.HQChart.Symbol.toUpperCase()),"MinuteTooltipPaint"===this.ClassName?(a=7,an.IsFutures(e)&&++a):(he.IsNumber(t.Time)&&++a,an.IsSHSZStockA(this.HQChart.Symbol)&&t.FlowCapital>0&&++a,an.IsFutures(e)&&he.IsNumber(t.Position)&&++a),this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.Canvas.font=this.Font[0];var i=Oi(this.HQChart.Symbol),r=" 擎: 9999.99亿 ";i>=5&&(r=" 擎: "+99.99.toFixed(i)+" "),this.Width=this.Canvas.measureText(r).width;var n=this.GetFontHeight();if(n>this.LineHeight&&(this.LineHeight=n),this.Height=this.LineHeight*a+2*c()*2,t&&t.High>0){r=" 擎: "+t.High.toFixed(i)+" ";var s=this.Canvas.measureText(r).width;s>this.Width&&(this.Width=s)}this.CalculateShowPosition(),this.DrawBG(),this.DrawTooltipData(t),this.DrawBorder()}}},this.CalculateShowPosition=function(){if(this.ShowPosition=0,this.LatestPoint)if(this.IsHScreen){var t=this.ChartBorder.GetTop(),e=this.ChartBorder.GetHeight(),a=t+e/2;this.LatestPoint.Y<a&&(this.ShowPosition=1)}else{var i=this.ChartBorder.GetLeft(),r=this.ChartBorder.GetWidth(),n=i+r/2;this.LatestPoint.X<n&&(this.ShowPosition=1)}},this.DrawTooltipData=function(t){var e;this.HQChart.Symbol&&(e=this.HQChart.Symbol.toUpperCase());var a=Oi(this.HQChart.Symbol),i=this.GetLeft()+2*c(),r=this.GetTop()+3*c();if(this.IsHScreen){this.Canvas.save();var n=this.GetLeft()+this.Height,s=this.GetTop();this.Canvas.translate(n,s),this.Canvas.rotate(90*Math.PI/180),i=2*c(),r=3*c()}this.Canvas.textBaseline="top",this.Canvas.textAlign="left",this.Canvas.font=this.Font[0];var o=this.Canvas.measureText("擎: ").width,h=he.FormatDateString(t.Date);this.Canvas.fillStyle=this.DateTimeColor,this.Canvas.fillText(h,i,r);var l=this.HQChart.Period;Z.IsMinutePeriod(l,!0)&&he.IsNumber(t.Time)?(r+=this.LineHeight,h=he.FormatTimeString(t.Time),this.Canvas.fillText(h,i,r)):Z.IsSecondPeriod(l)&&he.IsNumber(t.Time)&&(r+=this.LineHeight,h=he.FormatTimeString(t.Time,"HH:MM:SS"),this.Canvas.fillText(h,i,r)),r+=this.LineHeight,this.Canvas.fillStyle=this.TitleColor,h=en.GetText("Tooltip-Open",this.LanguageID),this.Canvas.fillText(h,i,r);var u=this.KLineTitlePaint.GetColor(t.Open,t.YClose);h=t.Open.toFixed(a),this.Canvas.fillStyle=u,this.Canvas.fillText(h,i+o,r),r+=this.LineHeight,this.Canvas.fillStyle=this.TitleColor,h=en.GetText("Tooltip-High",this.LanguageID),this.Canvas.fillText(h,i,r);var u=this.KLineTitlePaint.GetColor(t.High,t.YClose),h=t.High.toFixed(a);this.Canvas.fillStyle=u,this.Canvas.fillText(h,i+o,r),r+=this.LineHeight,this.Canvas.fillStyle=this.TitleColor,h=en.GetText("Tooltip-Low",this.LanguageID),this.Canvas.fillText(h,i,r);var u=this.KLineTitlePaint.GetColor(t.Low,t.YClose),h=t.Low.toFixed(a);this.Canvas.fillStyle=u,this.Canvas.fillText(h,i+o,r),r+=this.LineHeight,this.Canvas.fillStyle=this.TitleColor,h=en.GetText("Tooltip-Close",this.LanguageID),this.Canvas.fillText(h,i,r);var u=this.KLineTitlePaint.GetColor(t.Close,t.YClose),h=t.Close.toFixed(a);if(this.Canvas.fillStyle=u,this.Canvas.fillText(h,i+o,r),r+=this.LineHeight,this.Canvas.fillStyle=this.TitleColor,h=en.GetText("Tooltip-Increase",this.LanguageID),this.Canvas.fillText(h,i,r),t.YFClose>0&&an.IsChinaFutures(e))var d=(t.Close-t.YFClose)/t.YFClose*100,u=this.KLineTitlePaint.GetColor(d,0),h=d.toFixed(2)+"%";else if(t.YClose>0)var d=(t.Close-t.YClose)/t.YClose*100,u=this.KLineTitlePaint.GetColor(d,0),h=d.toFixed(2)+"%";else var h="--.--",u=this.KLineTitlePaint.GetColor(0,0);this.Canvas.fillStyle=u,this.Canvas.fillText(h,i+o,r),r+=this.LineHeight,h=en.GetText("Tooltip-Vol",this.LanguageID),this.Canvas.fillStyle=this.TitleColor,this.Canvas.fillText(h,i,r);var f=t.Vol;e&&an.IsSHSZ(e)&&(f/=100);var h=he.FromatIntegerString(f,2,this.LanguageID);if(this.Canvas.fillStyle=this.VolColor,this.Canvas.fillText(h,i+o,r),he.IsNumber(t.Amount)){r+=this.LineHeight,h=en.GetText("Tooltip-Amount",this.LanguageID),this.Canvas.fillStyle=this.TitleColor,this.Canvas.fillText(h,i,r);var h=he.FormatValueString(t.Amount,2,this.LanguageID);this.Canvas.fillStyle=this.AmountColor,this.Canvas.fillText(h,i+o,r)}if(an.IsSHSZStockA(this.HQChart.Symbol)&&t.FlowCapital>0){r+=this.LineHeight,h=en.GetText("Tooltip-Exchange",this.LanguageID),this.Canvas.fillStyle=this.TitleColor,this.Canvas.fillText(h,i,r);var d=t.Vol/t.FlowCapital*100,h=d.toFixed(2)+"%";this.Canvas.fillText(h,i+o,r)}var e=this.HQChart.Symbol.toUpperCase();if(an.IsFutures(e)&&he.IsNumber(t.Position)){this.Canvas.fillStyle=this.TitleColor,r+=this.LineHeight,h=en.GetText("Tooltip-Position",this.LanguageID),this.Canvas.fillText(h,i,r);var h=he.FromatIntegerString(t.Position,2,this.LanguageID);this.Canvas.fillText(h,i+o,r)}this.IsHScreen&&this.Canvas.restore()},this.DrawBorder=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.GetLeft(),a=this.GetTop();this.Canvas.strokeStyle=this.BorderColor,t?this.Canvas.strokeRect(D(e),D(a),this.Height,this.Width):this.Canvas.strokeRect(D(e),D(a),g(this.Width),g(this.Height))},this.DrawBG=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.GetLeft(),a=this.GetTop();this.Canvas.fillStyle=this.BGColor,t?this.Canvas.fillRect(e,a,this.Height,this.Width):this.Canvas.fillRect(e,a,this.Width,this.Height)},this.SetOption=function(t){t.LineHeight>0&&(this.LineHeight=t.LineHeight*c()),t.BGColor&&(this.BGColor=t.BGColor),t.LanguageID>0&&(this.LanguageID=t.LanguageID)}}function Qt(){this.newMethod=Zt,this.newMethod(),delete this.newMethod,this.ClassName="MinuteTooltipPaint",this.Left=1*c(),this.Top=1*c(),this.YClose,this.IsShowAveragePrice=!0,this.GetTop=function(){if(this.IsHScreen){var t=this.ChartBorder.GetHScreenBorder();return 0==this.ShowPosition?t.TopEx+this.Left:t.BottomEx-this.Width-this.Left}var t=this.ChartBorder.GetBorder();return t.Top+this.Top},this.GetLeft=function(){if(this.IsHScreen){var t=this.ChartBorder.GetHScreenBorder();return t.Right-this.Height-this.Top}var t=this.ChartBorder.GetBorder();return 0==this.ShowPosition?t.LeftEx+this.Left:t.RightEx-this.Width-this.Left},this.DrawTooltipData=function(t){if(this.HQChart.Symbol){var e=Oi(this.HQChart.Symbol),a=this.GetLeft()+2*c(),i=this.GetTop()+3*c();this.YClose=this.KLineTitlePaint.YClose;var r=this.HQChart.Symbol.toUpperCase();if(this.IsHScreen){this.Canvas.save();var n=this.GetLeft()+this.Height,s=this.GetTop();this.Canvas.translate(n,s),this.Canvas.rotate(90*Math.PI/180),a=2*c(),i=3*c()}this.Canvas.textBaseline="top",this.Canvas.textAlign="left",this.Canvas.font=this.Font[0];var o=this.Canvas.measureText("擎: ").width,h=t.DateTime.split(" ");if(h&&2==h.length){var l=he.FormatDateString(h[0]);this.Canvas.fillStyle=this.TitleColor,this.Canvas.fillText(l,a,i),i+=this.LineHeight,l=he.FormatTimeString(h[1]),this.Canvas.fillText(l,a,i)}var u=t.Close,d=(t.Increase,t.Vol),f=t.Amount;t.Before&&(u=t.Before.Close,t.Before.Increase,d=t.Before.Vol,f=t.Before.Amount),i+=this.LineHeight,this.Canvas.fillStyle=this.TitleColor,l=en.GetText("Tooltip-Price",this.LanguageID),this.Canvas.fillText(l,a,i);var m=this.KLineTitlePaint.GetColor(u,this.YClose),l=u.toFixed(e);this.Canvas.fillStyle=m,this.Canvas.fillText(l,a+o,i);var C=!0;if(t.Before?C=!1:an.IsForeignExchange(r)?C=!1:an.IsET(r)&&!an.IsETShowAvPrice(r)?C=!1:an.IsShowAvPrice&&!an.IsShowAvPrice(r)&&(C=!1),C&&he.IsNumber(t.AvPrice)&&this.IsShowAveragePrice){i+=this.LineHeight,this.Canvas.fillStyle=this.TitleColor,l=en.GetText("Tooltip-AvPrice",this.LanguageID),this.Canvas.fillText(l,a,i);var m=this.KLineTitlePaint.GetColor(t.AvPrice,this.YClose),l=t.AvPrice.toFixed(e);this.Canvas.fillStyle=m,this.Canvas.fillText(l,a+o,i)}i+=this.LineHeight,this.Canvas.fillStyle=this.TitleColor,l=en.GetText("Tooltip-Increase",this.LanguageID),this.Canvas.fillText(l,a,i);var p=(u-this.YClose)/this.YClose*100,m=this.KLineTitlePaint.GetColor(p,0),l=p.toFixed(2)+"%";if(this.Canvas.fillStyle=m,this.Canvas.fillText(l,a+o,i),he.IsNumber(d)){this.Canvas.fillStyle=this.TitleColor,i+=this.LineHeight,l=en.GetText("Tooltip-Vol",this.LanguageID),this.Canvas.fillText(l,a,i);var l=he.FromatIntegerString(d,2,this.LanguageID);this.Canvas.fillText(l,a+o,i)}if(he.IsNumber(f)){i+=this.LineHeight,l=en.GetText("Tooltip-Amount",this.LanguageID),this.Canvas.fillText(l,a,i);var l=he.FormatValueString(f,2,this.LanguageID);this.Canvas.fillText(l,a+o,i)}if(he.IsNumber(t.Position)){i+=this.LineHeight,l=en.GetText("Tooltip-Position",this.LanguageID),this.Canvas.fillText(l,a,i);var l=he.FormatValueString(t.Position,2,this.LanguageID);this.Canvas.fillText(l,a+o,i)}this.IsHScreen&&this.Canvas.restore()}}}function $t(){this.newMethod=qt,this.newMethod(),delete this.newMethod,this.Left=80,this.Right=1,this.Top=1,this.Bottom=1,this.BorderColor=$r.FrameBorderPen,this.Symbol,this.Name,this.TitleFont=["14px 微软雅黑"],this.Draw=function(){var t=this.ChartBorder.GetRight()+this.Left,e=this.ChartBorder.GetChartWidth()-this.Right,a=this.Top+18,i=t+(e-t)/2;this.Symbol&&this.Name&&(this.Canvas.font=this.TitleFont[0],this.Canvas.textAlign="right",this.Canvas.textBaseline="bottom",this.Canvas.fillText(this.Symbol,i-2,a),this.Canvas.textAlign="left",this.Canvas.fillText(this.Name,i+2,a)),this.Canvas.strokeStyle=this.BorderColor,this.Canvas.moveTo(t,a),this.Canvas.lineTo(e,a),this.Canvas.stroke(),a+=30,this.DrawBorder()},this.DrawBorder=function(){var t=this.ChartBorder.GetRight()+this.Left,e=this.ChartBorder.GetChartWidth()-this.Right,a=this.Top,i=this.ChartBorder.GetChartHeight()-this.Bottom;this.Canvas.strokeStyle=this.BorderColor,this.Canvas.strokeRect(t,a,e-t,i-a)}}function te(){this.newMethod=qt,this.newMethod(),delete this.newMethod,this.Name="筹码分布",this.ClassName="StockChip",this.HQChart,this.PenBorder=$r.FrameBorderPen,this.ColorProfit="rgb(255,0,0)",this.ColorNoProfit="rgb(90,141,248)",this.ColorAveragePrice="rgb(0,139,0)",this.ColorBG="rgb(190,190,190)",this.PixelRatio=c(),this.ShowType=0,this.IsDynamic=!0,this.ClientRect={},this.Font=$r.TitleFont,this.InfoColor=$r.StockChip.InfoColor,this.DayInfoColor=$r.StockChip.DayInfoColor,this.LineHeight=16,this.Left=50*this.PixelRatio,this.IsShowX=!1,this.ShowXCount=3,this.Width=150*this.PixelRatio,this.CalculateType=0,this.PriceZoom=100,this.ButtonID=C(),this.NotSupportMessage="不支持筹码图",this.DAY_COLOR=[["rgb(255,0,0)","rgb(255,128,128)","rgb(255,0,128)","rgb(255,100,0)","rgb(192,128,0)","rgb(255,192,0)"],["rgb(120,80,225)","rgb(160,160,225)","rgb(80,80,255)","rgb(120,120,255)","rgb(32,64,192)","rgb(0,64,128)"]],this.SetOption=function(t){t&&(t.ShowType>0&&(this.ShowType=t.ShowType),t.IsShowX&&(this.IsShowX=t.IsShowX),t.ShowXCount>0&&(this.ShowXCount=t.ShowXCount),t.Width>100&&(this.Width=t.Width*c()),t.CalculateType>0&&(this.CalculateType=t.CalculateType),he.IsNumber(t.PriceZoom)&&(this.PriceZoom=t.PriceZoom))},this.ReloadResource=function(t){this.PenBorder=$r.FrameBorderPen,this.Font=$r.TitleFont,this.InfoColor=$r.StockChip.InfoColor,this.DayInfoColor=$r.StockChip.DayInfoColor},this.Draw=function(){this.PixelRatio=c();var t=D(this.ChartBorder.GetRight()+this.Left),e=D(this.ChartBorder.GetTop()),a=D(t+this.Width-1*this.PixelRatio),i=D(this.ChartBorder.GetBottom()),r=a-t,n=i-e;if(this.ClientRect={Left:t,Top:e,Width:r,Height:n},Z.IsTickPeriod(this.HQChart.Period)){this.Canvas.font=this.Font,this.Canvas.fillStyle=this.InfoColor;var s=t+r/2,o=e+n/2;return this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillText(this.NotSupportMessage,s,o),void this.DrawBorder()}this.CalculateChip()?(this.DrawFrame(),this.DrawAllChip(),1!=this.ShowType&&2!=this.ShowType||this.DrawDayChip(),this.CalculateCast(),this.DrawChipInfo()):Fr.Chart.Log("[StockChip::Draw] no data"),this.DrawBorder(),1==this.SizeChange&&this.DrawButton(),this.SizeChange=!1},this.DrawChipInfo=function(){var t=this.ClientRect.Top+this.ClientRect.Height-1,e=this.ClientRect.Left+2,a=this.ClientRect.Left+this.ClientRect.Width;this.Canvas.font=this.Font,this.Canvas.fillStyle=this.InfoColor,this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left";var i=this.LineHeight*c(),r="70%成本价 --.--";he.IsNonEmptyArray(this.Data.Cast)&&(r="70%成本价"+this.Data.Cast[1].MinPrice.toFixed(2)+"-"+this.Data.Cast[1].MaxPrice.toFixed(2)+"集中"+this.Data.Cast[1].Rate.toFixed(2)+"%"),this.Canvas.fillText(r,e,t),t-=i,r="90%成本价 --.--",he.IsNonEmptyArray(this.Data.Cast)&&(r="90%成本价"+this.Data.Cast[0].MinPrice.toFixed(2)+"-"+this.Data.Cast[0].MaxPrice.toFixed(2)+"集中"+this.Data.Cast[0].Rate.toFixed(2)+"%"),this.Canvas.fillText(r,e,t),t-=i,r="平均成本："+this.Data.ChipInfo.AveragePrice.toFixed(2)+"元",this.Canvas.fillText(r,e,t),t-=i,r=+this.Data.YPrice.toFixed(2)+"处获利盘："+this.Data.ChipInfo.YProfitRate.toFixed(2)+"%",this.Canvas.fillText(r,e,t),t-=i,r="获利比例：",this.Canvas.fillText(r,e,t);var n=this.Canvas.measureText(r).width+2,s=e+n,o=a-5-s;if(this.Canvas.strokeStyle=this.ColorNoProfit,this.Canvas.strokeRect(s,t-i,o,i),this.Canvas.strokeStyle=this.ColorProfit,this.Canvas.strokeRect(s,t-i,o*(this.Data.ChipInfo.ProfitRate/100),i),r=this.Data.ChipInfo.ProfitRate.toFixed(2)+"%",this.Canvas.textAlign="center",this.Canvas.fillText(r,s+o/2,t),t-=i,this.Canvas.textAlign="left",r="成本分布,日期："+he.FormatDateString(this.Data.SelectData.Date),this.Data.SelectData.Time&&(r+=" "+he.FormatTimeString(this.Data.SelectData.Time)),this.Canvas.fillText(r,e,t),t-=i,1==this.ShowType||2==this.ShowType){var a=this.ClientRect.Left+this.ClientRect.Width-1;this.Canvas.textAlign="right";var n=50;this.Data.DayChip.sort(function(t,e){return e.Day-t.Day});for(var h in this.Data.DayChip){var l=this.Data.DayChip[h],u=0;this.Data.ChipInfo&&this.Data.ChipInfo.Vol>0&&(u=l.Vol/this.Data.ChipInfo.Vol*100),r=l.Day+"周期"+(1==this.ShowType?"前":"内")+"成本"+(he.IsNumber(u)?u.toFixed(2)+"%":"--.--%"),0==h&&(n=this.Canvas.measureText(r).width+8),this.Canvas.fillStyle=l.Color,this.Canvas.fillRect(a-n,t-i,n,i),this.Canvas.fillStyle=this.DayInfoColor,this.Canvas.fillText(r,a,t),t-=i}}},this.DrawDayChip=function(){var t=this.HQChart.Frame.SubFrame[0].Frame;for(var e in this.Data.DayChip){var a=[],i=this.Data.DayChip[e].Chip;if(i){for(var r=0,n=0;n<i.length;++n){var s=i[n];if(s){r+=s;var o=(n+this.Data.MinPrice)/100,h=t.GetYFromData(o),l=s/this.Data.MaxVol*this.ClientRect.Width+this.ClientRect.Left;a.push({X:l,Y:h})}}this.Data.DayChip[e].Vol=r,this.DrawArea(a,this.Data.DayChip[e].Color)}}},this.Clear=function(){var t=document.getElementById(this.ButtonID);t&&this.ChartBorder.UIElement.parentNode.removeChild(t)},this.DrawButton=function(){var t=document.getElementById(this.ButtonID);t||(t=document.createElement("div"),t.className="klineframe-button",t.id=this.ButtonID,this.ChartBorder.UIElement.parentNode.appendChild(t));var e=this.PixelRatio,a=(this.ClientRect.Left,this.ClientRect.Left+this.ClientRect.Width),i=this.ChartBorder.GetChartWidth(),r=this.ChartBorder.GetTitleHeight(),n=this.ChartBorder.GetTop()/e,s=[{Class:"chip_default icon iconfont icon-chip_default",ID:"chip_default",Color:["#808080","#FF0000"],Title:"默认筹码分布图"},{Class:"chip_long icon iconfont icon-chip_date",ID:"chip_long",Color:["#808080","#FF8000"],Title:"远期筹码分布图"},{Class:"chip_recent icon iconfont icon-chip_date",ID:"chip_recent",Color:["#808080","#0000CC"],Title:"近期筹码分布图"}],o="";for(var h in s){var l=s[h],u="<span class='{iconclass}' id='{iconid}' title='{icontitle}' style='cursor:pointer;display:inline-block;color:{iconcolor};font-size:{iconsize}px'></span>";u=u.replace("{iconclass}",l.Class),u=u.replace("{iconid}",l.ID),u=u.replace("{iconcolor}",l.Color[h==this.ShowType?1:0]),u=u.replace("{iconsize}",r),u=u.replace("{icontitle}",l.Title),o.length>0&&(o+="&nbsp;&nbsp;"),o+=u}t.style.right=Math.floor((i-a+2)/e)+"px",t.style.top=n+"px",t.style.height=r+"px",t.innerHTML=o;var c=this;for(var h in s){var l=s[h];(0,wr.default)("#"+this.ButtonID+" ."+l.ID).click({IconID:l.ID,ShowType:h},function(t){var e=(t.data.IconID,t.data.ShowType);c.ShowType=e,c.HQChart&&c.HQChart.Draw();for(var a in s){var i=s[a];(0,wr.default)("#"+c.ButtonID+" ."+i.ID)[0].style.color=i.Color[a==e?1:0]}})}},this.DrawAllChip=function(){for(var t=this.HQChart.Frame.SubFrame[0].Frame,e=this.Data.SelectData.Close,a=[],i=[],r=0,n=0,s=0,o=0,h=this.Data.YPrice,l=t.HorizontalMax,u=t.HorizontalMin,c=1,d=0;d<this.Data.AllChip.length;++d){var f=this.Data.AllChip[d];if(f){var m=(d+this.Data.MinPrice)/this.PriceZoom;r+=f,n+=m*f,m<h&&(o+=f),m<e&&(s+=f),m<=l&&m>=u&&c<f&&(c=f)}}this.Data.MaxVol=c;for(var d=0;d<this.Data.AllChip.length;++d){var f=this.Data.AllChip[d];if(f){var m=(d+this.Data.MinPrice)/this.PriceZoom;if(!(m>l||m<u)){var C=t.GetYFromData(m),p=f/this.Data.MaxVol*this.ClientRect.Width+this.ClientRect.Left;m<e?a.push({X:p,Y:C}):i.push({X:p,Y:C})}}}if(this.Data.ChipInfo={Vol:r,AveragePrice:n/r,ProfitVol:s,ProfitRate:r>0?s/r*100:0,YProfitRate:r>0?o/r*100:0},0==this.ShowType){this.DrawLines(a,this.ColorProfit),this.DrawLines(i,this.ColorNoProfit);var D=this.Data.ChipInfo.AveragePrice;D>0&&D<=l&&D>=u&&(D=D.toFixed(2),this.DrawAveragePriceLine(a,i,t.GetYFromData(D),this.ColorAveragePrice))}else this.DrawLines(a,this.ColorBG),this.DrawLines(i,this.ColorBG)},this.CalculateCast=function(){if(this.Data.ChipInfo&&this.Data.ChipInfo.Vol){for(var t=[{Start:.05,End:.95,MaxPrice:0,MinPrice:0,Rate:0},{Start:.15,End:.85,MaxPrice:0,MinPrice:0,Rate:0}],e=(this.Data.ChipInfo.AveragePrice,this.Data.ChipInfo.ProfitVol),a=0,i=0,r=0;i<this.Data.AllChip.length&&4!=r;++i){var n=this.Data.AllChip[i];if(!(n<=0)){var s=(i+this.Data.MinPrice)/this.PriceZoom;a+=n;var o=a/e;for(var h in t){var l=t[h];l.MinPrice<=0&&o>l.Start&&(l.MinPrice=s,++r),l.MaxPrice<=0&&o>l.End&&(l.MaxPrice=s,++r)}}}for(var i in t){var u=t[i],c=u.MaxPrice+u.MinPrice;c&&(u.Rate=Math.abs(u.MaxPrice-u.MinPrice)/c*100)}this.Data.Cast=t}},this.DrawArea=function(t,e){if(!(t.length<=0)){this.Canvas.fillStyle=e,this.Canvas.beginPath(),this.Canvas.moveTo(this.ClientRect.Left,t[0].Y);for(var a in t){var i=t[a];this.Canvas.lineTo(i.X,i.Y)}this.Canvas.lineTo(this.ClientRect.Left,t[t.length-1].Y),this.Canvas.fill()}},this.DrawLines=function(t,e){if(!(t.length<=0)){this.Canvas.strokeStyle=e,this.Canvas.beginPath();for(var a in t){var i=t[a];this.Canvas.moveTo(this.ClientRect.Left,i.Y),this.Canvas.lineTo(i.X,i.Y)}this.Canvas.stroke()}},this.DrawAveragePriceLine=function(t,e,a,i){for(var r in t){var n=t[r];if(n.Y==a)return this.Canvas.strokeStyle=i,this.Canvas.beginPath(),this.Canvas.moveTo(this.ClientRect.Left,n.Y),this.Canvas.lineTo(n.X,n.Y),void this.Canvas.stroke()}for(var r in e){var n=e[r];if(n.Y==a)return this.Canvas.strokeStyle=i,this.Canvas.beginPath(),this.Canvas.moveTo(this.ClientRect.Left,n.Y),this.Canvas.lineTo(n.X,n.Y),void this.Canvas.stroke()}},this.DrawBorder=function(){this.Canvas.strokeStyle=this.PenBorder,this.Canvas.strokeRect(this.ClientRect.Left,this.ClientRect.Top,this.ClientRect.Width,this.ClientRect.Height)},this.EvenlyDistribute=function(t,e){var a=e.Low,i=e.High,r=e.MaxPrice,n=e.MinPrice,s=1;if(i-a!=0){for(var o=e.Vol/(i-a),h=a;h<=i&&h<=r;++h){var l=h-n;t[l]+=o,s<t[l]&&(s=t[l])}e.MaxVol=s}},this.TriangleDistribute=function(t,e){for(var a=e.Low,i=e.High,r=(e.MaxPrice,e.MinPrice),n=1,s=3.1415926535,o=(i-a)/2+a,h=0,l=[],u=a+1,c=1;u<=o;++u,++c){var d=Math.tan(45*s/180)*c;h+=d,l.push({Index:u-r,Value:d})}for(var u=i-1,c=1;u>o;--u,++c){var d=Math.tan(45*s/180)*c;h+=d,l.push({Index:u-r,Value:d})}if(h>0){for(var u=0;u<l.length;++u){var f=l[u];t[f.Index]+=f.Value*e.Vol/h,n<t[f.Index]&&(n=t[f.Index])}e.MaxVol=n}},this.CalculateDistribute=function(t,e){1==this.CalculateType?this.TriangleDistribute(t,e):this.EvenlyDistribute(t,e)},this.CalculateChip=function(){if(!this.HQChart)return!1;if(!this.HQChart.FlowCapitalReady)return!1;var t=this.HQChart.Symbol;if(!t)return!1;if(an.IsSHSZIndex(t))return!1;var e=this.HQChart.ChartPaint[0].Data,a=e.DataOffset+parseInt(this.HQChart.CursorIndex);a>=e.Data.length&&(a=e.Data.length-1);var i=e.Data[a],r=i.Close,n=this.HQChart.LastPoint.Y;n&&(r=this.HQChart.Frame.SubFrame[0].Frame.GetYData(n));for(var s,o,h,l=[],u=1,c=a;c>=0;--c){var d=e.Data[c],f=1;d.FlowCapital>0&&(f=d.Vol/d.FlowCapital),s=c==a?d.Vol*f:d.Vol*u;var m={Vol:s,High:d.High,Low:d.Low};l.push(m),u*=1-1*f,(!o||o<d.High)&&(o=d.High),(!h||h>d.Low)&&(h=d.Low)}if(!o||!h)return!0;var C=this.PriceZoom;o=parseInt(o*C),h=parseInt(h*C);for(var p=o-h,D=new Array,v=0;v<=p;++v)D.push(0);var g,S=[];if(2==this.ShowType){var S=[{Day:100,Color:this.DAY_COLOR[1][5]},{Day:60,Color:this.DAY_COLOR[1][4]},{Day:30,Color:this.DAY_COLOR[1][3]},{Day:20,Color:this.DAY_COLOR[1][2]},{Day:10,Color:this.DAY_COLOR[1][1]},{Day:5,Color:this.DAY_COLOR[1][0]}];for(var T in l){var d=l[T],y=parseInt(d.High*C),I=parseInt(d.Low*C),x=d.Vol;if(y-I>0&&(x=d.Vol/(y-I)),!(x<=1e-9)){for(var L=0;L<S.length;++L)if(T==S[L].Day){S[L].Chip=D.slice(0);break}g={Low:I,High:y,Vol:d.Vol,MaxPrice:o,MinPrice:h},this.CalculateDistribute(D,g)}}}else if(1==this.ShowType)for(var S=[{Day:5,Color:this.DAY_COLOR[0][0]},{Day:10,Color:this.DAY_COLOR[0][1]},{Day:20,Color:this.DAY_COLOR[0][2]},{Day:30,Color:this.DAY_COLOR[0][3]},{Day:60,Color:this.DAY_COLOR[0][4]},{Day:100,Color:this.DAY_COLOR[0][5]}],M=l.length-1;M>=0;--M){var d=l[M],y=parseInt(d.High*C),I=parseInt(d.Low*C),x=d.Vol;if(y-I>0&&(x=d.Vol/(y-I)),!(x<=1e-9)){for(var L=0;L<S.length;++L)if(M==S[L].Day){S[L].Chip=D.slice(0);break}g={Low:I,High:y,Vol:d.Vol,MaxPrice:o,MinPrice:h},this.CalculateDistribute(D,g)}}else for(var _ in l){var d=l[_],y=parseInt(d.High*C),I=parseInt(d.Low*C),x=d.Vol;y-I>0&&(x=d.Vol/(y-I)),x<=1e-9||(g={Low:I,High:y,Vol:d.Vol,MaxPrice:o,MinPrice:h},this.CalculateDistribute(D,g))}return!!g&&(this.Data={AllChip:D,MaxVol:g.MaxVol,MaxPrice:o,MinPrice:h,SelectData:i,DayChip:S,YPrice:r},!0)},this.DrawFrame=function(){if(0!=this.IsShowX&&!(this.Data.MaxVol<=0)){var t=1!==this.HQChart.Frame.SubFrame.length,e=this.HQChart.Frame.SubFrame[0].Frame,a=e.ChartBorder,i=D(a.GetBottomEx()+1);t||(i=this.ClientRect.Top+this.ClientRect.Height);var r=this.ClientRect.Left,n=r+this.ClientRect.Width;this.Canvas.strokeStyle=this.PenBorder,this.Canvas.beginPath(),t&&(this.Canvas.moveTo(r,i),this.Canvas.lineTo(n,i));var s=this.ShowXCount,o=this.Data.MaxVol,h=Math.floor(o/s);this.Canvas.font=this.Font,this.Canvas.textBaseline="top",this.Canvas.fillStyle=this.InfoColor;for(var l=(c(),1);l<=s;++l){var u=h*l,d=u/this.Data.MaxVol*this.ClientRect.Width+this.ClientRect.Left;if(d=D(d),l==s){this.Canvas.textAlign="right";var f=he.FormatValueString(o,1);this.Canvas.fillText(f,d,i+2)}else{this.Canvas.moveTo(d,this.ClientRect.Top),this.Canvas.lineTo(d,i),this.Canvas.textAlign="center";var f=he.FormatValueString(u,1),m=this.Canvas.measureText(f).width;this.Canvas.fillText(f,Math.floor(d-.25*m),i+2)}}this.Canvas.stroke()}}}function ee(){this.newMethod=qt,this.newMethod(),delete this.newMethod,this.ClassName="DrawToolsButton",this.HQChart,this.ID=C(),this.ToolsDiv,this.Color="#696969",this.Top=5*c(),this.Width=45*c(),this.SetOption=function(t){var e=c();t&&t.Width>10&&(this.Width=t.Width*e)},this.Clear=function(){this.ToolsDiv&&this.ChartBorder.UIElement.parentNode.removeChild(this.ToolsDiv)},this.Draw=function(){var t=this;if(0!=this.SizeChange){var e=[[{HTML:{Title:"线段",IClass:"iconfont icon-draw_line",ID:"icon-segment"},Name:"线段"},{HTML:{Title:"尺子",IClass:"iconfont icon-ruler",ID:"icon_ruler"},Name:"尺子"},{HTML:{Title:"射线",IClass:"iconfont icon-draw_rays",ID:"icon-beam"},Name:"射线"},{HTML:{Title:"标价线",IClass:"iconfont icon-price_line",ID:"icon-price-line"},Name:"标价线"},{HTML:{Title:"垂直线",IClass:"iconfont icon-vertical_line",ID:"icon-vertical-line"},Name:"垂直线"},{HTML:{Title:"箭头",IClass:"iconfont icon-draw_rays",ID:"icon-beam2"},Name:"箭头"},{HTML:{Title:"趋势线",IClass:"iconfont icon-draw_trendline",ID:"icon-trendline"},Name:"趋势线"},{HTML:{Title:"水平线",IClass:"iconfont icon-draw_hline",ID:"icon-hline"},Name:"水平线"},{HTML:{Title:"水平线段",IClass:"iconfont icon-draw_hlinesegment",ID:"icon-hlineseg"},Name:"水平线段"},{HTML:{Title:"平行射线",IClass:"iconfont icon-draw_p_rays_lines",ID:"icon-rayslineseg"},Name:"平行射线"},{HTML:{Title:"平行线",IClass:"iconfont icon-draw_parallel_lines",ID:"icon-parallellines"},Name:"平行线"},{HTML:{Title:"平行通道",IClass:"iconfont icon-draw_parallelchannel",ID:"icon-parallelchannel"},Name:"平行通道"},{HTML:{Title:"价格通道线",IClass:"iconfont icon-draw_pricechannel",ID:"icon-pricechannel"},Name:"价格通道线"},{HTML:{Title:"M头W底",IClass:"iconfont icon-draw_wavemw",ID:"icon-wavemw"},Name:"M头W底"},{HTML:{Title:"头肩型",IClass:"iconfont icon-draw_head_shoulders_bt",ID:"icon-Head-Shoulders"},Name:"头肩型"},{HTML:{Title:"波浪尺",IClass:"iconfont icon-waveruler",ID:"icon-wave-ruler"},Name:"波浪尺"},{HTML:{Title:"AB波浪尺",IClass:"iconfont icon-waveruler",ID:"icon-wave-ruler"},Name:"AB波浪尺"},{HTML:{Title:"箱型线",IClass:"iconfont icon-draw_box",ID:"icon-drawbox"},Name:"箱型线"},{HTML:{Title:"涂鸦线段",IClass:"iconfont icon-draw_line",ID:"icon-segment2"},Name:"涂鸦线段"}],[{HTML:{Title:"圆弧",IClass:"iconfont icon-draw_arc",ID:"icon-arc"},Name:"圆弧线"},{HTML:{Title:"矩形",IClass:"iconfont icon-rectangle",ID:"icon-rect"},Name:"矩形"},{HTML:{Title:"平行四边形",IClass:"iconfont icon-draw_quadrangle",ID:"icon-quad"},Name:"平行四边形"},{HTML:{Title:"三角形",IClass:"iconfont icon-draw_triangle",ID:"icon-triangle"},Name:"三角形"},{HTML:{Title:"圆",IClass:"iconfont icon-draw_circle",ID:"icon-circle"},Name:"圆"},{HTML:{Title:"对称角度",IClass:"iconfont icon-draw_symangle",ID:"icon-symangle"},Name:"对称角度"}],[{HTML:{Title:"文本",IClass:"iconfont icon-draw_text",ID:"icon-text"},Name:"文本"},{HTML:{Title:"向上箭头",IClass:"iconfont icon-arrow_up",ID:"icon-arrowup"},Name:"icon-arrow_up"},{HTML:{Title:"向下箭头",IClass:"iconfont icon-arrow_down",ID:"icon-arrowdown"},Name:"icon-arrow_down"},{HTML:{Title:"向左箭头",IClass:"iconfont icon-arrow_left",ID:"icon-arrowleft"},Name:"icon-arrow_left"},{HTML:{Title:"向右箭头",IClass:"iconfont icon-arrow_right",ID:"icon-arrowright"},Name:"icon-arrow_right"}],[{HTML:{Title:"江恩角度线",IClass:"iconfont icon-draw_gannfan",ID:"icon-gannfan"},Name:"江恩角度线"},{HTML:{Title:"斐波那契周期线",IClass:"iconfont icon-draw_fibonacci",ID:"icon-fibonacci"},Name:"斐波那契周期线"},{HTML:{Title:"阻速线",IClass:"iconfont icon-draw_resline",ID:"icon-resline"},Name:"阻速线"},{HTML:{Title:"黄金分割",IClass:"iconfont icon-draw_goldensection",ID:"icon-goldensection"},Name:"黄金分割"},{HTML:{Title:"百分比线",IClass:"iconfont icon-draw_percentage",ID:"icon-percentage"},Name:"百分比线"},{HTML:{Title:"波段线",IClass:"iconfont icon-draw_waveband",ID:"icon-waveband"},Name:"波段线"},{HTML:{Title:"线形回归线",IClass:"iconfont icon-linear_3",ID:"icon-waveband2"},Name:"线形回归线"},{HTML:{Title:"线形回归带",IClass:"iconfont icon-linear_1",ID:"icon-waveband3"},Name:"线形回归带"},{HTML:{Title:"延长线形回归带",IClass:"iconfont icon-linear_2",ID:"icon-waveband5"},Name:"延长线形回归带"}],[{HTML:{Title:"全部删除",IClass:"iconfont icon-recycle_bin",ID:"icon-delete"},Name:"全部删除"}]],a=this.HQChart;if(!this.ToolsDiv){var i=document.createElement("div");i.className="drawtools",i.id=this.ID;var r="",n="",s=new Array;e.forEach(function(t,e){s.push(t[0])});for(var o=0;o<e.length;o++){for(var h=s[o],l=e[o],u="",d="",f=0;f<l.length;f++){var m=l[f],C=m.Name;C.indexOf("up")>-1?C="向上箭头":C.indexOf("down")>-1?C="向下箭头":C.indexOf("left")>-1?C="向左箭头":C.indexOf("right")>-1&&(C="向右箭头"),u+='<p class="menuTwoItem '+m.HTML.ID+'">'+C+'<i class="'+m.HTML.IClass+'" title="'+m.HTML.Title+'"></i></p>'}o!==e.length-1?(n='<div class="menuTwo">'+u+"</div>",d='<i class="contentArrow iconfont icon-menu_arraw_left"></i>'):(n="",d="");r+='<div class="icon-image first-'+h.HTML.ID+'"><i class="'+h.HTML.IClass+'" title="'+h.HTML.Title+'"></i>'+n+d+"</div>"}this.ChartBorder.UIElement.parentNode.appendChild(i),i.innerHTML=r,this.ToolsDiv=i;for(var o in e){var v=e[o][0];if((0,wr.default)("#"+this.ID+" .first-"+v.HTML.ID).hover(function(){(0,wr.default)(".drawtools").find(".contentArrow").hide(),(0,wr.default)(this).find(".contentArrow").removeClass("trans").show()}),(0,wr.default)("#"+this.ID+" .first-"+v.HTML.ID+" .contentArrow").click(function(t){t.stopPropagation(),(0,wr.default)(".drawtools").find(".menuTwo").hide(),(0,wr.default)(this).siblings(".menuTwo").show()}),(0,wr.default)("#"+this.ID+" .first-"+v.HTML.ID+" .trans").click(function(){event.stopPropagation(),(0,wr.default)(this).siblings(".menuTwo").hide()}),"全部删除"==v.Name)(0,wr.default)("#"+this.ID+" .first-icon-delete").click(function(){(0,wr.default)(".drawtools").find(".menuTwo").hide(),(0,wr.default)(this).siblings().removeClass("active"),(0,wr.default)(this).addClass("active"),a.ClearChartDrawPicture(),(0,wr.default)(".subTolls").css("display","none")});else{(0,wr.default)("#"+this.ID+" .first-"+s[o].HTML.ID).click({CurrentIndex:o},function(t){(0,wr.default)(".drawtools").find(".menuTwo").hide(),(0,wr.default)(this).siblings().removeClass("active"),(0,wr.default)(this).addClass("active"),a.CreateChartDrawPicture(s[t.data.CurrentIndex].Name)});for(var f in e[o]){var g;!function(){g=e[o][f];var i=g.HTML.IClass;(0,wr.default)("#"+t.ID+" ."+g.HTML.ID).hover(function(t){t.stopPropagation(),(0,wr.default)(this).closest(".icon-image").find(".contentArrow").addClass("trans")}),(0,wr.default)("#"+t.ID+" ."+g.HTML.ID).click({DrawName:g.Name,CurrentIndex:o,CurrentData:g},function(t){t.stopPropagation(),(0,wr.default)(this).closest(".icon-image").find(".contentArrow").hide(),(0,wr.default)(this).siblings().removeClass("current"),(0,wr.default)(this).addClass("current"),(0,wr.default)(this).closest(".icon-image").children("i").eq(0).removeClass().addClass(i,"active").attr("title",t.data.CurrentData.HTML.Title),s.splice(t.data.CurrentIndex,1,t.data.CurrentData),(0,wr.default)(this).parent().hide(),a.CreateChartDrawPicture(t.data.DrawName)})}()}}}}var S=this.ID;(0,wr.default)(document).click(function(t){(0,wr.default)("#"+S).is(t.target)||0!==(0,wr.default)("#"+S).has(t.target).length||((0,wr.default)("#"+S+" .menuTwo").hide(),(0,wr.default)("#"+S+" .contentArrow").hide())});var T=(p(),c()),y=D(this.ChartBorder.GetRight()+this.Left),I=this.ChartBorder.GetTop();this.ToolsDiv.style.left=y/T+"px",this.ToolsDiv.style.top=I/T+"px",this.ToolsDiv.style.width=(this.Width-5)/T+"px",this.ToolsDiv.style.height="auto",this.ToolsDiv.style.position="absolute",this.ToolsDiv.style.display="block",this.SizeChange}}}function ae(){this.newMethod=qt,this.newMethod(),delete this.newMethod,this.ClassName="FrameSplitPaint",this.LineColor="rgb(255,0,0)",this.TextColor="rgb(255,0,0)",this.LineWidth=2,this.Font="bold "+18*c()+"px 微软雅黑",this.TextTopOffset=10*c(),this.SetOption=function(t){t&&(t.LineColor&&(this.LineColor=t.LineColor),t.TextColor&&(this.TextColor=t.TextColor),t.Font&&(this.Font=t.Font),he.IsNumber(t.LineWidth)&&(this.LineWidth=t.LineWidth),he.IsNumber(t.TextTopOffset)&&(this.TextTopOffset=t.TextTopOffset))},this.Draw=function(){if(this.HQChart&&(0==this.HQChart.Period||1==this.HQChart.Period)&&this.HQChart.ChartPaint[0]){var t=this.HQChart.ChartPaint[0].Data;if(t&&(this.Data=t,this.ChartFrame&&this.ChartFrame.SubFrame)){var e=this.ChartFrame.SubFrame[0].Frame;if(e){var a=!0===e.IsHScreen,i=e.DataWidth,r=e.DistanceWidth,n=e.XPointCount,s=this.LineWidth*c();if(a)var o=this.ChartBorder.GetHScreenBorder(),h=o.TopEx+r/2+$r.FrameLeftMargin,l=o.BottomEx;else var o=this.ChartBorder.GetBorder(),h=o.LeftEx+r/2+$r.FrameLeftMargin,l=o.RightEx,u=o.ChartHeight-o.TopTitle-5*c();this.Canvas.save(),this.Canvas.lineWidth=s,this.Canvas.font=this.Font,this.Canvas.textAlign="center",this.Canvas.textBaseline="top";for(var d={Left:o.LeftEx,Top:v(s,o.TopTitle),Height:u,LineWidth:s},f=this.Data.DataOffset,m=0;f<this.Data.Data.length&&m<n;++f,++m,h+=i+r){var C=this.Data.Data[f];if(C){var p=this.GetQuarter(C.Date);if(p){var D=h,g=h+i;if(g>l)break;var S=D+(g-D)/2;if(d.DateInfo){var T=d.DateInfo;T.Year!=p.Year||T.Quarter!=p.Quarter?(d.Right=S,this.DrawQuarter(d),d.Left=S,d.Right=null,d.DateInfo=p):d.Right=S}else d.DateInfo=p,d.Right=S}}}this.DrawQuarter(d),this.Canvas.restore()}}}},this.DrawQuarter=function(t){if(he.IsNumber(t.Left)&&he.IsNumber(t.Right)){var e=v(t.LineWidth,t.Left),a=v(t.LineWidth,t.Right),i=a-e;this.Canvas.strokeStyle=this.LineColor,this.Canvas.strokeRect(e,t.Top,i,t.Height);var r=t.DateInfo,n=r.Year%100;if(n<10)var s="0"+n;else var s=n.toString();var o=s+"年"+r.Quarter+"季度";if(this.Canvas.measureText(o).width<i+5){var h=e+i/2,l=t.Top+this.TextTopOffset;this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(o,h,l)}}},this.GetQuarter=function(t){if(!he.IsNumber(t))return null;var e=parseInt(t/1e4),a=parseInt(t%1e4/100);switch(a){case 1:case 2:case 3:var i=1;break;case 4:case 5:case 6:var i=2;break;case 7:case 8:case 9:var i=3;break;case 10:case 11:case 12:var i=4;break;default:return null}return{Year:e,Month:a,Quarter:i}}}function ie(){this.newMethod=qt,this.newMethod(),delete this.newMethod,this.ClassName="RectSelectPaint",this.LineColor=$r.RectSelect.LineColor,this.LineWidth=$r.RectSelect.LineWidth,this.LineDotted=$r.RectSelect.LineDotted,this.AreaColor=$r.RectSelect.AreaColor,this.FirstPoint,this.SecondPoint,this.PreventClose=!1,this.StartDate,this.EndDate,this.HQChart,this.DragRect,this.SetOption=function(t){t&&(t.LineColor&&(this.LineColor=t.LineColor),t.AreaColor&&(this.AreaColor=t.AreaColor))},this.ReloadResource=function(t){this.LineColor=$r.RectSelect.LineColor,this.LineWidth=$r.RectSelect.LineWidth,this.LineDotted=$r.RectSelect.LineDotted,this.AreaColor=$r.RectSelect.AreaColor},this.IsMinuteChart=function(){var t=this.HQChart.ClassName;return"MinuteChartContainer"==t||"MinuteChartHScreenContainer"==t},this.GetKData=function(){if(!this.HQChart)return null;var t=this.IsMinuteChart(),e=null;if(t){if(!this.HQChart.SourceData)return null;e=this.HQChart.SourceData}else{if(!this.HQChart.ChartPaint[0])return null;if(!(e=this.HQChart.ChartPaint[0].Data))return null}return e},this.GetPointCount=function(){var t=0;return this.FirstPoint&&++t,this.SecondPoint&&++t,t},this.DateToNumber=function(t,e){if(e)return he.IsNumber(t.Date)?1e4*t.Date+t.Time:t.Time;var a=this.HQChart.Period;return Z.IsDayPeriod(a,!0)?t.Date:Z.IsMinutePeriod(a,!0)?1e4*t.Date+t.Time:Z.IsSecondPeriod(a)||Z.IsTickPeriod(a)?1e6*t.Date+t.Time:null},this.GetSelectRectData=function(){if(!this.FirstPoint&&!this.SecondPoint)return null;var t=this.GetKData();if(!t)return null;for(var e=this.IsMinuteChart(),a=this.DateToNumber(this.FirstPoint,e),i=this.DateToNumber(this.SecondPoint,e),r={Start:null,End:null,Data:t},n=0;n<t.Data.length;++n){var s=t.Data[n];if(s){var o=this.DateToNumber(s,e);if(a==o&&(r.Start=n),i==o&&(r.End=n),he.IsNumber(r.Start)&&he.IsNumber(r.End)){if(r.Start>r.End){var h=r.Start;r.Start=r.End,r.End=h}return r}}}return null},this.SortPoint=function(){var t=this.IsMinuteChart();if(this.FirstPoint&&!this.SecondPoint)this.StartDate={Date:this.DateToNumber(this.FirstPoint,t),Index:0};else if(this.FirstPoint&&this.SecondPoint){var e=this.DateToNumber(this.FirstPoint,t),a=this.DateToNumber(this.SecondPoint,t);e<a?(this.StartDate={Date:e,Index:0},this.EndDate={Date:a,Index:1}):(this.StartDate={Date:a,Index:1},this.EndDate={Date:e,Index:0})}},this.SetPoint=function(t,e){if(!e)return this.FirstPoint?!this.SecondPoint&&(this.SecondPoint={Date:t.Date,Time:t.Time},!0):(this.FirstPoint={Date:t.Date,Time:t.Time},!0);switch(e.Index){case 0:return this.FirstPoint={Date:t.Date,Time:t.Time},!0;case 1:return this.SecondPoint={Date:t.Date,Time:t.Time},!0;default:return!1}},this.ClearPoint=function(){if(this.PreventClose)return!1;var t=!1;return this.FirstPoint&&(this.FirstPoint=null,t=!0),this.SecondPoint&&(this.SecondPoint=null,t=!0),t},this.Draw=function(){if(this.StartDate=null,this.EndDate=null,this.DragRect=[],this.FirstPoint||this.SecondPoint){this.SortPoint();var t=this.GetKData();if(t&&(this.Data=t,this.ChartFrame&&this.ChartFrame.SubFrame)){var e=this.ChartFrame.SubFrame[0].Frame;if(e){var a=!0===e.IsHScreen,i=e.DataWidth,r=e.DistanceWidth,n=e.XPointCount;if(a){var s=e.GetBorder(),o=s.TopEx+r/2+$r.FrameLeftMargin;s.BottomEx}else var s=e.GetBorder(),o=s.LeftEx+r/2+$r.FrameLeftMargin,h=(s.RightEx,s.ChartHeight,s.TopTitle,c(),s.TopEx),l=s.BottomEx;this.Canvas.save();for(var u=(Z.IsDayPeriod(this.HQChart.Period,!0),this.IsMinuteChart()),d=null,f=null,m=null,C=null,p=[],D=this.Data.DataOffset,v=0;D<this.Data.Data.length&&v<n;++D,++v,o+=i+r){var g=this.Data.Data[D];if(g){var S=o,T=o+i;if(u)var y=e.GetXFromIndex(v);else var y=S+(T-S)/2;var I=this.DateToNumber(g,u);if(this.StartDate&&I==this.StartDate.Date&&(d={XIndex:D,X:y,Top:h,Bottom:l,PointIndex:this.StartDate.Index},p.push(d)),this.EndDate&&I==this.EndDate.Date&&(f={XIndex:D,X:y,Top:h,Bottom:l,PointIndex:this.EndDate.Index},p.push(f)),m?(C.Date=I,C.X=y):(m={Date:I,X:y,Top:h,Bottom:l},C={Date:I,X:y,Top:h,Bottom:l}),d&&f)break}}this.DrawLines(p),this.DrawArea(d,f,m,C),this.Canvas.restore()}}}},this.DrawLines=function(t){if(he.IsNonEmptyArray(t)){var e=this.LineWidth*c();this.Canvas.strokeStyle=this.LineColor,this.Canvas.lineWidth=e,this.LineDotted&&this.Canvas.setLineDash(this.LineDotted),this.Canvas.beginPath();for(var a=0;a<t.length;++a){var i=t[a],r=v(e,i.X);this.Canvas.moveTo(r,i.Top),this.Canvas.lineTo(r,i.Bottom);var n=new $(r-3,i.Top,10,i.Bottom-i.Top);this.DragRect[a]={Rect:n,PointIndex:i.PointIndex}}this.Canvas.stroke()}},this.PtInPaint=function(t,e){if(!he.IsNonEmptyArray(this.DragRect))return null;for(var a=0;a<this.DragRect.length;++a){var i=this.DragRect[a],r=i.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(r.X,r.Y,r.Width,r.Height),this.Canvas.isPointInPath(t,e))return{Index:a,PointIndex:i.PointIndex,Self:this}}return null},this.DrawArea=function(t,e,a,i){if(a&&i&&this.StartDate&&this.EndDate){var r;if(t&&e?r=[t,e]:!t&&e?r=[a,e]:t&&!e?r=[t,i]:a.Date>this.StartDate.Date&&i.Date<this.EndDate.Date&&(r=[a,i]),r&&2==r.length){var n=r[0],s=r[1],o=D(n.X),h=D(s.X),l=h-o,u=n.Bottom-n.Top;this.Canvas.fillStyle=this.AreaColor,this.Canvas.fillRect(o,n.Top,l,u)}}}}function re(){this.newMethod=qt,this.newMethod(),delete this.newMethod,this.ClassName="DepthMapPaint",this.LineColor="rgba(0,139,0,0.6)",this.AreaColor=["rgba(0,139,0,0.5)","rgba(0,139,0,0.4)","rgba(0,139,0,0.3)","rgba(0,139,0,0.2)"],this.TextColor="rgba(0,0,0)",this.TextBGColor="rgba(0,139,0)",this.Width=200*c(),this.FrameID=0,this.ID=C(),this.IsDynamic=!1,this.IsCallbackDraw=!0,this.YRange,this.SetOption=function(t){t.FrameID>0&&(this.FrameID=t.FrameID),t.Width>0&&(this.Width=t.Width),he.IsObjectExist(t.ID)&&(this.ID=t.ID),t.IsShowCorssCursor&&(this.IsShowCorssCursor=t.IsShowCorssCursor)},this.Draw=function(){if(this.Data&&this.ChartFrame&&this.ChartFrame.SubFrame&&!(this.ChartFrame.SubFrame.length<=this.FrameID)){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.SubFrame[this.FrameID].Frame,a=e.ChartBorder,i=a.GetHeightEx(),r=a.GetRight(),n=a.GetTopEx(),s=a.GetBottomEx(),o=this.Width;if(o>this.ChartBorder.Right&&(o=this.ChartBorder.Right),t){r=a.GetBottom(),n=a.GetRight(),s=a.GetLeft();var o=this.Width;o>this.ChartBorder.Bottom&&(o=this.ChartBorder.Bottom)}var h={Left:r,Top:n,Right:r+o,Bottom:s,Height:i,Width:o};this.YRange={Max:null,Min:0};for(var l in this.Data){var u=this.Data[l];this.CalculateYRange(u,this.YRange)}for(var l in this.Data){var u=this.Data[l];u.Height>0&&u.Height<=1?h.Height=i*u.Height:h.Height=i,1==u.Type?(h.Top=n,h.Bottom=n+h.Height,this.DrawUpArea(u,h)):2==u.Type?(h.Bottom=s,h.Top=h.Bottom-h.Height,this.DrawDownArea(u,h)):(h.Top=n,h.Bottom=s,this.DrawDefaultArea(u,h))}}},this.CalculateYRange=function(t,e){for(var a in t.Data){var i=t.Data[a];(null==e.Max||e.Max<i.Y)&&(e.Max=i.Y),(null==e.Min||e.Min>i.Y)&&(e.Min=i.Y)}},this.GetXFromData=function(t,e,a){var i=e.Width*(t-a.Min)/(a.Max-a.Min);return e.Left+i},this.GetYFromData=function(t,e,a,i){if(i){var r=e.Height*(t-a.Min)/(a.Max-a.Min);return e.Bottom-r}var r=e.Height*(t-a.Min)/(a.Max-a.Min);return e.Top+r},this.DrawDefaultArea=function(t,e){var a=this.ChartFrame.SubFrame[this.FrameID].Frame,i=t.Range&&t.Range.Y?t.Range.Y:this.YRange,r=[];for(var n in t.Data){var s=t.Data[n],o=this.GetXFromData(s.Y,e,i);if(!(s.X>a.HorizontalMax||s.X<a.HorizontalMin)){var h=a.GetYFromData(s.X);r.push({X:o,Y:h})}}var l=t.LineColor?t.LineColor:this.LineColor,u=t.AreaColor?t.AreaColor:this.AreaColor;r.length>0&&this.DrawLine(r,l,u,e)},this.DrawUpArea=function(t,e){var a=[];for(var i in t.Data){var r=t.Data[i],n=this.GetXFromData(r.Y,e,t.Range.Y),s=this.GetYFromData(r.X,e,t.Range.X,t.IsASC);a.push({X:n,Y:s})}var o=t.LineColor?t.LineColor:this.LineColor,h=t.AreaColor?t.AreaColor:this.AreaColor;a.length>0&&this.DrawLine(a,o,h,e)},this.DrawDownArea=function(t,e){var a=[];for(var i in t.Data){var r=t.Data[i],n=this.GetXFromData(r.Y,e,t.Range.Y),s=this.GetYFromData(r.X,e,t.Range.X,t.IsASC);a.push({X:n,Y:s})}var o=t.LineColor?t.LineColor:this.LineColor,h=t.AreaColor?t.AreaColor:this.AreaColor;a.length>0&&this.DrawLine(a,o,h,e)},this.DrawLine=function(t,e,a,i){var r=!0===this.ChartFrame.IsHScreen,n=!0,s=0;this.Canvas.strokeStyle=e;for(var o in t){var h=t[o];n?(this.Canvas.beginPath(),r?this.Canvas.moveTo(h.Y,h.X):this.Canvas.moveTo(h.X,h.Y),n=!1):r?this.Canvas.lineTo(h.Y,h.X):this.Canvas.lineTo(h.X,h.Y),++s}s>0&&this.Canvas.stroke();var l=t[0],u=t[t.length-1];if(r?(this.Canvas.lineTo(u.Y,i.Left),this.Canvas.lineTo(l.Y,i.Left)):(this.Canvas.lineTo(i.Left,u.Y),this.Canvas.lineTo(i.Left,l.Y)),this.Canvas.closePath(),Array.isArray(a))if(r){var c=this.Canvas.createLinearGradient(this.ChartBorder.GetRightEx(),this.ChartBorder.GetTop(),this.ChartBorder.GetLeft(),this.ChartBorder.GetTop());c.addColorStop(0,a[0]),c.addColorStop(1,a[1]),this.Canvas.fillStyle=c}else{var d=this.Canvas.createLinearGradient(i.Right,i.Top,i.Left,i.Top),f=1/a.length;for(var o in a)d.addColorStop(o*f,a[o]);this.Canvas.fillStyle=d}else this.Canvas.fillStyle=a;this.Canvas.fill()},this.GetYValueByXValue=function(t,e){var a=[],i=zr[e];for(var r in this.Data){var n=this.Data[r];if(0==n.Type&&n.Data&&!(n.Data.length<0)&&0!=n.IsShowCorssCursor){var s=!1;for(var o in n.Data){var h=n.Data[o];if(parseInt(h.X*i)==t){s=!0;var l={X:h.X,Y:h.Y,TextColor:n.TextColor?n.TextColor:this.TextColor,TextBGColor:n.TextBGColor?n.TextBGColor:this.TextBGColor};h.YText&&(l.YText=h.YText),a.push(l);break}}if(!s){var u=n.Data[0],c=n.Data[n.Data.length-1];t>u.X*i&&t<c.X*i&&a.push({X:null,Y:null,TextColor:n.TextColor?n.TextColor:this.TextColor,TextBGColor:n.TextBGColor?n.TextBGColor:this.TextBGColor})}}}return a}}function ne(){this.newMethod=qt,this.newMethod(),delete this.newMethod,this.ClassName="BackgroundPaint",this.IsDynamic=!1,this.IsCallbackDraw=!0,this.FrameID=0,this.Data,this.ID=C(),this.ChartSubFrame,this.ChartBorder,this.KData,this.Period,this.XPointCount=0,this.SetOption=function(t){t.FrameID>0&&(this.FrameID=t.FrameID),he.IsObjectExist(t.ID)&&(this.ID=t.ID)},this.Draw=function(){if(this.Data&&this.HQChart&&this.ChartFrame&&this.ChartFrame.SubFrame&&!(this.ChartFrame.SubFrame.length<=this.FrameID)){var t=this.HQChart.ChartPaint[0];if(t&&t.Data&&(this.ChartSubFrame=this.ChartFrame.SubFrame[this.FrameID].Frame,this.ChartBorder=this.ChartSubFrame.ChartBorder,this.KData=t.Data,this.Period=this.HQChart.Period,this.KData&&!(this.KData.Data.length<=0))){var e=!0===this.ChartSubFrame.IsHScreen;this.XPointCount=this.ChartSubFrame.XPointCount;var a=this.ChartSubFrame.XPointCount,i=this.KData.Data[this.KData.DataOffset],r=this.KData.DataOffset+a-1;r>=this.KData.Data.length&&(r=this.KData.Data.length-1);var n=this.KData.Data[r],s=this.GetShowData(i,n);if(s&&!(s.length<=0)){var o=this.BuildKLineMap(),h=this.ChartBorder.GetBottomEx(),l=this.ChartBorder.GetTopEx(),u=this.ChartBorder.GetHeightEx();e&&(l=this.ChartBorder.GetRightEx(),h=this.ChartBorder.GetLeftEx(),u=this.ChartBorder.GetWidthEx());for(var c in s){var d=s[c],f=this.GetBGCoordinate(d,o);if(f){if(Array.isArray(d.Color)){var m;m=e?this.Canvas.createLinearGradient(h,f.Left,l,f.Left):this.Canvas.createLinearGradient(f.Left,l,f.Left,h);var C=1/d.Color.length;for(var c in d.Color)m.addColorStop(c*C,d.Color[c]);this.Canvas.fillStyle=m}else this.Canvas.fillStyle=d.Color;e?this.Canvas.fillRect(g(h),g(f.Left),g(u),g(f.Width)):this.Canvas.fillRect(g(f.Left),g(l),g(f.Width),g(u))}}}}}},this.GetShowData=function(t,e){var a=[];for(var i in this.Data){var r=this.Data[i],n={};r.Start.Date>=t.Date&&r.Start.Date<=e.Date&&(n.Start=r.Start),r.End.Date>=t.Date&&r.End.Date<=e.Date&&(n.End=r.End),(n.Start||n.End)&&(n.Color=r.Color,a.push(n))}return a},this.BuildKLineMap=function(){var t=!0===this.ChartSubFrame.IsHScreen,e=this.ChartSubFrame.DataWidth,a=this.ChartSubFrame.DistanceWidth,i=this.ChartBorder.GetLeft()+a/2+$r.FrameLeftMargin;t&&(i=this.ChartBorder.GetTop()+a/2+$r.FrameLeftMargin);var r=this.ChartBorder.GetRight();t&&(r=this.ChartBorder.GetBottom());for(var n={Data:new _r.default,Start:null,End:null},s=this.KData.DataOffset,o=0;s<this.KData.Data.length&&o<this.XPointCount;++s,++o,i+=e+a){var h=this.KData.Data[s],l=i,u=i+e;if(u>r)break;var c=l+(u-l)/2;0==o&&(n.XLeft=l),n.XRight=u;var d={Index:s,ShowIndex:o,X:c,Right:u,Left:l,Date:h.Date};if(Z.IsMinutePeriod(this.Period,!0)){var f="Date:"+h.Date+" Time:"+h.Time;d.Time=h.Time}else var f="Date:"+h.Date;n.Data.set(f,d),0==o&&(n.Start=d),n.End=d}return n},this.GetBGCoordinate=function(t,e){var a=null,i=null,r=Z.IsMinutePeriod(this.Period,!0),n=!1;if(r?t.Start&&t.End&&t.Start.Date==t.End.Date&&t.Start.Time==t.End.Time&&(n=!0):t.Start&&t.End&&t.Start.Date==t.End.Date&&(n=!0),n){if(r)var s="Date:"+t.Start.Date+" Time:"+t.Start.Time;else var s="Date:"+t.Start.Date;if(!e.Data.has(s))return null;var o=e.Data.get(s);return a=o.Left,i=o.Right,{Left:a,Right:i,Width:i-a}}if(t.Start){if(r)var s="Date:"+t.Start.Date+" Time:"+t.Start.Time;else var s="Date:"+t.Start.Date;if(e.Data.has(s)){var o=e.Data.get(s);a=o.Left}else if(r)if(t.Start.Date<e.Start.Date||t.Start.Date==e.Start.Date&&t.Start.Time<=e.Start.Time)a=e.Start.Left;else{var h=!0,l=!1,u=void 0;try{for(var c,d=(0,Tr.default)(e.Data);!(h=(c=d.next()).done);h=!0){var f=c.value,m=f[1];if(m.Date>t.Start.Date||m.Date==t.Start.Date&&m.Time>t.Start.Time){a=m.Left;break}}}catch(t){l=!0,u=t}finally{try{!h&&d.return&&d.return()}finally{if(l)throw u}}}else if(t.Start.Date<=e.Start.Date)a=e.Start.Left;else{var C=!0,p=!1,D=void 0;try{for(var v,g=(0,Tr.default)(e.Data);!(C=(v=g.next()).done);C=!0){var f=v.value,m=f[1];if(m.Date>t.Start.Date){a=m.Left;break}}}catch(t){p=!0,D=t}finally{try{!C&&g.return&&g.return()}finally{if(p)throw D}}}}else a=e.XLeft;if(t.End){if(r)var s="Date:"+t.End.Date+" Time:"+t.End.Time;else var s="Date:"+t.End.Date;if(e.Data.has(s)){var o=e.Data.get(s);i=o.Right}else if(r)if(t.End.Date<e.End.Date||t.End.Date==e.End.Date&&t.End.Time>=e.End.Time)i=e.End.Right;else{var S=null,T=!0,y=!1,I=void 0;try{for(var x,L=(0,Tr.default)(e.Data);!(T=(x=L.next()).done);T=!0){var f=x.value,m=f[1];if(m.Date>t.End.Date||m.Date==t.End.Date&&m.Time>t.End.Time){i=S;break}S=m.Right}}catch(t){y=!0,I=t}finally{try{!T&&L.return&&L.return()}finally{if(y)throw I}}}else if(t.End.Date<=e.End.Date)i=e.End.Right;else{var S=null,M=!0,_=!1,b=void 0;try{for(var w,F=(0,Tr.default)(e.Data);!(M=(w=F.next()).done);M=!0){var f=w.value,m=f[1];if(m.Date>t.End.Date){i=S;break}S=m.Right}}catch(t){_=!0,b=t}finally{try{!M&&F.return&&F.return()}finally{if(_)throw b}}}}else i=e.XRight;return null==a||null==i?null:{Left:a,Right:i,Width:i-a}}}function se(){this.PlayList=[],this.Cache=[],this.MinLineHeight=40*c(),this.Height,this.Step=1,this.GetPlayList=function(t){for(var e=t.Canves,a=t.Right,i=t.Left,r=a-i,n=t.IsMoveStep,s=[],o=0,h=0;h<this.PlayList.length;++h){var l=this.PlayList[h],u=this.MinLineHeight;l.Height>this.MinLineHeight&&(u=l.Height);for(var c=!0,d=!1,f=0;f<l.Data.length;++f){var m=l.Data[f],C={X:m.X,Y:o,Text:m.Text,Color:m.Color,Height:u,Font:m.Font,Info:m.Info};s.push(C),n&&(f==l.Data.length-1&&this.Cache.length>0?(c=!1,m.TextWidth||(m.Font&&m.Font.Name?e.font=m.Font.Name:e.font=t.Font,m.TextWidth=e.measureText(C.Text+"擎擎").width),m.X>=m.TextWidth&&(c=!0)):0==f&&(d=!1,m.TextWidth||(m.Font&&m.Font.Name?e.font=m.Font.Name:e.font=t.Font,m.TextWidth=e.measureText(C.Text+"擎擎").width),m.X>r+m.TextWidth&&(d=!0)),m.X+=this.Step)}if(n&&c&&this.Cache.length>0){var p=this.Cache.shift(),D={X:0,Text:p.Text,Color:p.Color,Font:p.Font,Info:p.Info};l.Data.push(D)}if(n&&d&&l.Data.length>0){var v=l.Data.shift();this.OnItemPlayEnd(t.HQChart,v)}o+=u}return s},this.CacluatePlayLine=function(t){this.Height=t;var e=parseInt(t/this.MinLineHeight);if(this.PlayList.length<e)for(var a=e-this.PlayList.length,i=0;i<a;++i)this.PlayList.push({Data:[]});else if(this.PlayList.length>e)for(var r=this.PlayList.length-e,i=0;i<r;++i)for(var n=this.PlayList.pop(),s=0;s<n.Data.length;++s){var o=n.Data[s],h={Text:o.Text,Color:o.Color,Font:o.Font,Info:o.Info};this.Cache.unshift(h)}Fr.Chart.Log("[BarrageList::CacluatePlayLine] LineCount="+this.PlayList.length+" Height="+this.Height)},this.AddBarrage=function(t){for(var e in t){var a=t[e];this.Cache.push(a)}},this.OnItemPlayEnd=function(t,e){if(t.mapEvent.has(Nr.BARRAGE_PLAY_END)){var a=t.mapEvent.get(Nr.BARRAGE_PLAY_END);a.Callback&&a.Callback(a,e,this)}},this.Count=function(){return this.Cache.length}}function oe(){this.newMethod=qt,this.newMethod(),delete this.newMethod,this.ClassName="BarragePaint",this.IsAnimation=!0,this.IsEraseBG=!0,this.HQChart,this.Font=$r.Barrage.Font,this.TextColor=$r.Barrage.Color,this.FontHeight=$r.Barrage.Height,this.BarrageList=new se,this.IsMoveStep=!1,this.SetOption=function(t){t&&(t.Step>0&&(this.BarrageList.Step=t.Step),t.MinLineHeight&&(this.Barrage.MinLineHeight=t.MinLineHeight))},this.DrawHScreen=function(){var t=this.ChartBorder.GetWidth(),e=this.ChartBorder.GetTop(),a=this.ChartBorder.GetBottom(),i=this.ChartBorder.GetRightEx();this.ChartBorder.GetChartWidth();t!=this.BarrageList.Height&&this.BarrageList.CacluatePlayLine(t),this.Canvas.textBaseline="middle",this.Canvas.textAlign="left";var r=this.BarrageList.GetPlayList({Canves:this.Canvas,Right:a,Left:e,Font:this.Font,IsMoveStep:this.IsMoveStep,HQChart:this.HQChart});if(this.IsMoveStep=!1,r){this.Canvas.save(),this.Canvas.translate(this.ChartBorder.GetChartHeight(),0),this.Canvas.rotate(90*Math.PI/180);for(var n=0;n<r.length;++n){var s=r[n];s.Color?this.Canvas.fillStyle=s.Color:this.Canvas.fillStyle=this.TextColor,s.Font?this.Canvas.font=s.Font.Name:this.Canvas.font=this.Font;var o=this.FontHeight;s.Font&&s.Font.Height>0&&(o=s.Font.Height);var h=s.Y+parseInt((s.Height-o)/2);this.Canvas.fillText(s.Text,a-s.X,i+h)}this.Canvas.restore()}},this.Draw=function(){if(this.ChartFrame.IsHScreen)return void this.DrawHScreen();var t=this.ChartBorder.GetLeft(),e=this.ChartBorder.GetRight(),a=this.ChartBorder.GetTopEx(),i=this.ChartBorder.GetHeight();i!=this.BarrageList.Height&&this.BarrageList.CacluatePlayLine(i),this.Canvas.textBaseline="middle",this.Canvas.textAlign="left";var r=this.BarrageList.GetPlayList({Canves:this.Canvas,Right:e,Left:t,Font:this.Font,IsMoveStep:this.IsMoveStep,HQChart:this.HQChart});if(this.IsMoveStep=!1,r)for(var n=0;n<r.length;++n){var s=r[n];s.Color?this.Canvas.fillStyle=s.Color:this.Canvas.fillStyle=this.TextColor,s.Font?this.Canvas.font=s.Font.Name:this.Canvas.font=this.Font;var o=this.FontHeight;s.Font&&s.Font.Height>0&&(o=s.Font.Height);var h=s.Y+parseInt((s.Height-o)/2);this.Canvas.fillText(s.Text,e-s.X,a+h)}}}function he(){this.ChartBorder,this.Frame,this.FrameSplitData,this.SplitCount=5,this.StringFormat=0,this.IsShowLeftText=!0,this.IsShowRightText=!0,this.LanguageID=tn.LANGUAGE_CHINESE_ID,this.GetEventCallback,this.IntegerCoordinateSplit=function(t){var e=this.FrameSplitData.Find(t.Interval);if(!e)return!1;if(t.Interval==e.FixInterval)return!0;var a=t.Max,i=t.Min,r=t.Max/e.FixInterval,n=t.Min/e.FixInterval;he.IsFloat(r)&&(a=parseInt((r+.5).toFixed(0))*e.FixInterval),he.IsFloat(n)&&(i=parseInt((n-.5).toFixed(0))*e.FixInterval),0==t.Min&&(i=0),i<0&&t.Min>0&&(i=0);for(var s=0,o=i;o-a<1e-8;o+=e.FixInterval)++s;return t.Interval=e.FixInterval,t.Max=a,t.Min=i,t.Count=s,!0},this.Filter=function(t,e){if(this.SplitCount<=0||t.length<=0||t.length<=this.SplitCount)return t;var a=parseInt(t.length/this.SplitCount);a<=1&&(a=2);for(var i=[],r=0;r<t.length;r+=a)r+a>=t.length&&r!=t.length-1?i.push(t[t.length-1]):i.push(t[r]);if(2==this.SplitCount&&i.length>2)for(var r=1;r<i.length-1;++r){var n=i[r];n.Message[0]=null,n.Message[1]=null}if(e){for(var s=!1,r=0;r<i.length;++r){var n=i[r];if(Math.abs(n.Value)<1e-8){s=!0;break}}if(0==s){var o=new I;o.Value=0,o.Message[0]=null,o.Message[1]=null,i.push(o)}}return i},this.RemoveZero=function(t){var e=[!0,!0,!0,!0];for(var a in t){var i=t[a],r=i.Message[0];this.IsDecimalZeroEnd(r)||(e[0]=!1);var r=i.Message[1];this.IsDecimalZeroEnd(r)||(e[1]=!1);var r=i.Message[2];this.IsDecimalZeroEnd(r)||(e[2]=!1);var r=i.Message[3];this.IsDecimalZeroEnd(r)||(e[3]=!1)}if(0!=e[0]||0!=e[1]||0!=e[2]||0!=e[3])for(var a in t){var i=t[a];if(e[0]){var r=i.Message[0];null!=r&&("number"==typeof r&&(r=r.toString()),i.Message[0]=r.replace(/[.][0]+/g,""))}if(e[1]){var r=i.Message[1];null!=r&&("number"==typeof r&&(r=r.toString()),i.Message[1]=r.replace(/[.][0]+/g,""))}if(e[2]){var r=i.Message[2];null!=r&&("number"==typeof r&&(r=r.toString()),i.Message[2]=r.replace(/[.][0]+/g,""))}if(e[3]){var r=i.Message[3];null!=r&&("number"==typeof r&&(r=r.toString()),i.Message[3]=r.replace(/[.][0]+/g,""))}}},this.IsDecimalZeroEnd=function(t){if(null==t)return!0;if("number"==typeof t&&(t=t.toString()),"0"==t)return!0;var e=t.search(/[.]/);if(e<0)return!1;for(var a=e+1;a<t.length;++a){var i=t.charAt(a);if(i>="1"&&i<="9")return!1}return!0}}function le(){this.newMethod=he,this.newMethod(),delete this.newMethod,this.CoordinateType=0,this.Symbol,this.Data,this.FrameSplitData2,this.FloatPrecision=null,this.Period,this.KLineChart,this.Custom=[],this.SplitType=0,this.DefaultYMaxMin,this.FixedYMaxMin,this.EnableZoomUpDown=!1,this.LastMaxMin,this.PercentageTextFormat=0,this.IsEnableDragY=function(){return 0==this.CoordinateType||1==this.CoordinateType},this.Operator=function(){var t={};t.Max=this.Frame.HorizontalMax,t.Min=this.Frame.HorizontalMin,t.Count=this.SplitCount,t.Max==t.Min&&(t.Max+=.01*t.Max,t.Min-=.01*t.Min);var e=this.FixedYMaxMin&&he.IsNumber(this.FixedYMaxMin.Max)&&he.IsNumber(this.FixedYMaxMin.Min);if(e)t.Max=this.FixedYMaxMin.Max,t.Min=this.FixedYMaxMin.Min;else if(this.DefaultYMaxMin){var a=this.DefaultYMaxMin;he.IsNumber(a.Max)&&(t.Min>a.Max?t.Min=a.Max:t.Max<a.Max&&(t.Max=a.Max)),he.IsNumber(a.Min)&&(t.Max<a.Min?t.Max=a.Min:t.Min>a.Min&&(t.Min=a.Min))}t.Interval=(t.Max-t.Min)/(t.Count-1);var i=c(),r=this.Frame.ChartBorder.GetChartWidth(),n=r<450*i,s=Oi(this.Symbol);n&&an.IsSHSZIndex(this.Symbol)&&(s=0),null!=this.FloatPrecision&&(s=this.FloatPrecision),Fr.Chart.Log("[FrameSplitKLinePriceY::Operator] Max="+t.Max+" Min="+t.Min+" Count="+t.Count+" isPhoneModel="+n+" defaultfloatPrecision="+s+" "),this.Frame.Logarithmic=null,this.Frame.MultiTextFormat=0;var o=!0;if(t.IsFixedMaxMin=e,t.IsFilter=o,Z.IsTickPeriod(this.Period))this.SplitTickData(t,s),o=t.IsFilter;else if(le.SplitCustom)le.SplitCustom(this,t,s),o=!1;else switch(this.CoordinateType){case 1:this.SplitPercentage(t,s,e)?(this.Frame.MultiTextFormat=this.PercentageTextFormat,o=!1):this.SplitDefault(t,s,e);break;case 3:this.SplitIncrease(t,s)?o=!1:this.SplitDefault(t,s);break;case 4:this.SplitAverage(t,s),o=!1;break;case 5:this.SplitGoldenSection(t,s),o=!1;break;case 2:this.SplitLogarithmic(t,s)?o=!1:this.SplitDefault(t,s);break;default:1==this.SplitType?(this.SplitFixed(t,s),o=!1):this.SplitDefault(t,s,e)}if(this.CustomCoordinate(s),o&&(this.Frame.HorizontalInfo=this.Filter(this.Frame.HorizontalInfo,!1)),this.Frame.HorizontalMax=t.Max,this.Frame.HorizontalMin=t.Min,1!=this.EnableZoomUpDown||this.FixedYMaxMin||(this.FixedYMaxMin={Max:t.Max,Min:t.Min}),Fr.Chart.Log("[FrameSplitKLinePriceY::Operator] fixed . Max="+t.Max+" Min="+t.Min+" Count="+t.Count),this.GetEventCallback){var h=this.GetEventCallback(Nr.ON_SPLIT_YCOORDINATE);if(h&&h.Callback){var l={ID:this.Frame.Identify,Frame:this.Frame};h.Callback(h,l,this)}}},this.SplitTickData=function(t,e){switch(this.CoordinateType){case 1:this.SplitPercentage(t,e,t.IsFixedMaxMin)?(this.Frame.MultiTextFormat=this.PercentageTextFormat,t.IsFilter=!1):this.SplitDefault(t,e,t.IsFixedMaxMin);break;default:3==this.SplitType?this.SplitTickPrice(t,e):this.SplitDefault(t,e,t.IsFixedMaxMin)}},this.SplitTickPrice=function(t,e){var a=this.KLineChart.GetAllPrice();this.Frame.HorizontalInfo=[];for(var i in a){var r=a[i];this.Frame.HorizontalInfo[i]=new I,this.Frame.HorizontalInfo[i].Value=r,this.IsShowLeftText&&(this.Frame.HorizontalInfo[i].Message[0]=r.toFixed(e)),this.IsShowRightText&&(this.Frame.HorizontalInfo[i].Message[1]=r.toFixed(e))}},this.SplitPercentage=function(t,e,a){var i=this.GetFirstOpenPrice();if(!he.IsNumber(i))return!1;t.Max=(t.Max-i)/i,t.Min=(t.Min-i)/i,t.Interval=(t.Max-t.Min)/(t.Count-1),a||this.IntegerCoordinateSplit2(t);var r,n=(1+t.Min)*i,s=(1+t.Max)*i;if($r.Frame&&$r.Frame.PercentageText){var o=$r.Frame.PercentageText;r={PriceColor:o.PriceColor,PercentageColor:o.PercentageColor,SplitColor:o.SplitColor,Font:o.Font}}for(var h=[],l=0;l<=t.Max;l+=t.Interval){var u=(l+1)*i,o=new I;if(o.Value=u,this.IsShowLeftText&&(o.Message[0]=u.toFixed(e)),this.IsShowRightText){var c=u.toFixed(e),d=(100*l).toFixed(2);d=he.RemoveZero(d),d+="%",o.Message[1]=[d,c],o.ExtendData=r}h.push(o)}for(var l=-t.Interval;l>=t.Min;l-=t.Interval){var u=(l+1)*i;if(!(u<n||u>s)){var o=new I;if(o.Value=u,this.IsShowLeftText&&(o.Message[0]=u.toFixed(e)),this.IsShowRightText){var c=u.toFixed(e),d=(100*l).toFixed(2);d=he.RemoveZero(d),d+="%",o.Message[1]=[d,c],o.ExtendData=r}h.push(o)}}return h.sort(function(t,e){return t.Value-e.Value}),this.Frame.HorizontalInfo=h,t.Min=n,t.Max=s,!0},this.SplitIncrease=function(t,e){var a=this.GetLast2ndClose();if(!he.IsNumber(a))return!1;this.IntegerCoordinateSplit(t),this.Frame.HorizontalInfo=[];for(var i=$r.FrameSplitIncrease.Increase,r=[],n=a;n<t.Max;n*=1+i){var s=new I;s.Value=n;var o=n.toFixed(e);this.IsShowLeftText&&(s.Message[0]=o),this.IsShowRightText&&(s.Message[1]=o),r.push(s)}for(var n=.9*a;n>t.Min;n*=1-i){var s=new I;s.Value=n;var o=n.toFixed(e);this.IsShowLeftText&&(s.Message[0]=o),this.IsShowRightText&&(s.Message[1]=o),r.push(s)}return this.Frame.HorizontalInfo=r,!0},this.SplitAverage=function(t,e){var a=t.Max,i=t.Min;this.Frame.HorizontalInfo=[];for(var r=$r.FrameSplitAverage.Count,n=(a-i)/r,s=0;s<=r;++s){var o=new I;o.Value=i+n*s;var h=o.Value.toFixed(e);this.IsShowLeftText&&(o.Message[0]=h),this.IsShowRightText&&(o.Message[1]=h),this.Frame.HorizontalInfo[s]=o}},this.SplitGoldenSection=function(t,e){var a=t.Max,i=t.Min;this.Frame.HorizontalInfo=[];var r=[],n=$r.FrameGoldenSection.Golden;for(var s in n){var o=(a-i)*n[s]+i;item=new I,item.Value=o;var h=o.toFixed(e);this.IsShowLeftText&&(item.Message[0]=h),this.IsShowRightText&&(item.Message[1]=h),r.push(item)}this.Frame.HorizontalInfo=r},this.SplitLogarithmic=function(t,e){var a=$r.FrameLogarithmic.MinInterval,i=this.GetFirstOpenPrice();if(!he.IsNumber(i))return!1;for(var r=this.ChartBorder.GetHeightEx(),n=[.01,.02,.04,.08,.1,.2],s=n[n.length-1],o=0;o<n.length;++o){var h=n[o];if(i*h*(r/(t.Max-t.Min))>a){s=h;break}}var l=[],u=i,o=s;do{var c={Start:u};u=i*(1+o),c.End=u,l.push(c),o+=s}while(u<t.Max);var d=u,f=[],u=i,o=s;do{var c={End:u};u=i*(1-o),c.Start=u,f.push(c),o+=s}while(u>t.Min);var m=u;t.Max=d,t.Min=m,Fr.Chart.Log("[FrameSplitKLinePriceY::SplitLogarithmic] up, down",l,f),this.Frame.HorizontalInfo=[];var c=new I;c.Value=i,c.Font=$r.FrameLogarithmic.OpenPriceFont;var C=c.Value.toFixed(e);this.IsShowLeftText&&(c.Message[0]=C),this.IsShowRightText&&(c.Message[1]=C),this.Frame.HorizontalInfo.push(c);for(var o in l){var c=new I;c.Value=l[o].End;var C=c.Value.toFixed(e);this.IsShowLeftText&&(c.Message[0]=C),this.IsShowRightText&&(c.Message[1]=C),this.Frame.HorizontalInfo.push(c)}for(var o in f){var c=new I;c.Value=f[o].End;var C=c.Value.toFixed(e);this.IsShowLeftText&&(c.Message[0]=C),this.IsShowRightText&&(c.Message[1]=C),this.Frame.HorizontalInfo.splice(0,0,c)}return this.Frame.Logarithmic={Up:l,Down:f,OpenPrice:i},!0},this.SplitDefault=function(t,e,a){a||this.IntegerCoordinateSplit(t),this.Frame.HorizontalInfo=[];for(var i=0,r=t.Min;i<t.Count;++i,r+=t.Interval)this.Frame.HorizontalInfo[i]=new I,this.Frame.HorizontalInfo[i].Value=r,this.IsShowLeftText&&(this.Frame.HorizontalInfo[i].Message[0]=r.toFixed(e)),this.IsShowRightText&&(this.Frame.HorizontalInfo[i].Message[1]=r.toFixed(e))},this.SplitFixed=function(t,e){this.Frame.HorizontalInfo=[];for(var a=0,i=t.Min;a<t.Count;++a,i+=t.Interval)this.Frame.HorizontalInfo[a]=new I,this.Frame.HorizontalInfo[a].Value=i,this.IsShowLeftText&&(this.Frame.HorizontalInfo[a].Message[0]=i.toFixed(e)),this.IsShowRightText&&(this.Frame.HorizontalInfo[a].Message[1]=i.toFixed(e))},this.CustomCoordinate=function(t){this.Frame.CustomHorizontalInfo=[];for(var e in this.Custom){var a=this.Custom[e];if(0==a.Type){var i=t;he.IsNumber(a.FloatPrecision)&&a.FloatPrecision>=0&&(i=a.FloatPrecision);var r=this.GetLatestPrice(i,a);r&&this.Frame.CustomHorizontalInfo.push(r)}else 1==a.Type&&this.CustomFixedCoordinate(a)}},this.GetLatestPrice=function(t,e){if(!this.Data||!this.Data.Data)return null;if(this.Data.Data.length<=0)return null;var a=this.Data.Data[this.Data.Data.length-1],i=new I;i.Type=0,i.Value=a.Close,i.TextColor=$r.FrameLatestPrice.TextColor,i.LineType=2;var r=a.Close.toFixed(t);if("HH:MM"==e.DateTime&&Z.IsMinutePeriod(this.Period,!0)){var n=he.FormatTimeString(a.Time,e.DateTime),s=[{Text:r},{Text:n}];"left"==e.Position?i.Message[0]=s:i.Message[1]=s}else"left"==e.Position?i.Message[0]=r:i.Message[1]=r;return a.Close>a.Open?i.LineColor=$r.FrameLatestPrice.UpBarColor:a.Close<a.Open?i.LineColor=$r.FrameLatestPrice.DownBarColor:i.LineColor=$r.FrameLatestPrice.UnchagneBarColor,he.IsNumber(e.LineType)&&(i.LineType=e.LineType),0==e.IsShowLine&&(i.LineType=-1),i},this.GetFirstOpenPrice=function(){if(!this.Data)return null;for(var t=this.Frame.XPointCount,e=this.Data.DataOffset,a=0;e<this.Data.Data.length&&a<t;++e,++a){var i=this.Data.Data[e];if(null!=i.Open&&null!=i.High&&null!=i.Low&&null!=i.Close)return Z.IsTickPeriod(this.Period)?i.YClose:i.Open}return null},this.GetLast2ndClose=function(){if(!this.Data)return null;if(this.Data.Data.length<=0)return null;var t=this.Frame.XPointCount,e=this.Data.DataOffset+t-1;e>=this.Data.Data.length&&(e=this.Data.Data.length-1);for(var a=null,i=e,r=0;i>=0&&i<this.Data.Data.length;--i){var n=this.Data.Data[i];if(null!=n.Open&&null!=n.High&&null!=n.Low&&null!=n.Close&&(0==r?a=n.Open:1==r&&(a=n.Close),++r>=2))break}return a},this.CustomFixedCoordinate=function(t){var e=Oi(this.Symbol);for(var a in t.Data){var i=t.Data[a],r=new I;r.Type=1,r.TextColor=i.TextColor,r.LineColor=i.Color,r.LineType=2,he.IsNumber(t.LineType)&&(r.LineType=t.LineType),0==t.IsShowLine&&(r.LineType=-1),r.Value=i.Value;var n;n=i.Text?i.Text:r.Value.toFixed(e),"left"==t.Position?r.Message[0]=n:r.Message[1]=n,this.Frame.CustomHorizontalInfo.push(r)}},this.IntegerCoordinateSplit2=function(t){var e=this.FrameSplitData2.Find(t.Interval);if(!e)return!1;if(t.Interval==e.FixInterval)return!0;var a=parseInt((t.Max/e.FixInterval+.5).toFixed(0))*e.FixInterval,i=parseInt((t.Min/e.FixInterval-.5).toFixed(0))*e.FixInterval;0==t.Min&&(i=0),i<0&&t.Min>0&&(i=0);for(var r=0,n=i;n-a<1e-8;n+=e.FixInterval)++r;return t.Interval=e.FixInterval,t.Max=a,t.Min=i,t.Count=r,!0}}function ue(){this.newMethod=he,this.newMethod(),delete this.newMethod,this.SplitCount=3,this.FloatPrecision=2,this.FLOATPRECISION_RANGE=[1,.1,.01,.001,1e-4],this.SplitType=0,this.Custom=[],this.DefaultYMaxMin,this.EnableRemoveZero=!0,this.LineType=null,this.IgnoreYValue=null,this.FixedYMaxMin,this.EnableZoomUpDown=!1,this.IsBeforeData=!1,this.BeforeOpenData,this.IsAfterData=!1,this.AfterCloseData,this.MultiDayBeforeOpenData,this.MultiDayAfterCloseData,this.IsEnableDragY=function(){return!0},this.GetFloatPrecision=function(t,e){if(t>this.FLOATPRECISION_RANGE[0])return e;if(e<0)return 2;for(;e<this.FLOATPRECISION_RANGE.length&&!(t>this.FLOATPRECISION_RANGE[e]);++e);return e},this.Operator=function(){var t={};t.Max=this.Frame.HorizontalMax,t.Min=this.Frame.HorizontalMin,t.Max==t.Min&&(0==t.Max?(t.Max=1,t.Min=-1):(t.Max+=.01*t.Max,t.Min-=.01*t.Min));var e=!1;if(this.FixedYMaxMin&&he.IsNumber(this.FixedYMaxMin.Max)&&he.IsNumber(this.FixedYMaxMin.Min)&&(e=!0),e)t.Max=this.FixedYMaxMin.Max,t.Min=this.FixedYMaxMin.Min;else if(this.DefaultYMaxMin){var a=this.DefaultYMaxMin;he.IsNumber(a.Max)&&(t.Min>a.Max?t.Min=a.Max:t.Max<a.Max&&(t.Max=a.Max)),he.IsNumber(a.Min)&&(t.Max<a.Min?t.Max=a.Min:t.Min>a.Min&&(t.Min=a.Min))}if(this.Frame.YSpecificMaxMin?(t.Count=this.Frame.YSpecificMaxMin.Count,t.Interval=(t.Max-t.Min)/(t.Count-1)):1==this.SplitType||e?(t.Count=this.SplitCount,t.Interval=(t.Max-t.Min)/(t.Count-1)):(t.Count=this.SplitCount,t.Interval=(t.Max-t.Min)/(t.Count-1),this.IntegerCoordinateSplit(t)),this.Frame.HorizontalInfo=[],this.Frame.YSplitScale)for(var i in this.Frame.YSplitScale){var r=this.Frame.YSplitScale[i],n=new I;n.Value=r,he.IsNumber(this.LineType)&&(n.LineType=this.LineType);var s=Math.abs(r);if(s<1e-10)n.Message[1]=0;else if(s<this.FLOATPRECISION_RANGE[this.FLOATPRECISION_RANGE.length-1])n.Message[1]=r.toExponential(2).toString();else{var o=this.GetFloatPrecision(s,this.FloatPrecision);n.Message[1]=he.FormatValueString(r,o,this.LanguageID)}n.Message[0]=n.Message[1],0==this.IsShowLeftText&&(this.Frame.HorizontalInfo[i].Message[0]=null),0==this.IsShowRightText&&(this.Frame.HorizontalInfo[i].Message[1]=null),this.Frame.HorizontalInfo.push(n)}else for(var i=0,r=t.Min;i<t.Count;++i,r+=t.Interval){var n=new I;if(this.Frame.HorizontalInfo[i]=n,n.Value=r,he.IsNumber(this.LineType)&&(n.LineType=this.LineType),1==this.StringFormat){var o=this.FloatPrecision;!isNaN(r)&&Math.abs(r)>1e3&&(o=0),this.Frame.HorizontalInfo[i].Message[1]=he.FormatValueString(r,o,this.LanguageID)}else{var s=Math.abs(r);if(s<1e-10)this.Frame.HorizontalInfo[i].Message[1]=0;else if(s<this.FLOATPRECISION_RANGE[this.FLOATPRECISION_RANGE.length-1])this.Frame.HorizontalInfo[i].Message[1]=r.toExponential(2).toString();else{var o=this.GetFloatPrecision(s,this.FloatPrecision);this.Frame.HorizontalInfo[i].Message[1]=he.FormatValueString(r,o,this.LanguageID)}}this.Frame.HorizontalInfo[i].Message[0]=this.Frame.HorizontalInfo[i].Message[1],0==this.IsShowLeftText&&(this.Frame.HorizontalInfo[i].Message[0]=null),0==this.IsShowRightText&&(this.Frame.HorizontalInfo[i].Message[1]=null)}if(this.FilterIgnoreYValue(),this.CustomCoordinate(),1!=this.SplitType&&(this.Frame.HorizontalInfo=this.Filter(this.Frame.HorizontalInfo,t.Max>0&&t.Min<0)),this.EnableRemoveZero&&this.RemoveZero(this.Frame.HorizontalInfo),this.Frame.HorizontalMax=t.Max,this.Frame.HorizontalMin=t.Min,1!=this.EnableZoomUpDown||this.FixedYMaxMin||(this.FixedYMaxMin={Max:t.Max,Min:t.Min}),this.RightFrameSplitY(),this.CallAcutionSplitY(this.SplitCount,t),this.GetEventCallback){var h=this.GetEventCallback(Nr.ON_SPLIT_YCOORDINATE);if(h&&h.Callback){var l={ID:this.Frame.Identify,Frame:this.Frame};h.Callback(h,l,this)}}},this.FilterIgnoreYValue=function(){if(this.IgnoreYValue&&!(this.IgnoreYValue.length<=0)){var t=new Ir.default(this.IgnoreYValue);this.Frame.HorizontalInfo=this.Frame.HorizontalInfo.filter(function(e){return!t.has(e.Value)})}},this.CallAcutionSplitY=function(t,e){if(1!=this.Frame.Identify)return null;var a=this.GetCallAcutionSplitY(t,e);if(a){for(var i in this.Frame.HorizontalInfo){var r=this.Frame.HorizontalInfo[i];a.IsBeforeData&&(r.Message[2]=r.Message[0],r.Message[0]=null),a.IsAfterData&&(r.Message[3]=r.Message[1],r.Message[1]=null)}for(var i in a.HorizontalInfo){var r=a.HorizontalInfo[i];this.Frame.HorizontalInfo.push(r)}}},this.GetCallAcutionSplitY=function(t,e){if(1!=this.Frame.Identify)return null;var a=1==this.IsBeforeData&&this.BeforeOpenData&&(2==this.BeforeOpenData.Ver||3==this.BeforeOpenData.Ver),i=1==this.IsAfterData&&this.AfterCloseData&&(2==this.AfterCloseData.Ver||3==this.AfterCloseData.Ver);if(a||i){var r=(e.Max-e.Min)/(t-1);if(a)var n=(this.BeforeOpenData.VolMax-this.BeforeOpenData.VolMin)/(t-1);if(i)var s=(this.AfterCloseData.VolMax-this.AfterCloseData.VolMin)/(t-1);for(var o=[],h=0;h<t;++h){var l=new I,u=r*h;if(l.Value=u,l.LineType=8,a){var c=n*h;l.Message[0]=c.toFixed(0)}if(i){var d=s*h;l.Message[1]=d.toFixed(0)}o.push(l)}return{HorizontalInfo:o,IsBeforeData:a,IsAfterData:i}}var f=!1,n=null;if(this.MultiDayBeforeOpenData&&he.IsNonEmptyArray(this.MultiDayBeforeOpenData)){f=!0;var m=this.MultiDayBeforeOpenData[0];if(2==m.Ver||3==m.Ver)var n=(m.VolMax-m.VolMin)/(t-1)}var C=!1,s=null;if(this.MultiDayAfterCloseData&&he.IsNonEmptyArray(this.MultiDayAfterCloseData)){C=!0;var m=this.MultiDayAfterCloseData[0];if(2==m.Ver||3==m.Ver)var s=(m.VolMax-m.VolMin)/(t-1)}if(f||C){for(var r=(e.Max-e.Min)/(t-1),o=[],h=0;h<t;++h){var l=new I,u=r*h;if(l.Value=u,l.LineType=9,null!=n){var c=n*h;l.Message[0]=c.toFixed(0)}if(null!=s){var d=s*h;l.Message[1]=d.toFixed(0)}o.push(l)}return{HorizontalInfo:o,IsBeforeData:f,IsAfterData:C}}return null},this.RightFrameSplitY=function(){if(this.Frame.RightFrame){var t=this.Frame.RightFrame;for(var e in this.Frame.HorizontalInfo){var a=this.Frame.HorizontalInfo[e],i=this.Frame.GetYFromData(a.Value),r=t.GetYData(i);a.Message[1]=he.FormatValueString(r,this.FloatPrecision,this.LanguageID)}}},this.CustomCoordinate=function(){this.Frame.CustomHorizontalInfo=[];for(var t in this.Custom){var e=this.Custom[t];0==e.Type||1==e.Type&&this.CustomFixedCoordinate(e)}},this.CustomFixedCoordinate=function(t){for(var e in t.Data){var a=t.Data[e],i=new I;i.Type=1,i.TextColor=a.TextColor,i.LineColor=a.Color,i.LineType=2,he.IsNumber(t.LineType)&&(i.LineType=t.LineType),0==t.IsShowLine&&(i.LineType=-1),i.Value=a.Value;var r;r=a.Text?a.Text:i.Value.toFixed(2),"left"==t.Position?i.Message[0]=r:i.Message[1]=r,this.Frame.CustomHorizontalInfo.push(i)}}}function ce(){this.newMethod=he,this.newMethod(),delete this.newMethod,this.ShowText=!0,this.Period,this.Symbol,this.MinTextDistance=50*c(),this.MinBarDistance=5,this.SplitDateTime=function(){this.Frame.VerticalInfo=[];for(var t=this.Frame.DistanceWidth+this.Frame.DataWidth,e=this.Frame.Data.DataOffset,a=this.Frame.XPointCount,i=0,r=0,n=0,s=e;n<a&&s<this.Frame.Data.Data.length;++n,++s){i+=t,++r;var o=null;if(0==n){o={Value:s-e,Text:he.FormatDateString(this.Frame.Data.Data[s].Date,"MM-DD")}}else if(i>this.MinTextDistance&&r>=this.MinBarDistance){var h=he.FormatTimeString(this.Frame.Data.Data[s].Time);o={Value:s-e,Text:h}}if(o){var l=new I;l.Value=o.Value,this.ShowText&&(l.Message[0]=o.Text),0==l.Value&&(l.LineType=-1),this.Frame.VerticalInfo.push(l),i=0,r=0,0==n&&(i=-this.MinTextDistance/2)}}},this.SplitSecond=function(){this.Frame.VerticalInfo=[];for(var t=this.Frame.DistanceWidth+this.Frame.DataWidth,e=this.Frame.Data.DataOffset,a=this.Frame.XPointCount,i=0,r=0,n=0,s=e;n<a&&s<this.Frame.Data.Data.length;++n,++s){i+=t,++r;var o=null;if(0==n){o={Value:s-e,Text:he.FormatDateString(this.Frame.Data.Data[s].Date,"MM-DD")}}else if(i>this.MinTextDistance&&r>=this.MinBarDistance){var h=he.FormatTimeString(this.Frame.Data.Data[s].Time,"HH:MM:SS");o={Value:s-e,Text:h}}if(o){var l=new I;l.Value=o.Value,this.ShowText&&(l.Message[0]=o.Text),this.Frame.VerticalInfo.push(l),i=0,r=0,0==n&&(i=-this.MinTextDistance/2)}}},this.SplitDate=function(){this.Frame.VerticalInfo=[];for(var t=this.Frame.Data.DataOffset,e=this.Frame.XPointCount,a=null,i=null,r=0,n=0,s=t,o=12;n<e&&s<this.Frame.Data.Data.length;++n,++s){var h=parseInt(this.Frame.Data.Data[s].Date/1e4),l=parseInt(this.Frame.Data.Data[s].Date/100)%100;if(i!=l&&++r,o<12||null!=a&&a==h&&null!=i&&i==l)i=l,++o;else{var u=new I;u.Value=s-t;var c;null==a||a!=h?c=h.toString():null!=i&&i==l||(c=l.toString()+"月",c=en.GetText(c,this.LanguageID)),a=h,i=l,this.ShowText&&(u.Message[0]=c),0==u.Value&&(u.LineType=-1),this.Frame.VerticalInfo.push(u),o=0}}0==this.Period&&r<=2&&this.SplitShortDate()},this.SplitShortDate=function(){this.Frame.VerticalInfo=[];for(var t=this.Frame.Data.DataOffset,e=this.Frame.XPointCount,a=!0,i=0,r=t,n=12;i<e&&r<this.Frame.Data.Data.length;++i,++r){var s=parseInt(this.Frame.Data.Data[r].Date/1e4);if(n<12)++n;else{var o=new I;o.Value=r-t;var h;a?(h=s.toString(),a=!1):h=he.FormatDateString(this.Frame.Data.Data[r].Date,"MM-DD"),this.ShowText&&(o.Message[0]=h),0==o.Value&&(o.LineType=-1),this.Frame.VerticalInfo.push(o),n=0}}},this.Operator=function(){if(null!=this.Frame.Data&&(ce.SplitCustom?ce.SplitCustom(this):Z.IsMinutePeriod(this.Period,!0)?this.SplitDateTime():Z.IsSecondPeriod(this.Period)?this.SplitSecond():Z.IsTickPeriod(this.Period)?this.SplitSecond():this.SplitDate(),this.GetEventCallback)){var t=this.GetEventCallback(Nr.ON_SPLIT_XCOORDINATE);if(t&&t.Callback){var e={ID:this.Frame.Identify,Frame:this.Frame};t.Callback(t,e,this)}}},this.CreateCoordinateInfo=function(){return new I}}function de(){this.newMethod=he,this.newMethod(),delete this.newMethod,this.High=null,this.Low=null,this.YClose,this.Data,this.AverageData,this.SourceData,this.OverlayChartPaint,this.SplitCount=7,this.Symbol,this.SplitType=0,this.LimitPrice,this.Custom,this.RightTextFormat=0,this.BeforeOpenData,this.IsBeforeData=!1,this.AfterCloseData,this.IsAfterData=!1,this.MultiDayBeforeOpenData,this.MultiDayAfterCloseData,this.IsEnableDragY=function(){return!1},this.Operator=function(){if(this.Frame.HorizontalInfo=[],this.Frame.CustomHorizontalInfo=[],this.Data){var t=this.GetMaxMin();if(this.Symbol&&an.IsUSA(this.Symbol.toUpperCase())?this.USASplit(t):2==this.SplitType?this.USASplit(t):this.DefaultSplit(t),this.CustomCoordinate(),this.GetEventCallback){var e=this.GetEventCallback(Nr.ON_SPLIT_YCOORDINATE);if(e&&e.Callback){var a={ID:this.Frame.Identify,Frame:this.Frame};e.Callback(e,a,this)}}}},this.CustomCoordinate=function(){if(this.Custom){var t=Oi(this.Symbol);for(var e in this.Custom){var a=this.Custom[e];if(1==a.Type)this.CustomFixedCoordinate(a);else if(0==a.Type){var i=this.GetLatestPrice(t,a);i&&this.Frame.CustomHorizontalInfo.push(i)}}}},this.GetLatestPrice=function(t,e){if(!this.Data||!this.Data.Data)return null;if(this.Data.Data.length<=0)return null;var a=this.Data.Data[this.Data.Data.length-1];if(!he.IsNumber(a)||!he.IsNumber(this.YClose))return null;var i=new I;i.Type=0,i.Value=a,i.TextColor=$r.FrameLatestPrice.TextColor,i.LineType=2;var r=a.toFixed(t);if("HH:MM"==e.DateTime){var n=this.Frame.Data.Data[this.Frame.Data.Data.length-1],s=he.FormatTimeString(n.Time,e.DateTime),o=[{Text:r},{Text:s}];"left"==e.Position?i.Message[0]=o:i.Message[1]=o}else"left"==e.Position?i.Message[0]=r:i.Message[1]=r;return a>this.YClose?i.LineColor=$r.FrameLatestPrice.UpBarColor:a<this.YClose?i.LineColor=$r.FrameLatestPrice.DownBarColor:i.LineColor=$r.FrameLatestPrice.UnchagneBarColor,he.IsNumber(e.LineType)&&(i.LineType=e.LineType),0==e.IsShowLine&&(i.LineType=-1),i},this.CustomFixedCoordinate=function(t){var e=Oi(this.Symbol);for(var a in t.Data){var i=t.Data[a],r=new I;if(r.Type=1,r.TextColor=i.TextColor,r.LineColor=i.Color,r.LineType=2,he.IsNumber(t.LineType)&&(r.LineType=t.LineType),0==t.IsShowLine&&(r.LineType=-1),he.IsNumber(i.Increase)){if(!he.IsNumber(this.YClose))continue;r.Value=this.YClose*(1+i.Increase)}else r.Value=i.Value;var n;n=i.Text?i.Text:r.Value.toFixed(e),"left"==t.Position?r.Message[0]=n:r.Message[1]=n,this.Frame.CustomHorizontalInfo.push(r)}},this.GetCallAuctionMaxMin=function(t,e){for(var a in t.Data){var i=t.Data[a];i&&(he.IsNumber(i.Price)&&(null==e.Max&&(e.Max=i.Price),null==e.Min&&(e.Min=i.Price),e.Max<i.Price&&(e.Max=i.Price),e.Min>i.Price&&(e.Min=i.Price)),3==t.Ver&&he.IsNumber(i.AvPrice)&&(null==e.Max&&(e.Max=i.AvPrice),null==e.Min&&(e.Min=i.AvPrice),e.Max<i.AvPrice&&(e.Max=i.AvPrice),e.Min>i.AvPrice&&(e.Min=i.AvPrice)))}},this.GetMaxMin=function(){var t=this.YClose,e=this.YClose,a=this.Data,i=!1;this.SourceData&&(a=this.SourceData,i=!0);for(var r in a.Data){var n=null;if(i){var s=a.Data[r];n=s.Before?s.Before.Close:s.Close}else n=a.Data[r];null!=n&&(t<n&&(t=n),e>n&&(e=n))}if(this.AverageData)for(var r in this.AverageData.Data)null!=this.AverageData.Data[r]&&(t<this.AverageData.Data[r]&&(t=this.AverageData.Data[r]),e>this.AverageData.Data[r]&&(e=this.AverageData.Data[r]));for(var r in this.OverlayChartPaint){var s=this.OverlayChartPaint[r],o=s.GetMaxMin();o.Max&&o.Max>t&&(t=o.Max),o.Min&&o.Min<e&&(e=o.Min)}1==this.SplitType&&this.LimitPrice&&(t<this.LimitPrice.Max&&(t=this.LimitPrice.Max),e>this.LimitPrice.Min&&(e=this.LimitPrice.Min)),he.IsNumber(this.High)&&he.IsNumber(this.Low)&&(t<this.High&&(t=this.High),e>this.Low&&(e=this.Low));var o={Max:null,Min:null};if(this.IsAfterData&&this.AfterCloseData&&this.GetCallAuctionMaxMin(this.AfterCloseData,o),this.IsBeforeData&&this.BeforeOpenData&&this.GetCallAuctionMaxMin(this.BeforeOpenData,o),this.MultiDayBeforeOpenData&&this.ChartBorder.MultiDayMinute.Count>1&&this.ChartBorder.MultiDayMinute.Left>0)for(var r in this.MultiDayBeforeOpenData){var h=this.MultiDayBeforeOpenData[r];this.GetCallAuctionMaxMin(h,o)}if(this.MultiDayAfterCloseData&&this.ChartBorder.MultiDayMinute.Count>1&&this.ChartBorder.MultiDayMinute.Right>0)for(var r in this.MultiDayAfterCloseData){var h=this.MultiDayAfterCloseData[r];this.GetCallAuctionMaxMin(h,o)}return he.IsNumber(o.Max)&&t<o.Max&&(t=o.Max),he.IsNumber(o.Min)&&e>o.Min&&(e=o.Min),{Max:t,Min:e}},this.USASplit=function(t){var e=t.Max,a=t.Min;if(e==a)e+=.1*e,a-=.1*a;else{var i=c(),r=this.Frame.ChartBorder.GetHeight(),n=5*i*(e-a)/r;e+=n,a-=n,a<0&&(a=t.Min)}var s=this.SplitCount,o=(e-a)/(s-1),h=[1,.1,.01,.001,1e-4],l=Oi(this.Symbol);o<h[l]&&(o=h[l],e=a+o*s);for(var u=0;u<s;++u){var d=a+o*u;if(!this.YClose||d!=this.YClose){var f=new I;f.Value=d;var m=d.toFixed(l);if(this.IsShowLeftText&&(f.Message[0]=m),this.YClose){var C=100*(d/this.YClose-1);C>0?f.TextColor=$r.UpTextColor:C<0&&(f.TextColor=$r.DownTextColor),this.IsShowRightText&&(1==this.RightTextFormat?f.Message[1]=m:f.Message[1]=he.FormatValueString(C,2)+"%")}this.Frame.HorizontalInfo.push(f)}}if(this.YClose>a&&this.YClose<e){var f=new I;f.Value=this.YClose,f.LineType=2,$r.FrameDotSplitPen&&(f.LineColor=$r.FrameDotSplitPen);var m=this.YClose.toFixed(l);this.IsShowLeftText&&(f.Message[0]=m),this.IsShowRightText&&(1==this.RightTextFormat?f.Message[1]=m:f.Message[1]="0.00%"),this.Frame.HorizontalInfo.push(f)}this.Frame.HorizontalInfo.sort(function(t,e){return t.Value-e.Value}),this.Frame.HorizontalMax=e,this.Frame.HorizontalMin=a},this.DefaultSplit=function(t){var e=t.Max,a=t.Min;if(this.YClose==e&&this.YClose==a)e=this.YClose+.1*this.YClose,a=this.YClose-.1*this.YClose;else{var i=Math.max(Math.abs(this.YClose-e),Math.abs(this.YClose-a));e=this.YClose+i,a=this.YClose-i,a<0&&(a=t.Min)}var r=c(),n=this.Frame.ChartBorder.GetChartWidth(),s=n<450*r;Fr.Chart.Log("[FrameSplitMinutePriceY]max="+e+" min="+a+" isPhoneModel="+s);var o=this.SplitCount,h=(e-a)/(o-1),l=[1,.1,.01,.001,1e-4],u=Oi(this.Symbol);s&&an.IsSHSZIndex(this.Symbol)&&(u=0),h<l[u]&&(h=l[u],e=this.YClose+h*(o-1)/2,a=this.YClose-h*(o-1)/2);for(var d=0;d<o;++d){var f=a+h*d,m=new I;this.Frame.HorizontalInfo[d]=m,m.Value=f;var C=f.toFixed(u);if(this.IsShowLeftText&&(m.Message[0]=C),f==this.YClose&&(m.LineType=2,$r.FrameDotSplitPen&&(m.LineColor=$r.FrameDotSplitPen)),this.YClose){var p=100*(f/this.YClose-1);p>0?m.TextColor=$r.UpTextColor:p<0&&(m.TextColor=$r.DownTextColor),this.IsShowRightText&&(1==this.RightTextFormat?m.Message[1]=C:m.Message[1]=he.FormatValueString(p,2)+"%")}}this.Frame.HorizontalMax=e,this.Frame.HorizontalMin=a}}function fe(){this.newMethod=he,this.newMethod(),delete this.newMethod,this.ShowText=!0,this.Symbol=null,this.DayCount=1,this.ShowDateFormate=1,this.Operator=function(){this.Frame.VerticalInfo=[];var t=(this.Frame.XPointCount,this.Frame.ChartBorder.GetWidth());!0===this.Frame.IsHScreen&&(t=this.Frame.ChartBorder.GetHeight()),t/=c();var e=nn,a=e.GetCoordinateData(this.Symbol,t),i=a.Count,r=a.MiddleCount>0?a.MiddleCount:parseInt(i/2),n=a.Data;if(this.Frame.XPointCount=i*this.DayCount,this.Frame.MinuteCount=i,this.Frame.VerticalInfo=[],this.DayCount<=1)for(var s in n){var o=new I;$r.Minute.FrameSplitTextColor&&(o.TextColor=$r.Minute.FrameSplitTextColor),o.Value=n[s][0],this.ShowText&&(o.Message[0]=n[s][3]),this.Frame.VerticalInfo[s]=o}else for(var s=this.DayData.length-1,h=0;s>=0;--s,++h){var o=new I;o.Value=h*i+r,o.LineType=-1,this.ShowText&&(o.Message[0]=he.FormatDateString(this.DayData[s].Date,0==this.ShowFormate?"YYYY-MM-DD":"MM-DD"),o.BG={Index:{Start:h*i+1,End:(h+1)*i-1},Date:this.DayData[s].Date}),this.Frame.VerticalInfo.push(o);var o=new I;o.Value=(h+1)*i,this.Frame.VerticalInfo.push(o)}if(this.GetEventCallback){var l=this.GetEventCallback(Nr.ON_SPLIT_XCOORDINATE);if(l&&l.Callback){var u={ID:this.Frame.Identify,Frame:this.Frame};l.Callback(l,u,this)}}}}function me(){this.newMethod=he,this.newMethod(),delete this.newMethod,this.ShowText=!0,this.Symbol,this.MinTextDistance=50*c(),this.MinBarDistance=5,this.Operator=function(){if(null!=this.Frame.Data&&null!=this.Frame.XData){this.Frame.VerticalInfo=[];for(var t=this.Frame.Data.DataOffset,e=this.Frame.XPointCount,a=0,i=t;a<e&&i<this.Frame.Data.Data.length;++a,++i){var r=new I;r.Value=i-t,this.ShowText&&(r.Message[0]=this.Frame.XData[a]),this.Frame.VerticalInfo.push(r),distance=0}}}}function Ce(){this.newMethod=he,this.newMethod(),delete this.newMethod,this.ShowText=!0,this.SplitCount=3,this.Symbol,this.LineType=3,this.Operator=function(){var t=this.Frame.VerticalRange;if(t){this.Frame.VerticalInfo=[];var e=2;this.Symbol&&(e=Oi(this.Symbol));var a=t.Max,i=t.Min;if(t.Bid)for(var r=(t.Bid.Max-i)/this.SplitCount,n=0;n<this.SplitCount;++n){var s=new I;s.Value=i+r*n,s.Value<=0||(he.IsNumber(this.LineType)&&(s.LineType=this.LineType),this.ShowText&&(s.Message[0]=s.Value.toFixed(e)),this.Frame.VerticalInfo.push(s))}var s=new I;if(s.Value=t.Center,this.Frame.VerticalInfo.push(s),t.Ask)for(var r=(a-t.Ask.Min)/this.SplitCount,n=1;n<=this.SplitCount;++n){var s=new I;s.Value=t.Ask.Min+r*n,he.IsNumber(this.LineType)&&(s.LineType=this.LineType),this.ShowText&&(s.Message[0]=s.Value.toFixed(e)),this.Frame.VerticalInfo.push(s)}}}}function pe(){this.Frame,this.Value,this.Point,this.ClientPos,this.BeforOpeneData,this.AfterCloseData,this.X,this.Item,this.DataIndex,this.DayIndex,this.MultiDayBeforeOpenData,this.MultiDayAfterCloseData,this.Operator=function(){return this.Item=null,this.DataIndex=null,this.DayIndex=null,2==this.ClientPos?this.GetBeforeOpenXIndex():3==this.ClientPos?this.GetAfterCloseXIndex():this.ClientPos>=200&&this.ClientPos<=299?this.GetMultiDayBeforeOpenXIndex():this.ClientPos>=300&&this.ClientPos<=399&&this.GetMultiDayAfterCloseXIndex()},this.GetBeforeOpenXIndex=function(){if(!he.IsNumber(this.Value))return!1;if(!this.BeforeOpenData||!this.BeforeOpenData.Data)return!1;var t=this.Frame.GetLeftExtendXData(this.Value,this.BeforeOpenData);if((t=parseInt(t.toFixed(0)))>=0&&t<this.BeforeOpenData.Data.length){var e=this.BeforeOpenData.Data[t];if(he.IsNumber(e.Price))return this.Item=e,this.X=this.Value,this.DataIndex=t,!0}t<0?t=0:t>=this.BeforeOpenData.Data.length&&(t=this.BeforeOpenData.Data.length-1);for(var a=-1,i=t;i>=0;--i){var e=this.BeforeOpenData.Data[i];if(he.IsNumber(e.Price)){a=i;break}}if(a<0)for(var i=t+1;i<this.BeforeOpenData.Data.length;++i){var e=this.BeforeOpenData.Data[i];if(he.IsNumber(e.Price)){a=i;break}}return!(a<0)&&(this.Item=e,this.DataIndex=a,this.X=this.Frame.GetLeftExtendXFromIndex(a,this.BeforeOpenData),!0)},this.GetMultiDayBeforeOpenXIndex=function(){if(!this.MultiDayBeforeOpenData||!he.IsNonEmptyArray(this.MultiDayBeforeOpenData))return!1;var t=this.ClientPos-200;if(t<0||t>=this.MultiDayBeforeOpenData.length)return!1;var e=this.MultiDayBeforeOpenData[t],a=this.Frame.GetLeftExtendXData(this.Value,this.MultiDayBeforeOpenData);if(!a||!he.IsNumber(a.DataIndex))return!1;var i=parseInt(a.DataIndex.toFixed(0)),t=a.DayIndex;if(i>=0&&i<e.Data.length){var r=e.Data[i];if(he.IsNumber(r.Price))return this.Item=r,this.X=this.Value,this.DataIndex=i,this.DayIndex=t,!0}i<0?i=0:i>=e.Data.length&&(i=e.Data.length-1);for(var n=-1,s=i;s>=0;--s){var r=e.Data[s];if(he.IsNumber(r.Price)){n=s;break}}return!(n<0)&&(this.Item=r,this.DataIndex=n,this.DayIndex=t,this.X=this.Frame.GetLeftExtendXFromIndex(n,e),!0)},this.GetAfterCloseXIndex=function(){if(!he.IsNumber(this.Value))return!1;if(!this.AfterCloseData||!this.AfterCloseData.Data)return!1;var t=this.Frame.GetRightExtendXData(this.Value,this.AfterCloseData);if((t=parseInt(t.toFixed(0)))>=0&&t<this.AfterCloseData.Data.length){var e=this.AfterCloseData.Data[t];if(he.IsNumber(e.Price))return this.Item=e,this.X=this.Value,this.DataIndex=t,!0}t<0?t=0:t>=this.AfterCloseData.Data.length&&(t=this.AfterCloseData.Data.length-1);for(var a=-1,i=t;i>=0;--i){var e=this.AfterCloseData.Data[i];if(he.IsNumber(e.Price)){a=i;break}}if(a<0)for(var i=t+1;i<this.AfterCloseData.Data.length;++i){var e=this.AfterCloseData.Data[i];if(he.IsNumber(e.Price)){a=i;break}}return!(a<0)&&(this.Item=e,this.DataIndex=a,this.X=this.Frame.GetRightExtendXFromIndex(a,this.AfterCloseData),!0)},this.GetMultiDayAfterCloseXIndex=function(){if(this.MultiDayAfterCloseData&&he.IsNonEmptyArray(this.MultiDayAfterCloseData)){var t=this.ClientPos-300;if(!(t<0||t>=this.MultiDayAfterCloseData.length)){var e=this.MultiDayAfterCloseData[t],a=this.Frame.GetRightExtendXData(this.Value,this.MultiDayAfterCloseData),i=parseInt(a.DataIndex.toFixed(0)),t=a.DayIndex;if(i>=0&&i<e.Data.length){var r=e.Data[i];if(he.IsNumber(r.Price))return this.Item=r,this.X=this.Value,this.DataIndex=i,this.DayIndex=t,!0}i<0?i=0:i>=e.Data.length&&(i=e.Data.length-1);for(var n=-1,s=i;s>=0;--s){var r=e.Data[s];if(he.IsNumber(r.Price)){n=s;break}}return!(n<0)&&(this.Item=r,this.DataIndex=n,this.DayIndex=t,this.X=this.Frame.GetRightExtendXFromIndex(n,e),!0)}}}}function De(){this.ClassName="ChartCorssCursor",this.Frame,this.Canvas,this.HPenColor=$r.CorssCursorHPenColor,this.HPenType=0,this.VPenColor=$r.CorssCursorVPenColor,this.VPenType=0,this.VLineType=0,this.Font=$r.CorssCursorTextFont,this.TextColor=$r.CorssCursorTextColor,this.TextBGColor=$r.CorssCursorBGColor,this.BorderColor=$r.CorssCursorBorderColor,this.XRangeBGColor=$r.CorssCursorXRangeBGColor,this.TextHeight=20,this.LastPoint,this.CursorIndex,this.IsOnlyDrawKLine=!1,this.IsOnlyDrawMinute=!1,this.IsFixXLastTime=!1,this.IsDrawXRangeBG=!1,this.PointX,this.PointY,this.StringFormatX,this.StringFormatY,this.ShowTextMode={Left:1,Right:1,Bottom:1},this.TextFormat={Right:0},this.IsShowCorss=!0,this.IsShow=!0,this.IsShowClose=!1,this.ClientPos=-1,this.CallAcutionXOperator,this.RightButton={Enable:!1,Rect:null,BGColor:$r.CorssCursor.RightButton.BGColor,PenColor:$r.CorssCursor.RightButton.PenColor,Icon:$r.CorssCursor.RightButton.Icon},this.Close=null,this.Status=0,this.ReloadResource=function(t){this.Font=$r.CorssCursorTextFont,this.HPenColor=$r.CorssCursorHPenColor,this.VPenColor=$r.CorssCursorVPenColor,this.TextColor=$r.CorssCursorTextColor,this.TextBGColor=$r.CorssCursorBGColor,this.BorderColor=$r.CorssCursorBorderColor,this.XRangeBGColor=$r.CorssCursorXRangeBGColor},this.GetCloseYPoint=function(t){if(!this.StringFormatX.Data)return null;var e=this.StringFormatX.Data;if(!e.Data||e.Data.length<=0)return null;var a=e.DataOffset+t;if(a>=e.Data.length&&(a=e.Data.length-1),a<0)return null;var i=e.Data[a];return i?(this.Close=i.Close,this.Frame.GetYFromData(this.Close)):null},this.GetMinuteCloseYPoint=function(t){if(!he.IsNumber(t))return null;if(t=parseInt(t),!this.StringFormatX.Data)return null;var e=this.StringFormatX.Data;if(!e.Data||e.Data.length<=0)return null;var a=e.DataOffset+t;if(a>=e.Data.length&&(a=e.Data.length-1),a<0)return null;var i=e.Data[a];return he.IsNumber(t)?(this.Close=i,this.Frame.GetYFromData(this.Close)):null},this.GetDateTimeRange=function(t,e){if(!he.IsNumber(t))return null;t=parseInt(t);var a=this.StringFormatX.Data;if(!a.Data||a.Data.length<=0)return null;var i=a.DataOffset+t;if(i>=a.Data.length||i<0)return null;if(!this.Frame||!this.Frame.SubFrame[0]||!this.Frame.SubFrame[0].Frame)return null;var r=this.Frame.SubFrame[0].Frame,n=r.DataWidth,s=r.DistanceWidth,o=r.XPointCount,h=a.Data[i];if(!h)return null;for(var l=1e6*h.Date,u=100*parseInt(h.Time/100),c=l+u,d=l+u+59,f=i,m=i;m<a.Data.length;++m){var C=a.Data[m],p=1e6*C.Date+C.Time;if(p>d)break;if(m-a.DataOffset>=o)break;f=m}for(var D=i,m=i;m>=0&&m>=a.DataOffset;--m){var C=a.Data[m],p=1e6*C.Date+C.Time;if(p<c)break;D=m}var v={StartIndex:D,EndIndex:f};return v.XStart=this.Frame.GetXFromIndex(D-a.DataOffset),v.XEnd=this.Frame.GetXFromIndex(f-a.DataOffset),v.XStart-=(s+n)/2,v.XEnd+=(s+n)/2,v},this.FixMinuteLastTimeXPoint=function(t){if(!he.IsNumber(t))return null;if(t=parseInt(t),!this.StringFormatX.Data)return null;var e=this.StringFormatX.Data;if(!e.Data||e.Data.length<=0)return null;var a=e.DataOffset+t;return a<e.Data.length?null:(a=e.Data.length-1,a-=e.DataOffset,{X:this.Frame.GetXFromIndex(a),Index:a})},this.PtInClient=function(t,e){if(this.Canvas.beginPath(),!0===this.Frame.IsHScreen){var a=this.Frame.ChartBorder.GetHScreenBorder();this.Canvas.rect(a.Left,a.TopEx,a.Right-a.Left,a.BottomEx-a.TopEx)}else{var a=this.Frame.ChartBorder.GetBorder();this.Canvas.rect(a.LeftEx,a.Top,a.RightEx-a.LeftEx,a.Bottom-a.Top)}return this.Canvas.isPointInPath(t,e)?1:this.Frame.ChartBorder.LeftExtendWidth>10&&(this.Canvas.beginPath(),!0===this.Frame.IsHScreen?this.Canvas.rect(a.Left,a.Top,a.Right-a.Left,a.TopEx-a.Top):this.Canvas.rect(a.Left,a.Top,a.LeftEx-a.Left,a.Bottom-a.Top),this.Canvas.isPointInPath(t,e))?2:this.Frame.ChartBorder.RightExtendWidth>10&&(this.Canvas.beginPath(),!0===this.Frame.IsHScreen?this.Canvas.rect(a.Left,a.BottomEx,a.Right-a.Left,a.Bottom-a.BottomEx):this.Canvas.rect(a.RightEx,a.Top,a.Right-a.RightEx,a.Bottom-a.Top),this.Canvas.isPointInPath(t,e))?3:-1},this.GetFontHeight=function(t){return d(this.Canvas,t,"擎")},this.Draw=function(){if(this.Status=0,this.RightButton.Rect=null,this.LastPoint){this.Close=null;var t=this.LastPoint.X,e=this.LastPoint.Y,a=this.PtInClient(t,e);if(this.PointY=null,this.PointY,this.ClientPos=a,!(a<=0)){if(!0===this.Frame.IsHScreen)return void this.HScreenDraw();var i=this.Frame.ChartBorder.GetBorder(),r=i.Left,n=i.Right,s=i.TopTitle,o=i.Bottom,h=this.Frame.ChartBorder.Right,l=i.ChartWidth;if(this.IsOnlyDrawKLine){if(t=this.Frame.GetXFromIndex(this.CursorIndex),this.IsShowClose){var u=this.GetCloseYPoint(this.CursorIndex);null!=u&&(e=u)}}else if(this.IsOnlyDrawMinute){var u=this.GetMinuteCloseYPoint(this.CursorIndex);null!=u&&(e=u)}if(this.CallAcutionXOperator&&(this.CallAcutionXOperator.Value=t,this.CallAcutionXOperator.Point={X:t,Y:e},this.CallAcutionXOperator.ClientPos=a,this.CallAcutionXOperator.Operator()&&(t=this.CallAcutionXOperator.X)),this.IsFixXLastTime){var d=this.FixMinuteLastTimeXPoint(this.CursorIndex);d&&(t=d.X,this.CursorIndex=d.Index)}if(this.PointY=[[r,e],[n,e]],this.PointX=[[t,s],[t,o]],this.IsShowCorss){var f=null;this.IsDrawXRangeBG&&(f=this.GetDateTimeRange(this.CursorIndex));var m=c();if(1!=this.HPenType&&0!=this.HPenType||(this.Canvas.strokeStyle=this.HPenColor,0==this.HPenType&&this.Canvas.setLineDash([3*m,2*m]),this.Canvas.beginPath(),this.Canvas.moveTo(r,D(e)),this.Canvas.lineTo(n,D(e)),this.Canvas.stroke(),0==this.HPenType&&this.Canvas.setLineDash([])),this.Canvas.save(),this.Canvas.strokeStyle=this.VPenColor,0==this.VPenType)this.Canvas.setLineDash([3*m,2*m]);else if(2==this.VPenType){var C=this.Frame.SubFrame[0].Frame.DataWidth;C>2*m&&(this.Canvas.lineWidth=C)}if(this.Canvas.beginPath(),1==this.VLineType)f&&(this.Canvas.fillStyle=this.XRangeBGColor,this.Canvas.fillRect(f.XStart,i.Top,f.XEnd-f.XStart,i.Bottom-i.Top)),this.Canvas.moveTo(D(t),i.Top),this.Canvas.lineTo(D(t),i.Bottom);else if(this.Frame.SubFrame.length>0)for(var p in this.Frame.SubFrame){var v=this.Frame.SubFrame[p].Frame,S=v.ChartBorder.GetBorder();s=S.TopTitle,o=S.Bottom,f&&(this.Canvas.fillStyle=this.XRangeBGColor,this.Canvas.fillRect(f.XStart,s,f.XEnd-f.XStart,o-s)),this.Canvas.moveTo(D(t),s),this.Canvas.lineTo(D(t),o)}else this.Canvas.moveTo(D(t),s),this.Canvas.lineTo(D(t),o);this.Canvas.stroke(),this.Canvas.restore()}var T=(this.Frame.GetXData(t),{}),y=this.Frame.GetYData(e,T);(this.IsOnlyDrawMinute||this.IsShowClose)&&null!=this.Close&&(y=this.Close),this.StringFormatX.Value=this.CursorIndex,this.StringFormatX.Point={X:t,Y:e},this.StringFormatX.ClientPos=a,this.StringFormatY.Value=y,this.StringFormatY.RValue=T.RightYValue,this.StringFormatY.FrameID=T.FrameID,this.StringFormatY.Point={X:t,Y:e},this.StringFormatY.ClientPos=a,this.Canvas.font=this.Font;var I=this.GetFontHeight();if(I>this.TextHeight&&(this.TextHeight=I),(1==this.ShowTextMode.Left&&this.Frame.ChartBorder.Left>=30||2==this.ShowTextMode.Left||1==this.ShowTextMode.Right&&this.Frame.ChartBorder.Right>=30||2==this.ShowTextMode.Right)&&this.StringFormatY.Operator()){var x=this.StringFormatY.Text;this.Canvas.font=this.Font;var L=this.Canvas.measureText(x).width+4,M={Y:e,YValue:y,FrameID:T.FrameID};if(this.Frame.ChartBorder.Left>=30&&1==this.ShowTextMode.Left?r<L?(this.DrawTextBGRect(D(2),D(e-this.TextHeight/2),g(L),g(this.TextHeight)),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(x,4,e,L)):(this.DrawTextBGRect(r-2,e-this.TextHeight/2,-L,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(x,r-4,e,L)):2==this.ShowTextMode.Left&&(this.DrawTextBGRect(r,e-this.TextHeight/2,L,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(x,r+2,e,L)),this.StringFormatY.PercentageText&&0==this.TextFormat.Right&&(x=this.StringFormatY.PercentageText+"%",L=this.Canvas.measureText(x).width+4),this.StringFormatY.RText){x=this.StringFormatY.RText;var L=this.Canvas.measureText(x).width+4}if(this.Frame.ChartBorder.Right>=30&&1==this.ShowTextMode.Right){var _=!1,b=null;if(T.FrameID>=0){var v=this.Frame.SubFrame[T.FrameID];_=v.OverlayIndex.length>0,b=v.Interval}if(_&&L>b){var w=n+b;w>l&&(w=l),this.DrawTextBGRect(w-2-L,e-this.TextHeight/2,L,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(x,w-4,e,L)}else h<L?(this.DrawTextBGRect(l-2-L,e-this.TextHeight/2,L,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(x,l-4,e,L),this.RightButton.Enable&&this.DrawRightButton(e-this.TextHeight/2,l-2-L,this.TextHeight,this.TextHeight,M)):(this.DrawTextBGRect(n+2,e-this.TextHeight/2,L,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(x,n+4,e,L),this.RightButton.Enable&&this.DrawRightButton(e-this.TextHeight/2,n+2,this.TextHeight,this.TextHeight,M));if(this.StringFormatY.RExtendText&&this.StringFormatY.RExtendText.length>0){var F=0;for(var p in this.StringFormatY.RExtendText){var E=this.StringFormatY.RExtendText[p],A="--.--";E.YText?A=E.YText:he.IsNumber(E.Y)&&(A=E.Y.toFixed(0));var N=this.Canvas.measureText(A).width+4;h<N?(this.DrawTextBGRect(l-2-N,e+F+this.TextHeight/2,N,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=E.TextColor,this.Canvas.fillText(A,l-4,e+F+this.TextHeight,N)):(this.DrawTextBGRect(n+2,e+F+this.TextHeight/2,N,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=E.TextColor,this.Canvas.fillText(A,n+4,e+F+this.TextHeight,N)),F+=this.TextHeight}}}else if(2==this.ShowTextMode.Right){this.Canvas.fillStyle=this.TextBGColor;var O=n-L;this.DrawTextBGRect(O,e-this.TextHeight/2,L,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(x,O+2,e,L),this.RightButton.Enable&&this.DrawRightButton(e-this.TextHeight/2,O,this.TextHeight,this.TextHeight,M)}}if(1==this.ShowTextMode.Bottom&&this.StringFormatX.Operator()){var x=this.StringFormatX.Text;this.Canvas.font=this.Font,this.Canvas.fillStyle=this.TextBGColor;var L=this.Canvas.measureText(x).width+4,P=o+2+this.TextHeight/2;t-L/2<3?(this.DrawTextBGRect(t-1,o+2,L,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(x,t+1,P,L)):t+L/2>=n?(this.DrawTextBGRect(n-L,o+2,L,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(x,n-2,P,L)):(this.DrawTextBGRect(t-L/2,o+2,L,this.TextHeight),this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(x,t,P,L))}if(T.FrameID>=0){var v=this.Frame.SubFrame[T.FrameID],R=!1;this.Frame.AutoRightBorder&&(R=!0);var k=n;R&&(k=n+this.Frame.AuotRightWidth),this.Canvas.font=this.Font;for(var p in v.OverlayIndex){var E=v.OverlayIndex[p];if(!1!==E.Frame.IsShow){if(R||(k+=v.Interval),k+30>l)break;for(var y=E.Frame.GetYData(e),p=2;p>=0;--p){var x=he.FormatValueString(y,p),L=this.Canvas.measureText(x).width+4;if(L<v.Interval)break}this.Canvas.fillStyle=this.TextBGColor,this.Canvas.fillRect(k+2,e-this.TextHeight/2,L,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(x,k+4,e,L),R&&(k+=E.RightWidth.Width)}}}this.Status=1}}},this.DrawRightButton=function(t,e,a,i,r){this.Canvas.fillStyle=this.RightButton.BGColor;var n={Left:e-a,Top:t,Width:a,Height:i};this.RightButton.Rect=n,this.RightButton.Data=r,this.Canvas.fillRect(D(n.Left+1),D(n.Top),g(n.Width),g(n.Height));var s=c(),o=n.Top+3+(n.Height-6)/2,h=n.Left+3+(n.Width-6)/2;if(this.RightButton.Icon){var l=this.RightButton.Icon;this.Canvas.font=l.Size*s+"px "+l.Family,this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=l.Color,this.Canvas.fillText("",h,o)}else{this.Canvas.strokeStyle=this.RightButton.PenColor;var u=n.Left+3,d=n.Top+3;this.Canvas.save(),this.Canvas.linewidth=1*s,this.Canvas.beginPath(),this.Canvas.moveTo(D(u),D(o)),this.Canvas.lineTo(D(u+n.Width-6),D(o)),this.Canvas.moveTo(D(h),D(d)),this.Canvas.lineTo(D(h),D(d+n.Height-6)),this.Canvas.stroke(),this.Canvas.restore()}},this.PtInButton=function(t,e){if(!this.RightButton.Enable)return null;if(!this.RightButton.Rect)return null;var a=this.RightButton.Rect;return this.Canvas.beginPath(),this.Canvas.rect(a.Left,a.Top,a.Width,a.Height),this.Canvas.isPointInPath(t,e)?{Data:this.RightButton.Data,Rect:a}:void 0},this.DrawTextBGRect=function(t,e,a,i){this.Canvas.fillStyle=this.TextBGColor,this.Canvas.fillRect(D(t),D(e),g(a),g(i)),this.BorderColor&&(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.strokeRect(D(t),D(e),g(a),g(i)))},this.HScreenDraw=function(){var t=this.LastPoint.X,e=this.LastPoint.Y;this.IsOnlyDrawKLine&&(e=this.Frame.GetXFromIndex(this.CursorIndex));var a=this.Frame.ChartBorder.GetHScreenBorder(),i=a.Left,r=a.Right,n=a.Top,s=a.Bottom,o=this.Frame.ChartBorder.Bottom;if(this.CallAcutionXOperator&&(this.CallAcutionXOperator.Value=e,this.CallAcutionXOperator.Point={X:t,Y:e},this.CallAcutionXOperator.ClientPos=this.ClientPos,this.CallAcutionXOperator.Operator()&&(e=this.CallAcutionXOperator.X)),this.PointY=[[i,e],[r,e]],this.PointX=[[t,n],[t,s]],this.IsShowCorss){var h=c();if(this.Canvas.save(),this.Canvas.strokeStyle=this.HPenColor,0==this.HPenType&&this.Canvas.setLineDash([3*h,2*h]),this.Canvas.beginPath(),this.Canvas.moveTo(D(t),n),this.Canvas.lineTo(D(t),s),this.Canvas.stroke(),this.Canvas.restore(),this.Canvas.save(),this.Canvas.strokeStyle=this.VPenColor,0==this.VPenType)this.Canvas.setLineDash([3*h,2*h]);else if(2==this.VPenType){var l=this.Frame.SubFrame[0].Frame.DataWidth;l>2*h&&(this.Canvas.lineWidth=l)}if(this.Canvas.beginPath(),1==this.VLineType)this.Canvas.moveTo(i,D(e)),this.Canvas.lineTo(r,D(e));else if(this.Frame.SubFrame.length>0)for(var u in this.Frame.SubFrame){var d=this.Frame.SubFrame[u].Frame,f=d.ChartBorder.GetHScreenBorder();this.Canvas.moveTo(f.Left,D(e)),this.Canvas.lineTo(f.RightEx,D(e))}else this.Canvas.moveTo(i,D(e)),this.Canvas.lineTo(r,D(e));this.Canvas.stroke(),this.Canvas.restore()}var m=this.Frame.GetXData(e),C={},p=this.Frame.GetYData(t,C);if(this.StringFormatX.Value=m,this.StringFormatX.Point={X:t,Y:e},this.StringFormatX.ClientPos=this.ClientPos,this.StringFormatY.Value=p,this.StringFormatY.FrameID=C.FrameID,this.StringFormatY.Point={X:t,Y:e},this.StringFormatY.ClientPos=this.ClientPos,(1==this.ShowTextMode.Left&&this.Frame.ChartBorder.Top>=30||2==this.ShowTextMode.Left||1==this.ShowTextMode.Right&&this.Frame.ChartBorder.Bottom>=30||2==this.ShowTextMode.Right)&&this.StringFormatY.Operator()){var v=this.StringFormatY.Text;this.Canvas.font=this.Font;var g=this.Canvas.measureText(v).width+4;if(this.Frame.ChartBorder.Top>=30&&1==this.ShowTextMode.Left){var S=t,T=n;this.Canvas.save(),this.Canvas.translate(S,T),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillStyle=this.TextBGColor,n>=g?(this.Canvas.fillRect(0,-this.TextHeight/2,-g,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(v,-2,0,g)):(this.Canvas.fillRect(g-n,-this.TextHeight/2,-g,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(v,g-n-2,0,g)),this.Canvas.restore()}else if(2==this.ShowTextMode.Left){var S=t,T=n;this.Canvas.save(),this.Canvas.translate(S,T),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillStyle=this.TextBGColor,this.Canvas.fillRect(0,-this.TextHeight/2,g,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(v,2,0,g),this.Canvas.restore()}if(this.StringFormatY.RText){v=this.StringFormatY.RText;var g=this.Canvas.measureText(v).width+4}if(this.Frame.ChartBorder.Bottom>=30&&1==this.ShowTextMode.Right){var S=t,T=s;if(this.Canvas.save(),this.Canvas.translate(S,T),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillStyle=this.TextBGColor,o>g?(this.Canvas.fillRect(0,-this.TextHeight/2,g,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(v,2,0,g)):(this.Canvas.fillRect(o-g,-this.TextHeight/2,g,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(v,o-g+2,0,g)),this.StringFormatY.RExtendText&&this.StringFormatY.RExtendText.length>0){var y=0;for(var u in this.StringFormatY.RExtendText){var I=this.StringFormatY.RExtendText[u],x="--.--";I.YText?x=I.YText:he.IsNumber(I.Y)&&(x=I.Y.toFixed(0));var L=this.Canvas.measureText(x).width+4;if(this.Canvas.fillStyle=I.TextBGColor,o>L)this.Canvas.fillRect(0,y+this.TextHeight/2,L,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=I.TextColor,this.Canvas.fillText(x,2,y+this.TextHeight,L);else{var M=o-L;this.Canvas.fillRect(M,y+this.TextHeight/2,L,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=I.TextColor,this.Canvas.fillText(x,M+2,y+this.TextHeight,L)}y+=this.TextHeight}}this.Canvas.restore()}else if(2==this.ShowTextMode.Right){var S=t,T=s;this.Canvas.save(),this.Canvas.translate(S,T),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillStyle=this.TextBGColor,this.Canvas.fillRect(0,-this.TextHeight/2,-g,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(v,-2,0,g),this.Canvas.restore()}}if(1===this.ShowTextMode.Bottom&&this.StringFormatX.Operator()){var v=this.StringFormatX.Text;this.Canvas.font=this.Font,this.Canvas.fillStyle=this.TextBGColor;var g=this.Canvas.measureText(v).width+4;if(e-g/2<3){var S=i,T=e;this.Canvas.save(),this.Canvas.translate(S,T),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillRect(0,0,g,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(v,2,this.TextHeight/2,g),this.Canvas.restore()}else if(e+g/2>=s){var S=i,T=e;this.Canvas.save(),this.Canvas.translate(S,T),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillRect(-g,0,g,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(v,-2,this.TextHeight/2,g),this.Canvas.restore()}else{var S=i,T=e;this.Canvas.save(),this.Canvas.translate(S,T),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillRect(-g/2,0,g,this.TextHeight),this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(v,0,this.TextHeight/2,g),this.Canvas.restore()}}this.Status=1}}function ve(){this.Frame,this.HQChart,this.Canvas,this.Data,this.Symbol,this.HPenType=0,this.VPenType=0,this.LineDash=$r.DepthCorss.LineDash,this.IsShowTooltip=!0,this.AskColor=$r.DepthCorss.AskColor.Line,this.BidColor=$r.DepthCorss.BidColor.Line,this.LineWidth=$r.DepthCorss.LineWidth,this.ClassName="DepthChartCorssCursor",this.Tooltip={LineHeight:$r.DepthCorss.Tooltip.LineHeight,Border:{Top:$r.DepthCorss.Tooltip.Border.Top,Left:$r.DepthCorss.Tooltip.Border.Left,Bottom:$r.DepthCorss.Tooltip.Border.Bottom,Center:$r.DepthCorss.Tooltip.Border.Center},Font:$r.DepthCorss.Tooltip.Font,TextColor:$r.DepthCorss.Tooltip.TextColor,BGColor:$r.DepthCorss.Tooltip.BGColor},this.Font=$r.CorssCursorTextFont,this.TextColor=$r.CorssCursorTextColor,this.TextBGColor=$r.CorssCursorBGColor,this.TextHeight=20,this.LastPoint,this.PointX,this.PointY,this.StringFormatX,this.StringFormatY,this.IsShowCorss=!0,this.IsShow=!0,this.GetVol=function(t,e){if(!this.Data)return null;var a=e?this.Data.Asks:this.Data.Bids;if(!a||!Array.isArray(a)||a.length<=0)return null;for(var i in a){var r=a[i];if(r.Price==t)return r.Vol}return null},this.Draw=function(){if(this.Status=0,this.LastPoint&&this.Data&&this.IsShow){var t=this.LastPoint.X,e=this.LastPoint.Y,a=!1;if(this.Canvas.beginPath(),this.Canvas.rect(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetTop(),this.Frame.ChartBorder.GetWidth(),this.Frame.ChartBorder.GetHeight()),a=this.Canvas.isPointInPath(t,e),this.PointY=null,this.PointY,a&&!0!==this.Frame.IsHScreen){var i=this.Frame.ChartBorder.GetLeft(),r=this.Frame.ChartBorder.GetRight(),n=this.Frame.ChartBorder.GetTopTitle(),s=this.Frame.ChartBorder.GetBottom(),o=(this.Frame.ChartBorder.Right,this.Frame.ChartBorder.GetChartWidth(),this.Frame.GetXData(t)),h=this.Frame.GetXFromPrice(o);if(h){var l=this.GetVol(h.Price,h.IsAsk);if(e=this.Frame.GetYFromData(l),h.Vol=l,h.Y=e,this.PointY=[[i,e],[r,e]],this.PointX=[[t,n],[t,s]],this.IsShowCorss){h.IsAsk?this.Canvas.strokeStyle=this.AskColor:this.Canvas.strokeStyle=this.BidColor;var u=this.Canvas.lineWidth,d=c();this.Canvas.lineWidth=this.LineWidth*d;var f=this.Canvas.lineWidth;if(1==this.HPenType||0==this.HPenType){0==this.HPenType&&this.Canvas.setLineDash(this.LineDash);var m=v(f,e);this.Canvas.beginPath(),this.Canvas.moveTo(i,m),this.Canvas.lineTo(r,m),this.Canvas.stroke(),0==this.HPenType&&this.Canvas.setLineDash([])}0==this.VPenType&&this.Canvas.setLineDash(this.LineDash);var C=v(f,h.X);this.Canvas.beginPath(),this.Canvas.moveTo(C,n),this.Canvas.lineTo(C,s),this.Canvas.stroke(),0==this.VPenType&&this.Canvas.setLineDash([]),this.Canvas.lineWidth=u}if(this.HQChart){var p=this.HQChart.GetEventCallback(Nr.ON_DRAW_DEPTH_TOOLTIP);p&&p.Callback(p,h,this)}this.IsShowTooltip&&this.DrawTooltip(h)}}}},this.DrawTooltip=function(t){var e=(t.Price,t.Vol,c()),a=this.Tooltip.Border;this.Canvas.font=this.Tooltip.Font;var i=2;this.Symbol&&(i=Oi(this.Symbol));var r="擎擎: 9999.99亿 ";i>=5&&(r="擎擎: "+99.99.toFixed(i)+" "),this.Tooltip.Width=this.Canvas.measureText(r).width+a.Left*e,this.Tooltip.Height=this.Tooltip.LineHeight*e*4+a.Top*e+a.Bottom*e+a.Center*e;var n=this.Frame.ChartBorder.GetRight(),s=this.Frame.ChartBorder.GetTop(),o=t.X+2*e,h=t.Y-this.Tooltip.Height-2*e;o+this.Tooltip.Width>=n&&(o=t.X-this.Tooltip.Width-2*e),h<s&&(h=t.Y+2*e),this.Canvas.fillStyle=this.Tooltip.BGColor,this.Canvas.fillRect(o,h,this.Tooltip.Width,this.Tooltip.Height);var l=a.Left*e+o,u=a.Top*e+h;this.Canvas.textBaseline="top",this.Canvas.textAlign="left",this.Canvas.fillStyle=this.Tooltip.TextColor;var d=en.GetText("Depth-Price",this.HQChart.LanguageID);this.Canvas.fillText(d,l,u),u+=this.Tooltip.LineHeight*e,this.Canvas.fillText(t.Price.toFixed(i),l,u),u+=this.Tooltip.LineHeight*e,u+=a.Center*e;var d=en.GetText("Depth-Sum",this.HQChart.LanguageID);this.Canvas.fillText(d,l,u),u+=this.Tooltip.LineHeight*e,this.Canvas.fillText(t.Vol.toFixed(4),l,u)},this.PtInButton=function(t,e){return null}}function ge(){this.Frame,this.Canvas,this.Font=$r.DefaultTextFont,this.TextColor=$r.DefaultTextColor,this.IsEnableSplash=!1,this.SplashTitle="数据加载中",this.HQChart,this.EnableSplash=function(t){if(this.IsEnableSplash=t,this.HQChart){var e=this.HQChart.GetEventCallback(Nr.ON_ENABLE_SPLASH_DRAW);if(e){var a={Enable:t};e.Callback(e,a,this)}}},this.SetTitle=function(t){this.SplashTitle=t},this.Draw=function(){if(this.IsEnableSplash){if(!0===this.Frame.IsHScreen)return void this.HScreenDraw();var t=(this.Frame.ChartBorder.GetLeft()+this.Frame.ChartBorder.GetRight())/2,e=(this.Frame.ChartBorder.GetTop()+this.Frame.ChartBorder.GetBottom())/2;this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.font=this.Font,this.Canvas.fillText(this.SplashTitle,t,e)}},this.HScreenDraw=function(){var t=(this.Frame.ChartBorder.GetLeft()+this.Frame.ChartBorder.GetRight())/2,e=(this.Frame.ChartBorder.GetTop()+this.Frame.ChartBorder.GetBottom())/2;this.Canvas.save(),this.Canvas.translate(t,e),this.Canvas.rotate(90*Math.PI/180),this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.font=this.Font,this.Canvas.fillText(this.SplashTitle,0,0),this.Canvas.restore()}}function Se(){this.Data,this.Value,this.Text,this.Operator=function(){return!1}}function Te(){this.newMethod=Se,this.newMethod(),delete this.newMethod,this.Symbol,this.FrameID,this.Frame,this.LanguageID=tn.LANGUAGE_CHINESE_ID,this.YClose,this.PercentageText,this.RValue,this.RText,this.Point,this.ClientPos=-1,this.ExtendChartPaint,this.RExtendText=[],this.BeforeOpenData,this.AfterCloseData,this.MultiDayBeforeOpenData,this.MultiDayAfterCloseData,this.GetBeforeOpen=function(){if(!this.Frame)return!1;var t=this.Frame.SubFrame[this.FrameID];if(!t||!t.Frame)return!1;var e={Max:this.BeforeOpenData.VolMax,Min:this.BeforeOpenData.VolMin},a=this.Frame.IsHScreen?this.Point.X:this.Point.Y,i=t.Frame.GetLeftExtendYData(a,!1,{Range:e});he.IsNumber(i)&&(this.RText=this.Text,this.Text=he.FormatValueString(i,2,this.LanguageID))},this.GetAfterClose=function(){if(!this.Frame)return!1;var t=this.Frame.SubFrame[this.FrameID];if(!t||!t.Frame)return!1;var e={Max:this.AfterCloseData.VolMax,Min:this.AfterCloseData.VolMin},a=this.Frame.IsHScreen?this.Point.X:this.Point.Y,i=t.Frame.GetRightExtendYData(a,!1,{Range:e});he.IsNumber(i)&&(this.RText=he.FormatValueString(i,2,this.LanguageID))},this.GetMultiDayBeforeOpen=function(){if(!this.Frame)return!1;var t=this.Frame.SubFrame[this.FrameID];if(!t||!t.Frame)return!1;if(this.MultiDayBeforeOpenData&&he.IsNonEmptyArray(this.MultiDayBeforeOpenData)){var e=this.ClientPos-200;if(e<0||e>=this.MultiDayBeforeOpenData.length)return!1;var a=this.MultiDayBeforeOpenData[e],i={Max:a.VolMax,Min:a.VolMin},r=this.Frame.IsHScreen?this.Point.X:this.Point.Y,n=t.Frame.GetLeftExtendYData(r,!1,{Range:i});he.IsNumber(n)&&(this.RText=this.Text,this.Text=he.FormatValueString(n,2,this.LanguageID))}},this.GetMultiDayAfterClose=function(){if(!this.Frame)return!1;var t=this.Frame.SubFrame[this.FrameID];if(!t||!t.Frame)return!1;if(this.MultiDayAfterCloseData&&he.IsNonEmptyArray(this.MultiDayAfterCloseData)){var e=this.ClientPos-300;if(e<0||e>=this.MultiDayAfterCloseData.length)return!1;var a=this.MultiDayAfterCloseData[e],i={Max:a.VolMax,Min:a.VolMin},r=this.Frame.IsHScreen?this.Point.X:this.Point.Y,n=t.Frame.GetRightExtendYData(r,!1,{Range:i});he.IsNumber(n)&&(this.RText=he.FormatValueString(n,2,this.LanguageID))}},this.Operator=function(){if(this.RText=null,this.RExtendText=[],he.IsString(this.RValue)&&(this.RText=this.RValue),!this.Value)return!1;this.PercentageText=null;var t=2;if(0==this.FrameID){var t=Oi(this.Symbol);this.Text=this.Value.toFixed(t),this.YClose>0&&(this.PercentageText=(100*(this.Value-this.YClose)/this.YClose).toFixed(2)),this.GetExtendPaintData(t)}else 1==this.FrameID?(this.Text=he.FormatValueString(this.Value,t,this.LanguageID),he.IsNumber(this.RValue)&&(this.RText=he.FormatValueString(this.RValue,t,this.LanguageID)),2==this.ClientPos?this.GetBeforeOpen():3==this.ClientPos?this.GetAfterClose():this.ClientPos>=200&&this.ClientPos<=299?this.GetMultiDayBeforeOpen():this.ClientPos>=300&&this.ClientPos<=399&&this.GetMultiDayAfterClose()):this.Text=he.FormatValueString(this.Value,t,this.LanguageID);return!0},this.GetExtendPaintData=function(t){var e=parseInt(this.Value*zr[t]);for(var a in this.ExtendChartPaint){var i=this.ExtendChartPaint[a];if("DepthMapPaint"==i.ClassName&&i.FrameID==this.FrameID){var r=i.GetYValueByXValue(e,t);for(var n in r)this.RExtendText.push(r[n])}}}}function ye(){this.newMethod=Se,this.newMethod(),delete this.newMethod,this.DateFormatType=0,this.LanguageID=0,this.Operator=function(){if(!he.IsNumber(this.Value))return!1;if(!this.Data)return!1;var t=this.Value;if(t=parseInt(t.toFixed(0)),this.Data.DataOffset+t>=this.Data.Data.length)return!1;var e=this.Data.Data[this.Data.DataOffset+t],a="YYYY-MM-DD";if(1==this.DateFormatType?a="YYYY/MM/DD":2==this.DateFormatType?a="YYYY/MM/DD/W":3==this.DateFormatType&&(a="DD/MM/YYYY"),this.Text=he.FormatDateString(e.Date,a,this.LanguageID),Z.IsMinutePeriod(this.Data.Period,!0)){var i=he.FormatTimeString(e.Time);this.Text=this.Text+"  "+i}else if(Z.IsSecondPeriod(this.Data.Period)){var i=he.FormatTimeString(e.Time,"HH:MM:SS");this.Text=this.Text+"  "+i}else if(Z.IsTickPeriod(this.Data.Period)){var i=he.FormatTimeString(e.Time);this.Text=this.Text+"  "+i}return!0}}function Ie(){this.newMethod=Se,this.newMethod(),delete this.newMethod,this.Frame,this.Symbol,this.Point,this.ClientPos=-1,this.BeforeOpenData,this.AfterCloseData,this.MultiDayBeforeOpenData,this.MultiDayAfterCloseData,this.GetBeforeOpen=function(){if(!this.BeforeOpenData||!this.BeforeOpenData.Data)return!1;var t=1==this.Frame.IsHScreen?this.Point.Y:this.Point.X,e=this.Frame.GetLeftExtendXData(t,this.BeforeOpenData);if((e=parseInt(e.toFixed(0)))>=this.BeforeOpenData.Data.length)return!1;var a=this.BeforeOpenData.Data[e];return this.Text=this.FormatCallAcutionDateTime(a,this.BeforeOpenData),!0},this.GetAfterClose=function(){if(!this.AfterCloseData||!this.AfterCloseData.Data)return!1;var t=1==this.Frame.IsHScreen?this.Point.Y:this.Point.X,e=this.Frame.GetRightExtendXData(t,this.AfterCloseData);if((e=parseInt(e.toFixed(0)))>=this.AfterCloseData.Data.length)return!1;var a=this.AfterCloseData.Data[e];return this.Text=this.FormatCallAcutionDateTime(a,this.AfterCloseData),!0},this.GetMultiDayBeforeOpen=function(){if(!this.MultiDayBeforeOpenData||!this.MultiDayBeforeOpenData)return!1;if(this.Frame.ChartBorder.MultiDayMinute.Count<=1||this.Frame.ChartBorder.MultiDayMinute.Left<=0)return!1;var t=1==this.Frame.IsHScreen?this.Point.Y:this.Point.X,e=this.Frame.GetLeftExtendXData(t,this.MultiDayBeforeOpenData);if(!e)return!1;if(e.DayIndex>=this.MultiDayBeforeOpenData.length)return!1;var a=this.MultiDayBeforeOpenData[e.DayIndex];if(e.DataIndex=parseInt(e.DataIndex.toFixed(0)),e.DataIndex>=a.Data.length)return!1;var i=a.Data[e.DataIndex];return this.Text=this.FormatCallAcutionDateTime(i,a),!0},this.GetMultiDayAfterClose=function(){if(!this.MultiDayAfterCloseData)return!1;if(this.Frame.ChartBorder.MultiDayMinute.Count<=1||this.Frame.ChartBorder.MultiDayMinute.Right<=0)return!1;var t=1==this.Frame.IsHScreen?this.Point.Y:this.Point.X,e=this.Frame.GetRightExtendXData(t,this.MultiDayAfterCloseData);if(!e)return!1;if(e.DayIndex>=this.MultiDayAfterCloseData.length)return!1;var a=this.MultiDayAfterCloseData[e.DayIndex];if(e.DataIndex=parseInt(e.DataIndex.toFixed(0)),e.DataIndex>=a.Data.length)return!1;var i=a.Data[e.DataIndex];return this.Text=this.FormatCallAcutionDateTime(i,a),!0},this.FormatCallAcutionDateTime=function(t,e){var a=t.Time;return 1==e.Ver?he.FormatTimeString(a,"HH:MM"):he.FormatTimeString(a,"HH:MM:SS")},this.Operator=function(){if(2==this.ClientPos)return this.GetBeforeOpen();if(3==this.ClientPos)return this.GetAfterClose();if(this.ClientPos>=200&&this.ClientPos<=299)return this.GetMultiDayBeforeOpen();if(this.ClientPos>=300&&this.ClientPos<=399)return this.GetMultiDayAfterClose();if(!he.IsNumber(this.Value))return!1;var t=Math.abs(this.Value);t=parseInt(t.toFixed(0));var e=t;this.Frame&&this.Frame.MinuteCount&&(e=t%this.Frame.MinuteCount);var a=rn,i=a.GetTimeData(this.Symbol);if(!i)return!1;e<0?e=0:e>i.length&&(e=i.length-1),this.Frame&&t>=this.Frame.XPointCount&&(e=i.length-1);var r=i[e];return this.Text=he.FormatTimeString(r),!0}}function xe(){this.newMethod=Se,this.newMethod(),delete this.newMethod,this.Symbol,this.UpColor=$r.UpTextColor,this.DownColor=$r.DownTextColor,this.UnchagneColor=$r.UnchagneTextColor,this.VolColor=$r.Title.VolColor,this.AmountColor=$r.Title.AmountColor,this.TurnoverRateColor=$r.Title.TurnoverRateColor,this.PositionColor=$r.Title.PositionColor,this.LanguageID=tn.LANGUAGE_CHINESE_ID,this.LineCount=0,this.LineHeight=$r.PCTooltip.LineHeight,this.Width=157,this.Height=5*this.LineHeight,this.Operator=function(){var t=this.Value.Data;if(!t)return!1;this.Width=157,this.LanguageID==tn.LANGUAGE_ENGLISH_ID&&(this.Width=180);var e=new Date(parseInt(t.Date/1e4),t.Date/100%100-1,t.Date%100),a=he.FormatDateString(t.Date),i=en.GetText(Jr[e.getDay()],this.LanguageID),r=Z.IsTickPeriod(this.Value.ChartPaint.Data.Period);Z.IsMinutePeriod(this.Value.ChartPaint.Data.Period,!0)?i=he.FormatTimeString(t.Time):(Z.IsSecondPeriod(this.Value.ChartPaint.Data.Period)||r)&&(i=he.FormatTimeString(t.Time,"HH:MM:SS"));var n=this.Symbol.toUpperCase(),s=Oi(this.Symbol),o=null;if(t.YClose>0&&(o=(t.Close-t.YClose)/t.YClose*100),r){var h="<span class='tooltip-title'>"+a+"&nbsp&nbsp"+i+"</span><span class='tooltip-con'>"+en.GetText("DivTooltip-Price",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.GetColor(t.Open,t.YClose)+";'>"+t.Open.toFixed(s)+"</span><br/><span class='tooltip-con'>"+en.GetText("DivTooltip-Increase",this.LanguageID)+"</span>"+(null==o?"<span class='tooltip-num' style='color:"+this.GetColor(0,0)+";'>--</span><br/>":"<span class='tooltip-num' style='color:"+this.GetColor(o,0)+";'>"+o.toFixed(2)+"%</span><br/>");this.LineCount=4}else{var l=t.Vol;n&&an.IsSHSZ(n)&&(l/=100);var h="<span class='tooltip-title'>"+a+"&nbsp&nbsp"+i+"</span><span class='tooltip-con'>"+en.GetText("DivTooltip-Open",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.GetColor(t.Open,t.YClose)+";'>"+t.Open.toFixed(s)+"</span><br/><span class='tooltip-con'>"+en.GetText("DivTooltip-High",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.GetColor(t.High,t.YClose)+";'>"+t.High.toFixed(s)+"</span><br/><span class='tooltip-con'>"+en.GetText("DivTooltip-Low",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.GetColor(t.Low,t.YClose)+";'>"+t.Low.toFixed(s)+"</span><br/><span class='tooltip-con'>"+en.GetText("DivTooltip-Close",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.GetColor(t.Close,t.YClose)+";'>"+t.Close.toFixed(s)+"</span><br/><span class='tooltip-con'>"+en.GetText("DivTooltip-Vol",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.VolColor+";'>"+he.FormatValueString(l,2,this.LanguageID)+"</span><br/><span class='tooltip-con'>"+en.GetText("DivTooltip-Amount",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.AmountColor+";'>"+he.FormatValueString(t.Amount,2,this.LanguageID)+"</span><br/><span class='tooltip-con'>"+en.GetText("DivTooltip-Increase",this.LanguageID)+"</span>"+(null==o?"<span class='tooltip-num' style='color:"+this.GetColor(0,0)+";'>--</span><br/>":"<span class='tooltip-num' style='color:"+this.GetColor(o,0)+";'>"+o.toFixed(2)+"%</span><br/>");if(this.LineCount=8,an.IsSHSZStockA(this.Symbol)&&t.FlowCapital>0){var u=t.Vol/t.FlowCapital*100;h+="<span class='tooltip-con'>"+en.GetText("DivTooltip-Exchange",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.TurnoverRateColor+";'>"+u.toFixed(2)+"%</span><br/>",++this.LineCount}if(an.IsFutures(n)&&he.IsNumber(t.Position)&&(h+="<span class='tooltip-con'>"+en.GetText("DivTooltip-Position",this.LanguageID)+"</span><span class='tooltip-num' style='color:"+this.PositionColor+";'>"+t.Position+"</span><br/>",++this.LineCount),"Overlay-KLine"==this.Value.ChartPaint.Name){h="<span style='color:rgb(0,0,0);font:微软雅黑;font-size:12px;text-align:center;display: block;'>"+this.Value.ChartPaint.Title+"</span>"+h,++this.LineCount}}return this.Text=h,this.Height=this.LineCount*this.LineHeight,!0},this.GetColor=function(t,e){return t>e?this.UpColor:t<e?this.DownColor:this.UnchagneColor}}function Le(){this.newMethod=Se,this.newMethod(),delete this.newMethod,this.UpColor=$r.UpTextColor,this.DownColor=$r.DownTextColor,this.UnchagneColor=$r.UnchagneTextColor,this.Width=500,this.Operator=function(){if(!this.Value)return!1;var t=this.Value.Data.Data,e=this.Value.Data.Type,a="";for(var i in t){var r=t[i],n="";switch(e){case kr.BLOCKTRADING:n=this.BlockTradingFormat(r);break;case kr.TRADEDETAIL:n=this.TradeDetailFormat(r);break;case kr.RESEARCH:n=this.ResearchFormat(r);break;case kr.PFORECAST:n=this.PerformanceForecastFormat(r);break;default:n=this.DefaultFormat(r)}a+=n}var s="<div class='title-length'>"+a+"</div>";if(t.length>8){s+="<div class='total-list'>共"+t.length+"条</div>"}return this.Text=s,!0},this.DefaultFormat=function(t){return"<span>"+he.FormatDateString(t.Date)+"&nbsp;&nbsp;&nbsp;"+t.Title+"</span>"},this.BlockTradingFormat=function(t){var e=t.ExtendData;return"<span><i class='date-tipbox'>"+he.FormatDateString(t.Date)+"</i>&nbsp;&nbsp;<i class='tipBoxTitle'>成交价:&nbsp;"+e.Price.toFixed(2)+"</i><i class='tipBoxTitle'>收盘价:&nbsp;"+e.ClosePrice.toFixed(2)+"</i><br/><i class='rate-discount tipBoxTitle'>溢折价率:&nbsp;<strong style='color:"+this.GetColor(e.Premium.toFixed(2))+"'>"+e.Premium.toFixed(2)+"%</strong></i><i class='tipBoxTitle'>成交量(万股):&nbsp;"+e.Vol.toFixed(2)+"</i></span>"},this.TradeDetailFormat=function(t){var e=t.ExtendData.Detail,a=he.FormatDateString(t.Date),i=[];for(var r in e)i+="<i>"+e[r].TypeExplain+"</i><br/>";return"<span><i class='trade-time'>"+a+"&nbsp;&nbsp;&nbsp;上榜原因:&nbsp;&nbsp;</i><i class='reason-list'>"+i+"</i><br/><i class='trade-detall'>一周后涨幅:&nbsp;<strong style='color:"+this.GetColor(t.ExtendData.FWeek.Week1.toFixed(2))+"'>"+t.ExtendData.FWeek.Week1.toFixed(2)+"%</strong>&nbsp;&nbsp;&nbsp;四周后涨幅:&nbsp;<strong style='color:"+this.GetColor(t.ExtendData.FWeek.Week4.toFixed(2))+";'>"+t.ExtendData.FWeek.Week4.toFixed(2)+"%</strong></i></span>"},this.ResearchFormat=function(t){var e=t.ExtendData.Level,a="";if(0==e.length)a="<i>一般调研</i>";else{for(var i in e)0==e[i]?a+="<i style='color:#00a0e9'>证券代表&nbsp;&nbsp;&nbsp;</i>":1==e[i]?a+="<i>董秘&nbsp;&nbsp;&nbsp;</i>":2==e[i]?a+="<i style='color:#00a0e9'>总经理&nbsp;&nbsp;&nbsp;</i>":3==e[i]&&(a+="<i style='color:#00a0e9'>董事长&nbsp;&nbsp;&nbsp;</i>");a="接待:&nbsp;&nbsp;&nbsp;"+a}var r="";return t.ExtendData.Type&&"其他"!=t.ExtendData.Type&&(r="&nbsp;&nbsp;&nbsp;<i>"+t.ExtendData.Type+"</i>",0==e.length&&(a="")),"<span>"+he.FormatDateString(t.Date)+"&nbsp;&nbsp;&nbsp;"+r+a+"</span>"},this.PerformanceForecastFormat=function(t){var e,a=t.ExtendData.ReportDate,i=parseInt(a/1e4),r=a%1e4;1231==r?e="年报":331==r?e="一季度报":630==r?e="半年度报":930==r&&(e="三季度报");var n="";return t.ExtendData.FWeek&&(null!=t.ExtendData.FWeek.Week1&&(n+="一周后涨幅:<i class='increase' style='color:"+this.GetColor(t.ExtendData.FWeek.Week1.toFixed(2))+"'>"+t.ExtendData.FWeek.Week1.toFixed(2)+"%</i>"),null!=t.ExtendData.FWeek.Week4&&(n+="&nbsp;四周后涨幅:<i class='increase' style='color:"+this.GetColor(t.ExtendData.FWeek.Week4.toFixed(2))+"'>"+t.ExtendData.FWeek.Week4.toFixed(2)+"%</i>"),n.length>0&&(n="<br/>&nbsp;&nbsp;<i class='prorecast-week'>"+n+"</i>")),"<span>"+he.FormatDateString(t.Date)+"&nbsp;&nbsp;"+i+e+t.Title+"&nbsp;"+n+"</span>"},this.GetColor=function(t){return t>0?this.UpColor:t<0?this.DownColor:this.UnchagneColor}}function Me(){this.newMethod=Se,this.newMethod(),delete this.newMethod,this.Width=120,this.Operator=function(){var t=this.Value.Data;if(!t)return!1;var e,a=t.Data,i="<span class='tooltip-index-name'>"+a.Name+a.Param+":</span>";return e=1==a.Type?"<span class='tooltip-index-buy'>买入</span>":"<span class='tooltip-index-sell'>卖出</span>",this.Text=i+e,!0}}function _e(){this.newMethod=Se,this.newMethod(),delete this.newMethod,this.Width=200,this.Operator=function(){var t=this.Value.Data;if(!t)return!1;var e=t.Data.Item,a=he.FormatTimeString(e.Time),i="<span class='tooltip-minuteinfo-time'>"+a+" </span>",r="<span class='tooltip-minuteinfo-content'>"+e.Title+"</span>";return e.Content&&(r="<span class='tooltip-minuteinfo-content'>"+e.Content+"</span>"),this.Text=i+r,!0}}function be(){this.newMethod=Se,this.newMethod(),delete this.newMethod,this.Width=200,this.Operator=function(){if(!this.Value||!this.Value.Data)return!1;var t=this.Value.Data;return!!t.Item&&(!!t.Item.Text&&(this.Text=t.Item.Text,!0))}}function we(){this.newMethod=Se,this.newMethod(),delete this.newMethod,this.Width=200,this.Period=0,this.Operator=function(){var t=this.Value.Data;if(!t||!t.Data)return!1;if(Z.IsDayPeriod(this.Period,!0)){var e=he.FormatDateString(t.Data.Start.Date),a=he.FormatDateString(t.Data.End.Date);if(e==a)return this.Text="<span class='tooltip-minuteinfo-content'>"+e+"</span>",!0;var i="<span class='tooltip-minuteinfo-content'>起始时间:"+e+"</span>",r="<span class='tooltip-minuteinfo-content'>结束时间:"+a+"</span>";return this.Text=i+"<br>"+r,!0}if(Z.IsMinutePeriod(this.Period,!0)){var e=he.FormatDateString(t.Data.Start.Date),n=he.FormatTimeString(t.Data.Start.Time,"HH:MM"),a=he.FormatDateString(t.Data.End.Date),s=he.FormatTimeString(t.Data.End.Time,"HH:MM"),i="<span class='tooltip-minuteinfo-content'>起始时间:"+e+" "+n+"</span>",r="<span class='tooltip-minuteinfo-content'>结束时间:"+a+" "+s+"</span>";return this.Text=i+"<br>"+r,!0}return!1}}function Fe(){this.DataMap=new _r.default([["KLineTradeDataStringFormat",{Create:function(){return new Me}}],["MinuteInfoDataStringFormat",{Create:function(){return new _e}}],["HistoryDataStringFormat",{Create:function(){return new xe}}],["KLineInfoDataStringFormat",{Create:function(){return new Le}}],["IconDataStringFormat",{Create:function(){return new be}}],["ChartOXDataStringFormat",{Create:function(){return new we}}],["CorssCursor_XStringFormat",{Create:function(){return new ye}}],["CorssCursor_YStringFormat",{Create:function(){return new Te}}]]),this.Create=function(t){return this.DataMap.has(t)?this.DataMap.get(t).Create():null}}function Ee(){this.Frame,this.Data=new Array,this.Canvas,this.IsDynamic=!1,this.Position=0,this.CursorIndex,this.Font=$r.TitleFont,this.Title,this.TitleColor=$r.DefaultTextColor,this.ClassName="IChartTitlePainting",this.DrawStatus,this.GetEventCallback,this.ReloadResource=function(){this.Font=$r.TitleFont,this.TitleColor=$r.DefaultTextColor}}function Ae(){this.newMethod=Ee,this.newMethod(),delete this.newMethod,this.ClassName="DynamicKLineTitlePainting",this.IsDynamic=!0,this.IsShow=!0,this.Period,this.UpColor=$r.UpTextColor,this.DownColor=$r.DownTextColor,this.UnchagneColor=$r.UnchagneTextColor,this.VolColor=$r.Title.VolColor,this.AmountColor=$r.Title.AmountColor,this.DateTimeColor=$r.Title.DateTimeColor,this.NameColor=$r.Title.NameColor,this.SettingColor=$r.Title.SettingColor,this.TurnoverRateColor=$r.Title.TurnoverRateColor,this.PositionColor=$r.Title.PositionColor,this.Symbol,this.Name,this.SpaceWidth=2*c(),this.OverlayChartPaint,this.IsShowName=!0,this.IsShowSettingInfo=!0,this.IsShowDateTime=!0,this.LanguageID=tn.LANGUAGE_CHINESE_ID,this.OnDrawEvent,this.ReloadResource=function(){this.Font=$r.TitleFont,this.TitleColor=$r.DefaultTextColor,this.UpColor=$r.UpTextColor,this.DownColor=$r.DownTextColor,this.UnchagneColor=$r.UnchagneTextColor,this.VolColor=$r.Title.VolColor,this.AmountColor=$r.Title.AmountColor,this.DateTimeColor=$r.Title.DateTimeColor,this.NameColor=$r.Title.NameColor,this.SettingColor=$r.Title.SettingColor,this.TurnoverRateColor=$r.Title.TurnoverRateColor,this.PositionColor=$r.Title.PositionColor},this.GetCurrentKLineData=function(){if(null==this.CursorIndex||!this.Data)return null;if(this.Data.length<=0)return null;var t=this.CursorIndex;t=parseInt(t.toFixed(0));var e=this.Data.DataOffset+t;return e>=this.Data.Data.length&&(e=this.Data.Data.length-1),e<0?null:this.Data.Data[e]},this.DrawItem=function(t){var e=!0===this.Frame.IsHScreen,a=this.Frame.ChartBorder.GetLeft(),i=this.Frame.ChartBorder.GetTop()-this.Frame.ChartBorder.Top/2,r=(this.Frame.ChartBorder.GetRight(),Oi(this.Symbol)),n=this.Symbol.toUpperCase();if(e){if(this.Frame.ChartBorder.Right<5)return;var a=2,i=this.Frame.ChartBorder.Right/2,s=(this.Frame.ChartBorder.GetHeight(),this.Frame.ChartBorder.GetChartWidth()),o=this.Frame.ChartBorder.GetTop();this.Canvas.translate(s,o),this.Canvas.rotate(90*Math.PI/180)}else if(this.Frame.ChartBorder.Top<5*c())return;this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.font=this.Font;var h={Left:a,Bottom:i,IsHScreen:e};if(!this.IsShowName||this.DrawText(this.Name,this.NameColor,h)){if(this.IsShowSettingInfo){var l="";l=this.Data.Period>Vr&&this.Data.Period<=Gr?this.Data.Period-Vr+en.GetText("自定义分钟",this.LanguageID):this.Data.Period>Yr&&this.Data.Period<=Hr?this.Data.Period-Yr+en.GetText("自定义日线",this.LanguageID):this.Data.Period>Wr&&this.Data.Period<=Xr?this.Data.Period-Wr+en.GetText("自定义秒",this.LanguageID):en.GetText(Z.GetPeriodName(this.Data.Period),this.LanguageID);var u=en.GetText(Zr[this.Data.Right],this.LanguageID),d="("+l+" "+u+")";if(an.IsEnableRight(this.Data.Period,this.Symbol)||(d="("+l+")"),!this.DrawText(d,this.SettingColor,h))return}if(this.IsShowDateTime){var d=he.FormatDateString(t.Date);if(!this.DrawText(d,this.DateTimeColor,h))return}var f=Z.IsTickPeriod(this.Period);if(Z.IsMinutePeriod(this.Period,!0)&&he.IsNumber(t.Time)){var d=he.FormatTimeString(t.Time);if(!this.DrawText(d,this.DateTimeColor,h))return}else if(Z.IsSecondPeriod(this.Period)&&he.IsNumber(t.Time)){var d=he.FormatTimeString(t.Time,"HH:MM:SS");if(!this.DrawText(d,this.DateTimeColor,h))return}else if(f){var d=he.FormatTimeString(t.Time,"HH:MM:SS");if(!this.DrawText(d,this.DateTimeColor,h))return}if(f){var m=this.GetColor(t.Open,t.YClose),d=en.GetText("KTitle-Price",this.LanguageID)+t.Open.toFixed(r);if(!this.DrawText(d,m,h))return;if(t.YClose>0){var C=(t.Close-t.YClose)/t.YClose*100,m=this.GetColor(C,0),d=en.GetText("KTitle-Increase",this.LanguageID)+C.toFixed(2)+"%";if(!this.DrawText(d,m,h))return}}else{var m=this.GetColor(t.Open,t.YClose),d=en.GetText("KTitle-Open",this.LanguageID)+t.Open.toFixed(r);if(this.DrawText(d,m,h)){var m=this.GetColor(t.High,t.YClose),d=en.GetText("KTitle-High",this.LanguageID)+t.High.toFixed(r);if(this.DrawText(d,m,h)){var m=this.GetColor(t.Low,t.YClose),d=en.GetText("KTitle-Low",this.LanguageID)+t.Low.toFixed(r);if(this.DrawText(d,m,h)){var m=this.GetColor(t.Close,t.YClose),d=en.GetText("KTitle-Close",this.LanguageID)+t.Close.toFixed(r);if(this.DrawText(d,m,h)){if(t.YFClose>0&&an.IsChinaFutures(n)){var C=(t.Close-t.YFClose)/t.YFClose*100,m=this.GetColor(C,0),d=en.GetText("KTitle-Increase",this.LanguageID)+C.toFixed(2)+"%";if(!this.DrawText(d,m,h))return}else if(t.YClose>0){var C=(t.Close-t.YClose)/t.YClose*100,m=this.GetColor(C,0),d=en.GetText("KTitle-Increase",this.LanguageID)+C.toFixed(2)+"%";if(!this.DrawText(d,m,h))return}var p=t.Vol;n&&an.IsSHSZ(n)&&(p/=100);var d=en.GetText("KTitle-Vol",this.LanguageID)+he.FromatIntegerString(p,2,this.LanguageID);if(this.DrawText(d,this.VolColor,h)){if(he.IsNumber(t.Amount)){var d=en.GetText("KTitle-Amount",this.LanguageID)+he.FormatValueString(t.Amount,2,this.LanguageID);if(!this.DrawText(d,this.AmountColor,h))return}if(an.IsSHSZStockA(this.Symbol)&&t.FlowCapital>0){var C=t.Vol/t.FlowCapital*100,d=en.GetText("KTitle-Exchange",this.LanguageID)+he.FormatValueString(C,2,this.LanguageID)+"%";if(!this.DrawText(d,this.TurnoverRateColor,h))return}if(an.IsFutures(n)&&he.IsNumber(t.Position)){var d=en.GetText("KTitle-Position",this.LanguageID)+t.Position;if(!this.DrawText(d,this.PositionColor,h))return}for(var D in this.OverlayChartPaint){var t=this.OverlayChartPaint[D];if(t.Symbol&&t.Title){var v=t.Title,g=t.Color,d="["+v+"]";if(!this.DrawText(d,g,h))return}}}}}}}}}},this.Draw=function(){if(this.IsShow){if(null==this.CursorIndex||!this.Data||this.Data.length<=0)return void this.OnDrawEventCallback(null);this.Canvas.font=this.Font,this.SpaceWidth=this.Canvas.measureText("0").width;var t=this.CursorIndex;t=parseInt(t.toFixed(0));var e=this.Data.DataOffset+t;if(e>=this.Data.Data.length&&(e=this.Data.Data.length-1),e<0)return void this.OnDrawEventCallback(null);var a=this.Data.Data[e];this.OnDrawEventCallback(a),this.Canvas.save(),this.DrawItem(a),this.Canvas.restore()}},this.OnDrawEventCallback=function(t){if(this.OnDrawEvent&&this.OnDrawEvent.Callback){var e={Draw:t,Name:this.ClassName};if(this.Data&&this.Data.Data){var a=Math.abs(this.CursorIndex);a=parseInt(a.toFixed(0));var i=this.Data.DataOffset+a,r=this.Data.Data.length;e.DataIndex=i,e.DataCount=r}if(he.IsNonEmptyArray(this.OverlayChartPaint)){e.OverlayStock=[];for(var n=0;n<this.OverlayChartPaint.length;++n){var s=this.OverlayChartPaint[n];s.Symbol&&s.Title&&e.OverlayStock.push({Symbol:s.Symbol,Name:s.Title})}}this.OnDrawEvent.Callback(this.OnDrawEvent,e,this)}},this.GetColor=function(t,e){return t>e?this.UpColor:t<e?this.DownColor:this.UnchagneColor},this.DrawText=function(t,e,a){if(!t)return!0;var i=!0===this.Frame.IsHScreen,r=this.Frame.ChartBorder.GetRight();i&&(r=this.Frame.ChartBorder.GetHeight()),this.Canvas.fillStyle=e;var n=this.Canvas.measureText(t).width;return!(a.Left+n>r)&&(this.Canvas.fillText(t,a.Left,a.Bottom,n),a.Left+=n+this.SpaceWidth,!0)}}function Ne(){this.newMethod=Ae,this.newMethod(),delete this.newMethod,this.ClassName="DynamicMinuteTitlePainting",this.SpaceWidth=1*c(),this.YClose,this.IsShowDate=!1,this.IsShowTime=!0,this.IsShowName=!0,this.IsShowAveragePrice=!0,this.OverlayChartPaint,this.LanguageID=tn.LANGUAGE_CHINESE_ID,this.LastShowData,this.OnDrawEvent,this.PointInfo=null,this.IsAlwaysShowLastData=!1,this.MultiDayBeforeOpenData,this.MultiDayAfterCloseData,this.GetCurrentKLineData=function(){if(this.LastShowData)return this.LastShowData;if(null==this.CursorIndex||!this.Data)return null;if(this.Data.length<=0)return null;var t=Math.abs(this.CursorIndex);t=parseInt(t.toFixed(0));var e=this.Data.DataOffset+t;return e>=this.Data.Data.length&&(e=this.Data.Data.length-1),e<0?null:this.Data.Data[e]},this.GetLatestKLineData=function(){if(!this.Data||!this.Data.Data)return null;var t=this.Data.Data.length;return t<=0?null:this.Data.Data[t-1]},this.DrawItem=function(t,e){var a=!0===this.Frame.IsHScreen,i=this.Frame.GetBorder(),r=i.Left,n=i.Top-this.Frame.ChartBorder.Top/2,s=Oi(this.Symbol);if(a){if(this.Frame.ChartBorder.Right<5)return;var r=2,n=this.Frame.ChartBorder.Right/2,o=i.ChartWidth,h=i.Top;this.Canvas.translate(o,h),this.Canvas.rotate(90*Math.PI/180)}else if(this.Frame.ChartBorder.Top<5)return;this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.font=this.Font;var l={Left:r,Bottom:n,IsHScreen:a};if(!this.IsShowName||this.DrawText(this.Name,this.NameColor,l)){if(this.IsShowDate||this.IsShowTime){var u=he.FormatDateTimeString(t.DateTime,this.IsShowDate,this.IsShowTime);if(!this.DrawText(u,this.DateTimeColor,l))return}var c=t.Close,d=t.Increase,f=t.Vol,m=t.Amount;if(t.Before&&(c=t.Before.Close,d=t.Before.Increase,f=t.Before.Vol,m=t.Before.Amount),c){var C=this.GetColor(c,this.YClose),u=en.GetText("MTitle-Close",this.LanguageID)+c.toFixed(s);if(!this.DrawText(u,C,l))return}if(null!=d){var C=this.GetColor(d,0),u=en.GetText("MTitle-Increase",this.LanguageID)+d.toFixed(2)+"%";if(!this.DrawText(u,C,l))return}var p=!0,D=this.Symbol.toUpperCase();if(an.IsET(D)&&!an.IsETShowAvPrice(D)?p=!1:an.IsShowAvPrice&&!an.IsShowAvPrice(D)&&(p=!1),t.AvPrice&&p&&this.IsShowAveragePrice){var C=this.GetColor(t.AvPrice,this.YClose),u=en.GetText("MTitle-AvPrice",this.LanguageID)+t.AvPrice.toFixed(s);if(!this.DrawText(u,C,l))return}var u=en.GetText("MTitle-Vol",this.LanguageID)+he.FromatIntegerString(f,2);if(this.DrawText(u,this.VolColor,l)){if(he.IsNumber(m)){var u=en.GetText("MTitle-Amount",this.LanguageID)+he.FormatValueString(m,2);if(!this.DrawText(u,this.AmountColor,l))return}if(he.IsNumber(t.Position)){var u=en.GetText("MTitle-Position",this.LanguageID)+he.FromatIntegerString(t.Position,2);if(!this.DrawText(u,this.VolColor,l))return}if(e&&this.Data&&this.Data.UpdateTime&&he.IsNumber(this.Data.UpdateTime.Date)&&he.IsNumber(this.Data.UpdateTime.Time)){var u=en.GetText("MTitle-UpdateTime",this.LanguageID)+he.FormatTimeString(this.Data.UpdateTime.Time,"HH:MM:SS");if(!this.DrawText(u,this.DateTimeColor,l))return}for(var v in this.OverlayChartPaint){var t=this.OverlayChartPaint[v];if(t.Symbol&&t.Title){var g=t.Title,S=t.Color,u="["+g+"]";if(!this.DrawText(u,S,l))return}}}}},this.DrawCallAuction=function(){var t=!0===this.Frame.IsHScreen,e=this.Frame.GetBorder(),a=e.Left,i=e.Top-this.Frame.ChartBorder.Top/2,r=Oi(this.Symbol),n=!0;if(t){var a=2,i=this.Frame.ChartBorder.Right/2,s=e.ChartWidth,o=e.Top;this.Canvas.translate(s,o),this.Canvas.rotate(90*Math.PI/180)}else this.Frame.ChartBorder.Top<5&&(n=!1);this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.font=this.Font;var h={Left:a,Bottom:i,IsHScreen:t};if(!n||!this.IsShowName||this.DrawText(this.Name,this.NameColor,h)){var l,u=1;if(2==this.PointInfo.ClientPos){if(!this.BeforeOpenData)return;if(!this.CallAcutionXOperator)return;this.CallAcutionXOperator.Value=t?this.PointInfo.Point.Y:this.PointInfo.Point.X,this.CallAcutionXOperator.Point={X:this.PointInfo.Point.X,Y:this.PointInfo.Point.Y},this.CallAcutionXOperator.ClientPos=this.PointInfo.ClientPos;var c={Explain:"BeforeOpen",Data:null,DataIndex:null,DataTotalCount:this.BeforeOpenData.TotalCount};if(!this.CallAcutionXOperator.Operator())return this.OnDrawCallAuctionEventCallback(c),!1;c.DataIndex=this.CallAcutionXOperator.DataIndex;var d=this.CallAcutionXOperator.Item,f=d.Time;l=1==this.BeforeOpenData.Ver?he.FormatTimeString(f,"HH:MM"):he.FormatTimeString(f,"HH:MM:SS"),u=this.BeforeOpenData.Ver,c.Data=d}else if(3==this.PointInfo.ClientPos){if(!this.AfterCloseData)return;if(!this.CallAcutionXOperator)return;this.CallAcutionXOperator.Value=t?this.PointInfo.Point.Y:this.PointInfo.Point.X,this.CallAcutionXOperator.Point={X:this.PointInfo.Point.X,Y:this.PointInfo.Point.Y},this.CallAcutionXOperator.ClientPos=this.PointInfo.ClientPos;var c={Explain:"AfterClose",Data:null,DataIndex:null,DataTotalCount:this.AfterCloseData.TotalCount};if(!this.CallAcutionXOperator.Operator())return this.OnDrawCallAuctionEventCallback(c),!1;c.DataIndex=this.CallAcutionXOperator.DataIndex;var d=this.CallAcutionXOperator.Item,f=d.Time;l=1==this.AfterCloseData.Ver?he.FormatTimeString(f,"HH:MM"):he.FormatTimeString(f,"HH:MM:SS"),u=this.AfterCloseData.Ver,c.Data=d}else if(this.PointInfo.ClientPos>=200&&this.PointInfo.ClientPos<=299){if(!this.MultiDayBeforeOpenData||!he.IsNonEmptyArray(this.MultiDayBeforeOpenData))return;var m=1==this.Frame.IsHScreen?this.PointInfo.Point.Y:this.PointInfo.Point.X;this.CallAcutionXOperator.Value=m,this.CallAcutionXOperator.Point={X:this.PointInfo.Point.X,Y:this.PointInfo.Point.Y},this.CallAcutionXOperator.ClientPos=this.PointInfo.ClientPos;var c={Explain:"MultiDayBeforeOpen",Data:null,DataIndex:null};if(!this.CallAcutionXOperator.Operator())return this.OnDrawCallAuctionEventCallback(c),!1;c.DataIndex=this.CallAcutionXOperator.DataIndex,c.DayIndex=this.CallAcutionXOperator.DayIndex;var C=this.MultiDayBeforeOpenData[this.CallAcutionXOperator.DayIndex],d=this.CallAcutionXOperator.Item,f=d.Time;l=1==C.Ver?he.FormatTimeString(f,"HH:MM"):he.FormatTimeString(f,"HH:MM:SS");var p=he.FormatDateString(d.Date);l=p+" "+l,u=C.Ver,c.Data=d}else{if(!(this.PointInfo.ClientPos>=300&&this.PointInfo.ClientPos<=399))return;if(!this.MultiDayAfterCloseData||!he.IsNonEmptyArray(this.MultiDayAfterCloseData))return;var m=1==this.Frame.IsHScreen?this.PointInfo.Point.Y:this.PointInfo.Point.X;this.CallAcutionXOperator.Value=m,this.CallAcutionXOperator.Point={X:this.PointInfo.Point.X,Y:this.PointInfo.Point.Y},this.CallAcutionXOperator.ClientPos=this.PointInfo.ClientPos;var c={Explain:"MultiDayAfterClose",Data:null,DataIndex:null};if(!this.CallAcutionXOperator.Operator())return this.OnDrawCallAuctionEventCallback(c),!1;c.DataIndex=this.CallAcutionXOperator.DataIndex,c.DayIndex=this.CallAcutionXOperator.DayIndex;var C=this.MultiDayAfterCloseData[this.CallAcutionXOperator.DayIndex],d=this.CallAcutionXOperator.Item,f=d.Time;l=1==C.Ver?he.FormatTimeString(f,"HH:MM"):he.FormatTimeString(f,"HH:MM:SS");var p=he.FormatDateString(d.Date);l=p+" "+l,u=C.Ver,c.Data=d}if(!(n&&this.IsShowTime&&l)||this.DrawText(l,this.DateTimeColor,h)){if(n&&d&&he.IsNumber(d.Price)){var D=this.GetColor(d.Price,this.YClose),v="MTitle-AC-Price";this.BeforeOpenData&&1==this.BeforeOpenData.Ver&&(v="MTitle-Close");var g=en.GetText(v,this.LanguageID)+d.Price.toFixed(r);if(!this.DrawText(g,D,h))return}if(n&&d&&he.IsPlusNumber(this.YClose)&&he.IsNumber(d.Price)){var S=(d.Price-this.YClose)/this.YClose*100,D=this.GetColor(S,0),v="MTitle-AC-Increase";this.BeforeOpenData&&1==this.BeforeOpenData.Ver&&(v="MTitle-Increase");var g=en.GetText(v,this.LanguageID)+S.toFixed(2)+"%";if(!this.DrawText(g,D,h))return}if(3==u&&n&&d&&he.IsNumber(d.AvPrice)){var D=this.GetColor(d.Price,this.YClose),g=en.GetText("MTitle-AC-AvPrice",this.LanguageID)+d.AvPrice.toFixed(r);if(!this.DrawText(g,D,h))return}if(n&&he.IsNumber(d.Vol[0])){var v="MTitle-AC-Vol";this.BeforeOpenData&&1==this.BeforeOpenData.Ver&&(v="MTitle-Vol");var g=en.GetText(v,this.LanguageID)+he.FromatIntegerString(d.Vol[0],2);if(!this.DrawText(g,this.VolColor,h))return}if(n&&he.IsNumber(d.Vol[1])){var g=en.GetText("MTitle-AC-NotMatchVol",this.LanguageID)+he.FromatIntegerString(d.Vol[1],2);if(!this.DrawText(g,this.VolColor,h))return}this.OnDrawCallAuctionEventCallback(c)}}},this.OnDrawCallAuctionEventCallback=function(t){if(this.OnDrawEvent&&this.OnDrawEvent.Callback){var e={Draw:t,Name:this.ClassName};this.OnDrawEvent.Callback(this.OnDrawEvent,e,this)}},this.Draw=function(){if(this.LastShowData=null,this.IsShow){if(this.PointInfo&&(2==this.PointInfo.ClientPos||3==this.PointInfo.ClientPos||this.PointInfo.ClientPos>=200&&this.PointInfo.ClientPos<=299||this.PointInfo.ClientPos>=300&&this.PointInfo.ClientPos<=399))return this.Canvas.save(),this.DrawCallAuction(),void this.Canvas.restore();if(null==this.CursorIndex||!this.Data||!this.Data.Data||this.Data.Data.length<=0)return void this.OnDrawEventCallback(null);this.Canvas.font=this.Font,this.SpaceWidth=this.Canvas.measureText("0").width;var t=!1;if(this.DrawStatus&&this.DrawStatus.IsTitleShowLatestData){var e=this.DrawStatus;!he.IsNumber(e.FrameID)||e.FrameID<0?t=!0:e.CorssCursorTouchEnd&&0==e.IsOnTouch&&(t=!0)}var a=!1;if(t){var i=this.GetLatestKLineData();a=!0}else{var r=this.CursorIndex;r=parseInt(r.toFixed(0));var n=r+this.Data.DataOffset;n>=this.Data.Data.length&&(n=this.Data.Data.length-1);var i=this.Data.Data[n];n==this.Data.Data.length-1&&(a=!0)}if(this.LastShowData=i,this.Canvas.save(),this.OnDrawEventCallback(i),this.IsAlwaysShowLastData){var s=this.GetLatestKLineData();this.DrawItem(s,!0)}else this.DrawItem(i,a);this.Canvas.restore()}}}function Oe(t,e,a){this.Data=t,this.Name=e,this.Color=a,this.DataType,this.StringFormat=Qr.DEFAULT,this.FloatPrecision=2,this.IsShow=!0,this.Callback}function Pe(){this.newMethod=Ee,this.newMethod(),delete this.newMethod,this.ClassName="DynamicChartTitlePainting",this.IsDynamic=!0,this.Data=[],this.Explain,this.ColorIndex,this.IsShowColorIndexTitle=!0,this.IsShowUpDownArrow=!0,this.IsShowIndexName=!0,this.IsShowIndexTitle=!0,this.TradeIndex,this.IsShowTradeIndexTitle=!0,this.OverlayIndex=new _r.default,this.IsShowOverlayIndexName=!0,this.OverlayIndexType={Position:0,LineSpace:5,BGColor:$r.OverlayIndexTitleBGColor},this.LanguageID=tn.LANGUAGE_CHINESE_ID,this.TitleRect,this.IsDrawTitleBG=!1,this.BGColor=$r.IndexTitleBGColor,this.OnDrawEvent,this.ParamSpace=2,this.TitleSpace=2,this.TitleColor=$r.IndexTitleColor,this.IsKLineFrame=!1,this.DynamicTitle={OutName:null,OutValue:null},this.OverlayDynamicTitle=new _r.default,this.ReloadResource=function(){this.Font=$r.TitleFont,this.TitleColor=$r.DefaultTextColor,this.OverlayIndexType.BGColor=$r.OverlayIndexTitleBGColor},this.SetDynamicTitleData=function(t,e,a){a.OutName?a.OutName.clear():a.OutName=new _r.default,a.OutValue?a.OutValue.clear():a.OutValue=new _r.default;var i=new _r.default;for(var r in e){var n=e[r];i.set("{"+n.Name+"}",n)}for(var r in t){var n=t[r];if(n.DynamicName){var s=n.DynamicName.match(/{\w*}/i);if(!s||s.length<=0)a.OutName.set(n.Name,n.DynamicName);else{for(var o=n.DynamicName,h=!0,l=0;l<s.length;++l){var u=s[l];if(!i.has(u)){h=!1;break}var c=i.get(u).Value;o=o.replace(u,c.toString())}h&&a.OutName.set(n.Name,o)}}n.DynamicValue&&a.OutValue.set(n.Name,n.DynamicValue)}},this.SetDynamicTitle=function(t,e,a){if(he.IsString(a)){var i=null;this.OverlayDynamicTitle.has(a)?i=this.OverlayDynamicTitle.get(a):(i={OutName:null,OutValue:null},this.OverlayDynamicTitle.set(a,i)),this.SetDynamicTitleData(t,e,i)}else this.SetDynamicTitleData(t,e,this.DynamicTitle)},this.GetDynamicOutName=function(t,e){if(he.IsString(e)){if(!this.OverlayDynamicTitle.has(e))return null;var a=this.OverlayDynamicTitle.get(e),i=a.OutName}else var i=this.DynamicTitle.OutName;return!i||i.size<=0?null:i.has(t)?i.get(t):null},this.GetDynamicOutValue=function(t,e){var a=this.DynamicTitle.OutValue;if(!a||a.size<=0)return null;if(!a.has(t))return null;var i=a.get(t);return i=i.replace("{Value}",e)},this.IsClickTitle=function(t,e){return!!this.TitleRect&&(t>this.TitleRect.Left&&t<this.TitleRect.Left+this.TitleRect.Width&&e>this.TitleRect.Top&&e<this.TitleRect.Top+this.TitleRect.Height)},this.FormatValue=function(t,e){return e.StringFormat==Qr.DEFAULT?he.FormatValueString(t,e.FloatPrecision,this.LanguageID):e.StringFormat==Qr.THOUSANDS?he.FormatValueThousandsString(t,e.FloatPrecision):e.StringFormat==Qr.ORIGINAL?t.toFixed(e.FloatPrecision).toString():e.StringFormat==Qr.INTEGER?he.FromatIntegerString(t,e.FloatPrecision,this.LanguageID):void 0},this.FormatMultiReport=function(t,e){var a="";for(var i in t){var r=t[i],n=r.Quarter,s=r.Year,o=r.Value;switch(a.length>0&&(a+=","),a+=s.toString(),n){case 1:a+="一季报 ";break;case 2:a+="半年报 ";break;case 3:a+="三季报 ";break;case 4:a+="年报 "}a+=this.FormatValue(o,e)}return a},this.FromatMultiDataLine=function(t,e){var a="";if(Array.isArray(t))for(var i=0;i<t.length;++i){var r=t[i];if(0!=r.Type&&he.IsNumber(r.Value)){var n=this.FormatValue(r.Value,e);a.length>0&&(a+=","),a+=n}}else 0!=t.Type&&he.IsNumber(t.Value)&&(a=this.FormatValue(t.Value,e));return a.length<=0?null:a},this.IsShowLastData=function(){var t=!1;if(this.DrawStatus&&this.DrawStatus.IsTitleShowLatestData){var e=this.DrawStatus;!he.IsNumber(e.FrameID)||e.FrameID<0?t=!0:e.CorssCursorTouchEnd&&0==e.IsOnTouch&&(t=!0)}return t},this.OnDrawTitleEvent=function(){var t=this.GetEventCallback(Nr.ON_INDEXTITLE_DRAW);if(t){var e={Index:null,Data:this.Data,Title:this.Title,FrameID:this.Frame.Identify,OverlayIndex:this.OverlayIndex};if(he.IsNumber(this.CursorIndex)){var a=Math.abs(this.CursorIndex);a=parseInt(a.toFixed(0)),e.Index=a}var i=c(),r=this.Frame.GetBorder();e.Left=r.LeftEx/i,e.Top=r.Top/i,e.Right=r.RightEx/i,t.Callback(t,e,this)}},this.Draw=function(){if(!this.Frame.IsMinSize&&(this.IsKLineFrame="KLineFrame"==this.Frame.ClassName||"KLineHScreenFrame"==this.Frame.ClassName,this.IsDrawTitleBG=this.Frame.IsDrawTitleBG,this.IsShowUpDownArrow=this.Frame.IsShowTitleArraw,this.IsShowIndexName=this.Frame.IsShowIndexName,this.IsShowOverlayIndexName=this.Frame.IsShowOverlayIndexName,this.OverlayIndexType.Position=this.Frame.OverlayIndexType.Position,this.OverlayIndexType.LineSpace=this.Frame.OverlayIndexType.LineSpace,this.ParamSpace=this.Frame.IndexParamSpace,this.TitleSpace=this.Frame.IndexTitleSpace,this.TitleRect=null,this.OnDrawTitleEvent(),0!=this.Frame.IsShowIndexTitle&&null!=this.CursorIndex&&this.Data&&!(this.Frame.ChartBorder.TitleHeight<5))){if(!0===this.Frame.IsHScreen)return this.Canvas.save(),this.HScreenDraw(),void this.Canvas.restore();var t=this.Frame.ChartBorder.GetLeft()+1,e=this.Frame.ChartBorder.GetTop()+this.Frame.ChartBorder.TitleHeight/2,a=this.Frame.ChartBorder.GetRight();if(this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.font=this.Font,this.Title&&this.IsShowIndexName){var i=this.Canvas.measureText(this.Title).width+2;if(this.IsDrawTitleBG){var r=2*c();this.Canvas.fillStyle=this.BGColor,this.TitleRect={Left:t,Top:this.Frame.ChartBorder.GetTop()+r,Width:i,Height:this.Frame.ChartBorder.TitleHeight-2*r},this.Canvas.fillRect(this.TitleRect.Left,this.TitleRect.Top,this.TitleRect.Width,this.TitleRect.Height)}this.Canvas.fillStyle=this.TitleColor,this.Canvas.fillText(this.Title,t,e,i),t+=i,t+=this.TitleSpace}var n=this.IsShowLastData(),s=this.Frame.GetLockRect();if(s){var o=Math.abs(this.CursorIndex);this.IsKLineFrame&&(o=this.CursorIndex);if(this.Frame.GetXFromIndex(o.toFixed(0))>=s.Left)return;if(n)return}for(var h in this.Data){var l=this.Data[h];if(l&&l.Data&&l.Data.Data&&(!(l.Data.Data.length<=0)&&!1!==l.IsShow)){var u=null,d=null;if("StraightLine"==l.DataType)u=l.Data.Data[0],d=this.FormatValue(u,l);else{if(n)var f=l.Data.Data.length-1;else{var o=Math.abs(this.CursorIndex);o=parseInt(o.toFixed(0)),this.IsKLineFrame&&(o=this.CursorIndex);var f=l.Data.DataOffset+o;if(f>=l.Data.Data.length&&(f=l.Data.Data.length-1),f<0)continue}if(null==(u=l.Data.Data[f]))continue;if("HistoryData-Vol"==l.DataType)u=u.Vol,d=this.FormatValue(u,l);else if("MultiReport"==l.DataType)d=this.FormatMultiReport(u,l);else if("MULTI_POINT_LINE"==l.DataType){if(!(d=this.FromatMultiDataLine(u,l)))continue}else{var m=null;if(this.IsShowUpDownArrow){var C=null;f-1>=0&&(C=l.Data.Data[f-1]),he.IsNumber(C)&&(m=C>u?"↓":C<u?"↑":"→")}if(d=this.FormatValue(u,l),l.Name){var p=this.GetDynamicOutValue(l.Name,d);p&&(d=p)}m&&(d+=m)}}this.Canvas.fillStyle=l.Color;var D=d;if(l.Name){var v=this.GetDynamicOutName(l.Name);D=v?v+":"+d:l.Name+":"+d}var g=this.ParamSpace*c(),i=this.Canvas.measureText(D).width+g;if(t+i>a)break;this.Canvas.fillText(D,t,e,i),t+=i}}if(this.Explain){this.Canvas.fillStyle=this.TitleColor;var D="说明:"+this.Explain,i=this.Canvas.measureText(D).width+2;t+i<a&&(this.Canvas.fillText(D,t,e,i),t+=i)}if(this.ColorIndex&&this.IsShowColorIndexTitle){this.Canvas.fillStyle=$r.Title.ColorIndexColor;var S=this.ColorIndex.Name+this.ColorIndex.Param,i=this.Canvas.measureText(S).width+2;this.Canvas.fillText(S,t,e,i),t+=i}if(this.TradeIndex&&this.IsShowTradeIndexTitle){this.Canvas.fillStyle=$r.Title.TradeIndexColor;var S=this.TradeIndex.Name+this.TradeIndex.Param,i=this.Canvas.measureText(S).width+2;this.Canvas.fillText(S,t,e,i),t+=i}1==this.OverlayIndexType.Position?this.DrawOverlayIndexSingleLine():this.DrawOverlayIndex(t+10*c())}},this.DrawOverlayIndexSingleLine=function(){var t=c(),e=this.Frame.GetBorder();if(!0===this.Frame.IsHScreen)var a=1,i=2*t,r=this.Frame.ChartBorder.GetHeight(),n=this.Frame.ChartBorder.GetWidthEx();else var i=e.TopTitle+2*t,a=e.Left+1,r=e.Right,n=e.Bottom;var s=this.OverlayIndexType.LineSpace*t,o=a,h=i;this.Canvas.textAlign="left",this.Canvas.textBaseline="top";var l=d(this.Canvas,this.Font,"擎"),u=!0,f=!1,m=void 0;try{for(var C,p=(0,Tr.default)(this.OverlayIndex);!(u=(C=p.next()).done);u=!0){y=C.value;var D=y[1],v=y[0];if(o=a,D.Title&&this.IsShowOverlayIndexName){var g=this.Canvas.measureText(D.Title).width+2;if(o+g<r){if(this.OverlayIndexType.BGColor){this.Canvas.fillStyle=this.OverlayIndexType.BGColor;var S={Left:o,Top:h,Width:g,Height:l+s};this.Canvas.fillRect(S.Left,S.Top,S.Width,S.Height)}this.Canvas.fillStyle=this.TitleColor,this.Canvas.fillText(D.Title,o,h,g)}o+=g}for(var T=0;T<D.Data.length;++T){var y=D.Data[T];if(y&&y.Data&&y.Data.Data&&y.Name&&!(y.Data.Data.length<=0)){var I=null,x=null;if("StraightLine"==y.DataType)I=y.Data.Data[0],x=this.FormatValue(I,y);else{var L=Math.abs(this.CursorIndex-.5);L=parseInt(L.toFixed(0)),this.IsKLineFrame&&(L=this.CursorIndex);var M=y.Data.DataOffset+L;if(M>=y.Data.Data.length&&(M=y.Data.Data.length-1),M<0)continue;if(null==(I=y.Data.Data[M]))continue;"HistoryData-Vol"==y.DataType?(I=I.Vol,x=this.FormatValue(I,y)):x="MultiReport"==y.DataType?this.FormatMultiReport(I,y):this.FormatValue(I,y)}var _=x;if(y.Name){var b=this.GetDynamicOutName(y.Name,v);_=b?b+":"+x:y.Name+":"+x}var g=this.Canvas.measureText(_).width+2;if(o+g>r)break;if(this.OverlayIndexType.BGColor){this.Canvas.fillStyle=this.OverlayIndexType.BGColor;var S={Left:o,Top:h,Width:g,Height:l+s};this.Canvas.fillRect(S.Left,S.Top,S.Width,S.Height)}this.Canvas.fillStyle=y.Color,this.Canvas.fillText(_,o,h,g),o+=g}}if((h+=l+s)+l+s>=n)break}}catch(t){f=!0,m=t}finally{try{!u&&p.return&&p.return()}finally{if(f)throw m}}},this.DrawOverlayIndex=function(t){var e=this.Frame.ChartBorder.GetTop()+this.Frame.ChartBorder.TitleHeight/2,a=this.Frame.ChartBorder.GetRight();if(!0===this.Frame.IsHScreen&&(e=-this.Frame.ChartBorder.TitleHeight/2,a=this.Frame.ChartBorder.GetHeight()),!(t>a)){var i=5*c(),r=t,n=!0,s=!1,o=void 0;try{for(var h,l=(0,Tr.default)(this.OverlayIndex);!(n=(h=l.next()).done);n=!0){m=h.value,t+=i;var u=m[1];if(u.Title&&this.IsShowOverlayIndexName){this.Canvas.fillStyle=this.TitleColor;var d=this.Canvas.measureText(u.Title).width+2;if(r=t,(t+=d)>a)break;this.Canvas.fillText(u.Title,r,e,d)}for(var f in u.Data){var m=u.Data[f];if(m&&m.Data&&m.Data.Data&&m.Name&&!(m.Data.Data.length<=0)){var C=null,p=null;if("StraightLine"==m.DataType)C=m.Data.Data[0],p=this.FormatValue(C,m);else{var D=Math.abs(this.CursorIndex-.5);D=parseInt(D.toFixed(0)),this.IsKLineFrame&&(D=this.CursorIndex);var v=m.Data.DataOffset+D;if(v>=m.Data.Data.length&&(v=m.Data.Data.length-1),v<0)continue;if(null==(C=m.Data.Data[v]))continue;"HistoryData-Vol"==m.DataType?(C=C.Vol,p=this.FormatValue(C,m)):p="MultiReport"==m.DataType?this.FormatMultiReport(C,m):this.FormatValue(C,m)}this.Canvas.fillStyle=m.Color;var g=m.Name+":"+p,d=this.Canvas.measureText(g).width+2;if(r=t,(t+=d)>a)break;this.Canvas.fillText(g,r,e,d)}}if(t>a)break}}catch(t){s=!0,o=t}finally{try{!n&&l.return&&l.return()}finally{if(s)throw o}}}},this.HScreenDraw=function(){var t=this.Frame.ChartBorder.GetHScreenBorder(),e=this.Frame.ChartBorder.GetRightTitle(),a=t.TopEx;this.Canvas.translate(e,a),this.Canvas.rotate(90*Math.PI/180);var i=1,r=-this.Frame.ChartBorder.TitleHeight/2,n=this.Frame.ChartBorder.GetHeight();if(this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.font=this.Font,this.Title&&this.IsShowIndexName){var s=this.Canvas.measureText(this.Title).width+2;if(this.IsDrawTitleBG){var o=2*c();this.Canvas.fillStyle=this.BGColor,this.TitleRect={Left:this.Frame.ChartBorder.GetRightTitle(),Top:t.TopEx,Width:this.Frame.ChartBorder.TitleHeight,Height:s};var h={Left:i,Top:-this.Frame.ChartBorder.TitleHeight+o,Width:s,Height:this.Frame.ChartBorder.TitleHeight-2*o};this.Canvas.fillRect(h.Left,h.Top,h.Width,h.Height)}this.Canvas.fillStyle=this.TitleColor,this.Canvas.fillText(this.Title,i,r,s),i+=s}var l=this.Frame.GetLockRect();if(l){var u=Math.abs(this.CursorIndex-.5);this.IsKLineFrame&&(u=this.CursorIndex);if(this.Frame.GetXFromIndex(u.toFixed(0))>=l.Top)return}for(var d in this.Data){var f=this.Data[d];if(f&&f.Data&&f.Data.Data&&f.Name&&!(f.Data.Data.length<=0)){var m=null,C=null;if("StraightLine"==f.DataType)m=f.Data.Data[0],C=this.FormatValue(m,f);else{var u=Math.abs(this.CursorIndex-.5);u=parseInt(u.toFixed(0)),this.IsKLineFrame&&(u=this.CursorIndex);var p=f.Data.DataOffset+u;if(p>=f.Data.Data.length&&(p=f.Data.Data.length-1),p<0)continue;if(null==(m=f.Data.Data[p]))continue;"HistoryData-Vol"==f.DataType?(m=m.Vol,C=this.FormatValue(m,f)):C="MultiReport"==f.DataType?this.FormatMultiReport(m,f):this.FormatValue(m,f)}this.Canvas.fillStyle=f.Color;var D=f.Name+":"+C,s=this.Canvas.measureText(D).width+2;if(i+s>n)break;this.Canvas.fillText(D,i,r,s),i+=s}}if(this.Explain){this.Canvas.fillStyle=this.TitleColor;var D="说明:"+this.Explain,s=this.Canvas.measureText(D).width+2;i+s<n&&(this.Canvas.fillText(D,i,r,s),i+=s)}1==this.OverlayIndexType.Position?this.DrawOverlayIndexSingleLine():this.DrawOverlayIndex(i+5*c())},this.OnDrawEventCallback=function(t){if(this.OnDrawEvent&&this.OnDrawEvent.Callback){var e={Draw:t,Name:"DynamicChartTitlePainting"};this.OnDrawEvent.Callback(this.OnDrawEvent,e,this)}}}function Re(){this.Frame,this.Canvas,this.Point=new Array,this.Value=new Array,this.LinePoint=[],this.PointCount=2,this.Status=0,this.PointStatus=0,this.MovePointIndex=null,this.ClassName="IChartDrawPicture",this.FinishedCallback,this.Guid=C(),this.Symbol,this.Period,this.Right,this.IsSelected=!1,this.Option,this.EnableMove=!0,this.IsDrawFirst=!1,this.LineColor=$r.DrawPicture.LineColor[0],this.LineWidth=2,this.BackupLineWidth=null,this.AreaColor="rgba(25,25,25,0.4)",this.PointColor=$r.DrawPicture.PointColor[0],this.MoveOnPointColor=$r.DrawPicture.PointColor[1],this.PointRadius=5,this.SquareSize=8,this.PointType=$r.DrawPicture.PointType,this.IsShowPoint=$r.DrawPicture.IsShowPoint,this.SetLastPoint=null,this.Update=null,this.GetActiveDrawPicture=null,this.Draw=function(){},this.SetOption=function(t){t&&(t.LineColor&&(this.LineColor=t.LineColor),t.LineWidth>0&&(this.LineWidth=t.LineWidth),t.AreaColor&&(this.AreaColor=t.AreaColor),t.PointColor&&(this.PointColor=t.PointColor),t.MoveOnPointColor&&(this.SelectPointColor=t.PointColor),t.PointRadius&&(this.PointRadius=t.PointRadius),he.IsNumber(t.SquareSize)&&(this.SquareSize=t.SquareSize),he.IsBool(t.IsShowPoint)&&(this.IsShowPoint=t.IsShowPoint))},this.SetLineWidth=function(){this.BackupLineWidth=null,this.LineWidth>0&&(this.BackupLineWidth=this.Canvas.lineWidth,this.Canvas.lineWidth=this.LineWidth*c())},this.GetFontHeight=function(t){return d(this.Canvas,t,"擎")},this.RestoreLineWidth=function(){null!=this.BackupLineWidth&&(this.Canvas.lineWidth=this.BackupLineWidth)},this.PointToValue=function(){return!!this.Frame&&("MinuteFrame"==this.Frame.ClassName||"MinuteHScreenFrame"==this.Frame.Class?this.PointToValue_Minute():this.PointToValue_KLine())},this.PointToKLine=function(t){if(!this.Frame)return null;var e=this.Frame.Data;if(!e)return null;var a=[];if(this.Frame.IsHScreen)for(var i in t){var r=t[i],n=parseInt(this.Frame.GetXData(r.Y))+e.DataOffset,s=this.Frame.GetYData(r.X),o={XValue:n,YValue:s},h=e.Data[n];o.DateTime={Date:h.Date},he.IsNumber(h.Time)&&(o.DateTime.Time=h.Time),a[i]=o}else for(var i in t){var r=t[i],l=parseInt(this.Frame.GetXData(r.X,!1)),n=l+e.DataOffset;n<0?n=0:n>=e.Data.length&&(n=e.Data.length-1,l=n-e.DataOffset);var s=this.Frame.GetYData(r.Y,!1),o={XValue:n,YValue:s,XIndex:l},h=e.Data[n];o.DateTime={Date:h.Date},he.IsNumber(h.Time)&&(o.DateTime.Time=h.Time),a[i]=o}return a},this.PointToValue_KLine=function(){if(!this.Frame)return!1;var t=this.Frame.Data;if(!t)return!1;if(this.Frame.IsHScreen)for(var e in this.Point){var a=this.Point[e],i=parseInt(this.Frame.GetXData(a.Y))+t.DataOffset,r=this.Frame.GetYData(a.X),n={XValue:i,YValue:r},s=t.Data[i];n.DateTime={Date:s.Date},he.IsNumber(s.Time)&&(n.DateTime.Time=s.Time),this.Value[e]=n}else for(var e in this.Point){var a=this.Point[e],i=parseInt(this.Frame.GetXData(a.X,!1))+t.DataOffset;i<0?i=0:i>=t.Data.length&&(i=t.Data.length-1);var r=this.Frame.GetYData(a.Y,!1),n={XValue:i,YValue:r},s=t.Data[i];n.DateTime={Date:s.Date},he.IsNumber(s.Time)&&(n.DateTime.Time=s.Time),this.Value[e]=n}return!0},this.PointToValue_Minute=function(){if(!this.Frame)return!1;var t=this.Frame.Data;if(!t)return!1;if(this.Frame.IsHScreen)for(var e=0;e<this.Point.length;++e){var a=this.Point[e],i=parseInt(this.Frame.GetXData(a.Y)),r=this.Frame.GetYData(a.X),n={XValue:i,YValue:r},s=t.Data[i];n.DateTime={Date:s.Date,Time:s.Time},this.Value[e]=n}else for(var o=rn.GetTimeData(this.Symbol),e=0;e<this.Point.length;++e){var a=this.Point[e],i=parseInt(this.Frame.GetXData(a.X)),r=this.Frame.GetYData(a.Y);if(i>=t.Data.length){var h=i%o.length,l=t.Data.length-1,n={XValue:i,YValue:r},s=t.Data[l],u=o[h];n.DateTime={Date:s.Date,Time:u},this.Value[e]=n}else{var n={XValue:i,YValue:r},s=t.Data[i];n.DateTime={Date:s.Date,Time:s.Time},this.Value[e]=n}}return!0},this.IsPointIn=function(t,e){return!1},this.ValueToPoint=function(){if(!this.Frame)return!1;var t=this.Frame.Data;if(!t)return!1;var e=this.Frame.IsHScreen;this.Point=[];for(var a in this.Value){var i=this.Value[a],r=new S;e?(r.Y=this.Frame.GetXFromIndex(i.XValue-t.DataOffset),r.X=this.Frame.GetYFromData(i.YValue)):(r.X=this.Frame.GetXFromIndex(i.XValue-t.DataOffset,!1),r.Y=this.Frame.GetYFromData(i.YValue,!1)),this.Point[a]=r}},this.UpdateXValue=function(){if(!this.Frame)return!1;var t=this.Frame.Data;if(!t)return!1;var e=[];for(var a in this.Value){var i=this.Value[a],r={Date:i.DateTime.Date};he.IsNumber(i.DateTime.Time)&&(r.Time=i.DateTime.Time),e[a]=r}t.FindDataIndexByDateTime(e);for(var a in e){var n=e[a],s=this.Value[a];n.Index>=0&&(s.XValue=n.Index)}},this.Move=function(t,e){if(20!=this.Status)return fasle;if(!this.Frame)return!1;if(!this.Frame.Data)return!1;if(null==this.MovePointIndex)return!1;var a=parseInt(this.MovePointIndex);if(100===a)for(var i in this.Point)this.Point[i].X+=t,this.Point[i].Y+=e;else{if(0!==a&&1!==a&&2!==a&&3!==a&&4!==a&&5!==a)return!1;a<this.Point.length&&(this.Point[a].X+=t,this.Point[a].Y+=e)}},this.ClipFrame=function(){if(this.Frame.IsHScreen)var t=this.Frame.ChartBorder.GetLeftEx(),e=this.Frame.ChartBorder.GetTop(),a=this.Frame.ChartBorder.GetWidthEx(),i=this.Frame.ChartBorder.GetHeight();else var t=this.Frame.ChartBorder.GetLeft(),e=this.Frame.ChartBorder.GetTopEx(),a=this.Frame.ChartBorder.GetWidth(),i=this.Frame.ChartBorder.GetHeightEx();this.Canvas.save(),this.Canvas.beginPath(),this.Canvas.rect(t,e,a,i),this.Canvas.clip()},this.CalculateDrawPoint=function(t){if(this.Status<2)return null;if(!this.Point.length||!this.Frame)return null;var e=new Array;if(10==this.Status){var a=this.Frame.Data;if(!a)return null;var i=this.Frame.XPointCount,r=0,n=this.Frame.IsHScreen;for(var s in this.Value){var o=this.Value[s],h=o.XValue-a.DataOffset;(h<0||h>=i)&&++r;var l=new S;n?(l.Y=this.Frame.GetXFromIndex(o.XValue-a.DataOffset,!1),l.X=this.Frame.GetYFromData(o.YValue,!1)):(l.X=this.Frame.GetXFromIndex(o.XValue-a.DataOffset,!1),l.Y=this.Frame.GetYFromData(o.YValue,!1)),e.push(l)}if(t&&!0===t.IsCheckX&&r==this.Value.length)return null}else e=this.Point;return e},this.IsYValueInFrame=function(t){return!!this.Frame&&!(t>this.Frame.HorizontalMax||t<this.Frame.HorizontalMin)},this.DrawPoint=function(t){if(t&&!(t.length<=0)){var e=this.PointColor;if(this.IsShowPoint);else if(this.GetActiveDrawPicture){var a=this.GetActiveDrawPicture();if(a.Move.Guid!=this.Guid&&a.Select.Guid!=this.Guid&&a.MoveOn.Guid!=this.Guid)return;a.Select.Guid!=this.Guid&&a.MoveOn.Guid==this.Guid&&(e=this.MoveOnPointColor)}this.ClipFrame();var i=c();this.Canvas.fillStyle=e;for(var r in t){var n=t[r];if(1==this.PointType){var s=this.SquareSize*i,o=n.X-s/2,h=n.Y-s/2;this.Canvas.fillRect(o,h,s,s)}else this.Canvas.beginPath(),this.Canvas.arc(n.X,n.Y,this.PointRadius*i,0,360,!1),this.Canvas.fill(),this.Canvas.closePath()}this.Canvas.restore()}},this.CalculateExtendLinePoint=function(t,e){var a={},i=(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetRight(),this.Frame.ChartBorder.GetTopEx()),r=this.Frame.ChartBorder.GetBottom(),n=e.X-t.X,s=e.Y-t.Y;if(n>0){var o=r-t.Y,h=n*o/s,l=new S;l.X=t.X+h,l.Y=r,a.End=l;var o=e.Y-i,h=n*o/s,u=new S;u.Y=i,u.X=e.X-h,a.Start=u}else{var o=r-t.Y,h=Math.abs(n)*o/s,l=new S;l.X=t.X-h,l.Y=r,a.End=l;var o=e.Y-i,h=Math.abs(n)*o/s,u=new S;u.Y=i,u.X=e.X+h,a.Start=u}return a},this.CalculateExtendLineEndPoint=function(t){var e=this.Frame.ChartBorder.GetLeft(),a=this.Frame.ChartBorder.GetRight(),i=t[1].X-t[0].X,r=t[1].Y-t[0].Y;if(i>0){var n=a-t[0].X,s=n*r/i,o=s+t[0].Y,h=new S;return h.X=a,h.Y=o,h}var n=t[0].X-e,s=n*r/Math.abs(i),o=s+t[0].Y,h=new S;return h.X=e,h.Y=o,h},this.IsPointInXYValue=function(t,e){if(!this.Frame)return-1;var a=this.Frame.Data;if(!a)return-1;if(!this.Value)return-1;var i=5;this.Option&&(i+=this.Option.Zoom);var r=this.Frame.IsHScreen;i*=c();for(var n=0;n<this.Value.length;++n){var s=this.Value[n],o=new S;if(r?(o.Y=this.Frame.GetXFromIndex(s.XValue-a.DataOffset),o.X=this.Frame.GetYFromData(s.YValue)):(o.X=this.Frame.GetXFromIndex(s.XValue-a.DataOffset),o.Y=this.Frame.GetYFromData(s.YValue)),this.Canvas.beginPath(),this.Canvas.arc(o.X,o.Y,i,0,360),this.Canvas.isPointInPath(t,e))return n}return-1},this.IsPointInLine=function(t,e){if(!this.LinePoint)return-1;var a=5;this.Option&&(a+=this.Option.Zoom),a*=c();for(var i in this.LinePoint){var r=this.LinePoint[i],n=r.Start,s=r.End;if(this.Canvas.beginPath(),n.X==s.X?(this.Canvas.moveTo(n.X-a,n.Y),this.Canvas.lineTo(n.X+a,n.Y),this.Canvas.lineTo(s.X+a,s.Y),this.Canvas.lineTo(s.X-a,s.Y)):(this.Canvas.moveTo(n.X,n.Y+a),this.Canvas.lineTo(n.X,n.Y-a),this.Canvas.lineTo(s.X,s.Y-a),this.Canvas.lineTo(s.X,s.Y+a)),this.Canvas.closePath(),this.Canvas.isPointInPath(t,e))return i}return-1},this.IsPointIn_XYValue_Line=function(t,e){if(10!=this.Status)return-1;var a=this.IsPointInXYValue(t,e);return a>=0?a:(a=this.IsPointInLine(t,e),a>=0?100:-1)},this.DrawLine=function(t,e,a){a&&this.Canvas.setLineDash([5,10]),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(t.X,t.Y),this.Canvas.lineTo(e.X,e.Y),this.Canvas.stroke(),a&&this.Canvas.setLineDash([])},this.CreateLineData=function(t,e){var a={Start:new S,End:new S};return a.Start.Y=t.Y,a.Start.X=t.X,a.End.Y=e.Y,a.End.X=e.X,a},this.ExportStorageData=function(){var t={ClassName:this.ClassName,Symbol:this.Symbol,Guid:this.Guid,Period:this.Period,Value:[],FrameID:this.Frame.Identify,LineColor:this.LineColor,AreaColor:this.AreaColor,LineWidth:this.LineWidth,Right:this.Right};for(var e in this.Value){var a=this.Value[e];t.Value.push({XValue:a.XValue,YValue:a.YValue,DateTime:a.DateTime})}return this.Text&&(t.Text=this.Text),this.FontOption&&(t.FontOption=this.FontOption),t},this.IsFrameMinSize=function(){return this.Frame&&this.Frame.IsMinSize},this.PointRange=function(t){if(!he.IsNonEmptyArray(t))return null;if(1==t.length){var e={Points:[{X:t[0].X,Y:t[0].Y}]};return e}for(var a=t[0].X,i=a,r=t[0].Y,n=r,s=[{X:t[0].X,Y:t[0].Y}],o=1;o<t.length;++o)a<t[o].X&&(a=t[o].X),i>t[o].X&&(i=t[o].X),r<t[o].Y&&(r=t[o].Y),n>t[o].Y&&(n=t[o].Y),s.push({X:t[o].X,Y:t[o].Y});var e={X:{Max:{X:a},Min:{X:i}},Y:{Max:{Y:r},Min:{Y:n}},Points:s};return e},this.GetXYCoordinate_default=function(){if(this.IsFrameMinSize())return null;var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});return this.PointRange(t)},this.GetXYCoordinate=function(){return null}}function ke(){this.newMethod=Re,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureLine",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.ClipFrame();var e=t[0],a=t[1];this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(e.X,e.Y),this.Canvas.lineTo(a.X,a.Y),this.Canvas.stroke(),this.RestoreLineWidth();var i={Start:e,End:a};this.LinePoint.push(i),this.DrawPoint(t),this.Canvas.restore()}}}}function Be(){this.newMethod=Re,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawGraffitiLine",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=null,this.PointCount=2,this.PointToValue=function(){if(!this.Frame)return!1;if(this.Frame.IsHScreen)for(var t=0;t<this.Point.length;++t){var e=this.Point[t],a=this.Frame.GetYData(e.X),i={XValue:e.Y,YValue:a};this.Value[t]=i}else for(var t=0;t<this.Point.length;++t){var e=this.Point[t],a=this.Frame.GetYData(e.Y),i={XValue:e.X,YValue:a};this.Value[t]=i}return!0},this.ValueToPoint=function(){if(!this.Frame)return!1;var t=this.Frame.IsHScreen;this.Point=[];for(var e in this.Value){var a=this.Value[e],i=new S;t?(i.Y=a.XValue,i.X=this.Frame.GetYFromData(a.YValue)):(i.X=a.XValue,i.Y=this.Frame.GetYFromData(a.YValue,!1)),this.Point[e]=i}},this.UpdateXValue=function(){},this.CalculateDrawPoint=function(t){if(this.Status<2)return null;if(!this.Point.length||!this.Frame)return null;var e=[];if(10==this.Status){var a=this.Frame.IsHScreen;for(var i in this.Value){var r=this.Value[i],n=new S;a?(n.Y=r.XValue,n.X=this.Frame.GetYFromData(r.YValue,!1)):(n.X=r.XValue,n.Y=this.Frame.GetYFromData(r.YValue,!1)),e.push(n)}}else e=this.Point;return e},this.IsPointInXYValue=function(t,e){if(!this.Frame)return-1;if(!this.Value)return-1;var a=5;this.Option&&(a+=this.Option.Zoom);var i=this.Frame.IsHScreen;a*=c();for(var r=0;r<this.Value.length;++r){var n=this.Value[r],s=new S;if(i?(s.Y=n.XValue,s.X,this.Frame.GetYFromData(n.YValue)):(s.X=n.XValue,s.Y=this.Frame.GetYFromData(n.YValue)),this.Canvas.beginPath(),this.Canvas.arc(s.X,s.Y,a,0,360),this.Canvas.isPointInPath(t,e))return r}return-1},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.ClipFrame();var e=t[0],a=t[1];this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(e.X,e.Y),this.Canvas.lineTo(a.X,a.Y),this.Canvas.stroke(),this.RestoreLineWidth();var i={Start:e,End:a};this.LinePoint.push(i),this.DrawPoint(t),this.Canvas.restore()}}}}function Ye(){this.newMethod=Re,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawArrowLine",this.IsPointIn=this.IsPointIn_XYValue_Line,this.ArrawLineWidth=5,this.ArrawLength=15,this.ArrawAngle=35,this.GetXYCoordinate=this.GetXYCoordinate_default,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.ClipFrame();var e=t[0],a=t[1],i=this.ArrawAngle,r=this.ArrawLength,n=180*Math.atan2(e.Y-a.Y,e.X-a.X)/Math.PI,s=(n+i)*Math.PI/180,o=(n-i)*Math.PI/180,h=r*Math.cos(s),l=r*Math.sin(s),u=r*Math.cos(o),d=r*Math.sin(o);this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(e.X,e.Y),this.Canvas.lineTo(a.X,a.Y),this.Canvas.stroke(),this.Canvas.beginPath();var f=a.X+h,m=a.Y+l;this.Canvas.moveTo(f,m),this.Canvas.lineTo(a.X,a.Y),f=a.X+u,m=a.Y+d,this.Canvas.lineTo(f,m),this.Canvas.lineWidth=this.ArrawLineWidth*c(),this.Canvas.stroke(),this.RestoreLineWidth();var C={Start:e,End:a};this.LinePoint.push(C),this.DrawPoint([t[0]]),this.Canvas.restore()}}}}function He(){this.newMethod=Re,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureHaflLine",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){var e=t[0],a=t[1];this.ClipFrame(),this.Canvas.strokeStyle=this.LineColor,this.SetLineWidth(),this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y),this.Canvas.lineTo(t[1].X,t[1].Y);var i=this.CalculateExtendLineEndPoint(t);this.Canvas.lineTo(i.X,i.Y),this.Canvas.stroke(),this.RestoreLineWidth();var r={Start:e,End:a};this.LinePoint.push(r),this.DrawPoint(t),this.Canvas.restore()}}}}function Ve(){this.newMethod=Re,this.newMethod(),delete this.newMethod,this.Super_SetOption=this.SetOption,this.Super_ExportStorageData=this.ExportStorageData,this.Label,this.SetOption=function(t){this.Super_SetOption&&this.Super_SetOption(t),t&&t.Label&&(this.Label=t.Label)},this.ExportStorageData=function(){var t;return this.Super_ExportStorageData&&(t=this.Super_ExportStorageData(),this.Label&&(t.Label=this.Label)),t},this.PointCount=1,this.ClassName="ChartDrawPictureHorizontalLine",this.IsPointIn=this.IsPointIn_XYValue_Line,this.Font=16*c()+"px 微软雅黑",this.GetXYCoordinate=function(){if(this.IsFrameMinSize())return null;var t=this.CalculateDrawPoint();return this.PointRange(t)},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint();if(t&&1==t.length&&this.Frame&&1==this.Value.length){if(!this.IsYValueInFrame(this.Value[0].YValue))return null;var e=this.Frame.IsHScreen,a=this.Frame.ChartBorder.GetLeft(),i=this.Frame.ChartBorder.GetRight();e&&(a=this.Frame.ChartBorder.GetTop(),i=this.Frame.ChartBorder.GetBottom()),this.ClipFrame(),this.Canvas.strokeStyle=this.LineColor,this.SetLineWidth(),this.Canvas.beginPath(),e?(this.Canvas.moveTo(t[0].X,a),this.Canvas.lineTo(t[0].X,i)):(this.Canvas.moveTo(a,t[0].Y),this.Canvas.lineTo(i,t[0].Y)),this.Canvas.stroke(),this.RestoreLineWidth();var r={Start:new S,End:new S};if(e?(r.Start.X=t[0].X,r.Start.Y=a,r.End.X=t[0].X,r.End.Y=i):(r.Start.X=a,r.Start.Y=t[0].Y,r.End.X=i,r.End.Y=t[0].Y),this.LinePoint.push(r),this.DrawPoint(t),this.Canvas.fillStyle=this.LineColor,this.Canvas.font=this.Font,e){this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom";var n=t[0].X,s=a;this.Canvas.translate(n,s),this.Canvas.rotate(90*Math.PI/180);var o=this.Frame.GetYData(t[0].X),h=o.toFixed(2);this.Label&&(0==this.Label.Position?h=this.Label.Text+o.toFixed(2):1==this.Label.Position&&(h=o.toFixed(2)+this.Label.Text)),this.Canvas.fillText(h,0,0)}else{this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom";var o=this.Frame.GetYData(t[0].Y),h=o.toFixed(2);this.Label&&(0==this.Label.Position?h=this.Label.Text+o.toFixed(2):1==this.Label.Position&&(h=o.toFixed(2)+this.Label.Text)),this.Canvas.fillText(h,a,t[0].Y)}this.Canvas.restore()}}}}function Ge(){this.newMethod=Re,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureTrendLine",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){var e=t[0],a=t[1],i=this.CalculateExtendLinePoint(e,a);this.ClipFrame(),this.Canvas.strokeStyle=this.LineColor,this.SetLineWidth(),this.Canvas.beginPath(),this.Canvas.moveTo(i.Start.X,i.Start.Y),this.Canvas.lineTo(i.End.X,i.End.Y),this.Canvas.stroke(),this.RestoreLineWidth();var r={Start:e,End:a};this.LinePoint.push(r),this.DrawPoint(t),this.Canvas.restore()}}}}function We(){this.newMethod=Re,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureRect",this.GetXYCoordinate=this.GetXYCoordinate_default,this.Draw=function(){if(!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});t&&2==t.length&&(this.AreaColor=Re.ColorToRGBA(this.LineColor,.3),this.ClipFrame(),this.Canvas.strokeStyle=this.LineColor,this.SetLineWidth(),this.Canvas.beginPath(),this.Canvas.rect(t[0].X,t[0].Y,t[1].X-t[0].X,t[1].Y-t[0].Y),this.Canvas.stroke(),this.RestoreLineWidth(),this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.fillRect(t[0].X,t[0].Y,t[1].X-t[0].X,t[1].Y-t[0].Y),this.Canvas.restore(),this.DrawPoint(t))}},this.IsPointIn=function(t,e){if(this.IsFrameMinSize())return-1;if(!this.Frame||10!=this.Status)return-1;if(!this.Frame.Data)return-1;var a=this.IsPointInXYValue(t,e);if(a>=0)return a;var i=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(!i||2!=i.length)return-1;var r=[{X:i[0].X,Y:i[0].Y},{X:i[1].X,Y:i[0].Y}];return this.IsPointInLine(r,t,e)?100:(r=[{X:i[1].X,Y:i[0].Y},{X:i[1].X,Y:i[1].Y}],this.IsPointInLine2(r,t,e)?100:(r=[{X:i[1].X,Y:i[1].Y},{X:i[0].X,Y:i[1].Y}],this.IsPointInLine(r,t,e)?100:(r=[{X:i[0].X,Y:i[1].Y},{X:i[0].X,Y:i[0].Y}],this.IsPointInLine2(r,t,e)?100:-1)))},this.IsPointInLine=function(t,e,a){var i=5;if(this.Option&&(i+=this.Option.Zoom),i*=c(),this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y+i),this.Canvas.lineTo(t[0].X,t[0].Y-i),this.Canvas.lineTo(t[1].X,t[1].Y-i),this.Canvas.lineTo(t[1].X,t[1].Y+i),this.Canvas.closePath(),this.Canvas.isPointInPath(e,a))return!0},this.IsPointInLine2=function(t,e,a){var i=5;if(this.Option&&(i+=this.Option.Zoom),i*=c(),this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X-i,t[0].Y),this.Canvas.lineTo(t[0].X+i,t[0].Y),this.Canvas.lineTo(t[1].X+i,t[1].Y),this.Canvas.lineTo(t[1].X-i,t[1].Y),this.Canvas.closePath(),this.Canvas.isPointInPath(e,a))return!0}}function Xe(){this.newMethod=Re,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureArc",this.Draw=function(){if(!this.IsFrameMinSize()){var t=this.CalculateDrawPoint();if(t&&2==t.length){if(this.ClipFrame(),this.SetLineWidth(),t[0].X<t[1].X&&t[0].Y>t[1].Y){var e=t[1].X-t[0].X,a=t[0].Y-t[1].Y,i=e>a?1/e:1/a,r=t[0].X,n=t[1].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(var s=1.5*Math.PI;s<2*Math.PI;s+=i)this.Canvas.lineTo(r+e*Math.cos(s),n+a*Math.sin(s)*-1);for(var o=0;o<=.5*Math.PI;o+=i)this.Canvas.lineTo(r+e*Math.cos(o),n+a*Math.sin(o)*-1)}else if(t[0].X>t[1].X&&t[0].Y>t[1].Y){var e=t[0].X-t[1].X,a=t[0].Y-t[1].Y,i=e>a?1/e:1/a,r=t[1].X,n=t[0].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(var s=0;s<=Math.PI;s+=i)this.Canvas.lineTo(r+e*Math.cos(s),n+a*Math.sin(s)*-1)}else if(t[0].X>t[1].X&&t[0].Y<t[1].Y){var e=t[0].X-t[1].X,a=t[1].Y-t[0].Y,i=e>a?1/e:1/a,r=t[0].X,n=t[1].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(var s=.5*Math.PI;s<=1.5*Math.PI;s+=i)this.Canvas.lineTo(r+e*Math.cos(s),n+a*Math.sin(s)*-1)}else if(t[0].X<t[1].X&&t[0].Y<t[1].Y){var e=t[1].X-t[0].X,a=t[1].Y-t[0].Y,i=e>a?1/e:1/a,r=t[1].X,n=t[0].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(var s=Math.PI;s<=2*Math.PI;s+=i)this.Canvas.lineTo(r+e*Math.cos(s),n+a*Math.sin(s)*-1)}this.Canvas.strokeStyle=this.LineColor,this.Canvas.stroke(),this.RestoreLineWidth(),this.Canvas.restore(),this.DrawPoint(t)}}},this.IsPointIn=function(t,e){if(this.IsFrameMinSize())return-1;if(!this.Frame||10!=this.Status)return-1;if(!this.Frame.Data)return-1;var a=this.IsPointInXYValue(t,e);if(a>=0)return a;var i=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(!i||2!=i.length)return-1;var r=[{X:i[0].X,Y:i[0].Y},{X:i[1].X,Y:i[1].Y}];return this.IsPointInArc(r,t,e)?100:-1},this.IsPointInArc=function(t,e,a){if(2!=t.length)return!1;if(t[0].X<t[1].X&&t[0].Y>t[1].Y){var i=t[1].X-t[0].X,r=t[0].Y-t[1].Y,n=i>r?1/i:1/r,s=.8*i,o=.8*r,h=s>o?1/s:1/o,l=t[0].X,u=t[1].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(var c=1.5*Math.PI;c<2*Math.PI;c+=n)this.Canvas.lineTo(l+i*Math.cos(c),u+r*Math.sin(c)*-1);for(var d=0;d<=.5*Math.PI;d+=n)this.Canvas.lineTo(l+i*Math.cos(d),u+r*Math.sin(d)*-1);for(var f=.5*Math.PI;f>=0;f-=h)this.Canvas.lineTo(l+s*Math.cos(f),u+o*Math.sin(d)*-1);for(var m=2*Math.PI;m>=1.5*Math.PI;m-=h)this.Canvas.lineTo(l+s*Math.cos(m),u+o*Math.sin(m)*-1);this.Canvas.closePath()}else if(t[0].X>t[1].X&&t[0].Y>t[1].Y){var i=t[0].X-t[1].X,r=t[0].Y-t[1].Y,n=i>r?1/i:1/r,s=.8*i,o=.8*r,h=s>o?1/s:1/o,l=t[1].X,u=t[0].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(var c=0;c<=Math.PI;c+=n)this.Canvas.lineTo(l+i*Math.cos(c),u+r*Math.sin(c)*-1);for(var d=Math.PI;d>=0;d-=h)this.Canvas.lineTo(l+s*Math.cos(d),u+o*Math.sin(d)*-1);this.Canvas.closePath()}else if(t[0].X>t[1].X&&t[0].Y<t[1].Y){var i=t[0].X-t[1].X,r=t[1].Y-t[0].Y,n=i>r?1/i:1/r,s=.8*i,o=.8*r,h=s>o?1/s:1/o,l=t[0].X,u=t[1].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(var c=.5*Math.PI;c<=1.5*Math.PI;c+=n)this.Canvas.lineTo(l+i*Math.cos(c),u+r*Math.sin(c)*-1);for(var d=1.5*Math.PI;d>=.5*Math.PI;d-=h)this.Canvas.lineTo(l+s*Math.cos(d),u+o*Math.sin(d)*-1);this.Canvas.closePath()}else if(t[0].X<t[1].X&&t[0].Y<t[1].Y){var i=t[1].X-t[0].X,r=t[1].Y-t[0].Y,n=i>r?1/i:1/r,s=.8*i,o=.8*r,h=s>o?1/s:1/o,l=t[1].X,u=t[0].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(var c=Math.PI;c<=2*Math.PI;c+=n)this.Canvas.lineTo(l+i*Math.cos(c),u+r*Math.sin(c)*-1);for(var d=2*Math.PI;d>=Math.PI;d-=h)this.Canvas.lineTo(l+s*Math.cos(d),u+o*Math.sin(d)*-1);this.Canvas.closePath()}return!!this.Canvas.isPointInPath(e,a)}}function Ue(){this.newMethod=Re,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureWaveMW",this.PointCount=5,this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.IsHScreen=!1,this.Draw=function(){if(this.IsHScreen=this.Frame.IsHScreen,this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){this.AreaColor=Re.ColorToRGBA(this.LineColor,.3),this.ClipFrame(),this.CalculateLines(t),this.SetLineWidth();for(var e in this.LinePoint){var a=this.LinePoint[e];this.DrawLine(a.Start,a.End)}this.RestoreLineWidth(),this.DrawPoint(t),this.Canvas.restore()}}},this.CalculateLines=function(t){if(this.Frame&&!(t.length<2))if(2==this.Status){var e={Start:new S,End:new S};e.Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[1].Y,e.End.X=t[1].X,this.LinePoint.push(e);var a=t[1].X-t[0].X,i=t[1].Y-t[0].Y;e={Start:new S,End:new S},this.IsHScreen?(e.Start.Y=t[1].Y,e.Start.X=t[1].X,e.End.Y=t[1].Y+i,e.End.X=t[0].X):(e.Start.Y=t[1].Y,e.Start.X=t[1].X,e.End.Y=t[0].Y,e.End.X=t[1].X+a),this.LinePoint.push(e);var r=e.End,n=new S;n.X=r.X,n.Y=r.Y,this.Point[2]=n,e={Start:new S,End:new S},this.IsHScreen?(e.Start.Y=r.Y,e.Start.X=r.X,e.End.Y=r.Y+i,e.End.X=t[1].X):(e.Start.Y=r.Y,e.Start.X=r.X,e.End.Y=t[1].Y,e.End.X=r.X+a),this.LinePoint.push(e);var r=e.End,n=new S;n.X=r.X,n.Y=r.Y,this.Point[3]=n,e={Start:new S,End:new S},this.IsHScreen?(e.Start.Y=r.Y,e.Start.X=r.X,e.End.Y=r.Y+i,e.End.X=t[0].X):(e.Start.Y=r.Y,e.Start.X=r.X,e.End.Y=t[0].Y,e.End.X=r.X+a),this.LinePoint.push(e);var r=e.End,n=new S;n.X=r.X,n.Y=r.Y,this.Point[4]=n,this.PointCount=this.Point.length}else if(5==t.length){var e={Start:new S,End:new S};e.Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[1].Y,e.End.X=t[1].X,this.LinePoint.push(e);var e={Start:new S,End:new S};e.Start.Y=t[1].Y,e.Start.X=t[1].X,e.End.Y=t[2].Y,e.End.X=t[2].X,this.LinePoint.push(e);var e={Start:new S,End:new S};e.Start.Y=t[2].Y,e.Start.X=t[2].X,e.End.Y=t[3].Y,e.End.X=t[3].X,this.LinePoint.push(e);var e={Start:new S,End:new S};e.Start.Y=t[3].Y,e.Start.X=t[3].X,e.End.Y=t[4].Y,e.End.X=t[4].X,this.LinePoint.push(e)}}}function Ke(){this.newMethod=Ue,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawHeadShouldersBT",this.CalculateLines_Backup=this.CalculateLines,this.CalculateLines=function(t){if(this.Frame&&!(t.length<2)){if(2!=this.Status)return this.CalculateLines_Backup(t);var e={Start:new S,End:new S};e.Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[1].Y,e.End.X=t[1].X,this.LinePoint.push(e);var a=t[1].X-t[0].X,i=t[1].Y-t[0].Y;e={Start:new S,End:new S},this.IsHScreen?(e.Start.Y=t[1].Y,e.Start.X=t[1].X,e.End.Y=t[1].Y+i,e.End.X=t[0].X-a):(e.Start.Y=t[1].Y,e.Start.X=t[1].X,e.End.Y=t[0].Y-i,e.End.X=t[1].X+a),this.LinePoint.push(e);var r=e.End,n=new S;n.X=r.X,n.Y=r.Y,this.Point[2]=n,e={Start:new S,End:new S},this.IsHScreen?(e.Start.Y=r.Y,e.Start.X=r.X,e.End.Y=r.Y+i,e.End.X=t[1].X):(e.Start.Y=r.Y,e.Start.X=r.X,e.End.Y=t[1].Y,e.End.X=r.X+a),this.LinePoint.push(e);var r=e.End,n=new S;n.X=r.X,n.Y=r.Y,this.Point[3]=n,e={Start:new S,End:new S},this.IsHScreen?(e.Start.Y=r.Y,e.Start.X=r.X,e.End.Y=r.Y+i,e.End.X=t[0].X):(e.Start.Y=r.Y,e.Start.X=r.X,e.End.Y=t[0].Y,e.End.X=r.X+a),this.LinePoint.push(e);var r=e.End,n=new S;n.X=r.X,n.Y=r.Y,this.Point[4]=n,this.PointCount=this.Point.length}}}function je(){this.newMethod=Re,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureParallelLines",this.IsPointIn=this.IsPointIn_XYValue_Line,this.PointCount=3,this.LastPoint,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){this.AreaColor=Re.ColorToRGBA(this.LineColor,.3);var e=t.slice(0);this.CalculateLines(e),this.ClipFrame();for(var a in this.LinePoint){var i=this.LinePoint[a];this.DrawLine(i.Start,i.End)}this.DrawArea(),this.DrawPoint(e),this.Canvas.restore()}}},this.SetLastPoint=function(t){this.LastPoint={X:t.X,Y:t.Y}},this.DrawArea=function(){2==this.LinePoint.length&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(this.LinePoint[0].Start.X,this.LinePoint[0].Start.Y),this.Canvas.lineTo(this.LinePoint[0].End.X,this.LinePoint[0].End.Y),this.Canvas.lineTo(this.LinePoint[1].End.X,this.LinePoint[1].End.Y),this.Canvas.lineTo(this.LinePoint[1].Start.X,this.LinePoint[1].Start.Y),this.Canvas.closePath(),this.Canvas.fill())},this.CalculateLines=function(t){if(2==this.PointStatus&&this.LastPoint){var e=new S;e.X=this.LastPoint.X,e.Y=this.LastPoint.Y,t[2]=e}if(2==t.length){var a=this.CalculateExtendLinePoint(t[0],t[1]);this.LinePoint.push(a)}else if(3==t.length){var a=this.CalculateExtendLinePoint(t[0],t[1]);this.LinePoint.push(a);var i=t[2].X-t[1].X,r=t[2].Y-t[1].Y,n=new S,s=new S;n.X=t[0].X+i,n.Y=t[0].Y+r,s.X=t[1].X+i,s.Y=t[1].Y+r,a=this.CalculateExtendLinePoint(n,s),this.LinePoint.push(a)}}}function ze(){this.newMethod=je,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawParallelRaysLines",this.DrawArea=function(){},this.CalculateLines=function(t){if(2==this.PointStatus&&this.LastPoint){var e=new S;e.X=this.LastPoint.X,e.Y=this.LastPoint.Y,t[2]=e}if(2==t.length){var a=this.CalculateExtendLineEndPoint([t[0],t[1]]);this.LinePoint.push({Start:t[0],End:a})}else if(3==t.length){var a=this.CalculateExtendLineEndPoint([t[0],t[1]]);this.LinePoint.push({Start:t[0],End:a});var i=t[2].X-t[1].X,r=t[2].Y-t[1].Y,n=new S,s=new S;n.X=t[0].X+i,n.Y=t[0].Y+r,s.X=t[1].X+i,s.Y=t[1].Y+r,a=this.CalculateExtendLineEndPoint([n,s]),this.LinePoint.push({Start:t[2],End:a})}}}function Je(){this.newMethod=je,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPicturePriceChannel",this.CalculateLines=function(t){if(2==this.PointStatus&&this.LastPoint){var e=new S;e.X=this.LastPoint.X,e.Y=this.LastPoint.Y,t[2]=e}if(2==t.length){var a=this.CalculateExtendLinePoint(t[0],t[1]);this.LinePoint.push(a)}else if(3==t.length){var a=this.CalculateExtendLinePoint(t[0],t[1]);this.LinePoint.push(a);var i=t[2].X-t[1].X,r=t[2].Y-t[1].Y,n=new S,s=new S;n.X=t[0].X+i,n.Y=t[0].Y+r,s.X=t[1].X+i,s.Y=t[1].Y+r,a=this.CalculateExtendLinePoint(n,s),this.LinePoint.push(a);var n=new S,s=new S;n.X=t[0].X-i,n.Y=t[0].Y-r,s.X=t[1].X-i,s.Y=t[1].Y-r,a=this.CalculateExtendLinePoint(n,s),this.LinePoint.push(a)}},this.DrawArea=function(){3==this.LinePoint.length&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(this.LinePoint[1].Start.X,this.LinePoint[1].Start.Y),this.Canvas.lineTo(this.LinePoint[1].End.X,this.LinePoint[1].End.Y),this.Canvas.lineTo(this.LinePoint[2].End.X,this.LinePoint[2].End.Y),this.Canvas.lineTo(this.LinePoint[2].Start.X,this.LinePoint[2].Start.Y),this.Canvas.closePath(),this.Canvas.fill())}}function qe(){this.newMethod=Re,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureParallelChannel",this.ChannelWidth=50,this.AreaColor="rgba(25,25,25,0.4)",this.LinePoint=[],this.CalculateDrawPoint=function(){if(this.Status<2)return null;if(!this.Point.length||!this.Frame)return null;var t=this.Frame.Data;if(!t)return null;var e=[];if(10==this.Status)for(var a=0;a<2;++a){var i=this.Value[a],r=new S;r.X=this.Frame.GetXFromIndex(i.XValue-t.DataOffset),r.Y=this.Frame.GetYFromData(i.YValue),e.push(r)}else for(var a=0;a<this.Point.length;++a){var i=this.Point[a],r=new S;r.X=i.X,r.Y=i.Y,e.push(r)}if(e.length>=2){var n={Start:new S,End:new S};if(n.Start.X=e[0].X,n.Start.Y=e[0].Y,n.End.X=e[1].X,n.End.Y=e[1].Y,this.LinePoint.push(n),3==e.length||10==this.Status){var s=n.End.X-n.Start.X,o=n.End.Y-n.Start.Y,h=Math.atan(Math.abs(s/o)),l=this.ChannelWidth/Math.sin(h);n={Start:new S,End:new S},n.Start.X=e[0].X,n.Start.Y=e[0].Y-l,n.End.X=e[1].X,n.End.Y=e[1].Y-l,this.LinePoint.push(n);var u=new S;u.X=n.Start.X+(n.End.X-n.Start.X)/2,u.Y=n.Start.Y+(n.End.Y-n.Start.Y)/2,e[3]=u,this.Point[2]=u;var c=parseInt(this.Frame.GetXData(u.X))+t.DataOffset,d=this.Frame.GetYData(u.Y);this.Value[2]={XValue:c,YValue:d},this.PointCount=this.Point.length}}return e},this.DrawLine=function(t,e){this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(t.X,t.Y),this.Canvas.lineTo(e.X,e.Y),this.Canvas.stroke()},this.DrawArea=function(t,e,a,i){this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(t.X,t.Y),this.Canvas.lineTo(e.X,e.Y),this.Canvas.lineTo(a.X,a.Y),this.Canvas.lineTo(i.X,i.Y),this.Canvas.closePath(),this.Canvas.fill()},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint();if(t){this.AreaColor=Re.ColorToRGBA(this.LineColor,.3),this.ClipFrame();for(var e in this.LinePoint){var a=this.LinePoint[e];this.DrawLine(a.Start,a.End)}2==this.LinePoint.length&&this.DrawArea(this.LinePoint[0].Start,this.LinePoint[0].End,this.LinePoint[1].End,this.LinePoint[1].Start),this.Canvas.restore(),this.DrawPoint(t)}}},this.Move=function(t,e){if(20!=this.Status)return fasle;if(!this.Frame)return!1;if(!this.Frame.Data)return!1;if(100==this.MovePointIndex)for(var a in this.Point)this.Point[a].X+=t,this.Point[a].Y+=e;else if(0==this.MovePointIndex||1==this.MovePointIndex)this.MovePointIndex<this.Point.length&&(this.Point[this.MovePointIndex].X+=t,this.Point[this.MovePointIndex].Y+=e);else if(2==this.MovePointIndex){this.Point[this.MovePointIndex].X+=t,this.Point[this.MovePointIndex].Y+=e;var i=this.Point[1].X-this.Point[0].X,r=this.Point[1].Y-this.Point[0].Y,n=Math.atan(Math.abs(i/r)),s=this.ChannelWidth/Math.sin(n)-e;this.ChannelWidth=Math.sin(n)*s}},this.IsPointIn=function(t,e){if(!this.Frame||10!=this.Status)return-1;var a=this.Frame.Data;if(!a)return-1;for(var i=0;i<this.Value.length;++i){var r=this.Value[i],n=new S;if(i<2)n.X=this.Frame.GetXFromIndex(r.XValue-a.DataOffset),n.Y=this.Frame.GetYFromData(r.YValue);else{if(i>=this.Point.length)continue;n.X=this.Point[i].X,n.Y=this.Point[i].Y}if(this.Canvas.beginPath(),this.Canvas.arc(n.X,n.Y,5,0,360),this.Canvas.isPointInPath(t,e))return i}for(var i in this.LinePoint){var r=this.LinePoint[i],s=r.Start,o=r.End;if(this.Canvas.beginPath(),this.Canvas.moveTo(s.X,s.Y+5),this.Canvas.lineTo(s.X,s.Y-5),this.Canvas.lineTo(o.X,o.Y-5),this.Canvas.lineTo(o.X,o.Y+5),this.Canvas.closePath(),this.Canvas.isPointInPath(t,e))return 100}return-1}}function Ze(){this.newMethod=Re,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureText",this.Text="文本",this.PointCount=1,this.FontOption={Family:"微软雅黑",Size:20,Weight:null,Style:null},this.TextRect=null,this.IsInitialized=!1,this.SettingMenu,this.HQChart,this.SetOption=function(t){t&&(t.LineColor&&(this.LineColor=t.LineColor),t.Text&&(this.Text=t.Text),t.FontOption&&(this.FontOption=t.FontOption))},this.Draw=function(t){if(this.TextRect=null,!this.IsFrameMinSize()){var e=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(e&&1==e.length){this.ClipFrame(),this.Canvas.fillStyle=this.LineColor,this.Canvas.textAlign="center",this.Canvas.textBaseline="bottom",this.Canvas.font=this.GetTextFont(),this.Canvas.fillText(this.Text,e[0].X,e[0].Y);var a=this.Canvas.measureText(this.Text).width,i=this.FontOption.Size*c();this.TextRect={},this.TextRect.Left=e[0].X-a/2,this.TextRect.Top=e[0].Y-i,this.TextRect.Width=a,this.TextRect.Height=i,this.Canvas.restore(),!1===this.IsInitialized&&(this.SetTextOption(),this.IsInitialized=!0)}}},this.GetTextFont=function(){var t=16*c()+"px 微软雅黑";if(!this.FontOption||!this.FontOption.Family||this.FontOption.Size<=0)return t;var e="";return this.FontOption.Color&&(e+=this.FontOption.Color+" "),this.FontOption.Style&&(e+=this.FontOption.Style+" "),this.FontOption.Weight&&(e+=this.FontOption.Weight+" "),this.FontOption.Size>=0&&(e+=this.FontOption.Size*c()+"px "),e+=this.FontOption.Family},this.SetTextOption=function(){Fr.Chart.Log("[ChartDrawPictureText::SetTextOption]"),this.SettingMenu||(this.SettingMenu=new Ii(this.Frame.ChartBorder.UIElement.parentNode)),this.SettingMenu.ChartPicture=this,this.SettingMenu.HQChart=this.HQChart,this.SettingMenu.Position={Left:this.TextRect.Left+this.TextRect.Width,Top:this.TextRect.Top},this.SettingMenu.DoModal()},this.IsPointIn=function(t,e){return this.Frame&&10==this.Status&&this.Frame.Data&&this.TextRect?(this.Canvas.beginPath(),this.Canvas.rect(this.TextRect.Left,this.TextRect.Top,this.TextRect.Width,this.TextRect.Height),this.Canvas.isPointInPath(t,e)?100:-1):-1}}function Qe(){this.newMethod=Re,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureIconFont",this.PointCount=1,this.Text="",this.FontOption={Family:"iconfont",Size:24},this.TextRect=null,this.SettingMenu,this.Angle=0,this.SetOption=function(t){t&&(t.LineColor&&(this.LineColor=t.LineColor),t.FontOption&&t.FontOption.Size>0&&(this.FontOption.Size=t.FontOption.Size),he.IsNumber(t.Angle)&&(this.Angle=t.Angle))},this.Draw=function(){if(this.TextRect=null,!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&1==t.length){var e=this.GetTextFont();if(e){this.ClipFrame();var a=this.Frame.IsHScreen,i=c();this.Canvas.fillStyle=this.LineColor,this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.font=e,a?(this.Canvas.translate(t[0].X,t[0].Y),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(this.Text,0,0)):0!=this.Angle?(this.Canvas.translate(t[0].X,t[0].Y),this.Canvas.rotate(this.Angle*(Math.PI/180)),this.Canvas.fillText(this.Text,0,0)):this.Canvas.fillText(this.Text,t[0].X,t[0].Y);var r=this.Canvas.measureText(this.Text).width;this.TextRect={},this.TextRect.Left=t[0].X-r/2,this.TextRect.Top=t[0].Y-this.FontOption.Size*i,this.TextRect.Width=r,this.TextRect.Height=this.FontOption.Size*i,this.Canvas.restore()}}}},this.GetTextFont=function(){if(!this.FontOption||!this.FontOption.Family||this.FontOption.Size<=0)return null;var t="";return this.FontOption.Size>=0&&(t+=this.FontOption.Size*c()+"px "),t+=this.FontOption.Family},this.IsPointIn=function(t,e){if(!this.Frame||10!=this.Status)return-1;if(!this.Frame.Data)return-1;if(!this.TextRect)return-1;var a=0;return this.Option&&this.Option.Zoom>=1&&(a=this.Option.Zoom*c()),this.Canvas.beginPath(),this.Canvas.rect(this.TextRect.Left-a,this.TextRect.Top-a,this.TextRect.Width+2*a,this.TextRect.Height+2*a),this.Canvas.isPointInPath(t,e)?100:-1}}function $e(){this.newMethod=Re,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureGannFan",this.IsPointIn=this.IsPointIn_XYValue_Line,this.LinePoint=[],this.Font=16*c()+"px 微软雅黑",this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.AreaColor=Re.ColorToRGBA(this.LineColor,.3),this.ClipFrame();var e=this.GetQuadrant(t[0],t[1]);if(this.SetLineWidth(),1===e||4===e){this.CalculateLines(t[0],t[1],e),this.DrawArea();for(var a in this.LinePoint){var i=this.LinePoint[a];this.DrawLine(i.Start,i.End,i.IsDottedLine)}for(var a in this.LinePoint){var i=this.LinePoint[a];i.Text&&i.PtEnd&&this.DrawTitle(i.PtEnd,i.Text)}}else this.DrawLine(t[0],t[1],!1);this.RestoreLineWidth(),this.Canvas.restore(),this.DrawPoint(t)}}},this.GetQuadrant=function(t,e){return t.X<e.X&&t.Y>e.Y?1:t.X<e.X&&t.Y>e.Y?2:t.X<e.X&&t.Y<e.Y?4:3},this.DrawLine=function(t,e,a){a&&this.Canvas.setLineDash([5,10]),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(t.X,t.Y),this.Canvas.lineTo(e.X,e.Y),this.Canvas.stroke(),a&&this.Canvas.setLineDash([])},this.DrawTitle=function(t,e){this.Canvas.fillStyle=this.LineColor,this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom",this.Canvas.font=this.Font,this.Canvas.fillText(e,t.X,t.Y)},this.DrawArea=function(){var t=null,e=null;for(var a in this.LinePoint){var i=this.LinePoint[a];"1:8"==i.Text?t=this.LinePoint[a]:"8:1"==i.Text&&(e=this.LinePoint[a])}t&&e&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(t.End.X,t.End.Y),this.Canvas.lineTo(t.Start.X,t.Start.Y),this.Canvas.lineTo(e.End.X,e.End.Y),this.Canvas.closePath(),this.Canvas.fill())},this.CalculateLines=function(t,e,a){if(!this.Frame)return!1;var i=(this.Frame.ChartBorder.GetTopEx(),this.Frame.ChartBorder.GetRight(),this.Frame.ChartBorder.GetBottom(),[.5,1/3,.25,.125,2/3]),r=["1:2","1:3","1:4","1:8","2:3"],n=["2:1","3:1","4:1","8:1","3:2"],s=new S,o=new S;s.X=t.X,s.Y=t.Y,o.X=e.X,o.Y=e.Y;var h=Math.abs(t.X-e.X),l=Math.abs(t.Y-e.Y);if(1===a){var u=this.CalculateExtendLinePoint(t,e),c={Start:s,End:u.Start,IsDottedLine:!1,PtEnd:o,Text:"1:1"};this.LinePoint.push(c);for(var d in i){if(h>5){c={Start:s,End:null,IsDottedLine:!1,PtEnd:new S,Text:r[d]},c.PtEnd.Y=e.Y,c.PtEnd.X=t.X+h*i[d];var u=this.CalculateExtendLinePoint(c.Start,c.PtEnd);c.End=u.Start,this.LinePoint.push(c)}if(l>5){c={Start:s,End:null,IsDottedLine:!1,PtEnd:new S,Text:n[d]},c.PtEnd.Y=t.Y-l*i[d],c.PtEnd.X=e.X;var u=this.CalculateExtendLinePoint(c.Start,c.PtEnd);c.End=u.Start,this.LinePoint.push(c)}}}else{if(4!=a)return!1;var u=this.CalculateExtendLinePoint(t,e),c={Start:s,End:u.End,IsDottedLine:!1,PtEnd:o,Text:"1:1"};this.LinePoint.push(c);for(var d in i){if(h>5){c={Start:s,End:null,IsDottedLine:!1,PtEnd:new S,Text:r[d]},c.PtEnd.Y=e.Y,c.PtEnd.X=t.X+h*i[d];var u=this.CalculateExtendLinePoint(c.Start,c.PtEnd);c.End=u.End,this.LinePoint.push(c)}if(l>5){c={Start:s,End:null,IsDottedLine:!1,PtEnd:new S,Text:n[d]},c.PtEnd.Y=t.Y+l*i[d],c.PtEnd.X=e.X;var u=this.CalculateExtendLinePoint(c.Start,c.PtEnd);c.End=u.End,this.LinePoint.push(c)}}}return!0}}function ta(){this.newMethod=$e,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureResistanceLine",this.CalculateLines=function(t,e,a){if(!this.Frame)return!1;var i=(this.Frame.ChartBorder.GetTopEx(),this.Frame.ChartBorder.GetRight(),this.Frame.ChartBorder.GetBottom(),[1/3,2/3]),r=["3:1","3:2"],n=new S,s=new S;n.X=t.X,n.Y=t.Y,s.X=e.X,s.Y=e.Y;var o=(Math.abs(t.X-e.X),Math.abs(t.Y-e.Y));if(1===a){var h=this.CalculateExtendLinePoint(t,e),l={Start:n,End:h.Start,IsDottedLine:!1,PtEnd:s,Text:"1:1"};this.LinePoint.push(l);for(var u in i)if(o>5){l={Start:n,End:null,IsDottedLine:!1,PtEnd:new S,Text:r[u]},l.PtEnd.Y=t.Y-o*i[u],l.PtEnd.X=e.X;var h=this.CalculateExtendLinePoint(l.Start,l.PtEnd);l.End=h.Start,this.LinePoint.push(l)}}else{if(4!=a)return!1;var h=this.CalculateExtendLinePoint(t,e),l={Start:n,End:h.End,IsDottedLine:!1,PtEnd:s,Text:"1:1"};this.LinePoint.push(l);for(var u in i)if(o>5){l={Start:n,End:null,IsDottedLine:!1,PtEnd:new S,Text:r[u]},l.PtEnd.Y=t.Y+o*i[u],l.PtEnd.X=e.X;var h=this.CalculateExtendLinePoint(l.Start,l.PtEnd);l.End=h.End,this.LinePoint.push(l)}}return!0},this.DrawArea=function(){var t=null,e=null;for(var a in this.LinePoint){var i=this.LinePoint[a];"1:1"==i.Text?t=this.LinePoint[a]:"3:1"==i.Text&&(e=this.LinePoint[a])}t&&e&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(t.End.X,t.End.Y),this.Canvas.lineTo(t.Start.X,t.Start.Y),this.Canvas.lineTo(e.End.X,e.End.Y),this.Canvas.closePath(),this.Canvas.fill())}}function ea(){this.newMethod=Re,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureGoldenSectionLine",this.IsPointIn=this.IsPointIn_XYValue_Line,this.Font=14*c()+"px 微软雅黑",this.GetSectionData=function(){return[0,.236,.382,.5,.618,.8,1,1.236,1.382,1.5,1.618,1.8,2]},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint();if(t&&2==t.length){this.AreaColor=Re.ColorToRGBA(this.LineColor,.3),this.CalculateLines(t[0],t[1]),this.ClipFrame(),this.SetLineWidth();for(var e in this.LinePoint){var a=this.LinePoint[e];this.DrawLine(a.Start,a.End,a.IsDottedLine)}this.RestoreLineWidth();for(var e in this.LinePoint){var a=this.LinePoint[e];a.Text&&this.DrawTitle(a.Start,a.Text)}this.DrawPoint(t),this.Canvas.restore()}}},this.CalculateHSCreenLines=function(t,e){for(var a=this.GetSectionData(),i=this.Frame.ChartBorder.GetTop(),r=this.Frame.ChartBorder.GetBottom(),n=t.X-e.X,s=0;s<a.length;++s){var o=n*a[s],h={Start:new S,End:new S};h.Start.X=t.X-o,h.Start.Y=i,h.End.X=t.X-o,h.End.Y=r;var l="";l=0==s?"Base ":(100*a[s]).toFixed(2)+"% ";l+=this.Frame.GetYData(h.Start.Y).toFixed(2),h.Text=l,this.LinePoint.push(h)}},this.CalculateLines=function(t,e){if(this.Frame.IsHScreen)return void this.CalculateHSCreenLines(t,e);for(var a=this.GetSectionData(),i=this.Frame.ChartBorder.GetLeft(),r=this.Frame.ChartBorder.GetRight(),n=t.Y-e.Y,s=0;s<a.length;++s){var o=n*a[s],h={Start:new S,End:new S};h.Start.Y=t.Y-o,h.Start.X=i,h.End.Y=t.Y-o,h.End.X=r;var l="";l=0==s?"Base ":(100*a[s]).toFixed(2)+"% ";l+=this.Frame.GetYData(h.Start.Y).toFixed(2),h.Text=l,this.LinePoint.push(h)}},this.DrawLine=function(t,e){this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(t.X,t.Y),this.Canvas.lineTo(e.X,e.Y),this.Canvas.stroke()},this.DrawTitle=function(t,e){this.Canvas.fillStyle=this.LineColor,this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom",this.Canvas.font=this.Font,this.Frame.IsHScreen?(this.Canvas.save(),this.Canvas.translate(t.X,t.Y),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(e,0,0),this.Canvas.restore()):this.Canvas.fillText(e,t.X,t.Y)}}function aa(){this.newMethod=ea,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPicturePercentage",this.GetSectionData=function(){return[0,.25,.333,.5,1]}}function ia(){this.newMethod=ea,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureWaveBand",this.GetSectionData=function(){return[0,.125,.25,.375,.5,.625,.75,.875,1]}}function ra(){this.newMethod=Re,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureTriangle",this.PointCount=3,this.Font=16*c()+"px 微软雅黑",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.LastPoint,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){var e=t.slice(0);this.AreaColor=Re.ColorToRGBA(this.LineColor,.3),this.ClipFrame(),this.CalculateLines(e);for(var a in this.LinePoint){var i=this.LinePoint[a];this.DrawLine(i.Start,i.End)}this.DrawArea(e),this.DrawPoint(e),this.DrawTitle(e),this.Canvas.restore()}}},this.DrawArea=function(t){3==t.length&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y),this.Canvas.lineTo(t[1].X,t[1].Y),this.Canvas.lineTo(t[2].X,t[2].Y),this.Canvas.lineTo(t[0].X,t[0].Y),this.Canvas.closePath(),this.Canvas.fill())},this.DrawTitle=function(t){this.Status},this.SetLastPoint=function(t){this.LastPoint={X:t.X,Y:t.Y}},this.CalculateLines=function(t){if(2==this.PointStatus&&this.LastPoint){var e=new S;e.X=this.LastPoint.X,e.Y=this.LastPoint.Y,t[2]=e}if(2===t.length){var a={Start:new S,End:new S};a.Start.Y=t[0].Y,a.Start.X=t[0].X,a.End.Y=t[1].Y,a.End.X=t[1].X,this.LinePoint.push(a)}else if(3===t.length){var a={Start:new S,End:new S};a.Start.Y=t[0].Y,a.Start.X=t[0].X,a.End.Y=t[1].Y,a.End.X=t[1].X,this.LinePoint.push(a),a={Start:new S,End:new S},a.Start.Y=t[1].Y,a.Start.X=t[1].X,a.End.Y=t[2].Y,a.End.X=t[2].X,this.LinePoint.push(a),a={Start:new S,End:new S},a.Start.Y=t[2].Y,a.Start.X=t[2].X,a.End.Y=t[0].Y,a.End.X=t[0].X,this.LinePoint.push(a)}}}function na(){this.newMethod=Re,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureSymmetryAngle",this.PointCount=2,this.Font=16*c()+"px 微软雅黑",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){this.AreaColor=Re.ColorToRGBA(this.LineColor,.3),this.ClipFrame(),this.CalculateLines(t);for(var e in this.LinePoint){var a=this.LinePoint[e];this.DrawLine(a.Start,a.End)}this.DrawArea(),this.DrawPoint(t),this.DrawTitle(t),this.Canvas.restore()}}},this.CalculateLines=function(t){if(2==t.length&&this.Frame){var e={Start:new S,End:new S};e.Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[1].Y,e.End.X=t[1].X,this.LinePoint.push(e),e={Start:new S,End:new S},e.Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[1].Y,e.End.X=t[0].X,this.LinePoint.push(e);var a=t[0].X-t[1].X;e={Start:new S,End:new S},e.Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[1].Y,e.End.X=t[0].X+a,this.LinePoint.push(e)}},this.DrawArea=function(){3==this.LinePoint.length&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(this.LinePoint[0].Start.X,this.LinePoint[0].Start.Y),this.Canvas.lineTo(this.LinePoint[0].End.X,this.LinePoint[0].End.Y),this.Canvas.lineTo(this.LinePoint[2].End.X,this.LinePoint[2].End.Y),this.Canvas.moveTo(this.LinePoint[0].Start.X,this.LinePoint[0].Start.Y),this.Canvas.closePath(),this.Canvas.fill())},this.DrawTitle=function(t){this.Status}}function sa(){this.newMethod=Re,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureCircle",this.PointCount=2,this.CircleData,this.GetXYCoordinate=this.GetXYCoordinate_default,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.AreaColor=Re.ColorToRGBA(this.LineColor,.3),this.ClipFrame();var e=t[0].X-t[1].X,a=t[0].Y-t[1].Y,i=Math.sqrt(e*e+a*a);this.Canvas.fillStyle=this.AreaColor,this.Canvas.strokeStyle=this.LineColor,this.DrawLine(t[0],t[1]),this.Canvas.beginPath(),this.Canvas.arc(t[0].X,t[0].Y,i,0,2*Math.PI),this.Canvas.stroke(),this.Canvas.fill(),this.CircleData={X:t[0].X,Y:t[0].Y,R:i},this.DrawPoint(t),this.Canvas.restore()}}},this.IsPointIn=function(t,e){if(this.IsFrameMinSize())return-1;if(10!=this.Status)return-1;var a=this.IsPointInXYValue(t,e);if(a>=0)return a;if(this.CircleData&&this.CircleData.R>8){var i=this.CircleData.X-t,r=this.CircleData.Y-e,n=Math.sqrt(i*i+r*r);if(n<this.CircleData.R&&n>this.CircleData.R-8)return 100}return-1}}function oa(){this.newMethod=Re,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureQuadrangle",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.PointCount=3,this.LastPoint,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){this.AreaColor=Re.ColorToRGBA(this.LineColor,.3);var e=t.slice(0);this.CalculateLines(e),this.ClipFrame();for(var a in this.LinePoint){var i=this.LinePoint[a];this.DrawLine(i.Start,i.End)}this.DrawArea(),this.DrawPoint(e),this.Canvas.restore()}}},this.SetLastPoint=function(t){this.LastPoint={X:t.X,Y:t.Y}},this.DrawArea=function(){4==this.LinePoint.length&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(this.LinePoint[0].Start.X,this.LinePoint[0].Start.Y),this.Canvas.lineTo(this.LinePoint[0].End.X,this.LinePoint[0].End.Y),this.Canvas.lineTo(this.LinePoint[1].End.X,this.LinePoint[1].End.Y),this.Canvas.lineTo(this.LinePoint[2].End.X,this.LinePoint[2].End.Y),this.Canvas.closePath(),this.Canvas.fill())},this.CalculateLines=function(t){if(2==this.PointStatus&&this.LastPoint){var e=new S;e.X=this.LastPoint.X,e.Y=this.LastPoint.Y,t[2]=e}if(2==t.length){var a=this.CreateLineData(t[0],t[1]);this.LinePoint.push(a)}else if(3==t.length){var a=this.CreateLineData(t[0],t[1]);this.LinePoint.push(a);var a=this.CreateLineData(t[1],t[2]);this.LinePoint.push(a);var i=t[2].X-t[1].X,r=t[2].Y-t[1].Y,n=new S;n.X=t[0].X+i,n.Y=t[0].Y+r;var a=this.CreateLineData(t[2],n);this.LinePoint.push(a);var a=this.CreateLineData(n,t[0]);this.LinePoint.push(a)}}}function ha(){this.newMethod=Re,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureFibonacci",this.PointCount=1,this.Font=14*c()+"px 微软雅黑",this.IsPointIn=this.IsPointIn_XYValue_Line,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint();if(t&&(this.CalculateLines(),!(this.LinePoint.length<=0))){this.ClipFrame(),this.SetLineWidth();for(var e in this.LinePoint){var a=this.LinePoint[e];this.DrawLine(a.Start,a.End),this.DrawTitle(a.Start,a.Title)}this.RestoreLineWidth(),this.DrawPoint(t),this.Canvas.restore()}}},this.DrawTitle=function(t,e){this.Canvas.fillStyle=this.LineColor,this.Canvas.textAlign="left",this.Canvas.textBaseline="top",this.Canvas.font=this.Font,this.Frame.IsHScreen?(this.Canvas.save(),this.Canvas.translate(t.X,t.Y),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(e,2,10),this.Canvas.restore()):this.Canvas.fillText(e,t.X+2,t.Y+10)},this.CalculateHSCreenLines=function(){var t=this.Frame.Data;if(t){var e=null;if(10==this.Status){if(1!=this.Value.length)return;e=this.Value[0].XValue}else{if(1!=this.Point.length)return;e=parseInt(this.Frame.GetXData(this.Point[0].Y))+t.DataOffset}for(var a=this.Frame.ChartBorder.GetRightEx(),i=this.Frame.ChartBorder.GetLeftEx(),r=this.Frame.XPointCount,n=[1,2,3,5,8,13,21,34,55,89,144,233],s=0;s<n.length;++s){var o=e+n[s],h=o-t.DataOffset;if(!(h<0||h>=r)){var l=this.Frame.GetXFromIndex(o-t.DataOffset,!1),u={Start:new S,End:new S,Title:n[s]};u.Start.X=a,u.Start.Y=l,u.End.X=i,u.End.Y=l,this.LinePoint.push(u)}}}},this.CalculateLines=function(){if(!(this.Status<2)&&this.Frame){var t=this.Frame.Data;if(t){if(this.Frame.IsHScreen)return void this.CalculateHSCreenLines();var e=null;if(10==this.Status){if(1!=this.Value.length)return;e=this.Value[0].XValue}else{if(1!=this.Point.length)return;e=parseInt(this.Frame.GetXData(this.Point[0].X))+t.DataOffset}for(var a=this.Frame.ChartBorder.GetTopEx(),i=this.Frame.ChartBorder.GetBottom(),r=this.Frame.XPointCount,n=[1,2,3,5,8,13,21,34,55,89,144,233],s=0;s<n.length;++s){var o=e+n[s],h=o-t.DataOffset;if(!(h<0||h>=r)){var l=this.Frame.GetXFromIndex(o-t.DataOffset,!1),u={Start:new S,End:new S,Title:n[s]};u.Start.Y=a,u.Start.X=l,u.End.Y=i,u.End.X=l,this.LinePoint.push(u)}}}}}}function la(t){this.newMethod=Re,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawLinearRegression",this.PointCount=2,this.IsPointIn=this.IsPointIn_XYValue_Line,this.ChartBorder,this.Lines=[],this.IsShowMaxMinLine=!1,this.IsShowExtendLine=!1,this.ExtendLineDash=[5,5],this.MaxPoint,this.MinPoint,t&&(1==t.IsShowMaxMinLine&&(this.IsShowMaxMinLine=!0),1==t.IsShowExtendLine&&(this.IsShowExtendLine=!0)),this.ImportStorageData=function(t){1==t.IsShowMaxMinLine&&(this.IsShowMaxMinLine=!0),1==t.IsShowExtendLine&&(this.IsShowExtendLine=!0),t.Lines&&(this.Lines=t.Lines),t.MaxPoint&&t.MinPoint&&(this.MaxPoint=t.MaxPoint,this.MinPoint=t.MinPoint)},this.Super_ExportStorageData=this.ExportStorageData,this.ExportStorageData=function(){var t;return this.Super_ExportStorageData&&(t=this.Super_ExportStorageData(),t.IsShowMaxMinLine=this.IsShowMaxMinLine,t.IsShowExtendLine=this.IsShowExtendLine,t.Lines=this.Lines,this.IsShowMaxMinLine&&(t.MaxPoint=this.MaxPoint,t.MinPoint=this.MinPoint)),t},this.PointToValue_Backup=this.PointToValue,this.PointToValue=function(){this.Point[0]={X:this.Lines[0].X,Y:this.Lines[0].Y},this.Point[1]={X:this.Lines[this.Lines.length-1].X,Y:this.Lines[this.Lines.length-1].Y},this.PointToValue_Backup()},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(!t||2!=t.length)return void(10==this.Status&&(this.ClipFrame(),this.ChartBorder=this.Frame.ChartBorder,this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.DrawLinearLines(),this.RestoreLineWidth(),this.Canvas.restore()));this.ClipFrame(),this.ChartBorder=this.Frame.ChartBorder,this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor;var e=t[0],a=t[1];if(10==this.Status)this.DrawLinearLines();else{var i=this.ChartBorder.GetTopEx(),r=this.ChartBorder.GetBottomEx(),n=this.PointToKLine([e,a]),s=this.Calculate(n);this.Lines=s.Points,this.MaxPoint=s.Max,this.MinPoint=s.Min,this.DrawLinearLines(),this.Canvas.beginPath(),this.Canvas.moveTo(e.X,i),this.Canvas.lineTo(e.X,r),this.Canvas.moveTo(a.X,i),this.Canvas.lineTo(a.X,r),this.Canvas.stroke()}this.RestoreLineWidth();var o={Start:e,End:a};this.LinePoint.push(o),this.DrawPoint(t),this.Canvas.restore()}},this.Calculate=function(t){var e=t[0],a=t[1];e.XValue>a.XValue&&(e=t[1],a=t[0]);var i,r,n,s,o,h,l=a.XValue-e.XValue+1,u=this.Frame.Data.Data,n=a.XValue,c=0,d=0,f=0,m=0;for(s=0,o=l;s<l&&s<=n;++s,--o)c+=o,d+=u[n-s].Close;for(c/=l,d/=l,s=0,o=l;s<l&&s<=n;++s,--o)f+=(o-c)*(u[n-s].Close-d),m+=(o-c)*(o-c);r=f/m,i=d-c*r;var C=[],p=null,D=null;for(s=0,h=l;s<l&&s<=n;++s,--h){var v=a.XIndex-s,g=a.XValue-s,o=this.Frame.GetXFromIndex(v),S=r*h+i,T=this.Frame.GetYFromData(S,!1),y={X:o,Y:T,XValue:g,YValue:S};C.push(y),(null==p||p.High<u[g].High)&&(p={X:o,Y:T,XValue:g,YValue:S,High:u[g].High}),(null==D||D.Low>u[g].Low)&&(D={X:o,Y:T,XValue:g,YValue:S,Low:u[g].Low})}return{Points:C,Slope:r,Const:i,Max:p,Min:D}},this.DrawLinearLines=function(){if(!this.Frame)return null;var t=this.Frame.Data;if(!t)return null;var e=this.Frame.XPointCount,a=t.DataOffset,i=this.Frame.IsHScreen,r=[];for(var n in this.Lines){var s=this.Lines[n],o=s.XValue-a;if(!(o<0||o>=e)){var h={};i||(h.X=this.Frame.GetXFromIndex(o,!1),h.Y=this.Frame.GetYFromData(s.YValue,!1),h.YValue=s.YValue),r.push(h)}}if(r.length>1){for(var n in r){var s=r[n];0==n?(this.Canvas.beginPath(),this.Canvas.moveTo(s.X,s.Y)):(this.Canvas.lineTo(s.X,s.Y),n==r.length-1&&this.Canvas.stroke())}this.DrawExtendLine(r)}if(this.IsShowMaxMinLine&&r.length>1&&this.MaxPoint&&this.MinPoint){var l=this.MaxPoint.High-this.MaxPoint.YValue;for(var n in r){var s=r[n];s.Y=this.Frame.GetYFromData(s.YValue+l,!1),0==n?(this.Canvas.beginPath(),this.Canvas.moveTo(s.X,s.Y)):(this.Canvas.lineTo(s.X,s.Y),n==r.length-1&&this.Canvas.stroke())}this.DrawExtendLine(r);var u=this.MinPoint.Low-this.MinPoint.YValue;for(var n in r){var s=r[n];s.Y=this.Frame.GetYFromData(s.YValue+u,!1),0==n?(this.Canvas.beginPath(),this.Canvas.moveTo(s.X,s.Y)):(this.Canvas.lineTo(s.X,s.Y),n==r.length-1&&this.Canvas.stroke())}this.DrawExtendLine(r)}},this.DrawExtendLine=function(t){if(this.IsShowExtendLine){var e,a=t[0],i=t[t.length-1];e=i.X>a.X?[a,i]:[i,a];var r=this.CalculateExtendLineEndPoint(e);this.Canvas.beginPath(),this.Canvas.moveTo(i.X,i.Y),this.Canvas.lineTo(r.X,r.Y),this.Canvas.setLineDash(this.ExtendLineDash),this.Canvas.stroke(),this.Canvas.setLineDash([])}}}function ua(){this.newMethod=Re,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawRuler",this.PointCount=2,this.Font=16*c()+"px 微软雅黑",this.IsPointIn=this.IsPointIn_XYValue_Line,this.TitleColor=$r.ChartDrawRuler.TitleColor,this.IsHScreen=!1,this.Draw=function(){this.LinePoint=[];var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.IsHScreen=this.Frame.IsHScreen,this.ClipFrame();var e=t[0],a=t[1],i=this.PointToKLine([e,a]),r=this.Calculate(i),n=he.IsNumber(r.Increase)?r.Increase.toFixed(2)+"%":"--",s=he.IsNumber(r.Risefall)?r.Risefall.toFixed(2):"--",o="间距:"+r.Count+" 涨跌:"+s+" 涨幅:"+n;this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(e.X,e.Y),this.Canvas.lineTo(a.X,a.Y),this.Canvas.stroke(),this.RestoreLineWidth();var h={Start:e,End:a};this.LinePoint.push(h),this.DrawPoint(t),this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left",this.Canvas.font=this.Font,this.TitleColor?this.Canvas.fillStyle=this.TitleColor:he.IsNumber(r.Increase)?r.Increase>0?this.Canvas.fillStyle=$r.UpTextColor:r.Increase<0?this.Canvas.fillStyle=$r.DownTextColor:this.Canvas.fillStyle=$r.UnchagneTextColor:this.Canvas.fillStyle=$r.UnchagneTextColor;var l=3*c(),u=e.X,d=e.Y;this.IsHScreen?(this.Canvas.translate(u+l,d+l),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(o,0,0)):this.Canvas.fillText(o,u+l,d-l),this.Canvas.restore()}},this.Calculate=function(t){var e=t[0],a=t[1];e.XValue>a.XValue&&(e=t[1],a=t[0]);for(var i,r,n,s,o,h=this.Frame.Data.Data,l=0,u=e.XValue;u<=a.XValue;++u,++l){var c=h[u];0==l?(s=c.YClose,i=c.Open,o=c.Close,n=c.Low,r=c.High):(o=c.Close,n>c.Low&&(n=c.Low),r<c.High&&(r=c.High))}if(!he.IsPlusNumber(s)){var d=e.XValue-1;d>=0&&d<h.length&&(s=h[d].Close)}var f={YClose:s,Open:i,High:r,Low:n,Close:o,Count:l};return he.IsPlusNumber(s)&&(f.Increase=(o-s)/s*100,f.Risefall=o-s),f}}function ca(){this.newMethod=Re,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPriceLine",this.Font=16*c()+"px 微软雅黑",this.PointCount=1,this.IsPointIn=this.IsPointIn_XYValue_Line,this.IsHScreen=!1,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!1,IsCheckY:!0});if(t&&1==t.length){this.IsHScreen=this.Frame.IsHScreen;var e=t[0],a=this.Frame.ChartBorder;if(this.IsHScreen){var i=a.GetLeftEx(),r=a.GetRightEx();if(e.X<i||e.X>r)return;var n=a.GetBottom(),s={X:e.X,Y:n},o=this.Frame.GetYData(e.X,!1)}else{var n=a.GetBottomEx(),h=a.GetTopEx();if(e.Y<h||e.Y>n)return;var r=a.GetRight(),s={X:r,Y:e.Y},o=this.Frame.GetYData(e.Y,!1)}this.ClipFrame(),this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(e.X,e.Y),this.Canvas.lineTo(s.X,s.Y),this.Canvas.stroke(),this.RestoreLineWidth();var l={Start:e,End:s};this.LinePoint.push(l),this.DrawPoint(t),this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left",this.Canvas.fillStyle=this.LineColor,this.Canvas.font=this.Font;var u=2*c(),d=e.X,f=e.Y;this.IsHScreen?(this.Canvas.translate(d+u,f+u),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(o.toFixed(2),0,0)):this.Canvas.fillText(o.toFixed(2),d+u,f-u),this.Canvas.restore()}}}}function da(){this.newMethod=Re,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPriceLineV2",this.Font=12*c()+"px 微软雅黑",this.PointCount=1,this.IsPointIn=this.IsPointIn_XYValue_Line,this.IsHScreen=!1,this.LineWidth=1,this.IsDrawFirst=!0,this.TextColor="rgb(255,255,255)",this.Super_SetOption=this.SetOption,this.SetOption=function(t){this.Super_SetOption&&this.Super_SetOption(t),t&&t.TextColor&&(this.TextColor=t.TextColor)},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!1,IsCheckY:!0});if(t&&1==t.length&&this.IsYValueInFrame(this.Value[0].YValue)){this.IsHScreen=this.Frame.IsHScreen;var e=t[0],a=this.Frame.ChartBorder,i=this.Frame.GetBorder();if(this.IsHScreen){return;var r,n,s,o}else{var s=i.BottomEx,h=i.TopTitle;if(e.Y<h||e.Y>s)return;var r=i.Left,n=i.Right,o=this.Frame.GetYData(e.Y,!1)}this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(D(r),D(e.Y)),this.Canvas.lineTo(D(n),D(e.Y)),this.Canvas.stroke(),this.RestoreLineWidth();var l={Start:{X:r,Y:e.Y},End:{X:n,Y:e.Y}};this.LinePoint.push(l);var u=c();this.Canvas.font=this.Font;var d=2*u,f=n,m=e.Y;if(this.IsHScreen);else{this.Canvas.textBaseline="middle",this.Canvas.textAlign="left";var C=this.GetFontHeight(),p=o.toFixed(2),v=this.Canvas.measureText(p).width+2*d;if(a.Right>10){var g={Left:f,Top:m-C/2-1*u,Width:v,Height:C};g.Left+g.Width>i.ChartWidth&&(g.Left=i.ChartWidth-g.Width-2*u)}else var g={Left:f-v,Top:m-C/2-1*u,Width:v,Height:C};this.Canvas.fillStyle=this.LineColor,this.Canvas.fillRect(g.Left,g.Top,g.Width,g.Height),this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(p,g.Left+d,m)}this.Canvas.restore()}}},this.DrawPrice=function(){}}function fa(){this.newMethod=Re,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawVerticalLine",this.PointCount=1,this.IsPointIn=this.IsPointIn_XYValue_Line,this.IsHScreen=!1,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.Frame&&this.Frame.Data){var t=this.Frame.Data,e=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(e&&1==e.length){this.IsHScreen=this.Frame.IsHScreen;var a=e[0],i=this.Frame.ChartBorder;if(this.IsHScreen){var r=Math.round(this.Frame.GetXData(a.Y,!1))+t.DataOffset;r<0?r=0:r>=t.Data.length&&(r=t.Data.length-1);var n=this.Frame.GetXFromIndex(r-t.DataOffset,!1);n=v(this.LineWidth,n);var s=i.GetLeftEx(),o=i.GetRightEx(),h={X:s,Y:n},l={X:o,Y:n}}else{var r=Math.round(this.Frame.GetXData(a.X,!1))+t.DataOffset;r<0?r=0:r>=t.Data.length&&(r=t.Data.length-1);var u=this.Frame.GetXFromIndex(r-t.DataOffset,!1);u=v(this.LineWidth,u);var c=i.GetTopEx(),d=i.GetBottomEx(),h={X:u,Y:c},l={X:u,Y:d}}this.ClipFrame(),this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(h.X,h.Y),this.Canvas.lineTo(l.X,l.Y),this.Canvas.stroke(),this.RestoreLineWidth();var f={Start:h,End:l};this.LinePoint.push(f),10==this.Status&&this.DrawPoint(e),this.Canvas.restore()}}}}function ma(){this.newMethod=Re,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawWaveRuler",this.PointCount=3,this.Font=16*c()+"px 微软雅黑",this.IsPointIn=this.IsPointIn_XYValue_Line,this.LastPoint,this.LinePoint,this.ScaleRuler=$r.ChartDrawWaveRuler.ScaleRuler,this.RulerWidth=$r.ChartDrawWaveRuler.RulerWidth,this.RulerLineWidth=$r.ChartDrawWaveRuler.RulerLineWidth,this.MaxScaleRuler=$r.ChartDrawWaveRuler.MaxScaleRuler,this.Font=$r.ChartDrawWaveRuler.MaxScaleRuler,this.IsHScreen=!1,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){this.IsHScreen=this.Frame.IsHScreen,this.CalculateLines(t),this.ClipFrame(),this.SetLineWidth();for(var e in this.LinePoint){var a=this.LinePoint[e];this.DrawLine(a.Start,a.End)}3==t.length&&this.DrawWaveRuler(t),this.RestoreLineWidth(),this.DrawPoint(t),this.Canvas.restore()}}},this.SetLastPoint=function(t){this.LastPoint={X:t.X,Y:t.Y}},this.CalculateLines=function(t){if(2==this.PointStatus&&this.LastPoint){var e=new S;e.X=this.LastPoint.X,e.Y=this.LastPoint.Y,t[2]=e}if(2==t.length){var a={Start:{X:t[0].X,Y:t[0].Y},End:{X:t[1].X,Y:t[1].Y}};this.LinePoint.push(a)}else if(3==t.length){var a={Start:{X:t[0].X,Y:t[0].Y},End:{X:t[1].X,Y:t[1].Y}};this.LinePoint.push(a),a={Start:{X:t[1].X,Y:t[1].Y},End:{X:t[2].X,Y:t[2].Y}},this.LinePoint.push(a)}},this.DrawWaveRuler=function(t){var e=t[1],a=t[0],i=t[2],r=this.RulerLineWidth*c();this.Canvas.lineWidth=r,this.Canvas.textBaseline="middle",this.Canvas.textAlign="left",this.Canvas.fillStyle=this.LineColor,this.Canvas.font=this.Font;var n=this.RulerWidth*c();if(this.IsHScreen){var s=a.X-e.X,o={X:i.X-this.MaxScaleRuler*s,Y:i.Y};this.DrawLine(i,o),this.LinePoint.push({Start:i,End:o});var h=i.Y-n/2,l=i.Y+n/2}else{var s=a.Y-e.Y,o={X:v(r,i.X),Y:i.Y-this.MaxScaleRuler*s};this.DrawLine({X:v(r,i.X),Y:i.Y},o),this.LinePoint.push({Start:i,End:o});var u=i.X-n/2,d=i.X+n/2}var f=4*c();for(var m in this.ScaleRuler){var C=this.ScaleRuler[m];if(this.IsHScreen){var u=i.X-C.Value*s,p=this.Frame.GetYData(u,!1);this.DrawLine({X:u,Y:h},{X:u,Y:l});var D=p.toFixed(2)+"  "+(C.Text?C.Text:C.Value.toFixed(3));this.Canvas.save(),this.Canvas.translate(u,i.Y),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(D,f,0),this.Canvas.restore()}else{var h=i.Y-C.Value*s,p=this.Frame.GetYData(h,!1);this.DrawLine({X:u,Y:v(r,h)},{X:d,Y:v(r,h)});var D=p.toFixed(2)+"  "+(C.Text?C.Text:C.Value.toFixed(3));this.Canvas.fillText(D,d+f,h)}}}}function Ca(){this.newMethod=Re,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawWaveRuler2Point",this.PointCount=2,this.Font=14*c()+"px 微软雅黑",this.IsPointIn=this.IsPointIn_XYValue_Line,this.PointRate=[510,517,511.4],this.LinePoint,this.CPoint,this.ScaleRuler=$r.ChartDrawWaveRuler2Point.ScaleRuler,this.RulerWidth=$r.ChartDrawWaveRuler2Point.RulerWidth,this.RulerLineWidth=$r.ChartDrawWaveRuler2Point.RulerLineWidth,this.MaxScaleRuler=$r.ChartDrawWaveRuler2Point.MaxScaleRuler,this.Font=$r.ChartDrawWaveRuler2Point.MaxScaleRuler,this.IsHScreen=!1,this.Super_SetOption=this.SetOption,this.SetOption=function(t){this.Super_SetOption&&this.Super_SetOption(t),t&&t.PointRate&&(this.PointRate=t.PointRate)},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){this.IsHScreen=this.Frame.IsHScreen,this.CalculateLines(t),this.ClipFrame(),this.SetLineWidth();for(var e in this.LinePoint){var a=this.LinePoint[e];this.DrawLine(a.Start,a.End)}var i=[t[0],t[1],this.CPoint];this.DrawWaveRuler(i),this.RestoreLineWidth(),this.DrawPoint(t),this.Canvas.restore()}}},this.CalculateLines=function(t){var e={Start:{X:t[0].X,Y:t[0].Y},End:{X:t[1].X,Y:t[1].Y}};this.LinePoint.push(e);var a=t[0].Y,i=t[1].Y,r=this.PointRate[1]-this.PointRate[0],n=this.PointRate[2]-this.PointRate[0],s=a-(a-i)*n/r;this.CPoint={X:t[1].X,Y:s}},this.DrawWaveRuler=function(t){var e=t[1],a=t[0],i=t[2],r=this.RulerLineWidth*c();this.Canvas.lineWidth=r,this.Canvas.textBaseline="middle",this.Canvas.textAlign="left",this.Canvas.fillStyle=this.LineColor,this.Canvas.font=this.Font;var n=this.RulerWidth*c();if(this.IsHScreen){var s=a.X-e.X,o={X:i.X-this.MaxScaleRuler*s,Y:i.Y};this.DrawLine(i,o),this.LinePoint.push({Start:i,End:o});var h=i.Y-n/2,l=i.Y+n/2}else{var s=a.Y-e.Y,o={X:v(r,i.X),Y:i.Y-this.MaxScaleRuler*s};this.DrawLine({X:v(r,i.X),Y:i.Y},o),this.LinePoint.push({Start:i,End:o});var u=i.X,d=i.X+n}var f=4*c();for(var m in this.ScaleRuler){var C=this.ScaleRuler[m];if(this.IsHScreen){var u=i.X-C.Value*s,p=this.Frame.GetYData(u,!1);this.DrawLine({X:u,Y:h},{X:u,Y:l});var D=p.toFixed(2)+"  "+(C.Text?C.Text:C.Value.toFixed(3));this.Canvas.save(),this.Canvas.translate(u,i.Y),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(D,f,0),this.Canvas.restore()}else{var h=i.Y-C.Value*s,p=this.Frame.GetYData(h,!1);this.DrawLine({X:u,Y:v(r,h)},{X:d,Y:v(r,h)});var D=p.toFixed(2)+"  "+(C.Text?C.Text:C.Value.toFixed(3));this.Canvas.fillText(D,d+f,h)}}}}function pa(){this.newMethod=Re,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawBox",this.PointCount=2,this.Font=16*c()+"px 微软雅黑",this.IsPointIn=this.IsPointIn_XYValue_Line,this.IsHScreen=!1,this.AvPriceLineDash=[5*c(),5*c()],this.KLineBorder,this.PointToValue_Backup=this.PointToValue,this.PointToValue=function(){this.Point[0]={X:this.KLineBorder.Left,Y:this.KLineBorder.Top},this.Point[1]={X:this.KLineBorder.Right,Y:this.KLineBorder.Bottom},this.PointToValue_Backup()},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.IsHScreen=this.Frame.IsHScreen,this.ClipFrame();var e=t[0],a=t[1],i=this.PointToKLine([e,a]);Fr.Chart.Log("[ChartDrawBox::Draw] kPoint",i);var r=this.Calculate(i);Fr.Chart.Log("[ChartDrawBox::Draw] kDataInfo",r);var n=this.GetKLineBorder(t,r);this.KLineBorder=n,this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.strokeRect(g(n.Left),g(n.Top),g(n.Right-n.Left),g(n.Bottom-n.Top));var s;if(r.Amount>0&&r.Vol>0){var o=r.Amount/r.Vol;if(s="均价"+o.toFixed(2),this.Canvas.beginPath(),this.IsHScreen){var h=this.Frame.GetYFromData(o,!1);this.Canvas.moveTo(v(this.Canvas.lineWidth,h),n.Top),this.Canvas.lineTo(v(this.Canvas.lineWidth,h),n.Bottom)}else{var l=this.Frame.GetYFromData(o,!1);this.Canvas.moveTo(n.Left,v(this.Canvas.lineWidth,l)),this.Canvas.lineTo(n.Right,v(this.Canvas.lineWidth,l))}this.Canvas.setLineDash(this.AvPriceLineDash),this.Canvas.stroke(),this.Canvas.setLineDash([])}this.RestoreLineWidth(),this.DrawPoint(t),this.Canvas.textBaseline="top",this.Canvas.textAlign="left",this.Canvas.font=this.Font,this.Canvas.fillStyle=this.LineColor;var u=2*c(),d="K线数"+r.Count;this.IsHScreen?this.DrawText(d,n.Right,n.Top,u,u):this.DrawText(d,n.Left,n.Top,u,u),s&&(this.IsHScreen?this.DrawText(s,h,n.Top,u,u):this.DrawText(s,n.Left,l,u,u));var f=he.IsNumber(r.YClose)?r.YClose:r.Open,m=(r.Close-f)/f*100;d=m.toFixed(2)+"%",this.IsHScreen?this.DrawText(d,n.Right,n.Bottom,u,u):this.DrawText(d,n.Right,n.Top,u,u),m=r.Close-f,d=""+m.toFixed(2),this.Canvas.textBaseline="bottom",this.IsHScreen?this.DrawText(d,n.Left,n.Bottom,u,0):this.DrawText(d,n.Right,n.Bottom,u,0),this.Canvas.restore()}}},this.Calculate=function(t){var e=t[0],a=t[1];e.XValue>a.XValue&&(e=t[1],a=t[0]);for(var i,r,n,s,o,h=this.Frame.Data.Data,l=0,u=0,c=0,d=e.XValue;d<=a.XValue;++d,++c){var f=h[d];0==c?(s=f.YClose,i=f.Open,o=f.Close,n=f.Low,r=f.High):(o=f.Close,n>f.Low&&(n=f.Low),r<f.High&&(r=f.High)),l+=f.Vol,u+=f.Amount}return{YClose:s,Open:i,High:r,Low:n,Close:o,Count:c,Vol:l,Amount:u}},this.GetKLineBorder=function(t,e){var a=t[0],i=t[1],r=this.Frame.Data;if(this.IsHScreen){var n=Math.round(this.Frame.GetXData(a.Y,!1))+r.DataOffset;n<0?n=0:n>=r.Data.length&&(n=r.Data.length-1);var s=this.Frame.GetXFromIndex(n-r.DataOffset,!1);n=Math.round(this.Frame.GetXData(i.Y,!1))+r.DataOffset,n<0?n=0:n>=r.Data.length&&(n=r.Data.length-1);var o=this.Frame.GetXFromIndex(n-r.DataOffset,!1),h=this.Frame.GetYFromData(e.High,!1),l=this.Frame.GetYFromData(e.Low,!1),u={Left:l,Top:s,Right:h,Bottom:o};return this.LinePoint.push({Start:{X:l,Y:s},End:{X:o,Y:s}}),this.LinePoint.push({Start:{X:l,Y:o},End:{X:o,Y:o}}),this.LinePoint.push({Start:{X:l,Y:s},End:{X:l,Y:o}}),this.LinePoint.push({Start:{X:h,Y:s},End:{X:h,Y:o}}),u}var n=Math.round(this.Frame.GetXData(a.X,!1))+r.DataOffset;n<0?n=0:n>=r.Data.length&&(n=r.Data.length-1);var c=this.Frame.GetXFromIndex(n-r.DataOffset,!1);n=Math.round(this.Frame.GetXData(i.X,!1))+r.DataOffset,n<0?n=0:n>=r.Data.length&&(n=r.Data.length-1);var d=this.Frame.GetXFromIndex(n-r.DataOffset,!1),f=this.Frame.GetYFromData(e.High,!1),m=this.Frame.GetYFromData(e.Low,!1),u={Left:c,Top:f,Right:d,Bottom:m};return this.LinePoint.push({Start:{X:c,Y:f},End:{X:d,Y:f}}),this.LinePoint.push({Start:{X:c,Y:m},End:{X:d,Y:m}}),this.LinePoint.push({Start:{X:c,Y:f},End:{X:c,Y:m}}),this.LinePoint.push({Start:{X:d,Y:f},End:{X:d,Y:m}}),u},this.DrawText=function(t,e,a,i,r){this.IsHScreen?(this.Canvas.save(),this.Canvas.translate(e,a),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(t,i,r),this.Canvas.restore()):this.Canvas.fillText(t,e+i,a+r)}}function Da(){this.newMethod=Re,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawTwoPointDemo",this.PointCount=2,this.Font=16*c()+"px 微软雅黑",this.IsPointIn=this.IsPointIn_XYValue_Line,this.IsHScreen=!1,this.PointInfo=[],this.PointToValue_Backup=this.PointToValue,this.PointToValue=function(){this.OnFinish(),this.PointToValue_Backup()},this.OnFinish=function(){for(var t in this.PointInfo){var e=this.PointInfo[t];e&&e.Point&&he.IsNumber(e.Point.Y2)&&(this.Point[t].Y=this.PointInfo[t].Point.Y2)}},this.Draw=function(){if(this.LinePoint=[],this.PointInfo=[],!this.IsFrameMinSize()){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){this.IsHScreen=this.Frame.IsHScreen,this.ClipFrame(),this.SetLineWidth();t[0],t[1];if(this.CalculatePointInfo(t),10==this.Status)this.DrawEx();else for(var e=1;e<t.length;++e)this.DrawLine(t[e-1],t[e]);this.RestoreLineWidth(),this.DrawPoint(t),this.Canvas.restore()}}},this.CalculatePointInfo=function(t){if(this.Frame&&this.Frame.Data){var e=this.PointToKLine(t);if(3==this.PointCount&&2==this.PointStatus&&this.LastPoint){var a=new S;a.X=this.LastPoint.X,a.Y=this.LastPoint.Y,t[2]=a}var i=this.Frame.Data;for(var r in e){var n=e[r],a=t[r],s=i.Data[n.XValue],o={KItem:s,Data:n,Point:{X:a.X,Y:a.Y}};this.PointInfo.push(o)}this.CalculateYPoint(),Fr.Chart.Log("[ChartDrawTwoPointDemo::CalculateLines] kPoint",this.PointInfo)}},this.CalculateYPoint=function(){var t=this.PointInfo[0],e=this.Frame.GetYFromData(t.KItem.Low,!1);t.Point.Y2=e;var a=this.PointInfo[1],i=this.Frame.GetYFromData(a.KItem.High,!1);a.Point.Y2=i},this.DrawEx=function(){var t=this.PointInfo[0],e=this.PointInfo[1],a=this.Frame.ChartBorder,i=(a.GetRight(),{X:t.Point.X,Y:t.Point.Y2}),r={X:e.Point.X,Y:e.Point.Y2};this.DrawLine(i,r),this.LinePoint.push({Start:i,End:r}),this.Canvas.setLineDash([5,5]);var n=.09*e.KItem.YClose+e.KItem.High,s=this.Frame.GetYFromData(n,!1);this.DrawLine({X:this.ToFixedPoint(r.X),Y:r.Y},{X:this.ToFixedPoint(r.X),Y:s}),this.Canvas.textAlign="right",this.Canvas.textBaseline="center",this.Canvas.fillStyle="rgb(33,45,100)";for(var o=3;o>0;--o){var h=e.KItem.YClose*(.03*o)+e.KItem.High,s=this.Frame.GetYFromData(h,!1);s=this.ToFixedPoint(s),this.DrawLine({X:r.X,Y:s},{X:r.X+100,Y:s}),this.Canvas.fillText(h.toFixed(2),r.X-5,s)}this.Canvas.setLineDash([])},this.ToFixedPoint=function(t,e){return he.IsNumber(e)||(e=this.LineWidth),v(e,t)}}function va(){this.newMethod=Da,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawThreePointDemo",this.PointCount=3,this.SetLastPoint=function(t){this.LastPoint={X:t.X,Y:t.Y}},this.CalculateYPoint=function(){var t;for(var e in this.PointInfo){var a=this.PointInfo[e];t=0==e||2==e?this.Frame.GetYFromData(a.KItem.Low,!1):this.Frame.GetYFromData(a.KItem.High,!1),a.Point.Y2=t}},this.DrawEx=function(){var t=this.PointInfo[0],e=this.PointInfo[1],a=this.PointInfo[2],i=this.Frame.ChartBorder,r=(i.GetRight(),i.GetLeft(),{X:t.Point.X,Y:t.Point.Y2}),n={X:e.Point.X,Y:e.Point.Y2},s={X:a.Point.X,Y:a.Point.Y2};this.DrawLine(r,n),this.DrawLine(n,s),this.LinePoint.push({Start:r,End:n}),this.LinePoint.push({Start:n,End:s}),this.Canvas.setLineDash([5,5]);var o=.09*a.KItem.YClose+a.KItem.High,h=this.Frame.GetYFromData(o,!1);this.DrawLine({X:this.ToFixedPoint(s.X),Y:s.Y},{X:this.ToFixedPoint(s.X),Y:h}),this.Canvas.textAlign="right",this.Canvas.textBaseline="center",this.Canvas.fillStyle="rgb(33,45,100)";for(var l=3;l>0;--l){var u=a.KItem.YClose*(.03*l)+a.KItem.High,h=this.Frame.GetYFromData(u,!1);h=this.ToFixedPoint(h),this.DrawLine({X:s.X,Y:h},{X:s.X+100,Y:h}),this.Canvas.fillText(u.toFixed(2),s.X-5,h)}this.Canvas.setLineDash([])}}function ga(){this.newMethod=Re,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawHLineSegment",this.PointCount=2,this.IsPointIn=this.IsPointIn_XYValue_Line,this.ChartBorder,this.PointToValue_Backup=this.PointToValue,this.PointToValue=function(){this.Frame.IsHScreen?this.Point[1].X=this.Point[0].X:this.Point[1].Y=this.Point[0].Y,this.PointToValue_Backup()},this.GetXYCoordinate=function(){if(this.IsFrameMinSize())return null;var t=this.CalculateDrawPoint({IsCheckX:!1,IsCheckY:!0});return this.PointRange(t)},this.Draw=function(){if(this.Frame&&(this.IsHScreen=this.Frame.IsHScreen,this.LinePoint=[],!this.IsFrameMinSize())){var t=this.CalculateDrawPoint({IsCheckX:!1,IsCheckY:!0});if(t&&2==t.length){this.ClipFrame(),this.ChartBorder=this.Frame.ChartBorder,this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor;var e=t[0],a=t[1];10==this.Status?this.DrawLine(e,a,!1):this.DrawVerticalLine(e,a),this.RestoreLineWidth();var i={Start:e,End:a};this.LinePoint.push(i),this.DrawPoint(t),this.Canvas.restore()}}},this.DrawVerticalLine=function(t,e){var a=this.Frame.Data;if(this.IsHScreen){var i=this.ChartBorder.GetLeft(),r=this.ChartBorder.GetRight(),n=Math.round(this.Frame.GetXData(t.Y,!1))+a.DataOffset;n<0?n=0:n>=a.Data.length&&(n=a.Data.length-1);var s=this.Frame.GetXFromIndex(n-a.DataOffset,!1);n=Math.round(this.Frame.GetXData(e.Y,!1))+a.DataOffset,n<0?n=0:n>=a.Data.length&&(n=a.Data.length-1);var o=this.Frame.GetXFromIndex(n-a.DataOffset,!1);this.Canvas.beginPath(),this.Canvas.moveTo(i,s),this.Canvas.lineTo(r,s),this.Canvas.moveTo(i,o),this.Canvas.lineTo(r,o),this.Canvas.stroke(),this.Canvas.beginPath(),this.Canvas.moveTo(t.X,s),this.Canvas.lineTo(t.X,o),this.Canvas.stroke()}else{var h=this.ChartBorder.GetTopEx(),l=this.ChartBorder.GetBottomEx(),n=Math.round(this.Frame.GetXData(t.X,!1))+a.DataOffset;n<0?n=0:n>=a.Data.length&&(n=a.Data.length-1);var u=this.Frame.GetXFromIndex(n-a.DataOffset,!1);n=Math.round(this.Frame.GetXData(e.X,!1))+a.DataOffset,n<0?n=0:n>=a.Data.length&&(n=a.Data.length-1);var c=this.Frame.GetXFromIndex(n-a.DataOffset,!1);this.Canvas.beginPath(),this.Canvas.moveTo(u,h),this.Canvas.lineTo(u,l),this.Canvas.moveTo(c,h),this.Canvas.lineTo(c,l),this.Canvas.stroke(),this.Canvas.beginPath(),this.Canvas.moveTo(u,t.Y),this.Canvas.lineTo(c,t.Y),this.Canvas.stroke()}}}function Sa(){this.DrawData=new _r.default,this.StorageKey,this.Load=function(t){if(t){this.StorageKey=t;var e=localStorage[this.StorageKey];if(Fr.Chart.Log("[ChartDrawStorage::Save] Load to localStorage, key="+this.StorageKey+", cache="+e),e&&"string"==typeof e){var a=JSON.parse(e);for(var i in a){var r=a[i],n=new _r.default;for(var s in r.Value){var o=r.Value[s];n.set(o.Key,o.Value)}this.DrawData.set(r.Key,n)}}}},this.Save=function(){if(this.StorageKey){var t=[],e=!0,a=!1,i=void 0;try{for(var r,n=(0,Tr.default)(this.DrawData);!(e=(r=n.next()).done);e=!0){var s=r.value,o=s[0],h=s[1],l={Key:o,Value:[]},u=!0,c=!1,d=void 0;try{for(var f,m=(0,Tr.default)(h);!(u=(f=m.next()).done);u=!0){var C=f.value;l.Value.push({Key:C[0],Value:C[1]})}}catch(t){c=!0,d=t}finally{try{!u&&m.return&&m.return()}finally{if(c)throw d}}t.push(l)}}catch(t){a=!0,i=t}finally{try{!e&&n.return&&n.return()}finally{if(a)throw i}}Fr.Chart.Log("[ChartDrawStorage::Save] save to localStorage, key="+this.StorageKey);var p=(0,Lr.default)(t);localStorage[this.StorageKey]=p}},this.SaveDrawData=function(t){var e=t.Symbol+"-"+t.Period,a=t.ExportStorageData();if(a){if(this.DrawData.has(e))Fr.Chart.Log("[ChartDrawStorage::SaveDrawData] Upate: key, drawPicture, data",e,t,a),this.DrawData.get(e).set(a.Guid,a);else{Fr.Chart.Log("[ChartDrawStorage::SaveDrawData] Insert: key, drawPicture, data",e,t,a);var i=new _r.default;i.set(a.Guid,a),this.DrawData.set(e,i)}Fr.Chart.Log("[ChartDrawStorage::SaveDrawData] All draw data： ",this.DrawData),this.Save()}},this.DeleteDrawData=function(t){var e=t.Symbol+"-"+t.Period;if(this.DrawData.has(e)){var a=this.DrawData.get(e);a.has(t.Guid)&&(a.delete(t.Guid),this.Save())}},this.Clear=function(){this.DrawData=new _r.default,this.Save()},this.GetDrawData=function(t){var e=[],a=t.Symbol+"-"+t.Period;if(!this.DrawData.has(a))return e;var i=this.DrawData.get(a),r=!0,n=!1,s=void 0;try{for(var o,h=(0,Tr.default)(i);!(r=(o=h.next()).done);r=!0){var l=o.value;e.push(l[1])}}catch(t){n=!0,s=t}finally{try{!r&&h.return&&h.return()}finally{if(n)throw s}}return e}}function Ta(){this.Data=[[1e-6,2e-6,1e-6,1e-7],[2e-6,4e-6,2e-6,2e-7],[4e-6,5e-6,4e-6,1e-7],[5e-6,1e-5,5e-6,5e-7],[1e-5,2e-5,1e-5,1e-6],[2e-5,4e-5,2e-5,2e-6],[4e-5,5e-5,4e-5,1e-6],[5e-5,1e-4,5e-5,5e-6],[1e-4,2e-4,1e-4,1e-5],[2e-4,4e-4,2e-4,2e-5],[4e-4,5e-4,4e-4,1e-5],[5e-4,.001,5e-4,5e-5],[.001,.002,.001,1e-4],[.002,.004,.002,2e-4],[.004,.005,.004,1e-4],[.005,.01,.005,5e-4],[.01,.02,.01,.001],[.02,.04,.02,.002],[.04,.05,.04,.001],[.05,.1,.05,.005],[.1,.2,.1,.01],[.2,.4,.2,.02],[.4,.5,.4,.01],[.5,1,.5,.05],[1,2,.5,.05],[2,4,.5,.05],[4,5,.5,.05],[5,10,.5,.05],[10,20,10,2],[20,40,20,5],[40,50,40,2],[50,100,50,10],[100,200,100,10],[200,400,200,20],[400,500,400,10],[500,1e3,500,50],[1e3,2e3,1e3,50],[2e3,4e3,2e3,50],[4e3,5e3,4e3,50],[5e3,1e4,5e3,100],[1e4,2e4,1e4,1e3],[2e4,4e4,1e4,1e3],[4e4,5e4,1e4,1e3],[5e4,1e5,1e4,1e3],[1e5,2e5,1e5,1e4],[2e5,4e5,1e5,1e4],[4e5,5e5,1e5,1e4],[5e5,1e6,1e5,1e4],[1e6,2e6,1e6,1e5],[2e6,4e6,1e6,1e5],[4e6,5e6,1e6,1e5],[5e6,1e7,1e6,1e5],[1e7,2e7,1e7,1e6],[2e7,4e7,1e7,1e6],[4e7,5e7,1e7,1e6],[5e7,1e8,1e7,1e6],[1e8,2e8,1e8,1e7],[2e8,4e8,1e8,1e7],[4e8,5e8,1e8,1e7],[5e8,1e9,1e8,1e7],[1e9,2e9,1e9,1e8],[2e9,4e9,1e9,1e8],[4e9,5e9,1e9,1e8],[5e9,1e10,1e9,1e8]],this.Find=function(t){for(var e in this.Data){var a=this.Data[e];if(t>a[0]&&t<=a[1]){var i={};return i.FixInterval=a[2],i.Increase=a[3],i}}return null}}function ya(){this.newMethod=Ta,this.newMethod(),delete this.newMethod,this.Data=[[1e-6,2e-6,1e-6,1e-7],[2e-6,4e-6,2e-6,2e-7],[4e-6,5e-6,4e-6,1e-7],[5e-6,1e-5,5e-6,5e-7],[1e-5,2e-5,1e-5,1e-6],[2e-5,4e-5,2e-5,2e-6],[4e-5,5e-5,4e-5,1e-6],[5e-5,1e-4,5e-5,5e-6],[1e-4,2e-4,1e-4,1e-5],[2e-4,4e-4,2e-4,2e-5],[4e-4,5e-4,4e-4,1e-5],[5e-4,.001,5e-4,5e-5],[.001,.002,.001,1e-4],[.002,.004,.002,1e-4],[.004,.005,.004,1e-4],[.005,.01,.005,5e-4],[.01,.02,.01,.001],[.02,.04,.02,.001],[.04,.05,.04,.001],[.05,.1,.05,.001],[.1,.2,.1,.01],[.2,.4,.2,.01],[.4,.5,.2,.01],[.5,.8,.2,.01],[.8,1,.5,.01],[1,2,.5,.05],[2,4,.5,.05],[4,5,.5,.05],[5,10,.5,.05],[10,12,10,2],[20,40,20,5],[40,50,40,2],[50,100,50,10],[100,200,100,10],[200,400,200,20],[400,500,400,10],[500,1e3,500,50],[1e3,2e3,1e3,50],[2e3,4e3,2e3,50],[4e3,5e3,4e3,50],[5e3,1e4,5e3,100],[1e4,2e4,1e4,1e3],[2e4,4e4,2e4,2e3],[4e4,5e4,4e4,1e3],[5e4,1e5,5e4,5e3],[1e5,2e5,1e5,1e4],[2e5,4e5,2e5,2e4],[4e5,5e5,4e5,1e4],[5e5,1e6,5e5,5e4],[1e6,2e6,1e6,1e5],[2e6,4e6,2e6,2e5],[4e6,5e6,4e6,1e5],[5e6,1e7,5e6,5e5],[1e7,2e7,1e7,1e6],[2e7,4e7,2e7,2e6],[4e7,5e7,4e7,1e6],[5e7,1e8,5e7,5e6],[1e8,2e8,1e8,1e7],[2e8,4e8,2e8,2e7],[4e8,5e8,4e8,1e7],[5e8,1e9,5e8,5e7],[1e9,2e9,1e9,1e8],[2e9,4e9,2e9,2e8],[4e9,5e9,4e9,1e8],[5e9,1e10,5e9,5e8]]}function Ia(){this.TooltipBGColor="rgb(255, 255, 255)",this.TooltipAlpha=.92,this.SelectRectBGColor="rgba(1,130,212,0.06)",this.UpBarColor="rgb(238,21,21)",this.DownBarColor="rgb(25,158,0)",this.UnchagneBarColor="rgb(0,0,0)",this.EmptyBarBGColor="rgb(255,255,255)",this.Minute={},this.Minute.VolBarColor=null,this.Minute.VolTitleColor="rgb(105,105,105)",this.Minute.PriceColor="rgb(50,171,205)",this.Minute.AreaPriceColor="rgba(50,171,205,0.1)",this.Minute.AvPriceColor="rgb(238,127,9)",this.Minute.PositionColor="rgb(218,165,32)",this.Minute.FrameSplitTextColor=null,this.Minute.Before={BGColor:"rgba(240,240,240,0.7)",LineColor:"rgb(50,171,205)",VolColor:["rgb(192,192,0)"],AvPriceColor:"rgb(190,190,190)",Point:{Color:"rgb(65,105,225)",Radius:2*c()},CloseIcon:{Family:"iconfont",Text:"",Color:"rgb(112,128,144)",Size:12}},this.DefaultTextColor="rgb(43,54,69)",this.DefaultTextFont=14*c()+"px 微软雅黑",this.TitleFont=13*c()+"px 微软雅黑",this.IndexTitleBGColor="rgb(217,219,220)",this.IndexTitleColor="rgb(43,54,69)",this.OverlayIndexTitleBGColor="rgba(255,255,255,0.7)",this.Title={TradeIndexColor:"rgb(105,105,105)",ColorIndexColor:"rgb(112,128,144)",VolColor:"rgb(43,54,69)",AmountColor:"rgb(43,54,69)",DateTimeColor:"rgb(43,54,69)",SettingColor:"rgb(43,54,69)",NameColor:"rgb(43,54,69)",TurnoverRateColor:"rgb(43,54,69)",PositionColor:"rgb(43,54,69)"},this.UpTextColor="rgb(238,21,21)",this.DownTextColor="rgb(25,158,0)",this.UnchagneTextColor="rgb(0,0,0)",this.CloseLineColor="rgb(0,191,255)",this.CloseLineAreaColor=["rgba(0,191,255,0.8)","rgba(0,191,255,0.2)"],this.CloseLineWidth=2,this.FrameBorderPen="rgb(225,236,242)",this.FrameSplitPen="rgb(225,236,242)",this.FrameDotSplitPen="rgb(105,105,105)",this.FrameYLineDash=null,this.FrameXLineDash=null,this.FrameSplitTextColor="rgb(117,125,129)",this.FrameSplitTextFont=14*c()+"px 微软雅黑",this.FrameTitleBGColor="rgb(246,251,253)",this.Frame={XBottomOffset:1*c(),YTopOffset:2*c(),YTextPadding:[2,2]},this.FrameLogo={TextColor:"rgb(178,34,34)",Font:"bold "+16*c()+"px 微软雅黑",Text:"*仅学习使用*"},this.Frame.PercentageText={PriceColor:"rgb(117,125,129)",PercentageColor:"rgb(117,125,129)",SplitColor:"rgb(117,125,129)",Font:14*c()+"px 微软雅黑"},this.FrameLogarithmic={OpenPriceFont:"bold "+14*c()+"px 微软雅黑",MinInterval:45*c()},this.FrameSplitIncrease={Increase:.1},this.FrameSplitAverage={Count:4},this.FrameGoldenSection={Golden:[0,.191,.382,.5,.618,.809,1]},this.FrameLatestPrice={TextColor:"rgb(255,255,255)",UpBarColor:"rgb(238,21,21)",DownBarColor:"rgb(25,158,0)",UnchagneBarColor:"rgb(0,0,0)",BGAlpha:.6},this.FrameMargin=4,this.FrameLeftMargin=2,this.FrameRightMargin=2,this.DragSubFrameBorder={TopBorderHeight:6*c(),MinFrameHeight:50*c()},this.OverlayFrame={BolderPen:"rgb(190,190,190)",TitleColor:"rgb(105,105,105)",TitleFont:11*c()+"px arial"},this.CorssCursorBGColor="rgb(43,54,69)",this.CorssCursorTextColor="rgb(255,255,255)",this.CorssCursorTextFont=14*c()+"px 微软雅黑",this.CorssCursorHPenColor="rgb(130,130,130)",this.CorssCursorVPenColor="rgb(130,130,130)",this.CorssCursorXRangeBGColor="rgba(100,149,237,0.3)",this.CorssCursor={RightButton:{BGColor:"rgb(43,54,69)",PenColor:"rgb(255,255,255)",Icon:{Text:"",Color:"rgb(255,255,255)",Family:"iconfont",Size:18}}},this.LockBGColor="rgb(220, 220, 220)",this.LockTextColor="rgb(210, 34, 34)",this.Domain="https://opensource.zealink.com",this.CacheDomain="https://opensourcecache.zealink.com",this.PyIndexDomain="https://py.zealink.com",this.KLine={MaxMin:{Font:12*c()+"px 微软雅黑",Color:"rgb(43,54,69)",RightArrow:"→",LeftArrow:"←",HighYOffset:0,LowYOffset:0},Info:{Investor:{ApiUrl:"/API/NewsInteract",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#1c65db"}},Announcement:{ApiUrl:"/API/ReportList",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#f5a521"},IconFont2:{Family:"iconfont",Text:"",HScreenText:"",Color:"#ed7520"}},Pforecast:{ApiUrl:"/API/StockHistoryDay",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#986cad"}},Research:{ApiUrl:"/API/InvestorRelationsList",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#19b1b7"}},BlockTrading:{ApiUrl:"/API/StockHistoryDay",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#f39f7c"}},TradeDetail:{ApiUrl:"/API/StockHistoryDay",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#b22626"}},IconLibrary:{Family:"iconfont",Icon:[{Text:"",HScreenText:"",Color:"#f39f7c"},{Text:"",HScreenText:"",Color:"#19b1b7"},{Text:"",HScreenText:"",Color:"#b22626"},{Text:"",HScreenText:"",Color:"#ed7520"}]}},NumIcon:{Color:"rgb(251,80,80)",Family:"iconfont",Text:["","","","","","","","","","","","","","","","","","","","",""]},TradeIcon:{Family:"iconfont",Buy:{Color:"rgb(255,15,4)",Text:"",HScreenText:""},Sell:{Color:"rgb(64,122,22)",Text:"",HScreenText:""}}},this.OrderFlow={UpColor:{BG:"rgb(223,191,180)",Border:"rgb(196,84,86)"},DownColor:{BG:"rgb(176,212,184)",Border:"rgb(66,94,74)"},UnchagneColor:{BG:"rgb(216,221,177)",Border:"rgb(209,172,129)"},Text:{Color:"rgb(92,96,89)",Family:"Arial",FontMaxSize:16,MaxValue:"8888"},Line:{UpDownColor:"rgb(0,0,0)",MiddleColor:"rgb(211,211,211)"},AlwaysShowOrderText:!0},this.Index={},this.Index.LineColor=["rgb(255,174,0)","rgb(25,199,255)","rgb(175,95,162)","rgb(236,105,65)","rgb(68,114,196)","rgb(229,0,79)","rgb(0,128,255)","rgb(252,96,154)","rgb(42,230,215)","rgb(24,71,178)"],this.OverlaySymbol={Random:0},this.OverlaySymbol.Color=["rgb(38,198,218)","rgb(103,58,183)","rgb(0,191,165)","rgb(130,177,255)"],this.Index.StockHistoryDayApiUrl="https://opensource.zealink.com/API/StockHistoryDay",this.Index.MarketLongShortApiUrl="https://opensource.zealink.com/API/FactorTiming",this.Index.MarketAttentionApiUrl="https://opensource.zealink.com/API/MarketAttention",this.Index.MarketHeatApiUrl="https://opensource.zealink.com/API/MarketHeat",this.Index.CustomIndexHeatApiUrl="https://opensource.zealink.com/API/QuadrantCalculate",this.Index.NotSupport={Font:"14px 微软雅黑",TextColor:"rgb(52,52,52)"},this.DrawPicture={LineColor:["rgb(30,144,255)"],PointColor:["rgb(128,128,128)","rgb(192,192,192)"],XYCoordinate:{BGColor:"rgba(203,216,255,0.5)",TextBGColor:"rgb(52,101,255)",TextColor:"rgb(255,255,255)",Font:14*c()+"px 微软雅黑"},PointType:0,IsShowPoint:!1},this.ChartOX={Family:"iconfont",Up:{Color:"rgb(178,34,34)",Text:""},Down:{Color:"rgb(0,206,209)",Text:""},SquareLineColor:"rgb(119,136,153)"},this.KLineTrain={Font:"bold 14px arial",LastDataIcon:{Color:"rgb(0,0,205)",Text:"⬇"},BuyIcon:{Color:"rgb(0,205,102 )",Text:"B"},SellIcon:{Color:"rgb(255,127,36 )",Text:"S"},IconFont:{Family:"iconfont",Buy:{Text:"",HScreenText:"",Color:"rgb(255,140,0)"},Sell:{Text:"",HScreenText:"",Color:"rgb(6,79,18)"},Last:{Text:"",HScreenText:"",Color:"rgb(55,0,255)"}}},this.TooltipPaint={BGColor:"rgba(250,250,250,0.8)",BorderColor:"rgb(120,120,120)",TitleColor:"rgb(120,120,120)",TitleFont:13*c()+"px 微软雅黑",DateTimeColor:"rgb(210,210,210)",VolColor:"rgb(210,210,210)",AmountColor:"rgb(210,210,210)"},this.PCTooltip={LineHeight:25},this.Barrage={Font:16*c()+"px 微软雅黑",Height:20,Color:"RGB(109,109,109)"},this.MinuteInfo={TextColor:"rgb(84,143,255)",Font:14*c()+"px 微软雅黑",PointColor:"rgb(38,113,254)",LineColor:"rgb(120,167,255)",TextBGColor:"rgba(255,255,255,0.8)"},this.ChartDrawRuler={TitleColor:null},this.ChartDrawWaveRuler={RulerWidth:10,RulerLineWidth:1,MaxScaleRuler:2,Font:14*c()+"px 微软雅黑",ScaleRuler:[{Value:0,Text:"0.0%"},{Value:.382,Text:"38.2%"},{Value:.618,Text:"61.8%"},{Value:1,Text:"100%"},{Value:1.618,Text:"161.8%"},{Value:2,Text:"200%"}]},this.ChartDrawWaveRuler2Point={RulerWidth:20,RulerLineWidth:1,MaxScaleRuler:2,Font:14*c()+"px 微软雅黑",ScaleRuler:[{Value:0,Text:"base"},{Value:.618,Text:"61.8%"},{Value:1,Text:"100%"},{Value:1.618,Text:"161.8%"}]},this.DRAWICON={Icon:{MaxSize:24,MinSize:12,YOffset:0,Zoom:{Type:1,Value:1}},Text:{MaxSize:50,MinSize:12,YOffset:0,Zoom:{Type:1,Value:1},FontName:"Arial"}},this.DRAWTEXT={MaxSize:30,MinSize:20,YOffset:0,Zoom:{Type:1,Value:1},FontName:"微软雅黑"},this.DRAWNUMBER={MaxSize:30,MinSize:20,YOffset:0,Zoom:{Type:1,Value:1},FontName:"微软雅黑"},this.DRAWABOVE={YOffset:0},this.DRAWTEXT_FIX={Font:14*c()+"px 微软雅黑"},this.DRAWNUMBER_FIX={Font:14*c()+"px 微软雅黑"},this.DOTLINE={LineDash:[3,5]},this.DRAWSL={PixelWidth:15},this.CIRCLEDOT={Radius:1.3*c()},this.POINTDOT={Radius:2*c()},this.StockChip={InfoColor:"rgb(0,0,0)",DayInfoColor:"rgb(255,255,255)"},this.DepthChart={BidColor:{Line:"rgb(82,176,123)",Area:"rgba(82,176,123,0.8)"},AskColor:{Line:"rgb(207,76,89)",Area:"rgba(207,76,89, 0.8)"},LineWidth:4},this.DepthCorss={BidColor:{Line:"rgb(82,176,123)"},AskColor:{Line:"rgb(207,76,89)"},LineWidth:2,LineDash:[3,3],Tooltip:{BGColor:"rgba(236,240,245, 0.8)",TextColor:"rgb(130,140,151)",Border:{Top:5,Left:20,Bottom:5,Center:5},Font:14*c()+"px 微软雅黑",LineHeight:16}},this.RectSelect={LineColor:"rgb(64,64,64)",LineWidth:1*c(),LineDotted:[3,3],AreaColor:"rgba(234,234,234,0.5)"},this.SetStyle=function(t){if(t.TooltipBGColor&&(this.TooltipBGColor=t.TooltipBGColor),t.TooltipAlpha&&(this.TooltipAlpha=t.TooltipAlpha),t.SelectRectBGColor&&(this.SelectRectBGColor=t.SelectRectBGColor),t.UpBarColor&&(this.UpBarColor=t.UpBarColor),t.DownBarColor&&(this.DownBarColor=t.DownBarColor),t.UnchagneBarColor&&(this.UnchagneBarColor=t.UnchagneBarColor),t.EmptyBarBGColor&&(this.EmptyBarBGColor=t.EmptyBarBGColor),t.Minute&&(t.Minute.VolBarColor&&(this.Minute.VolBarColor=t.Minute.VolBarColor),t.Minute.VolTitleColor&&(this.Minute.VolTitleColor=t.Minute.VolTitleColor),t.Minute.PriceColor&&(this.Minute.PriceColor=t.Minute.PriceColor),t.Minute.AvPriceColor&&(this.Minute.AvPriceColor=t.Minute.AvPriceColor),t.Minute.AreaPriceColor&&(this.Minute.AreaPriceColor=t.Minute.AreaPriceColor),t.Minute.PositionColor&&(this.Minute.PositionColor=t.Minute.PositionColor),t.Minute.FrameSplitTextColor&&(this.Minute.FrameSplitTextColor=t.Minute.FrameSplitTextColor),t.Minute.Before)){var e=t.Minute.Before;e.BGColor&&(this.Minute.Before.BGColor=e.BGColor),e.LineColor&&(this.Minute.Before.LineColor=e.LineColor),e.VolColor&&(this.Minute.Before.VolColor=e.VolColor),e.AvPriceColor&&(this.Minute.Before.AvPriceColor=e.AvPriceColor),e.CloseIcon&&(this.Minute.Before.CloseIcon=e.CloseIcon),e.Point&&(e.Point.Color&&(this.Minute.Before.Point.Color=e.Point.Color),e.Point.Radius&&(this.Minute.Before.Point.Radius=e.Point.Radius))}if(t.DefaultTextColor&&(this.DefaultTextColor=t.DefaultTextColor),t.DefaultTextFont&&(this.DefaultTextFont=t.DefaultTextFont),t.TitleFont&&(this.TitleFont=t.TitleFont),t.IndexTitleBGColor&&(this.IndexTitleBGColor=t.IndexTitleBGColor),t.IndexTitleColor&&(this.IndexTitleColor=t.IndexTitleColor),t.OverlayIndexTitleBGColor&&(this.OverlayIndexTitleBGColor=t.OverlayIndexTitleBGColor),t.UpTextColor&&(this.UpTextColor=t.UpTextColor),t.DownTextColor&&(this.DownTextColor=t.DownTextColor),t.UnchagneTextColor&&(this.UnchagneTextColor=t.UnchagneTextColor),t.CloseLineColor&&(this.CloseLineColor=t.CloseLineColor),t.CloseLineAreaColor&&(this.CloseLineAreaColor=t.CloseLineAreaColor),t.CloseLineWidth&&(this.CloseLineWidth=t.CloseLineWidth),t.FrameBorderPen&&(this.FrameBorderPen=t.FrameBorderPen),t.FrameSplitPen&&(this.FrameSplitPen=t.FrameSplitPen),t.FrameDotSplitPen&&(this.FrameDotSplitPen=t.FrameDotSplitPen),t.FrameSplitTextColor&&(this.FrameSplitTextColor=t.FrameSplitTextColor),t.FrameSplitTextFont&&(this.FrameSplitTextFont=t.FrameSplitTextFont),t.FrameTitleBGColor&&(this.FrameTitleBGColor=t.FrameTitleBGColor),t.Frame&&(t.Frame.XBottomOffset&&(this.Frame.XBottomOffset=t.Frame.XBottomOffset),t.Frame.YTopOffset&&(this.Frame.YTopOffset=t.Frame.YTopOffset),t.Frame.PercentageText)){var e=t.Frame.PercentageText;e.PriceColor&&(this.Frame.PercentageText.PriceColor=e.PriceColor),e.PercentageColor&&(this.Frame.PercentageText.PercentageColor=e.PercentageColor),e.SplitColor&&(this.Frame.PercentageText.SplitColor=e.SplitColor),e.Font&&(this.Frame.PercentageText.Font=e.Font)}if(t.FrameLatestPrice&&(t.FrameLatestPrice.TextColor&&(this.FrameLatestPrice.TextColor=t.FrameLatestPrice.TextColor),t.FrameLatestPrice.UpBarColor&&(this.FrameLatestPrice.UpBarColor=t.FrameLatestPrice.UpBarColor),t.FrameLatestPrice.DownBarColor&&(this.FrameLatestPrice.DownBarColor=t.FrameLatestPrice.DownBarColor),t.FrameLatestPrice.UnchagneBarColor&&(this.FrameLatestPrice.UnchagneBarColor=t.FrameLatestPrice.UnchagneBarColor),t.FrameLatestPrice.BGAlpha&&(this.FrameLatestPrice.BGAlpha=t.FrameLatestPrice.BGAlpha)),t.CorssCursorBGColor&&(this.CorssCursorBGColor=t.CorssCursorBGColor),t.CorssCursorTextColor&&(this.CorssCursorTextColor=t.CorssCursorTextColor),t.CorssCursorTextFont&&(this.CorssCursorTextFont=t.CorssCursorTextFont),t.CorssCursorVPenColor&&(this.CorssCursorVPenColor=t.CorssCursorVPenColor),t.CorssCursorHPenColor&&(this.CorssCursorHPenColor=t.CorssCursorHPenColor),t.CorssCursorBorderColor&&(this.CorssCursorBorderColor=t.CorssCursorBorderColor),t.CorssCursorXRangeBGColor&&(this.CorssCursorXRangeBGColor=t.CorssCursorXRangeBGColor),t.CorssCursor&&t.CorssCursor.RightButton){var e=t.CorssCursor.RightButton;e.BGColor&&(this.CorssCursor.RightButton.BGColor=e.BGColor),e.PenColor&&(this.CorssCursor.RightButton.PenColor=e.PenColor),e.Icon&&(this.CorssCursor.RightButton.Icon=e.Icon)}if(t.KLine&&(this.KLine=t.KLine),t.Index&&(t.Index.LineColor&&(this.Index.LineColor=t.Index.LineColor),t.Index.NotSupport&&(this.Index.NotSupport=t.Index.NotSupport)),t.ColorArray&&(this.ColorArray=t.ColorArray),t.DrawPicture){var e=t.DrawPicture;e.LineColor&&(this.DrawPicture.LineColor=e.LineColor),e.PointColor&&(this.DrawPicture.PointColor=e.PointColor),e.XYCoordinate&&(this.DrawPicture.XYCoordinate=e.XYCoordinate),he.IsNumber(e.PointType)&&(this.DrawPicture.PointType=e.PointType),he.IsBool(e.IsShowPoint)&&(this.DrawPicture.IsShowPoint=e.IsShowPoint)}if(t.TooltipPaint&&(t.TooltipPaint.BGColor&&(this.TooltipPaint.BGColor=t.TooltipPaint.BGColor),t.TooltipPaint.BorderColor&&(this.TooltipPaint.BorderColor=t.TooltipPaint.BorderColor),t.TooltipPaint.TitleColor&&(this.TooltipPaint.TitleColor=t.TooltipPaint.TitleColor),t.TooltipPaint.TitleFont&&(this.TooltipPaint.TitleFont=t.TooltipPaint.TitleFont),t.TooltipPaint.DateTimeColor&&(this.TooltipPaint.DateTimeColor=t.TooltipPaint.DateTimeColor),t.TooltipPaint.VolColor&&(this.TooltipPaint.VolColor=t.TooltipPaint.VolColor),t.TooltipPaint.AmountColor&&(this.TooltipPaint.AmountColor=t.TooltipPaint.AmountColor)),t.MinuteInfo&&(t.MinuteInfo.TextColor&&(this.MinuteInfo.TextColor=t.MinuteInfo.TextColor),t.MinuteInfo.Font&&(this.MinuteInfo.Font=t.MinuteInfo.Font),t.MinuteInfo.PointColor&&(this.MinuteInfo.PointColor=t.MinuteInfo.PointColor),t.MinuteInfo.LineColor&&(this.MinuteInfo.LineColor=t.MinuteInfo.LineColor),t.MinuteInfo.TextBGColor&&(this.MinuteInfo.TextBGColor=t.MinuteInfo.TextBGColor)),t.Title&&(t.Title.TradeIndexColor&&(this.Title.TradeIndexColor=t.Title.TradeIndexColor),t.Title.ColorIndexColor&&(this.Title.ColorIndexColor=t.Title.ColorIndexColor),t.Title.VolColor&&(this.Title.VolColor=t.Title.VolColor),t.Title.AmountColor&&(this.Title.AmountColor=t.Title.AmountColor),t.Title.DateTimeColor&&(this.Title.DateTimeColor=t.Title.DateTimeColor),t.Title.NameColor&&(this.Title.NameColor=t.Title.NameColor),t.Title.SettingColor&&(this.Title.SettingColor=t.Title.SettingColor),t.Title.TurnoverRateColor&&(this.Title.TurnoverRateColor=t.Title.TurnoverRateColor),t.Title.PositionColor&&(this.Title.PositionColor=t.Title.PositionColor)),t.DRAWICON){if(t.DRAWICON.Icon){var e=t.DRAWICON.Icon;he.IsPlusNumber(e.MaxSize)&&(this.DRAWICON.Icon.MaxSize=e.MaxSize),he.IsPlusNumber(e.MinSize)&&(this.DRAWICON.Icon.MinSize=e.MinSize),e.Zoom&&(this.DRAWICON.Icon.Zoom=e.Zoom),he.IsNumber(e.YOffset)&&(this.DRAWICON.Icon.YOffset=e.YOffset)}if(t.DRAWICON.Text){var e=t.DRAWICON.Text;he.IsPlusNumber(e.MaxSize)&&(this.DRAWICON.Text.MaxSize=e.MaxSize),he.IsPlusNumber(e.MinSize)&&(this.DRAWICON.Text.MinSize=e.MinSize),e.Zoom&&(this.DRAWICON.Text.Zoom=e.Zoom),e.FontName&&(this.DRAWICON.Text.FontName=e.FontName),he.IsNumber(e.YOffset)&&(this.DRAWICON.Text.YOffset=e.YOffset)}}if(t.DRAWTEXT){var e=t.DRAWTEXT;he.IsPlusNumber(e.MaxSize)&&(this.DRAWICON.MaxSize=e.MaxSize),he.IsPlusNumber(e.MinSize)&&(this.DRAWICON.MinSize=e.MinSize),e.Zoom&&(this.DRAWTEXT.Zoom=e.Zoom),e.FontName&&(this.DRAWTEXT.FontName=e.FontName),he.IsNumber(e.YOffset)&&(this.DRAWTEXT.YOffset=e.YOffset)}if(t.DRAWTEXT_FIX){var e=t.DRAWTEXT_FIX;e.Font&&(this.DRAWTEXT_FIX.Font=e.Font)}if(t.DRAWNUMBER_FIX){var e=t.DRAWNUMBER_FIX;e.Font&&(this.DRAWNUMBER_FIX.Font=e.Font)}if(t.DRAWNUMBER){var e=t.DRAWNUMBER;he.IsPlusNumber(e.MaxSize)&&(this.DRAWNUMBER.MaxSize=e.MaxSize),he.IsPlusNumber(e.MinSize)&&(this.DRAWNUMBER.MinSize=e.MinSize),e.Zoom&&(this.DRAWNUMBER.Zoom=e.Zoom),e.FontName&&(this.DRAWNUMBER.FontName=e.FontName),he.IsNumber(e.YOffset)&&(this.DRAWNUMBER.YOffset=e.YOffset)}if(t.DRAWABOVE){var e=t.DRAWABOVE;he.IsNumber(e.YOffset)&&(this.DRAWABOVE.YOffset=e.YOffset)}if(t.DOTLINE&&(this.DOTLINE=t.DOTLINE),t.DRAWSL&&(this.DOTLINE=t.DRAWSL),t.DragSubFrameBorder&&(this.DragSubFrameBorder=t.DragSubFrameBorder),t.StockChip){var e=t.StockChip;e.InfoColor&&(this.StockChip.InfoColor=e.InfoColor),e.DayInfoColor&&(this.StockChip.DayInfoColor=e.DayInfoColor)}if(t.DepthChart){var e=t.DepthChart;e.BidColor&&(e.BidColor.Line&&(this.DepthChart.BidColor.Line=e.BidColor.Line),e.BidColor.Area&&(this.DepthChart.BidColor.Area=e.BidColor.Area)),e.AskColor&&(e.AskColor.Line&&(this.DepthChart.AskColor.Line=e.AskColor.Line),e.AskColor.Area&&(this.DepthChart.AskColor.Area=e.AskColor.Area)),e.LineWidth&&(this.DepthChart.LineWidth=e.LineWidth)}if(t.DepthCorss){var e=t.DepthCorss;if(e.BidColor&&e.BidColor.Line&&(this.DepthCorss.BidColor.Line=e.BidColor.Line),e.AskColor&&e.AskColor.Line&&(this.DepthCorss.AskColor.Line=e.AskColor.Line),e.LineWidth&&(this.DepthCorss.LineWidth=e.LineWidth),e.LineDash&&(this.DepthCorss.LineDash=e.LineDash),e.Tooltip){var a=e.Tooltip;a.BGColor&&(this.DepthCorss.Tooltip.BGColor=a.BGColor),a.TextColor&&(this.DepthCorss.Tooltip.TextColor=a.TextColor),a.Font&&(this.DepthCorss.Tooltip.Font=a.Font),a.LineHeight&&(this.DepthCorss.Tooltip.LineHeight=a.LineHeight);var i=a.Border;he.IsNumber(i.Top)&&(this.DepthCorss.Tooltip.Border.Top=i.Top),he.IsNumber(i.Left)&&(this.DepthCorss.Tooltip.Border.Left=i.Left),he.IsNumber(i.Bottom)&&(this.DepthCorss.Tooltip.Border.Bottom=i.Bottom),he.IsNumber(i.Center)&&(this.DepthCorss.Tooltip.Border.Center=i.Center)}}if(t.CIRCLEDOT){var e=t.CIRCLEDOT;he.IsNumber(e.Radius)&&(this.CIRCLEDOT.Radius=e.Radius)}if(t.POINTDOT){var e=t.POINTDOT;he.IsNumber(e.Radius)&&(this.POINTDOT.Radius=e.Radius)}if(t.RectSelect){var e=t.RectSelect;e.LineColor&&(this.RectSelect.LineColor=e.LineColor),e.LineWidth>0&&(this.RectSelect.LineWidth=e.LineWidth),e.LineDotted&&(this.RectSelect.LineDotted=e.LineDotted),e.AreaColor&&(this.RectSelect.AreaColor=e.AreaColor)}if(t.OrderFlow&&(e=t.OrderFlow,e.UpColor&&(this.OrderFlow.UpColor=e.UpColor),e.DownColor&&(this.OrderFlow.DownColor=e.DownColor),e.UnchagneColor&&(this.OrderFlow.UnchagneColor=e.UnchagneColor),e.Text&&(this.OrderFlow.Text=e.Text),e.Line&&(this.OrderFlow.Line=e.Line)),t.ChartOX){var e=t.ChartOX;e.Family&&(this.ChartOX.Family=e.Family),e.Up&&(this.ChartOX.Up=e.Up),e.Down&&(this.ChartOX.Down=e.Down),e.SquareLineColor&&(this.ChartOX.SquareLineColor=e.SquareLineColor)}}}function xa(){this.TextResource=new _r.default([["Tooltip-Open",{CN:"开:",EN:"O:",TC:"開"}],["Tooltip-High",{CN:"高:",EN:"H:",TC:"高"}],["Tooltip-Low",{CN:"低:",EN:"L:",TC:"低"}],["Tooltip-Close",{CN:"收:",EN:"C:",TC:"收"}],["Tooltip-Increase",{CN:"幅:",EN:"I:",TC:"幅"}],["Tooltip-Vol",{CN:"量:",EN:"V:",TC:"量"}],["Tooltip-Amount",{CN:"额:",EN:"A:",TC:"額"}],["Tooltip-AvPrice",{CN:"均:",EN:"AP:",TC:"均"}],["Tooltip-Price",{CN:"价:",EN:"P:",TC:"價"}],["Tooltip-Exchange",{CN:"换:",EN:"E:",TC:"換"}],["Tooltip-Position",{CN:"持:",EN:"P:",TC:"持"}],["DivTooltip-Open",{CN:"开盘:",EN:"Open:",TC:"開盤"}],["DivTooltip-High",{CN:"最高:",EN:"High:",TC:"最高"}],["DivTooltip-Low",{CN:"最低:",EN:"Low:",TC:"最低"}],["DivTooltip-Close",{CN:"收盘:",EN:"Close:",TC:"收盤"}],["DivTooltip-Increase",{CN:"涨幅:",EN:"Increase:",TC:"漲幅"}],["DivTooltip-Vol",{CN:"数量:",EN:"Volume:",TC:"數量"}],["DivTooltip-Amount",{CN:"金额:",EN:"Amount:",TC:"金額"}],["DivTooltip-Exchange",{CN:"换手:",EN:"Exchange:",TC:"換手"}],["DivTooltip-Position",{CN:"持仓:",EN:"Position:",TC:"持倉"}],["DivTooltip-Price",{CN:"价格:",EN:"Open:",TC:"價格"}],["KTitle-Open",{CN:"开:",EN:"O:",TC:"開"}],["KTitle-High",{CN:"高:",EN:"H:",TC:"高"}],["KTitle-Low",{CN:"低:",EN:"L:",TC:"低"}],["KTitle-Close",{CN:"收:",EN:"C:",TC:"收"}],["KTitle-Increase",{CN:"幅:",EN:"I:",TC:"幅"}],["KTitle-Vol",{CN:"量:",EN:"V:",TC:"量"}],["KTitle-Amount",{CN:"额:",EN:"A:",TC:"額"}],["KTitle-Exchange",{CN:"换:",EN:"E:",TC:"換"}],["KTitle-Position",{CN:"持:",EN:"P:",TC:"持"}],["KTitle-Price",{CN:"价:",EN:"Price:",TC:"價"}],["MTitle-AC-Price",{CN:"匹配价:",EN:"C:",TC:"匹配價"}],["MTitle-AC-AvPrice",{CN:"匹配均价:",EN:"C:",TC:"匹配均價"}],["MTitle-AC-Increase",{CN:"竞价涨幅:",EN:"I:",TC:"競價漲幅"}],["MTitle-AC-Vol",{CN:"匹配量:",EN:"V:",TC:"匹配量"}],["MTitle-AC-NotMatchVol",{CN:"未匹配量:",EN:"NV:",TC:"未匹配量"}],["MTitle-Close",{CN:"价:",EN:"C:",TC:"價"}],["MTitle-AvPrice",{CN:"均:",EN:"AC:",TC:"均"}],["MTitle-Increase",{CN:"幅:",EN:"I:",TC:"幅"}],["MTitle-Vol",{CN:"量:",EN:"V:",TC:"量"}],["MTitle-Amount",{CN:"额:",EN:"A:",TC:"額"}],["MTitle-Position",{CN:"持:",EN:"P:",TC:"持"}],["MTitle-UpdateTime",{CN:"更新:",EN:"Update:",TC:"更新:"}],["日线",{CN:"日线",EN:"1D",TC:"日綫"}],["周线",{CN:"周线",EN:"1W",TC:"周綫"}],["双周",{CN:"双周",EN:"2W",TC:"雙周"}],["月线",{CN:"月线",EN:"1M",TC:"月綫"}],["半年",{CN:"半年",EN:"HY",TC:"半年"}],["年线",{CN:"年线",EN:"1Y",TC:"年綫"}],["1分",{CN:"1分",EN:"1Min",TC:"1分"}],["5分",{CN:"5分",EN:"5Min",TC:"5分"}],["15分",{CN:"15分",EN:"15Min",TC:"15分"}],["30分",{CN:"30分",EN:"30Min",TC:"30分"}],["60分",{CN:"60分",EN:"60Min",TC:"60分"}],["季线",{CN:"季线",EN:"1Q",TC:"季綫"}],["分笔",{CN:"分笔",EN:"Tick",TC:"分筆"}],["2小时",{CN:"2小时",EN:"2H",TC:"2小時"}],["4小时",{CN:"4小时",EN:"4H",TC:"4小時"}],["不复权",{CN:"不复权",EN:"No Right",TC:"不復權"}],["前复权",{CN:"前复权",EN:"Pro Right",TC:"前復權"}],["后复权",{CN:"后复权",EN:"Post Right",TC:"后復權"}],["日",{CN:"日",EN:"Sun.",TC:"日"}],["一",{CN:"一",EN:"Mon.",TC:"壹"}],["二",{CN:"二",EN:"Tues.",TC:"貳"}],["三",{CN:"三",EN:"Wed.",TC:"叁"}],["四",{CN:"四",EN:"Thur.",TC:"肆"}],["五",{CN:"五",EN:"Fri.",TC:"伍"}],["六",{CN:"六",EN:"Sat.",TC:"陸"}],["1月",{CN:"1月",EN:"Jan",TC:"1月"}],["2月",{CN:"2月",EN:"Feb",TC:"2月"}],["3月",{CN:"3月",EN:"Mar",TC:"3月"}],["4月",{CN:"4月",EN:"Apr",TC:"4月"}],["5月",{CN:"5月",EN:"May",TC:"5月"}],["6月",{CN:"6月",EN:"Jun",TC:"6月"}],["7月",{CN:"7月",EN:"Jul",TC:"7月"}],["8月",{CN:"8月",EN:"Aug",TC:"8月"}],["9月",{CN:"9月",EN:"Sept",TC:"9月"}],["10月",{CN:"10月",EN:"Oct",TC:"10月"}],["11月",{CN:"11月",EN:"Nov",TC:"11月"}],["12月",{CN:"12月",EN:"Dec",TC:"12月"}],["自定义分钟",{CN:"分",EN:"Min",TC:"分"}],["自定义日线",{CN:"日",EN:"D",TC:"日"}],["自定义秒",{CN:"秒",EN:"S",TC:"秒"}],["MVol-Vol",{CN:"成交量",EN:"Volume",TC:"成交量"}],["MVol-Position",{CN:"持仓量",EN:"Position",TC:"持倉量"}],["Depth-Price",{CN:"委托价",EN:"Price",TC:"委托價"}],["Depth-Sum",{CN:"累计",EN:"Sum",TC:"累計"}]]),this.GetText=function(t,e){var a=this.TextResource.get(t);if(!a)return"";switch(e){case tn.LANGUAGE_CHINESE_ID:return a.CN;case tn.LANGUAGE_ENGLISH_ID:return a.EN;case tn.LANGUAGE_TRADITIONAL_CHINESE_ID:return a.TC;default:return a.CN}},this.SetTextResource=function(t,e){this.TextResource.set(t,e)}}function La(){}function Ma(){}function _a(t,e){this.newMethod=u,this.newMethod(t,e),delete this.newMethod,this.ClassName="KLineChartContainer",this.WindowIndex=new Array,this.ColorIndex,this.TradeIndex,this.Symbol,this.Name,this.Period=0,this.IsApiPeriod=!1,this.Right=0,this.RightFormula=0,this.SourceData,this.MaxReqeustDataCount=3e3,this.MaxRequestMinuteDayCount=5,this.PageSize=200,this.KLineDrawType=0,this.ScriptErrorCallback,this.FlowCapitalReady=!1,this.EnableFlowCapital={},this.EnableZoomUpDown=null,this.ChartDrawStorage=new Sa,this.ChartDrawStorageCache=null,this.RightSpaceCount=0,this.SourceDataLimit=new _r.default,this.CustomShow=null,this.OverlayIndexFrameWidth=60,this.ZoomType=0,this.IsZoomLockRight=!1,this.KLineSize=null,this.Page={Day:{Enable:!1,Index:0,Finish:!1},Minute:{Enable:!1,Index:0,Finish:!1}},this.DragDownload={Day:{Enable:!1,IsEnd:!1,Status:0},Minute:{Enable:!1,IsEnd:!1,Status:0},Tick:{Enable:!1,IsEnd:!1,Status:0}},this.IsAutoUpdate=!1,this.AutoUpdateFrequency=3e4,this.AutoUpdateTimer,this.KLineApiUrl=$r.Domain+"/API/KLine2",this.MinuteKLineApiUrl=$r.Domain+"/API/KLine3",this.DragMinuteKLineApiUrl=$r.Domain+"/API/KLine4",this.DragKLineApiUrl=$r.Domain+"/API/KLine5",this.RealtimeApiUrl=$r.Domain+"/API/Stock",this.KLineMatchUrl=$r.Domain+"/API/KLineMatch",this.StockHistoryDayApiUrl=$r.Domain+"/API/StockHistoryDay",this.TickApiUrl=$r.Domain+"/API/StockDetail",this.MinuteDialog,this.RightMenu,this.BeforeBindMainData=null,this.AfterBindMainData=null,this.ResetDragDownload=function(){this.DragDownload.Day.Status=0,this.DragDownload.Day.IsEnd=!1,this.DragDownload.Minute.Status=0,this.DragDownload.Minute.IsEnd=!1,this.DragDownload.Tick.Status=0,this.DragDownload.Tick.IsEnd=!1},this.ResetPage=function(){this.Page.Day.Finish=!1,this.Page.Day.Index=0,this.Page.Minute.Finish=!1,this.Page.Minute.Index=0},this.AddCustomKLine=function(t,e){var a=this.ChartPaint[0];if(a&&t){if(a.CustomKLine||(a.CustomKLine=new _r.default),Array.isArray(t))for(var i=0;i<t.length;++i){var r=t[i];a.CustomKLine.set(r.Key,r.Data)}else t&&a.CustomKLine.set(t.Key,t.Data);e&&1==e.Draw&&this.Draw()}},this.ClearCustomKLine=function(t){var e=this.ChartPaint[0];e&&(e.ClearCustomKLine(),t&&1==t.Draw&&this.Draw())},this.StopAutoUpdate=function(){this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::StopAutoUpdate"),this.IsAutoUpdate&&(this.IsAutoUpdate=!1)},this.SandTableOperator=function(t){switch(t.ID){case 1:this.StopAutoUpdate(),t.Data&&this.ManualUpdateKData(t);break;case 2:this.ManualUpdateKData(t);break;case 3:t.IsAutoUpdate&&(this.IsAutoUpdate=t.IsAutoUpdate),this.ChangeSymbol(this.Symbol)}},this.ManualUpdateKData=function(t){var e=t.Data,a=e.length,i=new Z;i.Data=e,i.Period=this.Period,i.Right=this.Right,i.Symbol=this.Symbol,this.UpdateMainData(i,a),this.BindInstructionIndexData(i);for(var r=0;r<this.Frame.SubFrame.length;++r)this.BindIndexData(r,i);if(he.IsNumber(t.DataOffset)&&t.DataOffset>=0){var n=null;n=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data,n&&(n.DataOffset=t.DataOffset)}this.UpdataDataoffset(),this.UpdatePointByCursorIndex(1),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.SendManualKLineUpdateEvent(i)},this.GetKDataInfo=function(){if(!this.ChartPaint[0])return null;var t=this.ChartPaint[0],e={};return t.Data&&t.Data.Data&&(e.Data=t.Data.CloneData("HistoryData")),e.ShowRange=t.ShowRange,e.Period=this.Period,e.RightSpaceCount=this.RightSpaceCount,e},this.ChartOperator=function(t){var e=t.ID;if(e===Or.OP_SCROLL_LEFT||e===Or.OP_SCROLL_RIGHT){var a=e===Or.OP_SCROLL_LEFT,i=1;t.Step>0&&(i=t.Step);var r=this.GetMoveOneStepWidth();this.DataMove(i*r,a)?(this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.ResetFrameXYSplit(),this.Draw()):e===Or.OP_SCROLL_RIGHT&&this.DragDownloadData&&this.DragDownloadData()}else if(e===Or.OP_ZOOM_IN||e===Or.OP_ZOOM_OUT){var n={};if(n.Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),e===Or.OP_ZOOM_IN){if(!this.Frame.ZoomUp(n))return}else if(!this.Frame.ZoomDown(n))return;this.CursorIndex=n.Index,this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw()}else if(e===Or.OP_GOTO_HOME){var s=this.ChartOperator_Temp_GetHistroyData();if(!s)return;var o=this.Frame.SubFrame[0].Frame.XPointCount;o-=this.RightSpaceCount;var h=s.Data.length-o;s.DataOffset=h,this.CursorIndex=0,this.LastPoint.X=null,this.LastPoint.Y=null,Fr.Chart.Log("[KLineChartContainer::ChartOperator] OP_GOTO_HOME, dataOffset="+s.DataOffset+" CursorIndex="+this.CursorIndex+" PageSize="+o),this.ChartOperator_Temp_Update()}else if(e===Or.OP_GOTO_END){var s=this.ChartOperator_Temp_GetHistroyData();if(!s)return;s.DataOffset=0,this.CursorIndex=0,this.LastPoint.X=null,this.LastPoint.Y=null,Fr.Chart.Log("[KLineChartContainer::ChartOperator] OP_GOTO_END "),this.ChartOperator_Temp_Update()}else if(e==Or.OP_LEFT_ZOOM_IN||e==Or.OP_LEFT_ZOOM_OUT){var s=this.ChartOperator_Temp_GetHistroyData();if(!s)return;var l=s.Data.length,o=this.Frame.SubFrame[0].Frame.XPointCount,u=s.DataOffset;if(e==Or.OP_LEFT_ZOOM_IN){if(he.IsNumber(t.Step)){if(o>=l)return;var i=t.Step;if(i>u&&(i=u),o+i>l&&(i=l-o),i<=0)return;o+=i,s.DataOffset-=i}}else if(e==Or.OP_LEFT_ZOOM_OUT){var c=this.GetMaxMinPageSize(),d=c.Min;if(he.IsNumber(t.Step)){if(o<d)return;var i=t.Step;if(o-i<d&&(i=o-d),i<=0)return;o-=i,s.DataOffset+=i}}for(var f in this.Frame.SubFrame){var m=this.Frame.SubFrame[f].Frame;m.XPointCount=o}s.DataOffset<0&&(s.DataOffset=0),this.ChartOperator_Temp_Update()}else if(e==Or.OP_RIGHT_ZOOM_IN||e==Or.OP_RIGHT_ZOOM_OUT){var s=this.ChartOperator_Temp_GetHistroyData();if(!s)return;var l=s.Data.length,o=this.Frame.SubFrame[0].Frame.XPointCount,u=s.DataOffset;if(e==Or.OP_RIGHT_ZOOM_IN){if(he.IsNumber(t.Step)){if(o>=l)return;var C=u+o,p=l-C;if(p<=0)return;var i=t.Step;if(i>p&&(i=p),i<=0)return;o+=i}}else if(e==Or.OP_RIGHT_ZOOM_OUT){var c=this.GetMaxMinPageSize(),d=c.Min;if(he.IsNumber(t.Step)){if(o<d)return;var i=t.Step;if(i>o&&(i=o),o-i<d&&(i=o-d),i<=0)return;o-=i}}for(var f in this.Frame.SubFrame){var m=this.Frame.SubFrame[f].Frame;m.XPointCount=o}s.DataOffset<0&&(s.DataOffset=0),this.ChartOperator_Temp_Update()}},this.ChartOperator_Temp_GetHistroyData=function(){return(this.Frame.Data?this.Frame.SubFrame[0].Frame.Data:this.Frame.Data)||null},this.ChartOperator_Temp_Update=function(){this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.UpdatePointByCursorIndex()},this.OnWheel=function(t){if(Fr.Chart.Log("[KLineChartContainer::OnWheel]",t),!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var e=t.clientX-this.UIElement.getBoundingClientRect().left,a=t.clientY-this.UIElement.getBoundingClientRect().top,i=!1;this.Canvas.beginPath(),this.Canvas.rect(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetTop(),this.Frame.ChartBorder.GetWidth(),this.Frame.ChartBorder.GetHeight()),i=this.Canvas.isPointInPath(e,a);var r=t.wheelDelta;he.IsObjectExist(t.wheelDelta)||(r=-.01*t.deltaY);var n=!0;if(this.EnableZoomUpDown&&!1===this.EnableZoomUpDown.Wheel&&(n=!1),this.SourceData&&this.SourceData.Data)if(i&&r<0&&n){var s={ZoomType:this.ZoomType,IsLockRight:this.IsZoomLockRight};s.Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),this.Frame.ZoomDown(s)&&(this.CursorIndex=s.Index,this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw(),this.OnKLinePageChange("wheel"))}else if(i&&r>0&&n){var s={ZoomType:this.ZoomType,IsLockRight:this.IsZoomLockRight};s.Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),this.Frame.ZoomUp(s)&&(Fr.Chart.Log("[KLineChartContainer::OnWheel] cursorIndex ",s),this.CursorIndex=s.Index,this.UpdatePointByCursorIndex(),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw(),this.OnKLinePageChange("wheel"))}i&&(t.preventDefault?t.preventDefault():t.returnValue=!1)}},this.Create=function(t,e){var a=this;this.UIElement.JSChartContainer=this,this.ChartCorssCursor=new De,this.ChartCorssCursor.Canvas=this.Canvas,this.ChartCorssCursor.StringFormatX=qr.Create("CorssCursor_XStringFormat"),this.ChartCorssCursor.StringFormatX.LanguageID=this.LanguageID,this.ChartCorssCursor.StringFormatY=qr.Create("CorssCursor_YStringFormat"),this.ChartCorssCursor.StringFormatY.LanguageID=this.LanguageID,this.ChartCorssCursor.StringFormatY.ExtendChartPaint=this.ExtendChartPaint,this.ChartSplashPaint=new ge,this.ChartSplashPaint.Canvas=this.Canvas,this.ChartSplashPaint.HQChart=this,this.Frame=new Y,this.Frame.ChartBorder=new L,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.Frame.GetExtendChartRightWidth=function(){return a.GetExtendChartRightWidth()},this.ChartCorssCursor.Frame=this.Frame,this.ChartSplashPaint.Frame=this.Frame,this.CreateChildWindow(t),this.CreateMainKLine(),this.CreateExtendChart("RectSelectPaint");for(var i in this.Frame.SubFrame){var r=new Pe;r.Frame=this.Frame.SubFrame[i].Frame,r.Canvas=this.Canvas,r.LanguageID=this.LanguageID,r.GetEventCallback=function(t){return a.GetEventCallback(t)},this.TitlePaint.push(r)}var n=!0,s=!0;e&&(!1===e.KeyDown&&(n=!1,Fr.Chart.Log("[KLineChartContainer::Create] not register keydown event.")),!1===e.Wheel&&(s=!1,Fr.Chart.Log("[KLineChartContainer::Create] not register wheel event."))),n&&this.UIElement.addEventListener("keydown",function(t){a.OnKeyDown(t)},!0),s&&this.UIElement.addEventListener("wheel",function(t){a.OnWheel(t)},!0)},this.CreateChildWindow=function(t){for(var e=this,a=0;a<t;++a){var i=new L;i.UIElement=this.UIElement;var r=new N;if(r.Canvas=this.Canvas,r.ChartBorder=i,r.Identify=a,r.RightSpaceCount=this.RightSpaceCount,this.ModifyIndexDialog&&(r.ModifyIndexEvent=this.ModifyIndexDialog.DoModal),this.ChangeIndexDialog&&(r.ChangeIndexEvent=this.ChangeIndexDialog.DoModal),r.HorizontalMax=20,r.HorizontalMin=10,0==a){r.YSplitOperator=new le,r.YSplitOperator.FrameSplitData=this.FrameSplitData.get("price"),r.YSplitOperator.FrameSplitData2=this.FrameSplitData.get("double"),r.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)};var n=c();i.BottomSpace=15*n,i.TopSpace=15*n}else r.YSplitOperator=new ue,r.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),r.YSplitOperator.LanguageID=this.LanguageID,r.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)};r.YSplitOperator.Frame=r,r.YSplitOperator.ChartBorder=i,r.XSplitOperator=new ce,r.XSplitOperator.Frame=r,r.XSplitOperator.ChartBorder=i,r.XSplitOperator.LanguageID=this.LanguageID,r.XSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},a!=t-1&&(r.XSplitOperator.ShowText=!1);for(var s=r.HorizontalMin;s<=r.HorizontalMax;s+=1)r.HorizontalInfo[s]=new I,r.HorizontalInfo[s].Value=s,0==a&&s==r.HorizontalMin||(r.HorizontalInfo[s].Message[1]=s.toString(),r.HorizontalInfo[s].Font="14px 微软雅黑");var o=new k;o.Frame=r,o.Height=0==a?20:10,this.Frame.SubFrame[a]=o}},this.CreateSubFrameItem=function(t){var e=this,a=new L;a.UIElement=this.UIElement;var i=new N;i.Canvas=this.Canvas,i.ChartBorder=a,i.Identify=t,this.ModifyIndexDialog&&(i.ModifyIndexEvent=this.ModifyIndexDialog.DoModal),this.ChangeIndexDialog&&(i.ChangeIndexEvent=this.ChangeIndexDialog.DoModal),i.HorizontalMax=20,i.HorizontalMin=10,i.YSplitOperator=new ue,i.YSplitOperator.LanguageID=this.LanguageID,i.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),i.YSplitOperator.Frame=i,i.YSplitOperator.ChartBorder=a,i.XSplitOperator=new ce,i.XSplitOperator.Frame=i,i.XSplitOperator.ChartBorder=a,i.XSplitOperator.ShowText=!1,i.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},i.XSplitOperator.Symbol=this.Symbol,i.XSplitOperator.Period=this.Period;var r=this.Frame.SubFrame[0].Frame.XPointCount;i.XPointCount=r,i.Data=this.ChartPaint[0].Data;for(var n=i.HorizontalMin;n<=i.HorizontalMax;n+=1)i.HorizontalInfo[n]=new I,i.HorizontalInfo[n].Value=n,i.HorizontalInfo[n].Message[1]=n.toString(),i.HorizontalInfo[n].Font="14px 微软雅黑";var s=new k;return s.Frame=i,s.Height=10,s},this.CreateMainKLine=function(){var t=this,e=new et;e.Canvas=this.Canvas,e.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,e.ChartFrame=this.Frame.SubFrame[0].Frame,e.Name="Main-KLine",e.DrawType=this.KLineDrawType,e.GetEventCallback=function(e){return t.GetEventCallback(e)},this.ChartPaint[0]=e,this.TitlePaint[0]=new Ae,this.TitlePaint[0].Frame=this.Frame.SubFrame[0].Frame,this.TitlePaint[0].Canvas=this.Canvas,this.TitlePaint[0].OverlayChartPaint=this.OverlayChartPaint,this.TitlePaint[0].LanguageID=this.LanguageID},this.BindMainData=function(t,e){if(this.ChartPaint[0].Data=t,this.ChartPaint[0].Symbol=this.Symbol,this.KLineSize)if(null==this.KLineSize.DataWidth)e=this.Frame.SubFrame[0].Frame.XPointCount-this.RightSpaceCount;else{var a=this.Frame.SetDataWidth(this.KLineSize.DataWidth);e=a.XPointCount-this.RightSpaceCount,this.KLineSize.DataWidth=null}for(var i in this.Frame.SubFrame){var r=this.Frame.SubFrame[i].Frame;r.XPointCount=e+this.RightSpaceCount,r.Data=this.ChartPaint[0].Data,r.XSplitOperator.Symbol=this.Symbol,r.XSplitOperator.Period=this.Period}this.TitlePaint[0].Data=this.ChartPaint[0].Data,this.TitlePaint[0].Symbol=this.Symbol,this.TitlePaint[0].Name=this.Name,this.TitlePaint[0].Period=this.Period,this.ChartCorssCursor.StringFormatX.Data=this.ChartPaint[0].Data,this.Frame.Data=this.ChartPaint[0].Data;for(var i in this.OverlayChartPaint){var r=this.OverlayChartPaint[i];r.MainData=this.ChartPaint[0].Data}var n=t.Data.length-e;n<0&&(n=0),this.ChartPaint[0].Data.DataOffset=n,this.ChartPaint[0].Period=this.Period,this.ChartCorssCursor.StringFormatY.Symbol=this.Symbol,this.CursorIndex=e,this.CursorIndex+n>=t.Data.length&&(this.CursorIndex=t.Data.length-1-n),this.CursorIndex<0&&(this.CursorIndex=0),this.CustomShow&&(this.SetCustomShow(this.CustomShow,t),this.CustomShow=null)},this.UpdateMainData=function(t,e){var a=null;if(this.Frame.Data?this.Frame.SubFrame&&this.Frame.SubFrame[0]&&(a=this.Frame.SubFrame[0].Frame.Data):a=this.Frame.Data,a){var i=this.Frame.SubFrame[0].Frame.XPointCount,r=0;e>0&&t.Data.length>e?(r=t.Data.length-e,Fr.Chart.Log("[KLineChartContainer::UpdateMainData]  [count="+e+"->"+t.Data.length+"], [newDataCount="+r+"], [Pagesize="+i+"]")):0==e&&t.Data.length>i&&(r=t.Data.length-i,Fr.Chart.Log("[KLineChartContainer::UpdateMainData] history data is empty. [count="+e+"->"+t.Data.length+"], [newDataCount="+r+"], [Pagesize="+i+"]")),this.ChartPaint[0].Data=t,this.ChartPaint[0].Symbol=this.Symbol,t.Data.length>i&&(this.ChartPaint[0].Data.DataOffset=a.DataOffset+r);for(var n in this.Frame.SubFrame){var s=this.Frame.SubFrame[n].Frame;s.Data=this.ChartPaint[0].Data,0==n&&(s.YSplitOperator.Symbol=this.Symbol,s.YSplitOperator.Data=this.ChartPaint[0].Data,s.YSplitOperator.Period=this.Period)}this.TitlePaint[0].Data=this.ChartPaint[0].Data,this.TitlePaint[0].Symbol=this.Symbol,this.TitlePaint[0].Name=this.Name,this.ChartCorssCursor.StringFormatX.Data=this.ChartPaint[0].Data,this.Frame.Data=this.ChartPaint[0].Data;for(var n in this.OverlayChartPaint){var s=this.OverlayChartPaint[n];s.MainData=this.ChartPaint[0].Data}this.ChartCorssCursor.StringFormatY.Symbol=this.Symbol}},this.SetCustomShow=function(t,e){if(t&&t.Date&&!(t.Date<19910101)){for(var a=t.Date,i=null,r=0;r<e.Data.length;++r){var n=e.Data[r];if(n.Date>=a){i=r;break}}if(null===i)return void Fr.Chart.Log("[KLineChartContainer::SetCustomShow] Can't find first date="+a);var s=e.Data.length-i;t.PageSize>0&&(s=t.PageSize);var o=s,h=this.GetMaxMinPageSize();s>h.Max?o=h.Max:s<h.Min&&(o=h.Min);for(var r in this.Frame.SubFrame){var n=this.Frame.SubFrame[r].Frame;n.XPointCount=o}this.ChartPaint[0].Data.DataOffset=i,this.CursorIndex=0}},this.OnDragSelectRectMouseUp=function(t){var e=this.GetRectSelectPaint();if(e){var a=e.GetSelectRectData();if(a){var i=c(),r=this.ChartCorssCursor;t.data={Chart:this,X:r.LastPoint.X/i,Y:r.LastPoint.Y/i,SelectData:a,RectSelectPaint:e},this.SelectRectRightMenu&&this.SelectRectRightMenu.DoModal(t)}}},this.ShowSelectData=function(t){this.HideSelectRect(),this.SelectRectRightMenu&&this.SelectRectRightMenu.Hide(),Fr.Chart.Log("[KLineChartContainer::ShowSelectData] selectData",t);var e=t.Start,a=t.End-t.Start+1;Fr.Chart.Log("[KLineChartContainer::ShowSelectData] DataOffset="+e+", ShowCount="+a);for(var i in this.Frame.SubFrame){this.Frame.SubFrame[i].Frame.XPointCount=a}this.ChartPaint[0].Data.DataOffset=e,this.CursorIndex=0,this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.UpdatePointByCursorIndex()},this.OnMarkRectSelect=function(t){var e=this.ChartCorssCursor;if(e&&0!=e.Status&&he.IsNumber(e.CursorIndex)&&this.ChartPaint[0]&&this.ChartPaint[0].Data){var a=this.GetRectSelectPaint();if(a){var i=e.CursorIndex;Fr.Chart.Log("[KLineChartContainer::OnMarkRectSelect] dataIndex",i);var r=this.ChartPaint[0].Data;i=parseInt(i.toFixed(0));var n=i+r.DataOffset;n>=r.Data.length&&(n=r.Data.length-1);var s=r.Data[n];if(Fr.Chart.Log("[KLineChartContainer::OnMarkRectSelect] item",s),this.SetRectSelectData(s)){if(2==a.GetPointCount()){var o=a.GetSelectRectData(),h=this.GetEventCallback(Nr.ON_KEYDOWN_SELECT_RECT),l=c();if(h&&h.Callback){var u={X:e.LastPoint.X/l,Y:e.LastPoint.Y/l,SelectData:o,RectSelectPaint:a};h.Callback(h,u,this)}this.SelectRectRightMenu&&(t.data={Chart:this,X:e.LastPoint.X/l,Y:e.LastPoint.Y/l,SelectData:o,RectSelectPaint:a},this.SelectRectRightMenu.DoModal(t))}this.Draw()}}}},this.CreateWindowIndex=function(t){this.WindowIndex[t].Create(this,t)},this.BindIndexData=function(t,e){if(this.WindowIndex[t])return"function"==typeof this.WindowIndex[t].RequestData?void this.WindowIndex[t].RequestData(this,t,e):"function"==typeof this.WindowIndex[t].ExecuteScript?void this.WindowIndex[t].ExecuteScript(this,t,e):void this.WindowIndex[t].BindData(this,t,e)},this.BindOverlayIndexData=function(t,e,a){if(t.Script)return"function"==typeof t.Script.RequestData?void t.Script.RequestData(this,e,a):"function"==typeof t.Script.ExecuteScript?void t.Script.ExecuteScript(this,e,a):void t.Script.BindData(this,e,a)},this.BindInstructionIndexData=function(t){this.ColorIndex&&"function"==typeof this.ColorIndex.ExecuteScript&&this.ColorIndex.ExecuteScript(this,0,t),this.TradeIndex&&"function"==typeof this.TradeIndex.ExecuteScript&&this.TradeIndex.ExecuteScript(this,0,t)},this.GetChartPaint=function(t){var e=new Array;for(var a in this.ChartPaint)if(0!=a){var i=this.ChartPaint[a];i.ChartFrame==this.Frame.SubFrame[t].Frame&&e.push(i)}return e},this.AutoUpdateEvent=function(t,e){var a=t?Nr.RECV_START_AUTOUPDATE:Nr.RECV_STOP_AUTOUPDATE;if(this.mapEvent.has(a)){var i=this,r=this.mapEvent.get(a),n={Stock:{Symbol:this.Symbol,Name:this.Name,Right:this.Right,Period:this.Period},Explain:e};t&&(n.Callback=function(t){Z.IsDayPeriod(i.Period,!0)?i.RecvRealtimeData(t):Z.IsMinutePeriod(i.Period,!0)?i.RecvMinuteRealtimeData(t):Z.IsSecondPeriod(i.Period)&&i.RecvMinuteRealtimeData(t)}),r.Callback(r,n,this)}},this.SendKLineUpdateEvent=function(t){var e=this.GetEventCallback(Nr.RECV_KLINE_UPDATE_DATA);if(e&&e.Callback){var a={HistoryData:t,Stock:{Symbol:this.Symbol,Name:this.Name}};return e.Callback(e,a,this),!0}return!1},this.SendManualKLineUpdateEvent=function(t){var e=this.GetEventCallback(Nr.RECV_KLINE_MANUAL_UPDATE_DATA);if(e&&e.Callback){var a={HistoryData:t,Stock:{Symbol:this.Symbol,Name:this.Name}};return e.Callback(e,a,this),!0}return!1},this.GetKLineDrawType=function(){return this.KLineDrawType},this.RequestHistoryData=function(){var t=this;if(this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.EnableSplash(!0),this.FlowCapitalReady=!1,this.ResetPage(),this.ResetDragDownload(),this.Draw(),this.NetworkFilter){var e=this.GetKLineDrawType(),a={Name:"KLineChartContainer::RequestHistoryData",Explain:"日K数据",Request:{Url:t.KLineApiUrl,Type:"POST",Data:{symbol:t.Symbol,count:t.MaxReqeustDataCount,field:["name","symbol","yclose","open","price","high","low","vol"],period:this.Period,right:this.Right,klineDrawType:e}},Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvHistoryData(e);var a=t.Page.Day;1==a.Enable&&0==a.Finish?t.RequestHistoryPageData():(t.AutoUpdateEvent(!0,"KLineChartContainer::RequestHistoryData"),t.AutoUpdate())}),1==a.PreventDefault)return}n.HttpRequest({url:this.KLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:t.MaxReqeustDataCount},type:"post",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvHistoryData(e);var a=t.Page.Day;1==a.Enable&&0==a.Finish?t.RequestHistoryPageData():(t.AutoUpdateEvent(!0,"KLineChartContainer::RequestHistoryData"),t.AutoUpdate())}})},this.BindAllOverlayIndexData=function(t){if(this.Frame&&this.Frame.SubFrame)for(var e=0;e<this.Frame.SubFrame.length;++e){var a=this.Frame.SubFrame[e];for(var i in a.OverlayIndex){var r=a.OverlayIndex[i];this.BindOverlayIndexData(r,e,t)}}},this.RecvHistoryData=function(t){var e=_a.JsonDataToHistoryData(t),a=new Z;a.Data=e,a.DataType=0,a.Symbol=t.symbol,this.SourceData=a,this.BeforeBindMainData&&this.BeforeBindMainData("RecvHistoryData");var i=new Z;if(i.Data=e,i.Right=this.Right,i.Period=this.Period,i.DataType=0,i.Symbol=t.symbol,i.Right>0&&!this.IsApiPeriod){var r=i.GetRightData(i.Right,{AlgorithmType:this.RightFormula});i.Data=r}if(Z.IsDayPeriod(i.Period,!1)&&!this.IsApiPeriod){var n=i.GetPeriodData(i.Period);i.Data=n}this.Symbol=t.symbol,this.Name=t.name,this.BindMainData(i,this.PageSize),this.AfterBindMainData&&this.AfterBindMainData("RecvHistoryData"),this.Frame.SetSizeChage(!0);var s;this.Frame.SubFrame[0]&&(s=this.Frame.SubFrame[0].Frame),s&&s.YSplitOperator&&(s.YSplitOperator.Symbol=this.Symbol,s.YSplitOperator.Data=this.ChartPaint[0].Data,s.YSplitOperator.Period=this.Period);var o=this.Page.Day;(0==o.Enable||1==o.Enable&&1==o.Finish)&&(this.ReqeustKLineInfoData({FunctionName:"RecvHistoryData"}),this.RequestFlowCapitalData(),this.RequestOverlayHistoryData(),this.CreateChartDrawPictureByStorage()),o.Enable&&(o.Index=1),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.UpdatePointByCursorIndex(2),this.Draw(),this.BindInstructionIndexData(i);for(var h=0;h<this.Frame.SubFrame.length;++h)this.BindIndexData(h,i);if(this.BindAllOverlayIndexData(i),this.mapEvent.has(Nr.RECV_HISTROY_DATA)){var l=this.mapEvent.get(Nr.RECV_HISTROY_DATA),t={HistoryData:i,Stock:{Symbol:this.Symbol,Name:this.Name}};l.Callback(l,t,this)}},this.RequestHistoryPageData=function(){var t=this;if(this.NetworkFilter){var e=this.SourceData.Data[0],a={Name:"KLineChartContainer::RequestHistoryPageData",Explain:"日K数据分页",Request:{Url:"none",Type:"POST",Data:{symbol:t.Symbol,index:t.Page.Day.Index,field:["name","symbol","yclose","open","price","high","low","vol"],firstDate:e.Date,first:{date:e.Date}}},Page:t.Page.Day,Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(e){t.RecvHistoryPageData(e);var a=t.Page.Day;1==a.Enable&&0==a.Finish?t.RequestHistoryPageData():t.AutoUpdate()}),1==a.PreventDefault)return}setTimeout(function(){var e=t.Page.Day;e.Finish=!0;var a={data:[[20150218,12.54,12.5,12.74,11.95,12.27,117632441,1459671045],[20150219,12.27,12.1,12.23,11.9,12.23,95889423,1157078548],[20150220,12.23,12.17,12.17,11.9,12.05,67763439,815652761]],symbol:t.Symbol,name:t.Name};t.RecvHistoryPageData(a),1==e.Enable&&0==e.Finish?t.RequestHistoryPageData():t.AutoUpdate()},500)},this.RecvHistoryPageData=function(t){var e=_a.JsonDataToHistoryData(t),a=this.GetHistoryDataCount();for(var i in e){var r=e[i];this.SourceData.Data.splice(i,0,r)}var n=new Z;if(n.Data=this.SourceData.Data,n.Period=this.Period,n.Right=this.Right,n.DataType=this.SourceData.DataType,n.Right>0&&n.Period<=3){var s=n.GetRightData(n.Right,{AlgorithmType:this.RightFormula});n.Data=s}if(Z.IsDayPeriod(n.Period,!1)||Z.IsMinutePeriod(n.Period,!1)){var o=n.GetPeriodData(n.Period);n.Data=o}this.UpdateMainData(n,a),this.BindInstructionIndexData(n);for(var i=0;i<this.Frame.SubFrame.length;++i)this.BindIndexData(i,n);var h=this.Page.Day;++h.Index,1==h.Enable&&1==h.Finish&&(this.RequestFlowCapitalData(),this.RequestOverlayHistoryData(),this.CreateChartDrawPictureByStorage()),this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()},this.ReqeustHistoryMinuteData=function(){var t=this;if(this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.EnableSplash(!0),this.FlowCapitalReady=!1,this.ResetPage(),this.ResetDragDownload(),this.Draw(),this.NetworkFilter){var e=this.GetKLineDrawType(),a={Name:"KLineChartContainer::ReqeustHistoryMinuteData",Explain:"1分钟K线数据",Request:{Url:t.MinuteKLineApiUrl,Type:"POST",Data:{symbol:t.Symbol,count:t.MaxRequestMinuteDayCount,field:["name","symbol","yclose","open","price","high","low","vol"],period:this.Period,right:this.Right,klineDrawType:e}},Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvMinuteHistoryData(e);var a=t.Page.Minute;1==a.Enable&&0==a.Finish?t.ReqeustHistoryMinutePageData():(t.AutoUpdateEvent(!0,"KLineChartContainer::ReqeustHistoryMinuteData"),t.AutoUpdate())}),1==a.PreventDefault)return}n.HttpRequest({url:this.MinuteKLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:t.MaxRequestMinuteDayCount},type:"post",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvMinuteHistoryData(e);var a=t.Page.Minute;1==a.Enable&&0==a.Finish?t.ReqeustHistoryMinutePageData():(t.AutoUpdateEvent(!0,"KLineChartContainer::ReqeustHistoryMinuteData"),t.AutoUpdate())}})},this.RecvMinuteHistoryData=function(t){var e=_a.JsonDataToMinuteHistoryData(t),a=new Z;a.Data=e,a.DataType=1,a.Symbol=t.symbol,this.SourceData=a,this.BeforeBindMainData&&this.BeforeBindMainData("RecvMinuteHistoryData");var i=new Z;if(i.Data=e,i.Right=this.Right,i.Period=this.Period,i.DataType=1,i.Symbol=t.symbol,Z.IsMinutePeriod(i.Period,!1)&&!this.IsApiPeriod){var r=a.GetPeriodData(i.Period);i.Data=r}this.Symbol=t.symbol,this.Name=t.name,this.BindMainData(i,this.PageSize),this.AfterBindMainData&&this.AfterBindMainData("RecvMinuteHistoryData"),this.Frame.SetSizeChage(!0);var n;this.Frame.SubFrame[0]&&(n=this.Frame.SubFrame[0].Frame),n&&n.YSplitOperator&&(n.YSplitOperator.Symbol=this.Symbol,n.YSplitOperator.Data=this.ChartPaint[0].Data,n.YSplitOperator.Period=this.Period);for(var s in this.OverlayChartPaint){this.OverlayChartPaint[s].Data=null}var o=this.Page.Minute;(0==o.Enable||1==o.Enable&&1==o.Finish)&&(this.RequestFlowCapitalData(),this.RequestOverlayHistoryMinuteData(),this.CreateChartDrawPictureByStorage()),o.Enable&&++o.Index,this.UpdataDataoffset(),this.UpdatePointByCursorIndex(2),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.BindInstructionIndexData(i);for(var s=0;s<this.Frame.SubFrame.length;++s)this.BindIndexData(s,i);if(this.BindAllOverlayIndexData(i),this.mapEvent.has(Nr.RECV_HISTROY_DATA)){var h=this.mapEvent.get(Nr.RECV_HISTROY_DATA),t={HistoryData:i,Stock:{Symbol:this.Symbol,Name:this.Name}};h.Callback(h,t,this)}},this.ReqeustHistoryMinutePageData=function(){var t=this;if(this.NetworkFilter){var e=this.SourceData.Data[0],a={Name:"KLineChartContainer::RecvHistoryMinutePageData",Explain:"1分钟K线数据分页",Request:{Url:"none",Type:"POST",Data:{symbol:t.Symbol,index:t.Page.Minute.Index,field:["name","symbol","yclose","open","price","high","low","vol"],firstDate:e.Date,first:{date:e.Date,time:e.Time}}},Page:t.Page.Minute,Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(e){t.RecvHistoryMinutePageData(e);var a=t.Page.Minute;1==a.Enable&&0==a.Finish?t.ReqeustHistoryMinutePageData():t.AutoUpdate()}),1==a.PreventDefault)return}setTimeout(function(){var e=t.Page.Minute;e.Finish=!0;var a={data:[[20190906,14.58,14.71,14.71,14.71,14.71,1096425,16128411,925],[20190906,14.71,14.73,14.74,14.71,14.71,2154859,31731820,930],[20190906,14.71,14.71,14.71,14.68,14.69,1427516,20989208,931],[20190906,14.69,14.69,14.71,14.68,14.7,1680503,24694143,932],[20190906,14.7,14.69,14.7,14.65,14.65,1315900,19310964,933],[20190906,14.65,14.66,14.69,14.65,14.68,702955,10313842,934],[20190906,14.68,14.7,14.71,14.67,14.67,1735266,25495875,935],[20190906,14.67,14.68,14.7,14.67,14.67,739e3,10845398,936],[20190906,14.67,14.67,14.68,14.67,14.68,389800,5721266,937],[20190906,14.68,14.68,14.7,14.68,14.69,648477,9527859,938],[20190906,14.69,14.7,14.71,14.69,14.7,1128400,16589794,939],[20190906,14.7,14.7,14.71,14.69,14.71,714858,10509708,940],[20190906,14.71,14.71,14.71,14.69,14.69,401500,5900477,941],[20190906,14.69,14.69,14.71,14.69,14.69,1165684,17131034,942],[20190906,14.69,14.69,14.7,14.67,14.67,498516,7321024,943],[20190906,14.67,14.68,14.68,14.67,14.67,350126,5139012,944],[20190906,14.67,14.67,14.69,14.67,14.69,561600,8246789,945]]};t.RecvHistoryMinutePageData(a),1==e.Enable&&0==e.Finish?t.ReqeustHistoryMinutePageData():t.AutoUpdate()},500)},this.RecvHistoryMinutePageData=function(t){var e=_a.JsonDataToMinuteHistoryData(t),a=this.GetHistoryDataCount();for(var i in e){var r=e[i];this.SourceData.Data.splice(i,0,r)}var n=new Z;if(n.Data=this.SourceData.Data,n.Period=this.Period,n.Right=this.Right,n.DataType=this.SourceData.DataType,n.Right>0&&Z.IsDayPeriod(n.Period,!1)){var s=n.GetRightData(n.Right,{AlgorithmType:this.RightFormula});n.Data=s}if(Z.IsDayPeriod(n.Period,!1)||Z.IsMinutePeriod(n.Period,!1)){var o=n.GetPeriodData(n.Period);n.Data=o}this.UpdateMainData(n,a),this.BindInstructionIndexData(n);for(var i=0;i<this.Frame.SubFrame.length;++i)this.BindIndexData(i,n);var h=this.Page.Minute;(0==h.Enable||1==h.Enable&&1==h.Finish)&&(this.RequestFlowCapitalData(),this.CreateChartDrawPictureByStorage()),h.Enable&&++h.Index,this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()},this.RequestRealtimeData=function(){var t=this,e=[t.Symbol];for(var a in this.OverlayChartPaint){var i=this.OverlayChartPaint[a];i.Symbol&&(i.MainData&&i.Status==Kr.STATUS_FINISHED_ID&&e.push(i.Symbol))}if(this.NetworkFilter){var r=this.GetKLineDrawType(),s={Name:"KLineChartContainer::RequestRealtimeData",Explain:"当天最新日线数据",Request:{Url:t.RealtimeApiUrl,Data:{symbol:e,field:["name","symbol","yclose","open","price","high","low","vol","amount","date","time"],period:this.Period,right:this.Right,klineDrawType:r},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(s,function(e){t.RecvRealtimeData(e),t.AutoUpdate()}),1==s.PreventDefault)return}n.HttpRequest({url:this.RealtimeApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol","amount","date","time"],symbol:e,start:-1},type:"post",dataType:"json",async:!0,success:function(e){t.RecvRealtimeData(e),t.AutoUpdate()}})},this.RecvRealtimeData=function(t){if(1!=this.IsOnTouch){var e=_a.JsonDataToRealtimeData(t,this.Symbol);if(e){var a=this.SourceData.Data[this.SourceData.Data.length-1],i=this.GetHistoryDataCount();if(0==this.SourceData.Data.length){var r=new W;W.CopyTo(r,e),this.SourceData.Data.push(r)}else if(a.Date==e.Date)Fr.Chart.Log("[KLineChartContainer::RecvRealtimeData] update kline by realtime data",e),W.CopyTo(a,e);else{if(!(a.Date<e.Date))return;Fr.Chart.Log("[KLineChartContainer::RecvRealtimeData] insert kline by realtime data",e);var r=new W;W.CopyTo(r,e),!he.IsNumber(r.YClose)&&this.SourceData.Data.length>0&&(r.YClose=this.SourceData.Data[this.SourceData.Data.length-1].YClose),this.SourceData.Data.push(r)}var n=new Z;if(n.Data=this.SourceData.Data,n.Period=this.Period,n.Right=this.Right,n.DataType=this.SourceData.DataType,n.Symbol=this.Symbol,n.Right>0&&Z.IsDayPeriod(n.Period,!0)&&an.IsSHSZStockA(this.Symbol)&&!this.IsApiPeriod){var s=n.GetRightData(n.Right,{AlgorithmType:this.RightFormula});n.Data=s}if(!this.IsApiPeriod&&(Z.IsDayPeriod(n.Period,!1)||Z.IsMinutePeriod(n.Period,!1))){var o=n.GetPeriodData(n.Period);n.Data=o}this.UpdateMainData(n,i),this.UpdateOverlayRealtimeData(t),this.BindInstructionIndexData(n);for(var h=0;h<this.Frame.SubFrame.length;++h)this.BindIndexData(h,n);this.UpdataDataoffset(),this.UpdatePointByCursorIndex(1),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.SendKLineUpdateEvent(n),this.BindAllOverlayIndexData(n)}}},this.UpdateOverlayRealtimeData=function(t){for(var e in this.OverlayChartPaint){var a=this.OverlayChartPaint[e];if(a.Symbol&&(a.MainData&&a.Status==Kr.STATUS_FINISHED_ID)){var i=_a.JsonDataToRealtimeData(t,a.Symbol);if(i){var r=a.SourceData,n=r.Data[r.Data.length-1];if(n.Date==i.Date)Fr.Chart.Log("[KLineChartContainer::UpdateOverlayRealtimeData] update kline by minute data",i),n.Close=i.Close,n.High=i.High,n.Low=i.Low,n.Vol=i.Vol,n.Amount=i.Amount;else{if(!(a.Date<i.Date))continue;Fr.Chart.Log("[KLineChartContainer::UpdateOverlayRealtimeData] insert kline by minute data",i);var s=new W;s.YClose=i.YClose,s.Open=i.Open,s.Close=i.Close,s.High=i.High,s.Low=i.Low,s.Vol=i.Vol,s.Amount=i.Amount,s.Date=i.Date,r.Data.push(s)}var o=new Z;if(o.Data=r.Data,o.Period=this.Period,o.Right=this.Right,o.DataType=0,o.Right>0&&an.IsSHSZStockA(t.symbol)&&!this.IsApiPeriod){var h=o.GetRightData(o.Right,{AlgorithmType:this.RightFormula});o.Data=h}var l=this.SourceData.GetOverlayData(o.Data,this.IsApiPeriod);if(o.Data=l,Z.IsDayPeriod(o.Period,!1)&&!this.IsApiPeriod){var u=o.GetPeriodData(o.Period);o.Data=u}a.Data=o}}}},this.RequestMinuteRealtimeData=function(){var t=this,e=[t.Symbol];for(var a in this.OverlayChartPaint){var i=this.OverlayChartPaint[a];i.Symbol&&(i.MainData&&i.Status==Kr.STATUS_FINISHED_ID&&e.push(i.Symbol))}if(this.NetworkFilter){var r=this.GetKLineDrawType(),s={Name:"KLineChartContainer::RequestMinuteRealtimeData",Explain:"当天1分钟K线数据",Request:{Url:t.RealtimeApiUrl,Data:{symbol:e,field:["name","symbol","price","yclose","minutecount","minute","date","time"],period:this.Period,right:this.Right,klineDrawType:r},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(s,function(e){t.RecvMinuteRealtimeData(e),t.AutoUpdate()}),1==s.PreventDefault)return}n.HttpRequest({url:this.RealtimeApiUrl,data:{field:["name","symbol","price","yclose","minutecount","minute","date","time"],symbol:e,start:-1},type:"post",dataType:"json",async:!0,success:function(e){t.RecvMinuteRealtimeData(e),t.AutoUpdate()}})},this.SetSourceDatatLimit=function(t){this.SourceDataLimit=new _r.default;for(var e in t){var a=t[e];this.SourceDataLimit.set(a.Period,a.MaxCount),Fr.Chart.Log("[KLineChartContainer::SetSourceDatatLimit] Period="+a.Period+", MaxCount="+a.MaxCount)}},this.ReduceSourceData=function(){if(this.SourceDataLimit&&this.SourceDataLimit.has(this.Period)){var t=this.SourceDataLimit.get(this.Period),e=null;if(this.Frame.Data?this.Frame.SubFrame&&this.Frame.SubFrame[0]&&(e=this.Frame.SubFrame[0].Frame.Data):e=this.Frame.Data,e&&!(t<50)){for(var a=e.DataOffset,i=0;this.SourceData.Data.length>t;)this.SourceData.Data.shift(),--a,++i;i>0&&(a<0&&(a=0),e.DataOffset=a,Fr.Chart.Log("[KLineChartContainer::ReduceSourceData] remove data "+i+", dataOffset="+a))}}},this.RecvMinuteRealtimeDataV2=function(t){if(1!=this.IsOnTouch){var e=_a.JsonDataToMinuteHistoryData(t);if(e&&!(e.length<=0)){this.IsApiPeriod&&this.ReduceSourceData();var a=this.GetHistoryDataCount();if(this.SourceData&&this.SourceData.MergeMinuteData(e)){Fr.Chart.Log("[KLineChartContainer::RecvMinuteRealtimeDataV2] update kline by 1 minute data ["+a+"->"+this.SourceData.Data.length+"]");var i=new Z;if(i.Data=this.SourceData.Data,i.Period=this.Period,i.Right=this.Right,i.DataType=this.SourceData.DataType,i.Symbol=this.Symbol,i.Right>0&&Z.IsDayPeriod(i.Period,!0)&&!this.IsApiPeriod){var r=i.GetRightData(i.Right,{AlgorithmType:this.RightFormula});i.Data=r}if((Z.IsDayPeriod(i.Period,!1)||Z.IsMinutePeriod(i.Period,!1))&&!this.IsApiPeriod){var n=i.GetPeriodData(i.Period);i.Data=n}this.UpdateMainData(i,a),this.BindInstructionIndexData(i);for(var s=0;s<this.Frame.SubFrame.length;++s)this.BindIndexData(s,i);this.UpdataDataoffset(),this.UpdatePointByCursorIndex(1),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.SendKLineUpdateEvent(i),this.BindAllOverlayIndexData(i)}}}},this.RecvMinuteRealtimeData=function(t){if(1!=this.IsOnTouch){if(2==t.ver)return void this.RecvMinuteRealtimeDataV2(t);var e=_a.JsonDataToMinuteRealtimeData(t,this.Symbol);if(e){this.IsApiPeriod&&this.ReduceSourceData();var a=this.GetHistoryDataCount(),i=this.SourceData.Data.length;if(this.SourceData.MergeMinuteData(e)){Fr.Chart.Log("[KLineChartContainer::RecvMinuteRealtimeData] update kline by 1 minute data ["+i+"->"+this.SourceData.Data.length+"]");var r=new Z;if(r.Data=this.SourceData.Data,r.Period=this.Period,r.Right=this.Right,r.DataType=this.SourceData.DataType,r.Symbol=this.Symbol,r.Right>0&&Z.IsDayPeriod(r.Period,!0)&&!this.IsApiPeriod){var n=r.GetRightData(r.Right,{AlgorithmType:this.RightFormula});r.Data=n}if((Z.IsDayPeriod(r.Period,!1)||Z.IsMinutePeriod(r.Period,!1))&&!this.IsApiPeriod){var s=r.GetPeriodData(r.Period);r.Data=s}this.UpdateMainData(r,a),this.UpdateOverlayMinuteRealtimeData(t),this.BindInstructionIndexData(r);for(var o=0;o<this.Frame.SubFrame.length;++o)this.BindIndexData(o,r);this.UpdataDataoffset(),this.UpdatePointByCursorIndex(1),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.SendKLineUpdateEvent(r),this.BindAllOverlayIndexData(r)}}}},this.UpdateOverlayMinuteRealtimeData=function(t){for(var e in this.OverlayChartPaint){var a=this.OverlayChartPaint[e];if(a.Symbol&&(a.MainData&&a.Status==Kr.STATUS_FINISHED_ID)){if(2==t.ver)var i=_a.JsonDataToMinuteRealtimeDataV2(t,a.Symbol);else var i=_a.JsonDataToMinuteRealtimeData(t,a.Symbol);if(i){var r=a.SourceData;if(!r.MergeMinuteData(i))return;var n=new Z;n.Data=r.Data,n.Period=this.Period,n.Right=this.Right,n.DataType=0;var s=this.SourceData.GetOverlayMinuteData(n.Data,this.IsApiPeriod);if(n.Data=s,Z.IsMinutePeriod(n.Period,!1)&&!this.IsApiPeriod){var o=n.GetPeriodData(n.Period);n.Data=o}a.Data=n}}}},this.GetHistoryDataCount=function(){var t=null;return this.Frame.Data?this.Frame.SubFrame&&this.Frame.SubFrame[0]&&(t=this.Frame.SubFrame[0].Frame.Data):t=this.Frame.Data,t?t.Data.length:-1},this.GetRequestDataCount=function(){var t={MaxRequestDataCount:this.MaxReqeustDataCount,MaxRequestMinuteDayCount:this.MaxRequestMinuteDayCount};if(!this.SourceData||!this.SourceData.Data||this.SourceData.Data.length<=0)return t;if(Z.IsDayPeriod(this.Period,!0)){var e=this.SourceData.Data.length;e>t.MaxRequestDataCount&&(t.MaxRequestDataCount=e)}else if(Z.IsMinutePeriod(this.Period,!0)){var a,e=0;for(var i in this.SourceData.Data){var r=this.SourceData.Data[i];r.Date!=a&&++e,a=r.Date}e>t.MaxRequestMinuteDayCount&&(t.MaxRequestMinuteDayCount=e)}return t},this.RequestTickData=function(){var t=this;this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),t.ChartSplashPaint.EnableSplash(!0),t.Draw();var e=$r.CacheDomain+"/cache/dealday/today/"+t.Symbol+".json";if(this.NetworkFilter){var a={Name:"KLineChartContainer::RequestTickData",Explain:"当天分笔数据",Request:{Url:e,Data:{symbol:t.Symbol},Type:"GET"},Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvTickData(e),t.AutoUpdate()}),1==a.PreventDefault)return}n.HttpRequest({url:e,data:{symbol:t.Symbol},type:"get",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvTickData(e),t.AutoUpdate(1)},error:function(e,a){t.ChartSplashPaint.EnableSplash(!1),t.AutoUpdate()}})},this.RecvTickData=function(t){if(2==t.ver)var e=_a.JsonDataToTickDataV2(t);else var e=_a.JsonDataToTickData(t);var a=new Z;a.Data=e,a.DataType=2,this.SourceData=a,this.BeforeBindMainData&&this.BeforeBindMainData("RecvTickData");var i=new Z;i.Data=e,i.Right=this.Right,i.Period=this.Period,i.DataType=2,this.Symbol=t.symbol,this.Name=t.name,this.BindMainData(i,this.PageSize),this.AfterBindMainData&&this.AfterBindMainData("RecvTickData"),this.BindInstructionIndexData(i);for(var r,n=0;n<this.Frame.SubFrame.length;++n)0==n&&(r=this.Frame.SubFrame[n].Frame),this.BindIndexData(n,i);if(r&&r.YSplitOperator&&(r.YSplitOperator.Symbol=this.Symbol,r.YSplitOperator.Data=this.ChartPaint[0].Data,r.YSplitOperator.Period=this.Period,r.YSplitOperator.KLineChart=this.ChartPaint[0]),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.UpdatePointByCursorIndex(),this.BindAllOverlayIndexData(i),this.mapEvent.has(Nr.RECV_HISTROY_DATA)){var s=this.mapEvent.get(Nr.RECV_HISTROY_DATA),t={HistoryData:i,Stock:{Symbol:this.Symbol,Name:this.Name}};s.Callback(s,t,this)}},this.RequestTickRealtimeData=function(){var t=this,e=0;if(this.SourceData&&this.SourceData.Data&&(e=this.SourceData.Data.length),this.NetworkFilter){var a={Name:"KLineChartContainer::RequestTickRealtimeData",Explain:"当天最新分笔数据",Request:{Url:t.TickApiUrl,Data:{symbol:t.Symbol,start:e,end:e+1e3},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvTickRealtimeData(e),t.AutoUpdate()}),1==a.PreventDefault)return}n.HttpRequest({url:t.TickApiUrl,data:{symbol:t.Symbol,start:e-10,end:e+1e3},type:"post",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvTickRealtimeData(e),t.AutoUpdate()}})},this.RecvTickRealtimeData=function(t){if(2==t.ver)var e=_a.JsonDataToTickDataV2(t);else var e=_a.JsonDataToTickData(t);if(e&&!(e.length<=0)){var a=!1;1==t.redraw&&(a=!0);var i=this.SourceData.Data,r=this.SourceData.Data.length,n=0;i.length>0&&(n=i[i.length-1].Time);var s=0;for(var o in e){var h=e[o];h.Time<=n||(i.push(h),++s)}if(!(s<=0&&0==a)){var l=new Z;l.Data=i,l.Right=this.Right,l.Period=this.Period,l.DataType=2,this.Symbol=t.symbol,this.Name=t.name,this.UpdateMainData(l,r),this.BindInstructionIndexData(l);for(var o=0;o<this.Frame.SubFrame.length;++o)this.BindIndexData(o,l);this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.UpdatePointByCursorIndex(),this.BindAllOverlayIndexData(l)}}},this.ClearIndexPaint=function(){if(this.Frame&&this.Frame.SubFrame)for(var t=0;t<this.Frame.SubFrame.length;++t){this.DeleteIndexPaint(t);var e=this.Frame.SubFrame[t];if(he.IsNonEmptyArray(e.OverlayIndex))for(var a=0;a<e.OverlayIndex.length;++a){var i=e.OverlayIndex[a];i.ChartPaint=[]}}},this.ChangePeriod=function(t,e){var a=!1,i=!1,r=null;if(e&&(e.KLine&&(he.IsNumber(e.KLine.DrawType)&&(a=!0),he.IsNumber(e.KLine.Right)&&(r=e.KLine.Right)),1==e.Reload&&(i=!0)),this.Period==t&&0==i)return void(a&&this.ChangeKLineDrawType(e.KLine.DrawType));a&&this.ChangeKLineDrawType(e.KLine.DrawType,!1);var n=!0;if(this.SourceData){var n=!1;if(t>Yr&&t<=Hr)0!=this.SourceData.DataType&&(n=!0);else if(t>Vr&&t<=Gr||t>Wr&&t<=Xr)1!=this.SourceData.DataType?n=!0:Z.IsSecondPeriod(t)&&(n=!0);else switch(t){case 0:case 1:case 2:case 3:case 9:case 21:0!=this.SourceData.DataType&&(n=!0);break;case 4:case 5:case 6:case 7:case 8:case 11:case 12:1!=this.SourceData.DataType&&(n=!0);break;case 10:2!=this.SourceData.DataType&&(n=!0)}}if(this.Period=t,null!=r&&(this.Right=r),this.ReloadChartDrawPicture(),this.ClearRectSelect(!0),this.Frame.ClearUpDonwFrameYData(),this.ClearCustomKLine(),0==n&&!this.IsApiPeriod)return void this.Update({UpdateCursorIndexType:2});this.ClearIndexPaint(),Z.IsDayPeriod(this.Period,!0)?(this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::ChangePeriod"),this.ResetOverlaySymbolStatus(),this.RequestHistoryData()):Z.IsMinutePeriod(this.Period,!0)||Z.IsSecondPeriod(this.Period)?(this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::ChangePeriod"),this.ResetOverlaySymbolStatus(),this.ReqeustHistoryMinuteData()):Z.IsTickPeriod(this.Period)&&(this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::ChangePeriod"),this.RequestTickData())},this.ChangeRight=function(t){if(an.IsEnableRight(this.Period,this.Symbol)){var e=this.Symbol.toUpperCase();if(!(an.IsBIT(e)||t<0||t>2||this.Right==t)){if(this.Right=t,!this.IsApiPeriod)return void this.Update();Z.IsDayPeriod(this.Period,!0)?(this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::ChangeRight"),this.ClearIndexPaint(),this.ResetOverlaySymbolStatus(),this.RequestHistoryData()):(Z.IsMinutePeriod(this.Period,!0)||Z.IsSecondPeriod(this.Period))&&(this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::ChangeRight"),this.ClearIndexPaint(),this.ResetOverlaySymbolStatus(),this.ReqeustHistoryMinuteData())}}},this.SetFirstShowDate=function(t){if(t&&t.Date){Fr.Chart.Log("[KLineChartContainer::SetFirstShowDate] obj=",t);var e=null;if(e=this.Frame.Data?this.Frame.SubFrame[0].Frame.Data:this.Frame.Data){var a=null;if(Z.IsDayPeriod(this.Period,!0))for(var i=0;i<e.Data.length;++i){var r=e.Data[i];if(r.Date>=t.Date){a=i;break}}else if(Z.IsMinutePeriod(this.Period,!0)){var n=t.Time;if(he.IsPlusNumber(n))for(var i=0;i<e.Data.length;++i){var r=e.Data[i];if(r.Date>t.Date||r.Date==t.Date&&r.Time>=n){a=i;break}}else for(var i=0;i<e.Data.length;++i){var r=e.Data[i];if(r.Date>=t.Date){a=i;break}}}if(null===a)return void Fr.Chart.Log("[KLineChartContainer::SetFirstShowDate] an't find first date="+t.Date+" time="+t.Time,t);var s=e.Data.length-a,o=s;t.PageSize>0&&(o=t.PageSize);var h=this.GetMaxMinPageSize();h.Max<o?o=h.Max:h.Min>o&&(o=h.Min);for(var i in this.Frame.SubFrame){var r=this.Frame.SubFrame[i].Frame;r.XPointCount=o}e.DataOffset=a,this.CursorIndex=0,this.LastPoint.X=null,this.LastPoint.Y=null,Fr.Chart.Log("[KLineChartContainer::SetFirstShowDate] dataOffset="+e.DataOffset+" CursorIndex="+this.CursorIndex+" PageSize="+o),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.UpdatePointByCursorIndex(2),this.Draw()}}},this.DeleteIndexPaint=function(t){var e=new Array;for(var a in this.ChartPaint){var i=this.ChartPaint[a];0!=a&&i.ChartFrame==this.Frame.SubFrame[t].Frame||e.push(i)}this.Frame.SubFrame[t].Frame.YSpecificMaxMin=null,this.Frame.SubFrame[t].Frame.IsLocked=!1,this.Frame.SubFrame[t].Frame.YSplitScale=null,this.ChartPaint=e;var r=t+1;this.TitlePaint[r].Data=[],this.TitlePaint[r].Title=null},this.ShowKLine=function(t){this.ChartPaint.length<=0||!this.ChartPaint[0]||(this.ChartPaint[0].IsShow=t)},this.SetInstructionData=function(t,e){if(!(this.ChartPaint.length<=0)&&this.ChartPaint[0]){var a=this.TitlePaint[1];2==t?(this.ChartPaint[0].ColorData=e.Data,a&&(a.ColorIndex={Name:e.Name,Param:e.Param})):1==t&&(this.ChartPaint[0].TradeData={Sell:e.Sell,Buy:e.Buy,Name:e.Name,Param:e.Param},a&&(a.TradeIndex={Name:e.Name,Param:e.Param}))}},this.ChangeInstructionIndex=function(t){var e=new o,a=e.Get(t);a&&(1!=a.InstructionType&&2!=a.InstructionType||(a.ID=t,this.ChangeInstructionScriptIndex(a)))},this.ChangeInstructionScriptIndex=function(t){if(1==t.InstructionType)this.TradeIndex=new zi(t.Name,t.Script,t.Args,t);else{if(2!=t.InstructionType)return;this.ColorIndex=new zi(t.Name,t.Script,t.Args,t)}var e=this.ChartPaint[0].Data;this.BindInstructionIndexData(e),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.CancelInstructionIndex=function(){if(!(this.ChartPaint.length<=0)&&this.ChartPaint[0]){this.ColorIndex=null,this.TradeIndex=null,this.ChartPaint[0].ColorData=null,this.ChartPaint[0].TradeData=null;var t=this.TitlePaint[1];t&&(t.TradeIndex=null,t.ColorIndex=null),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()}},this.SetFrameToolbar=function(t,e){if(e&&this.Frame.SubFrame[t]&&this.Frame.SubFrame[t].Frame){var a=this.Frame.SubFrame[t].Frame,i=!1;he.IsBool(e.Modify)&&(a.ModifyIndex=e.Modify,i=!0),he.IsBool(e.Change)&&(a.ChangeIndex=e.Change,i=!0),he.IsBool(e.Close)&&(a.CloseIndex=e.Close,i=!0),he.IsBool(e.Overlay)&&(a.OverlayIndex=e.Overlay,i=!0),i&&(a.SizeChange=!0,a.ToolbarRect=null,a.DrawToolbar())}},this.ChangeScriptIndex=function(t,e,a){this.DeleteIndexPaint(t),this.WindowIndex[t]=new zi(e.Name,e.Script,e.Args,e),a&&a.Window&&this.SetFrameToolbar(t,a.Window),this.Frame.ClearUpDonwFrameYData({Index:t});var i=this.ChartPaint[0].Data;this.BindIndexData(t,i),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.OnKLinePageChange=function(t){if(this.ChartPaint[0]){for(var e=this.ChartPaint[0].Data,a=0;a<this.WindowIndex.length;++a){var i=this.WindowIndex[a];i&&(!0===i.IsUsePageData&&this.BindIndexData(a,e))}for(var a=0;a<this.Frame.SubFrame.length;++a)for(var i=this.Frame.SubFrame[a],r=0;r<i.OverlayIndex.length;++r){var n=i.OverlayIndex[r];n&&n.Script&&1==n.Script.IsUsePageData&&this.BindOverlayIndexData(n,a,e)}}},this.ChangeAPIIndex=function(t,e){this.DeleteIndexPaint(t);var a=e.API;this.WindowIndex[t]=new qi(a.Name,a.Script,a.Args,e),e&&e.Window&&this.SetFrameToolbar(t,e.Window),this.Frame.ClearUpDonwFrameYData({Index:t});var i=this.ChartPaint[0].Data;this.BindIndexData(t,i),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.ChangeIndex=function(t,e,a){if(a&&a.API)return this.ChangeAPIIndex(t,a);var i=La.Get(e);if(!i){var r=new o,n=r.Get(e);if(!n)return;n.IsMainIndex?t=0:0==t&&(t=1);var s=n;return a&&(a.FloatPrecision>=0&&(s.FloatPrecision=a.FloatPrecision),a.StringFormat>0&&(s.StringFormat=a.StringFormat),a.Args&&(s.Args=a.Args),a.TitleFont&&(s.TitleFont=a.TitleFont),a.IsShortTitle&&(s.IsShortTitle=a.IsShortTitle)),this.ChangeScriptIndex(t,s,a)}i.IsMainIndex?t>0&&(t=0):0==t&&(t=1);var h=new Array;for(var l in this.ChartPaint){var u=this.ChartPaint[l];0!=l&&u.ChartFrame==this.Frame.SubFrame[t].Frame||h.push(u)}this.Frame.SubFrame[t].Frame.YSpecificMaxMin=null,this.Frame.SubFrame[t].Frame.IsLocked=!1,this.Frame.SubFrame[t].Frame.YSplitScale=null,this.ChartPaint=h;var c=t+1;this.TitlePaint[c].Data=[],this.TitlePaint[c].Title=null,this.WindowIndex[t]=i.Create(),this.CreateWindowIndex(t);var d=this.ChartPaint[0].Data;this.BindIndexData(t,d),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.ChangePyScriptIndex=function(t,e){this.DeleteIndexPaint(t),this.WindowIndex[t]=new Za(e.Name,e.Script,e.Args,e);var a=this.ChartPaint[0].Data;this.BindIndexData(t,a),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.AddOverlayIndex=function(t){var e=this.CreateOverlayWindowsIndex(t);if(e){var a=this.ChartPaint[0].Data;this.BindOverlayIndexData(e,t.WindowIndex,a),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()}},this.CreateOverlayWindowsIndex=function(t){var e=t.IndexName,a=t.WindowIndex,i=null,r=null,n=null;if(t.API)i=t.API;else if(t.Script)r={Script:t.Script,ID:t.indexName,Name:t.indexName},t.Name&&(r.Name=t.Name);else{var s=new o;if(!(r=s.Get(e))&&!(n=La.Get(e)))return console.warn("[KLineChartContainer::CreateOverlayIndex] can not find index["+e+"]"),null}var h=this.Frame.SubFrame[a];h.Interval=this.OverlayIndexFrameWidth;var l=new B;t.Identify&&(l.Identify=t.Identify);var u="KLineChartHScreenContainer"===this.ClassName?new R:new O;if(u.Canvas=this.Canvas,u.MainFrame=h.Frame,u.ChartBorder=h.Frame.ChartBorder,!0===t.ShowRightText?u.IsShow=!0:!1===t.ShowRightText&&(u.IsShow=!1),!0===t.IsShareY&&(u.IsShareY=!0),he.IsBool(t.IsCalculateYMaxMin)&&(u.IsCalculateYMaxMin=t.IsCalculateYMaxMin),u.YSplitOperator=new ue,u.YSplitOperator.LanguageID=this.LanguageID,u.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),u.YSplitOperator.Frame=u,u.YSplitOperator.ChartBorder=u.ChartBorder,u.YSplitOperator.SplitCount=h.Frame.YSplitOperator.SplitCount,l.Frame=u,i){var c=new qi(i.Name,i.Script,i.Args,t,!0);c.OverlayIndex={IsOverlay:!0,Identify:l.Identify,WindowIndex:a,Frame:l},l.Script=c}else if(r){var d=r;t.Args&&(d.Args=t.Args);var f=new Ji(d.Name,d.Script,d.Args,d);f.OverlayIndex={IsOverlay:!0,Identify:l.Identify,WindowIndex:a,Frame:l},l.Script=f}else{var f=n.Create();f.OverlayIndex={IsOverlay:!0,Identify:l.Identify,WindowIndex:a,Frame:l},f.Create(this,a),l.Script=f}return h.OverlayIndex.push(l),l},this.DeleteOverlayWindowsIndex=function(t){this.DeleteOverlayIndex(t,null)&&(this.Frame.ResetXYSplit(!0),this.Draw())},this.ChangeKLineDrawType=function(t,e){if(this.KLineDrawType!=t){if(this.KLineDrawType=t,5==this.KLineDrawType){var a=this.ChartPaint[0];return a&&(a.DrawType=this.KLineDrawType),this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::ChangeKLineDrawType"),void(Z.IsDayPeriod(this.Period,!0)?(this.ResetOverlaySymbolStatus(),this.RequestHistoryData()):(Z.IsMinutePeriod(this.Period,!0)||Z.IsSecondPeriod(this.Period))&&(this.ResetOverlaySymbolStatus(),this.ReqeustHistoryMinuteData()))}for(var i in this.ChartPaint){var r=this.ChartPaint[i];0==i?r.DrawType=this.KLineDrawType:"ChartVolStick"==r.ClassName&&(r.KLineDrawType=this.KLineDrawType)}for(var i in this.OverlayChartPaint){var r=this.OverlayChartPaint[i];r.DrawType=this.KLineDrawType}0!=e&&(this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw())}},this.ChangeCoordinateType=function(t){if((this.Frame||this.Frame.SubFrame)&&this.Frame.SubFrame.length){if(he.IsNumber(t)){var e=t;if(2==e)this.Frame.SubFrame[0].Frame.CoordinateType=1;else if(1==e)this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=e;else if(0==e)this.Frame.SubFrame[0].Frame.CoordinateType=0,this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=0;else{if(3!=e)return;this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=2}}else t.Type>=0&&t.Type<=5&&(this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=t.Type),!0===t.IsReverse?this.Frame.SubFrame[0].Frame.CoordinateType=1:0==t.IsReverse&&(this.Frame.SubFrame[0].Frame.CoordinateType=0);this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}},this.ChangeIndexWindowCount=function(t,e){var a=this;if(!(t<=0)&&this.Frame.SubFrame.length!=t){this.Frame.RestoreIndexWindows();var i=this.Frame.SubFrame.length;if(i>t){for(var r=i-1;r>=t;--r)this.DeleteIndexPaint(r),this.Frame.SubFrame[r].Frame.ClearToolbar();this.Frame.SubFrame.splice(t,i-t),this.WindowIndex.splice(t,i-t);for(var r=0;r<this.Frame.SubFrame.length;++r){var n=this.Frame.SubFrame[r].Frame;r==this.Frame.SubFrame.length-1?n.XSplitOperator.ShowText=!0:n.XSplitOperator.ShowText=!1}this.Frame.SetSizeChage(!0),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw()}else{for(var s=c(),r=i;r<t;++r){var h=this.CreateSubFrameItem(r);h.Frame.ChartBorder.TitleHeight*=s,this.Frame.SubFrame[r]=h;var l=new Pe;l.Frame=this.Frame.SubFrame[r].Frame,l.Canvas=this.Canvas,l.LanguageID=this.LanguageID,l.GetEventCallback=function(t){return a.GetEventCallback(t)},this.TitlePaint[r+1]=l}for(var r=0;r<this.Frame.SubFrame.length;++r){var n=this.Frame.SubFrame[r].Frame;r==this.Frame.SubFrame.length-1?n.XSplitOperator.ShowText=!0:n.XSplitOperator.ShowText=!1}this.Frame.SetSizeChage(!0),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw();var u=[{Index:"RSI"},{Index:"MACD"},{Index:"VOL"},{Index:"UOS"},{Index:"CHO"},{Index:"BRAR"}];e&&e.Windows.length>0&&(u=e.Windows);for(var d=new o,r=i;r<t;++r){var n=u[r%u.length],f=n.Index,m=d.Get(f),C=m.Args;n.Args&&(C=n.Args);var p={Name:m.Name,Script:m.Script,Args:C,ID:n.Index,KLineType:m.KLineType,YSpecificMaxMin:m.YSpecificMaxMin,YSplitScale:m.YSplitScale,FloatPrecision:m.FloatPrecision,Condition:m.Condition,OutName:m.OutName};this.WindowIndex[r]=new zi(p.Name,p.Script,p.Args,p);var h=this.Frame.SubFrame[r];null!=n.Modify&&(this.Frame.SubFrame[r].Frame.ModifyIndex=n.Modify),null!=n.Change&&(this.Frame.SubFrame[r].Frame.ChangeIndex=n.Change),null!=n.Close&&(this.Frame.SubFrame[r].Frame.CloseIndex=n.Close),null!=n.Overlay&&(chart.Frame.SubFrame[r].Frame.OverlayIndex=n.Overlay),1==n.IsDrawTitleBG&&(this.Frame.SubFrame[r].Frame.IsDrawTitleBG=n.IsDrawTitleBG),he.IsNumber(n.TitleHeight)?this.Frame.SubFrame[r].Frame.ChartBorder.TitleHeight=n.TitleHeight:n.TitleHeight=this.Frame.SubFrame[r].Frame.ChartBorder.TitleHeight,0==n.IsShowTitleArraw&&(this.Frame.SubFrame[r].Frame.IsShowTitleArraw=!1),0==n.IsShowIndexName&&(this.Frame.SubFrame[r].Frame.IsShowIndexName=!1),0==n.IsShowOverlayIndexName&&(this.Frame.SubFrame[r].Frame.IsShowOverlayIndexName=!1),he.IsNumber(n.IndexParamSpace)&&(this.Frame.SubFrame[r].Frame.IndexParamSpace=n.IndexParamSpace),he.IsNumber(n.IndexTitleSpace)&&(this.Frame.SubFrame[r].Frame.IndexTitleSpace=n.IndexTitleSpace),0==n.IsShowXLine&&(this.Frame.SubFrame[r].Frame.IsShowXLine=!1),0==n.IsShowYLine&&(this.Frame.SubFrame[r].Frame.IsShowYLine=!1),he.IsBool(n.IsShowIndexTitle)&&(this.Frame.SubFrame[r].Frame.IsShowIndexTitle=n.IsShowIndexTitle),he.IsBool(n.IsShowLeftText)&&(h.Frame.IsShowYText[0]=n.IsShowLeftText,h.Frame.YSplitOperator.IsShowLeftText=n.IsShowLeftText),he.IsBool(n.IsShowRightText)&&(h.Frame.IsShowYText[1]=n.IsShowRightText,h.Frame.YSplitOperator.IsShowRightText=n.IsShowRightText),n.OverlayIndexType&&(he.IsNumber(n.OverlayIndexType.Position)&&(h.Frame.OverlayIndexType.Position=n.OverlayIndexType.Position),he.IsNumber(n.OverlayIndexType.LineSpace)&&(h.Frame.OverlayIndexType.LineSpace=n.OverlayIndexType.LineSpace));var D=this.ChartPaint[0].Data;this.BindIndexData(r,D)}}}},this.ChangeIndexTemplate=function(t){var e=this;if(t.Windows){var a=t.Windows.length;if(!(a<=0)){var i=this.Frame.SubFrame.length,r=null,n=null;t.KLine&&(he.IsNumber(t.KLine.Period)&&t.KLine.Period!=this.Period&&(r=t.KLine.Period),he.IsNumber(t.KLine.Right)&&t.KLine.Right!=this.Right&&(n=t.KLine.Right));for(var s=null!=r||null!=n,h=0;h<i;++h){this.DeleteIndexPaint(h);var l=this.Frame.SubFrame[h];l.YSpecificMaxMin=null,l.IsLocked=!1,l.YSplitScale=null}if(i>a){for(var h=i-1;h>=a;--h)this.Frame.SubFrame[h].Frame.ClearToolbar();this.Frame.SubFrame.splice(a,i-a),this.WindowIndex.splice(a,i-a)}else for(var h=i;h<a;++h){var u=this.CreateSubFrameItem(h);this.Frame.SubFrame[h]=u;var c=new Pe;c.Frame=this.Frame.SubFrame[h].Frame,c.Canvas=this.Canvas,c.LanguageID=this.LanguageID,c.GetEventCallback=function(t){return e.GetEventCallback(t)},this.TitlePaint[h+1]=c}for(var d=new o,f=this.ChartPaint[0].Data,h=0;h<a;++h){var m=h,C=t.Windows[h],p=null;t.Frame&&t.Frame.length>h&&(p=t.Frame[h]);var D=m+1;if(this.TitlePaint[D].Data=[],this.TitlePaint[D].Title=null,C.Script)this.WindowIndex[h]=new zi(C.Name,C.Script,C.Args,C),s||this.BindIndexData(m,f);else{var v=C.Index,g=La.Get(v);if(g)this.WindowIndex[h]=g.Create(),this.CreateWindowIndex(m),s||this.BindIndexData(m,f);else{var S=d.Get(v);if(S){var T=S.Args;t.Windows[h].Args&&(T=t.Windows[h].Args);var y={Name:S.Name,Script:S.Script,Args:T,ID:v,KLineType:S.KLineType,YSpecificMaxMin:S.YSpecificMaxMin,YSplitScale:S.YSplitScale,FloatPrecision:S.FloatPrecision,Condition:S.Condition,OutName:S.OutName};C.TitleFont&&(y.TitleFont=C.TitleFont),this.WindowIndex[h]=new zi(y.Name,y.Script,y.Args,y),s||this.BindIndexData(m,f)}}}null!=C.Modify&&(this.Frame.SubFrame[h].Frame.ModifyIndex=C.Modify),null!=C.Change&&(this.Frame.SubFrame[h].Frame.ChangeIndex=C.Change),null!=C.Close&&(this.Frame.SubFrame[h].Frame.CloseIndex=C.Close),null!=C.Overlay&&(chart.Frame.SubFrame[h].Frame.OverlayIndex=C.Overlay),1==C.IsDrawTitleBG&&(this.Frame.SubFrame[h].Frame.IsDrawTitleBG=C.IsDrawTitleBG),he.IsNumber(C.TitleHeight)?this.Frame.SubFrame[h].Frame.ChartBorder.TitleHeight=C.TitleHeight:C.TitleHeight=this.Frame.SubFrame[h].Frame.ChartBorder.TitleHeight,0==C.IsShowTitleArraw&&(this.Frame.SubFrame[h].Frame.IsShowTitleArraw=!1),0==C.IsShowIndexName&&(this.Frame.SubFrame[h].Frame.IsShowIndexName=!1),he.IsNumber(C.IndexParamSpace)&&(this.Frame.SubFrame[h].Frame.IndexParamSpace=C.IndexParamSpace),he.IsNumber(C.IndexTitleSpace)&&(this.Frame.SubFrame[h].Frame.IndexTitleSpace=C.IndexTitleSpace),p&&(p.SplitCount&&(this.Frame.SubFrame[h].Frame.YSplitOperator.SplitCount=p.SplitCount),!1!==p.IsShowXLine&&!0!==p.IsShowXLine||(this.Frame.SubFrame[h].Frame.IsShowXLine=p.IsShowXLine),!1!==p.IsShowYLine&&!0!==p.IsShowYLine||(this.Frame.SubFrame[h].Frame.IsShowYLine=p.IsShowYLine),!1!==p.IsShowLeftText&&!0!==p.IsShowLeftText||(this.Frame.SubFrame[h].Frame.IsShowYText[0]=p.IsShowLeftText,this.Frame.SubFrame[h].Frame.YSplitOperator.IsShowLeftText=p.IsShowLeftText),!1!==p.IsShowRightText&&!0!==p.IsShowRightText||(this.Frame.SubFrame[h].Frame.IsShowYText[1]=p.IsShowRightText,this.Frame.SubFrame[h].Frame.YSplitOperator.IsShowRightText=p.IsShowRightText))}for(var h=0;h<this.Frame.SubFrame.length;++h){var C=this.Frame.SubFrame[h].Frame;h==this.Frame.SubFrame.length-1?C.XSplitOperator.ShowText=!0:C.XSplitOperator.ShowText=!1}s?(this.Frame.SetSizeChage(!0),null!=r?this.ChangePeriod(r,t):null!=n&&this.ChangeRight(n)):(this.UpdataDataoffset(),this.Frame.SetSizeChage(!0),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw())}}},this.RemoveIndexWindow=function(t){if(Fr.Chart.Log("[KLineChartContainer::RemoveIndexWindow] remove id",t),0!=t&&this.Frame.SubFrame&&!(t>=this.Frame.SubFrame.length)){this.Frame.RestoreIndexWindows();var e=this.Frame.SubFrame[t].Frame;this.DeleteIndexPaint(t),this.Frame.SubFrame[t].Frame.ClearToolbar(),this.Frame.SubFrame.splice(t,1),this.WindowIndex.splice(t,1),this.TitlePaint.splice(t+1,1);for(var a=0;a<this.Frame.SubFrame.length;++a){var i=this.Frame.SubFrame[a].Frame;a==this.Frame.SubFrame.length-1?i.XSplitOperator.ShowText=!0:i.XSplitOperator.ShowText=!1,i.Identify=a}if(this.ChartDrawPicture.length>0){var r=[];for(var a in this.ChartDrawPicture){var i=this.ChartDrawPicture[a];i.Frame!=e&&r.push(i)}this.ChartDrawPicture=r}this.Frame.SetSizeChage(!0),this.UpdateFrameMaxMin(),this.ResetFrameXYSplit(),this.Draw()}},this.GetIndexInfo=function(){var t=[];for(var e in this.WindowIndex){var a=this.WindowIndex[e],i={Name:a.Name};if(a.ID&&(i.ID=a.ID),a.Arguments){i.Args=[];for(var e in a.Arguments){var r=a.Arguments[e];i.Args.push({Name:r.Name,Value:r.Value})}}t.push(i)}return t},this.CreateExtendChart=function(t,e){var a;switch(t){case"筹码分布":return a=new te,a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.Left=this.Frame.ChartBorder.Right,a.SetOption(e),this.ExtendChartPaint.push(a),this.Frame.ChartBorder.Right+=a.Width,a;case"画图工具":return a=new ee,a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.Left=this.Frame.ChartBorder.Right,a.SetOption(e),this.ExtendChartPaint.push(a),this.Frame.ChartBorder.Right+=a.Width,a;case"KLineTooltip":return a=e.Create&&"function"==typeof e.Create?e.Create():new Zt,a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,e.LanguageID=this.LanguageID,a.SetOption(e),this.ExtendChartPaint.push(a),a;case"深度图":return a=new re,a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.SetOption(e),this.ExtendChartPaint.push(a),a;case"背景图":return a=new ne,a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.SetOption(e),this.ExtendChartPaint.push(a),a;case"FrameSplitPaint":return a=new ae,a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.SetOption(e),this.ExtendChartPaint.push(a),a;default:return(a=jr.Create(t))?(a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.SetOption(e),this.ExtendChartPaint.push(a),a):null}},this.OnTouchFinished=function(){if(this.DragMode==Pr.CLICK_TOUCH_MODE_ID){if(1==this.TouchStatus.CorssCursorShow&&this.TouchDrawCount>0)return;return this.TouchStatus.CorssCursorShow=!1,void this.DrawDynamicInfo()}if(!0===this.CorssCursorTouchEnd)return void(this.TouchDrawCount>0&&this.DrawDynamicInfo());for(var t in this.ExtendChartPaint){"KLineTooltipPaint"===this.ExtendChartPaint[t].ClassName&&this.DrawDynamicInfo()}},this.LockIndex=function(t){if(t&&t.IndexName)for(var e in this.WindowIndex){var a=this.WindowIndex[e];if(a||conintue,a.Name==t.IndexName){a.SetLock(t),this.Update();break}}},this.TryClickLock=function(t,e){for(var a in this.Frame.SubFrame){var i=this.Frame.SubFrame[a];if(i.Frame.IsLocked&&i.Frame.LockPaint){var r=new Q;if(i.Frame.LockPaint.GetTooltipData(t,e,r))return r.HQChart=this,r.Data.Callback&&r.Data.Callback(r),!0}}return!1},this.TryClickIndexTitle=function(t,e){for(var a in this.TitlePaint){var i=this.TitlePaint[a];if(i.IsClickTitle&&i.IsClickTitle(t,e)){var r={Point:{X:t,Y:e},Title:i.Title,FrameID:i.Frame.Identify};Fr.Chart.Log("[KLineChartContainer::TryClickIndexTitle] click title ",r);var n=this.GetEventCallback(Nr.ON_CLICK_INDEXTITLE);return n&&n.Callback&&n.Callback(n,r,this),!0}}return!1},this.SetSizeChange=function(t){this.Frame.SetSizeChage(t);for(var e in this.ExtendChartPaint){this.ExtendChartPaint[e].SizeChange=t}},this.SetSizeChage=this.SetSizeChange,this.Update=function(t){if(this.SourceData){this.BeforeBindMainData&&this.BeforeBindMainData("Update");var e=new Z;if(e.Data=this.SourceData.Data,e.Period=this.Period,e.Right=this.Right,e.DataType=this.SourceData.DataType,e.Symbol=this.Symbol,e.Right>0&&Z.IsDayPeriod(e.Period,!0)){var a=e.GetRightData(e.Right,{AlgorithmType:this.RightFormula});e.Data=a}if(Z.IsDayPeriod(e.Period,!1)||Z.IsMinutePeriod(e.Period,!1)){var i=e.GetPeriodData(e.Period);e.Data=i}this.BindMainData(e,this.PageSize),this.AfterBindMainData&&this.AfterBindMainData("Update");for(var r,n=0;n<this.Frame.SubFrame.length;++n)0==n&&(r=this.Frame.SubFrame[n].Frame),this.BindIndexData(n,e);r&&r.YSplitOperator&&(r.YSplitOperator.Symbol=this.Symbol,r.YSplitOperator.Data=this.ChartPaint[0].Data,r.YSplitOperator.Period=this.Period);for(var n in this.OverlayChartPaint){var s=this.OverlayChartPaint[n];if(s.SourceData)if(Z.IsMinutePeriod(this.Period,!0)){var e=new Z;e.Data=s.SourceData.Data,e.Period=this.Period,e.Right=this.Right;var o=this.SourceData.GetOverlayMinuteData(e.Data,this.IsApiPeriod);if(e.Data=o,Z.IsMinutePeriod(e.Period,!1)&&!this.IsApiPeriod){var i=e.GetPeriodData(e.Period);e.Data=i}s.Data=e}else{var e=new Z;if(e.Data=s.SourceData.Data,e.Period=this.Period,e.Right=this.Right,e.Right>0&&an.IsSHSZStockA(s.Symbol)){var a=e.GetRightData(e.Right,{AlgorithmType:this.RightFormula});e.Data=a}var o=this.SourceData.GetOverlayData(e.Data,this.IsApiPeriod);if(e.Data=o,Z.IsDayPeriod(e.Period,!1)&&!this.IsApiPeriod){var i=e.GetPeriodData(e.Period);e.Data=i}s.Data=e}}this.ReqeustKLineInfoData({FunctionName:"Update"}),this.CreateChartDrawPictureByStorage(),this.UpdataDataoffset(),t&&t.UpdateCursorIndexType>0?this.UpdatePointByCursorIndex(t.UpdateCursorIndexType):this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw();for(var n=0;n<this.Frame.SubFrame.length;++n){var s=this.Frame.SubFrame[n];for(var h in s.OverlayIndex){var l=s.OverlayIndex[h];this.BindOverlayIndexData(l,n,e)}}}},this.ChangeSymbol=function(t,e){if(this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::ChangeSymbol"),this.ClearRectSelect(!0),this.ClearCustomKLine(),this.Symbol=t,!t)return void this.DrawEmpty();if(e&&e.KLine){var a=e.KLine;he.IsNumber(a.Right)&&(this.Right=a.Right),he.IsNumber(a.Period)&&(this.Period=a.Period)}if(an.IsSHSZIndex(t)&&(this.Right=0),this.ClearIndexPaint(),e&&e.Windows&&Array.isArray(e.Windows)&&e.Windows.length>0){var i=e.Windows,r=new o;for(var n in i){if(n>=this.WindowIndex.length)break;var a=i[n];if(a)if(a.Script)this.WindowIndex[n]=new zi(a.Name,a.Script,a.Args,a);else if(a.API){var s=a.API;this.WindowIndex[n]=new qi(s.Name,s.Script,s.Args,a)}else{var h=a.Index,l=r.Get(h);if(l){l.Args;a.Args&&(l.Args=a.Args),l.ID=h,this.WindowIndex[n]=new zi(l.Name,l.Script,l.Args,l)}}}}this.ReloadChartDrawPicture(),this.Frame.ClearUpDonwFrameYData(),Z.IsDayPeriod(this.Period,!0)?this.RequestHistoryData():Z.IsMinutePeriod(this.Period,!0)||Z.IsSecondPeriod(this.Period)?this.ReqeustHistoryMinuteData():Z.IsTickPeriod(this.Period)&&this.RequestTickData()},this.ReqeustKLineInfoData=function(t){if(t&&"RecvDragDayData"==t.FunctionName)t.Update=!0;else{if(this.ChartPaint.length>0){this.ChartPaint[0].InfoData=new _r.default}t.Update=!1}for(var e in this.ChartInfo)this.ChartInfo[e].RequestData(this,t)},this.SetKLineInfo=function(t,e){this.ChartInfo=[];for(var a in t){var i=ti.Get(t[a]);if(i){var r=i.Create();r.MaxReqeustDataCount=this.MaxReqeustDataCount,this.ChartInfo.push(r)}}1==e&&this.ReqeustKLineInfoData({FunctionName:"SetKLineInfo"})},this.AddKLineInfo=function(t,e){var a=ti.GetClassInfo(t);if(!a)return void console.warn("[KLineChartContainer::AddKLineInfo] can't find infoname=",t);for(var i in this.ChartInfo){var r=this.ChartInfo[i];if(r.ClassName==a.ClassName)return}var n=ti.Get(t);if(n){var r=n.Create();r.MaxReqeustDataCount=this.MaxReqeustDataCount,this.ChartInfo.push(r),1==e&&r.RequestData(this)}},this.DeleteKLineInfo=function(t){var e=ti.GetClassInfo(t);if(!e)return void console.warn("[KLineChartContainer::DeleteKLineInfo] can't find infoname=",t);for(var a in this.ChartInfo){if(this.ChartInfo[a].ClassName==e.ClassName){this.ChartInfo.splice(a,1),this.UpdataChartInfo(),this.Draw();break}}},this.ClearKLineInfo=function(){if(this.ChartInfo&&!(this.ChartInfo.length<=0)){this.ChartInfo=[];this.ChartPaint[0].InfoData=null,this.Draw()}},this.OverlaySymbol=function(t,e){for(var a in this.OverlayChartPaint){if(this.OverlayChartPaint[a].Symbol===t)return console.warn("[KLineChartContainer::OverlaySymbol] overlay symbol="+t+" exist."),!1}var i=new it;return i.Canvas=this.Canvas,i.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,i.ChartFrame=this.Frame.SubFrame[0].Frame,i.Name="Overlay-KLine",i.DrawType=this.KLineDrawType,i.Symbol=t,e&&e.Color?i.Color=e.Color:i.Color=$r.OverlaySymbol.Color[$r.OverlaySymbol.Random%$r.OverlaySymbol.Color.length],i.SetOption(e),++$r.OverlaySymbol.Random,this.ChartPaint[0]&&this.ChartPaint[0].Data&&this.SourceData&&(i.MainData=this.ChartPaint[0].Data),this.OverlayChartPaint.push(i),Z.IsDayPeriod(this.Period,!0)?this.RequestOverlayHistoryData():Z.IsMinutePeriod(this.Period,!0)&&this.RequestOverlayHistoryMinuteData(),!0},this.RequestOverlayHistoryData=function(){var t=this;if(this.OverlayChartPaint.length&&this.SourceData&&this.SourceData.Data){var e=this,a=this.GetRequestDataCount(),i=this.SourceData.Data[0].Date;for(var r in this.OverlayChartPaint){var s,o=function(){var o=t.OverlayChartPaint[r];if(!o.MainData)return"continue";if(o.Status!=Kr.STATUS_NONE_ID)return"continue";var h=o.Symbol;return h?(o.Status=Kr.STATUS_REQUESTDATA_ID,t.NetworkFilter&&(s={Name:"KLineChartContainer::RequestOverlayHistoryData",Explain:"叠加股票日K线数据",Request:{Url:e.KLineApiUrl,Data:{symbol:h,count:a.MaxRequestDataCount,first:{date:i},field:["name","symbol","yclose","open","price","high","vol","amount"]},Type:"POST"},Self:t,PreventDefault:!1},t.NetworkFilter(s,function(t){o.Status=Kr.STATUS_RECVDATA_ID,e.RecvOverlayHistoryData(t,o)}),1==s.PreventDefault)?{v:void 0}:void n.HttpRequest({url:t.KLineApiUrl,data:{field:["name","symbol","yclose","open","price","high"],symbol:h,start:-1,count:a.MaxRequestDataCount},type:"post",dataType:"json",async:!0,success:function(t){o.Status=Kr.STATUS_RECVDATA_ID,e.RecvOverlayHistoryData(t,o)}})):"continue"}();switch(o){case"continue":continue;default:if("object"===(void 0===o?"undefined":(0,gr.default)(o)))return o.v}}}},this.RecvOverlayHistoryData=function(t,e){if(!e.IsDelete){var a=_a.JsonDataToHistoryData(t),i=new Z;i.Data=a,i.DataType=0;var r=new Z;if(r.Data=a,r.Period=this.Period,r.Right=this.Right,r.DataType=0,r.Right>0&&an.IsSHSZStockA(t.symbol)&&!this.IsApiPeriod){var n=r.GetRightData(r.Right,{AlgorithmType:this.RightFormula});r.Data=n}var s=this.SourceData.GetOverlayData(r.Data,this.IsApiPeriod);if(r.Data=s,Z.IsDayPeriod(r.Period,!1)&&!this.IsApiPeriod){var o=r.GetPeriodData(r.Period);r.Data=o}e.Data=r,e.SourceData=i,e.Title=t.name,e.Symbol=t.symbol,e.Status=Kr.STATUS_FINISHED_ID,this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=1,this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}},this.RequestOverlayHistoryMinuteData=function(){var t=this;if(this.OverlayChartPaint.length&&this.SourceData&&this.SourceData.Data){var e=this,a=this.GetRequestDataCount(),i=this.SourceData.Data[0].Date,r=this.SourceData.Data[0].Time;for(var s in this.OverlayChartPaint){var o,h=function(){var h=t.OverlayChartPaint[s];if(!h.MainData)return"continue";if(h.Status!=Kr.STATUS_NONE_ID)return"continue";var l=h.Symbol;return l?(h.Status=Kr.STATUS_REQUESTDATA_ID,t.NetworkFilter&&(o={Name:"KLineChartContainer::RequestOverlayHistoryMinuteData",Explain:"叠加股票分钟K线数据",Request:{Url:e.MinuteKLineApiUrl,Data:{symbol:l,count:a.MaxRequestMinuteDayCount,first:{date:i,time:r},field:["name","symbol","yclose","open","price","high","vol","amount"]},Type:"POST"},Self:t,PreventDefault:!1},t.NetworkFilter(o,function(t){h.Status=Kr.STATUS_RECVDATA_ID,e.RecvOveralyHistoryMinuteData(t,h)}),1==o.PreventDefault)?{v:void 0}:void n.HttpRequest({url:t.MinuteKLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","vol","amount"],symbol:l,start:-1,count:a.MaxRequestMinuteDayCount},type:"post",dataType:"json",async:!0,success:function(t){h.Status=Kr.STATUS_RECVDATA_ID,e.RecvOveralyHistoryMinuteData(t,h)}})):"continue"}();switch(h){case"continue":continue;default:if("object"===(void 0===h?"undefined":(0,gr.default)(h)))return h.v}}}},this.RecvOveralyHistoryMinuteData=function(t,e){var a=_a.JsonDataToMinuteHistoryData(t);if(a){var i=new Z;i.Data=a,i.DataType=1;var r=new Z;r.Data=a,r.Period=this.Period,r.Right=this.Right,r.DataType=1;var n=this.SourceData.GetOverlayMinuteData(r.Data,this.IsApiPeriod);if(r.Data=n,Z.IsMinutePeriod(r.Period,!1)&&!this.IsApiPeriod){var s=r.GetPeriodData(r.Period);r.Data=s}e.Data=r,e.SourceData=i,e.Title=t.name,e.Symbol=t.symbol,e.Status=Kr.STATUS_FINISHED_ID,this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=1,this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}},this.ResetOverlaySymbolStatus=function(){for(var t in this.OverlayChartPaint){this.OverlayChartPaint[t].Status=Kr.STATUS_NONE_ID}},this.ClearOverlaySymbol=function(){for(var t in this.OverlayChartPaint){this.OverlayChartPaint[t].IsDelete=!0}this.OverlayChartPaint=[],this.TitlePaint[0].OverlayChartPaint=this.OverlayChartPaint,this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=0,this.UpdateFrameMaxMin(),this.Draw()},this.DeleteOverlaySymbol=function(t){for(var e in this.OverlayChartPaint){var a=this.OverlayChartPaint[e];if(a.Symbol===t)return a.IsDelete=!0,this.OverlayChartPaint.splice(e,1),this.OverlayChartPaint.length<=0&&(this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=0),this.UpdateFrameMaxMin(),this.Draw(),!0}return console.warn("[KLineChartContainer::DeleteOverlaySymbol] overlay symbol="+t+" not exist."),!1},this.RequestFlowCapitalData=function(){if(this.Symbol&&1!=this.FlowCapitalReady){var t=this.Symbol.toUpperCase(),e=!0;if((an.IsBIT(t)||an.IsFutures(t))&&(e=!1),this.EnableFlowCapital&&an.IsBIT(t)&&1==this.EnableFlowCapital.BIT&&(e=!0),!e)return Fr.Chart.Log("[KLineChartContainer::RequestFlowCapitalData] symbol="+this.Symbol+" not need download data."),void(this.FlowCapitalReady=!0);var a=this,i=["name","date","symbol","capital.a"];if(this.NetworkFilter){var r={Name:"KLineChartContainer::RequestFlowCapitalData",Explain:"流通股本数据",Request:{Url:a.StockHistoryDayApiUrl,Data:{symbol:[this.Symbol],orderfield:"date",field:i},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(r,function(t){a.RecvFlowCapitalData(t)}),1==r.PreventDefault)return}n.HttpRequest({url:this.StockHistoryDayApiUrl,data:{field:i,symbol:[this.Symbol],orderfield:"date"},type:"post",dataType:"json",async:!0,success:function(t){a.RecvFlowCapitalData(t)}})}},this.RecvFlowCapitalData=function(t){if(t.stock&&1==t.stock.length){var e=t.stock[0],a=new Array;for(var i in e.stockday){var r=e.stockday[i],n=new z;n.Date=r.date;var s=r.capital;s&&(s.a>0&&(n.Value=s.a,a.push(n)))}if(this.IsApiPeriod){var o=this.ChartPaint[0].Data,h=null;if(Z.IsMinutePeriod(this.Period,!0)?h=o.GetMinuteFittingFinanceData(a):Z.IsDayPeriod(this.Period,!0)&&(h=o.GetFittingFinanceData(a)),h&&o.Data&&h.length==o.Data.length)for(var l in o.Data){var r=o.Data[l];h[l]&&he.IsNumber(h[l].Value)&&(r.FlowCapital=h[l].Value)}}else if(Z.IsMinutePeriod(this.Period,!0)){var h=this.SourceData.GetMinuteFittingFinanceData(a);for(var u in this.SourceData.Data){var r=this.SourceData.Data[u];h[u]&&he.IsNumber(h[u].Value)&&(r.FlowCapital=h[u].Value)}var c=this.ChartPaint[0].Data,d=new Z;if(d.Data=this.SourceData.Data,Z.IsMinutePeriod(c.Period,!1)){var f=d.GetPeriodData(c.Period);d.Data=f}c.Data=d.Data}else{var h=this.SourceData.GetFittingFinanceData(a);for(var m in this.SourceData.Data){var r=this.SourceData.Data[m];h[m]&&he.IsNumber(h[m].Value)&&(r.FlowCapital=h[m].Value)}var c=this.ChartPaint[0].Data,d=new Z;if(d.Data=this.SourceData.Data,c.Right>0){var C=d.GetRightData(c.Right,{AlgorithmType:this.RightFormula});d.Data=C}if(Z.IsDayPeriod(c.Period,!1)){var f=d.GetPeriodData(c.Period);d.Data=f}c.Data=d.Data}this.FlowCapitalReady=!0;var p=!1;for(var l in this.ExtendChartPaint){var r=this.ExtendChartPaint[l];if("StockChip"==r.ClassName){p=!0;break}}p&&this.Draw()}},this.CreateChartDrawPicture=function(t,e,a){var i=null,r=Re.GetDrawPictureByName(t);if(r&&(i=r.Create(),"ChartDrawPictureText"==i.ClassName&&(i.HQChart=this)),!i&&Re.MapIonFont.has(t)){var n=Re.MapIonFont.get(t);i=new Qe,i.FontOption.Family=n.Family,i.Text=n.Text,n.Color&&(i.LineColor=n.Color)}if(!i)return!1;i.Canvas=this.Canvas,i.Status=0,i.Symbol=this.Symbol,i.Period=this.Period,i.Right=this.Right,i.Option=this.ChartDrawOption,a&&(i.FinishedCallback=a),e&&i.SetOption(e);var s=this;return i.Update=function(){s.DrawDynamicInfo()},i.GetActiveDrawPicture=function(){return s.GetActiveDrawPicture()},this.CurrentChartDrawPicture=i,!0},this.AddChartDrawPicture=function(t){if(!t)return null;if(t.FrameID<0||t.FrameID>=this.Frame.SubFrame.length)return null;var e=Re.GetDrawPictureByClassName(t.ClassName);if(!e)return null;var a=e.Create();return a.Canvas=this.Canvas,a.Status=10,a.Frame=this.Frame.SubFrame[t.FrameID].Frame,a.Symbol=this.Symbol,a.Period=this.Period,a.Right=this.Right,t.Value&&(a.Value=t.Value),a.ImportStorageData&&a.ImportStorageData(t),a.SetOption(t),t.EnableUpdateXValue&&a.UpdateXValue(),a.ValueToPoint(),"ChartDrawPictureText"===a.ClassName&&(a.IsInitialized=!0),this.ChartDrawPicture.push(a),this.DrawDynamicInfo(),a},this.MoveChartDrawPicture=function(t,e,a){var i=this.CurrentChartDrawPicture;if(!i)return!1;var r=c();a&&(r=1);var n=t*r,s=e*r;return i.Move(n,s),!0},this.UpdateChartDrawXValue=function(){for(var t in this.ChartDrawPicture){this.ChartDrawPicture[t].UpdateXValue()}},this.OnRightMenu=function(t,e,a){var i=c();if(this.RightMenu){var r=this.Frame.PtInFrame(t*i,e*i);a.data={Chart:this,FrameID:r},this.RightMenu.DoModal(a)}var n=this.GetEventCallback(Nr.ON_CONTEXT_MENU);if(n){var r=this.Frame.PtInFrame(t*i,e*i),s={X:t,Y:e,Event:a,FrameID:r};n.Callback(n,s,this)}},this.ReloadChartDrawPicture=function(){this.ChartDrawPicture=[],this.ChartDrawStorageCache,this.ChartDrawStorage&&(this.ChartDrawStorageCache=this.ChartDrawStorage.GetDrawData({Symbol:this.Symbol,Period:this.Period}))},this.CreateChartDrawPictureByStorage=function(){if(this.ChartDrawStorageCache&&!(this.ChartDrawStorageCache.length<=0)){for(var t in this.ChartDrawStorageCache){var e=this.ChartDrawStorageCache[t];if(!(e.FrameID<0||!this.Frame.SubFrame||this.Frame.SubFrame.length<e.FrameID)){var a=Re.CreateChartDrawPicture(e);if(a){a.Canvas=this.Canvas,a.Status=10,a.Frame=this.Frame.SubFrame[e.FrameID].Frame,a.ImportStorageData&&a.ImportStorageData(e),a.UpdateXValue(),a.ValueToPoint();var i=this;a.GetActiveDrawPicture=function(){return i.GetActiveDrawPicture()},"ChartDrawPictureText"===a.ClassName&&(a.IsInitialized=!0),this.ChartDrawPicture.push(a)}}}this.ChartDrawStorageCache=null}},this.RequestKLineMatch=function(t,e){var a=this,i=e.Scope,r=e.WaitDialog;Fr.Chart.Log("[KLineChartContainer::RequestKLineMatch",t,i);for(var n=new Array,s=new Array,o=t.Start;o<t.End&&o<t.Data.Data.length;++o){var h=t.Data.Data[o];n.push(h.Date),s.push(h.Close)}var l={Stock:t.Stock,Index:{Start:t.Start,End:t.End},Date:{Start:n[0],End:n[n.length-1]},Minsimilar:i.Minsimilar,Plate:i.Plate,DayRegion:300};wr.default.ajax({url:this.KLineMatchUrl,data:{userid:"guest",plate:i.Plate,period:this.Period,right:this.Right,dayregion:l.DayRegion,minsimilar:i.Minsimilar,sampledate:n,samplevalue:s},type:"post",dataType:"json",async:!0,success:function(t){r&&r.Close(),a.RecvKLineMatchData(t,l)},error:function(t,e,a){console.warn("[KLineChartContainer::RequestKLineMatch] failed",t,e,a),r&&r.Close()}})},this.RecvKLineMatchData=function(t,e){Fr.Chart.Log("[KLineChartContainer::RecvKLineMatchData] recv",t,e);var a=[];for(var i in t.match){var r=t.match[i];if(r.symbol!=e.Stock.Symbol)for(var n in r.data){var s=r.data[n],o={Symbol:r.symbol,Name:r.name,Similar:s.similar,Start:s.start,End:s.end};a.push(o)}}if(a.sort(function(t,e){return e.Similar-t.Similar}),Fr.Chart.Log("[KLineChartContainer::RecvKLineMatchData] filterData",a),this.mapEvent.has(Nr.RECV_KLINE_MATCH)){var r=this.mapEvent.get(Nr.RECV_KLINE_MATCH),t={Sample:e,Match:a,Source:t};r.Callback(r,t,this)}else{var h=new Di(this.Frame.ChartBorder.UIElement.parentNode),l={data:{Chart:this,MatchData:a,Sample:e,Source:t}};h.DoModal(l)}},this.UpdataChartInfo=function(){var t=null;if(0==this.Period){t=new _r.default;for(var e in this.ChartInfo){var a=this.ChartInfo[e].Data;for(var i in a){var r=a[i];t.has(r.Date.toString())?t.get(r.Date.toString()).Data.push(r):t.set(r.Date.toString(),{Data:new Array(r)})}}}else if(Z.IsDayPeriod(this.Period,!1)){t=new _r.default;var n=this.ChartPaint[0].Data;if(n&&n.Data&&n.Data.length>0){var s=n.Data[0],o=[];for(var e in this.ChartInfo){var h=this.ChartInfo[e];for(var i in h.Data){var r=h.Data[i];r.Date>=s.Date&&o.push(r)}}o.sort(function(t,e){return t.Date-e.Date});for(var e=0;e<n.Data.length;){var l=n.Data[e];if(o.length<=0)break;var h=o[0];l.Date<h.Date?++e:(t.has(l.Date.toString())?t.get(l.Date.toString()).Data.push(h):t.set(l.Date.toString(),{Data:new Array(h)}),o.shift())}}}this.ChartPaint[0].InfoData=t},this.UpdateWindowIndex=function(t){var e=new Z;if(e.Data=this.SourceData.Data,e.Period=this.Period,e.Right=this.Right,this.IsApiPeriod);else{if(e.Right>0){var a=e.GetRightData(e.Right,{AlgorithmType:this.RightFormula});e.Data=a}if(Z.IsDayPeriod(e.Period,!1)||Z.IsMinutePeriod(e.Period,!1)){var i=e.GetPeriodData(e.Period);e.Data=i}}if("function"==typeof this.WindowIndex[t].ExecuteScript){var r=this.ChartPaint[0].Data;this.WindowIndex[t].ExecuteScript(this,t,r)}else this.WindowIndex[t].BindData(this,t,e);this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.GetOverlayIndexByIdentify=function(t){for(var e=0;e<this.Frame.SubFrame.length;++e){var a=this.Frame.SubFrame[e];if(he.IsNonEmptyArray(a.OverlayIndex))for(var i=0;i<a.OverlayIndex.length;++i){var r=a.OverlayIndex[i];if(r.Identify===t)return{OverlayItem:r,WindowIndex:e}}}return null},this.UpdateOverlayIndex=function(t){var e=this.GetOverlayIndexByIdentify(t);if(null==e)return void console.warn("[KLineChartContainer::UpdateOverlayIndex] can't find overlay index. [identify="+t+"]");if(this.ChartPaint[0]){var a=this.ChartPaint[0].Data;a&&this.BindOverlayIndexData(e.OverlayItem,e.WindowIndex,a)}},this.ChangeWindowIndexParam=function(t){this.WindowIndex[t].Index[0].Param+=1,this.WindowIndex[t].Index[1].Param+=1,this.UpdateWindowIndex(t)},this.OnDoubleClick=function(t,e,a){if(this.EnableYDrag&&(this.EnableYDrag.Left||this.EnableYDrag.Right)&&this.Frame&&this.Frame.PtInFrameY){var i=c(),t=(a.clientX-this.UIElement.getBoundingClientRect().left)*i,e=(a.clientY-this.UIElement.getBoundingClientRect().top)*i,r=this.Frame.PtInFrameY(t,e);r&&r.Index>=0&&this.CancelZoomUpDownFrameY(r)}if(this.EnableZoomIndexWindow){var n=this.Frame.PtInFrame(t,e);if(Fr.Chart.Log("[KLineChartContainer::OnDoubleClick] frameId",n),n>=this.Frame.ZoomStartWindowIndex&&this.ZoomIndexWindow(n,{X:t,Y:e}))return this.Frame.SetSizeChage(!0),this.Draw(),!0}var s=null;if(this.mapEvent.has(Nr.DBCLICK_KLINE)&&(s=this.mapEvent.get(Nr.DBCLICK_KLINE)),this.MinuteDialog||s){var o=new Q;if(this.PtInChartPaintTooltip(t,e,o)&&o.Data){if(s){null!=this.ClickChartTimer&&(clearTimeout(this.ClickChartTimer),this.ClickChartTimer=null);var h={Tooltip:o,Stock:{Symbol:this.Symbol,Name:this.Name}};s.Callback(s,h,this)}this.MinuteDialog&&(a.data={Chart:this,Tooltip:o},this.MinuteDialog.DoModal(a))}}},this.CancelAutoUpdate=function(){"number"==typeof this.AutoUpdateTimer&&(clearTimeout(this.AutoUpdateTimer),this.AutoUpdateTimer=void 0)},this.AutoUpdate=function(t){if(this.CancelAutoUpdate(),this.IsAutoUpdate&&this.Symbol){var e=this,a=an.GetMarketStatus(this.Symbol);if(0!=a&&3!=a){var i=this.AutoUpdateFrequency;1==a?this.AutoUpdateTimer=setTimeout(function(){e.AutoUpdate()},i):2==a&&(this.AutoUpdateTimer=setTimeout(function(){Z.IsDayPeriod(e.Period,!0)?e.RequestRealtimeData():Z.IsMinutePeriod(e.Period,!0)||Z.IsSecondPeriod(e.Period)?e.RequestMinuteRealtimeData():Z.IsTickPeriod(e.Period)&&e.RequestTickRealtimeData()},i))}}},this.GetMaxMinPageSize=function(){var t={},e=this.Frame.ChartBorder.GetWidth(),a=Ur[Ur.length-1][0]+Ur[Ur.length-1][1];return t.Max=parseInt(e/a)-2,a=Ur[0][0]+Ur[0][1],t.Min=parseInt(e/a)-2,Fr.Chart.Log("[KLineChartContainer::GetMaxMinPageSize] Max="+t.Max+" Min="+t.Min),t},this.GetChartStatus=function(){var t=this.Frame.SubFrame[0].Frame;if(!t)return null;var e=t.Data;if(!e)return null;var a={KLine:{},Zoom:{}};return a.KLine.Count=e.Data.length,a.KLine.Offset=e.DataOffset,a.KLine.PageSize=t.XPointCount,a.Zoom.Index=t.ZoomIndex,a.Zoom.Max=Ur.length,a},this.DragDownloadData=function(){var t=null;if(!(t=this.Frame.Data?this.Frame.SubFrame[0].Frame.Data:this.Frame.Data))return!1;if(!(t.DataOffset>0))if(Z.IsMinutePeriod(this.Period,!0)||Z.IsSecondPeriod(this.Period)){if(Fr.Chart.Log("[KLineChartContainer.DragDownloadData] Minute:[Enable="+this.DragDownload.Minute.Enable+", IsEnd="+this.DragDownload.Minute.IsEnd+", Status="+this.DragDownload.Minute.Status+", Period="+this.Period+"]"),!this.DragDownload.Minute.Enable)return;if(this.DragDownload.Minute.IsEnd)return;if(0!=this.DragDownload.Minute.Status)return;this.RequestDragMinuteData()}else if(Z.IsDayPeriod(this.Period,!0)){if(Fr.Chart.Log("[KLineChartContainer.DragDownloadData] Day:[Enable="+this.DragDownload.Minute.Enable+", IsEnd="+this.DragDownload.Minute.IsEnd+", Status="+this.DragDownload.Minute.Status+"]"),!this.DragDownload.Day.Enable)return;if(this.DragDownload.Day.IsEnd)return;if(0!=this.DragDownload.Day.Status)return;this.RequestDragDayData()}else if(Z.IsTickPeriod(this.Period)){if(Fr.Chart.Log("[KLineChartContainer.DragDownloadData] Tick:[Enable="+this.DragDownload.Tick.Enable+", IsEnd="+this.DragDownload.Tick.IsEnd+", Status="+this.DragDownload.Tick.Status+"]"),!this.DragDownload.Tick.Enable)return;if(this.DragDownload.Tick.IsEnd)return;if(0!=this.DragDownload.Tick.Status)return;this.RequestDragTickData()}},this.RequestDragTickData=function(){Fr.Chart.Log("[KLineChartContainer.RequestDragTickData] not finished.")},this.RequestDragMinuteData=function(){var t=this;this.AutoUpdateEvent(!1,"KLineChartContainer::RequestDragMinuteData"),this.CancelAutoUpdate();var e=this.DragDownload.Minute;e.Status=1;var a=this.SourceData.Data[0],i={field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,enddate:a.Date,endtime:a.Time,count:t.MaxRequestMinuteDayCount,first:{date:a.Date,time:a.Time}};if(he.IsNonEmptyArray(this.OverlayChartPaint)){i.overlay=[];for(var r=0;r<this.OverlayChartPaint.length;++r){var s=this.OverlayChartPaint[r];i.overlay.push({symbol:s.Symbol})}}if(this.NetworkFilter){var o={Name:"KLineChartContainer::RequestDragMinuteData",Explain:"拖拽分钟|秒K线数据下载",Request:{Url:this.DragMinuteKLineApiUrl,Type:"POST",Data:i,Period:this.Period,Right:this.Right},DragDownload:e,Self:this,PreventDefault:!1};if(this.NetworkFilter(o,function(a){t.RecvDragMinuteData(a),e.Status=0,t.AutoUpdateEvent(!0,"KLineChartContainer::RequestDragMinuteData"),t.AutoUpdate()}),1==o.PreventDefault)return}n.HttpRequest({url:this.DragMinuteKLineApiUrl,data:i,type:"post",dataType:"json",async:!0,success:function(a){t.RecvDragMinuteData(a),e.Status=0,t.AutoUpdateEvent(!0,"KLineChartContainer::RequestDragMinuteData"),t.AutoUpdate()}})},this.RecvDragMinuteData=function(t){var e=_a.JsonDataToMinuteHistoryData(t);if(!e||e.length<=0)return void(this.DragDownload.Minute.IsEnd=!0);for(var a=this.GetHistoryDataCount(),i=this.SourceData.Data[0],r=null,n=e.length-1;n>=0;--n){var s=e[n];if(i.Date>s.Date||i.Date==s.Date&&i.Time>s.Time){r=n;break}if(i.Date==s.Date&&i.Time==s.Time){i.YClose=s.YClose,r=n-1;break}}if(!(null==r&&r<0)){for(var n=0;n<e.length&&n<=r;++n){var s=e[n];this.SourceData.Data.splice(n,0,s)}var o=new Z;if(o.Data=this.SourceData.Data,o.Period=this.Period,o.Right=this.Right,o.DataType=this.SourceData.DataType,o.Symbol=this.Symbol,!this.IsApiPeriod&&(Z.IsDayPeriod(o.Period,!1)||Z.IsMinutePeriod(o.Period,!1))){var h=o.GetPeriodData(o.Period);o.Data=h}this.UpdateMainData(o,a),this.UpdateOverlayDragMinuteData(t),this.BindInstructionIndexData(o);for(var n=0;n<this.Frame.SubFrame.length;++n)this.BindIndexData(n,o);this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.UpdateChartDrawXValue(),this.Draw(),this.BindAllOverlayIndexData(o)}},this.UpdateOverlayDragMinuteData=function(t){if(he.IsNonEmptyArray(this.OverlayChartPaint)){var e=t.overlay;if(he.IsNonEmptyArray(e))for(var a=0;a<this.OverlayChartPaint.length;++a){var i=this.OverlayChartPaint[a];if(i.Symbol&&(i.MainData&&i.Status==Kr.STATUS_FINISHED_ID)){for(var r=null,n=0;n<e.length;++n){var s=e[n];if(s.symbol==i.Symbol){r=s;break}}if(r){for(var o=_a.JsonDataToMinuteHistoryData(r),h=i.SourceData,l=h.Data[0],u=null,n=o.length-1;n>=0;--n){var c=o[n];if(l.Date>c.Date){u=n;break}if(l.Date==c.Date&&l.Time>c.Time){u=n;break}if(l.Date==c.Date&&l.Time==c.Time){l.YClose=c.YClose,u=n-1;break}}if(!(null==u&&u<0)){for(var n=0;n<o.length&&n<=u;++n){var c=o[n];h.Data.splice(n,0,c)}var d=new Z;d.Data=h.Data,d.Period=this.Period,d.Right=this.Right,d.DataType=0;var f=this.SourceData.GetOverlayMinuteData(d.Data,this.IsApiPeriod);if(d.Data=f,Z.IsMinutePeriod(d.Period,!1)&&!this.IsApiPeriod){var m=d.GetPeriodData(d.Period);d.Data=m}i.Data=d}}}}}},this.RequestDragDayData=function(){var t=this;this.AutoUpdateEvent(!1,"KLineChartContainer::RequestDragDayData"),this.CancelAutoUpdate();var e=this.DragDownload.Day;e.Status=1;var a=this.SourceData.Data[0],i={field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,enddate:a.Date,count:t.MaxReqeustDataCount,first:{date:a.Date}};if(he.IsNonEmptyArray(this.OverlayChartPaint)){i.overlay=[];for(var r=0;r<this.OverlayChartPaint.length;++r){var s=this.OverlayChartPaint[r];i.overlay.push({symbol:s.Symbol})}}if(this.NetworkFilter){var o={Name:"KLineChartContainer::RequestDragDayData",Explain:"拖拽日K数据下载",Request:{Url:this.DragKLineApiUrl,Type:"POST",Data:i,Period:this.Period,Right:this.Right},DragDownload:e,Self:this,PreventDefault:!1};if(this.NetworkFilter(o,function(a){t.RecvDragDayData(a),e.Status=0,t.AutoUpdateEvent(!0,"KLineChartContainer::RequestDragDayData"),t.AutoUpdate()}),1==o.PreventDefault)return}n.HttpRequest({url:this.DragKLineApiUrl,data:i,type:"post",dataType:"json",async:!0,success:function(a){t.RecvDragDayData(a),e.Status=0,t.AutoUpdateEvent(!0,"KLineChartContainer::RequestDragDayData"),t.AutoUpdate()}})},this.RecvDragDayData=function(t){var e=_a.JsonDataToHistoryData(t);if(!e||e.length<=0)return this.DragDownload.Day.IsEnd=!0,void Fr.Chart.Log("[KLineChartContainer.RecvDragDayData] "+this.Symbol+" data end.");for(var a=this.GetHistoryDataCount(),i=this.SourceData.Data[0],r=null,n=e.length-1;n>=0;--n){var s=e[n];if(i.Date>s.Date){r=n;break}if(i.Date==s.Date){i.YClose=s.YClose,r=n-1;break}}if(!(null==r&&r<0)){for(var n=0;n<e.length&&n<=r;++n){var s=e[n];this.SourceData.Data.splice(n,0,s)}var o=new Z;if(o.Data=this.SourceData.Data,o.Period=this.Period,o.Right=this.Right,o.DataType=this.SourceData.DataType,o.Symbol=this.Symbol,!this.IsApiPeriod&&(Z.IsDayPeriod(o.Period,!1)||Z.IsMinutePeriod(o.Period,!1))){var h=o.GetPeriodData(o.Period);o.Data=h}this.UpdateMainData(o,a),this.UpdateOverlayDragDayData(t),this.BindInstructionIndexData(o);for(var n=0;n<this.Frame.SubFrame.length;++n)this.BindIndexData(n,o);this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.UpdateChartDrawXValue(),this.Draw(),this.ReqeustKLineInfoData({FunctionName:"RecvDragDayData",StartDate:i.Date}),this.BindAllOverlayIndexData(o)}},this.UpdateOverlayDragDayData=function(t){if(he.IsNonEmptyArray(this.OverlayChartPaint)){var e=t.overlay;if(he.IsNonEmptyArray(e))for(var a=0;a<this.OverlayChartPaint.length;++a){var i=this.OverlayChartPaint[a];if(i.Symbol&&(i.MainData&&i.Status==Kr.STATUS_FINISHED_ID)){for(var r=null,n=0;n<e.length;++n){var s=e[n];if(s.symbol==i.Symbol){r=s;break}}if(r){for(var o=_a.JsonDataToHistoryData(r),h=i.SourceData,l=h.Data[0],u=null,n=o.length-1;n>=0;--n){var c=o[n];if(l.Date>c.Date){u=n;break}if(l.Date==c.Date){l.YClose=c.YClose,u=n-1;break}}if(!(null==u&&u<0)){for(var n=0;n<o.length&&n<=u;++n){var c=o[n];h.Data.splice(n,0,c)}var d=new Z;if(d.Data=h.Data,d.Period=this.Period,d.Right=this.Right,d.DataType=0,d.Right>0&&an.IsSHSZStockA(r.symbol)&&!this.IsApiPeriod){var f=d.GetRightData(d.Right,{AlgorithmType:this.RightFormula});d.Data=f}var m=this.SourceData.GetOverlayData(d.Data,this.IsApiPeriod);if(d.Data=m,Z.IsDayPeriod(d.Period,!1)&&!this.IsApiPeriod){var C=d.GetPeriodData(d.Period);d.Data=C}i.Data=d}}}}}},this.SetCustomVerical=function(t,e){if(this.Frame&&!(t>=this.Frame.SubFrame.length)){var a=this.Frame.SubFrame[t];a.Frame&&(a.Frame.CustomVerticalInfo=e)}},this.OnSize=function(){if(this.Frame&&this.Frame.OnSize){var t=this.Frame.OnSize();this.Frame.SetSizeChage(!0),t.Changed&&(this.UpdataDataoffset(),this.UpdatePointByCursorIndex(2),this.UpdateFrameMaxMin()),this.Draw()}}}function ba(t){this.newMethod=u,this.newMethod(t),delete this.newMethod,this.ClassName="MinuteChartContainer",this.WindowIndex=new Array,this.Symbol,this.Name,this.SourceData,this.IndexBindData,this.IsAutoUpdate=!0,this.AutoUpdateFrequency=3e4,this.AutoUpdateTimer,this.TradeDate=0,this.DayCount=1,this.DayData,this.LimitPrice,this.IsShowBeforeData=!1,this.BeforeOpenData=null,this.IsBeforeData=!1,this.IsShowAfterData=!1,this.AfterCloseData=null,this.IsAfterData=!1,this.ExtendWidth={Left:120,Right:120},this.IsShowLead=!0,this.IsShowMultiDayBeforeData=!1,this.MultiDayBeforeOpenData=null,this.IsShowMultiDayAfterData=!1,this.MultiDayAfterCloseData=null,this.MultiDayExtendWidth={Left:20,Right:20},this.ChartDrawStorage=new Sa,this.ChartDrawStorageCache=null,this.MinuteApiUrl=$r.Domain+"/API/Stock",this.HistoryMinuteApiUrl=$r.Domain+"/API/StockMinuteData",this.ColorLineData,this.EnableSelectRect=!1,this.SelectRectDialog=null,this.CorssCursorIndex={DayIndex:-1,DataIndex:-1,Point:{X:-1,Y:-1},Type:-1},this.EnableNewIndex=!1,this.SetCallCationDataBorder=function(t){if(t){var e={Left:t.Left?this.ExtendWidth.Left:0,Right:t.Right?this.ExtendWidth.Right:0};if(this.Frame.SetExtendWidth(e),t.MultiDay){var a=t.MultiDay,i={Left:a.Left?this.MultiDayExtendWidth.Left:0,Right:a.Right?this.MultiDayExtendWidth.Right:0};this.Frame.SetMultiDayMinuteWidth(i)}}},this.ReloadChartPaint=function(t){for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a&&(a.ReloadResource&&a.ReloadResource(t),0==e?"Minute-Line"==a.Name&&(a.Color=$r.Minute.PriceColor,a.AreaColor=$r.Minute.AreaPriceColor):1==e?"Minute-Average-Line"==a.Name&&(a.Color=$r.Minute.AvPriceColor):2==e&&"Minute-Vol-Bar"==a.Name&&(a.Color=$r.Minute.VolBarColor))}},this.StopAutoUpdate=function(){this.CancelAutoUpdate(),this.IsAutoUpdate&&(this.IsAutoUpdate=!1)},this.ClickFrameButton=function(t){t.ID==Rr.CLOSE_BEFOREOPEN_ID&&this.ShowCallAuctionData({Left:!1,Right:!1,MultiDay:{Left:!1,Right:!1}})},this.OnDragMode_One=function(e,a){var i=this.MouseDrag,r=e.X,n=e.Y;if(this.RectSelectDrag&&this.RectSelectDrag.Index>=0){if(r<5)return;var s={X:a.clientX,Y:a.clientY,PointIndex:this.RectSelectDrag.Index,Name:"MoveRectSelectLine"};this.MoveRectSelectPoint(s)&&(i.LastMove.X=a.clientX,this.Draw())}else{if(r<5&&n<5)return;if(!this.EnableSelectRect)return;this.UIElement.style.cursor="default";var o=i.Click.X-t.getBoundingClientRect().left,h=i.Click.Y-t.getBoundingClientRect().top,l=a.clientX-t.getBoundingClientRect().left,u=a.clientY-t.getBoundingClientRect().top;this.ShowSelectRect(o,h,l,u),i.LastMove.X=a.clientX,i.LastMove.Y=a.clientY}},this.OnMinuteSelectRectMouseUp=function(e){var a=this.MouseDrag;a.LastMove.X=e.clientX,a.LastMove.Y=e.clientY;var i=new T,r=c();if(i.XStart=(a.Click.X-t.getBoundingClientRect().left)*r,i.YStart=(a.Click.Y-t.getBoundingClientRect().top)*r,i.XEnd=(a.LastMove.X-t.getBoundingClientRect().left)*r,i.YEnd=(a.LastMove.Y-t.getBoundingClientRect().top)*r,i.JSChartContainer=this,i.Stock={Symbol:this.Symbol,Name:this.Name},this.EnableSelectRect&&!this.BorderDrag&&this.GetSelectRectData(i)){var n=this.GetEventCallback(Nr.ON_SELECT_RECT),s=this.GetRectSelectPaint(),o=!0;if(n&&n.Callback){var h={X:a.LastMove.X-t.getBoundingClientRect().left,Y:a.LastMove.Y-t.getBoundingClientRect().top,SelectData:i,RectSelectPaint:s};n.Callback(n,h,this),o=!1}o&&this.SelectRectDialog?(e.data={Chart:this,X:a.LastMove.X-t.getBoundingClientRect().left,Y:a.LastMove.Y-t.getBoundingClientRect().top,SelectData:i,RectSelectPaint:s},this.SelectRectDialog.DoModal(e)):(this.HideSelectRect(),this.UpdateSelectRect(i.Start,i.End))}else this.TryClickPaintEvent(Nr.ON_CLICKUP_CHART_PAINT,this.ClickDownPoint,e),this.ClickEvent(e)},this.OnDragSelectRectMouseUp=function(t){var e=this.GetRectSelectPaint();if(e){var a=e.GetSelectRectData();if(a){var i=c(),r=this.ChartCorssCursor,n=r.LastPoint.X/i,s=r.LastPoint.Y/i,o=!0,h=this.GetEventCallback(Nr.ON_DRAG_SELECT_RECT_MOUSEUP);if(h){var l={X:n,Y:s,SelectData:a,RectSelectPaint:e};h.Callback(h,l,this),o=!1}o&&this.SelectRectDialog&&(t.data={Chart:this,X:n,Y:s,SelectData:a,RectSelectPaint:e},this.SelectRectDialog.DoModal(t))}}},this.UpdateSelectRect=function(t,e){if(this.SourceData&&this.SourceData.Data){var a=this.GetRectSelectPaint();if(a){var i=this.SourceData;if(i&&he.IsNonEmptyArray(i.Data)){var r=i.Data.length,n=i.Data[t];e>=r&&(e=r-1);var s=i.Data[e];Fr.Chart.Log("[MinuteChartContainer::UpdateSelectRect]",n,s),a.SetPoint(n,{Index:0}),a.SetPoint(s,{Index:1}),this.Draw()}}}},this.MoveRectSelectPoint=function(e){var a=this.GetRectSelectPaint();if(!a)return!1;if(!this.SourceData||!this.SourceData.Data)return!1;var i=this.SourceData;if(!this.Frame.SubFrame[0])return!1;var r=this.Frame.SubFrame[0].Frame,n=c(),s=(e.X-t.getBoundingClientRect().left)*n,o=r.GetXData(s);o=parseInt(o.toFixed(0));var h=o+i.DataOffset;h>=i.Data.length&&(h=i.Data.length-1);var l=i.Data[h];if(Fr.Chart.Log("[MinuteChartContainer::MoveRectSelectPoint] point, item",e.PointIndex,l),!a.SetPoint(l,{Index:e.PointIndex}))return!1;var u=this.GetEventCallback(Nr.ON_DRAG_SELECT_RECT);if(u){var d=a.GetSelectRectData(),f={X:e.X,Y:e.Y,SelectData:d,RectSelectPaint:a};u.Callback(u,f,this)}return!0},this.GetLastCursorIndex=function(t){if(1==t.DataType)for(var e=t.Data.length-1;e>=0;--e){var a=t.Data[e];if(a&&a.DayItem&&a.DayItem.Data)return t.IndexData.DayIndex=0,t.IndexData.DataIndex=a.DayItem.Data.length-1,void(t.IndexData.Type=a.Type)}else if(2==t.DataType)for(var e=t.Data.length-1;e>=0;--e)for(var i=t.Data[e],r=i.length-1;r>=0;--r){var a=i[r];if(a&&a.DayItem&&a.DayItem.Data)return t.IndexData.DayIndex=e,t.IndexData.DataIndex=a.DayItem.Data.length-1,void(t.IndexData.Type=a.Type)}},this.GetFirstCursorIndex=function(t){if(1==t.DataType)for(var e=0;e<t.Data.length;++e){var a=t.Data[e];if(a&&a.DayItem&&a.DayItem.Data)return t.IndexData.DayIndex=0,t.IndexData.DataIndex=0,void(t.IndexData.Type=a.Type)}else if(2==t.DataType)for(var e=0;e<t.Data.length;++e)for(var i=t.Data[e],r=0;r<i.length;++r){var a=i[r];if(a&&a.DayItem&&a.DayItem.Data)return t.IndexData.DayIndex=e,t.IndexData.DataIndex=0,void(t.IndexData.Type=a.Type)}},this.MoveCorssCursorIndex=function(t){if(!this.EnableNewIndex)return!1;if(!this.Frame.SubFrame[0]||!this.Frame.SubFrame[0].Frame)return!1;var e=this.Frame.SubFrame[0].Frame;if(1==this.CorssCursorIndex.Type||2==this.CorssCursorIndex.Type||3==this.CorssCursorIndex.Type||-1==this.CorssCursorIndex.Type){var a=[],i=null;this.BeforeOpenData&&this.IsShowBeforeData&&(i=this.BeforeOpenData),a.push({DayItem:i,Type:2});var i=null;this.SourceData&&(i=this.SourceData),a.push({DayItem:i,Type:1});var i=null;this.AfterCloseData&&this.IsShowAfterData&&(i=this.AfterCloseData),a.push({DayItem:i,Type:3});var r={DataType:1,Data:a,IndexData:this.CorssCursorIndex,Point:{X:null,Y:null}},n=1;if(t.IsMoveLeft){if(this.CorssCursorIndex.DayIndex<0&&this.CorssCursorIndex.DataIndex<0&&(this.GetLastCursorIndex(r),n=0),e.MoveXIndexLeft(n,r)){this.LastPoint.X=r.Point.X,this.LastPoint.Y=r.Point.Y,1==this.CorssCursorIndex.Type&&(this.CursorIndex=this.CorssCursorIndex.CursorIndex);var t={ParentFunction:"MoveCorssCursorIndex",Point:{X:r.Point.X,Y:r.Point.Y},IsPhone:!1,ClientPos:this.CorssCursorIndex.Type};this.DrawDynamicInfo(t)}}else if(this.CorssCursorIndex.DayIndex<0&&this.CorssCursorIndex.DataIndex<0&&(this.GetFirstCursorIndex(r),n=0),e.MoveXIndexRight(n,r)){this.LastPoint.X=r.Point.X,this.LastPoint.Y=r.Point.Y,1==this.CorssCursorIndex.Type&&(this.CursorIndex=this.CorssCursorIndex.CursorIndex);var t={ParentFunction:"MoveCorssCursorIndex",Point:{X:r.Point.X,Y:r.Point.Y},IsPhone:!1,ClientPos:this.CorssCursorIndex.Type};this.DrawDynamicInfo(t)}}else if(10==this.CorssCursorIndex.Type||20==this.CorssCursorIndex.Type||30==this.CorssCursorIndex.Type||-2==this.CorssCursorIndex.Type){for(var a=[],s=0;s<this.DayData.length;++s){var o=[],i=null;this.MultiDayBeforeOpenData&&this.IsShowMultiDayBeforeData&&(i=this.MultiDayBeforeOpenData[s]),o.push({DayItem:i,Type:20});var i=null;this.DayData&&(i=this.DayData[this.DayData.length-1-s]),o.push({DayItem:i,Type:10});var i=null;this.MultiDayAfterCloseData&&this.IsShowMultiDayAfterData&&(i=this.MultiDayAfterCloseData[s]),o.push({DayItem:i,Type:30}),a.push(o)}var r={DataType:2,Data:a,IndexData:this.CorssCursorIndex,Point:{X:null,Y:null}},n=1;if(t.IsMoveLeft){if(this.CorssCursorIndex.DayIndex<0&&this.CorssCursorIndex.DataIndex<0&&(this.GetLastCursorIndex(r),n=0),e.MoveXIndexLeft(n,r)){this.LastPoint.X=r.Point.X,this.LastPoint.Y=r.Point.Y,10==this.CorssCursorIndex.Type&&(this.CursorIndex=this.CorssCursorIndex.CursorIndex);var t={ParentFunction:"MoveCorssCursorIndex",Point:{X:r.Point.X,Y:r.Point.Y},IsPhone:!1,ClientPos:null};10==this.CorssCursorIndex.Type?t.ClientPos=1:20==this.CorssCursorIndex.Type?t.ClientPos=this.CorssCursorIndex.DayIndex+200:30==this.CorssCursorIndex.Type&&(t.ClientPos=this.CorssCursorIndex.DayIndex+300),this.DrawDynamicInfo(t)}}else if(this.CorssCursorIndex.DayIndex<0&&this.CorssCursorIndex.DataIndex<0&&(this.GetFirstCursorIndex(r),n=0),e.MoveXIndexRight(n,r)){this.LastPoint.X=r.Point.X,this.LastPoint.Y=r.Point.Y,10==this.CorssCursorIndex.Type&&(this.CursorIndex=this.CorssCursorIndex.CursorIndex);var t={ParentFunction:"MoveCorssCursorIndex",Point:{X:r.Point.X,Y:r.Point.Y},IsPhone:!1,ClientPos:null};10==this.CorssCursorIndex.Type?t.ClientPos=1:20==this.CorssCursorIndex.Type?t.ClientPos=this.CorssCursorIndex.DayIndex+200:30==this.CorssCursorIndex.Type&&(t.ClientPos=this.CorssCursorIndex.DayIndex+300),this.DrawDynamicInfo(t)}}},this.SetCorssCursorIndex=function(t){if(this.EnableNewIndex&&(Fr.Chart.Log("[MinuteChartContainer::SetCorssCursorIndex] option ",t),"OnMouseMove"==t.ParentFunction)){this.CorssCursorIndex.Point.X=t.Point.X,this.CorssCursorIndex.Point.Y=t.Point.Y;var e=this.PtInClient_V2(t.Point.X,t.Point.Y);if(Fr.Chart.Log("[MinuteChartContainer::SetCorssCursorIndex] clientPos ",e),e<=0)return void(this.CorssCursorIndex={DayIndex:-1,DataIndex:-1,Point:{X:-1,Y:-1},Type:e});if(!this.Frame.SubFrame[0]||!this.Frame.SubFrame[0].Frame)return void(this.CorssCursorIndex={DayIndex:-1,DataIndex:-1,Point:{X:-1,Y:-1},Type:-1});var a=this.Frame.SubFrame[0].Frame;if(1==e||2==e||3==e){if(this.CorssCursorIndex.DayIndex=0,this.CorssCursorIndex.Type=e,2==e)a.GetLeftExtendXValidData(t.Point.X,{Data:this.BeforeOpenData,IndexData:this.CorssCursorIndex});else if(3==e)a.GetRightExtendXValidData(t.Point.X,{Data:this.AfterCloseData,IndexData:this.CorssCursorIndex});else if(1==e){var i=a.GetXData(t.Point.X);this.CorssCursorIndex.DataIndex=parseInt(i.toFixed(0))}}else if(e>=100&&e<=199){this.CorssCursorIndex.DayIndex=e-100,this.CorssCursorIndex.Type=10;var i=a.GetXData(t.Point.X),r=parseInt(i.toFixed(0));this.CorssCursorIndex.DataIndex=r%a.MinuteCount}else e>=200&&e<=299?(this.CorssCursorIndex.DayIndex=e-200,this.CorssCursorIndex.Type=20,a.GetLeftExtendXValidData(t.Point.X,{Data:this.MultiDayBeforeOpenData,IndexData:this.CorssCursorIndex})):e>=300&&e<=399&&(this.CorssCursorIndex.DayIndex=e-300,this.CorssCursorIndex.Type=30,a.GetRightExtendXValidData(t.Point.X,{Data:this.MultiDayAfterOpenData,IndexData:this.CorssCursorIndex}));this.LastPoint.X=this.CorssCursorIndex.Point.X,t.Point.X=this.CorssCursorIndex.Point.X}},this.PtInClient_V2=function(t,e){if(this.Canvas.beginPath(),!0===this.Frame.IsHScreen){var a=this.Frame.ChartBorder.GetHScreenBorder();this.Canvas.rect(a.Left,a.TopEx,a.Right-a.Left,a.BottomEx-a.TopEx)}else{var a=this.Frame.ChartBorder.GetBorder();if(a.DayBorder){for(var i=0;i<a.DayBorder.length;++i){var r=a.DayBorder[i];if(this.Canvas.beginPath(),this.Canvas.rect(r.LeftEx,a.TopEx,r.RightEx-r.LeftEx,a.BottomEx-a.TopEx),this.Canvas.isPointInPath(t,e))return 100+i;if(this.Canvas.beginPath(),this.Canvas.rect(r.Left,a.TopEx,r.LeftEx-r.Left,a.BottomEx-a.TopEx),this.Canvas.isPointInPath(t,e))return 200+i;if(this.Canvas.beginPath(),this.Canvas.rect(r.RightEx,a.TopEx,r.Right-r.RightEx,a.BottomEx-a.TopEx),this.Canvas.isPointInPath(t,e))return 300+i}return-2}this.Canvas.rect(a.LeftEx,a.Top,a.RightEx-a.LeftEx,a.Bottom-a.Top)}return this.Canvas.isPointInPath(t,e)?1:this.Frame.ChartBorder.LeftExtendWidth>10&&(this.Canvas.beginPath(),!0===this.Frame.IsHScreen?this.Canvas.rect(a.Left,a.Top,a.Right-a.Left,a.TopEx-a.Top):this.Canvas.rect(a.Left,a.Top,a.LeftEx-a.Left,a.Bottom-a.Top),this.Canvas.isPointInPath(t,e))?2:this.Frame.ChartBorder.RightExtendWidth>10&&(this.Canvas.beginPath(),!0===this.Frame.IsHScreen?this.Canvas.rect(a.Left,a.BottomEx,a.Right-a.Left,a.Bottom-a.BottomEx):this.Canvas.rect(a.RightEx,a.Top,a.Right-a.RightEx,a.Bottom-a.Top),this.Canvas.isPointInPath(t,e))?3:-1},this.OnTouchStart=function(e){if(0!=this.DragMode&&(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash)&&(this.IsOnTouch=!0,this.TouchDrawCount=0,this.PhonePinch=null,this.StopDragTimer(),0==this.EnableScrollUpDown&&e.preventDefault(),this.IsPhoneDragging(e))){var a={Click:{},LastMove:{}},i=this.GetToucheData(e,this.IsForceLandscape);a.Click.X=i[0].clientX,a.Click.Y=i[0].clientY,a.LastMove.X=i[0].clientX,a.LastMove.Y=i[0].clientY;var r=this,n=function(){if(!0===r.ChartCorssCursor.IsShow){var i=c(),n=a.Click.X-t.getBoundingClientRect().left*i,s=a.Click.Y-t.getBoundingClientRect().top*i;r.OnMouseMove(n,s,e)}};if(this.ChartDrawOption.IsLockScreen){if(this.MouseDrag=a,this.SelectChartDrawPicture&&(this.SelectChartDrawPicture.IsSelected=!1),this.SelectChartDrawPicture=null,this.CurrentChartDrawPicture){return 2==this.CurrentChartDrawPicture.Status?this.SetChartDrawPictureThirdPoint(a.Click.X,a.Click.Y,!0):(this.SetChartDrawPictureFirstPoint(a.Click.X,a.Click.Y,!0),this.FinishChartDrawPicturePoint()&&this.DrawDynamicInfo({Corss:!1,Tooltip:!1})),void(e.cancelable&&e.preventDefault())}var s={};c();if(s.X=i[0].clientX-t.getBoundingClientRect().left,s.Y=i[0].clientY-t.getBoundingClientRect().top,this.GetChartDrawPictureByPoint(s)){s.ChartDrawPicture.Status=20,s.ChartDrawPicture.ValueToPoint(),s.ChartDrawPicture.MovePointIndex=s.PointIndex,s.ChartDrawPicture.IsSelected=!0,this.CurrentChartDrawPicture=s.ChartDrawPicture,this.SelectChartDrawPicture=s.ChartDrawPicture;var o=this.GetEventCallback(Nr.ON_CLICK_DRAWPICTURE);if(o&&o.Callback){var h={DrawPicture:s.ChartDrawPicture};o.Callback(o,h,this)}return void(e.cancelable&&e.preventDefault())}}else 1==this.EnableScrollUpDown&&(this.DragTimer=setTimeout(function(){if(a.Click.X==a.LastMove.X&&a.Click.Y==a.LastMove.Y){r.MouseDrag;r.MouseDrag=null,n(),r.PreventTouchEvent(e)}},800)),this.MouseDrag=a,this.PhoneTouchInfo={Start:{X:i[0].clientX,Y:i[0].clientY},End:{X:i[0].clientX,Y:i[0].clientY}},this.SelectChartDrawPicture=null,0==this.EnableScrollUpDown&&n();this.EnableZoomIndexWindow&&(this.PhoneDBClick.AddTouchStart(i[0].clientX,i[0].clientY,Date.now()),Fr.Chart.Log("[MinuteChartContainer::OnTouchStart] PhoneDBClick ",this.PhoneDBClick)),this.TouchEvent({EventID:Nr.ON_PHONE_TOUCH,FunctionName:"OnTouchStart"},e)}},this.OnTouchMove=function(e){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var a=this.GetToucheData(e,this.IsForceLandscape);if(this.IsPhoneDragging(e)){var i=this.MouseDrag;if(null==i){var r=c(),n=a[0].clientX-t.getBoundingClientRect().left*r,s=a[0].clientY-t.getBoundingClientRect().top*r;this.OnMouseMove(n,s,e)}else{var o=this.GetMoveAngle(i.LastMove,{X:a[0].clientX,Y:a[0].clientY}),h=Math.abs(i.LastMove.X-a[0].clientX),l=Math.abs(i.LastMove.Y-a[0].clientY);if(h=parseInt(h),this.CurrentChartDrawPicture){var u=this.CurrentChartDrawPicture;if(1==u.Status||2==u.Status){if(h<5&&l<5)return;this.SetChartDrawPictureSecondPoint(a[0].clientX,a[0].clientY,!0)&&this.DrawDynamicInfo()}else if(3==u.Status)this.SetChartDrawPictureThirdPoint(a[0].clientX,a[0].clientY,!0)&&this.DrawDynamicInfo();else if(20==u.Status){if(h<5&&l<5)return;this.MoveChartDrawPicture(a[0].clientX-i.LastMove.X,a[0].clientY-i.LastMove.Y,!0)&&this.DrawDynamicInfo()}i.LastMove.X=a[0].clientX,i.LastMove.Y=a[0].clientY}else{if((l>0&&h<=3||o<=this.TouchMoveMinAngle)&&1==this.EnableScrollUpDown)return void this.StopDragTimer();this.PreventTouchEvent(e),this.MouseDrag=null;var r=c(),n=a[0].clientX-t.getBoundingClientRect().left*r,s=a[0].clientY-t.getBoundingClientRect().top*r;this.OnMouseMove(n,s,e)}}this.PhoneTouchInfo&&(this.PhoneTouchInfo.End.X=a[0].clientX,this.PhoneTouchInfo.End.Y=a[0].clientY)}0==this.EnableScrollUpDown?e.preventDefault():null==i?this.PreventTouchEvent(e):this.StopDragTimer()}},this.OnTouchEnd=function(t){if(Fr.Chart.Log("[MinuteChartContainer::OnTouchEnd]",t),!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){if(this.CurrentChartDrawPicture){var e=this.CurrentChartDrawPicture;2==e.Status||1==e.Status||3==e.Status?(e.PointStatus=e.Status,this.FinishChartDrawPicturePoint()?this.DrawDynamicInfo():!1):20==e.Status&&this.FinishMoveChartDrawPicture()&&this.DrawDynamicInfo()}if(this.EnableZoomIndexWindow){var a=Date.now();this.PhoneDBClick.AddTouchEnd(a),this.PhoneDBClick.IsVaildDBClick()&&(this.OnTouchDBClick(this.PhoneDBClick.Start),this.PhoneDBClick.Clear())}this.IsOnTouch=!1,this.StopDragTimer(),this.TouchEvent({EventID:Nr.ON_PHONE_TOUCH,FunctionName:"OnTouchEnd"},t),this.OnTouchFinished(),this.TouchDrawCount=0}},this.OnKeyDown=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){switch(t.keyCode?t.keyCode:t.which){case 37:if(this.EnableNewIndex)this.MoveCorssCursorIndex({IsMoveLeft:!0});else if(this.CursorIndex=parseInt(this.CursorIndex),this.CursorIndex<=.99999){if(!this.DataMoveLeft())break;this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw()}else--this.CursorIndex,this.UpdatePointByCursorIndex(),this.DrawDynamicInfo();break;case 39:if(this.EnableNewIndex)this.MoveCorssCursorIndex({IsMoveLeft:!1});else{var e=0;if(e=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount,this.CursorIndex=parseInt(this.CursorIndex),this.CursorIndex+1>=e){if(!this.DataMoveRight())break;this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw()}else{var a=null;if(!(a=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data))break;if(this.CursorIndex+a.DataOffset+1>=a.Data.length)break;++this.CursorIndex,this.UpdatePointByCursorIndex(),this.DrawDynamicInfo()}}break;case 46:if(!this.SelectChartDrawPicture)break;var i=this.SelectChartDrawPicture;Fr.Chart.Log(i,"drawPicturedrawPicturedrawPicture"),this.SelectChartDrawPicture=null,this.ClearChartDrawPicture(i);break;case 32:this.OnMarkRectSelect(t);break;default:return}t.preventDefault?t.preventDefault():t.returnValue=!1}},this.OnMarkRectSelect=function(t){var e=this.ChartCorssCursor;if(e&&0!=e.Status&&he.IsNumber(e.CursorIndex)&&this.SourceData&&this.SourceData.Data){var a=this.GetRectSelectPaint();if(a){var i=e.CursorIndex;Fr.Chart.Log("[MinuteChartContainer::OnMarkRectSelect] dataIndex",i);var r=this.SourceData;i=parseInt(i.toFixed(0));var n=i+r.DataOffset;n>=r.Data.length&&(n=r.Data.length-1);var s=r.Data[n];if(Fr.Chart.Log("[MinuteChartContainer::OnMarkRectSelect] item",s),this.SetRectSelectData(s)){if(2==a.GetPointCount()){var o=a.GetSelectRectData(),h=this.GetEventCallback(Nr.ON_KEYDOWN_SELECT_RECT),l=c();if(h&&h.Callback){var u={X:e.LastPoint.X/l,Y:e.LastPoint.Y/l,SelectData:o,RectSelectPaint:a};h.Callback(h,u,this)}this.SelectRectDialog&&(t.data={Chart:this,X:e.LastPoint.X/l,Y:e.LastPoint.Y/l,SelectData:o,RectSelectPaint:a},this.SelectRectDialog.DoModal(t))}this.Draw()}}}},this.OnRightMenu=function(t,e,a){if(this.RightMenu){var i=this.Frame.PtInFrame(t,e);a.data={Chart:this,FrameID:i},this.RightMenu.DoModal(a)}var r=this.GetEventCallback(Nr.ON_CONTEXT_MENU);if(r){var i=this.Frame.PtInFrame(t,e),n={X:t,Y:e,Event:a,FrameID:i};r.Callback(r,n,this)}},this.OnWheel=function(t){Fr.Chart.Log("[MinuteChartContainer::OnWheel]",t)},this.OnDoubleClick=function(t,e,a){if(Fr.Chart.Log("[MinuteChartContainer::OnDoubleClick]",a),null!=this.ClickChartTimer&&(clearTimeout(this.ClickChartTimer),this.ClickChartTimer=null),this.DBClickEvent(a),this.EnableZoomIndexWindow){var i=this.Frame.PtInFrame(t,e);Fr.Chart.Log("[MinuteChartContainer::OnDoubleClick] frameId",i),i>=this.Frame.ZoomStartWindowIndex&&this.ZoomIndexWindow(i,{X:t,Y:e})&&(this.Frame.SetSizeChage(!0),this.Draw())}},this.DBClickEvent=function(e){var a=this.GetEventCallback(Nr.ON_DBCLICK);if(!a||!a.Callback)return!1;var i=c(),r=(e.clientX-t.getBoundingClientRect().left)*i,n=(e.clientY-t.getBoundingClientRect().top)*i,s={X:e.clientX,Y:e.clientY,FrameID:-1,ClientPos:-1},o=this.PtInClient(r,n);if(s.ClientPos=o,o>0){var h={},l=this.Frame.GetYData(n,h);if(he.IsNumber(h.FrameID)&&h.FrameID>=0){var u=this.Frame.GetXData(r);s.FrameID=h.FrameID,s.Data={X:u,Y:l}}}return a.Callback(a,s,this),!0},this.UpdatePointByCursorIndex=function(){this.LastPoint.X=this.Frame.GetXFromIndex(this.CursorIndex);var t=this.CursorIndex;t=parseInt(t.toFixed(0));var e=this.Frame.SourceData;if(!(e.DataOffset+t>=e.Data.length)){var a=e.Data[e.DataOffset+t],i=null;i=a.Before?a.Before.Close:a.Close,this.LastPoint.Y=this.Frame.GetYFromData(i)}},this.Create=function(t,e){var a=this;this.UIElement.JSChartContainer=this,this.ChartCorssCursor=new De,this.ChartCorssCursor.PtInClient=function(t,e){return a.PtInClient(t,e)},this.ChartCorssCursor.Canvas=this.Canvas,this.ChartCorssCursor.StringFormatX=new Ie,this.ChartCorssCursor.StringFormatY=new Te,this.ChartCorssCursor.StringFormatY.LanguageID=this.LanguageID,this.ChartCorssCursor.CallAcutionXOperator=new pe,this.ChartSplashPaint=new ge,this.ChartSplashPaint.Canvas=this.Canvas,this.ChartSplashPaint.HQChart=this,this.Frame=new Y,this.Frame.ChartBorder=new L,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=25,this.Frame.ChartBorder.TitleHeight=0,this.Frame.ChartBorder.Left=50,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.Frame.GetExtendChartRightWidth=function(){return a.GetExtendChartRightWidth()},this.Frame.ZoomStartWindowIndex=2,this.ChartCorssCursor.Frame=this.Frame,this.ChartSplashPaint.Frame=this.Frame,this.CreateChildWindow(t),this.CreateMainKLine(),this.CreateExtendChart("RectSelectPaint");for(var i in this.Frame.SubFrame){var r=new Pe;r.Frame=this.Frame.SubFrame[i].Frame,r.Canvas=this.Canvas,r.LanguageID=this.LanguageID,r.GetEventCallback=function(t){return a.GetEventCallback(t)},this.TitlePaint.push(r)}this.ChartCorssCursor.StringFormatX.Frame=this.Frame.SubFrame[0].Frame,this.ChartCorssCursor.StringFormatY.Frame=this.Frame,this.ChartCorssCursor.CallAcutionXOperator&&(this.ChartCorssCursor.CallAcutionXOperator.Frame=this.Frame.SubFrame[0].Frame);var n=!0,s=!0;e&&(!1===e.KeyDown&&(n=!1,Fr.Chart.Log("[MinuteChartContainer::Create] not register keydown event.")),!1===e.Wheel&&(s=!1,Fr.Chart.Log("[MinuteChartContainer::Create] not register wheel event."))),n&&this.UIElement.addEventListener("keydown",function(t){a.OnKeyDown(t)},!0),s&&this.UIElement.addEventListener("wheel",function(t){a.OnWheel(t)},!0)},this.CreateChildWindow=function(t){for(var e=this,a=0;a<t;++a){var i=new L;i.UIElement=this.UIElement;var r=new w;r.Canvas=this.Canvas,r.ChartBorder=i,r.Identify=a,a<2&&(r.ChartBorder.TitleHeight=0),r.XPointCount=243,a>=2&&(this.ModifyIndexDialog&&(r.ModifyIndexEvent=this.ModifyIndexDialog.DoModal),this.ChangeIndexDialog&&(r.ChangeIndexEvent=this.ChangeIndexDialog.DoModal));var n=[9,8,7,6,5,4,3,2,1];r.HorizontalMax=n[0],r.HorizontalMin=n[n.length-1],0==a?(r.YSplitOperator=new de,r.YSplitOperator.FrameSplitData=this.FrameSplitData.get("price"),r.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)}):(r.YSplitOperator=new ue,r.YSplitOperator.LanguageID=this.LanguageID,r.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),r.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)}),r.YSplitOperator.Frame=r,r.YSplitOperator.ChartBorder=i,r.XSplitOperator=new fe,r.XSplitOperator.Frame=r,r.XSplitOperator.ChartBorder=i,r.XSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},a!=t-1&&(r.XSplitOperator.ShowText=!1),r.XSplitOperator.Operator();for(var s in n)r.HorizontalInfo[s]=new I,r.HorizontalInfo[s].Value=n[s],0==a&&s==r.HorizontalMin||(r.HorizontalInfo[s].Message[1]=n[s].toString(),r.HorizontalInfo[s].Font="14px 微软雅黑");var o=new k;o.Frame=r,o.Height=0==a?20:10,this.Frame.SubFrame[a]=o}},this.CreateSubFrameItem=function(t){var e=this,a=new L;a.UIElement=this.UIElement;var i=new w;i.Canvas=this.Canvas,i.ChartBorder=a,i.Identify=t,i.XPointCount=243,t>=2&&(this.ModifyIndexDialog&&(i.ModifyIndexEvent=this.ModifyIndexDialog.DoModal),this.ChangeIndexDialog&&(i.ChangeIndexEvent=this.ChangeIndexDialog.DoModal));var r=[9,8,7,6,5,4,3,2,1];i.HorizontalMax=r[0],i.HorizontalMin=r[r.length-1],i.YSplitOperator=new ue,i.YSplitOperator.LanguageID=this.LanguageID,i.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),i.YSplitOperator.Frame=i,i.YSplitOperator.ChartBorder=a,i.XSplitOperator=new fe,i.XSplitOperator.Frame=i,i.XSplitOperator.ChartBorder=a,i.XSplitOperator.ShowText=!1,i.XSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},i.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},i.XSplitOperator.Symbol=this.Symbol,this.DayCount>1&&(i.XSplitOperator.DayCount=this.DayData.length,i.XSplitOperator.DayData=this.DayData,i.DayCount=this.DayData.length);var n=this.Frame.SubFrame[0].Frame.XPointCount;i.XPointCount=n,i.Data=this.ChartPaint[0].Data;for(var s in r)i.HorizontalInfo[s]=new I,i.HorizontalInfo[s].Value=r[s],i.HorizontalInfo[s].Message[1]=r[s].toString(),i.HorizontalInfo[s].Font="14px 微软雅黑";var o=new k;return o.Frame=i,o.Height=10,o},this.UpdateXShowText=function(){for(var t=!0,e=this.Frame.SubFrame.length-1;e>=0;--e){var a=this.Frame.SubFrame[e].Frame,i=this.Frame.SubFrame[e];t?(a.XSplitOperator.ShowText=!0,i.Height>0&&(t=!1)):a.XSplitOperator.ShowText=!1}},this.DeleteIndexPaint=function(t){var e=new Array;for(var a in this.ChartPaint){var i=this.ChartPaint[a];0!=a&&i.ChartFrame==this.Frame.SubFrame[t].Frame||e.push(i)}this.Frame.SubFrame[t].Frame.YSpecificMaxMin=null,this.Frame.SubFrame[t].Frame.IsLocked=!1,this.ChartPaint=e;var r=t+1;this.TitlePaint[r].Data=[],this.TitlePaint[r].Title=null},this.CreateStockInfo=function(){this.ExtendChartPaint[0]=new $t,this.ExtendChartPaint[0].Canvas=this.Canvas,this.ExtendChartPaint[0].ChartBorder=this.Frame.ChartBorder,this.ExtendChartPaint[0].ChartFrame=this.Frame,this.Frame.ChartBorder.Right=300},this.CreateMainKLine=function(){var t=this,e=new It;e.Canvas=this.Canvas,e.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,e.ChartFrame=this.Frame.SubFrame[0].Frame,e.Name="Minute-Line",e.Color=$r.Minute.PriceColor,e.AreaColor=$r.Minute.AreaPriceColor,e.GetEventCallback=function(e){return t.GetEventCallback(e)},this.ChartPaint[0]=e;var a=new It;a.Canvas=this.Canvas,a.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,a.ChartFrame=this.Frame.SubFrame[0].Frame,a.Name="Minute-Average-Line",a.Color=$r.Minute.AvPriceColor,a.IsDrawArea=!1,this.ChartPaint[1]=a;var i=new rt;i.Color=$r.Minute.VolBarColor,i.Canvas=this.Canvas,i.ChartBorder=this.Frame.SubFrame[1].Frame.ChartBorder,i.ChartFrame=this.Frame.SubFrame[1].Frame,i.Name="Minute-Vol-Bar",this.ChartPaint[2]=i,this.TitlePaint[0]=new Ne,this.TitlePaint[0].Frame=this.Frame.SubFrame[0].Frame,this.TitlePaint[0].Canvas=this.Canvas,this.TitlePaint[0].OverlayChartPaint=this.OverlayChartPaint,this.TitlePaint[0].LanguageID=this.LanguageID,this.TitlePaint[0].CallAcutionXOperator=new pe,this.TitlePaint[0].CallAcutionXOperator.Frame=this.Frame.SubFrame[0].Frame},this.ChangeScriptIndex=function(t,e,a){this.DeleteIndexPaint(t),this.WindowIndex[t]=new zi(e.Name,e.Script,e.Args,e);var i=this.SourceData;this.BindIndexData(t,i),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.ChangeIndex=function(t,e,a){if(!(this.Frame.SubFrame.length<3)){var i=new o,r=i.Get(e);if(r){t<2&&(t=2),t>=this.Frame.SubFrame.length&&(t=2);var n={Name:r.Name,Script:r.Script,Args:r.Args,ID:e,KLineType:r.KLineType,YSpecificMaxMin:r.YSpecificMaxMin,YSplitScale:r.YSplitScale,FloatPrecision:r.FloatPrecision,Condition:r.Condition,StringFormat:r.StringFormat,OutName:r.OutName};return a&&(a.FloatPrecision>=0&&(n.FloatPrecision=a.FloatPrecision),a.StringFormat>0&&(n.StringFormat=a.StringFormat),a.Args&&(n.Args=a.Args)),this.ChangeScriptIndex(t,n,a)}}},this.ChangeIndexWindowCount=function(t){var e=this;if(!(t<2)&&this.Frame.SubFrame.length!=t){var a=this.Frame.SubFrame.length;if(a>t){for(var i=a-1;i>=t;--i){this.DeleteIndexPaint(i);var r=this.Frame.SubFrame[i].Frame;r.ClearToolbar&&r.ClearToolbar()}this.Frame.SubFrame.splice(t,a-t),this.WindowIndex.splice(t,a-t)}else{for(var i=a;i<t;++i){var n=this.CreateSubFrameItem(i);this.Frame.SubFrame[i]=n;var s=new Pe;s.Frame=this.Frame.SubFrame[i].Frame,s.Canvas=this.Canvas,s.LanguageID=this.LanguageID,s.GetEventCallback=function(t){return e.GetEventCallback(t)},this.TitlePaint[i+1]=s}for(var h=["RSI","MACD","DMA","DMI","KDJ","WR"],l=new o,i=a;i<t;++i){var u=h[i%h.length],c=l.Get(u);this.WindowIndex[i]=new zi(c.Name,c.Script,c.Args,c);var d=this.SourceData;this.BindIndexData(i,d)}for(var i=0;i<this.Frame.SubFrame.length;++i){var r=this.Frame.SubFrame[i].Frame;i==this.Frame.SubFrame.length-1?r.XSplitOperator.ShowText=!0:r.XSplitOperator.ShowText=!1}this.UpdataDataoffset()}this.UpdateXShowText(),this.Frame.SetSizeChage(!0),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw()}},this.RemoveIndexWindow=function(t){if(Fr.Chart.Log("[MinuteChartContainer::RemoveIndexWindow] remove id",t),!(t<2)&&this.Frame.SubFrame&&!(t>=this.Frame.SubFrame.length)){this.Frame.SubFrame[t].Frame;this.DeleteIndexPaint(t),this.Frame.SubFrame[t].Frame.ClearToolbar(),this.Frame.SubFrame.splice(t,1),this.WindowIndex.splice(t,1),this.TitlePaint.splice(t+1,1);for(var e=0;e<this.Frame.SubFrame.length;++e){var a=this.Frame.SubFrame[e].Frame;e==this.Frame.SubFrame.length-1?a.XSplitOperator.ShowText=!0:a.XSplitOperator.ShowText=!1,a.Identify=e}this.Frame.SetSizeChage(!0),this.UpdateFrameMaxMin(),this.ResetFrameXYSplit(),this.Draw()}},this.AutoUpdateEvent=function(t,e){var a=t?Nr.RECV_START_AUTOUPDATE:Nr.RECV_STOP_AUTOUPDATE;if(this.mapEvent.has(a)){var i=this,r=this.mapEvent.get(a),n={Stock:{Symbol:this.Symbol,Name:this.Name,DayCount:this.DayCount},Explain:e};t&&(n.Callback=function(t){i.RecvMinuteData(t)}),r.Callback(r,n,this)}},this.ChangeSymbol=function(t){this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"MinuteChartContainer::ChangeSymbol"),this.Symbol=t,this.ResetOverlaySymbolStatus(),this.ReloadChartDrawPicture(),t?(this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.EnableSplash(!0),this.Draw(),this.RequestData()):this.DrawEmpty()},this.ChangeDayCount=function(t){t<0||t>10||(this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"MinuteChartContainer::ChangeDayCount"),this.DayCount=t,this.DayCount>1?this.ChartDrawPicture=[]:this.ReloadChartDrawPicture(),this.ResetOverlaySymbolStatus(),this.RequestData())},this.OverlaySymbol=function(t,e){for(var a in this.OverlayChartPaint){if(this.OverlayChartPaint[a].Symbol==t)return console.warn("[MinuteChartContainer::OverlaySymbol] overlay symbol="+t+" exist."),!1}var i=new xt;return i.Canvas=this.Canvas,i.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,i.ChartFrame=this.Frame.SubFrame[0].Frame,i.Name="Overlay-Minute",i.Symbol=t,e&&e.Color?i.Color=e.Color:i.Color=$r.OverlaySymbol.Color[$r.OverlaySymbol.Random%$r.OverlaySymbol.Color.length],++$r.OverlaySymbol.Random,this.ChartPaint[0].YClose>0&&this.ChartPaint[0].Data&&(i.MainData=this.ChartPaint[0].Data,i.MainYClose=this.ChartPaint[0].YClose),this.OverlayChartPaint.push(i),this.DayCount<=1?this.RequestOverlayMinuteData():this.RequestOverlayHistoryMinuteData(),!0},this.ResetOverlaySymbolStatus=function(){for(var t in this.OverlayChartPaint){this.OverlayChartPaint[t].Status=Kr.STATUS_NONE_ID}},this.DeleteOverlaySymbol=function(t){for(var e in this.OverlayChartPaint){var a=this.OverlayChartPaint[e];if(a.Symbol===t)return a.IsDelete=!0,this.OverlayChartPaint.splice(e,1),this.UpdateFrameMaxMin(),this.Draw(),!0}return console.warn("[MinuteChartContainer::DeleteOverlaySymbol] overlay symbol="+t+" not exist."),!1},this.ClearOverlaySymbol=function(){for(var t in this.OverlayChartPaint){this.OverlayChartPaint[t].IsDelete=!0}this.OverlayChartPaint=[],this.Frame.SubFrame[0].Frame.YSplitOperator.OverlayChartPaint=this.OverlayChartPaint,this.TitlePaint[0].OverlayChartPaint=this.OverlayChartPaint,this.UpdateFrameMaxMin(),this.Draw()},this.ShowBeforeData=function(t,e){this.ShowCallAuctionData({Left:t},e)},this.ShowCallAuctionData=function(t,e){if(t){var a=!1;if(he.IsBool(t.Left)&&this.IsShowBeforeData!=t.Left&&(this.IsShowBeforeData=t.Left,a=!0),he.IsBool(t.Right)&&this.IsShowAfterData!=t.Right&&(this.IsShowAfterData=t.Right,a=!0),t.MultiDay){var i=t.MultiDay;he.IsBool(i.Left)&&this.IsShowMultiDayBeforeData!=i.Left&&(this.IsShowMultiDayBeforeData=i.Left,a=!0),he.IsBool(i.Right)&&this.IsShowMultiDayAfterData!=i.Right&&(this.IsShowMultiDayAfterData=i.Right,a=!0)}if(e){if(e.BeforeOpen){var i=e.BeforeOpen;he.IsNumber(i.Left)&&this.ExtendWidth.Left!=i.Left&&(this.ExtendWidth.Left=i.Left,a=!0)}if(e.AfterClose){var i=e.AfterClose;he.IsNumber(i.Right)&&this.ExtendWidth.Right!=i.Right&&(this.ExtendWidth.Right=i.Right,a=!0)}if(e.MultiDay){var i=e.MultiDay;he.IsNumber(i.Left)&&this.MultiDayExtendWidth.Left!=i.Left&&(this.MultiDayExtendWidth.Left=i.Left,a=!0),he.IsNumber(i.Right)&&this.MultiDayExtendWidth.Right!=i.Right&&(this.MultiDayExtendWidth.Right=i.Right,a=!0)}}a&&this.RequestData()}},this.RequestData=function(){this.DayCount<=1?this.RequestMinuteData():this.RequestHistoryMinuteData()},this.ChangeDrawType=function(t){if(!(this.ChartPaint.length<=0)){if(0==t)this.ChartPaint[0].IsDrawArea=!0;else{if(1!=t)return;this.ChartPaint[0].IsDrawArea=!1}this.Draw()}},this.RequestHistoryMinuteData=function(){var t=this;if(this.IsBeforeData=!1,this.IsAfterData=!1,this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.EnableSplash(!0),this.Draw(),this.NetworkFilter){var e={Name:"MinuteChartContainer::RequestHistoryMinuteData",Explain:"多日分时数据",Request:{Url:t.HistoryMinuteApiUrl,Data:{daycount:t.DayCount,symbol:t.Symbol},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(e,function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvHistoryMinuteData(e)}),1==e.PreventDefault)return}n.HttpRequest({url:t.HistoryMinuteApiUrl,data:{symbol:t.Symbol,daycount:t.DayCount},type:"post",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvHistoryMinuteData(e)}})},this.RecvHistoryMinuteData=function(t){this.DayData=ba.JsonDataToMinuteDataArray(t),this.ColorLineData=ba.JsonDataToHistoryMinuteLineColorData(t),this.MultiDayBeforeOpenData=ba.JosnDataToBeforeOpenDataArray(t),this.MultiDayAfterCloseData=ba.JosnDataToAfterCloseDataArray(t);var e=ba.JsonDataToHistoryMinuteLastUpdateTime(t);this.CaclutateCallCationYRange(),this.Symbol=t.symbol,this.Name=t.name,this.SetCallCationDataBorder({Left:!1,Right:!1,MultiDay:{Left:this.IsShowMultiDayBeforeData,Right:this.IsShowMultiDayAfterData}}),this.CaclutateLimitPrice(this.DayData[0].YClose,t.data[0].limitprice),this.UpdateHistoryMinuteUI(e),this.RecvMinuteDataEvent(),this.RequestOverlayHistoryMinuteData(),this.BindAllOverlayIndexData(this.SourceData),this.AutoUpdateEvent(!0,"MinuteChartContainer::RequestHistoryMinuteData"),this.AutoUpdate()},this.CaclutateCallCationYRange=function(){if(he.IsNonEmptyArray(this.MultiDayAfterCloseData)){var t={Max:null,Min:null};for(var e in this.MultiDayAfterCloseData){var a=this.MultiDayAfterCloseData[e];null==t.Max?t.Max=a.VolMax:t.Max<a.VolMax&&(t.Max=a.VolMax),null==t.Min?t.Min=a.VolMin:t.Min>a.VolMin&&(t.Min=a.VolMin)}for(var e in this.MultiDayAfterCloseData){var a=this.MultiDayAfterCloseData[e];a.VolMax=t.Max,a.VolMin=t.Min}}if(he.IsNonEmptyArray(this.MultiDayBeforeOpenData)){var t={Max:null,Min:null};for(var e in this.MultiDayBeforeOpenData){var a=this.MultiDayBeforeOpenData[e];null==t.Max?t.Max=a.VolMax:t.Max<a.VolMax&&(t.Max=a.VolMax),null==t.Min?t.Min=a.VolMin:t.Min>a.VolMin&&(t.Min=a.VolMin)}for(var e in this.MultiDayBeforeOpenData){var a=this.MultiDayBeforeOpenData[e];a.VolMax=t.Max,a.VolMin=t.Min}}},this.UpdateHistoryMinuteUI=function(t){var e=this.HistoryMinuteDataToArray(this.DayData),a=new Z;a.Data=e,a.UpdateTime=t,this.SourceData=a,this.TradeDate=this.DayData[0].Date,this.Frame.SetDayCount(this.DayData.length);var i=this.Symbol.toUpperCase(),r=this.DayData[0].YClose,n=an.IsFutures(i);if(he.IsNumber(this.DayData[0].YClearing)&&n&&(r=this.DayData[0].YClearing),this.BindMainData(a,r),an.IsForeignExchange(i)&&(this.ChartPaint[1].Data=null),this.Frame.SubFrame.length>2){var s=new Z;s.Data=e;for(var o=2;o<this.Frame.SubFrame.length;++o)this.BindIndexData(o,s)}for(var h in this.Frame.SubFrame){var l=this.Frame.SubFrame[h];l.Frame.XSplitOperator.Symbol=this.Symbol,l.Frame.XSplitOperator.DayCount=this.DayData.length,l.Frame.XSplitOperator.DayData=this.DayData,l.Frame.XSplitOperator.Operator(),l.Frame.XSplitOperator.IsBeforeData=this.IsBeforeData,l.Frame.XSplitOperator.IsAfterData=this.IsAfterData,l.Frame.YSplitOperator.Symbol=this.Symbol,l.Frame.YSplitOperator.IsBeforeData=this.IsBeforeData,l.Frame.YSplitOperator.IsAfterData=this.IsAfterData;for(var u in l.OverlayIndex){var c=l.OverlayIndex[u];c.Frame.XPointCount=l.Frame.XPointCount,c.Frame.MinuteCount=l.Frame.MinuteCount}}this.ChartCorssCursor.StringFormatY.Symbol=this.Symbol,this.ChartCorssCursor.StringFormatX.Symbol=this.Symbol,this.ChartCorssCursor.StringFormatX.IsBeforeData=this.IsBeforeData,this.ChartCorssCursor.StringFormatX.IsAfterData=this.IsAfterData,this.TitlePaint[0].IsShowDate=!0,this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()},this.HistoryMinuteDataToArray=function(t){for(var e=[],a=t.length-1;a>=0;--a){var i=t[a];for(var r in i.Data)e.push(i.Data[r])}return e},this.UpdateLatestMinuteData=function(t,e){for(var a in this.DayData){var i=this.DayData[a];if(i.Date===e){i.Data=t;break}}},this.RequestMinuteData=function(){var t=this,e=["name","symbol","yclose","open","price","high","low","vol","amount","date","time","minute","minutecount"],a=this.Symbol.toUpperCase();if(an.IsFutures(a)&&(e.push("clearing"),e.push("yclearing")),this.IsBeforeData=!1,this.IsShowBeforeData&&1===this.DayCount&&an.IsSHSZStockA(t.Symbol)&&(this.IsBeforeData=!0,e.push("before")),this.IsAfterData=!1,this.IsShowAfterData&&1===this.DayCount&&an.IsSHSZStockA(t.Symbol)&&(this.IsAfterData=!0),this.NetworkFilter){var i={Before:this.IsShowBeforeData&&1===this.DayCount,After:this.IsShowAfterData&&1===this.DayCount},r={Name:"MinuteChartContainer::RequestMinuteData",Explain:"最新分时数据",Request:{Url:t.MinuteApiUrl,Data:{field:e,symbol:[t.Symbol],callcation:i},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(r,function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvMinuteData(e)}),1==r.PreventDefault)return}n.HttpRequest({url:t.MinuteApiUrl,data:{field:e,symbol:[t.Symbol],start:-1},type:"post",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvMinuteData(e)}})},this.RecvMinuteDataEvent=function(){if(this.mapEvent.has(Nr.RECV_MINUTE_DATA)){var t=this.mapEvent.get(Nr.RECV_MINUTE_DATA),e={MinuteData:this.SourceData,Stock:{Symbol:this.Symbol,Name:this.Name}};t.Callback(t,e,this)}},this.UpdateLineColorData=function(t,e){if(!this.ColorLineData)return void(this.ColorLineData=t);var a=this.ColorLineData.filter(function(t,a,i){return t.Date!=e});if(he.IsNonEmptyArray(t))for(var i in t)a.push(t[i]);this.ColorLineData=a},this.UpdateCallCationData=function(t,e){if(t&&he.IsNonEmptyArray(this.MultiDayBeforeOpenData)){var a=this.MultiDayBeforeOpenData[this.MultiDayBeforeOpenData.length-1];a.Date==t.Date&&(this.MultiDayBeforeOpenData[this.MultiDayBeforeOpenData.length-1]=t)}if(e&&he.IsNonEmptyArray(this.MultiDayAfterCloseData)){var a=this.MultiDayAfterCloseData[this.MultiDayBeforeOpenData.length-1];a.Date==e.Date&&(this.MultiDayAfterCloseData[this.MultiDayAfterCloseData.length-1]=e)}this.CaclutateCallCationYRange()},this.RecvMinuteData=function(t){if(!t)return void Fr.Chart.Warn("[MinuteChartContainer::RecvMinuteData] recv data is null");var e=ba.JsonDataToMinuteData(t),a=ba.JsonDataToMinuteLineColorData(t);this.BeforeOpenData=null,this.AfterCloseData=null;var i=ba.JsonDataToBeforeOpenData(t),r=ba.JsonDataToAfterCloseData(t),n=ba.JsonDataToMinuteLastUpdateTime(t);if(this.IsBeforeData&&(this.BeforeOpenData=i),this.IsAfterData&&(this.AfterCloseData=r),this.DayCount>1)return this.UpdateCallCationData(i,r),this.UpdateLineColorData(a,t.stock[0].date),this.UpdateLatestMinuteData(e,t.stock[0].date),this.UpdateHistoryMinuteUI(n),this.RecvMinuteDataEvent(),this.RequestOverlayMinuteData(),this.BindAllOverlayIndexData(this.SourceData),this.AutoUpdateEvent(!0,"MinuteChartContainer::RecvMinuteData"),void this.AutoUpdate();var s=new Z;s.Data=e,s.UpdateTime=n,this.ColorLineData=a,this.TradeDate=t.stock[0].date,this.Frame.SetDayCount(1),this.SourceData=s,this.Symbol=t.stock[0].symbol,this.Name=t.stock[0].name,this.SetCallCationDataBorder({Left:this.IsBeforeData,Right:this.IsAfterData,MultiDay:{Left:!1,Right:!1}});var o=t.stock[0].yclose,h=this.Symbol.toUpperCase(),l=an.IsFutures(h);t.stock[0].yclearing>0&&l&&(o=t.stock[0].yclearing),this.CaclutateLimitPrice(o,t.stock[0].limitprice);var u=null;if(t.stock[0].high>0&&t.stock[0].low>0&&(u={High:t.stock[0].high,Low:t.stock[0].low}),this.BindMainData(s,o,u),this.Frame.SubFrame.length>2){var c=new Z;c.Data=e;for(var d=2;d<this.Frame.SubFrame.length;++d)this.BindIndexData(d,c)}for(var f in this.Frame.SubFrame){var m=this.Frame.SubFrame[f];m.Frame.XSplitOperator.Symbol=this.Symbol,m.Frame.XSplitOperator.DayCount=1,m.Frame.XSplitOperator.Operator(),m.Frame.YSplitOperator.Symbol=this.Symbol;for(var C in m.OverlayIndex){var p=m.OverlayIndex[C];p.Frame.XPointCount=m.Frame.XPointCount,p.Frame.MinuteCount=m.Frame.MinuteCount}}this.ChartCorssCursor.StringFormatY.Symbol=this.Symbol,this.ChartCorssCursor.StringFormatX.Symbol=this.Symbol,an.IsSHSZ(h)&&(this.TitlePaint[0].IsShowDate=!1),1==t.stock[0].IsHistoryMinute&&(this.TitlePaint[0].IsShowDate=!0);var D=this.GetChartMinuteInfo();D&&(D.SourceData=this.SourceData),this.RecvMinuteDataEvent(),this.RequestMinuteInfoData(),this.RequestOverlayMinuteData(),this.CreateChartDrawPictureByStorage(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.BindAllOverlayIndexData(this.SourceData),this.AutoUpdateEvent(!0,"MinuteChartContainer::RecvMinuteData"),this.AutoUpdate()},this.CaclutateLimitPrice=function(t,e){if(this.LimitPrice=null,e&&e.max>0&&e.min>0)return void(this.LimitPrice={Max:e.max,Min:e.min});var a=an.GetLimitPriceRange(this.Symbol,this.Name);if(!a)return void Fr.Chart.Log("[MinuteChartContainer::CaclutateLimitPrice] "+this.Symbol+" no limit price.");t<=0||(this.LimitPrice={Max:t*(1+a.Max),Min:t*(1+a.Min)},Fr.Chart.Log("[MinuteChartContainer::CaclutateLimitPrice] "+this.Symbol+" yClose:"+t+" max:"+this.LimitPrice.Max+" min:"+this.LimitPrice.Min),this.LimitPrice.Max=parseFloat(this.LimitPrice.Max.toFixed(2)),this.LimitPrice.Min=parseFloat(this.LimitPrice.Min.toFixed(2)),Fr.Chart.Log("[MinuteChartContainer::CaclutateLimitPrice] "+this.Symbol+" tofixed(2) max:"+this.LimitPrice.Max+" min:"+this.LimitPrice.Min))},this.RequestOverlayMinuteData=function(){var t=this,e=this,a=this.TradeDate;for(var i in this.OverlayChartPaint){var r,s,o=function(){var o=t.OverlayChartPaint[i];return o.MainData&&o.MainYClose>0?o.Status!=Kr.STATUS_NONE_ID?"continue":(r=o.Symbol)?(o.Status=Kr.STATUS_REQUESTDATA_ID,t.NetworkFilter&&(s={Name:"MinuteChartContainer::RequestOverlayMinuteData",Explain:"叠加股票最新分时数据",Request:{Url:e.HistoryMinuteApiUrl,Data:{days:[a],symbol:r},Type:"POST"},Self:t,PreventDefault:!1},t.NetworkFilter(s,function(t){o.Status=Kr.STATUS_RECVDATA_ID,e.RecvOverlayMinuteData(t,o)}),1==s.PreventDefault)?"continue":void n.HttpRequest({url:e.HistoryMinuteApiUrl,data:{symbol:r,days:[a]},type:"post",dataType:"json",async:!0,success:function(t){o.Status=Kr.STATUS_RECVDATA_ID,e.RecvOverlayMinuteData(t,o)}})):{v:void 0}:"continue"}();switch(o){case"continue":continue;default:if("object"===(void 0===o?"undefined":(0,gr.default)(o)))return o.v}}},this.RecvOverlayMinuteData=function(t,e){if(!e.IsDelete){var a,i=ba.JsonDataToMinuteDataArray(t),r=null;if(this.DayCount>1){if(i.length<=0)return;var n=i[0];for(var s in e.SourceData){if(e.SourceData[s].Date==n.Date){e.SourceData[s]=n;var o=this.HistoryMinuteDataToArray(e.SourceData),r=new Z;r.Data=o,a=n.YClose;break}}if(null==r)return}else r=i.length>0?i[0]:new Z,a=r.YClose;e.Data=r,e.Title=t.name,e.Symbol=t.symbol,e.YClose=a,e.Status=Kr.STATUS_FINISHED_ID,this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}},this.RequestOverlayHistoryMinuteData=function(){var t=this,e=this,a=[];for(var i in this.DayData){var r=this.DayData[i];a.push(r.Date)}if(!(a.length<=0)){for(var i in this.OverlayChartPaint){var s,o,h=function(){var r=t.OverlayChartPaint[i];return(s=r.Symbol)?r.Status!=Kr.STATUS_NONE_ID?"continue":(r.Status=Kr.STATUS_REQUESTDATA_ID,t.NetworkFilter&&(o={Name:"MinuteChartContainer::RequestOverlayHistoryMinuteData",Explain:"叠加股票多日分时数据",Request:{Url:e.HistoryMinuteApiUrl,Data:{days:a,symbol:s},Type:"POST"},Self:t,PreventDefault:!1},t.NetworkFilter(o,function(t){r.Status=Kr.STATUS_RECVDATA_ID,e.RecvOverlayHistoryMinuteData(t,r)}),1==o.PreventDefault)?{v:void 0}:void n.HttpRequest({url:e.HistoryMinuteApiUrl,data:{symbol:s,days:a},type:"post",dataType:"json",async:!0,success:function(t){r.Status=Kr.STATUS_RECVDATA_ID,e.RecvOverlayHistoryMinuteData(t,r)}})):{v:void 0}}();switch(h){case"continue":continue;default:if("object"===(void 0===h?"undefined":(0,gr.default)(h)))return h.v}}}},this.RecvOverlayHistoryMinuteData=function(t,e){var a=ba.JsonDataToMinuteDataArray(t),i=[];for(var r in this.DayData){var n=this.DayData[r],s=!1;for(var o in a)if(n.Date==a[o].Date){i.push(a[r]),s=!0;break}if(!s){(new Z).Date=n.Date}}e.SourceData=i;var h=this.HistoryMinuteDataToArray(i),l=i[0].YClose,u=new Z;u.Data=h,e.Data=u,e.Title=t.name,e.Symbol=t.symbol,e.YClose=l,e.Status=Kr.STATUS_FINISHED_ID,this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()},this.CancelAutoUpdate=function(){"number"==typeof this.AutoUpdateTimer&&(clearTimeout(this.AutoUpdateTimer),this.AutoUpdateTimer=void 0)},this.AutoUpdate=function(){if(this.CancelAutoUpdate(),this.IsAutoUpdate&&this.Symbol){var t=this,e=an.GetMarketStatus(this.Symbol);if(0!=e&&3!=e){var a=this.AutoUpdateFrequency;1==e?this.AutoUpdateTimer=setTimeout(function(){t.AutoUpdate()},a):2==e&&(this.AutoUpdateTimer=setTimeout(function(){t.ResetOverlaySymbolStatus(),t.RequestMinuteData()},a))}}},this.BindIndexData=function(t,e){if(this.WindowIndex[t])return"function"==typeof this.WindowIndex[t].RequestData?void this.WindowIndex[t].RequestData(this,t,e):"function"==typeof this.WindowIndex[t].ExecuteScript?void this.WindowIndex[t].ExecuteScript(this,t,e):void this.WindowIndex[t].BindData(this,t,e)},this.BindMainData=function(t,e,a){var i=this.IsShowMultiDayBeforeData?this.MultiDayBeforeOpenData:null,r=this.IsShowMultiDayAfterData?this.MultiDayAfterCloseData:null,n=new Z;if(n.Data=t.GetClose(),this.ChartPaint[0].Data=n,this.ChartPaint[0].YClose=e,this.ChartPaint[0].NotSupportMessage=null,this.ChartPaint[0].IsShowLead=!1,this.ChartPaint[0].LeadData=null,this.ChartPaint[0].BeforeOpenData=this.BeforeOpenData,this.ChartPaint[0].AfterCloseData=this.AfterCloseData,this.ChartPaint[0].MultiDayBeforeOpenData=i,this.ChartPaint[0].MultiDayAfterCloseData=r,this.ChartPaint[0].ColorLineData=this.ColorLineData,this.ChartPaint[0].Source=t,an.IsSHSZIndex(this.Symbol)&&1==this.DayCount&&this.IsShowLead){var s=new Z;s.Data=t.GetLead(),this.ChartPaint[0].LeadData=s,this.ChartPaint[0].IsShowLead=!0}var o=this.Frame.SubFrame[0].Frame;o.YSplitOperator.YClose=e,o.YSplitOperator.Data=n,this.Frame.Data=this.ChartPaint[0].Data,this.Frame.SourceData=t;for(var h in this.Frame.SubFrame){var l=this.Frame.SubFrame[h].Frame;l.Data=t}n=new Z,n.Data=t.GetMinuteAvPrice(),this.ChartPaint[1].Data=n;var u=this.Symbol.toUpperCase();an.IsForeignExchange(u)?this.ChartPaint[1].Data=null:an.IsShowAvPrice&&!an.IsShowAvPrice(u)&&(this.ChartPaint[1].Data=null),o.YSplitOperator.AverageData=n,o.YSplitOperator.OverlayChartPaint=this.OverlayChartPaint,o.YSplitOperator.LimitPrice=this.LimitPrice,o.YSplitOperator.MultiDayBeforeOpenData=i,o.YSplitOperator.MultiDayAfterCloseData=r,a?(o.YSplitOperator.High=a.High,o.YSplitOperator.Low=a.Low):(o.YSplitOperator.High=null,o.YSplitOperator.Low=null),this.ChartPaint[2].Data=t,this.ChartPaint[2].YClose=e,this.ChartPaint[2].Symbol=this.Symbol,this.ChartPaint[2].BeforeOpenData=this.BeforeOpenData,this.ChartPaint[2].AfterCloseData=this.AfterCloseData,this.ChartPaint[2].MultiDayBeforeOpenData=i,this.ChartPaint[2].MultiDayAfterCloseData=r;for(var h in this.Frame.SubFrame){var l=this.Frame.SubFrame[h];l.Frame.YSplitOperator.BeforeOpenData=this.BeforeOpenData,l.Frame.YSplitOperator.IsBeforeData=this.IsBeforeData,l.Frame.YSplitOperator.AfterCloseData=this.AfterCloseData,l.Frame.YSplitOperator.IsAfterData=this.IsAfterData,l.Frame.YSplitOperator.MultiDayBeforeOpenData=i,l.Frame.YSplitOperator.MultiDayAfterCloseData=r}an.IsShowMinutePostionLine(u)?this.BindOverlayPositionData(t,e):this.ClearBindOverlayPositionData(),this.TitlePaint[0].Data=this.SourceData,this.TitlePaint[0].Symbol=this.Symbol,this.TitlePaint[0].Name=this.Name,this.TitlePaint[0].YClose=e,this.TitlePaint[0].BeforeOpenData=this.BeforeOpenData,this.TitlePaint[0].AfterCloseData=this.AfterCloseData,this.TitlePaint[0].MultiDayBeforeOpenData=this.IsShowMultiDayBeforeData?this.MultiDayBeforeOpenData:null,this.TitlePaint[0].MultiDayAfterCloseData=this.IsShowMultiDayAfterData?this.MultiDayAfterCloseData:null,this.TitlePaint[0].CallAcutionXOperator&&(this.TitlePaint[0].CallAcutionXOperator.BeforeOpenData=this.BeforeOpenData,this.TitlePaint[0].CallAcutionXOperator.AfterCloseData=this.AfterCloseData,this.TitlePaint[0].CallAcutionXOperator.MultiDayBeforeOpenData=i,this.TitlePaint[0].CallAcutionXOperator.MultiDayAfterCloseData=r),this.ChartCorssCursor&&this.ChartCorssCursor.StringFormatY&&(this.ChartCorssCursor.StringFormatY.YClose=e,this.ChartCorssCursor.StringFormatY.BeforeOpenData=this.BeforeOpenData,this.ChartCorssCursor.StringFormatY.AfterCloseData=this.AfterCloseData,this.ChartCorssCursor.StringFormatY.MultiDayBeforeOpenData=i,this.ChartCorssCursor.StringFormatY.MultiDayAfterCloseData=r,this.ChartCorssCursor.StringFormatX.Data=this.ChartPaint[0].Data,this.ChartCorssCursor.StringFormatX.BeforeOpenData=this.BeforeOpenData,this.ChartCorssCursor.StringFormatX.AfterCloseData=this.AfterCloseData,this.ChartCorssCursor.StringFormatX.MultiDayBeforeOpenData=i,this.ChartCorssCursor.StringFormatX.MultiDayAfterCloseData=r,this.ChartCorssCursor.CallAcutionXOperator&&(this.ChartCorssCursor.CallAcutionXOperator.BeforeOpenData=this.BeforeOpenData,this.ChartCorssCursor.CallAcutionXOperator.AfterCloseData=this.AfterCloseData,this.ChartCorssCursor.CallAcutionXOperator.MultiDayBeforeOpenData=i,this.ChartCorssCursor.CallAcutionXOperator.MultiDayAfterCloseData=r)),this.ExtendChartPaint[0]&&(this.ExtendChartPaint[0].Symbol=this.Symbol,this.ExtendChartPaint[0].Name=this.Name);for(var h in this.OverlayChartPaint){var l=this.OverlayChartPaint[h];l.MainData=this.ChartPaint[0].Data,l.MainYClose=e}},this.BindOverlayPositionData=function(t,e){if(!(this.Frame.SubFrame.length<2)){var a=null,i=null,r=this.Frame.SubFrame[1],n=null;for(var s in r.OverlayIndex){var o=r.OverlayIndex[s];if("Position_Line_Frame"==o.Identify){n=o;break}}if(n)a=n.ChartPaint[0],i=n.Frame;else{n=new B,n.Identify="Position_Line_Frame",i="MinuteChartContainer"==this.ClassName?new E:new A,i.Canvas=this.Canvas,i.MainFrame=r.Frame,i.ChartBorder=r.Frame.ChartBorder,n.Frame=i,i.YSplitOperator=new ue,i.YSplitOperator.LanguageID=this.LanguageID,i.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),i.YSplitOperator.Frame=i,i.YSplitOperator.ChartBorder=i.ChartBorder,i.YSplitOperator.SplitCount=r.Frame.YSplitOperator.SplitCount;var a=new st;a.Canvas=this.Canvas,a.Name="Position-Line",a.ChartBorder=i.ChartBorder,a.ChartFrame=i,a.Identify=n.Identify,a.Color=$r.Minute.PositionColor,n.ChartPaint.push(a),r.OverlayIndex.push(n),r.Frame.RightFrame=i}var h=this.Frame.SubFrame[0].Frame.XPointCount;i.XPointCount=h,r.Frame.IsShowPositionTitle=!0;var l=new Z;l.Data=t.GetPosition(),a.Data=l}},this.ClearBindOverlayPositionData=function(){if(!(this.Frame.SubFrame.length<2)){var t=this.Frame.SubFrame[1];t.Frame.RightFrame=null,t.Frame.IsShowPositionTitle=!1;for(var e in t.OverlayIndex){if("Position_Line_Frame"==t.OverlayIndex[e].Identify){t.OverlayIndex.splice(e,1);break}}}},this.AddOverlayIndex=function(t){var e=this.CreateOverlayWindowsIndex(t);if(e){var a=this.SourceData;this.BindOverlayIndexData(e,t.WindowIndex,a),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()}},this.CreateOverlayWindowsIndex=function(t){var e=t.IndexName,a=t.WindowIndex,i=null,r=null,n=null;if(t.API)i=t.API;else if(t.Script)r={Script:t.Script,ID:t.indexName,Name:t.indexName},t.Name&&(r.Name=t.Name);else{var s=new o;if(!(r=s.Get(e))&&!(n=La.Get(e)))return console.warn("[MinuteChartContainer::CreateOverlayIndex] can not find index["+e+"]"),null}var h=this.Frame.SubFrame[a];h.Interval=this.OverlayIndexFrameWidth;var l=new B;t.Identify&&(l.Identify=t.Identify);var u=null;if(u="MinuteChartContainer"==this.ClassName?new E:new A,u.Canvas=this.Canvas,u.MainFrame=h.Frame,u.ChartBorder=h.Frame.ChartBorder,!0===t.ShowRightText?u.IsShow=!0:!1===t.ShowRightText&&(u.IsShow=!1),!0===t.IsShareY&&(u.IsShareY=!0),he.IsBool(t.IsCalculateYMaxMin)&&(u.IsCalculateYMaxMin=t.IsCalculateYMaxMin),u.YSplitOperator=new ue,u.YSplitOperator.LanguageID=this.LanguageID,u.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),u.YSplitOperator.Frame=u,u.YSplitOperator.ChartBorder=u.ChartBorder,u.YSplitOperator.SplitCount=h.Frame.YSplitOperator.SplitCount,l.Frame=u,i){var c=new qi(i.Name,i.Script,i.Args,t,!0);c.OverlayIndex={IsOverlay:!0,Identify:l.Identify,WindowIndex:a,Frame:l},l.Script=c}else if(r){var d=r;t.Args&&(d.Args=t.Args);var f=new Ji(d.Name,d.Script,d.Args,d);f.OverlayIndex={IsOverlay:!0,Identify:l.Identify,WindowIndex:a,Frame:l},l.Script=f}else{var f=n.Create();f.OverlayIndex={IsOverlay:!0,Identify:l.Identify,WindowIndex:a,Frame:l},f.Create(this,a),l.Script=f}return h.OverlayIndex.push(l),l},this.DeleteOverlayWindowsIndex=function(t){this.DeleteOverlayIndex(t,null)&&(this.Frame.ResetXYSplit(!0),this.Draw())},this.BindAllOverlayIndexData=function(t){if(this.Frame&&this.Frame.SubFrame)for(var e=0;e<this.Frame.SubFrame.length;++e){var a=this.Frame.SubFrame[e];for(var i in a.OverlayIndex){var r=a.OverlayIndex[i];this.BindOverlayIndexData(r,e,t)}}},this.BindOverlayIndexData=function(t,e,a){if(t.Script)return"function"==typeof t.Script.RequestData?void t.Script.RequestData(this,e,a):"function"==typeof t.Script.ExecuteScript?void t.Script.ExecuteScript(this,e,a):void t.Script.BindData(this,e,a)},this.GetChartPaint=function(t){var e=new Array;for(var a in this.ChartPaint)if(!(a<3)){var i=this.ChartPaint[a];i.ChartFrame==this.Frame.SubFrame[t].Frame&&e.push(i)}return e},this.CreateWindowIndex=function(t){this.WindowIndex[t].Create(this,t)},this.GetIndexInfo=function(){var t=[];for(var e in this.WindowIndex){var a=this.WindowIndex[e],i={Name:a.Name};a.ID&&(i.ID=a.ID),t.push(i)}return t},this.OnTouchFinished=function(){if(!0===this.CorssCursorTouchEnd)return void this.DrawDynamicInfo()},this.CreateExtendChart=function(t,e){var a;switch(t){case"MinuteTooltip":return a=e.Create&&"function"==typeof e.Create?e.Create():new Qt,a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,e.LanguageID=this.LanguageID,a.SetOption(e),this.ExtendChartPaint.push(a),a;case"画图工具":return a=new ee,a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.Left=this.Frame.ChartBorder.Right,a.SetOption(e),this.ExtendChartPaint.push(a),this.Frame.ChartBorder.Right+=a.Width,a;default:return(a=jr.Create(t))?(a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.SetOption(e),this.ExtendChartPaint.push(a),a):null}},this.SetMinuteInfo=function(t,e){this.ChartInfo=[];for(var a in t){var i=hi.Get(t[a]);if(i){var r=i.Create();this.ChartInfo.push(r)}}1==e&&this.RequestMinuteInfoData()},this.GetChartMinuteInfo=function(){return this.ChartInfoPaint},this.CreateMinuteInfo=function(t){var e=new Lt;return e.Canvas=this.Canvas,e.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,e.ChartFrame=this.Frame.SubFrame[0].Frame,e.HQChartBorder=this.Frame.ChartBorder,e.ChartMinutePrice=this.ChartPaint[0],t&&e.SetOption&&e.SetOption(t),this.ChartInfoPaint=e,e},this.RequestMinuteInfoData=function(){if(!(this.ChartInfo.length<=0)){var t=this.GetChartMinuteInfo();t||(t=this.CreateMinuteInfo(null)),t.SourceData=this.SourceData;for(var e in this.ChartInfo)this.ChartInfo[e].RequestData(this)}},this.UpdataChartInfo=function(){var t=this.GetChartMinuteInfo();if(t){var e=new _r.default;for(var a in this.ChartInfo){var i=this.ChartInfo[a].Data;for(var r in i){var n=i[r],s=n.Date+" "+n.Time;e.has(s)?e.get(s).Data.push(n):e.set(s,{Data:new Array(n)})}}t.Data=e}},this.UpdateWindowIndex=function(t){if(!(t<2)){var e=this.SourceData;this.BindIndexData(t,e),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()}},this.CreateChartDrawPicture=function(t,e,a){var i=null,r=Re.GetDrawPictureByName(t);if(r&&(i=r.Create(),"ChartDrawPictureText"==i.ClassName&&(i.HQChart=this)),!i&&Re.MapIonFont.has(t)){var n=Re.MapIonFont.get(t);i=new Qe,i.FontOption.Family=n.Family,i.Text=n.Text,n.Color&&(i.LineColor=n.Color)}if(!i)return!1;i.Canvas=this.Canvas,i.Status=0,i.Symbol=this.Symbol,i.Period=888888888,i.Option=this.ChartDrawOption,a&&(i.FinishedCallback=a),e&&i.SetOption(e);var s=this;return i.Update=function(){s.DrawDynamicInfo()},i.GetActiveDrawPicture=function(){return s.GetActiveDrawPicture()},this.CurrentChartDrawPicture=i,Fr.Chart.Log("[MinuteChartContainer::CreateChartDrawPicture] ",t,this.CurrentChartDrawPicture),!0},this.ReloadChartDrawPicture=function(){this.ChartDrawPicture=[],this.ChartDrawStorageCache,this.ChartDrawStorage&&(this.ChartDrawStorageCache=this.ChartDrawStorage.GetDrawData({Symbol:this.Symbol,Period:888888888}))},this.CreateChartDrawPictureByStorage=function(){if(this.ChartDrawStorageCache&&!(this.ChartDrawStorageCache.length<=0)){for(var t in this.ChartDrawStorageCache){var e=this.ChartDrawStorageCache[t];if(!(e.FrameID<0||!this.Frame.SubFrame||this.Frame.SubFrame.length<e.FrameID)){var a=Re.CreateChartDrawPicture(e);a&&(a.Canvas=this.Canvas,a.Status=10,a.Frame=this.Frame.SubFrame[e.FrameID].Frame,a.UpdateXValue(),a.ValueToPoint(),"ChartDrawPictureText"===a.ClassName&&(a.IsInitialized=!0),this.ChartDrawPicture.push(a))}}this.ChartDrawStorageCache=null}},this.SetSizeChange=function(t){this.Frame.SetSizeChage(t);for(var e in this.ExtendChartPaint){this.ExtendChartPaint[e].SizeChange=t}},this.SetSizeChage=this.SetSizeChange,this.GetDataIndexByPoint=function(t){var e=this.Frame;if(this.Frame.SubFrame&&this.Frame.SubFrame.length>0&&(e=this.Frame.SubFrame[0].Frame),e){var a=e.GetXData(t);return parseInt(a.toFixed(0))}},this.GetSelectRectData=function(t){if(Math.abs(t.XStart-t.XEnd)<5)return!1;var e=this.PtInClient(t.XStart,t.YStart),a=this.PtInClient(t.XEnd,t.YEnd);t.StartClientPos=e,t.EndClientPos=a;var i=this.SourceData;if(!i)return!1;if(!he.IsNonEmptyArray(i.Data))return!1;var r=this.GetDataIndexByPoint(t.XStart),n=this.GetDataIndexByPoint(t.XEnd);if(Math.abs(r-n)<2)return!1;t.Data=i,r>n?(t.Start=n,t.End=r):(t.Start=r,t.End=n);var s=i.Data.length;return t.End>=s&&(t.End=s-1),!0},this.Super_UpdateFrameMaxMin=this.UpdateFrameMaxMin,this.UpdateFrameMaxMin=function(){if(this.Super_UpdateFrameMaxMin(),1==this.DayCount){var t=this.Frame.SubFrame[1];t.Frame&&(t.Frame.XYSplit=!0)}}}function wa(t){this.newMethod=ba,this.newMethod(t),delete this.newMethod,this.HistoryMinuteApiUrl="https://opensourcecache.zealink.com/cache/minuteday/day/",this.ClassName="HistoryMinuteChartContainer",this.CreateMainKLine=function(){var t=new It;t.Canvas=this.Canvas,t.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,t.ChartFrame=this.Frame.SubFrame[0].Frame,t.Name="Minute-Line",t.Color=$r.Minute.PriceColor,this.ChartPaint[0]=t;var e=new st;e.Canvas=this.Canvas,e.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,e.ChartFrame=this.Frame.SubFrame[0].Frame,e.Name="Minute-Average-Line",e.Color=$r.Minute.AvPriceColor,this.ChartPaint[1]=e;var e=new rt;e.Color=$r.Minute.VolBarColor,e.Canvas=this.Canvas,e.ChartBorder=this.Frame.SubFrame[1].Frame.ChartBorder,e.ChartFrame=this.Frame.SubFrame[1].Frame,e.Name="Minute-Vol-Bar",this.ChartPaint[2]=e,this.TitlePaint[0]=new Ne,this.TitlePaint[0].Frame=this.Frame.SubFrame[0].Frame,this.TitlePaint[0].Canvas=this.Canvas,this.TitlePaint[0].IsShowDate=!0},this.ChangeTradeDate=function(t){t&&(this.TradeDate=t,this.RequestData())},this.RequestData=function(){var t=new Date;1e4*t.getFullYear()+100*(t.getMonth()+1)+t.getDate()==this.TradeDate?this.RequestMinuteData():this.RequestHistoryMinuteData()},this.RequestHistoryMinuteData=function(){var t=this,e=this.HistoryMinuteApiUrl+this.TradeDate.toString()+"/"+this.Symbol+".json";n.HttpRequest({url:e,type:"get",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvHistoryMinuteData(e)},error:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvHistoryMinuteError(e)}})},this.RecvHistoryMinuteError=function(t){if(404==t.status){var e=new Z;this.SourceData=e;for(var a in this.ChartPaint)this.ChartPaint[a].Data=e,0==a&&(this.ChartPaint[a].NotSupportMessage="没有权限访问!");this.TitlePaint[0].Data=this.SourceData,this.TitlePaint[0].Symbol=this.Symbol,this.TitlePaint[0].Name=null,this.Draw()}},this.RecvHistoryMinuteData=function(t){var e=wa.JsonDataToMinuteData(t),a=new Z;if(a.Data=e,this.TradeDate=t.date,this.SourceData=a,this.Symbol=t.symbol,this.Name=t.name,this.BindMainData(a,t.day.yclose),this.Frame.SubFrame.length>2){var i=new Z;i.Data=e;for(var r=2;r<this.Frame.SubFrame.length;++r)this.BindIndexData(r,i)}this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}}function Fa(t){this.newMethod=_a,this.newMethod(t),delete this.newMethod,this.ClassName="CustomKLineChartContainer",this.CustomKLineApiUrl=$r.Domain+"/API/IndexCalculate",this.CustomStock,this.QueryDate={Start:20180101,End:20180627},this.RequestHistoryData=function(){var t=this;this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.EnableSplash(!0),this.Draw(),n.HttpRequest({url:this.CustomKLineApiUrl,data:{stock:t.CustomStock,Name:t.Symbol,date:{startdate:t.QueryDate.Start,enddate:t.QueryDate.End}},type:"post",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvHistoryData(e)}})},this.RecvHistoryData=function(t){var e=_a.JsonDataToHistoryData(t),a=new Z;a.Data=e,a.DataType=0;var i=new Z;if(i.Data=e,i.Right=this.Right,i.Period=this.Period,i.DataType=0,i.Right>0){var r=i.GetRightData(i.Right,{AlgorithmType:this.RightFormula});i.Data=r}if(Z.IsDayPeriod(this.Period,!1)){var n=a.GetPeriodData(i.Period);i.Data=n}this.SourceData=a,this.Name=t.name,this.BindMainData(i,this.PageSize);for(var s=0;s<this.Frame.SubFrame.length;++s)this.BindIndexData(s,i);this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}}function Ea(t,e){!0===e?(this.newMethod=Na,this.newMethod(t),delete this.newMethod):(this.newMethod=_a,this.newMethod(t),delete this.newMethod),this.BuySellPaint,this.TrainDataCount=300,this.TrainStartDate,this.AutoRunTimer=null,this.BuySellData=[],this.TrainCallback,this.DragMode=1,this.IsAutoUpdate=!1,this.KLineSourceData,this.TrainInfo={Start:{},End:{}},this.Super_RecvFlowCapitalData=this.RecvFlowCapitalData,this.CreateBuySellPaint=function(){var t=new Xt;t.Canvas=this.Canvas,t.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,t.ChartFrame=this.Frame.SubFrame[0].Frame,t.Name="KLine-Train-BuySell",this.ChartPaintEx[0]=t},this.GetKDataIndexByDateTime=function(t,e){if(!e||!t)return-1;for(var a=0;a<t.length;++a){var i=t[a];if(Z.IsMinutePeriod(this.Period,!0)){if(he.IsNumber(this.TrainStartDate.Time)){if(i.Date>=this.TrainStartDate.Date&&i.Time>=this.TrainStartDate.Time)return a}else if(i.Date>=this.TrainStartDate.Date)return a}else if((Z.IsDayPeriod(this.Period,!0)||Z.IsTickPeriod(this.Period))&&i.Date>=this.TrainStartDate.Date)return a}return-1},this.AfterBindMainData=function(t){this.ChartPaintEx[0]||this.CreateBuySellPaint();var e=this.ChartPaint[0].Data;this.ChartPaintEx[0].Data=e;var a=e.Data[e.Data.length-1];this.TrainInfo.LastShowData=a,this.TrainInfo.LastData=this.SourceData.Data[this.SourceData.Data.length-1],"Update"!=t&&this.UpdateTrainUICallback("开始")},this.BeforeBindMainData=function(t){if("Update"!=t){this.KLineSourceData=new Z,this.KLineSourceData.Data=this.SourceData.Data.slice(0);var e=this.SourceData.Data.length,a=e-this.TrainDataCount-20,i=this.GetKDataIndexByDateTime(this.SourceData.Data,this.TrainStartDate);i>=0&&(a=i+1,e-a<this.TrainDataCount&&(this.TrainDataCount=e-a));var r=a-1,n=this.SourceData.Data[r];this.TrainInfo.Start.Index=r,this.TrainInfo.Start.Date=n.Date,this.TrainInfo.Start.Time=n.Time,this.TrainInfo.End.Index=r,this.TrainInfo.End.Date=n.Date,this.TrainInfo.End.Time=n.Time,this.TrainInfo.LastData=n,this.SourceData.Data.length=a}},this.Run=function(t){if(!(this.AutoRunTimer||this.TrainDataCount<=0)){var e=this;this.AutoRunTimer=setInterval(function(){e.MoveNextKLineData(t)||clearInterval(e.AutoRunTimer)},1e3)}},this.MoveNextKLineData=function(t){if(this.TrainDataCount<=0)return!1;var e=1;t&&t.Step>1&&(e=t.Step);for(var a=0,i=0;i<e;++i){var r=this.TrainInfo.End.Index+1;if(r>=this.KLineSourceData.Data.length)break;var n=this.KLineSourceData.Data[r];if(this.SourceData.Data.push(n),this.TrainInfo.End.Index=r,this.TrainInfo.End.Date=n.Date,this.TrainInfo.End.Time=n.Time,--this.TrainDataCount,++a,this.TrainDataCount<=0)break}if(0==a)return!1;var s=this.Frame.GetCurrentPageSize();return he.IsNumber(s)&&(this.PageSize=s-this.RightSpaceCount),t&&t.PageSize>0&&(this.PageSize=t.PageSize),this.Update(),this.TrainDataCount<=0?(this.FinishTrainData(),this.UpdateTrainUICallback("结束"),!1):(this.UpdateTrainUICallback("训练中"),!0)},this.UpdateTrainUICallback=function(t){if(this.mapEvent.has(Nr.RECV_TRAIN_MOVE_STEP)){var e=this.mapEvent.get(Nr.RECV_TRAIN_MOVE_STEP);if(e.Callback){var a={TrainDataCount:this.TrainDataCount,BuySellData:this.BuySellData,KLine:{Start:{Index:this.TrainInfo.Start.Index,Date:this.TrainInfo.Start.Date},End:{Index:this.TrainInfo.End.Index,Date:this.TrainInfo.End.Date}},LastData:this.TrainInfo.LastData,LastShowData:this.TrainInfo.LastShowData};he.IsNumber(this.TrainInfo.Start.Time)&&(a.KLine.Start.Time=this.TrainInfo.Start.Time),he.IsNumber(this.TrainInfo.End.Time)&&(a.KLine.End.Time=this.TrainInfo.End.Time),t&&(a.Description=t),this.TrainDataCount<=0&&(a.Symbol=this.Symbol,a.Name=this.Name),e.Callback(e,a,this)}}},this.FinishTrainData=function(){Fr.Chart.Log("[KLineTrainChartContainer::FinishTrainData] trian end ")},this.Stop=function(){null!=this.AutoRunTimer&&clearInterval(this.AutoRunTimer),this.AutoRunTimer=null},this.BuyOrSell=function(t,e){if(!this.TrainInfo.LastShowData)return!1;var a=this.ChartPaintEx[0];if(!a)return!1;var i=this.ChartPaint[0].Data;if(!i||i.Data.length<=0)return!1;var r=i.Data.length-1,n={Date:this.TrainInfo.End.Date,Time:this.TrainInfo.End.Time,Price:t.Price,Vol:t.Vol,Op:0,ID:t.ID};1==t.Op&&(n.Op=1);var s=r;n.Key=s,this.BuySellData.push(n),a.AddTradeItem(n),1==e&&this.Draw()},this.RestartTrain=function(t){Fr.Chart.Log("[KLineTrainChartContainer::RestartTrain] option ",t),this.TrainInfo={Start:{},End:{}},this.BuySellData=[],this.KLineSourceData=null;var e=this.ChartPaintEx[0];e&&(e.Data=null,e.ClearTradeData()),t.Symbol&&(this.Symbol=t.Symbol),he.IsNumber(t.Period)&&(this.Period=t.Period),he.IsNumber(t.Right)&&(this.Right=t.Right),t.Train&&(t.Train.DataCount>1&&(this.TrainDataCount=t.Train.DataCount),t.Train.DateTime&&(this.TrainStartDate=t.Train.DateTime));var a=this.Symbol;this.ChangeSymbol(a)},this.RecvFlowCapitalData=function(t){if(t.stock&&1==t.stock.length){var e=t.stock[0],a=new Array;for(var i in e.stockday){var r=e.stockday[i],n=new z;n.Date=r.date;var s=r.capital;s&&(s.a>0&&(n.Value=s.a,a.push(n)))}if(Z.IsMinutePeriod(this.Period,!0)){var o=this.SourceData.GetMinuteFittingFinanceData(a);for(var h in this.SourceData.Data){var r=this.SourceData.Data[h];o[h]&&(r.FlowCapital=o[h].Value)}var l=this.ChartPaint[0].Data,u=new Z;if(u.Data=this.SourceData.Data,Z.IsMinutePeriod(l.Period,!1)){var c=u.GetPeriodData(l.Period);u.Data=c}l.Data=u.Data;var o=this.KLineSourceData.GetMinuteFittingFinanceData(a);for(var d in this.KLineSourceData.Data){var r=this.KLineSourceData.Data[d];o[d]&&(r.FlowCapital=o[d].Value)}}else{var o=this.SourceData.GetFittingFinanceData(a);for(var f in this.SourceData.Data){var r=this.SourceData.Data[f];o[f]&&(r.FlowCapital=o[f].Value)}var l=this.ChartPaint[0].Data,u=new Z;if(u.Data=this.SourceData.Data,l.Right>0){var m=u.GetRightData(l.Right,{AlgorithmType:this.RightFormula});u.Data=m}if(Z.IsDayPeriod(l.Period,!1)){var c=u.GetPeriodData(l.Period);u.Data=c}l.Data=u.Data;var o=this.KLineSourceData.GetFittingFinanceData(a);for(var C in this.KLineSourceData.Data){var r=this.KLineSourceData.Data[C];o[C]&&(r.FlowCapital=o[C].Value)}}this.FlowCapitalReady=!0;var p=!1;for(var D in this.ExtendChartPaint){var r=this.ExtendChartPaint[D];if("StockChip"==r.ClassName){p=!0;break}}p&&this.Draw()}},this.AutoUpdate()}function Aa(t,e){this.newMethod=Ea,this.newMethod(t,e),delete this.newMethod,this.IsHScreen=e,this.IsZoomLockRight=!0,this.RightSpaceCount=0,this.RecvFlowCapitalData=function(t){this.Super_RecvFlowCapitalData(t)},this.BeforeBindMainData=function(t){},this.UpdateLastDataIcon=function(){if(this.ChartPaintEx[0]){this.ChartPaintEx[0].LastDataIndex=this.TrainInfo.End.Index}},this.AfterBindMainData=function(t){if(this.ChartPaintEx[0]||(this.CreateBuySellPaint(),this.ChartPaintEx[0].LastDataDrawType=1),"Update"!=t){var e=this.ChartOperator_Temp_GetHistroyData();if(!e)return!1;var a=e.Data.length,i=a-this.TrainDataCount-20,r=this.Frame.SubFrame[0].Frame.XPointCount,n=this.GetKDataIndexByDateTime(e.Data,this.TrainStartDate);n>=0&&(i=n+1,a-i<this.TrainDataCount&&(this.TrainDataCount=a-i));var s=i-r;e.DataOffset=s;var o=i-1,h=e.Data[o];this.TrainInfo.LastShowData=h,this.TrainInfo.LastData=h,this.TrainInfo.Start.Index=o,this.TrainInfo.Start.Date=h.Date,this.TrainInfo.Start.Time=h.Time,this.TrainInfo.End.Index=o,this.TrainInfo.End.Date=h.Date,this.TrainInfo.End.Time=h.Time,this.UpdateLastDataIcon(),this.UpdateTrainUICallback("开始")}},this.Super_UpdataDataoffset=this.UpdataDataoffset,this.UpdataDataoffset=function(){this.Super_UpdataDataoffset();var t=this.ChartPaint[0].Data;this.ChartPaintEx[0].Data=t},this.MoveNextKLineData=function(t){if(this.TrainDataCount<=0)return!1;var e=this.ChartOperator_Temp_GetHistroyData();if(!e)return!1;var a=1;t&&t.Step>1&&(a=t.Step);for(var i=e.Data.length,r=0,n=0;n<a;++n){var s=this.TrainInfo.End.Index+1;if(s>=i)break;var o=e.Data[s];if(this.TrainInfo.End.Index=s,this.TrainInfo.End.Date=o.Date,this.TrainInfo.End.Time=o.Time,--this.TrainDataCount,++r,this.TrainDataCount<=0)break}if(0==r)return!1;this.TrainInfo.LastShowData=o,this.TrainInfo.LastData=o;var h=this.TrainInfo.End.Index,l=this.Frame.SubFrame[0].Frame.XPointCount,u=h-l+1;return e.DataOffset=u,this.UpdateLastDataIcon(),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw(),this.TrainDataCount<=0?(this.FinishTrainData(),this.UpdateTrainUICallback("结束"),!1):(this.UpdateTrainUICallback("训练中"),!0)},this.BuyOrSell=function(t,e){if(!this.TrainInfo.LastShowData)return!1;var a=this.ChartPaintEx[0];if(!a)return!1;var i=this.ChartPaint[0].Data;if(!i||i.Data.length<=0)return!1;var r=this.TrainInfo.End.Index,n={Date:this.TrainInfo.End.Date,Time:this.TrainInfo.End.Time,Price:t.Price,Vol:t.Vol,Op:0,ID:t.ID};1==t.Op&&(n.Op=1);var s=r;n.Key=s,this.BuySellData.push(n),a.AddTradeItem(n),1==e&&this.Draw()},this.DataMove=function(t,e){var a=this.GetMoveOneStepWidth(),i=t;if((t=parseInt(t/a))<=0)return!1;var r=this.ChartOperator_Temp_GetHistroyData();if(!r)return!1;var n=0;if(!(n=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount))return!1;if(this.Frame.SubFrame&&this.Frame.SubFrame.length>0&&this.Frame.SubFrame[0].Frame){var s=this.Frame.SubFrame[0].Frame;(s.DataWidth<=1||s.DistanceWidth<=1)&&he.IsPlusNumber(this.StepPixel)&&(t=i*this.StepPixel)}if(e){if(this.RightSpaceCount>0){if(n+r.DataOffset>=r.Data.length+this.RightSpaceCount-1)return!1;r.DataOffset+=t,r.DataOffset+n>=r.Data.length+this.RightSpaceCount&&(r.DataOffset=r.Data.length-(n-this.RightSpaceCount))}else{var o=this.TrainInfo.End.Index+1;if(n+r.DataOffset>=o)return!1;r.DataOffset+=t,r.DataOffset+n>=o&&(r.DataOffset=o-n)}return!0}return!(r.DataOffset<=0)&&(r.DataOffset-=t,r.DataOffset<0&&(r.DataOffset=0),!0)},this.DataMoveRight=function(){var t=this.ChartOperator_Temp_GetHistroyData();if(!t)return!1;var e=0;if(!(e=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount))return!1;var a=this.TrainInfo.End.Index+1;return!(e+t.DataOffset>=a)&&(++t.DataOffset,!0)}}function Na(t){this.newMethod=_a,this.newMethod(t),delete this.newMethod,this.ClassName="KLineChartHScreenContainer",this.OnMouseMove=function(t,e,a,i){this.LastPoint.X=t,this.LastPoint.Y=e,this.CursorIndex=this.Frame.GetXData(e);var r={ParentFunction:"OnMouseMove",Point:{X:t,Y:e},IsPhone:!0===i};this.DrawDynamicInfo(r)},t.onmousedown=function(e){if(this.JSChartContainer&&0!=this.JSChartContainer.DragMode){var a=c();if(this.JSChartContainer.TryClickLock){var i=(e.clientX-this.getBoundingClientRect().left)*a,r=(e.clientY-this.getBoundingClientRect().top)*a;if(this.JSChartContainer.TryClickLock(i,r))return}var n={Click:{},LastMove:{}};n.Click.X=e.clientX,n.Click.Y=e.clientY,n.LastMove.X=e.clientX,n.LastMove.Y=e.clientY,this.JSChartContainer.MouseDrag=n,document.JSChartContainer=this.JSChartContainer,this.JSChartContainer.SelectChartDrawPicture=null,t.ondblclick=function(t){var e=t.clientX-this.getBoundingClientRect().left,a=t.clientY-this.getBoundingClientRect().top;this.JSChartContainer&&this.JSChartContainer.OnDoubleClick(e,a,t)},document.onmousemove=function(t){if(this.JSChartContainer&&(!this.JSChartContainer.ChartSplashPaint||1!=this.JSChartContainer.ChartSplashPaint.IsEnableSplash)){var e=this.JSChartContainer.MouseDrag;if(e){var a=Math.abs(e.LastMove.Y-t.clientY);if(1==this.JSChartContainer.DragMode){if(a<5)return;if(a<this.JSChartContainer.GetMoveOneStepWidth())return;var i=!0;e.LastMove.Y<t.clientY&&(i=!1),this.JSChartContainer.DataMove(a,i)&&(this.JSChartContainer.UpdataDataoffset(),this.JSChartContainer.UpdatePointByCursorIndex(),this.JSChartContainer.UpdateFrameMaxMin(),this.JSChartContainer.ResetFrameXYSplit(),this.JSChartContainer.Draw()),e.LastMove.X=t.clientX,e.LastMove.Y=t.clientY}}}},document.onmouseup=function(t){document.onmousemove=null,document.onmouseup=null,this.JSChartContainer.MouseDrag=null,this.JSChartContainer.CurrentChartDrawPicture=null,this.JSChartContainer=null}}},this.OnTouchStart=function(e){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){this.PhonePinch=null,this.IsOnTouch=!0,this.TouchDrawCount=0,this.StopDragTimer();var a=this.IsSingleTouch(e);if(e.cancelable&&e.preventDefault(),this.IsPhoneDragging(e)){if(this.TryClickLock||this.TryClickIndexTitle){var i=this.GetToucheData(e,this.IsForceLandscape),r=i[0].clientX,n=i[0].clientY,s=c();if(r-=t.getBoundingClientRect().left*s,n-=t.getBoundingClientRect().top*s,this.TryClickLock&&this.TryClickLock(r,n))return;if(this.TryClickIndexTitle&&this.TryClickIndexTitle(r,n))return}var o=!0;this.ChartDrawOption.IsLockScreen?o=!1:this.DragMode==Pr.CLICK_TOUCH_MODE_ID?1==this.TouchStatus.CorssCursorShow&&(o=!1):this.DragMode==Pr.DISABLE_DRAG_ID?o=!1:a||(o=!1);var h={Click:{},LastMove:{}},i=this.GetToucheData(e,!1);if(h.Click.X=i[0].clientX,h.Click.Y=i[0].clientY,h.LastMove.X=i[0].clientX,h.LastMove.Y=i[0].clientY,this.MouseDrag=h,this.PhoneTouchInfo={Start:{X:i[0].clientX,Y:i[0].clientY},End:{X:i[0].clientX,Y:i[0].clientY}},this.SelectChartDrawPicture&&(this.SelectChartDrawPicture.IsSelected=!1),this.SelectChartDrawPicture=null,this.CurrentChartDrawPicture){return 2==this.CurrentChartDrawPicture.Status?this.SetChartDrawPictureThirdPoint(h.Click.X,h.Click.Y,!0):(this.SetChartDrawPictureFirstPoint(h.Click.X,h.Click.Y,!0),this.FinishChartDrawPicturePoint()&&this.DrawDynamicInfo({Corss:!1,Tooltip:!1})),void(e.cancelable&&e.preventDefault())}var l={},s=c();if(l.X=i[0].clientX-t.getBoundingClientRect().left,l.Y=i[0].clientY-t.getBoundingClientRect().top,this.GetChartDrawPictureByPoint(l)){l.ChartDrawPicture.Status=20,l.ChartDrawPicture.ValueToPoint(),l.ChartDrawPicture.MovePointIndex=l.PointIndex,l.ChartDrawPicture.IsSelected=!0,this.CurrentChartDrawPicture=l.ChartDrawPicture,this.SelectChartDrawPicture=l.ChartDrawPicture;var u=this.GetEventCallback(Nr.ON_CLICK_DRAWPICTURE);if(u&&u.Callback){var d={DrawPicture:l.ChartDrawPicture};u.Callback(u,d,this)}return void(e.cancelable&&e.preventDefault())}if(o){var f=this;this.DragTimer=setTimeout(function(){if(h.Click.X==h.LastMove.X&&h.Click.Y==h.LastMove.Y){f.MouseDrag;f.MouseDrag=null,f.MoveCorssCursor(h.Click,e)}},f.PressTime)}this.ChartDrawOption.IsLockScreen?this.MouseDrag=null:this.DragMode==Pr.CLICK_TOUCH_MODE_ID||(this.DragMode==Pr.DISABLE_DRAG_ID?(this.MouseDrag=null,this.MoveCorssCursor(h.Click,e)):this.IsClickShowCorssCursor&&this.MoveCorssCursor(h.Click,e))}else if(this.IsPhonePinching(e)){var m={Start:{},Last:{}},i=this.GetToucheData(e,!1);m.Start={X:i[0].pageX,Y:i[0].pageY,X2:i[1].pageX,Y2:i[1].pageY},m.Last={X:i[0].pageX,Y:i[0].pageY,X2:i[1].pageX,Y2:i[1].pageY},this.PhonePinch=m,this.SelectChartDrawPicture=null}this.TouchEvent({EventID:Nr.ON_PHONE_TOUCH,FunctionName:"OnTouchStart"},e)}},this.OnTouchMove=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){t.cancelable&&t.preventDefault();var e=this.GetToucheData(t,!1);if(this.IsPhoneDragging(t)){var a=this.MouseDrag;if(null==a)this.ChartDrawOption.IsLockScreen||this.MoveCorssCursor({X:e[0].clientX,Y:e[0].clientY},t);else{var i=Math.abs(a.LastMove.Y-e[0].clientY),r=Math.abs(a.LastMove.X-e[0].clientX),n=this.DragMode==Pr.CLICK_TOUCH_MODE_ID&&1==this.TouchStatus.CorssCursorShow;if(this.CurrentChartDrawPicture){var s=this.CurrentChartDrawPicture;if(1==s.Status||2==s.Status){if(i<5&&r<5)return;this.SetChartDrawPictureSecondPoint(e[0].clientX,e[0].clientY,!0)&&this.DrawDynamicInfo()}else if(3==s.Status)this.SetChartDrawPictureThirdPoint(e[0].clientX,e[0].clientY,!0)&&this.DrawDynamicInfo();else if(20==s.Status){if(i<5&&r<5)return;this.MoveChartDrawPicture(e[0].clientX-a.LastMove.X,e[0].clientY-a.LastMove.Y,!0)&&this.DrawDynamicInfo()}a.LastMove.X=e[0].clientX,a.LastMove.Y=e[0].clientY}if(n){this.MouseDrag;this.MouseDrag=null,this.MoveCorssCursor(a.Click,t)}else if(1==this.DragMode||0==n){if(i<5)return;var o=this.GetMoveOneStepWidth();if(i<o)return;var h=!0;a.LastMove.Y<e[0].clientY&&(h=!1),this.DataMove(i,h)?(this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.ResetFrameXYSplit(),this.Draw(),this.OnKLinePageChange("OnTouchMove")):this.DragDownloadData&&this.DragDownloadData(),a.LastMove.X=e[0].clientX,a.LastMove.Y=e[0].clientY}}this.PhoneTouchInfo&&(this.PhoneTouchInfo.End.X=e[0].clientX,this.PhoneTouchInfo.End.Y=e[0].clientY)}else if(this.IsPhonePinching(t)){if(this.DragMode==Pr.DISABLE_DRAG_ID)return;var l=this.PhonePinch;if(!l)return;var u=Math.abs(e[0].pageX-e[1].pageX),c=Math.abs(l.Last.X-l.Last.X2),d=u-c;if(Math.abs(d)<5)return;if(d>0){var f={};if(f.Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),!this.Frame.ZoomUp(f))return;this.CursorIndex=f.Index,this.UpdatePointByCursorIndex(),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),this.OnKLinePageChange("OnTouchMove")}else{var f={};if(f.Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),!this.Frame.ZoomDown(f))return;this.CursorIndex=f.Index,this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),this.OnKLinePageChange("OnTouchMove")}l.Last={X:e[0].pageX,Y:e[0].pageY,X2:e[1].pageX,Y2:e[1].pageY}}}},this.OnTouchEnd=function(t){if(Fr.Chart.Log("[KLineChartHScreenContainer:OnTouchEnd]",t),!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){if(this.CurrentChartDrawPicture){var e=this.CurrentChartDrawPicture;2==e.Status||1==e.Status||3==e.Status?(e.PointStatus=e.Status,this.FinishChartDrawPicturePoint()?this.DrawDynamicInfo():!1):20==e.Status&&this.FinishMoveChartDrawPicture()&&this.DrawDynamicInfo()}this.IsOnTouch=!1,this.StopDragTimer(),this.TouchEvent({EventID:Nr.ON_PHONE_TOUCH,FunctionName:"OnTouchEnd"},t),this.OnTouchFinished(),this.TouchDrawCount=0}},this.Create=function(t){var e=this;this.UIElement.JSChartContainer=this,this.ChartCorssCursor=new De,this.ChartCorssCursor.Canvas=this.Canvas,this.ChartCorssCursor.StringFormatX=qr.Create("CorssCursor_XStringFormat"),this.ChartCorssCursor.StringFormatX.LanguageID=this.LanguageID,this.ChartCorssCursor.StringFormatY=qr.Create("CorssCursor_YStringFormat"),this.ChartCorssCursor.StringFormatY.LanguageID=this.LanguageID,this.ChartCorssCursor.StringFormatY.ExtendChartPaint=this.ExtendChartPaint,this.ChartSplashPaint=new ge,this.ChartSplashPaint.Canvas=this.Canvas,this.ChartSplashPaint.HQChart=this,this.Frame=new H,this.Frame.ChartBorder=new L,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartCorssCursor.Frame=this.Frame,this.ChartSplashPaint.Frame=this.Frame,this.CreateChildWindow(t),this.CreateMainKLine();for(var a in this.Frame.SubFrame){var i=new Pe;i.Frame=this.Frame.SubFrame[a].Frame,i.Canvas=this.Canvas,i.LanguageID=this.LanguageID,i.GetEventCallback=function(t){return e.GetEventCallback(t)},this.TitlePaint.push(i)}this.UIElement.addEventListener("keydown",f,!0)},this.CreateChildWindow=function(t){for(var e=this,a=0;a<t;++a){var i=new L;i.UIElement=this.UIElement;var r=new P;if(r.Canvas=this.Canvas,r.ChartBorder=i,r.Identify=a,r.RightSpaceCount=this.RightSpaceCount,this.ModifyIndexDialog&&(r.ModifyIndexEvent=this.ModifyIndexDialog.DoModal),this.ChangeIndexDialog&&(r.ChangeIndexEvent=this.ChangeIndexDialog.DoModal),r.HorizontalMax=20,r.HorizontalMin=10,0==a){r.YSplitOperator=new le,r.YSplitOperator.FrameSplitData=this.FrameSplitData.get("price"),r.YSplitOperator.FrameSplitData2=this.FrameSplitData.get("double"),r.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)};var n=c();i.TopSpace=12*n,i.BottomSpace=12*n}else r.YSplitOperator=new ue,r.YSplitOperator.LanguageID=this.LanguageID,r.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double");r.YSplitOperator.Frame=r,r.YSplitOperator.ChartBorder=i,r.XSplitOperator=new ce,r.XSplitOperator.Frame=r,r.XSplitOperator.ChartBorder=i,r.XSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},a!=t-1&&(r.XSplitOperator.ShowText=!1);for(var s=r.HorizontalMin;s<=r.HorizontalMax;s+=1)r.HorizontalInfo[s]=new I,r.HorizontalInfo[s].Value=s,0==a&&s==r.HorizontalMin||(r.HorizontalInfo[s].Message[1]=s.toString(),r.HorizontalInfo[s].Font="14px 微软雅黑");var o=new k;o.Frame=r,o.Height=0==a?20:10,this.Frame.SubFrame[a]=o}}}function Oa(t){this.newMethod=ba,this.newMethod(t),delete this.newMethod,this.ClassName="MinuteChartHScreenContainer",this.OnMouseMove=function(t,e,a,i){this.LastPoint.X=t,this.LastPoint.Y=e,this.CursorIndex=this.Frame.GetXData(e);var r=this.PtInClient(t,e),n={ParentFunction:"OnMouseMove",Point:{X:t,Y:e},IsPhone:!0===i,ClientPos:r};this.DrawDynamicInfo(n)},this.Create=function(t){var e=this;this.UIElement.JSChartContainer=this,this.ChartCorssCursor=new De,this.ChartCorssCursor.Canvas=this.Canvas,this.ChartCorssCursor.StringFormatX=new Ie,this.ChartCorssCursor.StringFormatY=new Te,this.ChartCorssCursor.CallAcutionXOperator=new pe,this.ChartSplashPaint=new ge,this.ChartSplashPaint.Canvas=this.Canvas,this.ChartSplashPaint.HQChart=this,this.Frame=new H,this.Frame.ChartBorder=new L,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=25,this.Frame.ChartBorder.Left=50,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartCorssCursor.Frame=this.Frame,this.ChartSplashPaint.Frame=this.Frame,this.CreateChildWindow(t),this.CreateMainKLine();for(var a in this.Frame.SubFrame){var i=new Pe;i.Frame=this.Frame.SubFrame[a].Frame,i.Canvas=this.Canvas,i.LanguageID=this.LanguageID,i.GetEventCallback=function(t){return e.GetEventCallback(t)},this.TitlePaint.push(i)}this.ChartCorssCursor.StringFormatX.Frame=this.Frame.SubFrame[0].Frame,this.ChartCorssCursor.StringFormatY.Frame=this.Frame,this.ChartCorssCursor.CallAcutionXOperator.Frame=this.Frame.SubFrame[0].Frame,this.UIElement.addEventListener("keydown",f,!0)},this.CreateChildWindow=function(t){for(var e=this,a=0;a<t;++a){var i=new L;i.UIElement=this.UIElement;var r=new F;r.Canvas=this.Canvas,r.ChartBorder=i,r.Identify=a,a<2&&(r.ChartBorder.TitleHeight=0),r.XPointCount=243;var n=[9,8,7,6,5,4,3,2,1];r.HorizontalMax=n[0],r.HorizontalMin=n[n.length-1],0==a?(r.YSplitOperator=new de,r.YSplitOperator.FrameSplitData=this.FrameSplitData.get("price"),r.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)}):(r.YSplitOperator=new ue,r.YSplitOperator.LanguageID=this.LanguageID,r.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),r.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)}),r.YSplitOperator.Frame=r,r.YSplitOperator.ChartBorder=i,r.XSplitOperator=new fe,r.XSplitOperator.Frame=r,r.XSplitOperator.ChartBorder=i,r.XSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},a!=t-1&&(r.XSplitOperator.ShowText=!1),r.XSplitOperator.Operator();for(var s in n)r.HorizontalInfo[s]=new I,r.HorizontalInfo[s].Value=n[s],0==a&&s==r.HorizontalMin||(r.HorizontalInfo[s].Message[1]=n[s].toString(),r.HorizontalInfo[s].Font="14px 微软雅黑");var o=new k;o.Frame=r,o.Height=0==a?20:10,this.Frame.SubFrame[a]=o}}}function Pa(t){this.newMethod=u,this.newMethod(t),delete this.newMethod,this.ClassName="DepthChartContainer",this.Symbol,this.MapAsk=new _r.default,this.MapBid=new _r.default,this.IsAutoUpdate=!1,this.AutoUpdateFrequency=3e4,this.AutoUpdateTimer,this.DefaultZoom=.8,this.MaxVolRate=1.1,this.Create=function(t){var e=this;this.UIElement.JSChartContainer=this,this.ChartCorssCursor=new ve,this.ChartCorssCursor.Canvas=this.Canvas,this.ChartCorssCursor.HQChart=this,this.ChartSplashPaint=new ge,this.ChartSplashPaint.Canvas=this.Canvas,this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.Frame=new V,this.Frame.ChartBorder=new L,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.ChartBorder.TitleHeight=0,this.Frame.Canvas=this.Canvas;var a=new ue;a.FrameSplitData=this.FrameSplitData.get("double"),a.LanguageID=this.LanguageID,a.Frame=this.Frame,a.SplitCount=5,a.LineType=3,a.IgnoreYValue=[0],a.ChartBorder=this.Frame.ChartBorder,this.Frame.YSplitOperator=a;var i=new Ce;i.Frame=this.Frame,i.ChartBorder=this.Frame.ChartBorder,i.LanguageID=this.LanguageID,i.LineType=3,this.Frame.XSplitOperator=i,this.ChartCorssCursor&&(this.ChartCorssCursor.Frame=this.Frame),this.ChartSplashPaint.Frame=this.Frame;var r=new Ut;r.Canvas=this.Canvas,r.ChartBorder=this.Frame.ChartBorder,r.ChartFrame=this.Frame,r.Name="深度图",this.ChartPaint.push(r);var n=!0;t&&!1===t.Wheel&&(n=!1,Fr.Chart.Log("[DepthChartContainer::Create] not register wheel event.")),this.UIElement.addEventListener("keydown",function(t){e.OnKeyDown(t)},!0),n&&this.UIElement.addEventListener("wheel",function(t){e.OnWheel(t)},!0)},this.OnWheel=function(t){Fr.Chart.Log("[KLineChartContainer::OnWheel]",t);var e=t.clientX-this.UIElement.getBoundingClientRect().left,a=t.clientY-this.UIElement.getBoundingClientRect().top,i=!1;this.Canvas.beginPath(),this.Canvas.rect(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetTop(),this.Frame.ChartBorder.GetWidth(),this.Frame.ChartBorder.GetHeight()),i=this.Canvas.isPointInPath(e,a);var r=t.wheelDelta;he.IsObjectExist(t.wheelDelta)||(r=-.01*t.deltaY);var n=!0;this.EnableZoomUpDown&&!1===this.EnableZoomUpDown.Wheel&&(n=!1),i&&r<0&&n?this.Frame.ZoomDown()&&(this.UpdateFrameMaxMin(),this.Draw()):i&&r>0&&n&&this.Frame.ZoomUp()&&(this.UpdateFrameMaxMin(),this.Draw()),t.preventDefault?t.preventDefault():t.returnValue=!1},this.UIOnMouseDown=function(t){},this.OnTouchStart=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){this.IsOnTouch=!0,this.TouchDrawCount=0,this.PhonePinch=null;var e=this.IsSingleTouch(t);if(0!=this.EnableScrollUpDown&&e||t.cancelable&&t.preventDefault(),this.IsPhoneDragging(t)){var a={Click:{},LastMove:{}},i=this.GetToucheData(t,this.IsForceLandscape);a.Click.X=i[0].clientX,a.Click.Y=i[0].clientY,a.LastMove.X=i[0].clientX,a.LastMove.Y=i[0].clientY,this.MouseDrag=a,this.MoveCorssCursor(a.Click,t)}else if(this.IsPhonePinching(t)){var r={Start:{},Last:{}},i=this.GetToucheData(t,this.IsForceLandscape);r.Start={X:i[0].pageX,Y:i[0].pageY,X2:i[1].pageX,Y2:i[1].pageY},r.Last={X:i[0].pageX,Y:i[0].pageY,X2:i[1].pageX,Y2:i[1].pageY},this.PhonePinch=r}}},this.OnTouchMove=function(e){var a=this.GetToucheData(e,!1);if(this.IsPhoneDragging(e)){var i=this.MouseDrag;if(null==i){var r=c(),n=a[0].clientX-t.getBoundingClientRect().left*r,s=a[0].clientY-t.getBoundingClientRect().top*r;this.OnMouseMove(n,s,e)}else{var o=this.GetMoveAngle(i.LastMove,{X:a[0].clientX,Y:a[0].clientY}),h=Math.abs(i.LastMove.X-a[0].clientX),l=Math.abs(i.LastMove.Y-a[0].clientY);if(h=parseInt(h),(l>0&&h<=3||o<=this.TouchMoveMinAngle)&&1==this.EnableScrollUpDown)return;this.PreventTouchEvent(e),this.MouseDrag=null;var r=c(),n=a[0].clientX-t.getBoundingClientRect().left*r,s=a[0].clientY-t.getBoundingClientRect().top*r;this.OnMouseMove(n,s,e)}}else if(this.IsPhonePinching(e)){this.PreventTouchEvent(e);var u=this.PhonePinch;if(!u)return;if(this.EnableZoomUpDown&&!1===this.EnableZoomUpDown.Touch)return;var d=Math.abs(a[0].pageY-a[1].pageY),f=Math.abs(u.Last.Y-u.Last.Y2),m=d-f,C=Math.abs(a[0].pageX-a[1].pageX),p=Math.abs(u.Last.X-u.Last.X2),D=C-p,v=this.ZoomStepPixel;if(Math.abs(m)<v&&Math.abs(D)<v)return;var g=m;if(Math.abs(m)<v&&(g=D),g>0){if(!this.Frame.ZoomUp())return;this.UpdateFrameMaxMin(),this.Draw()}else{if(!this.Frame.ZoomDown())return;this.UpdateFrameMaxMin(),this.Draw()}u.Last={X:a[0].pageX,Y:a[0].pageY,X2:a[1].pageX,Y2:a[1].pageY}}this.PreventTouchEvent(e)},this.OnTouchEnd=function(t){Fr.Chart.Log("[DepthChartContainer::OnTouchEnd]",t),this.IsOnTouch=!1,this.OnTouchFinished(),this.TouchDrawCount=0},this.OnTouchFinished=function(){if(!0===this.CorssCursorTouchEnd)return void this.DrawDynamicInfo()},this.ChangeSymbol=function(t){this.CancelAutoUpdate(),this.Symbol=t,this.MapBid=new _r.default,this.MapAsk=new _r.default,this.Frame.VerticalRange.Differ=null,this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.EnableSplash(!0),this.Draw(),this.RequestDepthData()},this.RequestDepthData=function(){var t=this;if(this.NetworkFilter){var e={Name:"DepthChartContainer::RequestDepthData",Explain:"深度图数据",Request:{Data:{symbol:t.Symbol}},Self:this,PreventDefault:!1};if(this.NetworkFilter(e,function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvDepthData(e),t.AutoUpdate()}),1==e.PreventDefault)return}},this.RecvDepthData=function(t){this.UpdateAskAndBid(t);var e=(0,Dr.default)(this.MapAsk.values());e.sort(function(t,e){return t.Price-e.Price});var a=0;for(var i in e){var r=e[i];a+=r.Vol,e[i]={Price:r.Price,Vol:a}}var n=(0,Dr.default)(this.MapBid.values());n.sort(function(t,e){return e.Price-t.Price});var a=0;for(var i in n){var r=n[i];a+=r.Vol,n[i]={Price:r.Price,Vol:a}}var s={Asks:e,Bids:n};this.ChartPaint[0].Data=s,this.Frame.XSplitOperator.Symbol=this.Symbol,this.ChartCorssCursor.Data=s,this.ChartCorssCursor.Symbol=this.Symbol,this.UpdateFramePriceList(),this.UpdateFrameMaxMin(),this.Draw()},this.UpdateAskAndBid=function(t){"snapshot"==t.datatype&&(this.MapBid=new _r.default,this.MapAsk=new _r.default);for(var e in t.asks){var a=t.asks[e],i=parseFloat(a[0]),r=parseFloat(a[1]);if(this.MapAsk.has(i)){var n=this.MapAsk.get(i);r<=0?this.MapAsk.delete(i):n.Vol=r}else r>0&&this.MapAsk.set(i,{Price:i,Vol:r})}for(var e in t.bids){var a=t.bids[e],i=parseFloat(a[0]),r=parseFloat(a[1]);if(this.MapBid.has(i)){var n=this.MapBid.get(i);r<=0?this.MapBid.delete(i):n.Vol=r}else r>0&&this.MapBid.set(i,{Price:i,Vol:r})}},this.UpdateFramePriceList=function(){var t=(0,Dr.default)(this.MapAsk.keys()),e=(0,Dr.default)(this.MapBid.keys());t.sort(function(t,e){return t-e}),e.sort(function(t,e){return t-e});var a={Max:88,Min:8};if(t.length>1&&e.length>1){var i=t[0],r=t[t.length-1],n=e[0],s=e[e.length-1],o=r-i,h=s-n,l=Math.max(o,h),u={Min:i,Max:i+l},c={Max:s,Min:s-l};a={Max:u.Max,Min:c.Min}}this.Frame.SetPriceList(t,e);var d=this.Frame.VerticalRange;d.Max=a.Max,d.Center=a.Min+(a.Max-a.Min)/2,d.Min=a.Min,d.MaxDiffer=l,d.Ask=u,d.Bid=c,he.IsNumber(d.Differ)||(d.Differ=l*this.DefaultZoom),d.Min=d.Center-d.Differ,d.Max=d.Center+d.Differ},this.UpdateFrameMaxMin=function(){var t=this.ChartPaint[0].GetMaxMin();this.Frame.HorizontalMax=t.Max*this.MaxVolRate,this.Frame.HorizontalMin=0,this.Frame.XYSplit=!0},this.CancelAutoUpdate=function(){"number"==typeof this.AutoUpdateTimer&&(clearTimeout(this.AutoUpdateTimer),this.AutoUpdateTimer=void 0)},this.StopAutoUpdate=function(){this.CancelAutoUpdate(),this.IsAutoUpdate&&(this.IsAutoUpdate=!1)},this.AutoUpdate=function(){if(this.CancelAutoUpdate(),this.IsAutoUpdate&&this.Symbol){var t=this,e=an.GetMarketStatus(this.Symbol);if(0!=e&&3!=e){var a=this.AutoUpdateFrequency;1==e?this.AutoUpdateTimer=setTimeout(function(){t.AutoUpdate()},a):2==e&&(this.AutoUpdateTimer=setTimeout(function(){t.RequestDepthData()},a))}}}}function Ra(t){this.newMethod=u,this.newMethod(t),delete this.newMethod,this.MainDataControl,this.Create=function(){this.UIElement.JSChartContainer=this,this.ChartSplashPaint=new ge,this.ChartSplashPaint.Canvas=this.Canvas,this.Frame=new G,this.Frame.ChartBorder=new L,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartCorssCursor&&(this.ChartCorssCursor.Frame=this.Frame),this.ChartSplashPaint.Frame=this.Frame,this.CreateMainChart(),this.UIElement.addEventListener("keydown",f,!0)},this.SetMainDataConotrl=function(t){t&&(this.MainDataControl=t,this.ChartPaint=[],this.CreateMainChart(),this.Draw(),this.RequestData())},this.CreateMainChart=function(){if(this.MainDataControl){for(var t in this.MainDataControl.DataType){var e=this.MainDataControl.DataType[t];if("BAR"==e.Type){var a=new _t;a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.Name=e.Name,e.Color&&(a.UpBarColor=e.Color),e.Color2&&(a.DownBarColor=e.Color2),this.ChartPaint.push(a)}else if("LINE"==e.Type){var a=new st;a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.Name=e.Name,e.Color&&(a.Color=e.Color),this.ChartPaint.push(a)}}this.Frame.YSplitOperator=new ue,this.Frame.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),this.Frame.YSplitOperator.Frame=this.Frame,this.Frame.YSplitOperator.ChartBorder=this.Frame.ChartBorder,this.Frame.XSplitOperator=new me,this.Frame.XSplitOperator.Frame=this.Frame,this.Frame.XSplitOperator.ChartBorder=this.Frame.ChartBorder}},this.RequestData=function(){this.MainDataControl&&(this.MainDataControl.JSChartContainer=this,this.MainDataControl.RequestData())},this.UpdateMainData=function(t){var e=0;for(var a in t.Data){var i=new Z;i.Data=t.Data[a],this.ChartPaint[a].Data=i,e<i.Data.length&&(e=i.Data.length)}this.Frame.XPointCount=e,this.Frame.Data=this.ChartPaint[0].Data,this.Frame.XData=t.XData,this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}}function ka(t){this.Radius,this.newMethod=u,this.newMethod(t),delete this.newMethod,this.MainDataControl,this.OnMouseMove=function(t,e,a){},this.Create=function(){this.UIElement.JSChartContainer=this,this.ChartSplashPaint=new ge,this.ChartSplashPaint.Canvas=this.Canvas,this.Frame=new _,this.Frame.ChartBorder=new L,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartSplashPaint.Frame=this.Frame,this.CreateMainChart()},this.SetMainDataConotrl=function(t){t&&(this.MainDataControl=t,this.ChartPaint=[],this.CreateMainChart(),this.Draw(),this.RequestData())},this.CreateMainChart=function(){if(this.MainDataControl)for(var t in this.MainDataControl.DataType){var e=this.MainDataControl.DataType[t];if("PIE"==e.Type){var a=new Kt;a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.Name=e.Name,this.Radius&&(a.Radius=this.Radius),this.ChartPaint.push(a)}else if("RADAR"==e.Type){var a=new jt;a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.Name=e.Name,e.StartAngle&&(a.StartAngle=e.StartAngle),this.ChartPaint.push(a)}}},this.RequestData=function(){this.MainDataControl&&(this.MainDataControl.JSChartContainer=this,this.MainDataControl.RequestData())},this.UpdateMainData=function(t){for(var e in t.Data){var a=new Z;a.Data=t.Data[e],this.ChartPaint[e].Data=a}this.Frame.SetSizeChage(!0),this.Draw()}}function Ba(t){this.newMethod=u,this.newMethod(t),delete this.newMethod,this.MainDataControl,this.OnMouseMove=function(t,e,a){},this.Create=function(){this.UIElement.JSChartContainer=this,this.ChartSplashPaint=new ge,this.ChartSplashPaint.Canvas=this.Canvas,this.Frame=new _,this.Frame.ChartBorder=new L,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartSplashPaint.Frame=this.Frame,this.CreateMainChart()},this.SetMainDataConotrl=function(t){t&&(this.MainDataControl=t,this.ChartPaint=[],this.CreateMainChart(),this.Draw(),this.RequestData())},this.CreateMainChart=function(){if(this.MainDataControl){var t=new zt;t.Canvas=this.Canvas,t.ChartBorder=this.Frame.ChartBorder,t.ChartFrame=this.Frame,t.Name=this.MainDataControl.DataType[0].Name,this.Radius&&(t.Radius=this.Radius),this.ChartPaint.push(t)}},this.RequestData=function(){this.MainDataControl&&(this.MainDataControl.JSChartContainer=this,this.MainDataControl.RequestData())},this.UpdateMainData=function(t){this.ChartPaint[0].Data=t.Data[0],this.Frame.SetSizeChage(!0),this.Draw()}}function Ya(t,e){this.Name=t,this.Param=e,this.LineColor,this.ReqeustData=null}function Ha(t){this.Index,this.Name=t,this.Script=null,this.ClassName="BaseIndex",this.OverlayIndex=null,this.GetEventCallback,this.Status=0,this.Create=function(t,e){},this.NotSupport=function(t,e,a){if(!this.IsOverlay()){t.DeleteIndexPaint(e);var i=t.Frame.SubFrame[e].Frame,r=new nt;r.Canvas=t.Canvas,r.ChartBorder=i.ChartBorder,r.ChartFrame=i,r.NotSupportMessage=a,t.ChartPaint.push(r)}},this.FormatIndexTitle=function(){var t=this.Name,e=null;for(var a in this.Index){var i=this.Index[a];null!=i.Param&&(e?e+=","+i.Param.toString():e=i.Param.toString())}return e&&(t+="("+e+")"),t},this.IsOverlay=function(){return!(!this.OverlayIndex||1!=this.OverlayIndex.IsOverlay)},this.CreateChart=function(t){return new st},this.CreatePaints=function(t,e){var a=null,i=this.IsOverlay();i?(a=this.OverlayIndex.Frame.Frame,this.OverlayIndex.Frame.ChartPaint=[]):(a=t.Frame.SubFrame[e].Frame,t.DeleteIndexPaint(e));var r=[];for(var n in this.Index){var s=this.CreateChart(n);s.Color=this.Index[n].LineColor,s.Canvas=t.Canvas,s.Name=this.Name+"-"+n.toString(),s.ChartBorder=a.ChartBorder,s.ChartFrame=a,i?this.OverlayIndex.Frame.ChartPaint.push(s):t.ChartPaint.push(s),r.push(s)}return r},this.SendEvent=function(t,e,a,i){if(t.GetIndexEvent){var r=t.GetIndexEvent();if(r){var n={Data:this.GetOutData(),WindowIndex:e,Name:this.Name,HistoryData:a,Stock:{Symbol:t.Symbol,Name:t.Name}};i&&(n.Error=i),r.Callback(r,n,self)}}},this.GetOutData=function(){return null}}function Va(){this.newMethod=Ha,this.newMethod("OX"),delete this.newMethod,this.ClassName="JSIndex_OX",this.IsUsePageData=!0,this.BlockSize=.5,this.Arguments=[{Name:"Reversal",Value:3}],this.SetArgs=function(t){if(t&&he.IsNonEmptyArray(t))for(var e=0;e<t.length;++e){var a=t[e];"Reversal"==a.Name&&this.SetParamValue(a.Name,a.Value)}},this.SetParamValue=function(t,e){for(var a=0;a<this.Arguments.length;++a){var i=this.Arguments[a];i.Name==t&&(i.Value=e)}},this.GetParamValue=function(t){for(var e=0;e<this.Arguments.length;++e){var a=this.Arguments[e];if(a.Name==t)return a.Value}},this.RequestData=function(t,e,a){return this.BindData(t,e,a),t.UpdataDataoffset(),t.UpdateFrameMaxMin(),t.Draw(),!0},this.CreatePaints=function(t,e){var a=null,i=this.IsOverlay();i?(a=this.OverlayIndex.Frame.Frame,this.OverlayIndex.Frame.ChartPaint=[]):(a=t.Frame.SubFrame[e].Frame,t.DeleteIndexPaint(e));var r=[],n=new Gt;return n.Canvas=t.Canvas,n.Name=this.Name+"-0",n.ChartBorder=a.ChartBorder,n.ChartFrame=a,i?this.OverlayIndex.Frame.ChartPaint.push(n):t.ChartPaint.push(n),r.push(n),r},this.CalculateBlockSize=function(t,e){var a=t-e;return a<=5?.25:a<=20?.5:a<=100?1:a<=200?2:a<=500?5:a<=1e3?10:50},this.Calculate=function(t,e){if(!t.ChartPaint[0])return null;var a=t.ChartPaint[0].ShowRange;if(!a)return null;if(!he.IsNonEmptyArray(e.Data))return null;for(var i=null,r=null,n=null,s=a.Start;s<=a.End&&s<e.Data.length;++s){var o=e.Data[s];null==i?he.IsNumber(o.High)&&(i=o.High):he.IsNumber(o.High)&&i<o.High&&(i=o.High),null==r?he.IsNumber(o.Low)&&(r=o.Low):he.IsNumber(o.Low)&&r>o.Low&&(r=o.Low),null==n&&he.IsNumber(o.High)&&(n=o.High)}var h=this.GetParamValue("Reversal"),l=this.CalculateBlockSize(i,r);this.BlockSize=l;for(var u={Max:i+l,Min:r-l,StartPrice:n,Data:[],BlockSize:l},c=1,d=n,f={Type:0,Data:[],Start:null,End:null},s=a.Start,m=0;s<=a.End&&s<e.Data.length;++s){var o=e.Data[s];if(1==c){if(o.High>=d+l){var C=parseInt((o.High-d)/l);for(m=0;m<C;++m)d+=l,f.Data.push(d)}else if(o.Low<=d-l*h){c=0,f&&he.IsNonEmptyArray(f.Data)&&u.Data.push(f),f={Type:1,Data:[],Start:null,End:null};var C=parseInt((d-o.Low)/l);for(m=0;m<C;++m)d-=l,f.Data.push(d)}}else if(o.Low<=d-l){var C=parseInt((d-o.Low)/l);for(m=0;m<C;++m)d-=l,f.Data.push(d)}else if(o.High>=d+l*h){c=1,f&&he.IsNonEmptyArray(f.Data)&&u.Data.push(f),f={Type:0,Data:[],Start:null,End:null};var C=parseInt((o.High-d)/l);for(m=0;m<C;++m)d+=l,f.Data.push(d)}null==f.Start&&(f.Start=o),f.End=o}return f&&he.IsNonEmptyArray(f.Data)&&u.Data.push(f),u},this.BindData=function(t,e,a){var i=this.CreatePaints(t,e),r=this.IsOverlay(),n=t.GetEventCallback(Nr.ON_CALCULATE_INDEX_OX);if(n&&n.Callback){var s={HQChart:t,WidnowIndex:e,HisData:a,OXData:null};n.Callback(n,s,this),i[0].OXData=s.OXData}else i[0].OXData=this.Calculate(t,a);var o=this.BlockSize,h=this.GetParamValue("Reversal"),l=this.Name+" BlockSize="+o+" Reversal="+h,u=e+1;if(r){var c=t.TitlePaint[u],d={Data:[],Title:""};c.OverlayIndex.set(this.OverlayIndex.Identify,d)}else t.TitlePaint[u].Title=l;return!0}}function Ga(){this.newMethod=Ha,this.newMethod("CJL"),delete this.newMethod,this.Index=new Array(new Ya("VOL",null),new Ya("OPID",null)),this.Index[0].LineColor=$r.Index.LineColor[0],this.Index[1].LineColor=$r.Index.LineColor[1],this.CreateChart=function(t){if(0==t){var e=new mt;return e}if(1==t){var e=new ot;return e.LineWidth=1*c(),e}},this.RequestData=function(t,e,a){return this.BindData(t,e,a),t.UpdataDataoffset(),t.UpdateFrameMaxMin(),t.Draw(),!0},this.BindData=function(t,e,a){var i=this.CreatePaints(t,e),r=this.IsOverlay();if(i.length!=this.Index.length)return!1;var n=a.GetVol(),s=a.GetPosition();i[0].HistoryData=a,i[0].Data.Data=n,i[1].Data.Data=s;var o=e+1;if(r){var h=t.TitlePaint[o],l={Data:[],Title:""};h.OverlayIndex.set(this.OverlayIndex.Identify,l);for(var u in i){var c=new Oe(i[u].Data,this.Index[u].Name,this.Index[u].LineColor);h.OverlayIndex.get(this.OverlayIndex.Identify).Data[u]=c}}else t.TitlePaint[o].Data[0]=new Oe(i[0].Data,this.Index[0].Name,this.Index[0].LineColor),t.TitlePaint[o].Data[1]=new Oe(i[1].Data,this.Index[1].Name,this.Index[1].LineColor),t.TitlePaint[o].Title=this.Name;return!0}}function Wa(){this.newMethod=Ha,this.newMethod("Long-Short"),delete this.newMethod,this.Index=new Array(new Ya("多头区域",null),new Ya("空头区域",null),new Ya("市场多空指标",null)),this.Index[0].LineColor=$r.UpBarColor,this.Index[1].LineColor=$r.DownBarColor,this.Index[2].LineColor=$r.Index.LineColor[0],this.LongShortData,this.CreateChart=function(t){if(2==t){var e=new st;return e.LineWidth=2,e}return new Tt},this.GetOutData=function(){return{LongShortData:this.LongShortData}},this.RequestData=function(t,e,a){var i=this,r={HQChart:t,WindowIndex:e,HistoryData:a};return this.LongShortData=[],r.HQChart.Period>0?(this.NotSupport(r.HQChart,r.WindowIndex,"不支持周期切换"),r.HQChart.Draw(),this.SendEvent(t,e,a,"不支持周期切换"),!1):(n.HttpRequest({url:$r.Index.MarketLongShortApiUrl,data:{},type:"post",dataType:"json",async:!0,success:function(n){i.RecvData(n,r),i.SendEvent(t,e,a)}}),!0)},this.RecvData=function(t,e){if(!(t.data.length<=0)){var a=new Array;for(var i in t.data){var r=t.data[i],n=new z;n.Date=r[0],n.Value=r[1],a.push(n)}var s=e.HistoryData.GetFittingData(a),o=new Z;o.Data=s,o.Period=e.HQChart.Period,o.Right=e.HQChart.Right,this.LongShortData=o.GetValue(),this.BindData(e.HQChart,e.WindowIndex,e.HistoryData),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw()}},this.BindData=function(t,e,a){var i=this.CreatePaints(t,e),r=this.IsOverlay();if(i.length!=this.Index.length)return!1;i[2].Data.Data=this.LongShortData,i[0].Data.Data[0]=8,i[1].Data.Data[0]=1;var n=e+1;if(r){this.OverlayIndex.Frame.Frame.YSpecificMaxMin={Max:9,Min:0,Count:3};var s=t.TitlePaint[n],o={Data:[],Title:""};s.OverlayIndex.set(this.OverlayIndex.Identify,o);for(var h in i){var l=new Oe(i[h].Data,this.Index[h].Name,this.Index[h].LineColor);2!=h&&(l.DataType="StraightLine"),s.OverlayIndex.get(this.OverlayIndex.Identify).Data[h]=l}}else{t.Frame.SubFrame[e].Frame.YSpecificMaxMin={Max:9,Min:0,Count:3};for(var h in i)t.TitlePaint[n].Data[h]=new Oe(i[h].Data,this.Index[h].Name,this.Index[h].LineColor),2!=h&&(t.TitlePaint[n].Data[h].DataType="StraightLine")}return!0}}function Xa(){this.newMethod=Ha,this.newMethod("Market-Timing"),delete this.newMethod,this.Index=new Array(new Ya("因子择时",null)),this.TimingData,this.TitleColor=$r.FrameSplitTextColor,this.CreateChart=function(t){return new Mt},this.GetOutData=function(){return{TimingData:this.TimingData}},this.RequestData=function(t,e,a){var i=this,r={HQChart:t,WindowIndex:e,HistoryData:a};return this.LongShortData=[],r.HQChart.Period>0?(this.NotSupport(r.HQChart,r.WindowIndex,"不支持周期切换"),r.HQChart.Draw(),this.SendEvent(t,e,a,"不支持周期切换"),!1):(n.HttpRequest({url:$r.Index.MarketLongShortApiUrl,data:{},type:"post",dataType:"json",async:!0,success:function(n){i.RecvData(n,r),i.SendEvent(t,e,a)}}),!0)},this.RecvData=function(t,e){if(!(t.data.length<=0)){var a=new Array;for(var i in t.data){var r=t.data[i],n=new z;n.Date=r[0],n.Value=r[2],a.push(n)}var s=e.HistoryData.GetFittingData(a),o=new Z;o.Data=s,o.Period=e.HQChart.Period,o.Right=e.HQChart.Right,this.TimingData=o.GetValue(),this.BindData(e.HQChart,e.WindowIndex,e.HistoryData),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw()}},this.BindData=function(t,e,a){var i=this.CreatePaints(t,e),r=this.IsOverlay();if(i.length!=this.Index.length)return!1;i[0].Data.Data=this.TimingData,i[0].NotSupportMessage=null;var n=e+1;if(r){var s=t.TitlePaint[n],o={Data:[],Title:""};s.OverlayIndex.set(this.OverlayIndex.Identify,o);for(var h in i){var l=new Oe(i[h].Data,this.Index[h].Name,this.Index[h].LineColor);l.StringFormat=Qr.THOUSANDS,l.FloatPrecision=0,s.OverlayIndex.get(this.OverlayIndex.Identify).Data[h]=l}}else for(var h in i)t.TitlePaint[n].Data[h]=new Oe(i[h].Data,this.Index[h].Name,this.TitleColor),t.TitlePaint[n].Data[h].StringFormat=Qr.THOUSANDS,t.TitlePaint[n].Data[h].FloatPrecision=0;return!0}}function Ua(){this.newMethod=Ha,this.newMethod("Market-Attention"),delete this.newMethod,this.Index=new Array(new Ya("市场关注度",null)),this.Data,this.TitleColor=$r.FrameSplitTextColor,this.ApiUrl=$r.Index.MarketAttentionApiUrl,this.CreateChart=function(t){return new Mt},this.GetOutData=function(){return{Data:this.Data}},this.SetFrame=function(t,e,a){this.IsOverlay()?this.OverlayIndex.Frame.Frame.YSpecificMaxMin={Max:6,Min:0,Count:3}:t.Frame.SubFrame[e].Frame.YSpecificMaxMin={Max:6,Min:0,Count:3}},this.RequestData=function(t,e,a){var i=this,r={HQChart:t,WindowIndex:e,HistoryData:a};return this.Data=[],r.HQChart.Period>0?(this.NotSupport(r.HQChart,r.WindowIndex,"不支持周期切换"),r.HQChart.Draw(),this.SendEvent(t,e,a,"不支持周期切换"),!1):(n.HttpRequest({url:this.ApiUrl,data:{symbol:r.HQChart.Symbol,startdate:20100101},type:"post",dataType:"json",async:!0,success:function(n){i.RecvData(n,r),i.SendEvent(t,e,a)}}),!0)},this.RecvData=function(t,e){if(!(t.date.length<0)){var a=new Array;for(var i in t.date){var r=new z;r.Date=t.date[i],r.Value=t.value[i],a.push(r)}var n=e.HistoryData.GetFittingData(a),s=new Z;s.Data=n,s.Period=e.HQChart.Period,s.Right=e.HQChart.Right,this.Data=s.GetValue(),this.BindData(e.HQChart,e.WindowIndex,e.HistoryData),this.SetFrame(e.HQChart,e.WindowIndex,e.HistoryData),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw()}},this.BindData=function(t,e,a){var i=this.CreatePaints(t,e),r=this.IsOverlay();if(i.length!=this.Index.length)return!1;i[0].Data.Data=this.Data,i[0].NotSupportMessage=null;var n=e+1;if(r){var s=t.TitlePaint[n],o={Data:[],Title:""};s.OverlayIndex.set(this.OverlayIndex.Identify,o);for(var h in i){var l=new Oe(i[h].Data,this.Index[h].Name,this.Index[h].LineColor);l.StringFormat=Qr.THOUSANDS,l.FloatPrecision=0,s.OverlayIndex.get(this.OverlayIndex.Identify).Data[h]=l}}else for(var h in i)t.TitlePaint[n].Data[h]=new Oe(i[h].Data,this.Index[h].Name,this.TitleColor),t.TitlePaint[n].Data[h].StringFormat=Qr.THOUSANDS,t.TitlePaint[n].Data[h].FloatPrecision=0;return!0}}function Ka(){this.newMethod=Ha,this.newMethod("Market-Heat"),delete this.newMethod,this.Index=new Array(new Ya("热度",5),new Ya("MA",10),new Ya("MA",null)),this.Data,this.ApiUrl=$r.Index.MarketHeatApiUrl,this.Index[0].LineColor=$r.FrameSplitTextColor,this.Index[1].LineColor=$r.Index.LineColor[0],this.Index[2].LineColor=$r.Index.LineColor[1],this.CreateChart=function(t){return 0==t?new Mt:new st},this.RequestData=function(t,e,a){var i=this,r={HQChart:t,WindowIndex:e,HistoryData:a};return this.Data=[],r.HQChart.Period>0?(this.NotSupport(r.HQChart,r.WindowIndex,"不支持周期切换"),r.HQChart.Draw(),!1):(n.HttpRequest({url:this.ApiUrl,data:{symbol:r.HQChart.Symbol,startdate:20100101},type:"post",dataType:"json",async:!0,success:function(t){i.RecvData(t,r)}}),!0)},this.RecvData=function(t,e){if(!(t.date.length<0)){var a=new Array;for(var i in t.date){var r=new z;r.Date=t.date[i],r.Value=t.value[i],a.push(r)}var n=e.HistoryData.GetFittingData(a),s=new Z;s.Data=n,s.Period=e.HQChart.Period,s.Right=e.HQChart.Right,this.Data=s.GetValue(),this.BindData(e.HQChart,e.WindowIndex,e.HistoryData),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw()}},this.BindData=function(t,e,a){var i=this.CreatePaints(t,e),r=this.IsOverlay();if(i.length!=this.Index.length)return!1;i[0].Data.Data=this.Data,i[0].NotSupportMessage=null;var n=Ma.MA(this.Data,this.Index[0].Param);i[1].Data.Data=n;var s=Ma.MA(this.Data,this.Index[1].Param);i[2].Data.Data=s;var o=e+1;if(r){var h=t.TitlePaint[o],l={Data:[],Title:""};h.OverlayIndex.set(this.OverlayIndex.Identify,l);for(var u in i){var c="";c=0==u?t.Name+this.Index[u].Name:"MA"+this.Index[u-1].Param;var d=new Oe(i[u].Data,c,this.Index[u].LineColor);d.StringFormat=Qr.DEFAULT,d.FloatPrecision=2,h.OverlayIndex.get(this.OverlayIndex.Identify).Data[u]=d}}else for(var u in i){var c="";c=0==u?t.Name+this.Index[u].Name:"MA"+this.Index[u-1].Param,t.TitlePaint[o].Data[u]=new Oe(i[u].Data,c,this.Index[u].LineColor),t.TitlePaint[o].Data[u].StringFormat=Qr.DEFAULT,t.TitlePaint[o].Data[u].FloatPrecision=2}return!0}}function ja(){this.newMethod=Ha,this.newMethod("Market-Heat"),delete this.newMethod,this.Index=new Array(new Ya("区域",3),new Ya("热度指数",10),new Ya("MA",5),new Ya("MA",10)),this.Data,this.ApiUrl=$r.Index.CustomIndexHeatApiUrl,this.Index[1].LineColor=$r.Index.LineColor[1],this.Index[2].LineColor=$r.Index.LineColor[2],this.Index[3].LineColor=$r.Index.LineColor[3],this.Create=function(t,e){for(var a in this.Index){var i=null;0==a?i=new yt:(i=new st,i.Color=this.Index[a].LineColor),i.Canvas=t.Canvas,i.Name=this.Name+"-"+a.toString(),i.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,i.ChartFrame=t.Frame.SubFrame[e].Frame,t.ChartPaint.push(i)}},this.RequestData=function(t,e,a){var i=this,r={HQChart:t,WindowIndex:e,HistoryData:a};return this.Data=[],r.HQChart.Period>0?(this.NotSupport(r.HQChart,r.WindowIndex,"不支持周期切换"),r.HQChart.Draw(),!1):(n.HttpRequest({url:this.ApiUrl,data:{stock:r.HQChart.CustomStock,date:{startdate:r.HQChart.QueryDate.Start,enddate:r.HQChart.QueryDate.End},day:[this.Index[0].Param,this.Index[1].Param]},type:"post",dataType:"json",async:!0,success:function(t){i.RecvData(t,r)}}),!0)},this.RecvData=function(t,e){if(!(null==t.data||t.data.length<0)){var a=new Array;for(var i in t.data){var r=t.data[i],n=new z;n.Date=r[0],n.Value=r[1],a.push(n)}var s=e.HistoryData.GetFittingData(a),o=new Z;o.Data=s,o.Period=e.HQChart.Period,o.Right=e.HQChart.Right,this.Data=o.GetValue(),this.BindData(e.HQChart,e.WindowIndex,e.HistoryData),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw()}},this.BindData=function(t,e,a){var i=t.GetChartPaint(e);if(i.length!=this.Index.length)return!1;i[0].NotSupportMessage=null,i[0].Data.Data=[{Value:0,Value2:.2,Color:"rgb(50,205,50)",Title:"热度1",TitleColor:"rgb(245,255 ,250)"},{Value:.2,Value2:.4,Color:"rgb(255,140,0)",Title:"热度2",TitleColor:"rgb(245,255 ,250)"},{Value:.4,Value2:.8,Color:"rgb(255,106,106)",Title:"热度3",TitleColor:"rgb(245,255 ,250)"},{Value:.8,Value2:1,Color:"rgb(208, 32 ,144)",Title:"热度4",TitleColor:"rgb(245,255 ,250)"}],i[1].Data.Data=this.Data;var r=Ma.MA(this.Data,this.Index[2].Param);i[2].Data.Data=r;var n=Ma.MA(this.Data,this.Index[3].Param);i[3].Data.Data=n,t.Frame.SubFrame[e].Frame.YSpecificMaxMin={Max:1,Min:0,Count:3};for(var s=e+1,o=1;o<i.length;++o){var h=this.Index[o].Name;"MA"==h&&(h="MA"+this.Index[o].Param),t.TitlePaint[s].Data[o]=new Oe(i[o].Data,h,this.Index[o].LineColor),t.TitlePaint[s].Data[o].StringFormat=Qr.DEFAULT,t.TitlePaint[s].Data[o].FloatPrecision=2}return t.TitlePaint[s].Title="热度("+this.Index[0].Param+","+this.Index[1].Param+","+this.Index[2].Param+","+this.Index[3].Param+")",!0}}function za(){this.newMethod=Ha,this.newMethod("财务粉饰"),delete this.newMethod,this.Index=new Array(new Ya("区域",null),new Ya("系数",null)),this.Data,this.ApiUrl=$r.Index.StockHistoryDayApiUrl,this.Index[0].LineColor=$r.Index.LineColor[0],this.Index[1].LineColor="rgb(105,105,105)",this.CreateChart=function(t){return 0==t?new yt:new Dt},this.GetOutData=function(){return{Data:this.Data}},this.RequestData=function(t,e,a){var i=this,r={HQChart:t,WindowIndex:e,HistoryData:a};if(this.Data=[],2!=r.HQChart.Period)return this.NotSupport(r.HQChart,r.WindowIndex,"只支持月线"),r.HQChart.Draw(),this.SendEvent(t,e,a,"只支持月线"),!1;var s=["finance.benford","announcement2.quarter","announcement1.quarter","announcement3.quarter","announcement4.quarter"],o=[{item:["date","int32","gte","20130101"]},{item:["announcement1.year","int32","gte",0,"announcement2.year","int32","gte",0,"announcement3.year","int32","gte",0,"announcement4.year","int32","gte",0,"or"]}];return n.HttpRequest({url:this.ApiUrl,data:{symbol:[r.HQChart.Symbol],field:s,condition:o},type:"post",dataType:"json",async:!0,success:function(n){i.RecvData(n,r),i.SendEvent(t,e,a)}}),!0},this.JsonDataToMapSingleData=function(t){var e=t.stock[0].stockday,a=new _r.default;for(var i in e){var r=e[i],n=new z;if(n.Date=r.date,n.Value=new Array,null!=r.finance1&&null!=r.announcement1){var s=r.announcement1.year,o=r.announcement1.quarter,h=r.finance1.benford;n.Value.push({Year:s,Quarter:o,Value:h})}if(null!=r.finance2&&null!=r.announcement2){var l=r.announcement2.year,u=r.announcement2.quarter,c=r.finance2.benford;n.Value.push({Year:l,Quarter:u,Value:c})}if(null!=r.finance3&&null!=r.announcement3){var d=r.announcement3.year,f=r.announcement3.quarter,m=r.finance3.benford;n.Value.push({Year:d,Quarter:f,Value:m})}if(null!=r.finance4&&null!=r.announcement4){var C=r.announcement4.year,p=r.announcement4.quarter,D=r.finance4.benford;n.Value.push({Year:C,Quarter:p,Value:D})}a.set(n.Date,n)}var v=new Array,g=!0,S=!1,T=void 0;try{for(var y,I=(0,Tr.default)(a);!(g=(y=I.next()).done);g=!0){var r=y.value;v.push(r[1])}}catch(t){S=!0,T=t}finally{try{!g&&I.return&&I.return()}finally{if(S)throw T}}return v},this.RecvData=function(t,e){if(Fr.Chart.Log(t),!(null==t.stock||t.stock.length<=0)){var a=this.JsonDataToMapSingleData(t),i=e.HistoryData.GetFittingMonthData(a),r=new Z;r.Data=i,r.Period=e.HQChart.Period,r.Right=e.HQChart.Right,this.Data=r.GetValue(),this.BindData(e.HQChart,e.WindowIndex,e.HistoryData),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw()}},this.BindData=function(t,e,a){var i=this.CreatePaints(t,e);if(i.length!=this.Index.length)return!1;i[0].NotSupportMessage=null,i[0].Data.Data=[{Value:0,Value2:.2,Color:"rgb(50,205,50)",Title:"安全区",TitleColor:"rgb(245,255 ,250)"},{Value:.2,Value2:.4,Color:"rgb(255,140,0)",Title:"预警区",TitleColor:"rgb(245,255 ,250)"},{Value:.4,Value2:1,Color:"rgb(255,106,106)",Title:"警示区",TitleColor:"rgb(245,255 ,250)"}],i[1].Data.Data=this.Data,t.Frame.SubFrame[e].Frame.YSpecificMaxMin={Max:1,Min:0,Count:3};var r=e+1;return t.TitlePaint[r].Data[1]=new Oe(i[1].Data,this.Index[1].Name,this.Index[1].LineColor),t.TitlePaint[r].Data[1].DataType="MultiReport",t.TitlePaint[r].Title=this.FormatIndexTitle(),!0}}function Ja(){this.newMethod=Ha,this.newMethod("Lighter-Trend"),delete this.newMethod,this.Index=new Array(new Ya("STICKLINE",null),new Ya("STICKLINE",null)),this.Index[0].LineColor="rgb(255,0,0)",this.Index[1].LineColor="rgb(0,0,255)",this.Create=function(t,e){for(var a in this.Index){var i=new vt;i.Canvas=t.Canvas,i.Name=this.Name,i.Name=this.Name+"-"+a.toString(),i.Color=this.Index[a].LineColor,i.LineWidth=2,i.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,i.ChartFrame=t.Frame.SubFrame[e].Frame,t.ChartPaint.push(i)}},this.BindData=function(t,e,a){var i=t.GetChartPaint(e);if(2!=i.length)return!1;var r=a.GetClose(),n=Ma.SMA(r,6.5,1),s=Ma.SMA(r,13.5,1),o=Ma.STICKLINE(Ma.ARRAY_GT(n,s),n,s),h=Ma.STICKLINE(Ma.ARRAY_GT(s,n),n,s);i[0].Data.Data=o,i[1].Data.Data=h;var l=e+1;return t.TitlePaint[l].Title="大盘/个股 趋势函数",!0}}function qa(){this.newMethod=Ha,this.newMethod("位置研判函数"),delete this.newMethod,this.Index=new Array(new Ya("STICKLINE",34),new Ya("STICKLINE",3),new Ya("STICKLINE",null),new Ya("STICKLINE",null),new Ya("STICKLINE",null),new Ya("STICKLINE",null),new Ya("LINE",null),new Ya("TEXT",null)),this.Index[0].LineColor="rgb(0,0,138)",this.Index[1].LineColor="rgb(133,0,138)",this.Index[2].LineColor="rgb(101,118,0)",this.Index[3].LineColor="rgb(105,0,121)",this.Index[4].LineColor="rgb(121,183,21)",this.Index[5].LineColor="rgb(0,0,138)",this.Index[6].LineColor="rgb(255,0,0)",this.Create=function(t,e){for(var a in this.Index){var i=null;"LINE"==this.Index[a].Name?(i=new st,i.Color=this.Index[a].LineColor):"TEXT"==this.Index[a].Name?i=new gt:(i=new vt,i.Color=this.Index[a].LineColor,i.LineWidth=5),i.Canvas=t.Canvas,i.Name=this.Name,i.Name=this.Name+"-"+a.toString(),i.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,i.ChartFrame=t.Frame.SubFrame[e].Frame,t.ChartPaint.push(i)}},this.BindData=function(t,e,a){var i=t.GetChartPaint(e);if(i.length!=this.Index.length)return!1;var r=a.GetClose(),n=a.GetHigh(),s=a.GetLow();i[0].Data.Data=Ma.STICKLINE(Ma.ARRAY_GT(r,0),0,2),i[1].Data.Data=Ma.STICKLINE(Ma.ARRAY_GT(r,0),2,5),i[2].Data.Data=Ma.STICKLINE(Ma.ARRAY_GT(r,0),5,10),i[3].Data.Data=Ma.STICKLINE(Ma.ARRAY_GT(r,0),10,21.5),i[4].Data.Data=Ma.STICKLINE(Ma.ARRAY_GT(r,0),21.5,23,5),i[5].Data.Data=Ma.STICKLINE(Ma.ARRAY_GT(r,0),23,28,5);var o=Ma.ARRAY_DIVIDE(Ma.EMA(Ma.ARRAY_MULTIPLY(Ma.ARRAY_DIVIDE(Ma.ARRAY_SUBTRACT(r,Ma.LLV(s,this.Index[0].Param)),Ma.ARRAY_SUBTRACT(Ma.HHV(n,this.Index[0].Param),Ma.LLV(s,this.Index[0].Param))),100),this.Index[1].Param),4);i[6].Data.Data=o;var h=new Array;h[0]={Value:1,Message:"底部区域",Color:"rgb(0,255,255)",Position:"Left"},h[1]={Value:3.5,Message:"介入区域",Color:"rgb(0,255,255)",Position:"Left"},h[2]={Value:7.5,Message:"稳健区域",Color:"rgb(0,255,255)",Position:"Left"},h[3]={Value:16,Message:"高位区域",Color:"rgb(0,255,255)",Position:"Left"},h[4]={Value:22,Message:"风险区域",Color:"rgb(0,0,255)",Position:"Left"},h[5]={Value:25.5,Message:"顶部区域",Color:"rgb(255,0,255)",Position:"Left"},i[7].Data.Data=h;var l=e+1;return t.TitlePaint[l].Data[0]=new Oe(i[6].Data,"财貌双拳",i[6].Color),t.TitlePaint[l].Title=this.FormatIndexTitle(),!0}}function Za(t,e,a,i){this.newMethod=Ha,this.newMethod(t),delete this.newMethod,this.Script=e,this.Arguments=[],this.OutVar=[],this.ApiUrl=$r.PyIndexDomain+"/hq/code",a&&(this.Arguments=a),this.RequestData=function(t,e,a){this.OutVar=[];var i=this,r={HQChart:t,WindowIndex:e,HistoryData:a},s="";for(var o in this.Arguments){s.length>0&&(s+=",");var h=this.Arguments[o];s+='"'+h.Name+'":'+h.Value}s="{"+s+"}";var l=JSON.parse(s),u=(0,Lr.default)({code:this.Script,symbol:r.HQChart.Symbol,period:r.HQChart.Period,right:r.HQChart.Right,params:l,numcount:t.MaxReqeustDataCount});return n.HttpRequest({url:this.ApiUrl,data:u,type:"post",dataType:"json",contentType:" application/json; charset=utf-8",async:!0,success:function(t){i.RecvData(t,r)},complete:function(t){},error:function(t,e){i.RecvError(t,e,r)}}),!0},this.RecvError=function(t,e,a){Fr.Chart.Log("[PyScriptIndex::RecvError] error",e),a.HQChart.ScriptErrorCallback&&a.HQChart.ScriptErrorCallback(e)},this.RecvData=function(t,e){if(0!=t.code)return Fr.Chart.Log("[PyScriptIndex::RecvData] failed.",t),void(e.HQChart.ScriptErrorCallback&&e.HQChart.ScriptErrorCallback(t.msg));Fr.Chart.Log("[PyScriptIndex::RecvData] recv data.",t);var a=t.date;for(var i in t.data){for(var r=t.data[i],n=[],s=0;s<a.length&&s<a.length;++s)if(!(s>=r.data.length)){var o=new z;o.Date=a[s],o.Value=r.data[s],n.push(o)}var h=e.HistoryData.GetFittingData(n),l=new Z;l.Data=h,l.Period=e.HQChart.Period,l.Right=e.HQChart.Right;var u={Name:r.name,Type:r.graph,LineWidth:r.width,Data:l.GetValue(),Color:r.color};this.OutVar.push(u)}this.BindData(e.HQChart,e.WindowIndex,e.HistoryData),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw()},this.BindData=function(t,e,a){t.DeleteIndexPaint(e);for(var i in this.OutVar){var r=this.OutVar[i];switch(r.Type){case"line":this.CreateLine(t,e,r,i);break;case"colorstick":this.CreateColorStock(t,e,r,i)}}var n=e+1;t.TitlePaint[n].Title=this.Name;var s="";for(var o in this.Arguments){var h=this.Arguments[o];s.length>0&&(s+=","),s+=h.Value.toString()}return s.length>0&&(t.TitlePaint[n].Title=this.Name+"("+s+")"),!0},this.CreateLine=function(t,e,a,i){var r=new st;r.Canvas=t.Canvas,r.DrawType=1,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=a.Color:r.Color=this.GetDefaultColor(i),a.LineWidth>0&&(r.LineWidth=a.LineWidth),0==a.IsShow&&(r.IsShow=!1);var n=e+1;r.Data.Data=a.Data,t.TitlePaint[n].Data[i]=new Oe(r.Data,a.Name,r.Color),t.ChartPaint.push(r)},this.CreateColorStock=function(t,e,a,i){var r=new Mt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame;var n=e+1;r.Data.Data=a.Data,t.TitlePaint[n].Data[i]=new Oe(r.Data,a.Name,this.GetDefaultColor(i)),t.ChartPaint.push(r)},this.GetDefaultColor=function(t){var e=["rgb(255,174,0)","rgb(25,199,255)","rgb(175,95,162)","rgb(236,105,65)","rgb(68,114,196)","rgb(229,0,79)","rgb(0,128,255)","rgb(252,96,154)","rgb(42,230,215)","rgb(24,71,178)"];return e[parseInt(t)%(e.length-1)]}}function Qa(t,e,a,i){this.newMethod=Za,this.newMethod(t),delete this.newMethod,this.JsonData,i.JsonData&&(this.JsonData=i.JsonData),this.RequestData=function(t,e,a){if(this.JsonData){var i={HQChart:t,WindowIndex:e,HistoryData:a};this.JsonData.code=0;var r=this.JsonData;this.RecvData(r,i)}else console.warn("[PyScriptIndex::RequestData] JsonData is null"),i.HQChart.ScriptErrorCallback&&i.HQChart.ScriptErrorCallback("json 数据不能为空")}}function $a(){this.newMethod=Ha,this.newMethod("点位研判函数"),delete this.newMethod,this.Index=new Array(new Ya("启动买点",null)),this.Index[0].LineColor="rgb(255,0,0)",this.BindData=function(t,e,a){var i=t.GetChartPaint(e);if(i.length!=this.Index.length)return!1;var r=a.GetClose(),n=(a.GetHigh(),a.GetLow()),s=Ma.REF(n,1),o=Ma.ARRAY_MULTIPLY(Ma.ARRAY_DIVIDE(Ma.SMA(Ma.ABS(Ma.ARRAY_SUBTRACT(n,s)),13,1),Ma.SMA(Ma.MAX(Ma.ARRAY_SUBTRACT(n,s),0),13,1)),100),h=Ma.EMA(Ma.ARRAY_IF(Ma.ARRAY_MULTIPLY(r,1.2),Ma.ARRAY_MULTIPLY(o,13),Ma.ARRAY_DIVIDE(o,13)),13),l=Ma.LLV(n,34),u=Ma.HHV(h,34),c=Ma.ARRAY_IF(Ma.LLV(n,56),1,0),d=Ma.ARRAY_DIVIDE(Ma.ARRAY_ADD(h,Ma.ARRAY_MULTIPLY(u,2)),2),f=Ma.ARRAY_MULTIPLY(Ma.ARRAY_DIVIDE(Ma.EMA(Ma.ARRAY_IF(Ma.ARRAY_LTE(n,l),d,0),3),618),c),m=Ma.ARRAY_GT(f,Ma.REF(f,1)),C=Ma.REF(Ma.LLV(n,100),3),p=Ma.REFDATE(C,-1),D=Ma.ARRAY_EQ(n,p),v=Ma.ARRAY_AND(m,D);i[0].Data.Data=v;var g=e+1;for(var S in i)t.TitlePaint[g].Data[S]=new Oe(i[S].Data,this.Index[S].Name,this.Index[S].LineColor);return t.TitlePaint[g].Title=this.FormatIndexTitle(),!0}}function ti(){}function ei(){this.MaxReqeustDataCount=1e3,this.StartDate=20160101,this.Data,this.ClassName="IKLineInfo",this.Explain="IKLineInfo",this.GetToday=function(){var t=new Date;return 1e4*t.getFullYear()+100*(t.getMonth()+1)+t.getDate()},this.GetRequestData=function(t){return{Symbol:t.Symbol,MaxReqeustDataCount:t.MaxReqeustDataCount,MaxRequestMinuteDayCount:t.MaxRequestMinuteDayCount,Period:t.Period}},this.NetworkFilter=function(t,e){if(!t.NetworkFilter)return!1;var a=this,i={HQChart:t},r={Name:this.ClassName+"::RequestData",Explain:this.Explain,Request:this.GetRequestData(t),Self:this,HQChart:t,PreventDefault:!1};return e&&(1==e.Update&&(r.Update={Start:{Date:e.StartDate}},i.Update={Start:{Date:e.StartDate}}),r.CallFunctionName=e.FunctionName),t.NetworkFilter(r,function(t){a.RecvData(t,i)}),1==r.PreventDefault}}function ai(){this.newMethod=ei,this.newMethod(),delete this.newMethod,this.ClassName="InvestorInfo",this.Explain="互动易",this.RequestData=function(t,e){var a=this,i={HQChart:t};if(this.Data=[],!this.NetworkFilter(t,e)){var r={filed:["question","answerdate","symbol","id"],symbol:[i.HQChart.Symbol],querydate:{StartDate:this.StartDate,EndDate:this.GetToday()},start:0,end:this.MaxReqeustDataCount},s=$r.Domain+$r.KLine.Info.Investor.ApiUrl;return n.HttpRequest({url:s,data:r,type:"post",dataType:"json",async:!0,success:function(t){a.RecvData(t,i)}}),!0}},this.RecvData=function(t,e){if(!(t.list.length<=0)){for(var a in t.list){var i=t.list[a],r=new J;r.Date=i.answerdate,r.Title=i.question,r.InfoType=kr.INVESTOR,this.Data.push(r)}e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}}}function ii(){this.newMethod=ei,this.newMethod(),delete this.newMethod,this.ClassName="AnnouncementInfo",this.Explain="公告",this.ApiType=1,this.RequestData=function(t,e){var a=this,i={HQChart:t};if(e&&!0===e.Update||(this.Data=[]),!this.NetworkFilter(t,e))if(1==this.ApiType){var r=$r.CacheDomain+"/cache/analyze/shszreportlist/"+i.HQChart.Symbol+".json";n.HttpRequest({url:r,type:"get",dataType:"json",async:!0,success:function(t){a.RecvData(t,i)},error:function(t,e){a.RecvError(t,e,i)}})}else{var r=$r.Domain+$r.KLine.Info.Announcement.ApiUrl;n.HttpRequest({url:r,data:{filed:["title","releasedate","symbol","id"],symbol:[i.HQChart.Symbol],querydate:{StartDate:this.StartDate,EndDate:this.GetToday()},start:0,end:this.MaxReqeustDataCount},type:"post",dataType:"json",async:!0,success:function(t){a.RecvData(t,i)},error:function(t,e){a.RecvError(t,e,i)}})}},this.RecvData=function(t,e){if(!(t.report.length<=0)){var a=[];for(var i in t.report){var r=t.report[i],n=new J;n.Date=r.releasedate,n.Title=r.title,n.InfoType=kr.ANNOUNCEMENT;for(var s in r.type){switch(r.type[s]){case"一季度报告":n.InfoType=kr.ANNOUNCEMENT_QUARTER_1;break;case"半年度报告":n.InfoType=kr.ANNOUNCEMENT_QUARTER_2;break;case"三季度报告":n.InfoType=kr.ANNOUNCEMENT_QUARTER_3;break;case"年度报告":n.InfoType=kr.ANNOUNCEMENT_QUARTER_4}}for(var s in r.typeex){var o=r.typeex[s];n.InfoType=kr.ANNOUNCEMENT_EX_START+o;break}a.push(n)}!0===t.Update&&this.Data.length>0?this.UpdateData(a):this.Data=a,e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}},this.UpdateData=function(t){if(t&&!(t.length<=0)){var e=new Ir.default;for(var a in this.Data){var i=this.Data[a],r=i.Date+"-"+i.InfoType+"-"+i.Title;e.add(r)}var n=0;for(var a in t){var i=t[a],r=i.Date+"-"+i.InfoType+"-"+i.Title;e.has(r)||(this.Data.push(i),++n)}Fr.Chart.Log("[AnnouncementInfo::UpdateData] add new count="+n)}},this.RecvError=function(t,e,a){console.warn("[AnnouncementInfo::RecvError] error, http ",e,t)}}function ri(){this.newMethod=ei,this.newMethod(),delete this.newMethod,this.ClassName="PforecastInfo",this.RequestData=function(t,e){var a=this,i={HQChart:t};this.Data=[];var r=$r.Domain+$r.KLine.Info.Pforecast.ApiUrl;return n.HttpRequest({url:r,data:{field:["pforecast.type","pforecast.reportdate","fweek"],condition:[{item:["pforecast.reportdate","int32","gte",this.StartDate]}],symbol:[i.HQChart.Symbol],start:0,end:this.MaxReqeustDataCount},type:"post",dataType:"json",async:!0,success:function(t){a.RecvData(t,i)}}),!0},this.RecvData=function(t,e){if(1==t.stock.length&&!(t.stock[0].stockday.length<=0)){for(var a in t.stock[0].stockday){var i=t.stock[0].stockday[a];if(i.pforecast.length>0){var r=i.pforecast[0],n=new J;n.Date=i.date,n.Title=r.type,n.InfoType=kr.PFORECAST,n.ExtendData={Type:r.type,ReportDate:r.reportdate},i.fweek&&(n.ExtendData.FWeek={},null!=i.fweek.week1&&(n.ExtendData.FWeek.Week1=i.fweek.week1),null!=i.fweek.week4&&(n.ExtendData.FWeek.Week4=i.fweek.week4)),this.Data.push(n)}}e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}}}function ni(){this.newMethod=ei,this.newMethod(),delete this.newMethod,this.ClassName="ResearchInfo",this.RequestData=function(t,e){var a=this,i={HQChart:t};this.Data=[];var r=$r.Domain+$r.KLine.Info.Research.ApiUrl;return n.HttpRequest({url:r,data:{filed:["releasedate","researchdate","level","symbol","id","type"],querydate:{StartDate:this.StartDate,EndDate:this.GetToday()},symbol:[i.HQChart.Symbol],start:0,end:this.MaxReqeustDataCount},type:"post",dataType:"json",async:!0,success:function(t){a.RecvData(t,i)}}),!0},this.RecvData=function(t,e){if(!(t.list.length<=0)){for(var a in t.list){var i=t.list[a],r=new J;r.ID=i.id,r.Date=i.researchdate,r.InfoType=kr.RESEARCH,r.ExtendData={Level:i.level,Type:i.type},this.Data.push(r)}e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}}}function si(){this.newMethod=ei,this.newMethod(),delete this.newMethod,this.ClassName="BlockTrading",this.RequestData=function(t,e){var a=this,i={HQChart:t};this.Data=[];var r=$r.Domain+$r.KLine.Info.BlockTrading.ApiUrl;return n.HttpRequest({url:r,data:{field:["blocktrading.price","blocktrading.vol","blocktrading.premium","fweek","price"],condition:[{item:["date","int32","gte",this.StartDate]},{item:["blocktrading.vol","int32","gte","0"]}],symbol:[i.HQChart.Symbol],start:0,end:this.MaxReqeustDataCount},type:"post",dataType:"json",async:!0,success:function(t){a.RecvData(t,i)}}),!0},this.RecvData=function(t,e){if(1==t.stock.length&&!(t.stock[0].stockday.length<=0)){for(var a in t.stock[0].stockday){var i=t.stock[0].stockday[a],r=new J;r.Date=i.date,r.InfoType=kr.BLOCKTRADING,r.ExtendData={Price:i.blocktrading.price,Premium:i.blocktrading.premium,Vol:i.blocktrading.vol,ClosePrice:i.price},i.fweek&&(r.ExtendData.FWeek={},null!=i.fweek.week1&&(r.ExtendData.FWeek.Week1=i.fweek.week1),null!=i.fweek.week4&&(r.ExtendData.FWeek.Week4=i.fweek.week4)),this.Data.push(r)}e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}}}function oi(){this.newMethod=ei,this.newMethod(),delete this.newMethod,this.ClassName="TradeDetail",this.RequestData=function(t,e){var a=this,i={HQChart:t};this.Data=[];var r=$r.Domain+$r.KLine.Info.TradeDetail.ApiUrl;return n.HttpRequest({url:r,data:{field:["tradedetail.typeexplain","tradedetail.type","fweek"],condition:[{item:["date","int32","gte",this.StartDate]},{item:["tradedetail.type","int32","gte","0"]}],symbol:[i.HQChart.Symbol],start:0,end:this.MaxReqeustDataCount},type:"post",dataType:"json",async:!0,success:function(t){a.RecvData(t,i)}}),!0},this.RecvData=function(t,e){if(1==t.stock.length&&!(t.stock[0].stockday.length<=0)){for(var a in t.stock[0].stockday){var i=t.stock[0].stockday[a],r=new J;r.Date=i.date,r.InfoType=kr.TRADEDETAIL,r.ExtendData={Detail:new Array};for(var n in i.tradedetail){var s=i.tradedetail[n];r.ExtendData.Detail.push({Type:s.type,TypeExplain:s.typeexplain})}i.fweek&&(r.ExtendData.FWeek={},null!=i.fweek.week1&&(r.ExtendData.FWeek.Week1=i.fweek.week1),null!=i.fweek.week4&&(r.ExtendData.FWeek.Week4=i.fweek.week4)),this.Data.push(r)}e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}}}function hi(){}function li(){this.Data,this.ClassName="IMinuteInfo"}function ui(){this.newMethod=li,this.newMethod(),delete this.newMethod,this.ClassName="MarketEventInfo",this.RequestData=function(t){var e=this;this.Data=[];var a={HQChart:t},i=$r.CacheDomain+"/cache/analyze/shszevent/marketevent/concept/"+t.TradeDate+".json";if(t.NetworkFilter){var r={Name:"MarketEventInfo::RequestData",Explain:"大盘异动",Request:{Url:i,Type:"Get",Data:{Date:t.TradeDate,Symbol:t.Symbol}},Self:this,PreventDefault:!1};if(t.NetworkFilter(r,function(t){e.RecvData(t,a),a.HQChart.UpdataChartInfo(),a.HQChart.Draw()}),1==r.PreventDefault)return}return n.HttpRequest({url:i,type:"get",dataType:"json",async:!0,success:function(t){e.RecvData(t,a)},error:function(t,e){console.warn("[MarketEventInfo::RequestData] error, http ",e,t)}}),!0},this.RecvData=function(t,e){for(var a in t.event){var i=t.event[a];for(var r in i.data){var n=i.data[r];if(Array.isArray(n)){if(n.length<2)continue;var s={Date:i.date,Time:n[0],Title:n[1],Type:0};n.length>=3&&n[2]&&"string"==typeof n[2]&&(s.Color=n[2]),n.length>=4&&n[3]&&"string"==typeof n[3]&&(s.BGColor=n[3]),this.Data.push(s)}else{if(!he.IsNumber(n.Date)||!he.IsNumber(n.Time)||!n.Title)continue;var s={Date:n.Date,Time:n.Time,Title:n.Title,Type:0};n.Color&&(s.Color=n.Color),n.BGColor&&(s.BGColor=n.BGColor),he.IsNumber(n.Price)&&(s.Price=n.Price),n.Content&&(s.Content=n.Content),n.Link&&(s.Link=n.Link),this.Data.push(s)}}}e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}}function ci(t){this.DivElement=t,this.ID=null,this.TimeOut=null,this.Hide=function(){(0,wr.default)("#"+this.ID).hide()},this.Show=function(t,e,a,i){var r={display:"block"};he.IsNumber(t)&&(r.left=t+"px"),he.IsNumber(e)&&(r.top=e+"px"),he.IsNumber(a)&&(r.width=a+"px"),he.IsNumber(i)&&(r.height=i+"px"),(0,wr.default)("#"+this.ID).css(r)}}function di(t){this.newMethod=ci,this.newMethod(t),delete this.newMethod,this.Title={ID:C()},this.ParamList={ID:C()},this.ParamData=[],this.Identify,this.HQChart,this.Create=function(){this.ID=C();var t=document.createElement("div");t.className="jchart-modifyindex-box",t.id=this.ID,t.innerHTML="<div class='parameter'>            <div class='parameter-header'>                <span></span>                <strong id='close' class='icon iconfont icon-close'></strong>            </div>            <div class='parameter-content'><input/>MA</div>            <div class='parameter-footer'>                <button class='submit' >确定</button>                <button class='cancel' >取消</button>            </div>        </div>",this.DivElement.appendChild(t),(0,wr.default)("#"+this.ID+" .submit").click({divBox:this},function(t){t.data.divBox.Hide()}),t.getElementsByTagName("span")[0].id=this.Title.ID,t.getElementsByClassName("parameter-content")[0].id=this.ParamList.ID},this.SetTitle=function(t){(0,wr.default)("#"+this.Title.ID).html(t)},this.ClearParamList=function(){(0,wr.default)("#"+this.ParamList.ID).empty(),this.ParamData=[]},this.BindParam=function(t,e){var a=t.WindowIndex[e];for(var i in a.Arguments){var r=a.Arguments[i];if(null==r.Name||isNaN(r.Value))break;var n=C(),s='<input class="row-line" id="'+n+'" value="'+r.Value+'" type="number" step="1"/>'+r.Name+"<br>";(0,wr.default)("#"+this.ParamList.ID).append(s),this.ParamData.push({ID:n,Value:r.Value})}var o=this;for(var i in this.ParamData){var r=this.ParamData[i];(0,wr.default)("#"+r.ID).mouseup({Chart:t,Identify:e,ParamIndex:i},function(t){var e=parseInt((0,wr.default)(this).val());if(!he.IsNumber(e))return void alert("参数不能为空");var a=o.HQChart,i=o.Identify,r=t.data.ParamIndex;a.WindowIndex[i].Arguments[r].Value=e,a.UpdateWindowIndex(i)}),(0,wr.default)("#"+r.ID).keyup({Chart:t,Identify:e,ParamIndex:i},function(t){var e=parseInt((0,wr.default)(this).val());if(!he.IsNumber(e))return void alert("参数不能为空");var a=o.HQChart,i=o.Identify,r=t.data.ParamIndex;a.WindowIndex[i].Arguments[r].Value=e,a.UpdateWindowIndex(i)})}},this.BindCancel=function(){var t=this;(0,wr.default)("#"+this.ID+" .cancel").click(function(){var e=t.HQChart,a=t.Identify;t.RestoreParam(e.WindowIndex[a]),e.UpdateWindowIndex(a),t.Hide()}),(0,wr.default)("#"+this.ID+" #close").click(function(){var e=t.HQChart,a=t.Identify;t.RestoreParam(e.WindowIndex[a]),e.UpdateWindowIndex(a),t.Hide()})},this.RestoreParam=function(t){for(var e in this.ParamData){var a=this.ParamData[e];t.Arguments[e].Value=a.Value}},this.DoModal=function(t){var e=t.data.Chart,a=t.data.Identify,i=e.ModifyIndexDialog;i&&(null==i.ID&&i.Create(),i.Identify=a,i.HQChart=e,i.SetTitle(e.WindowIndex[a].Name+" 指标参数设置"),i.ClearParamList(),i.BindParam(e,a),i.BindCancel(),i.Show())}}function fi(t){this.newMethod=ci,this.newMethod(t),delete this.newMethod,this.DivElement=t,this.IndexTreeApiUrl="https://opensourcecache.zealink.com/cache/hqh5/index/commonindextree.json",this.OverlayIndexTreeApiUrl="https://opensourcecache.zealink.com/cache/hqh5/index/commonindextree.json",this.IsOverlayIndex=!1,this.Create=function(){var t=document.createElement("div");t.className="jchart-changeindex-box",t.id=this.ID=C(),t.innerHTML='<div class="target-panel">\n            <div class="target-header">\n                <span>换指标</span>\n                <strong class="close-tar icon iconfont icon-close"></strong>\n            </div>\n            <div class="target-content">\n                <div class="target-left">\n                    <input type="text">\n                    <ul></ul>\n                </div>\n                <div class="target-right">\n                    <ul></ul>\n                </div>\n            </div>\n        </div>',this.DivElement.appendChild(t)},this.ReqeustData=function(){function t(t){(0,wr.default)(".target-left ul").html(""),wr.default.each(t,function(t,e){var a;a="<li>"+e.node+"</li>",(0,wr.default)(".target-left ul").append(a)}),(0,wr.default)(".target-left ul li:first-child").addClass("active-list")}function e(t){var e,a=[];wr.default.each(t,function(t,e){a.push(e.list)}),wr.default.each(a[0],function(t,a){e="<li id="+a.id+">"+a.name+"</li>",(0,wr.default)(".target-right ul").append(e)}),(0,wr.default)(".target-left ul").delegate("li","click",function(){(0,wr.default)(this).addClass("active-list").siblings().removeClass("active-list");var t=(0,wr.default)(this).index();(0,wr.default)(".target-right ul").html(""),wr.default.each(a[t],function(t,a){e="<li id="+a.id+">"+a.name+"</li>",(0,wr.default)(".target-right ul").append(e)})})}if((0,wr.default)("#"+this.ID+" .target-left ul li").length>0)return!1;var a=this.IndexTreeApiUrl;1==this.IsOverlayIndex&&(a=this.OverlayIndexTreeApiUrl),n.HttpRequest({url:a,type:"get",success:function(a){var i=a.list;t(i),e(i)}})},this.BindClose=function(t){(0,wr.default)("#"+this.ID+" .close-tar").click({Chart:t},function(t){t.data.Chart.ChangeIndexDialog.Hide()})},this.BindSearch=function(t){(0,wr.default)(".target-left input").on("input",{Chart:t},function(t){var e=new o,a=e.Search(t.target.value);(0,wr.default)(".target-right ul").html("");for(var i in a){var r=a[i],n="<li id="+r+">"+r+"</li>";(0,wr.default)(".target-right ul").append(n)}})},this.DoModal=function(t){var e=t.data.Chart,a=t.data.Identify,i=e.ChangeIndexDialog,r=t.data.IsOverlay;i&&(null==i.ID&&i.Create(),i.IsOverlayIndex=r,i.ReqeustData(),function(){(0,wr.default)(".target-right ul").undelegate().delegate("li","click",function(){var t=(0,wr.default)(this).attr("id");r?e.AddOverlayIndex({WindowIndex:a,IndexName:t}):e.ChangeIndex(a,t),(0,wr.default)(this).addClass("active-list").siblings().removeClass("active-list")})}(),i.BindSearch(e),i.BindClose(e),i.Show())}}function mi(t){this.newMethod=ci,this.newMethod(t),delete this.newMethod,this.JSChart=null,this.Height=500,this.Width=600,this.Symbol,this.TradeDate,this.HistoryData,this.Show=function(t,e,a,i){var r=document.getElementById(this.ID);if(!r)return!1;var n=r.getElementsByClassName("minute-hqchart");if(!n||1!=n.length)return!1;var s=n[0];he.IsNumber(a)&&(r.style.width=a+"px"),he.IsNumber(i)&&(r.style.height=i+"px"),he.IsNumber(t)&&(r.style.left=t+"px"),he.IsNumber(e)&&(r.style.top=e+"px"),r.style.display="block";var o=s.offsetWidth,h=s.offsetTop;s.style.width=o+"px",s.style.height=i-h-5+"px"},this.Create=function(){this.ID=C();var t=document.createElement("div");t.className="jchart-kline-minute-box",t.id=this.ID;var e=C();t.innerHTML="<div><div class='minute-dialog-title'><span></span><strong class='close-munite icon iconfont icon-close'></strong></div><div class='minute-hqchart' id='"+e+"' ></div></div>",t.style.width=this.Height+"px",t.style.height=this.Width+"px",this.DivElement.appendChild(t),this.JSChart=h.Init(document.getElementById(e));var a={Type:"历史分钟走势图",Symbol:this.Symbol,IsAutoUpdate:!1,IsShowRightMenu:!1,HistoryMinute:{TradeDate:this.TradeDate,IsShowName:!1,IsShowDate:!1}};this.JSChart.SetOption(a)},this.BindClose=function(t){(0,wr.default)("#"+this.ID+" .close-munite").click({Chart:t},function(t){t.data.Chart.MinuteDialog.Hide()})},this.DoModal=function(t){this.UpColor=$r.UpTextColor,this.DownColor=$r.DownTextColor,this.UnchagneColor=$r.UnchagneTextColor;var e=t.data.Chart,a=t.data.Tooltip,i=e.MinuteDialog;if(i.Symbol=e.Symbol,i.TradeDate=a.Data.Date,i){null==i.ID?i.Create():(i.JSChart.JSChartContainer.TradeDate=i.TradeDate,i.JSChart.ChangeSymbol(this.Symbol));var r=(t.clientX,t.clientY,c());i.Show(500/r,100/r,600,500),i.JSChart.OnSize(),this.BindClose(e),this.GetColor=function(t,e){return t>e?this.UpColor:t<e?this.DownColor:this.UnchagneColor};var n=t.data.Chart.Name,s=t.data.Tooltip.Data,o=(new Date(parseInt(s.Date/1e4),s.Date/100%100-1,s.Date%100),s.Date.toString()),h=o.substring(0,4)+"-"+o.substring(4,6)+"-"+o.substring(6,8),l="<span>"+n+"</span><span>"+h+"</span>&nbsp;<span style='color:"+this.GetColor(s.Open,s.YClose)+";'>开:"+s.Open.toFixed(2)+"</span><span style='color:"+this.GetColor(s.High,s.YClose)+";'>高:"+s.High.toFixed(2)+"</span><span style='color:"+this.GetColor(s.Low,s.YClose)+";'>低:"+s.Low.toFixed(2)+"</span><span style='color:"+this.GetColor(s.Close,s.YClose)+";'>收:"+s.Close.toFixed(2)+"</span><span style='color:"+this.VolColor+";'>量:"+he.FormatValueString(s.Vol,2)+"</span><span style='color:"+this.AmountColor+";'>额:"+he.FormatValueString(s.Amount,2)+"</span>";(0,wr.default)(".minute-dialog-title span").html(l)}}}function Ci(t){this.newMethod=ci,this.newMethod(t),delete this.newMethod,this.SelectData,this.Dialog,this.HQChart,this.RectSelectPaint,this.Close=function(){this.Dialog&&(this.DivElement.removeChild(this.Dialog),this.Dialog=null,this.ID=null),this.RectSelectPaint&&(this.RectSelectPaint.PreventClose=!1)},this.Create=function(){this.ID=C();var t=document.createElement("div");t.className="jchart-select-statistics-box",t.id=this.ID,t.innerHTML="<div class='parameter jchart-select-section'>            <div class='parameter-header'>                <span>分时图区间统计</span>                <strong id='close' class='icon iconfont icon-close'></strong>            </div>            <div class='parameter-content'>统计数据</div>        <div class='parameter-footer'>            <button id='close' class='submit' >确定</button>        </div>        </div>",this.DivElement.appendChild(t),this.Dialog=t,(0,wr.default)("#"+this.ID+" #close").click({divBox:this},function(t){t.data.divBox.Close()})},this.BindData=function(){var t=this.SelectData.Data,e=this.SelectData.Start,a=this.SelectData.End;this.HQChart.UpdateSelectRect(e,a),this.RectSelectPaint&&(this.RectSelectPaint.PreventClose=!0);for(var i={Open:0,Close:0,High:0,Low:0,Vol:0,Amount:0,Date:{Start:{Time:null,Date:null},End:{Time:null,Date:null}},Count:0},r=e;r<=a&&r<t.Data.length;++r){var n=t.Data[r];r==e&&(i.Date.Start.Date=n.Date,i.Date.Start.Time=n.Time,i.Open=n.Close,i.High=n.High,i.Low=n.Low),i.Date.End.Date=n.Date,i.Date.End.Time=n.Time,i.Close=n.Close,i.Vol+=n.Vol,i.Amount+=n.Amount,++i.Count,i.High<n.High&&(i.High=n.High),i.Low>n.Low&&(i.Low=n.Low)}i.Vol>0&&(i.AvPrice=i.Amount/i.Vol),n.Open>0&&(i.Increase=(i.Close-i.Open)/i.Open*100,i.Amplitude=(i.High-i.Low)/i.Open*100);var s=Oi(this.SelectData.Symbol),o=he.FormatDateString(i.Date.Start.Date),h=he.FormatDateString(i.Date.End.Date);o+=" "+he.FormatTimeString(i.Date.Start.Time,"HH:MM"),h+=" "+he.FormatTimeString(i.Date.End.Time,"HH:MM");var l="",u="",c="",d="";e<=0&&(l="BtnBackground"),e>=a&&(u="BtnBackground",c="BtnBackground"),a>=t.Data.length-1&&(d="BtnBackground");var f=document.createElement("div");f.className="jchart-select-table-right",f.innerHTML='<div class="jchart-select-date">\n            <span>开始: '+o+'<i class="start-date-left '+l+'"><</i><i class="start-date-right '+u+'">></i></span>\n            <span>结束: '+h+'<i class="end-date-left '+c+'"><</i><i class="end-date-right '+d+'">></i></span>\n            <span>总个数: '+i.Count+"</span>\n        </div>\n        <table>\n            <tr><td><strong>起始价: </strong><span>"+i.Open.toFixed(s)+"</span></td>               <td><strong>终止价: </strong><span>"+i.Close.toFixed(s)+"</span></td>               <td><strong>均价: </strong><span>"+(he.IsNumber(i.AvPrice)?i.AvPrice.toFixed(s):"--.--")+"</span></td></tr>\n            <tr><td><strong>最低价: </strong><span>"+i.Low.toFixed(s)+"</span></td>               <td><strong>最高价: </strong><span>"+i.High.toFixed(s)+'</span></td>               <td><strong>涨跌幅: </strong><span class="'+he.FormatValueColor(i.Increase)+'">'+i.Increase.toFixed(2)+"%</span></td></tr>\n            <tr><td><strong>振幅: </strong><span>"+i.Amplitude.toFixed(2)+"%</span></td>               <td><strong>成交量: </strong><span>"+he.FormatValueString(i.Vol,2)+"股</span></td>               <td><strong>金额: </strong><span>"+he.FormatValueString(i.Amount,2)+"元</span></td></tr>\n        </table>",(0,wr.default)(".parameter-content").html(f),this.BindEvent()},this.BindEvent=function(){var t=this;t.SelectData.Start>0&&(0,wr.default)(".jchart-select-date .start-date-left").click(function(){t.SelectData.Start--,t.BindData(),t.HQChart.UpdateSelectRect(t.SelectData.Start,t.SelectData.End)}),t.SelectData.Start<t.SelectData.End&&((0,wr.default)(".jchart-select-date .start-date-right").click(function(){t.SelectData.Start++,t.BindData(),t.HQChart.UpdateSelectRect(t.SelectData.Start,t.SelectData.End)}),(0,wr.default)(".jchart-select-date .end-date-left").click(function(){t.SelectData.End--,t.BindData(),t.HQChart.UpdateSelectRect(t.SelectData.Start,t.SelectData.End)})),t.SelectData.End<t.SelectData.Data.Data.length-1&&(0,wr.default)(".jchart-select-date .end-date-right").click(function(){t.SelectData.End++,t.BindData(),t.HQChart.UpdateSelectRect(t.SelectData.Start,t.SelectData.End)})},this.DoModal=function(t){var e=t.data.Chart;null==this.ID&&this.Create(),this.SelectData=t.data.SelectData,this.RectSelectPaint=t.data.RectSelectPaint,this.HQChart=e,this.HQChart.HideSelectRect(),this.BindData(),this.Show()}}function pi(t){this.newMethod=ci,this.newMethod(t),delete this.newMethod,this.SelectData,this.Dialog,this.HQChart,this.RectSelectPaint,this.Close=function(){this.Dialog&&(this.DivElement.removeChild(this.Dialog),this.Dialog=null),this.RectSelectPaint&&(this.RectSelectPaint.PreventClose=!1)},this.Create=function(){this.ID=C();var t=document.createElement("div");t.className="jchart-select-statistics-box",t.id=this.ID,t.innerHTML="<div class='parameter jchart-select-section'>            <div class='parameter-header'>                <span>区间统计</span>                <strong id='close' class='icon iconfont icon-close'></strong>            </div>            <div class='parameter-content'>统计数据</div>        <div class='parameter-footer'>            <button id='close' class='submit' >确定</button>            <button id='match' class='submit' >形态匹配</button>        </div>        </div>",this.DivElement.appendChild(t),this.Dialog=t,(0,wr.default)("#"+this.ID+" #close").click({divBox:this},function(t){t.data.divBox.Close()}),(0,wr.default)("#"+this.ID+" #match").click({divBox:this},function(t){t.data.divBox.KLineMatch()})},this.BindData=function(){var t=this.SelectData.Data,e=this.SelectData.Start,a=this.SelectData.End;this.HQChart.UpdateSelectRect(e,a),this.RectSelectPaint&&(this.RectSelectPaint.PreventClose=!0);for(var i={Open:0,Close:0,High:0,Low:0,YClose:0,Vol:0,Amount:0,Date:{Start:{Time:null,Date:null},End:{Time:null,Date:null}},Count:0,KLine:{Up:0,Down:0,Unchanged:0}},r=e;r<=a&&r<t.Data.length;++r){var n=t.Data[r];r==e&&(i.Date.Start.Date=n.Date,i.Date.Start.Time=n.Time,i.Open=n.Open,i.High=n.High,i.Low=n.Low,i.YClose=n.YClose),i.Date.End.Date=n.Date,i.Date.End.Time=n.Time,i.Close=n.Close,i.Vol+=n.Vol,i.Amount+=n.Amount,++i.Count,i.High<n.High&&(i.High=n.High),i.Low>n.Low&&(i.Low=n.Low),n.Close>n.Open?++i.KLine.Up:n.Close<n.Open?++i.KLine.Down:++i.KLine.Unchanged}i.Vol>0&&(i.AvPrice=i.Amount/i.Vol),n.YClose>0&&(i.Increase=(i.Close-i.YClose)/i.YClose*100,i.Amplitude=(i.High-i.Low)/i.YClose*100);var s=Oi(this.SelectData.Symbol),o=he.FormatDateString(i.Date.Start.Date),h=he.FormatDateString(i.Date.End.Date);Z.IsMinutePeriod(this.HQChart.Period)?(o+=" "+he.FormatTimeString(i.Date.Start.Time,"HH:MM"),h+=" "+he.FormatTimeString(i.Date.End.Time,"HH:MM")):(Z.IsSecondPeriod(this.HQChart.Period)||Z.IsTickPeriod(this.HQChart.Period))&&(o+=" "+he.FormatTimeString(i.Date.Start.Time,"HH:MM:SS"),h+=" "+he.FormatTimeString(i.Date.End.Time,"HH:MM:SS"));var l="",u="",c="",d="";e<=0&&(l="BtnBackground"),e>=a&&(u="BtnBackground",c="BtnBackground"),a>=t.Data.length-1&&(d="BtnBackground");var f=document.createElement("div");f.className="jchart-select-table-right",f.innerHTML='<div class="jchart-select-date">\n            <span>开始: '+o+'<i class="start-date-left '+l+'"><</i><i class="start-date-right '+u+'">></i></span>\n            <span>结束: '+h+'<i class="end-date-left '+c+'"><</i><i class="end-date-right '+d+'">></i></span>\n            <span>总个数: '+i.Count+"</span>\n        </div>\n        <table>\n            <tr><td><strong>起始价: </strong><span>"+i.YClose.toFixed(s)+"</span></td>               <td><strong>最终价: </strong><span>"+i.Close.toFixed(s)+"</span></td>               <td><strong>均价: </strong><span>"+(he.IsNumber(i.AvPrice)?i.AvPrice.toFixed(s):"--.--")+"</span></td></tr>\n            <tr><td><strong>最低价: </strong><span>"+i.Low.toFixed(s)+"</span></td>               <td><strong>最高价: </strong><span>"+i.High.toFixed(s)+'</span></td>               <td><strong>涨跌幅: </strong><span class="'+he.FormatValueColor(i.Increase)+'">'+i.Increase.toFixed(2)+"%</span></td></tr>\n            <tr><td><strong>振幅: </strong><span>"+i.Amplitude.toFixed(2)+"%</span></td>               <td><strong>成交量: </strong><span>"+he.FormatValueString(i.Vol,2)+"股</span></td>               <td><strong>金额: </strong><span>"+he.FormatValueString(i.Amount,2)+"元</span></td></tr>\n            <tr><td><strong>阴线: </strong><span>"+i.KLine.Up+"</span></td>               <td><strong>阳线: </strong><span>"+i.KLine.Down+"</span></td>               <td><strong>平线: </strong><span>"+i.KLine.Unchanged+"</span></td></tr>\n        </table>",(0,wr.default)(".parameter-content").html(f),this.BindEvent()},this.BindEvent=function(){var t=this;t.SelectData.Start>0&&(0,wr.default)(".jchart-select-date .start-date-left").click(function(){t.SelectData.Start--,t.BindData(),t.HQChart.UpdateSelectRect(t.SelectData.Start,t.SelectData.End)}),t.SelectData.Start<t.SelectData.End&&((0,wr.default)(".jchart-select-date .start-date-right").click(function(){t.SelectData.Start++,t.BindData(),t.HQChart.UpdateSelectRect(t.SelectData.Start,t.SelectData.End)}),(0,wr.default)(".jchart-select-date .end-date-left").click(function(){t.SelectData.End--,t.BindData(),t.HQChart.UpdateSelectRect(t.SelectData.Start,t.SelectData.End)})),t.SelectData.End<t.SelectData.Data.Data.length-1&&(0,wr.default)(".jchart-select-date .end-date-right").click(function(){t.SelectData.End++,t.BindData(),t.HQChart.UpdateSelectRect(t.SelectData.Start,t.SelectData.End)})},this.DoModal=function(t){var e=t.data.Chart;null==this.ID&&this.Create(),this.SelectData=t.data.SelectData,this.RectSelectPaint=t.data.RectSelectPaint,this.HQChart=e,this.HQChart.HideSelectRect(),this.BindData(),this.Show()},this.KLineMatch=function(t){var e=new vi(this.DivElement);e.DoModal({data:{Title:"计算中......",Chart:this.HQChart}}),this.Close();var a=this.HQChart,i={Scope:{Plate:["CNA.ci"],Minsimilar:.9},WaitDialog:e};a.RequestKLineMatch(this.SelectData,i)}}function Di(t){this.newMethod=ci,this.newMethod(t),delete this.newMethod,this.MatchData,this.Sample,this.Dialog,this.HQChart,this.PageData,this.Close=function(){this.DivElement.removeChild(this.Dialog)},this.Create=function(){this.ID=C();var t=document.createElement("div");t.className="jchart-kline-match-box",t.id=this.ID,t.innerHTML="<div class='parameter jchart-kline-match-box'>\n            <div class='parameter-header'>\n                <span>形态匹配</span>\n                <strong id='close' class='icon iconfont icon-close'></strong>\n            </div>\n            <div class='parameter-content'>\n                <p class='dataCount'></p>\n                <table class='matchTable'>\n                    <thead>\n                        <tr>\n                            <td>股票名称</td>\n                            <td>匹配度</td>\n                            <td>时间段</td>\n                        </tr>\n                    </thead>\n                    <tbody>\n                    </tbody>\n                </table>\n                <div class='pagination' data-current='1'></div>\n            </div>\n            <div class='parameter-footer'>\n                <button id='close' class='submit' >确定</button>\n            </div>\n        </div>".trim(),this.DivElement.appendChild(t),this.Dialog=t,(0,wr.default)("#"+this.ID+" #close").click({divBox:this},function(t){t.data.divBox.Close()})},this.BindData=function(){Fr.Chart.Log("[KLineMatchDialog::BindData] 形态源: "+this.Sample.Stock.Name+" 区间:"+this.Sample.Date.Start+" - "+this.Sample.Date.End);var t=this.MatchData.length+1,e={NewData:{},MetaData:[],PageCount:0,Count:t},a=0;(0,wr.default)("#"+this.ID+" .dataCount").html("个数："+t);for(var i=0;i<t;i++){var r={};if(0==i)r={Symbol:this.Sample.Stock.Symbol,Name:this.Sample.Stock.Name,Rate:"形态源",Color:"red",Date:this.Sample.Date.Start+"-"+this.Sample.Date.End};else{var n=this.MatchData[i-1];r={Symbol:n.Symbol,Name:n.Name,Rate:Number(100*n.Similar).toFixed(2),Color:"",Date:n.Start+"-"+n.End}}e.MetaData.push(r)}a=e.Count%10==0?e.Count/10:Math.floor(e.Count/10)+1,e.PageCount=a,this.PaginationMetaData(e),this.PageData=e,Fr.Chart.Log("[KLineMatchDialog::DoModal pageData]",e),this.RenderDom(1),this.PaginationInit("#"+this.ID,e.PageCount,this.paginationCallback)},this.RenderDom=function(t){var e=this.PageData.NewData[t];Fr.Chart.Log("[KLineMatchDialog::RenderDom currentPageData]",e);for(var a="",i=0;i<e.length;i++)a+=("<tr>\n                        <td class="+e[i].Color+">"+e[i].Name+"</td>\n                        <td class="+e[i].Color+">"+e[i].Rate+"</td>\n                        <td class="+e[i].Color+">"+e[i].Date+"</td>\n                    </tr>").trim();(0,wr.default)("#"+this.ID+" .matchTable tbody").html(a)};var e=this;this.paginationCallback=function(t){e.RenderDom(t),e.PaginationInit("#"+e.ID,e.PageData.PageCount,e.paginationCallback)},this.PaginationInit=function(t,e,a){var i="",r=(0,wr.default)(t+" .pagination").data("current"),n=0;if(r<5)if(e>=5)for(var s=0;s<5;s++)i+=s+1!=r?"<span>"+(s+1)+"</span>":"<span class='active'>"+(s+1)+"</span>";else for(var s=0;s<e;s++)i+=s+1!=r?"<span>"+(s+1)+"</span>":"<span class='active'>"+(s+1)+"</span>";else{n=r+1>e?r:r+1;for(var o=r-3;o<=n;o++)i+=o!=r?"<span>"+o+"</span>":"<span class='active'>"+o+"</span>"}i="<span class='beforePage'>上一页</span>"+i+"<span class='nextPage'>下一页</span>",(0,wr.default)(t+" .pagination").html(i),(0,wr.default)(t+" .pagination span").bind("click",{maxpage:e,Callback:a},this.PaginationCurrentIndex)},this.PaginationCurrentIndex=function(t){var e=(0,wr.default)(this).text();Fr.Chart.Log("[::PaginationCurrentIndex text]",e);var a=Number((0,wr.default)(this).parent().data("current")),i=t.data.maxpage,r=t.data.Callback,n=1;n="上一页"===e?1===a?a:a-1:"下一页"===e?a===i?a:a+1:Number(e),(0,wr.default)(this).parent().data("current",n),r(n)},this.PaginationMetaData=function(t){for(var e={},a=t.MetaData,i=t.PageCount,r=0;r<i;r++){for(var n=[],s=0;s<10;s++){var o=10*r+s;if(!(o<=a.length-1))break;var h=a[o];n.push(h)}e[r+1]=n}t.NewData=e},this.DoModal=function(t){var e=t.data.Chart;null==this.ID&&this.Create(),this.MatchData=t.data.MatchData,this.Sample=t.data.Sample,this.HQChart=e,this.BindData();var a=e.Frame.ChartBorder,i=(p(),a.GetWidth()/2),r=a.GetHeight()/2;this.Show(i,r,200,200)}}function vi(t){this.newMethod=ci,this.newMethod(t),delete this.newMethod,this.Title="加载中......",this.Dialog,this.Close=function(){this.Dialog&&(this.DivElement.removeChild(this.Dialog),this.Dialog=null)},this.SetTitle=function(t){this.Title=t,this.Dialog},this.Create=function(){this.ID=C();var t=document.createElement("div");t.className="jchart-wait-box",t.id=this.ID,t.innerHTML=("<div class='parameter jchart-kline-match-box'>\n            <div class='parameter-header'>\n                <span>"+this.Title+"</span>\n            </div>\n        </div>").trim(),this.DivElement.appendChild(t),this.Dialog=t},this.DoModal=function(t){this.Title=t.data.Title;var e=t.data.Chart;null==this.ID&&this.Create();var a=e.Frame.ChartBorder,i=(p(),a.GetWidth()/2),r=a.GetHeight()/2;this.Show(i,r,200,40)}}function gi(t){this.newMethod=ci,this.newMethod(t),delete this.newMethod,this.option={},this.Create=function(){var t=this;this.ID=C(),t.BindData(),t.BindEvent()},this.BindData=function(){var t=this,e=this.DivElement.id,a=(0,wr.default)("#"+e);a.find("div[id^='topMenu_']").remove(),a.find("div[id^='childMenu_']").remove();var i=(0,wr.default)("<div />");i.attr("id","topMenu_"+t.ID).addClass("context-menu-wrapper topmenu").hide(),a.append(i);var r=(0,wr.default)("<table />");r.attr({id:"topTable_"+t.ID,cellspacing:"0",cellpadding:"0"}).addClass("context-menu"),i.append(r),r.append(t.childrenList(t.option.data));for(var n=0;n<t.option.data.length;n++){if(void 0!==t.option.data[n].children){var s=(0,wr.default)("<div />");s.attr({id:"childMenu_"+t.ID+n,"data-index":n}).addClass("context-menu-wrapper").hide(),a.append(s);var o=(0,wr.default)("<table />");o.attr({id:"childTable_"+t.ID+n,cellspacing:"0",cellpadding:"0"}).addClass("context-menu"),s.append(o),o.append(t.childrenList(t.option.data[n].children))}}},this.Update=function(){var t=this;t.BindData(),t.BindEvent()},this.childrenList=function(t){for(var e=[],a=0;a<t.length;a++){var i=void 0!==t[a].isBorder&&t[a].isBorder,r=(0,wr.default)("<tr />");r.addClass("font_Arial context-menu"),i&&r.addClass("border");var n=(0,wr.default)("<td />");t[a].selected?n.addClass("spacer context-menu").html("√"):n.addClass("spacer context-menu");var s=(0,wr.default)("<td />");s.addClass("text").html(t[a].text);var o=(0,wr.default)("<td />");o.addClass("right shortcut");var h=(0,wr.default)("<td />");h.addClass(void 0!==t[a].children?"submenu-arrow":"context-menu spacer"),r.append(n).append(s).append(o).append(h),e.push(r)}return e},this.Show=function(t){var e=this;wr.default.extend(e.option,t),e.ID?e.Update():e.Create();var a=(0,wr.default)("#topMenu_"+e.ID),i=a.outerWidth(),r=a.outerHeight(),n=e.option.x,s=e.option.y;i>e.option.position.X+e.option.position.W-n&&(n-=i),r>e.option.position.Y+e.option.position.H-s&&(s-=r),a.hide(),a.css({position:"absolute",left:n+"px",top:s+"px"}).show(),this.isInit=!0},this.Hide=function(){var t=this;void 0!==wr.default&&((0,wr.default)("#topMenu_"+t.ID).hide(),(0,wr.default)("[id^='childMenu_"+t.ID+"']").hide())},this.BindEvent=function(){var t=this,e=(0,wr.default)("[id^='childMenu_"+t.ID+"']");(0,wr.default)("#topTable_"+t.ID).find("tr").mouseenter(function(){var a=(0,wr.default)(this),i=a.index(),r=(0,wr.default)("#topMenu_"+t.ID),n=(0,wr.default)("#childMenu_"+t.ID+i),s=a.outerWidth(),o=a.outerHeight(),h=r.position().left+s+1,l=r.position().top+o*i;s>t.option.position.X+t.option.position.W-h&&(h=h-s-r.outerWidth()-2),n.outerHeight()>t.option.position.Y+t.option.position.H-l&&(l=r.position().top+r.outerHeight()-n.outerHeight()),e.hide(),n.css({left:h+"px",top:l+"px"}).show()}).mouseleave(function(){var e=(0,wr.default)(this).index();setTimeout(function(){1!=(0,wr.default)("#childMenu_"+t.ID+e).attr("data-isShow")&&(0,wr.default)("#childMenu_"+t.ID+e).hide()},10)}).click(function(){var e=(0,wr.default)(this),a=e.index();"function"==wr.default.type(t.option.data[a].click)&&(t.option.data[a].click(t.option.returnData),e.hide())}).contextmenu(function(){return!1}),e.mouseenter(function(){(0,wr.default)(this).attr("data-isShow","1")}).mouseleave(function(){(0,wr.default)(this).attr("data-isShow","0")}).contextmenu(function(){return!1}),e.find("tr").click(function(){var a=(0,wr.default)(this),i=parseInt(a.closest("div").attr("data-index")),r=a.index();"function"==wr.default.type(t.option.data[i].children[r].click)&&(t.option.data[i].children[r].click(t.option.windowIndex||1),e.hide())})},this.GetPeriod=function(t){var e=[{text:"日线",Value:0,click:function(){t.ChangePeriod(0)}},{text:"周线",Value:1,click:function(){t.ChangePeriod(1)}},{text:"双周线",Value:21,click:function(){t.ChangePeriod(21)}},{text:"月线",Value:2,click:function(){t.ChangePeriod(2)}},{text:"季线",Value:9,click:function(){t.ChangePeriod(9)}},{text:"半年",Value:22,click:function(){t.ChangePeriod(22)}},{text:"年线",Value:3,click:function(){t.ChangePeriod(3)}},{text:"1分",Value:4,click:function(){t.ChangePeriod(4)}},{text:"5分",Value:5,click:function(){t.ChangePeriod(5)}},{text:"15分",Value:6,click:function(){t.ChangePeriod(6)}},{text:"30分",Value:7,click:function(){t.ChangePeriod(7)}},{text:"60分",Value:8,click:function(){t.ChangePeriod(8)}},{text:"2小时",Value:11,click:function(){t.ChangePeriod(11)}},{text:"4小时",Value:12,click:function(){t.ChangePeriod(12)}},{text:"分笔",Value:10,click:function(){t.ChangePeriod(10)}},{text:"自定义周期:3分钟",Value:20003,click:function(){t.ChangePeriod(20003)}},{text:"自定义周期:35分钟",Value:20035,click:function(){t.ChangePeriod(20035)}},{text:"自定义周期:8日",Value:40008,click:function(){t.ChangePeriod(40008)}}];for(var a in e){var i=e[a];if(i.Value==t.Period){i.selected=!0;break}}return e},this.GetRight=function(t){var e=[{text:"不复权",click:function(){t.ChangeRight(0)}},{text:"前复权",click:function(){t.ChangeRight(1)}},{text:"后复权",click:function(){t.ChangeRight(2)}}];return t.Right>=0&&t.Right<e.length&&(e[t.Right].selected=!0),e},this.GetIndex=function(t){return[{text:"均线",click:function(e){t.ChangeIndex(e,"均线")}},{text:"BOLL",click:function(e){t.ChangeIndex(e,"BOLL")},isBorder:!0},{text:"MACD",click:function(e){t.ChangeIndex(e,"MACD")}},{text:"KDJ",click:function(e){t.ChangeIndex(e,"KDJ")}},{text:"VOL",click:function(e){t.ChangeIndex(e,"VOL")}},{text:"RSI",click:function(e){t.ChangeIndex(e,"RSI")}},{text:"BRAR",click:function(e){t.ChangeIndex(e,"BRAR")}},{text:"WR",click:function(e){t.ChangeIndex(e,"WR")}},{text:"BIAS",click:function(e){t.ChangeIndex(e,"BIAS")}},{text:"OBV",click:function(e){t.ChangeIndex(e,"OBV")}},{text:"DMI",click:function(e){t.ChangeIndex(e,"DMI")}},{text:"CR",click:function(e){t.ChangeIndex(e,"CR")}},{text:"PSY",click:function(e){t.ChangeIndex(e,"PSY")}},{text:"CCI",click:function(e){t.ChangeIndex(e,"CCI")}},{text:"DMA",click:function(e){t.ChangeIndex(e,"DMA")}},{text:"TRIX",click:function(e){t.ChangeIndex(e,"TRIX")}},{text:"VR",click:function(e){t.ChangeIndex(e,"VR")}},{text:"EMV",click:function(e){t.ChangeIndex(e,"EMV")}},{text:"ROC",click:function(e){t.ChangeIndex(e,"ROC")}},{text:"MIM",click:function(e){t.ChangeIndex(e,"MIM")}},{text:"FSL",click:function(e){t.ChangeIndex(e,"FSL")}}]},this.GetColorIndex=function(t){var e=[{text:"十字星",click:function(e){t.ChangeInstructionIndex("五彩K线-十字星")}},{text:"早晨之星",click:function(e){t.ChangeInstructionIndex("五彩K线-早晨之星")}},{text:"垂死十字",click:function(e){t.ChangeInstructionIndex("五彩K线-垂死十字")}},{text:"三只乌鸦",click:function(e){t.ChangeInstructionIndex("五彩K线-三只乌鸦")}},{text:"光脚阴线",click:function(e){t.ChangeInstructionIndex("五彩K线-光脚阴线")}},{text:"黄昏之星",click:function(e){t.ChangeInstructionIndex("五彩K线-黄昏之星")}}];return t.ColorIndex&&(e[e.length-1].isBorder=!0,e.push({text:"删除五彩K线",click:function(e){t.CancelInstructionIndex()}})),e},this.GetTradeIndex=function(t){var e=[{text:"BIAS",click:function(e){t.ChangeInstructionIndex("交易系统-BIAS")}},{text:"CCI",click:function(e){t.ChangeInstructionIndex("交易系统-CCI")}},{text:"DMI",click:function(e){t.ChangeInstructionIndex("交易系统-DMI")}},{text:"KD",click:function(e){t.ChangeInstructionIndex("交易系统-KD")}},{text:"BOLL",click:function(e){t.ChangeInstructionIndex("交易系统-BOLL")}},{text:"KDJ",click:function(e){t.ChangeInstructionIndex("交易系统-KDJ")}}];return t.TradeIndex&&(e[e.length-1].isBorder=!0,e.push({text:"删除专家系统",click:function(e){t.CancelInstructionIndex()}})),e},this.GetOverlay=function(t){var e=[{text:"上证指数",click:function(){t.OverlaySymbol("000001.sh")}},{text:"深证成指",click:function(){t.OverlaySymbol("399001.sz")}},{text:"中小板指",click:function(){t.OverlaySymbol("399005.sz")}},{text:"创业板指",click:function(){t.OverlaySymbol("399006.sz")}},{text:"沪深300",click:function(){t.OverlaySymbol("000300.sh")}}];for(var a in t.OverlayChartPaint){var i=t.OverlayChartPaint[a],r=i.Symbol,n=new _r.default([["000001.sh",0],["399001.sz",1],["399005.sz",2],["399006.sz",3],["000300.sh",4]]);if(n.has(r)){var s;!function(){s=e[n.get(r)];var a=r;s.selected=!0,s.click=function(){t.DeleteOverlaySymbol(a)}}()}}return t.OverlayChartPaint&&t.OverlayChartPaint.length>0&&(e[e.length-1].isBorder=!0,e.push({text:"取消叠加",click:function(){t.ClearOverlaySymbol()}})),e},this.GetKLineType=function(t){var e=[{text:"K线(空心阳线)",click:function(){t.ChangeKLineDrawType(3)}},{text:"K线(实心阳线)",click:function(){t.ChangeKLineDrawType(0)}},{text:"美国线",click:function(){t.ChangeKLineDrawType(2)}},{text:"收盘线",click:function(){t.ChangeKLineDrawType(1)}},{text:"收盘面积",click:function(){t.ChangeKLineDrawType(4)}},{text:"K线(空心阳线阴线)",click:function(){t.ChangeKLineDrawType(6)}}];switch(t.KLineDrawType){case 0:e[1].selected=!0;break;case 1:e[3].selected=!0;break;case 2:e[2].selected=!0;break;case 3:e[0].selected=!0;break;case 4:e[4].selected=!0;break;case 6:e[5].selected=!0}return e},this.GetIndexWindowCount=function(t){var e=[{text:"1个窗口",click:function(){t.ChangeIndexWindowCount(1)}},{text:"2个窗口",click:function(){t.ChangeIndexWindowCount(2)}},{text:"3个窗口",click:function(){t.ChangeIndexWindowCount(3)}},{text:"4个窗口",click:function(){t.ChangeIndexWindowCount(4)}},{text:"5个窗口",click:function(){t.ChangeIndexWindowCount(5)}}],a=t.Frame.SubFrame.length;return a-1>=0&&a-1<e.length&&(e[a-1].selected=!0),e},this.GetCoordinateType=function(t){var e=[{text:"普通坐标",click:function(){t.ChangeCoordinateType({Type:0})}},{text:"百分比坐标",click:function(){t.ChangeCoordinateType({Type:1})}},{text:"反转坐标",click:function(){t.ChangeCoordinateType({IsReverse:!0})}},{text:"对数坐标",click:function(){t.ChangeCoordinateType({Type:2})}},{text:"等比坐标",click:function(){t.ChangeCoordinateType({Type:3})}},{text:"等分坐标",click:function(){t.ChangeCoordinateType({Type:4})}},{text:"黄金分割",click:function(){t.ChangeCoordinateType({Type:5})}}];return t.Frame&&t.Frame.SubFrame&&t.Frame.SubFrame.length>0&&(1==t.Frame.SubFrame[0].Frame.CoordinateType&&(e[2].selected=!0,e[2].click=function(){t.ChangeCoordinateType({IsReverse:!1})}),1==t.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType?e[1].selected=!0:0==t.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType?e[0].selected=!0:2==t.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType?e[3].selected=!0:3==t.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType?e[4].selected=!0:4==t.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType?e[5].selected=!0:5==t.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType&&(e[6].selected=!0)),e},this.GetDragModeType=function(t){var e=[{text:"禁止拖拽",click:function(){t.DragMode=0}},{text:"启动拖拽",click:function(){t.DragMode=1}},{text:"区间选择",click:function(){t.DragMode=2}}];return t.DragMode>=0&&t.DragMode<e.length&&(e[t.DragMode].selected=!0),e},this.GetTools=function(t){var e=[],a=t.GetExtendChartByClassName("DrawToolsButton");a?e.push({text:"关闭画图工具",click:function(){for(var e=a.Chart.Width,i=parseInt(a.Index),r=i+1;r<t.ExtendChartPaint.length;++r){var n=t.ExtendChartPaint[r];"StockChip"==n.ClassName&&(n.Left-=e)}t.DeleteExtendChart(a),t.Frame.ChartBorder.Right-=e,t.SetSizeChange(!0),t.Draw()}}):e.push({text:"画图工具",click:function(){var e={Name:"画图工具",Top:t.Frame.ChartBorder.Top};t.CreateExtendChart(e.Name,e);t.SetSizeChange(!0),t.Draw()}});var i=t.GetExtendChartByClassName("StockChip");return i?e.push({text:"关闭移动筹码",click:function(){for(var e=i.Chart.Width,a=parseInt(i.Index),r=a+1;r<t.ExtendChartPaint.length;++r){var n=t.ExtendChartPaint[r];"DrawToolsButton"==n.ClassName&&(n.Left-=e)}t.DeleteExtendChart(i),t.Frame.ChartBorder.Right-=e,t.SetSizeChange(!0),t.Draw()}}):e.push({text:"移动筹码",click:function(){var e={Name:"筹码分布",ShowType:1,Width:230};t.CreateExtendChart(e.Name,e);t.SetSizeChange(!0),t.Draw()}}),e},this.GetKLineInfo=function(t){var e=new Ir.default;for(var a in t.ChartInfo){var i=t.ChartInfo[a];e.add(i.ClassName)}var r=["公告","业绩预告","调研","大宗交易","龙虎榜","互动易"],n=[];for(var a in r){var s=r[a],o=ti.GetClassInfo(s);if(o){var i=this.CreateKlineInfoItem(s,e.has(o.ClassName),t);n.push(i)}}if(t.ChartInfo.length>0){n[n.length-1].isBorder=!0;var i={text:"删除所有",click:function(){t.ClearKLineInfo()}};n.push(i)}return n},this.CreateKlineInfoItem=function(t,e,a){var i={text:t,selected:e};return i.click=e?function(){a.DeleteKLineInfo(t)}:function(){a.AddKLineInfo(t,!0)},i},this.DoModal=function(t){var e=t.data.Chart,a=e.RightMenu,i=t.offsetX,r=t.offsetY,n=[{text:"分析周期",children:this.GetPeriod(e)},{text:"复权处理",children:this.GetRight(e)},{text:"指标切换",children:this.GetIndex(e)},{text:"五彩K线",children:this.GetColorIndex(e)},{text:"专家系统",children:this.GetTradeIndex(e)},{text:"信息地雷",children:this.GetKLineInfo(e)},{text:"叠加品种",children:this.GetOverlay(e)},{text:"主图线型",children:this.GetKLineType(e)},{text:"坐标类型",children:this.GetCoordinateType(e)},{text:"指标窗口个数",children:this.GetIndexWindowCount(e)},{text:"鼠标拖拽",children:this.GetDragModeType(e)},{text:"工具",children:this.GetTools(e)}],s=e.Symbol.toUpperCase();(an.IsSHSZIndex(e.Symbol)||an.IsBIT(s))&&n.splice(1,1);var o=t.data.FrameID,h=this.GetOverlayIndex(e,o);if(h&&h.length>0){var l={text:"删除叠加指标",children:this.GetDeleteOverlayIndex(e,h)};n.splice(3,0,l)}Fr.Chart.Log("[KLineRightMenu::DoModal]",o),a.Show({windowIndex:o,x:i+e.UIElement.offsetLeft,y:r+e.UIElement.offsetTop,position:e.Frame.Position,data:n}),(0,wr.default)(document).click(function(){a.Hide()})},this.GetOverlayIndex=function(t,e){if(e>=t.Frame.SubFrame.length||e<0)return[];var a=[],i=t.Frame.SubFrame[e];for(var r in i.OverlayIndex){var n=i.OverlayIndex[r];a.push({Name:n.Script.Name,Identify:n.Identify})}return a},this.GetDeleteOverlayIndex=function(t,e){var a=[];for(var i in e)!function(){var r=e[i].Identify;a.push({text:e[i].Name,click:function(){t.DeleteOverlayWindowsIndex(r)}})}();return a}}function Si(t){this.newMethod=gi,this.newMethod(t),delete this.newMethod,this.DoModal=function(e){var a=e.data.Chart,i=this,r=e.data.X,n=e.data.Y,s=[{text:"区间统计",click:function(){Fr.Chart.Log("[KLineSelectRightMenu::click] 区间统计"),i.Hide(),new pi(t).DoModal(e)}},{text:"区间放大",click:function(){Fr.Chart.Log("[KLineSelectRightMenu::click] 区间放大"),e.data.Chart.ShowSelectData(e.data.SelectData)}}];i.Show({x:r,y:n,position:a.Frame.Position,data:s})},this.Show=function(t){var e=this;wr.default.extend(e.option,t),e.ID||e.Create();var a="topMenu_"+e.ID;document.getElementById(a)||e.Create();var i=(0,wr.default)("#topMenu_"+e.ID),r=i.outerWidth(),n=i.outerHeight();i.contextmenu(function(){return!1});var s=e.option.x,o=e.option.y;r>e.option.position.X+e.option.position.W-s&&(s-=r),n>e.option.position.Y+e.option.position.H-o&&(o-=n),i.hide(),i.css({position:"absolute",left:s+"px",top:o+"px"}).show(),(0,wr.default)("#topMenu_"+e.ID).find("tr").show(),this.isInit=!0}}function Ti(t){this.newMethod=gi,this.newMethod(t),delete this.newMethod,this.DoModal=function(t){var e=t.data.Chart,a=e.RightMenu,i=t.offsetX,r=t.offsetY,n=[{text:"叠加品种",children:this.GetOverlay(e)},{text:"多日分时图",children:this.GetDayCount(e)},{text:"指标窗口个数",children:this.GetIndexWindowCount(e)},{text:"副图指标切换",children:this.GetIndex(e)},{text:"区间选择",children:this.GetSelectRect(e)}],s=e.Symbol;an.IsSHSZStockA(s)&&n.push({text:"集合竞价",children:this.GetShowBeforeData(e)}),n.push({text:"工具",children:this.GetTools(e)});var o=t.data.FrameID;Fr.Chart.Log("[MinuteRightMenu::DoModal]",o),a.Show({windowIndex:o,x:i+e.UIElement.offsetLeft,y:r+e.UIElement.offsetTop,position:e.Frame.Position,data:n}),(0,wr.default)(document).click(function(){a.Hide()})},this.GetDayCount=function(t){var e=[{text:"当日分时图",click:function(){t.ChangeDayCount(1)},isBorder:!0},{text:"最近2日",click:function(){t.ChangeDayCount(2)}},{text:"最近3日",click:function(){t.ChangeDayCount(3)}},{text:"最近4日",click:function(){t.ChangeDayCount(4)}},{text:"最近5日",click:function(){t.ChangeDayCount(5)}},{text:"最近6日",click:function(){t.ChangeDayCount(6)}}];return t.DayCount-1>=0&&t.DayCount-1<e.length&&(e[t.DayCount-1].selected=!0),e},this.GetIndex=function(t){return[{text:"MACD",click:function(e){t.ChangeIndex(e,"MACD")}},{text:"DMI",click:function(e){t.ChangeIndex(e,"DMI")}},{text:"DMA",click:function(e){t.ChangeIndex(e,"DMA")}},{text:"BRAR",click:function(e){t.ChangeIndex(e,"BRAR")}},{text:"KDJ",click:function(e){t.ChangeIndex(e,"KDJ")}},{text:"RSI",click:function(e){t.ChangeIndex(e,"RSI")}},{text:"WR",click:function(e){t.ChangeIndex(e,"WR")}},{text:"CCI",click:function(e){t.ChangeIndex(e,"CCI")}},{text:"TRIX",click:function(e){t.ChangeIndex(e,"TRIX")}}]},this.GetShowBeforeData=function(t){if(t.IsShowBeforeData){var e=[{text:"隐藏",click:function(){t.ShowCallAuctionData({Left:!1,MultiDay:{Left:!1}})}}];return e}var e=[{text:"显示",click:function(){t.ShowCallAuctionData({Left:!0,MultiDay:{Left:!0}})}}];return e},this.GetSelectRect=function(t){if(t.EnableSelectRect){var e=[{text:"禁用区间选择",click:function(){t.EnableSelectRect=!1}}];return e}var e=[{text:"启动区间选择",click:function(){t.EnableSelectRect=!0}}];return e},this.GetIndexWindowCount=function(t){var e=[{text:"1个窗口",click:function(){t.ChangeIndexWindowCount(2)}},{text:"2个窗口",click:function(){t.ChangeIndexWindowCount(3)}},{text:"3个窗口",click:function(){t.ChangeIndexWindowCount(4)}}],a=t.Frame.SubFrame.length-1;return a-1>=0&&a-1<e.length&&(e[a-1].selected=!0),e},this.GetTools=function(t){var e=[],a=t.GetExtendChartByClassName("DrawToolsButton");return a?e.push({text:"关闭画图工具",click:function(){var e=a.Chart.Width;parseInt(a.Index);t.DeleteExtendChart(a),t.Frame.ChartBorder.Right-=e,t.SetSizeChange(!0),t.Draw()}}):e.push({text:"画图工具",click:function(){var e={Name:"画图工具",Top:t.Frame.ChartBorder.Top};t.CreateExtendChart(e.Name,e);t.SetSizeChange(!0),t.Draw()}}),e}}function yi(t){this.newMethod=ci,this.newMethod(t),delete this.newMethod,this.HQChart,this.ChartPicture,this.SubToolsDiv,this.SettingMenu,this.DoModal=function(t){if(!this.SubToolsDiv){this.ID=C();var e=document.createElement("div");e.className="subTolls",e.id=this.ID,this.DivElement.appendChild(e),this.SubToolsDiv=e}this.HQChart=t.data.HQChart,this.ChartPicture=t.data.ChartPicture;var a=c(),i=this.HQChart.Frame.SubFrame[0].Frame,r=i.ChartBorder.Top+40,n=i.ChartBorder.Right,s=i.ChartBorder.GetLeft(),o=this.ChartPicture.ClassName,h=this.ChartPicture.LineColor;0!=h.indexOf("rgb(")&&0!=h.indexOf("RGB(")||(h=Re.RGBToHex(h.toLowerCase()));var l="";l="ChartDrawPictureText"===o?'<span class="changes-color" title="改变图形颜色"><i class="iconfont icon-bianji"></i><input type="color" name="color" id="color" class="change-color" value="'+h+'"></span>\n<span class="subtool-set" title="设置"><i class="iconfont icon-shezhi"></i></span><span class="subtool-del"><i class="iconfont icon-recycle_bin"></i></span>':'<p class="changes-color" title="改变图形颜色"><i class="iconfont icon-bianji"></i><input type="color" name="color" id="color" class="change-color" value="'+h+'"></p>\n        <p class="subtool-del"><i class="iconfont icon-recycle_bin"></i></p>',this.SubToolsDiv.style.right=n/a+"px",this.SubToolsDiv.style.top=r/a+"px",this.SubToolsDiv.innerHTML=l,this.SubToolsDiv.style.position="absolute",this.SubToolsDiv.style.display="block";var u=this.HQChart,d=this.ChartPicture;this.SubToolsDiv;(0,wr.default)(".subtool-del").click(function(){u.ClearChartDrawPicture(d),(0,wr.default)(".subTolls").css("display","none")});var f=this;(0,wr.default)(".subtool-set").click(function(){(0,wr.default)(f.SubToolsDiv).hide(),this.SettingMenu||(f.SettingMenu=new Ii(i.ChartBorder.UIElement.parentNode)),f.SettingMenu.ChartPicture=d,f.SettingMenu.HQChart=u,f.SettingMenu.Position={Left:n+80,Top:r+20},f.SettingMenu.DoModal()}),(0,wr.default)(".changes-color").click(function(){document.getElementById("color").click(),(0,wr.default)(".change-color").change(function(){var t=(0,wr.default)(".change-color").val();d.LineColor=t,d.PointColor=t,u.ChartDrawStorage&&u.ChartDrawStorage.SaveDrawData(d)})}),Fr.Chart.Log("[ChartPictureSettingMenu::DoModal]",{Top:r,Left:s,Right:n})}}function Ii(t){this.newMethod=ci,this.newMethod(t),delete this.newMethod,this.ChartPicture,this.SettingDiv,this.Position,this.BackupData,this.Close=function(){this.SettingDiv&&this.DivElement.removeChild(this.SettingDiv)},this.DoModal=function(){var t=this.ChartPicture.Text,e=this.ChartPicture.FontOption,a=this.ChartPicture.LineColor;this.BackupData={Text:t,LineColor:a,FontOption:{Family:e.Family,Size:e.Size,Weight:e.Weight,Style:e.Style}},Fr.Chart.Log("[ChartPictureTextSettingMenu::DoModal] picture info",this.BackupData);var i=this,r=this.DivElement.getElementsByClassName("chartpicture-text-setting")[0];r?this.SettingDiv=r:(r=document.createElement("div"),r.className="chartpicture-text-setting",this.DivElement.appendChild(r),this.SettingDiv=r);var n=[10,11,12,14,16,20,24,28,32,40],s=["微软雅黑","宋体","Arial","仿宋"],o="",h="";s.forEach(function(t,e){h+=0!==e?"<p>"+t+"</P>":'<p class="active">'+t+"</P>"}),n.forEach(function(t,e){o+=5!==e?"<p>"+t+"</P>":'<p class="active">'+t+"</P>"});var l='<div class="contentWrap"><div class="styleOptions"><span class="colorPicker"><input type="color" id="fontColor" value="#1e90ff"></span><div class="likeSelect fontSelect"><span class="choicedText">微软雅黑</span><div class="selectList">'+h+'</div><i class="iconfont icon-xia"></i></div><div class="likeSelect fontSizeSelect"><span class="choicedText">20</span><div class="selectList">'+o+'</div><i class="iconfont icon-xia"></i></div><span class="strongFont likeBtn"><i class="iconfont icon-jiacu"></i></span><span class="italicsFont likeBtn"><i class="iconfont icon-qingxieL"></i></span></div><textarea class="tArea" id="tArea" placeholder="Text"></textarea></div>',u=c(),d='<div class="titleWrap"><span class="titleName">样式设置</span><i class="closeBtn iconfont icon-close"></i></div>'+l+'<div class="btnsContainer"><span class="okBtn btn">确认</span><span class="cancelBtn btn">取消</span></div>';this.SettingDiv.style.left=this.Position.Left/u+"px",this.SettingDiv.style.top=this.Position.Top/u+"px",this.SettingDiv.innerHTML=d,this.SettingDiv.style.position="absolute",this.SettingDiv.style.display="block",(0,wr.default)(".chartpicture-text-setting .colorPicker").css({borderColor:i.ChartPicture.LineColor,"background-color":i.ChartPicture.LineColor});var f=this.ChartPicture.FontOption.Family;(0,wr.default)(".chartpicture-text-setting .fontSelect .choicedText").html(f),s.forEach(function(t,e){t==f&&((0,wr.default)(".chartpicture-text-setting .fontSelect p").removeClass("active"),(0,wr.default)(".chartpicture-text-setting .fontSelect p").eq(e).addClass("active"))});var m=this.ChartPicture.FontOption.Size;(0,wr.default)(".chartpicture-text-setting .fontSizeSelect .choicedText").html(m),n.forEach(function(t,e){t==m&&((0,wr.default)(".chartpicture-text-setting .fontSizeSelect p").removeClass("active"),(0,wr.default)(".chartpicture-text-setting .fontSizeSelect p").eq(e).addClass("active"))});var C=this.ChartPicture.FontOption.Weight;null!=C&&"bold"==C&&(0,wr.default)(".chartpicture-text-setting .strongFont").addClass("hot");var p=this.ChartPicture.FontOption.Style;null!=p&&"italic"==p&&(0,wr.default)(".chartpicture-text-setting .italicsFont").addClass("hot");var t=this.ChartPicture.Text;(0,wr.default)(".chartpicture-text-setting .tArea").val(t);(0,wr.default)(".chartpicture-text-setting #fontColor").change({Picture:this.ChartPicture},function(t){var e=(0,wr.default)(this).val();(0,wr.default)(this).parent().css({borderColor:e,"background-color":e});var a=t.data.Picture;a.LineColor=e,a.Update&&a.Update()}),(0,wr.default)(".chartpicture-text-setting .fontSelect,.chartpicture-text-setting .fontSizeSelect").click(function(){(0,wr.default)(this).find(".selectList").toggle(),(0,wr.default)(this).toggleClass("hot")}),(0,wr.default)(".chartpicture-text-setting .fontSelect p").click({Picture:this.ChartPicture},function(t){var e=(0,wr.default)(this).closest(".fontSelect").find(".choicedText").html(),a=t.currentTarget.innerHTML;if(e!==a){(0,wr.default)(this).closest(".fontSelect").find(".choicedText").html(a),(0,wr.default)(this).siblings().removeClass("active"),(0,wr.default)(this).addClass("active");var i=t.data.Picture;i.FontOption.Family=a,i.Update&&i.Update()}}),(0,wr.default)(".chartpicture-text-setting .fontSizeSelect p").click({Picture:this.ChartPicture},function(t){var e=(0,wr.default)(this).closest(".fontSizeSelect").find(".choicedText").html(),a=t.currentTarget.innerHTML;if(e!==a){(0,wr.default)(this).closest(".fontSizeSelect").find(".choicedText").html(a),(0,wr.default)(this).siblings().removeClass("active"),(0,wr.default)(this).addClass("active");var i=t.data.Picture;i.FontOption.Size=Number(a),i.Update&&i.Update()}}),(0,wr.default)(".chartpicture-text-setting .strongFont").click({Picture:this.ChartPicture},function(t){if((0,wr.default)(this).toggleClass("hot"),(0,wr.default)(this).attr("class").indexOf("hot")>0){var e=t.data.Picture;e.FontOption.Weight="bold",e.Update&&e.Update()}}),(0,wr.default)(".chartpicture-text-setting .italicsFont").click({Picture:this.ChartPicture},function(t){if((0,wr.default)(this).toggleClass("hot"),(0,wr.default)(this).attr("class").indexOf("hot")>0){var e=t.data.Picture;e.FontOption.Style="italic",e.Update&&e.Update()}}),(0,wr.default)(".chartpicture-text-setting .titleWrap .closeBtn,.chartpicture-text-setting .btnsContainer .cancelBtn").click({Picture:this.ChartPicture},function(t){var e=t.data.Picture;e.Text=i.BackupData.Text,e.LineColor=i.BackupData.LineColor,e.FontOption=i.BackupData.FontOption,e.Update&&e.Update(),i.Close()}),(0,wr.default)(".chartpicture-text-setting .tArea").keyup({Picture:this.ChartPicture},function(t){Fr.Chart.Log('[ChartPictureTextSettingMenu::DoModal] $(".chartpicture-text-setting .tArea").keyup()');var e=(0,wr.default)(this).val(),a=t.data.Picture;a.Text=e,a.Update&&a.Update()}),(0,wr.default)(".chartpicture-text-setting .btnsContainer .okBtn").click(function(){i.Close(),i.HQChart&&i.HQChart.ChartDrawStorage&&i.HQChart.ChartDrawStorage.SaveDrawData(i.ChartPicture)})}}function xi(){this.SHSZ=null,this.BJ=null,this.SHO=null,this.HK=null,this.Futures=new _r.default,this.USA=null,this.FTSE=null,this.FHK=null,this.ForeEx=null,this.BIT=null,this.Initialize=function(){},this.GetET=function(t){throw{Name:"MinuteTimeStringData::GetET",Error:"not implement"}},this.GetSHSZ=function(t){return this.SHSZ||(this.SHSZ=this.CreateSHSZData()),this.SHSZ},this.GetBJ=function(t){return this.BJ||(this.BJ=this.CreateBJData()),this.BJ},this.GetSHO=function(){return this.SHO||(this.SHO=this.CreateSHOData()),this.SHO},this.GetHK=function(){return this.HK||(this.HK=this.CreateHKData()),this.HK},this.GetFutures=function(t){if(!this.Futures.has(t.Name)){var e=this.CreateTimeData(t.Data);this.Futures.set(t.Name,e)}return this.Futures.get(t.Name)},this.GetUSA=function(){return this.USA||(this.USA=this.CreateUSAData(0)),this.USA},this.GetFTSE=function(){return this.FTSE||(this.FTSE=this.CreateFTSEData()),this.FTSE},this.GetFHK=function(){return this.FHK||(this.FHK=this.CreateFHKData()),this.FHK},this.GetForeignExchange=function(){return this.ForeEx||(this.ForeEx=this.CreateForeignExchangeData()),this.ForeEx},this.GetBIT=function(t){return this.BIT||(this.BIT=this.CreateBITData()),this.BIT},this.CreateSHSZData=function(){var t=[{Start:925,End:925},{Start:930,End:1130},{Start:1300,End:1500}];return this.CreateTimeData(t)},this.CreateBJData=function(){var t=[{Start:925,End:925},{Start:930,End:1130},{Start:1300,End:1500}];return this.CreateTimeData(t)},this.CreateSHOData=function(){var t=[{Start:930,End:1129},{Start:1300,End:1500}];return this.CreateTimeData(t)},this.CreateHKData=function(){var t=[{Start:930,End:1200},{Start:1300,End:1600}];return this.CreateTimeData(t)},this.CreateFTSEData=function(){var t=[{Start:1700,End:2359},{Start:0,End:445},{Start:900,End:1630}];return this.CreateTimeData(t)},this.CreateFHKData=function(){var t=[{Start:1715,End:2359},{Start:0,End:300},{Start:915,End:1200},{Start:1300,End:1630}];return this.CreateTimeData(t)},this.CreateUSAData=function(t){if(1==t){var e=[{Start:2130,End:2359},{Start:0,End:400}];return this.CreateTimeData(e)}if(2==t){var a=[{Start:2230,End:2359},{Start:0,End:500}];return this.CreateTimeData(a)}var i=[{Start:930,End:1600}];return this.CreateTimeData(i)},this.CreateForeignExchangeData=function(){var t=[{Start:600,End:2359},{Start:0,End:559}];return this.CreateTimeData(t)},this.CreateBITData=function(){var t=[{Start:600,End:2359},{Start:0,End:559}];return this.CreateTimeData(t)},this.CreateTimeData=function(t){var e=[];for(var a in t)for(var i=t[a],r=i.Start;r<=i.End;++r)r%100>=60||e.push(r);return e},this.GetTimeData=function(t){if(!t)return this.SHSZ;var e=t.toLocaleUpperCase();if(an.IsSH(e)||an.IsSZ(e))return this.GetSHSZ(e);if(an.IsBJ(e))return this.GetBJ(e);if(an.IsSHO(e)||an.IsSZO(e))return this.GetSHO();if(an.IsHK(e))return this.GetHK();if(an.IsUSA(e))return this.GetUSA(!0);if(an.IsCFFEX(e)||an.IsCZCE(e)||an.IsDCE(e)||an.IsSHFE(e)){var a=sn.GetSplitData(e);return a?this.GetFutures(a):null}if(an.IsFTSE(e))return this.GetFTSE();if(an.IsFHK(e))return this.GetFHK();if(an.IsForeignExchange(e))return this.GetForeignExchange();if(an.IsET(e))return this.GetET(e);if(an.IsBIT(e))return this.GetBIT(e);if(an.IsNYMEX(e)){var a=on.GetSplitData(e);return a?this.GetFutures(a):null}if(an.IsCOMEX(e)){var a=hn.GetSplitData(e);return a?this.GetFutures(a):null}if(an.IsNYBOT(e)){var a=ln.GetSplitData(e);return a?this.GetFutures(a):null}if(an.IsCBOT(e)){var a=un.GetSplitData(e);return a?this.GetFutures(a):null}if(an.IsLME(e)){var a=cn.GetSplitData(e);return a?this.GetFutures(a):null}if(an.IsTOCOM(e)){var a=dn.GetSplitData(e);return a?this.GetFutures(a):null}if(an.IsIPE(e)){var a=fn.GetSplitData(e);return a?this.GetFutures(a):null}}}function Li(){var t={Full:[[0,0,"rgb(200,200,200)","09:30"],[31,0,"RGB(200,200,200)","10:00"],[61,0,"RGB(200,200,200)","10:30"],[91,0,"RGB(200,200,200)","11:00"],[122,1,"RGB(200,200,200)","13:00"],[152,0,"RGB(200,200,200)","13:30"],[182,0,"RGB(200,200,200)","14:00"],[212,0,"RGB(200,200,200)","14:30"],[242,1,"RGB(200,200,200)","15:00"]],Simple:[[0,0,"rgb(200,200,200)","09:30"],[61,0,"RGB(200,200,200)","10:30"],[122,1,"RGB(200,200,200)","13:00"],[182,0,"RGB(200,200,200)","14:00"],[242,1,"RGB(200,200,200)","15:00"]],Min:[[0,0,"rgb(200,200,200)","09:30"],[122,1,"RGB(200,200,200)","13:00"],[242,1,"RGB(200,200,200)","15:00"]],Count:243,MiddleCount:122,GetData:function(t){return t<200?this.Min:t<400?this.Simple:this.Full}},e={Full:[[0,0,"rgb(200,200,200)","09:30"],[30,0,"RGB(200,200,200)","10:00"],[60,0,"RGB(200,200,200)","10:30"],[90,0,"RGB(200,200,200)","11:00"],[120,1,"RGB(200,200,200)","13:00"],[150,0,"RGB(200,200,200)","13:30"],[180,0,"RGB(200,200,200)","14:00"],[210,0,"RGB(200,200,200)","14:30"],[240,1,"RGB(200,200,200)","15:00"]],Simple:[[0,0,"rgb(200,200,200)","09:30"],[60,0,"RGB(200,200,200)","10:30"],[120,1,"RGB(200,200,200)","13:00"],[180,0,"RGB(200,200,200)","14:00"],[240,1,"RGB(200,200,200)","15:00"]],Min:[[0,0,"rgb(200,200,200)","09:30"],[120,1,"RGB(200,200,200)","13:00"],[240,1,"RGB(200,200,200)","15:00"]],Count:241,MiddleCount:120,GetData:function(t){return t<200?this.Min:t<400?this.Simple:this.Full}},a={Full:[[0,1,"RGB(200,200,200)","09:30"],[30,0,"RGB(200,200,200)","10:00"],[60,1,"RGB(200,200,200)","10:30"],[90,0,"RGB(200,200,200)","11:00"],[120,1,"RGB(200,200,200)","11:30"],[151,0,"RGB(200,200,200)","13:00"],[181,1,"RGB(200,200,200)","13:30"],[211,0,"RGB(200,200,200)","14:00"],[241,1,"RGB(200,200,200)","14:30"],[271,0,"RGB(200,200,200)","15:00"],[301,1,"RGB(200,200,200)","15:30"],[331,1,"RGB(200,200,200)","16:00"]],Simple:[[0,1,"RGB(200,200,200)","09:30"],[60,1,"RGB(200,200,200)","10:30"],[120,1,"RGB(200,200,200)","11:30"],[211,0,"RGB(200,200,200)","14:00"],[271,0,"RGB(200,200,200)","15:00"],[331,1,"RGB(200,200,200)","16:00"]],Min:[[0,1,"RGB(200,200,200)","09:30"],[151,0,"RGB(200,200,200)","13:00"],[331,1,"RGB(200,200,200)","16:00"]],Count:332,MiddleCount:151,GetData:function(t){return t<200?this.Min:t<450?this.Simple:this.Full}},i={Full:[[0,0,"rgb(200,200,200)","9:30"],[30,0,"RGB(200,200,200)","10:00"],[90,1,"RGB(200,200,200)","11:00"],[150,0,"RGB(200,200,200)","12:00"],[210,0,"RGB(200,200,200)","13:00"],[270,0,"RGB(200,200,200)","14:00"],[330,0,"RGB(200,200,200)","15:00"],[390,0,"RGB(200,200,200)","16:00"]],Simple:[[30,0,"rgb(200,200,200)","10:00"],[150,1,"RGB(200,200,200)","12:00"],[270,0,"RGB(200,200,200)","14:00"],[390,0,"RGB(200,200,200)","16:00"]],Min:[[30,0,"rgb(200,200,200)","10:00"],[210,1,"RGB(200,200,200)","13:00"],[390,0,"RGB(200,200,200)","16:00"]],Count:391,MiddleCount:211,GetData:function(t){return t<200?this.Min:t<400?this.Simple:this.Full}},r={Full:[[0,1,"RGB(200,200,200)","17:00"],[120,1,"RGB(200,200,200)","19:00"],[240,1,"RGB(200,200,200)","21:00"],[360,1,"RGB(200,200,200)","23:00"],[480,1,"RGB(200,200,200)","01:00"],[600,1,"RGB(200,200,200)","03:00"],[706,1,"RGB(200,200,200)","09:00"],[826,1,"RGB(200,200,200)","11:00"],[946,1,"RGB(200,200,200)","13:00"],[1066,1,"RGB(200,200,200)","15:00"],[1156,1,"RGB(200,200,200)","16:30"]],Simple:[[0,1,"RGB(200,200,200)","17:00"],[240,1,"RGB(200,200,200)","21:00"],[480,1,"RGB(200,200,200)","01:00"],[706,1,"RGB(200,200,200)","09:00"],[946,1,"RGB(200,200,200)","13:00"],[1156,1,"RGB(200,200,200)","16:30"]],Min:[[0,1,"RGB(200,200,200)","17:00"],[706,1,"RGB(200,200,200)","09:00"],[1156,1,"RGB(200,200,200)","16:30"]],Count:1157,MiddleCount:707,GetData:function(t){return t<200?this.Min:t<450?this.Simple:this.Full}},n={Full:[[0,1,"RGB(200,200,200)","17:15"],[105,1,"RGB(200,200,200)","19:00"],[225,1,"RGB(200,200,200)","21:00"],[345,1,"RGB(200,200,200)","23:00"],[586,0,"RGB(200,200,200)","09:15"],[691,1,"RGB(200,200,200)","11:00"],[812,1,"RGB(200,200,200)","14:00"],[963,1,"RGB(200,200,200)","16:30"]],Simple:[[0,1,"RGB(200,200,200)","17:15"],[225,1,"RGB(200,200,200)","21:00"],[586,0,"RGB(200,200,200)","09:15"],[752,1,"RGB(200,200,200)","13:00"],[963,1,"RGB(200,200,200)","16:30"]],Min:[[0,1,"RGB(200,200,200)","17:15"],[586,0,"RGB(200,200,200)","09:15"],[963,1,"RGB(200,200,200)","16:30"]],Count:963,MiddleCount:526,GetData:function(t){return t<200?this.Min:t<450?this.Simple:this.Full}},s={Full:[[0,1,"RGB(200,200,200)","06:00"],[120,1,"RGB(200,200,200)","08:00"],[240,1,"RGB(200,200,200)","10:00"],[360,1,"RGB(200,200,200)","12:00"],[480,0,"RGB(200,200,200)","14:00"],[600,1,"RGB(200,200,200)","16:00"],[720,1,"RGB(200,200,200)","18:00"],[840,1,"RGB(200,200,200)","20:00"],[960,1,"RGB(200,200,200)","22:00"],[1080,1,"RGB(200,200,200)","0:00"],[1200,1,"RGB(200,200,200)","02:00"],[1320,1,"RGB(200,200,200)","04:00"]],Simple:[[0,1,"RGB(200,200,200)","06:00"],[240,1,"RGB(200,200,200)","10:00"],[480,0,"RGB(200,200,200)","14:00"],[720,1,"RGB(200,200,200)","18:00"],[960,1,"RGB(200,200,200)","22:00"],[1200,1,"RGB(200,200,200)","02:00"]],Min:[[0,1,"RGB(200,200,200)","06:00"],[480,0,"RGB(200,200,200)","14:00"],[960,1,"RGB(200,200,200)","22:00"]],Count:1440,MiddleCount:600,GetData:function(t){return t<200?this.Min:t<450?this.Simple:this.Full}};this.GetCoordinateData=function(e,a){var i=null;if(e){var r=e.toLocaleUpperCase();if(an.IsSH(r)||an.IsSZ(r)||an.IsSHSZIndex(r))i=this.GetSHSZData(r,a);else if(an.IsBJ(r))i=this.GetBJData(r,a);else if(an.IsSHO(r)||an.IsSZO(r))i=this.GetSHOData(r,a);else if(an.IsHK(r))i=this.GetHKData(r,a);else{if(an.IsCFFEX(r)||an.IsCZCE(r)||an.IsDCE(r)||an.IsSHFE(r))return this.GetChinatFuturesData(r,a);if(an.IsUSA(r))i=this.GetUSAData(r,a);else if(an.IsFTSE(r))i=this.GetFTSEData(r,a);else if(an.IsFHK(r))i=this.GetFHKData(r,a);else if(an.IsForeignExchange(r))i=this.GetForeignExchangeData(r);else if(an.IsBIT(r,a))i=this.GetBITData(r,a);else if(an.IsET(r))i=this.GetETData(r,a);else{if(an.IsNYMEX(r))return i=this.GetNYMEXData(r,a);if(an.IsCOMEX(r))return i=this.GetCOMEXData(r,a);if(an.IsNYBOT(r))return i=this.GetNYBOTData(r,a);if(an.IsCBOT(r))return i=this.GetCBOTData(r,a);if(an.IsLME(r))return i=this.GetLMEData(r,a);if(an.IsTOCOM(r))return i=this.GetTOCOMData(r,a);if(an.IsIPE(r))return i=this.GetIPEData(r,a)}}}else i=t;return{Count:i.Count,MiddleCount:i.MiddleCount,Data:i.GetData(a)}},this.GetSHSZData=function(e,a){return t},this.GetBJData=function(e,a){return t},this.GetUSAData=function(t,e){return i},this.GetHKData=function(t,e){return a},this.GetSHOData=function(t,a){return e},this.GetFuturesData=function(t,e,a){var i=a.GetSplitData(t);if(!i)return null;var r=rn.GetFutures(i);if(!r)return null;var n={Count:r.length},s=null;s=e<200?i.Coordinate.Min:e<480?i.Coordinate.Simple:i.Coordinate.Full;for(var o=[],h=0;h<r.length;++h)for(var l=r[h],u=0;u<s.length;++u){var c=s[u];if(l==c.Value){var d=[h,0,"RGB(200,200,200)",c.Text];o.push(d);break}}return n.Data=o,n},this.GetChinatFuturesData=function(t,e){return this.GetFuturesData(t,e,sn)},this.GetNYMEXData=function(t,e){return this.GetFuturesData(t,e,on)},this.GetCOMEXData=function(t,e){return this.GetFuturesData(t,e,hn)},this.GetNYBOTData=function(t,e){return this.GetFuturesData(t,e,ln)},this.GetCBOTData=function(t,e){return this.GetFuturesData(t,e,un)},this.GetLMEData=function(t,e){return this.GetFuturesData(t,e,cn)},this.GetTOCOMData=function(t,e){return this.GetFuturesData(t,e,dn)},this.GetIPEData=function(t,e){return this.GetFuturesData(t,e,fn)},this.GetFTSEData=function(t,e){return r},this.GetFHKData=function(t,e){return n},this.GetForeignExchangeData=function(t,e){return s},this.GetBITData=function(t,e){return s},this.GetETData=function(t,e){throw{Name:"MinuteCoordinateData::GetETData",Error:"not implement"}}}function Mi(){this.TIME_SPLIT=[{Name:"9:00-10:15,10:31-11:30,13:31-15:00",Data:[{Start:900,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:930,Text:"9:30"},{Value:1e3,Text:"10:00"},{Value:1030,Text:"10:30"},{Value:1100,Text:"11:00"},{Value:1330,Text:"13:30"},{Value:1400,Text:"14:00"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1e3,Text:"10:00"},{Value:1330,Text:"13:30"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Min:[{Value:900,Text:"9:00"},{Value:1330,Text:"13:30"},{Value:1500,Text:"15:00"}]}},{Name:"9:30-11:30,13:01-15:15",Data:[{Start:930,End:1130},{Start:1301,End:1515}],Coordinate:{Full:[{Value:930,Text:"9:30"},{Value:1e3,Text:"10:00"},{Value:1030,Text:"10:30"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1330,Text:"13:30"},{Value:1400,Text:"14:00"},{Value:1430,Text:"14:30"},{Value:1515,Text:"15:15"}],Simple:[{Value:930,Text:"9:30"},{Value:1030,Text:"10:30"},{Value:1300,Text:"13:00"},{Value:1400,Text:"14:00"},{Value:1515,Text:"15:15"}],Min:[{Value:930,Text:"9:30"},{Value:1300,Text:"13:00"},{Value:1515,Text:"15:15"}]}},{Name:"9:30-11:30,13:00-15:00",Data:[{Start:930,End:1130},{Start:1301,End:1500}],Coordinate:{Full:[{Value:930,Text:"9:30"},{Value:1e3,Text:"10:00"},{Value:1030,Text:"10:30"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1330,Text:"13:30"},{Value:1400,Text:"14:00"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:930,Text:"9:30"},{Value:1030,Text:"10:30"},{Value:1300,Text:"13:00"},{Value:1400,Text:"14:00"},{Value:1500,Text:"15:00"}],Min:[{Value:930,Text:"9:30"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"}]}},{Name:"21:00-23:30,9:00-10:15,10:30-11:30,13:30-15:00",Data:[{Start:2100,End:2330},{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:2100,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:901,Text:"9:00"},{Value:1031,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2100,Text:"21:00"},{Value:901,Text:"9:00"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Min:[{Value:2100,Text:"21:00"},{Value:901,Text:"9:00"},{Value:1500,Text:"15:00"}]}},{Name:"21:00-1:00,9:01-10:15,10:31-11:30,13:31-15:00",Data:[{Start:2100,End:2359},{Start:0,End:100},{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:2100,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:901,Text:"9:00"},{Value:1031,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:901,Text:"9:00"},{Value:1031,Text:"10:30"},{Value:1500,Text:"15:00"}],Min:[{Value:2100,Text:"21:00"},{Value:901,Text:"9:00"},{Value:1500,Text:"15:00"}]}},{Name:"21:00-2:30,9:01-10:15,10:31-11:30,13:31-15:00",Data:[{Start:2100,End:2359},{Start:0,End:230},{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:100,Text:"1:00"},{Value:901,Text:"9:00"},{Value:1031,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:901,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1500,Text:"15:00"}],Min:[{Value:2100,Text:"21:00"},{Value:901,Text:"9:00"},{Value:1500,Text:"15:00"}]}},{Name:"21:00-23:00,9:01-10:15,10:30-11:30,13:31-15:00",Data:[{Start:2100,End:2300},{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:2100,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:1030,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Min:[{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1500,Text:"15:00"}]}},{Name:"9:00-11:30,13:00-15:00",Data:[{Start:900,End:1130},{Start:1300,End:1500}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:1e3,Text:"10:00"},{Value:1030,Text:"10:30"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1330,Text:"13:30"},{Value:1400,Text:"14:00"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1e3,Text:"10:00"},{Value:1300,Text:"13:00"},{Value:1400,Text:"14:00"},{Value:1500,Text:"15:00"}],Min:[{Value:900,Text:"9:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"}]}},{Name:"21:00-23:00,9:00-10:15,10:30-11:30,13:30-15:00",Data:[{Start:2100,End:2300},{Start:900,End:1015},{Start:1030,End:1130},{Start:1330,End:1500}],Coordinate:{Full:[{Value:2100,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:1030,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Min:[{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1500,Text:"15:00"}]}},{Name:"9:01-10:15,10:31-11:30,13:31-15:00",Data:[{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:901,Text:"9:00"},{Value:930,Text:"9:30"},{Value:1e3,Text:"10:00"},{Value:1030,Text:"10:30"},{Value:1100,Text:"11:00"},{Value:1330,Text:"13:30"},{Value:1400,Text:"14:00"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:901,Text:"9:00"},{Value:1e3,Text:"10:00"},{Value:1330,Text:"13:30"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Min:[{Value:901,Text:"9:00"},{Value:1330,Text:"13:30"},{Value:1500,Text:"15:00"}]}},{Name:"21:01-1:00,9:01-10:15,10:31-11:30,13:31-15:00",Data:[{Start:2101,End:2359},{Start:0,End:100},{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:2101,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:901,Text:"9:00"},{Value:1031,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2101,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:901,Text:"9:00"},{Value:1031,Text:"10:30"},{Value:1500,Text:"15:00"}],Min:[{Value:2101,Text:"21:00"},{Value:901,Text:"9:00"},{Value:1500,Text:"15:00"}]}},{Name:"21:01-23:00,9:01-10:15,10:30-11:30,13:31-15:00",Data:[{Start:2101,End:2300},{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:2101,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:1030,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2101,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Min:[{Value:2101,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1500,Text:"15:00"}]}},{Name:"21:01-2:30,9:01-10:15,10:31-11:30,13:31-15:00",Data:[{Start:2101,End:2359},{Start:0,End:230},{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:2101,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:100,Text:"1:00"},{Value:901,Text:"9:00"},{Value:1031,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2101,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:901,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1500,Text:"15:00"}],Min:[{Value:2101,Text:"21:00"},{Value:901,Text:"9:00"},{Value:1500,Text:"15:00"}]}},{Name:"9:30-11:30,13:01-15:15",Data:[{Start:931,End:1130},{Start:1301,End:1515}],Coordinate:{Full:[{Value:931,Text:"9:30"},{Value:1e3,Text:"10:00"},{Value:1030,Text:"10:30"},{Value:1100,Text:"11:00"},{Value:1301,Text:"13:00"},{Value:1330,Text:"13:30"},{Value:1400,Text:"14:00"},{Value:1430,Text:"14:30"},{Value:1515,Text:"15:15"}],Simple:[{Value:931,Text:"9:30"},{Value:1030,Text:"10:30"},{Value:1301,Text:"13:00"},{Value:1400,Text:"14:00"},{Value:1515,Text:"15:15"}],Min:[{Value:931,Text:"9:30"},{Value:1301,Text:"13:00"},{Value:1515,Text:"15:15"}]}},{Name:"9:31-11:30,13:01-15:00",Data:[{Start:931,End:1130},{Start:1301,End:1500}],Coordinate:{Full:[{Value:931,Text:"9:30"},{Value:1e3,Text:"10:00"},{Value:1030,Text:"10:30"},{Value:1100,Text:"11:00"},{Value:1301,Text:"13:00"},{Value:1330,Text:"13:30"},{Value:1400,Text:"14:00"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:931,Text:"9:30"},{Value:1030,Text:"10:30"},{Value:1301,Text:"13:00"},{Value:1400,Text:"14:00"},{Value:1500,Text:"15:00"}],Min:[{Value:931,Text:"9:30"},{Value:1301,Text:"13:00"},{Value:1500,Text:"15:00"}]}}],this.MAP_TWOWORDS=new _r.default([[an.DCE+"-JD",{Time:0,Decimal:0,Name:"鸡蛋"}],[an.DCE+"-FB",{Time:0,Decimal:2,Name:"纤板"}],[an.DCE+"-BB",{Time:0,Decimal:2,Name:"胶板"}],[an.DCE+"-PP",{Time:6,Decimal:0,Name:"丙烯"}],[an.DCE+"-JM",{Time:6,Decimal:1,Name:"焦煤"}],[an.DCE+"-EG",{Time:6,Decimal:0,Name:"乙二醇"}],[an.DCE+"-EB",{Time:6,Decimal:0,Name:"苯乙烯"}],[an.DCE+"-CS",{Time:6,Decimal:0,Name:"淀粉"}],[an.DCE+"-PG",{Time:6,Decimal:0,Name:"液化气"}],[an.DCE+"-RR",{Time:6,Decimal:0,Name:"梗米"}],[an.DCE+"-LH",{Time:0,Decimal:0,Name:"生猪"}],[an.SHFE+"-CU",{Time:4,Decimal:0,Name:"铜"}],[an.SHFE+"-AL",{Time:4,Decimal:0,Name:"铝"}],[an.SHFE+"-NI",{Time:4,Decimal:0,Name:"镍"}],[an.SHFE+"-SN",{Time:4,Decimal:0,Name:"沪锡"}],[an.SHFE+"-ZN",{Time:4,Decimal:0,Name:"沪锌"}],[an.SHFE+"-PB",{Time:4,Decimal:0,Name:"沪铅"}],[an.SHFE+"-RU",{Time:6,Decimal:0,Name:"天然橡胶"}],[an.SHFE+"-FU",{Time:6,Decimal:0,Name:"燃料油"}],[an.SHFE+"-RB",{Time:6,Decimal:0,Name:"螺纹钢"}],[an.SHFE+"-BU",{Time:6,Decimal:0,Name:"石油沥青"}],[an.SHFE+"-HC",{Time:6,Decimal:0,Name:"热轧卷板"}],[an.SHFE+"-SP",{Time:6,Decimal:0,Name:"纸浆"}],[an.SHFE+"-WR",{Time:0,Decimal:0,Name:"线材"}],[an.SHFE+"-AG",{Time:5,Decimal:0,Name:"白银"}],[an.SHFE+"-AU",{Time:5,Decimal:2,Name:"黄金"}],[an.SHFE+"-SS",{Time:4,Decimal:0,Name:"不锈钢"}],[an.SHFE+"-NR",{Time:6,Decimal:1,Name:"20号胶"}],[an.SHFE+"-SC",{Time:5,Decimal:1,Name:"原油"}],[an.SHFE+"-LU",{Time:6,Decimal:0,Name:"低硫燃油"}],[an.SHFE+"-BC",{Time:4,Decimal:0,Name:"国际铜"}],[an.CZCE+"-CF",{Time:6,Decimal:0,Name:"棉花"}],[an.CZCE+"-SR",{Time:6,Decimal:0,Name:"白糖"}],[an.CZCE+"-MA",{Time:6,Decimal:0,Name:"甲醇"}],[an.CZCE+"-ZC",{Time:6,Decimal:1,Name:"动力煤"}],[an.CZCE+"-TA",{Time:6,Decimal:0,Name:"精对苯二甲酸(PTA)"}],[an.CZCE+"-RM",{Time:6,Decimal:0,Name:"菜籽粕"}],[an.CZCE+"-OI",{Time:6,Decimal:0,Name:"菜籽油"}],[an.CZCE+"-ME",{Time:3,Decimal:0,Name:"甲醇(老)"}],[an.CZCE+"-FG",{Time:6,Decimal:0,Name:"平板玻璃"}],[an.CZCE+"-WS",{Time:0,Decimal:0}],[an.CZCE+"-WT",{Time:0,Decimal:0}],[an.CZCE+"-GN",{Time:0,Decimal:0}],[an.CZCE+"-RO",{Time:0,Decimal:0}],[an.CZCE+"-RS",{Time:0,Decimal:0,Name:"菜籽"}],[an.CZCE+"-ER",{Time:0,Decimal:0}],[an.CZCE+"-RI",{Time:0,Decimal:0,Name:"早籼稻"}],[an.CZCE+"-WH",{Time:0,Decimal:0,Name:"强麦"}],[an.CZCE+"-AP",{Time:0,Decimal:0,Name:"苹果"}],[an.CZCE+"-PM",{Time:0,Decimal:0,Name:"普麦"}],[an.CZCE+"-QM",{Time:0,Decimal:0}],[an.CZCE+"-TC",{Time:0,Decimal:0}],[an.CZCE+"-JR",{Time:0,Decimal:0,Name:"粳稻"}],[an.CZCE+"-LR",{Time:0,Decimal:0,Name:"晚籼稻"}],[an.CZCE+"-SF",{Time:0,Decimal:0,Name:"硅铁"}],[an.CZCE+"-SM",{Time:0,Decimal:0,Name:"锰硅"}],[an.CZCE+"-CJ",{Time:0,Decimal:2,Name:"红枣"}],[an.CZCE+"-CY",{Time:6,Decimal:0,Name:"棉纱"}],[an.CZCE+"-UR",{Time:0,Decimal:0,Name:"尿素"}],[an.CZCE+"-SA",{Time:6,Decimal:0,Name:"纯碱"}],[an.CZCE+"-PF",{Time:6,Decimal:0,Name:"短纤"}],[an.CZCE+"-PK",{Time:0,Decimal:0,Name:"花生"}],[an.CFFEX+"-TF",{Time:1,Decimal:3,Name:"二债"}],[an.CFFEX+"-TS",{Time:1,Decimal:3,Name:"五债"}],[an.CFFEX+"-IH",{Time:2,Decimal:1,Name:"上证股指期货"}],[an.CFFEX+"-IC",{Time:2,Decimal:1,Name:"中证股指期货"}],[an.CFFEX+"-IF",{Time:2,Decimal:1,Name:"沪深股指期货"}]]),this.MAP_ONEWORD=new _r.default([[an.DCE+"-C",{Time:6,Decimal:0,Name:"玉米"}],[an.DCE+"-L",{Time:6,Decimal:0,Name:"乙烯"}],[an.DCE+"-V",{Time:6,Decimal:0,Name:"PVC"}],[an.DCE+"-A",{Time:6,Decimal:0,Name:"豆一"}],[an.DCE+"-B",{Time:6,Decimal:0,Name:"豆二"}],[an.DCE+"-M",{Time:6,Decimal:0,Name:"豆粕"}],[an.DCE+"-Y",{Time:6,Decimal:0,Name:"豆油"}],[an.DCE+"-P",{Time:6,Decimal:0,Name:"棕榈"}],[an.DCE+"-J",{Time:6,Decimal:1,Name:"焦炭"}],[an.DCE+"-I",{Time:6,Decimal:1,Name:"铁矿"}],[an.CFFEX+"-T",{Time:1,Decimal:3,Name:"十债"}]]),this.AddNewFutures=function(t){if(t){var e=t.Suffix+"-"+t.Symbol,a={Time:t.Time,Decimal:t.Decimal,Name:t.Name};1==t.Symbol.length?this.MAP_ONEWORD.set(e,a):2==t.Symbol.length&&this.MAP_TWOWORDS.set(e,a)}},this.GetData=function(t){var e=t.charAt(0),a=t.substr(0,2),i=null,r=null;return an.IsDCE(t)?(i=an.DCE+"-"+e,r=an.DCE+"-"+a):an.IsSHFE(t)?(i=an.SHFE+"-"+e,r=an.SHFE+"-"+a):an.IsCFFEX(t)?(i=an.CFFEX+"-"+e,r=an.CFFEX+"-"+a):an.IsCZCE(t)&&(i=an.CZCE+"-"+e,r=an.CZCE+"-"+a),this.MAP_TWOWORDS.has(r)?this.MAP_TWOWORDS.get(r):this.MAP_ONEWORD.has(i)?this.MAP_ONEWORD.get(i):null},this.GetSplitData=function(t){var e=this.GetData(t);return e?this.TIME_SPLIT[e.Time]:null},this.GetDecimal=function(t){var e=this.GetData(t);return e?e.Decimal:2}}function _i(){this.TIME_SPLIT=[{Name:"6:00-5:00",Data:[{Start:600,End:2359},{Start:0,End:500}],Coordinate:{Full:[{Value:600,Text:"6:00"},{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"},{Value:400,Text:"4:00"}],Simple:[{Value:600,Text:"6:00"},{Value:1e3,Text:"10:00"},{Value:1400,Text:"14:00"},{Value:1800,Text:"18:00"},{Value:2200,Text:"22:00"},{Value:200,Text:"2:00"}],Min:[{Value:600,Text:"6:00"},{Value:1800,Text:"18:00"},{Value:500,Text:"5:00"}]}}],this.TIME_SPLIT2=[{Name:"7:00-6:00",Data:[{Start:700,End:2359},{Start:0,End:600}],Coordinate:{Full:[{Value:700,Text:"7:00"},{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1,Text:"1:00"},{Value:300,Text:"3:00"},{Value:500,Text:"5:00"}],Simple:[{Value:700,Text:"7:00"},{Value:1100,Text:"11:00"},{Value:1500,Text:"15:00"},{Value:1900,Text:"19:00"},{Value:2300,Text:"23:00"},{Value:300,Text:"3:00"}],Min:[{Value:700,Text:"7:00"},{Value:1900,Text:"19:00"},{Value:500,Text:"5:00"}]}}],this.FUTURES_LIST=[{Symbol:"CL",Decimal:2,Time:0,Name:"原油"},{Symbol:"NG",Decimal:3,Time:0,Name:"天然气"},{Symbol:"RB",Decimal:4,Time:0,Name:"汽油"},{Symbol:"PL",Decimal:1,Time:0,Name:"铂金"},{Symbol:"PA",Decimal:2,Time:0,Name:"钯金"},{Symbol:"HR",Decimal:0,Time:0,Name:"热轧钢卷"},{Symbol:"QM",Decimal:3,Time:0,Name:"迷你原油"},{Symbol:"HO",Decimal:4,Time:0,Name:"燃油"}],this.MarketSuffix=".NYMEX",this.TimeType=0,this.GetFuturesInfo=function(t){if(t.indexOf(this.MarketSuffix)<=0)return null;for(var e in this.FUTURES_LIST){var a=this.FUTURES_LIST[e];if(0==t.indexOf(a.Symbol))return a}return null},this.GetSplitData=function(t){var e=0==this.TimeType?this.TIME_SPLIT:this.TIME_SPLIT2,a=this.GetFuturesInfo(t);return a?e[a.Time]:e[0]},this.GetDecimal=function(t){var e=this.GetFuturesInfo(t);return e?e.Decimal:3},this.GetMarketStatus=function(t){var e=Pi(-4),a=new Date,i=e.getDay(),r=100*a.getHours()+a.getMinutes();return 6==i||0==i?0:r>430&&r<730?1:2},this.AddNewFutures=function(t){if(t){for(var e={Symbol:t.Symbol,Time:t.Time,Decimal:t.Decimal,Name:t.Name},a=0;a<this.FUTURES_LIST.length;++a){if(this.FUTURES_LIST[a].Symbol==e.Symbol)return void(this.FUTURES_LIST[a]=e)}this.FUTURES_LIST.push(e)}}}function bi(){this.newMethod=_i,this.newMethod(),delete this.newMethod,this.FUTURES_LIST=[{Symbol:"GC",Decimal:1,Time:0,Name:"COMEX黄金"},{Symbol:"QO",Decimal:2,Time:0,Name:"迷你黄金"},{Symbol:"MG",Decimal:1,Time:0,Name:"微型黄金"},{Symbol:"QI",Decimal:4,Time:0,Name:"迷你白银"},{Symbol:"SI",Decimal:3,Time:0,Name:"COMEX白银"},{Symbol:"HG",Decimal:4,Time:0,Name:"COMEX铜"}],this.MarketSuffix=".COMEX"}function wi(){this.newMethod=_i,this.newMethod(),delete this.newMethod,this.TIME_SPLIT=[{Name:"9:00-2:20",Data:[{Start:900,End:2359},{Start:0,End:220}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:100,Text:"1:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1300,Text:"13:00"},{Value:1700,Text:"17:00"},{Value:2100,Text:"21:00"},{Value:100,Text:"1:00"}],Min:[{Value:900,Text:"9:00"},{Value:1700,Text:"17:00"},{Value:100,Text:"1:00"}]}},{Name:"15:30-1:00",Data:[{Start:1530,End:2359},{Start:0,End:100}],Coordinate:{Full:[{Value:1600,Text:"16:00"},{Value:1700,Text:"17:00"},{Value:1800,Text:"18:00"},{Value:1900,Text:"19:00"},{Value:2e3,Text:"20:00"},{Value:2100,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:0,Text:"0:00"},{Value:100,Text:"1:00"}],Simple:[{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"}],Min:[{Value:1600,Text:"16:00"},{Value:2100,Text:"21:00"},{Value:100,Text:"1:00"}]}}],this.TIME_SPLIT2=[{Name:"10:00-3:20",Data:[{Start:1e3,End:2359},{Start:0,End:320}],Coordinate:{Full:[{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"}],Simple:[{Value:1e3,Text:"10:00"},{Value:1400,Text:"14:00"},{Value:1800,Text:"18:00"},{Value:2200,Text:"22:00"},{Value:200,Text:"2:00"}],Min:[{Value:1e3,Text:"10:00"},{Value:1800,Text:"18:00"},{Value:200,Text:"2:00"}]}},{Name:"16:30-2:00",Data:[{Start:1630,End:2359},{Start:0,End:200}],Coordinate:{Full:[{Value:1700,Text:"17:00"},{Value:1800,Text:"18:00"},{Value:1900,Text:"19:00"},{Value:2e3,Text:"20:00"},{Value:2100,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:0,Text:"0:00"},{Value:100,Text:"1:00"},{Value:200,Text:"2:00"}],Simple:[{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:100,Text:"1:00"}],Min:[{Value:1700,Text:"17:00"},{Value:2100,Text:"21:00"},{Value:200,Text:"2:00"}]}}],this.FUTURES_LIST=[{Symbol:"SB",Decimal:2,Time:1},{Symbol:"CT",Decimal:2,Time:0}],this.MarketSuffix=".NYBOT",this.GetMarketStatus=function(t){var e=Pi(-4),a=e.getDay(),i=100*e.getHours()+e.getMinutes();if(6==a||0==a)return 0;var r=this.GetFuturesInfo(t);if(!r)return 2;if("SB"==r.Symbol){if(i>300&&i<1400)return 2}else if("CT"==r.Symbol)return i>=0&&i<=1500||i>=2e3&&i<=2359?2:1;return 0}}function Fi(){this.newMethod=_i,this.newMethod(),delete this.newMethod,this.TIME_SPLIT=[{Name:"8:00-2:20",Data:[{Start:800,End:2359},{Start:0,End:220}],Coordinate:{Full:[{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"}],Simple:[{Value:800,Text:"8:00"},{Value:1200,Text:"12:00"},{Value:1600,Text:"16:00"},{Value:2e3,Text:"20:00"},{Value:0,Text:"0:00"}],Min:[{Value:800,Text:"8:00"},{Value:1800,Text:"18:00"},{Value:200,Text:"2:00"}]}},{Name:"8:00-2:45",Data:[{Start:800,End:2359},{Start:0,End:245}],Coordinate:{Full:[{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"}],Simple:[{Value:800,Text:"8:00"},{Value:1200,Text:"12:00"},{Value:1600,Text:"16:00"},{Value:2e3,Text:"20:00"},{Value:0,Text:"0:00"}],Min:[{Value:800,Text:"8:00"},{Value:1800,Text:"18:00"},{Value:200,Text:"2:00"}]}},{Name:"6:00-5:00",Data:[{Start:600,End:2359},{Start:0,End:500}],Coordinate:{Full:[{Value:600,Text:"6:00"},{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"},{Value:400,Text:"4:00"}],Simple:[{Value:600,Text:"6:00"},{Value:1e3,Text:"10:00"},{Value:1400,Text:"14:00"},{Value:1800,Text:"18:00"},{Value:2200,Text:"22:00"},{Value:200,Text:"2:00"}],Min:[{Value:600,Text:"6:00"},{Value:1800,Text:"18:00"},{Value:500,Text:"5:00"}]}},{Name:"08:00-20:45 21:31-02:20",Data:[{Start:800,End:2045},{Start:2131,End:2359},{Start:0,End:220}],Coordinate:{Full:[{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"}],Simple:[{Value:800,Text:"8:00"},{Value:1200,Text:"12:00"},{Value:1600,Text:"16:00"},{Value:2e3,Text:"20:00"},{Value:0,Text:"0:00"}],Min:[{Value:800,Text:"8:00"},{Value:1800,Text:"18:00"},{Value:200,Text:"2:00"}]}},{Name:"8:00-2:45",Data:[{Start:800,End:2045},{Start:2131,End:2359},{Start:0,End:245}],Coordinate:{Full:[{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"}],Simple:[{Value:800,Text:"8:00"},{Value:1200,Text:"12:00"},{Value:1600,Text:"16:00"},{Value:2e3,Text:"20:00"},{Value:0,Text:"0:00"}],Min:[{Value:800,Text:"8:00"},{Value:1800,Text:"18:00"},{Value:200,Text:"2:00"}]}},{Name:"06:00-04:15 04:31-05:00",Data:[{Start:600,End:2359},{Start:0,End:415},{Start:431,End:500}],Coordinate:{Full:[{Value:600,Text:"6:00"},{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"},{Value:400,Text:"4:00"}],Simple:[{Value:600,Text:"6:00"},{Value:1e3,Text:"10:00"},{Value:1400,Text:"14:00"},{Value:1800,Text:"18:00"},{Value:2200,Text:"22:00"},{Value:200,Text:"2:00"}],Min:[{Value:600,Text:"6:00"},{Value:1800,Text:"18:00"},{Value:500,Text:"5:00"}]}}],this.TIME_SPLIT2=[{Name:"9:00-3:20",Data:[{Start:900,End:2359},{Start:0,End:320}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1,Text:"1:00"},{Value:300,Text:"3:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1300,Text:"13:00"},{Value:1700,Text:"17:00"},{Value:2100,Text:"21:00"},{Value:1,Text:"1:00"}],Min:[{Value:900,Text:"9:00"},{Value:1900,Text:"19:00"},{Value:300,Text:"3:00"}]}},{Name:"9:00-3:45",Data:[{Start:900,End:2359},{Start:0,End:345}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1,Text:"1:00"},{Value:300,Text:"3:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1300,Text:"13:00"},{Value:1700,Text:"17:00"},{Value:2100,Text:"21:00"},{Value:1,Text:"1:00"}],Min:[{Value:900,Text:"9:00"},{Value:1900,Text:"19:00"},{Value:300,Text:"3:00"}]}},{Name:"7:00-6:00",Data:[{Start:700,End:2359},{Start:0,End:600}],Coordinate:{Full:[{Value:700,Text:"7:00"},{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1,Text:"1:00"},{Value:300,Text:"3:00"},{Value:500,Text:"5:00"}],Simple:[{Value:700,Text:"7:00"},{Value:1100,Text:"11:00"},{Value:1500,Text:"15:00"},{Value:1900,Text:"19:00"},{Value:2300,Text:"23:00"},{Value:300,Text:"3:00"}],Min:[{Value:700,Text:"7:00"},{Value:1800,Text:"18:00"},{Value:500,Text:"5:00"}]}},{Name:"09:00-21:45 22:31-03:20",Data:[{Start:900,End:2145},{Start:2231,End:2359},{Start:0,End:320}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1,Text:"1:00"},{Value:300,Text:"3:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1300,Text:"13:00"},{Value:1700,Text:"17:00"},{Value:2100,Text:"21:00"},{Value:1,Text:"1:00"}],Min:[{Value:900,Text:"9:00"},{Value:1900,Text:"19:00"},{Value:300,Text:"3:00"}]}},{Name:"09:00-21:45 22:31-03:45",Data:[{Start:900,End:2145},{Start:2231,End:2359},{Start:0,End:345}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1,Text:"1:00"},{Value:300,Text:"3:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1300,Text:"13:00"},{Value:1700,Text:"17:00"},{Value:2100,Text:"21:00"},{Value:1,Text:"1:00"}],Min:[{Value:900,Text:"9:00"},{Value:1900,Text:"19:00"},{Value:300,Text:"3:00"}]}},{Name:"07:00-05:15 05:31-06:00",Data:[{Start:700,End:2359},{Start:0,End:515},{Start:531,End:600}],Coordinate:{Full:[{Value:700,Text:"7:00"},{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1,Text:"1:00"},{Value:300,Text:"3:00"},{Value:500,Text:"5:00"}],Simple:[{Value:700,Text:"7:00"},{Value:1100,Text:"11:00"},{Value:1500,Text:"15:00"},{Value:1900,Text:"19:00"},{Value:2300,Text:"23:00"},{Value:300,Text:"3:00"}],Min:[{Value:700,Text:"7:00"},{Value:1800,Text:"18:00"},{Value:500,Text:"5:00"}]}}],this.FUTURES_LIST=[{Symbol:"ZC",Decimal:2,Time:0,Name:"玉米"},{Symbol:"XC",Decimal:2,Time:1,Name:"迷你玉米"},{Symbol:"ZS",Decimal:2,Time:0,Name:"大豆"},{Symbol:"XK",Decimal:2,Time:1,Name:"迷你大豆"},{Symbol:"ZL",Decimal:2,Time:0,Name:"豆油"},{Symbol:"ZR",Decimal:2,Time:0,Name:"稻谷"},{Symbol:"ZO",Decimal:2,Time:0,Name:"燕麦"},{Symbol:"ZW",Decimal:2,Time:0,Name:"小麦"},{Symbol:"XW",Decimal:2,Time:1,Name:"迷你小麦"},{Symbol:"ZM",Decimal:1,Time:0,Name:"豆粕"},{Symbol:"EH",Decimal:3,Time:2},{Symbol:"YM",Decimal:0,Time:2,Name:"小型道指"},{Symbol:"ES",Decimal:2,Time:2,Name:"小型标普"},{Symbol:"NQ",Decimal:2,Time:2,Name:"小型纳指"},{Symbol:"TY",Decimal:4,Time:2,Name:"10年美国债"},{Symbol:"TU",Decimal:4,Time:2,Name:"2年美国债"},{Symbol:"FV",Decimal:4,Time:2,Name:"5年美国债"},{Symbol:"US",Decimal:4,Time:2,Name:"30年美国债"},{Symbol:"UL",Decimal:4,Time:2,Name:"超国债"}],this.MarketSuffix=".CBOT"}function Ei(){this.newMethod=_i,this.newMethod(),delete this.newMethod,this.TIME_SPLIT=[{Name:"LME 9:00-3:00",Data:[{Start:900,End:2359},{Start:0,End:300}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:100,Text:"1:00"},{Value:300,Text:"3:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1300,Text:"13:00"},{Value:1700,Text:"17:00"},{Value:2100,Text:"21:00"},{Value:100,Text:"1:00"}],Min:[{Value:900,Text:"9:00"},{Value:1800,Text:"18:00"},{Value:300,Text:"3:00"}]}}],this.TIME_SPLIT=[{Name:"LME 8:00-2:00",Data:[{Start:800,End:2359},{Start:0,End:200}],Coordinate:{Full:[{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"}],Simple:[{Value:800,Text:"8:00"},{Value:1200,Text:"12:00"},{Value:1600,Text:"16:00"},{Value:2e3,Text:"20:00"},{Value:0,Text:"0:00"}],Min:[{Value:800,Text:"8:00"},{Value:1800,Text:"18:00"},{Value:200,Text:"2:00"}]}}],this.FUTURES_LIST=[{Symbol:"SN",Decimal:0,Time:0,Name:"LME锡"},{Symbol:"AH",Decimal:2,Time:0,Name:"LME铝"},{Symbol:"PB",Decimal:2,Time:0,Name:"LME铅"},{Symbol:"ZS",Decimal:2,Time:0,Name:"LME锌"},{Symbol:"CA",Decimal:2,Time:0,Name:"LME铜"},{Symbol:"NI",Decimal:0,Time:0,Name:"LME镍"}],this.MarketSuffix=".LME"}function Ai(){this.newMethod=_i,this.newMethod(),delete this.newMethod,this.TimeType=0,this.TIME_SPLIT=[{Name:"15:30-04:30 07:46-14:15",Data:[{Start:1530,End:2359},{Start:0,End:430},{Start:746,End:1415}],Coordinate:{Full:[{Value:1530,Text:"15:30"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:100,Text:"1:00"},{Value:300,Text:"3:00"},{Value:430,Text:"4:30"},{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1415,Text:"14:15"}],Simple:[{Value:1530,Text:"15:30"},{Value:1900,Text:"19:00"},{Value:2300,Text:"23:00"},{Value:100,Text:"1:00"},{Value:430,Text:"4:30"},{Value:1100,Text:"11:00"},{Value:1415,Text:"14:15"}],Min:[{Value:1530,Text:"15:30"},{Value:100,Text:"1:00"},{Value:1415,Text:"14:15"}]}}],this.FUTURES_LIST=[{Symbol:"JRV",Decimal:0,Time:0,Name:"东京TSR20橡胶"},{Symbol:"JPL",Decimal:0,Time:0,Name:"东京铂金"},{Symbol:"JAU",Decimal:0,Time:0,Name:"东京黄金"},{Symbol:"JCO",Decimal:0,Time:0,Name:"中东原油"},{Symbol:"JRU",Decimal:1,Time:0,Name:"东京RSS3橡胶橡胶"},{Symbol:"JAG",Decimal:1,Time:0,Name:"日白银"},{Symbol:"JPA",Decimal:1,Time:0,Name:"日钯金"}],this.MarketSuffix=".TOCOM"}function Ni(){this.newMethod=_i,this.newMethod(),delete this.newMethod,this.MarketSuffix=".IPE",this.TIME_SPLIT=[{Name:"8:00-6:00",Data:[{Start:800,End:2359},{Start:0,End:600}],Coordinate:{Full:[{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"},{Value:400,Text:"4:00"},{Value:600,Text:"6:00"}],Simple:[{Value:800,Text:"8:00"},{Value:1200,Text:"12:00"},{Value:1600,Text:"16:00"},{Value:2e3,Text:"20:00"},{Value:0,Text:"0:00"},{Value:400,Text:"4:00"},{Value:600,Text:"6:00"}],Min:[{Value:800,Text:"8:00"},{Value:2e3,Text:"20:00"},{Value:600,Text:"6:00"}]}}],this.TIME_SPLIT2=[{Name:"09:00-07:00",Data:[{Start:900,End:2359},{Start:0,End:700}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1,Text:"1:00"},{Value:300,Text:"3:00"},{Value:500,Text:"5:00"},{Value:700,Text:"7:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1300,Text:"13:00"},{Value:1700,Text:"17:00"},{Value:2100,Text:"21:00"},{Value:1,Text:"1:00"},{Value:500,Text:"5:00"},{Value:700,Text:"7:00"}],Min:[{Value:900,Text:"9:00"},{Value:2100,Text:"21:00"},{Value:700,Text:"7:00"}]}}],this.FUTURES_LIST=[{Symbol:"RC",Decimal:2,Time:0,Name:"罗布斯塔咖啡"},{Symbol:"W",Decimal:2,Time:0,Name:"白糖"},{Symbol:"C",Decimal:2,Time:0,Name:"伦敦可可"},{Symbol:"R",Decimal:2,Time:0,Name:"长期英国国债"},{Symbol:"L",Decimal:2,Time:0,Name:"3个月英镑利率"},{Symbol:"T",Decimal:2,Time:0,Name:"WTI原油"},{Symbol:"G",Decimal:2,Time:0,Name:"低硫柴油"},{Symbol:"B",Decimal:2,Time:0,Name:"布伦特原油"}]}function Oi(t){var e=2;if(!t)return e;var a=t.toUpperCase();return"function"==typeof an.GetCustomDecimal?an.GetCustomDecimal(a):e=an.IsSHSZFund(a)?3:an.IsSHO(a)||an.IsSZO(a)?an.GetSHODecimal(a):an.IsChinaFutures(a)?sn.GetDecimal(a):an.IsFHK(a)?an.GetFHKDecimal(a):an.IsFTSE(a)?an.GetFTSEDecimal(a):an.IsBIT(a)?an.GetBITDecimal(a):an.IsET(a)?an.GetETDecimal(a):an.IsForeignExchange(a)?an.GetForeignExchangeDecimal(a):an.IsNYMEX(a)?on.GetDecimal(a):an.IsCOMEX(a)?hn.GetDecimal(a):an.IsNYBOT(a)?ln.GetDecimal(a):an.IsCBOT(a)?un.GetDecimal(a):an.IsLME(a)?cn.GetDecimal(a):an.IsTOCOM(a)?dn.GetDecimal(a):an.IsIPE(a)?fn.GetDecimal(a):an.GetDefaultDecimal(a)}function Pi(t){if("number"==typeof t){var e=new Date,a=e.getTime(),i=6e4*e.getTimezoneOffset(),r=a+i;return new Date(r+36e5*t)}}function Ri(){}function ki(){this.Error=[],this.RecordError=function(t){this.Error.push(t)},this.ConstructError=function(t,e){var a=new Error(t);try{throw a}catch(t){Cr.default&&fr.default&&(a=(0,Cr.default)(t),a.Column=e)}return a},this.CreateError=function(t,e,a,i,r){var n="Line "+e+": "+i,s=this.ConstructError(n,a);return s.Index=t,s.LineNumber=e,s.Description=i,s.Word=r,s},this.ThrowError=function(t,e,a,i,r){throw this.CreateError(t,e,a,i,r)},this.ThrowDownloadJob=function(t,e,a,i,r){var n=this.CreateError(t,e,a,i);throw n.Job=r,n}}function Bi(t,e){this.Source=t,this.ErrorHandler=e,this.Length=t.length,this.Index=0,this.LineNumber=t.length>0?1:0,this.LineStart=0,this.CurlyStack=[],this.SaveState=function(){return{Index:this.Index,LineNumber:this.LineNumber,LineStart:this.LineStart}},this.RestoreState=function(t){this.Index=t.Index,this.LineNumber=t.LineNumber,this.LineStart=t.LineStart},this.IsEOF=function(){return this.Index>=this.Length},this.IsKeyword=function(t){return!1},this.CodePointAt=function(t){var e=this.Source.charCodeAt(t);if(e>=55296&&e<=56319){var a=this.Source.charCodeAt(t+1);if(a>=56320&&a<=57343){e=1024*(e-55296)+a-56320+65536}}return e},this.Lex=function(){if(this.IsEOF())return{Type:2,Value:"",LineNumber:this.LineNumber,LineStart:this.LineStart,Start:this.Index,End:this.Index};var t=this.Source.charCodeAt(this.Index);return Dn.IsIdentifierStart(t)?this.ScanIdentifier():40===t||41===t||59===t?this.ScanPunctuator():39===t||34===t?this.ScanStringLiteral():46==t?Dn.IsDecimalDigit(this.Source.charCodeAt(this.Index+1))?this.ScanNumericLiteral():this.ScanPunctuator():Dn.IsDecimalDigit(t)?this.ScanNumericLiteral():t>=55296&&t<57343&&Dn.IsIdentifierStart(this.CodePointAt(this.Index))?this.ScanIdentifier():this.ScanPunctuator()},this.ScanIdentifier=function(){var t=void 0,e=this.Index,a=92===this.Source.charCodeAt(e)?this.GetComplexIdentifier():this.GetIdentifier();if(3!=(t=a.length?3:this.IsKeyword(a)?4:null==a?5:"true"==a||"false"==a?1:3)&&e+a.length!=this.Index){this.Index;throw this.Index=e,Cn.InvalidEscapedReservedWord}return"AND"!=a&&"OR"!=a||(t=7),{Type:t,Value:a,LineNumber:this.LineNumber,LineStart:this.LineStart,Start:e,End:this.Index}},this.GetIdentifier=function(){for(var t=this.Index++;!this.IsEOF();){var e=this.Source.charCodeAt(this.Index);if(92==e)return this.Index=t,this.GetComplexIdentifier();if(e>=55296&&e<57343)return this.Index=t,this.GetComplexIdentifier();if(!Dn.IsIdentifierPart(e))break;++this.Index}return this.Source.slice(t,this.Index)},this.ScanPunctuator=function(){var t=this.Index,e=this.Source[this.Index];switch(e){case"(":++this.Index;break;case")":case";":case",":case".":++this.Index;break;default:e=this.Source.substr(this.Index,3),"AND"==e?this.Index+=3:(e=this.Source.substr(this.Index,2),"&&"===e||"||"===e||"=="===e||"!="===e||"<="===e||">="===e||"=>"===e||":="==e||"OR"==e||"<>"==e?this.Index+=2:(e=this.Source[this.Index],"<>=!+-*%&|^/:".indexOf(e)>=0&&++this.Index))}return this.Index==t&&this.ThrowUnecpectedToken(),{Type:7,Value:e,LineNumber:this.LineNumber,LineStart:this.LineStart,Start:t,End:this.Index}},this.ScanStringLiteral=function(){var t=this.Index,e=this.Source[this.Index];++this.Index;for(var a="";!this.IsEOF();){var i=this.Source[this.Index++];if(i==e){e="";break}if("\\"==i)throw"not complete";if(Dn.IsLineTerminator(i.charCodeAt(0)))break;a+=i}return""!=e&&(this.Index=t,this.ThrowUnecpectedToken()),{Type:8,Value:a,LineNumber:this.LineNumber,LineStart:this.LineStart,Start:t,End:this.Index}},this.ScanNumericLiteral=function(){var t=this.Index,e=this.Source[this.Index],a="";if("."!=e){if(a=this.Source[this.Index++],e=this.Source[this.Index],"0"==a&&("x"==e||"X"==e))return++this.Index,this.ScanHexLiteral(t);for(;Dn.IsDecimalDigit(this.Source.charCodeAt(this.Index));)a+=this.Source[this.Index++];e=this.Source[this.Index]}if("."==e){for(a+=this.Source[this.Index++];Dn.IsDecimalDigit(this.Source.charCodeAt(this.Index));)a+=this.Source[this.Index++];e=this.Source[this.Index]}if("e"==e||"E"==e)if(a+=this.Source[this.Index++],e=this.Source[this.Index],"+"!=e&&"-"!=e||(a+=this.Source[this.Index]),Dn.IsDecimalDigit(this.Source.charCodeAt(this.Index)))for(;Dn.IsDecimalDigit(this.Source.charCodeAt(this.Index));)a+=this.Source[this.Index++];else this.ThrowUnecpectedToken();return Dn.IsIdentifierStart(this.Source.charCodeAt(this.Index))&&this.ThrowUnecpectedToken(),{Type:6,Value:parseFloat(a),LineNumber:this.LineNumber,LineStart:this.LineStart,Start:t,End:this.Index}},this.ScanComments=function(){for(this.Index;!this.IsEOF();){var t=this.Source.charCodeAt(this.Index);if(Dn.IsWhiteSpace(t))++this.Index;else if(Dn.IsLineTerminator(t))++this.Index,13==t&&10==this.Source.charCodeAt(this.Index)&&++this.Index,++this.LineNumber,this.LineStart=this.Index,!0;else if(47==t){if(47!=(t=this.Source.charCodeAt(this.Index+1)))break;this.Index+=2;this.SkipSingleLineComment(2);!0}else{if(123!=t)break;this.Index+=1;this.SkipMultiLineComment()}}},this.SkipMultiLineComment=function(){for(var t=[];!this.IsEOF();){var e=this.Source.charCodeAt(this.Index);if(Dn.IsLineTerminator(e))++this.LineNumber,++this.Index,this.LineStart=this.Index;else{if(125==e)return this.Index+=1,t;++this.Index}}return t},this.SkipSingleLineComment=function(t){for(var e=[];!this.IsEOF();){var a=this.Source.charCodeAt(this.Index);if(++this.Index,Dn.IsLineTerminator(a))return 13===a&&10===this.Source.charCodeAt(this.Index)&&++this.Index,++this.LineNumber,this.LineStart=this.Index,e}return e},this.ThrowUnecpectedToken=function(t,e){return t||(t=Cn.UnexpectedTokenIllegal),this.ErrorHandler.ThrowError(this.Index,this.LineNumber,this.Index-this.LineStart+1,t,e)}}function Yi(t){this.ErrorHandler=new ki,this.Scanner=new Bi(t,this.ErrorHandler),this.Buffer=[],this.GetNextToken=function(){if(0==this.Buffer.length){this.Scanner.ScanComments();if(!this.Scanner.IsEOF()){var t=this.Scanner.Lex(),e={Type:vn[t.Type],Value:this.Scanner.Source.slice(t.Start,t.End)};this.Buffer.push(e)}}return this.Buffer.shift()}}function Hi(t){this.IsNeedIndexData=!1,this.IsNeedLatestIndexData=!1,this.IsNeedSymbolData=!1,this.IsNeedMarginData=new Ir.default,this.IsNeedNewsAnalysisData=new Ir.default,this.NeedBlockIncreaseData=[],this.IsNeedSymbolExData=new Ir.default,this.NeedHK2SHSZData=[],this.IsNeedSectionFinance=new _r.default,this.FunctionData=[],this.Dynainfo=[],this.IsAPIData=[],this.ExecuteIndex=[],this.OtherSymbolData=[],this.PeriodSymbolData=[],this.ErrorHandler=t,this.GetDataJobList=function(){var t=[];this.IsNeedSymbolData&&t.push({ID:yn.JOB_DOWNLOAD_SYMBOL_DATA}),this.IsNeedIndexData&&t.push({ID:yn.JOB_DOWNLOAD_INDEX_DATA}),this.IsNeedLatestIndexData&&t.push({ID:yn.JOB_DOWNLOAD_LATEST_INDEX_DATA});for(var e=0;e<this.Dynainfo.length;++e){var a=this.Dynainfo[e];t.push(a)}for(var e in this.NeedBlockIncreaseData)t.push(this.NeedBlockIncreaseData[e]);var i=!0,r=!1,n=void 0;try{for(var s,o=(0,Tr.default)(this.IsNeedMarginData);!(i=(s=o.next()).done);i=!0){var h=s.value;t.push({ID:h})}}catch(t){r=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(r)throw n}}for(var e in this.NeedHK2SHSZData)t.push(this.NeedHK2SHSZData[e]);var l=!0,u=!1,c=void 0;try{for(var d,f=(0,Tr.default)(this.IsNeedNewsAnalysisData);!(l=(d=f.next()).done);l=!0){var h=d.value;t.push({ID:h})}}catch(t){u=!0,c=t}finally{try{!l&&f.return&&f.return()}finally{if(u)throw c}}var m=!0,C=!1,p=void 0;try{for(var D,v=(0,Tr.default)(this.IsNeedSymbolExData);!(m=(D=v.next()).done);m=!0){var h=D.value;t.push({ID:h})}}catch(t){C=!0,p=t}finally{try{!m&&v.return&&v.return()}finally{if(C)throw p}}var g=!0,S=!1,T=void 0;try{for(var y,I=(0,Tr.default)(this.IsNeedSectionFinance);!(g=(y=I.next()).done);g=!0){var a=y.value;t.push({ID:yn.JOB_DOWNLOAD_SECTION_SF,SF:a})}}catch(t){S=!0,T=t}finally{try{!g&&I.return&&I.return()}finally{if(S)throw T}}for(var e in this.IsAPIData){var a=this.IsAPIData[e];t.push(a)}for(var e in this.ExecuteIndex){var a=this.ExecuteIndex[e];t.push(a)}for(var e in this.OtherSymbolData){var a=this.OtherSymbolData[e];t.push(a)}for(var e in this.PeriodSymbolData){var a=this.PeriodSymbolData[e];t.push(a)}for(var e in this.FunctionData){var a=this.FunctionData[e];t.push(a)}return t},this.VerifySymbolVariable=function(t,e){if(new Ir.default(["INDEXA","INDEXC","INDEXH","INDEXL","INDEXO","INDEXV","INDEXDEC","INDEXADV"]).has(t))return void(this.IsNeedIndexData=!0);if(new Ir.default(["CLOSE","C","VOL","V","OPEN","O","HIGH","H","LOW","L","AMOUNT","AMO","VOLINSTK"]).has(t))return void(this.IsNeedSymbolData=!0);if("VOLR"===t&&(this.IsNeedSymbolExData.has(yn.JOB_DOWNLOAD_VOLR_DATA)||this.IsNeedSymbolExData.add(yn.JOB_DOWNLOAD_VOLR_DATA)),new Ir.default(["CAPITAL","TOTALCAPITAL","EXCHANGE","HYBLOCK","DYBLOCK","GNBLOCK","FGBLOCK","ZSBLOCK","ZHBLOCK","ZDBLOCK","HYZSCODE","GNBLOCKNUM","FGBLOCKNUM","ZSBLOCKNUM","ZHBLOCKNUM","ZDBLOCKNUM","HYSYL","HYSJL"]).has(t)){var a={ID:yn.JOB_DOWNLOAD_VARIANT,VariantName:t};return e&&(a.Token={Index:e.Start,Line:e.LineNumber}),void this.FunctionData.push(a)}if("FROMOPEN"==t)return void(this.IsNeedLatestIndexData=!0);if("ADVANCE"==t||"DECLINE"==t){var a={ID:yn.JOB_DOWNLOAD_INDEX_INCREASE_DATA,IsSelfSymbol:!0,FunctionName:t};return e&&(a.Token={Index:e.Start,Line:e.LineNumber}),void this.NeedBlockIncreaseData.push(a)}if(t.indexOf("#")>0){var i=t.split("#");if(2!=i.length){var r=t+", 跨周期语法错误, 变量名#周期";this.ThrowUnexpectedToken(e,r)}else{if(["C","CLOSE","O","OPEN","H","HIGH","L","LOW","AMOUNT","AMO","VOL","V","VOLINSTK"].indexOf(i[0])<0){var r=t+", 跨周期语法错误, 数据只支持'OPEN,HIGH,LOW,CLOSE,VOL,AMOUNT,VOLINSTK'";this.ThrowUnexpectedToken(e,r)}if(["MIN1","MIN5","MIN15","MIN30","MIN60","DAY","WEEK","MONTH","SEASON","YEAR","HALFYEAR","WEEK2","MULTIDAY","DAY2","DAY3","DAY4","DAY5","DAY6","DAY7","DAY8","DAY9","DAY10","DAY11","DAY12","DAY13","DAY14","DAY15"].indexOf(i[1])<0){var r=t+", 跨周期语法错误， 周期只支持'MIN1,MIN5,MIN15,MIN30,MIN60,DAY,WEEK,MONTH,SEASON,YEAR'";this.ThrowUnexpectedToken(e,r)}var a={ID:yn.JOB_DOWNLOAD_SYMBOL_PERIOD_DATA,VarName:t,ValueName:i[0],PeriodName:i[1]};e&&(a.Token={Index:e.Start,Line:e.LineNumber}),this.PeriodSymbolData.push(a)}}else if(mn.IsCustomVariant(t)){var a={VariantName:t,ID:yn.JOB_CUSTOM_VARIANT_DATA};return e&&(a.Token={Index:e.Start,Line:e.LineNumber}),void this.FunctionData.push(a)}},this.VerifySymbolLiteral=function(t,e){if(he.IsString(t)&&t.indexOf("$")>0){if(2!=t.split("$").length)return;var a={Literal:t,ID:yn.JOB_DOWNLOAD_OTHER_SYMBOL_DATA};e&&(a.Token={Index:e.Start,Line:e.LineNumber}),this.OtherSymbolData.push(a)}},this.VerifySymbolFunction=function(t,e,a){if(mn.IsCustomFunction(t.Name)){var i={FunctionName:t.Name,ID:yn.JOB_CUSTOM_FUNCTION_DATA,Args:e};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.FunctionData.push(i)}if("DYNAINFO"==t.Name){var i={ID:yn.JOB_DOWNLOAD_SYMBOL_LATEST_DATA,Args:e,FunctionName:t.Name};return void this.Dynainfo.push(i)}if("FINANCE"==t.Name){var i={ID:yn.JOB_DOWNLOAD_FINANCE,Args:e,FunctionName:t.Name};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.FunctionData.push(i)}if("FINVALUE"==t.Name){var i={ID:yn.JOB_DOWNLOAD_FINVALUE,Args:e,FunctionName:t.Name};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.FunctionData.push(i)}if("FINONE"==t.Name){var i={ID:yn.JOB_DOWNLOAD_FINONE,Args:e,FunctionName:t.Name};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.FunctionData.push(i)}if("GPJYVALUE"==t.Name){var i={ID:yn.JOB_DOWNLOAD_GPJYVALUE,Args:e,FunctionName:t.Name};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.FunctionData.push(i)}if("SCJYVALUE"==t.Name){var i={ID:yn.JOB_DOWNLOAD_SCJYVALUE,Args:e,FunctionName:t.Name};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.FunctionData.push(i)}if("MARGIN"===t.Name){var r=yn.GetMarginJobID(e[0].Value);return void(r&&!this.IsNeedMarginData.has(r)&&this.IsNeedMarginData.add(r))}if("NEWS"===t.Name){var n=yn.GetNewsAnalysisID(e[0].Value);return void(n&&!this.IsNeedNewsAnalysisData.has(n)&&this.IsNeedNewsAnalysisData.add(n))}if("HK2SHSZ"===t.Name){var i={ID:yn.JOB_DOWNLOAD_HK_TO_SHSZ,Args:e,FunctionName:t.Name};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.NeedHK2SHSZData.push(i)}if("COST"==t.Name||"WINNER"==t.Name||"PPART"==t.Name||"COSTEX"==t.Name||"LWINNER"==t.Name||"PWINNER"==t.Name){var i={ID:yn.JOB_DOWNLOAD_FINANCE,Args:[7],FunctionName:"FINANCE",FunctionName2:t.Name};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.FunctionData.push(i)}if("INBLOCK"==t.Name){var i={ID:yn.JOB_DOWNLOAD_VARIANT,VariantName:"INBLOCK"};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.FunctionData.push(i)}if("BETA"===t.Name)return void(this.IsNeedIndexData=!0);if("UPCOUNT"==t.Name||"DOWNCOUNT"==t.Name){var i={ID:yn.JOB_DOWNLOAD_INDEX_INCREASE_DATA,Args:e,FunctionName:t.Name};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.NeedBlockIncreaseData.push(i)}if("STKINDI"==t.Name){var i={ID:yn.JOB_EXECUTE_INDEX,Args:e,FunctionName:t.Name};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.ExecuteIndex.push(i)}if("COVER_C"==t.Name||"COVER_O"==t.Name||"COVER_H"==t.Name||"COVER_L"==t.Name||"COVER_A"==t.Name||"COVER_V"==t.Name){var s=e[0].Value;if(["MIN1","MIN5","MIN15","MIN30","MIN60","DAY","WEEK","MONTH","SEASON","YEAR"].indexOf(s)<0){var o=t.Name+", 跨周期函数错误， 周期只支持'MIN1,MIN5,MIN15,MIN30,MIN60,DAY,WEEK,MONTH,SEASON,YEAR'";this.ThrowUnexpectedToken(a,o)}var h=Ri.GetConvertValueName(t.Name),i={ID:yn.JOB_DOWNLOAD_SYMBOL_PERIOD_DATA,FunctionName:t.Name,ValueName:h,PeriodName:s};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.PeriodSymbolData.push(i)}if("SF"!=t.Name){if("LOADAPIDATA"==t.Name){var i={Name:t.Name,ID:yn.JOB_DOWNLOAD_CUSTOM_API_DATA,Args:e};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.IsAPIData.push(i)}if(new Ir.default(["CLOSE","C","VOL","V","OPEN","O","HIGH","H","LOW","L","AMOUNT","AMO","VOLINSTK"]).has(t.Name)){var i={Name:t.Name,ID:yn.JOB_DOWNLOAD_OTHER_SYMBOL_DATA,Args:e};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.OtherSymbolData.push(i)}}else{var l=yn.GetSectionReportPeriod(e[0].Value,e[1].Value);if(!l)return;var u=yn.GetSectionFinanceID(e[2].Value);if(!u)return;var c=l.Year+"-"+l.Quarter;if(this.IsNeedSectionFinance.has(c)){var d=this.IsNeedSectionFinance.get(c);d.Fields.has(u)||d.Fields.add(u)}else{var d={Period:l,Fields:new Ir.default([u])};this.IsNeedSectionFinance.set(c,d)}}},this.VerifyMemberVariable=function(t,e,a){var i={ID:yn.JOB_EXECUTE_INDEX,Member:{Object:t,Property:e}};a&&(i.Token={Index:a.Start,Line:a.LineNumber}),this.ExecuteIndex.push(i)},this.ExpressionStatement=function(t){return{Type:gn.ExpressionStatement,Expression:t}},this.Script=function(t){return{Type:gn.Program,Body:t,SourceType:"通达信脚本"}},this.SequenceExpression=function(t){return{Type:gn.SequenceExpression,Expression:t}},this.BinaryExpression=function(t,e,a){return{Type:"||"===t||"&&"===t||"AND"==t||"OR"==t?gn.LogicalExpression:gn.BinaryExpression,Operator:t,Left:e,Right:a}},this.Literal=function(t,e,a){return this.VerifySymbolLiteral(t,a),{Type:gn.Literal,Value:t,Raw:e}},this.Identifier=function(t,e){return this.VerifySymbolVariable(t,e),{Type:gn.Identifier,Name:t}},this.MemberIdentifier=function(t,e){return{Type:gn.Identifier,Name:t}},this.AssignmentExpression=function(t,e,a){return{Type:gn.AssignmentExpression,Operator:t,Left:e,Right:a}},this.UnaryExpression=function(t,e){return{Type:gn.UnaryExpression,Operator:t,Argument:e,Prefix:!0}},this.EmptyStatement=function(){return{Type:gn.EmptyStatement}},this.CallExpression=function(t,e,a){return this.VerifySymbolFunction(t,e,a),{Type:gn.CallExpression,Callee:t,Arguments:e}},this.StaticMemberExpression=function(t,e,a){return this.VerifyMemberVariable(t,e,a),{Type:gn.MemberExpression,Computed:!1,Object:t,Property:e}},this.Directive=function(t,e){return{Type:gn.ExpressionStatement,Expression:t,Directive:e}},this.ThrowUnexpectedToken=function(t,e){throw this.UnexpectedTokenError(t,e)},this.UnexpectedTokenError=function(t,e){var a=e||Cn.UnexpectedToken,i="ILLEGAL";if(t&&(i=t.Value),a=a.replace("%0",i),t&&"number"==typeof t.LineNumber){var r=t.Start,n=t.LineNumber;return this.ErrorHandler.CreateError(r,n,-1,a)}}}function Vi(t){this.ErrorHandler=new ki,this.Scanner=new Bi(t,this.ErrorHandler),this.Node=new Hi(this.ErrorHandler),this.LookAhead={Type:2,Value:"",LineNumber:this.Scanner.LineNumber,LineStart:0,Start:0,End:0},this.HasLineTerminator=!1,this.Context={IsModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,FirstCoverInitializedNameError:null,IsAssignmentTarget:!1,IsBindingElement:!1,InFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},Strict:!1},this.PeratorPrecedence={")":0,";":0,",":0,"]":0,"||":1,OR:1,"&&":2,AND:2,"|":3,"^":4,"&":5,"==":6,"=":6,"!=":6,"<>":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.StartMarker={Index:0,Line:this.Scanner.LineNumber,Column:0},this.LastMarker={Index:0,Line:this.Scanner.LineNumber,Column:0},this.Initialize=function(){this.NextToken(),this.LastMarker={Index:this.Scanner.Index,Line:this.Scanner.LineNumber,Column:this.Scanner.Index-this.Scanner.LineStart}},this.CreateNode=function(){return{Index:this.StartMarker.Index,Line:this.StartMarker.Line,Column:this.StartMarker.Column}},this.StartNode=function(t,e){void 0==e&&(e=0);var a=t.Start-t.LineStart,i=t.LineNumber;return a<0&&(a+=e,i--),{Index:t.Start,Line:i,Column:a}},this.Match=function(t){return 7==this.LookAhead.Type&&this.LookAhead.Value==t},this.Expect=function(t){var e=this.NextToken();7==e.Type&&e.Value==t||this.ThrowUnexpectedToken(e)},this.MatchAssign=function(){if(7!=this.LookAhead.Type)return!1;var t=this.LookAhead.Value;return":"==t||":="==t},this.GetTokenRaw=function(t){return this.Scanner.Source.slice(t.Start,t.End)},this.NextToken=function(){var t=this.LookAhead;this.LastMarker.Index=this.Scanner.Index,this.LastMarker.Line=this.Scanner.LineNumber,this.LastMarker.Column=this.Scanner.Index-this.Scanner.LineStart,this.CollectComments(),this.Scanner.Index!==this.StartMarker.Index&&(this.StartMarker.Index=this.Scanner.Index,this.StartMarker.Line=this.Scanner.LineNumber,this.StartMarker.Column=this.Scanner.Index-this.Scanner.LineStart);var e=this.Scanner.Lex();return this.HasLineTerminator=t.LineNumber!=e.LineNumber,e&&this.Context.Strict&&e.Type,this.LookAhead=e,t},this.CollectComments=function(){this.Scanner.ScanComments()},this.ParseScript=function(){for(var t=this.CreateNode(),e=this.ParseDirectivePrologues();2!=this.LookAhead.Type;)e.push(this.ParseStatementListItem());return this.Finalize(t,this.Node.Script(e))},this.ParseDirective=function(){var t=this.LookAhead,e=this.CreateNode(),a=this.ParseExpression(),i=a.Type===gn.Literal?this.GetTokenRaw(t).slice(1,-1):null;return this.ConsumeSemicolon(),this.Finalize(e,i?this.Node.Directive(a,i):this.Node.ExpressionStatement(a))},this.ParseDirectivePrologues=function(){for(var t=[];;){if(8!=this.LookAhead.Type)break;var e=this.ParseDirective();t.push(e)}return t},this.ParseStatementListItem=function(){var t=void 0;return this.Context.IsAssignmentTarget=!0,this.Context.IsBindingElement=!0,4==this.LookAhead.Type||(t=this.ParseStatement()),t},this.ParseStatement=function(){var t=void 0;switch(this.LookAhead.Type){case 1:case 5:case 6:case 8:case 10:case 9:t=this.ParseExpressionStatement();break;case 7:var e=this.LookAhead.Value;t="("===e?this.ParseExpressionStatement():";"===e?this.ParseEmptyStatement():this.ParseExpressionStatement();break;case 3:t=this.ParseLabelledStatement();break;case 4:break;default:t="error"}return t},this.ParseEmptyStatement=function(){var t=this.CreateNode();return this.Expect(";"),this.Finalize(t,this.Node.EmptyStatement())},this.ParseLabelledStatement=function(){var t=this.CreateNode(),e=this.ParseExpression();this.ConsumeSemicolon();var a=new this.Node.ExpressionStatement(e);return this.Finalize(t,a)},this.ParseExpression=function(){var t=this.LookAhead,e=this.IsolateCoverGrammar(this.ParseAssignmentExpression);if(this.Match(",")){var a=[];for(a.push(e);2!=this.LookAhead.Type&&this.Match(",");)this.NextToken(),a.push(this.IsolateCoverGrammar(this.ParseAssignmentExpression));e=this.Finalize(this.StartNode(t),this.Node.SequenceExpression(a))}return e},this.ParseAssignmentExpression=function(){var t=void 0,e=this.LookAhead,a=e;if(t=this.ParseConditionalExpression(),this.MatchAssign()){if(!this.Context.IsAssignmentTarget){var i=t.Marker;this.ThrowUnexpectedError(i.Index,i.Line,i.Column,Cn.InvalidLHSInAssignment)}this.Match("=")||this.Match(":")?this.ReinterpretExpressionAsPattern(t):(this.Context.IsAssignmentTarget=!1,this.Context.IsBindingElement=!1),a=this.NextToken();var r=a.Value,n=this.IsolateCoverGrammar(this.ParseAssignmentExpression);t=this.Finalize(this.StartNode(e),this.Node.AssignmentExpression(r,t,n)),this.Context.FirstCoverInitializedNameError=null}return t},this.ParseConditionalExpression=function(){this.LookAhead;return this.InheritCoverGrammar(this.ParseBinaryExpression)},this.ParseBinaryExpression=function(){var t=this.LookAhead,e=this.InheritCoverGrammar(this.ParseExponentiationExpression),a=this.LookAhead,i=this.BinaryPrecedence(a);if(i>0){this.NextToken(),this.Context.IsAssignmentTarget=!1,this.Context.IsBindingElement=!1;for(var r=[t,this.LookAhead],n=e,s=this.IsolateCoverGrammar(this.ParseExponentiationExpression),o=[n,a.Value,s],h=[i];;){if((i=this.BinaryPrecedence(this.LookAhead))<=0)break;for(;o.length>2&&i<=h[h.length-1];){s=o.pop();var l=o.pop();h.pop(),n=o.pop(),r.pop();var u=this.StartNode(r[r.length-1]);o.push(this.Finalize(u,this.Node.BinaryExpression(l,n,s)))}o.push(this.NextToken().Value),h.push(i),r.push(this.LookAhead),o.push(this.IsolateCoverGrammar(this.ParseExponentiationExpression))}var c=o.length-1;e=o[c];for(var d=r.pop();c>1;){var f=r.pop(),m=d&&d.LineStart,C=this.StartNode(f,m),p=o[c-1];e=this.Finalize(C,this.Node.BinaryExpression(p,o[c-2],e)),c-=2,d=f}}return e},this.ParseExponentiationExpression=function(){this.LookAhead;return this.InheritCoverGrammar(this.ParseUnaryExpression)},this.ParseUnaryExpression=function(){var t=void 0;if(this.Match("+")||this.Match("-")){var e=this.StartNode(this.LookAhead),a=this.NextToken();t=this.InheritCoverGrammar(this.ParseUnaryExpression),t=this.Finalize(e,this.Node.UnaryExpression(a.Value,t)),this.Context.IsAssignmentTarget=!1,this.Context.IsBindingElement=!1}else t=this.ParseUpdateExpression();return t},this.ParseUpdateExpression=function(){this.LookAhead;return this.InheritCoverGrammar(this.ParseLeftHandSideExpressionAllowCall)},this.ParseLeftHandSideExpressionAllowCall=function(){var t=this.LookAhead,e=void 0;for(e=this.InheritCoverGrammar(this.ParsePrimaryExpression);;)if(this.Match(".")){this.Context.IsBindingElement=!1,this.Context.IsAssignmentTarget=!0,this.Expect(".");var a=this.ParseMemberIdentifierName();e=this.Finalize(this.StartNode(t),this.Node.StaticMemberExpression(e,a,t))}else{if(!this.Match("("))break;this.Context.IsBindingElement=!1,this.Context.IsAssignmentTarget=!1;var i=this.ParseArguments();e=this.Finalize(this.StartNode(t),this.Node.CallExpression(e,i,t))}return e},this.IsIdentifierName=function(t){return 3===t.Type||4===t.Type||1===t.Type||5===t.Type},this.ParseIdentifierName=function(){var t=this.CreateNode(),e=this.NextToken();return this.IsIdentifierName(e)||this.ThrowUnexpectedToken(e),this.Finalize(t,this.Node.Identifier(e.Value,e))},this.ParseMemberIdentifierName=function(){var t=this.CreateNode(),e=this.NextToken();return this.IsIdentifierName(e)||this.ThrowUnexpectedToken(e),this.Finalize(t,this.Node.MemberIdentifier(e.Value,e))},this.ParseArguments=function(){this.Expect("(");var t=[];if(!this.Match(")"))for(;;){var e=this.IsolateCoverGrammar(this.ParseAssignmentExpression);if(t.push(e),this.Match(")"))break;if(this.ExpectCommaSeparator(),this.Match(")"))break}return this.Expect(")"),t},this.ExpectCommaSeparator=function(){this.Expect(",")},this.ParsePrimaryExpression=function(){var t,e,a=this.CreateNode(),i=void 0;switch(this.LookAhead.Type){case 3:t=this.NextToken(),i=this.Finalize(a,this.Node.Identifier(t.Value,t));break;case 6:case 8:this.Context.IsAssignmentTarget=!1,this.Context.IsBindingElement=!1,t=this.NextToken(),e=this.GetTokenRaw(t),i=this.Finalize(a,this.Node.Literal(t.Value,e,t));break;case 7:switch(this.LookAhead.Value){case"(":this.Context.IsBindingElement=!1,i=this.InheritCoverGrammar(this.ParseGroupExpression);break;default:i=this.ThrowUnexpectedToken(this.NextToken())}break;default:i=this.ThrowUnexpectedToken(this.NextToken())}return i},this.ParseGroupExpression=function(){var t=void 0;if(this.Expect("("),this.Match(")"))this.NextToken();else{this.LookAhead;if(this.Context.IsBindingElement=!0,t=this.InheritCoverGrammar(this.ParseAssignmentExpression),this.Match(",")){var e=[];for(this.Context.IsAssignmentTarget=!1,e.push(t);2!=this.LookAhead.Type&&this.Match(",");)this.NextToken(),this.Match(")")}this.Expect(")"),this.Context.IsBindingElement=!1}return t},this.ParseExpressionStatement=function(){var t=this.CreateNode(),e=this.ParseExpression();return this.ConsumeSemicolon(),this.Finalize(t,this.Node.ExpressionStatement(e))},this.ConsumeSemicolon=function(){this.Match(";")?this.NextToken():this.HasLineTerminator||(this.LastMarker.Index=this.StartMarker.Index,this.LastMarker.Line=this.StartMarker.Line,this.LastMarker.Column=this.StartMarker.Column)},this.ReinterpretExpressionAsPattern=function(t){switch(t.Type){case gn.Identifier:case gn.MemberExpression:case gn.AssignmentExpression:}},this.Finalize=function(t,e){return e.Marker={Line:t.Line,Column:t.Column,Index:t.Index},e},this.BinaryPrecedence=function(t){var e=t.Value;return 7===t.Type?this.PeratorPrecedence[e]||0:0},this.IsolateCoverGrammar=function(t){var e=this.Context.IsBindingElement,a=this.Context.IsAssignmentTarget,i=this.Context.FirstCoverInitializedNameError;this.Context.IsBindingElement=!0,this.Context.IsAssignmentTarget=!0,this.Context.FirstCoverInitializedNameError=null;var r=t.call(this);return this.Context.FirstCoverInitializedNameError,this.Context.IsBindingElement=e,this.Context.IsAssignmentTarget=a,this.Context.FirstCoverInitializedNameError=i,r},this.InheritCoverGrammar=function(t){var e=this.Context.IsBindingElement,a=this.Context.IsAssignmentTarget,i=this.Context.FirstCoverInitializedNameError;this.Context.IsBindingElement=!0,this.Context.IsAssignmentTarget=!0,this.Context.FirstCoverInitializedNameError=null;var r=t.call(this);return this.Context.IsBindingElement=this.Context.IsBindingElement&&e,this.Context.IsAssignmentTarget=this.Context.IsAssignmentTarget&&a,this.Context.FirstCoverInitializedNameError=i||this.Context.FirstCoverInitializedNameError,r},this.ThrowUnexpectedToken=function(t,e){throw this.UnexpectedTokenError(t,e)},this.ThrowUnexpectedError=function(t,e,a,i){var r=i||"执行异常";return this.ErrorHandler.ThrowError(t,e,a,r)},this.UnexpectedTokenError=function(t,e){var a=e||Cn.UnexpectedToken,i="ILLEGAL";if(t&&(i=t.Value),a=a.replace("%0",i),t&&"number"==typeof t.LineNumber){var r=t.Start,n=t.LineNumber,s=this.LastMarker.Index-this.LastMarker.Column,o=t.Start-s+1;return this.ErrorHandler.CreateError(r,n,o,a)}var h=this.LastMarker.Index,l=this.LastMarker.Line,u=this.LastMarker.Column+1;return this.ErrorHandler.CreateError(h,l,u,a)}}function Gi(t,e){this.ErrorHandler=t,this.SymbolData=e,this.Add=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t+e;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),s=0;s<n;++s)r[s]=null,s<t.length&&s<e.length&&this.IsNumber(t[s])&&this.IsNumber(e[s])&&(r[s]=t[s]+e[s]);return r}var o=void 0,h=void 0;a?(o=t,h=e):(o=e,h=t);for(var l in h)r[l]=null,this.IsNumber(h[l])&&this.IsNumber(o)&&(r[l]=o+h[l]);return r},this.Subtract=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t-e;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),s=0;s<n;++s)r[s]=null,s<t.length&&s<e.length&&this.IsNumber(t[s])&&this.IsNumber(e[s])&&(r[s]=t[s]-e[s]);return r}if(a)for(var o in e)r[o]=null,this.IsNumber(t)&&this.IsNumber(e[o])&&(r[o]=t-e[o]);else for(var h in t)r[h]=null,this.IsNumber(t[h])&&this.IsNumber(e)&&(r[h]=t[h]-e);return r},this.Multiply=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t*e;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),s=0;s<n;++s)r[s]=null,s<t.length&&s<e.length&&this.IsNumber(t[s])&&this.IsNumber(e[s])&&(r[s]=t[s]*e[s]);return r}var o=void 0,h=void 0;a?(o=t,h=e):(o=e,h=t);for(var l in h)r[l]=null,this.IsNumber(h[l])&&this.IsNumber(o)&&(r[l]=o*h[l]);return r},this.Divide=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return 0==e?null:t/e;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),s=0;s<n;++s)r[s]=null,s<t.length&&s<e.length&&this.IsNumber(t[s])&&this.IsDivideNumber(e[s])&&(r[s]=t[s]/e[s]);return r}if(a)for(var o in e)r[o]=null,this.IsNumber(t)&&this.IsDivideNumber(e[o])&&(r[o]=t/e[o]);else for(var h in t)r[h]=null,this.IsNumber(t[h])&&this.IsDivideNumber(e)&&(r[h]=t[h]/e);return r},this.GT=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t>e?1:0;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),s=0;s<n;++s)r[s]=null,s<t.length&&s<e.length&&(isNaN(t[s])||isNaN(e[s])||(r[s]=t[s]>e[s]?1:0));return r}if(a)for(var o in e)r[o]=null,isNaN(t)||isNaN(e[o])||(r[o]=t>e[o]?1:0);else for(var h in t)r[h]=null,isNaN(t[h])||isNaN(e)||(r[h]=t[h]>e?1:0);return r},this.GTE=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t>=e?1:0;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),s=0;s<n;++s)r[s]=null,s<t.length&&s<e.length&&(isNaN(t[s])||isNaN(e[s])||(r[s]=t[s]>=e[s]?1:0));return r}if(a)for(var o in e)r[o]=null,isNaN(t)||isNaN(e[o])||(r[o]=t>=e[o]?1:0);else for(var h in t)r[h]=null,isNaN(t[h])||isNaN(e)||(r[h]=t[h]>=e?1:0);return r},this.LT=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t<e?1:0;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),s=0;s<n;++s)r[s]=null,s<t.length&&s<e.length&&(isNaN(t[s])||isNaN(e[s])||(r[s]=t[s]<e[s]?1:0));return r}if(a)for(var o in e)r[o]=null,isNaN(t)||isNaN(e[o])||(r[o]=t<e[o]?1:0);else for(var h in t)r[h]=null,isNaN(t[h])||isNaN(e)||(r[h]=t[h]<e?1:0);return r},this.LTE=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t>=e?1:0;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),s=0;s<n;++s)r[s]=null,s<t.length&&s<e.length&&(isNaN(t[s])||isNaN(e[s])||(r[s]=t[s]<=e[s]?1:0));return r}if(a)for(var o in e)r[o]=null,isNaN(t)||isNaN(e[o])||(r[o]=t<=e[o]?1:0);else for(var h in t)r[h]=null,isNaN(t[h])||isNaN(e)||(r[h]=t[h]<=e?1:0);return r},this.EQ=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t==e?1:0;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),s=0;s<n;++s)r[s]=null,s<t.length&&s<e.length&&(isNaN(t[s])||isNaN(e[s])||(r[s]=t[s]==e[s]?1:0));return r}if(a)for(var o in e)r[o]=null,isNaN(t)||isNaN(e[o])||(r[o]=t==e[o]?1:0);else for(var h in t)r[h]=null,isNaN(t[h])||isNaN(e)||(r[h]=t[h]==e?1:0);return r},this.NEQ=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t!=e?1:0;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),s=0;s<n;++s)r[s]=null,s<t.length&&s<e.length&&(isNaN(t[s])||isNaN(e[s])||(r[s]=t[s]!=e[s]?1:0));return r}if(a)for(var o in e)r[o]=null,isNaN(t)||isNaN(e[o])||(r[o]=t!=e[o]?1:0);else for(var h in t)r[h]=null,isNaN(t[h])||isNaN(e)||(r[h]=t[h]!=e?1:0);return r},this.And=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t&&e?1:0;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),s=0;s<n;++s)r[s]=null,s<t.length&&s<e.length&&(isNaN(t[s])||isNaN(e[s])||(r[s]=t[s]&&e[s]?1:0));return r}if(a)for(var o in e)r[o]=null,isNaN(t)||isNaN(e[o])||(r[o]=t&&e[o]?1:0);else for(var h in t)r[h]=null,isNaN(t[h])||isNaN(e)||(r[h]=t[h]&&e?1:0);return r},this.Or=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t||e?1:0;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),s=0;s<n;++s)r[s]=null,s<t.length&&s<e.length&&(isNaN(t[s])||isNaN(e[s])||(r[s]=t[s]||e[s]?1:0));return r}if(a)for(var o in e)r[o]=null,isNaN(t)||isNaN(e[o])||(r[o]=t||e[o]?1:0);else for(var h in t)r[h]=null,isNaN(t[h])||isNaN(e)||(r[h]=t[h]||e?1:0);return r},this.IF=function(t,e,a){var i=this.IsNumber(t),r=this.IsNumber(e),n=this.IsNumber(a),s=Array.isArray(e),o=Array.isArray(a);if(i)return t?e:a;var h=[];for(var l in t)t[l]?h[l]=r?e:s?e[l]:null:h[l]=n?a:o?a[l]:null;return h},this.IFN=function(t,e,a){return this.IF(t,a,e)},this.REF=function(t,e){var a=[];if("number"==typeof e){if(t.length<=0)return a;if(e>=t.length)return a;a=t.slice(0,t.length-e);for(var i=t[0],r=0;r<e;++r)a.unshift(i)}else for(var n=0;n<t.length;++n)if(a[n]=null,!(n>=e.length)){var s=e[n];a[n]=s>=0&&s<=n?t[n-s]:n?a[n-1]:t[n]}return a},this.REFV=function(t,e){var a=[];if("number"==typeof e){if(t.length<=0)return a;if(e>=t.length)return a;a=t.slice(0,t.length-e);for(var i=0;i<e;++i)a.unshift(null)}else for(var r=0;r<t.length;++r)if(a[r]=null,!(r>=e.length)){var n=e[r];n>=0&&n<=r&&(a[r]=t[r-n])}return a},this.REFX=function(t,e){var a=[];if("number"==typeof e){if(t.length<=0)return a;if(e>=t.length)return t.length>0?t[t.length-1]:a;a=t.slice(e,t.length);for(var i=t[t.length-1],r=0;r<e;++r)a.push(i)}else for(var n=t.length,s=0;s<t.length;++s)if(a[s]=null,!(s>=e.length)){var o=e[s];a[s]=o>=0&&o+s<n?t[s+o]:s?a[s-1]:t[s]}return a},this.REFXV=function(t,e){var a=[];if("number"==typeof e){if(t.length<=0)return a;if(e>=t.length)return a;a=t.slice(e,t.length);for(var i=0;i<e;++i)a.push(null)}else for(var r=t.length,n=0;n<t.length;++n)if(a[n]=null,!(n>=e.length)){var s=e[n];s>=0&&s+n<r&&(a[n]=t[n+s])}return a},this.MAX=function(t,e){if(0==t.length&&this.ThrowUnexpectedNode(e,"MAX() Error: 参数个数不能为0"),1==t.length)return t[0];var a=[],i=[];for(var r in t){var n=t[r];he.IsNumber(n)?i.push(n):Array.isArray(n)&&a.push(n)}var s=null;if(i.length>0){s=i[0];for(var r=1;r<i.length;++r)s=Math.max(s,i[r])}var o=null;if(a.length>0){o=a[0].slice(0);for(var r=1;r<a.length;++r){var h=a[r];for(var l in h){var u=o[l],n=h[l];he.IsNumber(u)&&(he.IsNumber(n)?o[l]=Math.max(u,n):o[l]=null)}}}if(null==o&&null!=s)return s;if(o&&null==s)return o;for(var r in o)he.IsNumber(o[r])&&(o[r]=Math.max(o[r],s));return o},this.MIN=function(t,e){if(0==t.length&&this.ThrowUnexpectedNode(e,"MIN() Error: 参数个数不能为0"),1==t.length)return t[0];var a=[],i=[];for(var r in t){var n=t[r];he.IsNumber(n)?i.push(n):Array.isArray(n)&&a.push(n)}var s=null;if(i.length>0){s=i[0];for(var r=1;r<i.length;++r)s=Math.min(s,i[r])}var o=null;if(a.length>0){o=a[0].slice(0);for(var r=1;r<a.length;++r){var h=a[r];for(var l in h){var u=o[l],n=h[l];he.IsNumber(u)&&(he.IsNumber(n)?o[l]=Math.min(u,n):o[l]=null)}}}if(null==o&&null!=s)return s;if(o&&null==s)return o;for(var r in o)he.IsNumber(o[r])&&(o[r]=Math.min(o[r],s));return o},this.ABS=function(t){var e=[];for(var a in t)e[a]=null,isNaN(t[a])||(e[a]=Math.abs(t[a]));return e},this.MA=function(t,e){var a=[];if(e<=0)return a;if(Array.isArray(e)){for(var i=0;i<t.length;++i)if(a[i]=null,!(i>=e.length)){var r=e[i];if(this.IsNumber(r)&&!(r<=0)){for(var n=0,s=0,o=i,h=0;o>=0&&h<r;--o,++h)n+=t[o],++s;s>0&&(a[i]=n/s)}}}else{if(e<=0&&(e=1),!t||!t.length)return a;for(var i=0;i<t.length&&(a[i]=null,!this.IsNumber(t[i]));++i);for(var t=t.slice(0),l=0;i<t.length;++i,++l)if(l<e-1)a[i]=null;else{for(var u=t[i-(e-1)],c=0,d=e-1;d>=0;--d){var f=t[i-d];this.IsNumber(f)?u=f:(f=u,t[i-d]=f),c+=f}a[i]=c/e}}return a},this.EMA=function(t,e){var a=[];if(t.length<=0)return a;if(Array.isArray(e))for(var i=0;i<e.length;++i){var r=e[i];if(this.IsNumber(r)&&!((r=parseInt(r))<=0)){r>i+1&&(r=i+1);for(var n=[2/(r+1),(r-1)/(r+1)],s=null,o=null,h=0;h<r;++h){var l=i-(r-h-1),u=t[l];this.IsNumber(u)||coninue,null==o?(s=u,o=s):(s=n[0]*u+n[1]*o,o=s)}a[i]=s}}else{for(var c=0;c<t.length&&(null==t[c]||isNaN(t[c]));++c);var d=c,f=c+1;a[d]=t[d];for(var i=c+1;i<t.length;++i,++d,++f)a[f]=(2*t[f]+(e-1)*a[d])/(e+1)}return a},this.XMA=function(t,e){for(var a=[],i=0;i<t.length&&!this.IsNumber(t[i]);++i);for(var r=parseInt((e-2)/2),n=0,s=0,o=0,h=0,l=i,u=0;l<t.length;++l){for(o=l-r-1,h=l+(e-r)-1,u=o;u<h;++u)u>=0&&u<t.length&&this.IsNumber(t[u])&&(n+=t[u],++s);a[l]=0!=s?n/s:null,n=0,s=0}return a},this.SMA=function(t,e,a){var i=[];if(Array.isArray(e))for(var r=0;r<e.length;++r){var n=e[r];if(this.IsNumber(n)&&!((n=parseInt(n))<=0)){n>r+1&&(n=r+1);for(var s=null,o=null,h=0;h<n;++h){var l=r-(n-h-1),u=t[l];this.IsNumber(u)&&(null==s?(s=u,o=u):(o=(a*u+(n-a)*s)/n,s=o))}i[r]=o}}else{for(var r=0,c=null;r<t.length;++r)if(null!=t[r]&&!isNaN(t[r])){c=t[r],i[r]=c;break}for(++r;r<t.length;++r)i[r]=(a*t[r]+(e-a)*c)/e,c=i[r]}return i},this.DMA=function(t,e){var a=[];if(t.length<0||t.length!=e.length)return a;for(var i=0;i<t.length;++i)if(null!=t[i]&&!isNaN(t[i])&&null!=e[i]&&!isNaN(e[i])){a[i]=t[i];break}for(i+=1;i<t.length;++i)null==t[i]||null==e[i]?a[i]=null:e[i]<1?a[i]=e[i]*t[i]+(1-e[i])*a[i-1]:a[i]=t[i];return a},this.WMA=function(t,e){var a=[];if(!t||!t.length)return a;if(Array.isArray(e)){for(d=0;d<e.length&&d<t.length;++d){a[d]=null;var i=e[d];if(!(i<=0)){for(var r=0,n=0,s=0,o=0,h=0;h<i;++h)if(s=d-(i-h-1),n=t[s],r=h,this.IsNumber(n)){o=n;break}if(!(r>=i)){for(var l=0,u=0,h=r,c=1;h<i;++h,++c)s=d-(i-h-1),n=t[s],this.IsNumber(n)?o=n:n=o,u+=c,l+=n*c;a[d]=l/u}}}return a}if(e<=0)return[];var d=0;for(d=0;d<t.length&&!this.IsNumber(t[d]);++d)a[d]=null;for(var t=t.slice(0),f=0;d<t.length;++d,++f)if(f<e-1)a[d]=null;else{for(var o=t[d-(e-1)],l=0,u=0,h=e-1;h>=0;--h){var n=t[d-h];this.IsNumber(n)?o=n:(n=o,t[d-h]=n),u+=e-h,l+=n*(e-h)}a[d]=l/u}return a},this.MEMA=function(t,e){var a=[];if(!t||!t.length)return a;var i=0,r=0;for(r=0;r<t.length&&!this.IsNumber(t[r]);++r)a[r]=null;if(i=r,e<1||i+e>=t.length)return a;for(var n=0,t=t.slice(0);i<r+e;++i)a[i]=null,!this.IsNumber(t[i])&&i-1>=0&&(t[i]=t[i-1]),n+=t[i];for(a[i-1]=n/e;i<t.length;++i)this.IsNumber(a[i-1])&&this.IsNumber(t[i])?a[i]=(t[i]+a[i-1]*(e-1))/e:i-1>-1&&this.IsNumber(a[i-1])?a[i]=a[i-1]:a[i]=null;return a},this.EXPMA=function(t,e){var a=[];if(e>=t.length)return a;for(var i=e;i<t.length;++i)if(null!=t[i]){a[i]=t[i];break}for(i+=1;i<t.length;++i)null!=a[i-1]&&null!=t[i]?a[i]=(2*t[i]+(e-1)*a[i-1])/(e+1):null!=a[i-1]&&(a[i]=a[i-1]);return a},this.EXPMEMA=function(t,e){var a=[];if(e>=t.length)return a;for(var i=0;i<t.length&&(!t[i]||isNaN(t[i]));++i);for(var r=0,n=0;i<t.length&&n<e;++n,++i)t[i]&&!isNaN(t[i])?r+=t[i]:r+=t[i-1];for(a[i-1]=r/e;i<t.length;++i)null!=a[i-1]&&null!=t[i]?a[i]=(2*t[i]+(e-1)*a[i-1])/(e+1):null!=a[i-1]&&(a[i]=a[i-1]);return a},this.SUMBARS=function(t,e){var a=[];if(!(t&&t.length&&e&&e.length))return a;for(var i=0,r=0,n=0;i<t.length&&!this.IsNumber(t[i]);++i)a[i]=null;for(r=t.length-1;r>=i;--r){var s=0;for(n=r,s=0;n>=i&&s<e[r];--n)s+=t[n];a[r]=n<i?null:r-n}for(r=i+1;r<t.length;++r)null==a[r]&&(a[r]=a[r-1]);return a},this.REVERSE=function(t){if(this.IsNumber(t))return 0-t;for(var e=[],a=0;a<t.length&&!this.IsNumber(t[a]);++a)e[a]=null;for(;a<t.length;++a)this.IsNumber(t[a])?e[a]=0-t[a]:e[a]=null;return e},this.COUNT=function(t,e){if(Array.isArray(e)){for(var a=null,i=t.length,r=0;r<i;++r)if(this.IsNumber(t[r])){a=r;break}if(null==a)return[];for(var n=[],s=0,r=0;r<e.length;++r){var o=e[r];if(he.IsNumber(o)){o<1&&(o=r+1),s=0;for(var h=r,l=0;h>=0&&l<o;--h,++l)t[h]&&++s;n[r]=s}}return n}for(var o=e,i=t.length,o=o<1?i:o,r=0,h=0;r<i&&!this.IsNumber(t[r]);++r);for(var n=[],u=0;r<i&&h<o;++r,++h)u=t[r]?u+1:u,n[r]=u;for(;r<i;++r)t[r-o]&&u&&u--,u=t[r]?u+1:u,n[r]=u;return n},this.HHV=function(t,e){var a=[];if(Array.isArray(e)){for(var i=null,r=0,n=0;r<t.length;++r)if(a[r]=null,!(r>=e.length)){i=null;var s=e[r];if(s>0&&s<=r)for(n=r-s;n<=r;++n)(null==i||i<t[n])&&(i=t[n]);else for(s=r,n=0;n<=r;++n)(null==i||i<t[n])&&(i=t[n]);a[r]=i}}else{if(!he.IsNonEmptyArray(t))return a;e<=0?e=t.length:e>t.length&&(e=t.length);var o=this.GetFirstVaildIndex(t);if(o>=t.length)return a;var h=o;h<t.length&&(a[h]=t[h]);for(var r=h+1,n=2;r<t.length&&n<e;++r,++n)t[r]>=t[h]&&(h=r),a[r]=t[h];for(;r<t.length;++r){if(r-h<e)h=t[r]<t[h]?h:r;else for(n=h=r-e+1;n<=r;++n)h=t[n]<t[h]?h:n;a[r]=t[h]}}return a},this.HV=function(t,e){var a=this.HHV(t,e);return this.REF(a,1)},this.LLV=function(t,e){var a=[];if(Array.isArray(e)){for(var i=0;i<t.length;++i)if(a[i]=null,!(i>=e.length)){var r=null,n=e[i];if(n>0&&n<=i)for(var s=i-n;s<=i;++s)(null==r||r>t[s])&&(r=t[s]);else{n=i;for(var s=0;s<=i;++s)(null==r||r>t[s])&&(r=t[s])}a[i]=r}}else{if(!he.IsNonEmptyArray(t))return a;e<=0?e=t.length:e>t.length&&(e=t.length);var o=this.GetFirstVaildIndex(t);if(o>=t.length)return a;var h=o;h<t.length&&(a[h]=t[h]);for(var i=h+1,s=2;i<t.length&&s<e;++i,++s)t[i]<=t[h]&&(h=i),a[i]=t[h];for(;i<t.length;++i){if(i-h<e)h=t[i]>t[h]?h:i;else for(s=h=i-e+1;s<=i;++s)h=t[s]>t[h]?h:s;a[i]=t[h]}}return a},this.LV=function(t,e){var a=this.LLV(t,e);return this.REF(a,1)},this.STD=function(t,e){var a=[];if(!Array.isArray(t))return a;var i=this.GetFirstVaildIndex(t);if(!he.IsNumber(e))return a;if(i+e>t.length||e<1)return a;var r=i,n=0,s=!0,o=0,h=0;for(r+=e-1;r<t.length;++r){if(o=0,s){for(s=!1,n=r-e+1;n<=r;++n)h+=t[n];h/=e}else h+=(t[r]-t[r-e])/e;for(n=r-e+1;n<=r;++n)o+=(t[n]-h)*(t[n]-h);a[r]=Math.sqrt(o/(e-1))}return a},this.AVEDEV=function(t,e){for(var a=[],i=0,r=[],n=e-1;n<t.length;++n){i=0;for(var s=0;s<e;++s)i+=t[n-s];r[n]=i/e}for(var n=e-1;n<t.length;++n){i=0;for(var s=0;s<e;++s)i+=Math.abs(t[n-s]-r[n]);a[n]=i/e}return a},this.CROSS=function(t,e){var a=[];if(Array.isArray(t)&&Array.isArray(e)){if(t.length!=e.length)return a=[];for(var i=0;i<t.length&&(!this.IsNumber(t[i])||!this.IsNumber(e[i]));++i);for(++i;i<t.length;++i)a[i]=t[i]>e[i]&&t[i-1]<e[i-1]?1:0}else if(Array.isArray(t)&&"number"==typeof e){for(var i=0;i<t.length&&!this.IsNumber(t[i]);++i);for(++i;i<t.length;++i)a[i]=t[i]>e&&t[i-1]<e?1:0}else if("number"==typeof t&&Array.isArray(e)){for(var i=0;i<e.length&&!this.IsNumber(e[i]);++i);for(++i;i<e.length;++i)a[i]=e[i]<t&&e[i-1]>t?1:0}return a},this.CROSSDOWN=function(t,e){return this.CROSS(e,t)},this.CROSSUP=function(t,e){return this.CROSS(t,e)},this.MULAR=function(t,e){var a=[];if(Array.isArray(e))for(var i=0;i<t.length;++i){a[i]=null;var r=e[i];if(this.IsNumber(r)&&!((r=parseInt(r))<0))for(var n=i,s=0;n>=0&&s<r;--n,++s)0==s?a[i]=t[n]:a[i]*=t[n]}else{if(t.length<e)return a;if(0==e){for(var o=e;o<t.length;++o)if(this.IsNumber(t[o])){a[o]=t[o];break}for(++o;o<t.length;++o)a[o]=a[o-1]*t[o]}else for(var i=e-1,n=0;i<t.length;++i,++n)for(var s=0;s<e;++s)0==s?a[i]=t[s+n]:a[i]*=t[s+n]}return a},this.SUM=function(t,e){var a=[];if(Array.isArray(e))for(var i=0;i<t.length;++i){a[i]=null;var r=e[i];if(r>0)for(var n=i,s=0;n>=0&&s<r;--n,++s)0==s?a[i]=t[n]:a[i]+=t[n]}else if(0==e){a[0]=t[0];for(var i=1;i<t.length;++i)a[i]=a[i-1]+t[i]}else for(var i=e-1,n=0;i<t.length;++i,++n)for(var s=0;s<e;++s)0==s?a[i]=t[s+n]:a[i]+=t[s+n];return a},this.BARSCOUNT=function(t){var e=[],a=null;for(var i in t){if(e[i]=0,null==a){if(!this.IsNumber(t[i]))continue;a=0}e[i]=a,++a}return e},this.DEVSQ=function(t,e){if(this.IsNumber(t)&&this.IsNumber(e))return 0;var a=[];if(Array.isArray(t)){var i=null;if(Array.isArray(e)){for(var r=e.length-1;r>=0;--r)if(this.IsNumber(e[r])){i=parseInt(e[r]);break}}else i=parseInt(e);if(!this.IsNumber(i))return a;var n=t.length,r=0,s=0,o=0,h=0,l=0;for(r=0;r<n&&!this.IsNumber(t[r]);++r)a[r]=null;if(i<1||r+i>n)return a;for(h=0;r<n&&s<i;++r,++s)h+=t[r]/i;if(s==i){for(l=0,r--;o<i;o++)l+=(t[r-o]-h)*(t[r-o]-h);a[r]=l,r++}for(;r<n;++r){for(h+=(t[r]-t[r-i])/i,l=0,o=0;o<i;++o)l+=(t[r-o]-h)*(t[r-o]-h);a[r]=l}}return a},this.NOT=function(t){if("number"==typeof t)return t?0:1;var e=[];for(var a in t)e[a]=null,this.IsNumber(t[a])&&(e[a]=t[a]?0:1);return e},this.FORCAST=function(t,e){var a=[];"number"!=typeof e&&(e=parseInt(e));var i=e,r=t.length;if(i<1||i>=r)return a;var n,s,o,h,l,u=0,c=0,d=0,f=0;for(h=0;h<r&&!this.IsNumber(t[h]);++h)a[h]=null;for(o=h+i-1;o<r;++o){for(u=c=d=f=0,h=0,l=i;h<i&&h<=o;++h,--l)u+=l,c+=t[o-h];for(u/=i,c/=i,h=0,l=i;h<i&&h<=o;++h,--l)d+=(l-u)*(t[o-h]-c),f+=(l-u)*(l-u);s=d/f,n=c-u*s,a[o]=s*i+n}return a},this.TSMA=function(t,e){var a=[];"number"!=typeof e&&(e=parseInt(e));var i=e,r=t.length;if(i<1||i>=r)return a;var n,s,o,h,l,u=0,c=0,d=0,f=0;for(h=0;h<r&&!this.IsNumber(t[h]);++h)a[h]=null;for(o=h+i-1;o<r;++o){for(u=c=d=f=0,h=0,l=i;h<i&&h<=o;++h,--l)u+=l,c+=t[o-h];for(u/=i,c/=i,h=0,l=i;h<i&&h<=o;++h,--l)d+=(l-u)*(t[o-h]-c),f+=(l-u)*(l-u);s=d/f,n=c-u*s,a[o]=s*i+n+s}return a},this.SLOPE=function(t,e){var a=[];if("number"!=typeof e&&(e=parseInt(e)),e<1||!t.length)return a;if(e>=t.length)return a;for(var i=0,r=0;r<t.length&&(a[r]=null,!this.IsNumber(t[r]));++r,++i);for(var n=void 0,s=void 0,o=void 0,h=void 0,l=i+e-1;l<t.length;++l){a[l]=null,n=s=o=h=0;for(var u=0;u<e&&u<=l;++u)n+=l-u,s+=t[l-u];for(n/=e,s/=e,u=0;u<e&&u<=l;++u)o+=(l-u-n)*(t[l-u]-s),h+=(l-u-n)*(l-u-n);h?a[l]=o/h:l&&(a[l]=a[l-1])}return a},this.STDP=function(t,e){var a=[];if(!Array.isArray(t))return a;var i=this.GetFirstVaildIndex(t);if(!he.IsNumber(e))return a;if(i+e>t.length||e<1)return a;var r=i,n=0,s=!0,o=0,h=0;for(r+=e-1;r<t.length;++r){if(o=0,s){for(s=!1,n=r-e+1;n<=r;++n)h+=t[n];h/=e}else h+=(t[r]-t[r-e])/e;for(n=r-e+1;n<=r;++n)o+=(t[n]-h)*(t[n]-h);a[r]=Math.sqrt(o/e)}return a},this.VAR=function(t,e){if(this.IsNumber(t)&&this.IsNumber(e))return 0;var a=[];if(Array.isArray(t)&&this.IsNumber(e)){var i=parseInt(e),r=t.length;if(i<=0||i>=r)return a;var n,s;for(n=0;n<r&&!this.IsNumber(t[n]);++n)a[n]=null;var o,h;for(s=0,n=n+i-1;n<r;++n){for(o=h=0,s=0;s<i&&s<=n;++s)o+=t[n-s]*t[n-s],h+=t[n-s];a[n]=(i*o-h*h)/i*(i-1)}}else if(Array.isArray(t)&&Array.isArray(e))for(var l=this.GetFirstVaildIndex(t),n=l;n<t.length;++n){var o=h=0;if(this.IsNumber(e[n])){var i=parseInt(e[n]);if(!(i<=0||n-(i-1)<0)){for(var s=0;s<i;++s)o+=t[n-s]*t[n-s],h+=t[n-s];a[n]=(i*o-h*h)/i*(i-1)}}}return a},this.VARP=function(t,e){var a=[];"number"!=typeof e&&(e=parseInt(e));var i=e,r=t.length;if(i<1||i>=r)return a;var n=0,s=0;for(n=0;n<r&&!this.IsNumber(t[n]);++n)a[n]=null;for(var o=0,h=0;n<r&&s<i;++n,++s)o+=t[n]*t[n],h+=t[n];for(s==i&&(a[n-1]=(i*o-h*h)/(i*i));n<r;++n)o+=t[n]*t[n]-t[n-i]*t[n-i],h+=t[n]-t[n-i],a[n]=(i*o-h*h)/(i*i);return a},this.RANGE=function(t,e,a){var i="number"==typeof t,r="number"==typeof e,n="number"==typeof a;if(i&&r&&n)return t>Math.min(e,a)&&t<Math.max(e,a)?1:0;for(var s=[],o=void 0,h=void 0,l=0;l<t.length;++l)if(s[l]=null,o=t[l],this.IsNumber(o)){if(r)h=e;else{if(l>=e.length)continue;h=e[l]}if(this.IsNumber(h)){if(n)rangeValue2=a;else{if(l>=a.length)continue;rangeValue2=a[l]}this.IsNumber(rangeValue2)&&(s[l]=o>Math.min(h,rangeValue2)&&o<Math.max(h,rangeValue2)?1:0)}}return s},this.EXIST=function(t,e){if("number"==typeof t)return 0;if(Array.isArray(e)){var a=[];if(t.length<=0)return a;for(var i in t)a[i]=0;for(var i=0;i<e.length&&i<t.length;++i){var r=e[i];if(this.IsNumber(r)&&!((r=parseInt(r))<=0)){r>i+1&&(r=i+1);for(var n=!1,s=0,o=0;o<r;++o)if(i-(r-o-1),s=t[i],this.IsNumber(s)&&s>0){n=!0;break}a[i]=n?1:0}}return a}e=parseInt(e);for(var s,h=null,a=[],l=0;l<t.length;++l)a[l]=null,s=t[l],this.IsNumber(s)&&s>0&&(h=l),a[l]=null!=h&&l-h<e?1:0;return a},this.TFILTER=function(t,e,a){if(!this.IsNumber(a))return[];if(1==a)return this.And(t,this.EQ(this.COUNT(t,this.BARSLAST(e)),1));if(2==a)return this.And(e,this.EQ(this.COUNT(e,this.BARSLAST(t)),1));if(0==a){for(var i=this.And(e,this.EQ(this.COUNT(e,this.BARSLAST(t)),1)),r=this.And(e,this.EQ(this.COUNT(e,this.BARSLAST(t)),1)),n=0;n<i.length;++n){r[n]>0&&(i[n]=2)}return i}return[]},this.FILTER=function(t,e){for(var a=[],i=0,r=0;i<t.length;++i)if(t[i]){for(a[i]=1,r=0;r<e&&r+i+1<t.length;++r)a[r+i+1]=0;i+=e}else a[i]=0;return a},this.BARSLAST=function(t){var e=[];if(!t)return e;for(var a=null,i=0;i<t.length;++i)e[i]=null,t[i]>0?a=0:null!=a&&++a,null!=a&&(e[i]=a);return e},this.BARSSINCEN=function(t,e){var a=[];if(this.IsNumber(e)&&Array.isArray(t)){var i=e;i<1&&(i=t.length);var r=this.GetFirstVaildIndex(t);if(r>=t.length)return a;var n=0;for(n=r<=i-1?i-1:r,a[n]=n-r;n<t.length;++n)if(this.IsNumber(a[n-1])){if(a[n-1]+1<i)a[n]=a[n-1]+1;else for(var s=n-i+1;s<=n;++s)if(!(Math.abs(t[s])<1e-6)){a[n]=n-s;break}}else Math.abs(t[n])<1e-6||(a[n]=0)}return a},this.BARSSINCE=function(t){for(var e=[],a=null,i=0;i<t.length;++i)e[i]=null,null==a?t[i]&&(a=0):++a,a&&(e[i]=a);return e},this.Trigonometric=function(t,e){if(Array.isArray(t)){var a=[];for(var i in t){var r=t[i];this.IsNumber(r)?a[i]=e(r):a[i]=null}return a}return this.IsNumber(t)?e(t):null},this.ASIN=function(t){if(Array.isArray(t)){var e=[];for(var a in t){var i=t[a];if(e[a]=null,this.IsNumber(i))if(i>=-1&&i<=1)e[a]=Math.asin(i);else if(a-1>=0){var r=e[a-1];this.IsNumber(r)&&(e[a]=r)}}return e}return this.IsNumber(t)?Math.acos(t):null},this.ACOS=function(t){if(Array.isArray(t)){var e=[];for(var a in t){var i=t[a];if(e[a]=null,this.IsNumber(i))if(i>=-1&&i<=1)e[a]=Math.acos(i);else if(a-1>=0){var r=e[a-1];this.IsNumber(r)&&(e[a]=r)}}return e}return this.IsNumber(t)?Math.acos(t):null},this.LAST=function(t,e,a){if(!Array.isArray(t))return[];for(var i=[],r=t.length,n=e,s=a,o=0,h=0,l=0,u=0;o<r&&!t[o];++o);for(h=o,u=o-s+1;h<r;++h,++u){for(l=0==n?o:Math.max(o,h-n);l<u&&!(t[l]<=0);++l);i[h]=l<u?0:1}return i},this.ZIG=function(t,e){var a=this.SymbolData.Data,i=[];if("number"==typeof t)switch(t){case 0:t=a.GetOpen();break;case 1:t=a.GetHigh();break;case 2:t=a.GetLow();break;case 3:t=a.GetClose();break;default:return i}return this.ZIG_Calculate(t,e)},this.GetFirstVaildIndex=function(t){for(var e=0;e<t.length;++e)if(this.IsNumber(t[e]))return e;return t.length},this.ZIG_Calculate=function(t,e){var a=[],i=t.length,r=this.GetFirstVaildIndex(t),n=0,s=0,o=0,h=0,l=0;for(n=r+1,s=o=r;n<i-1&&o==r;++n)o=100*Math.abs(t[n]-t[r])>=e*t[r]?t[n]>t[r]?n:-n:r;for(;n<i-1;++n)if(t[n]>=t[n-1]&&t[n]>=t[n+1])if(o<0){if(100*(t[n]-t[-o])<e*t[-o])continue;for(l=(t[s]-t[h=-o])/(-o-s),a[h--]=t[-o];h>=s;h--)a[h]=t[-o]+(-o-h)*l;s=-o,o=n}else t[n]>t[o]&&(o=n);else if(t[n]<=t[n-1]&&t[n]<=t[n+1])if(o>0){if(100*(t[o]-t[n])<e*t[o])continue;for(l=(t[o]-t[h=s])/(o-s),a[h++]=t[s];h<=o;++h)a[h]=t[s]+(h-s)*l;s=o,o=-n}else t[n]<t[-o]&&(o=-n);if(Math.abs(o)>=i-2&&(o>0&&t[i-1]>=t[o]&&(o=i-1),o<0&&t[i-1]<=t[-o]&&(o=1-i)),o>0)for(l=(t[o]-t[h=s])/(o-s),a[h++]=t[s];h<=o;++h)a[h]=t[s]+(h-s)*l;else for(l=(t[s]-t[h=-o])/(-o-s),a[h--]=t[-o];h>=s;h--)a[h]=t[-o]+(-o-h)*l;if((o=Math.abs(o))<i-1)if(t[i-1]>=t[o])for(l=(t[i-1]-t[h=o])/(i-o),a[h++]=t[o];h<i;++h)a[h]=t[o]+(h-o)*l;else for(l=(t[o]-t[h=i-1])/(i-o),a[h--]=t[i-1];h>=o;h--)a[h]=t[i-1]+(i-h)*l;return a},this.JSDraw=null,this.CalculateZIGLine=function(t,e,a,i,r){null==this.JSDraw&&(this.JSDraw=new Wi(this.ErrorHandler));var n=e.Up,s=t;if(n)for(var o=t.ID+1;o<a.ID;++o){var h=i[o];this.IsNumber(h)&&(s.Value<h&&(s={ID:o,Value:h}))}else for(var o=t.ID+1;o<a.ID;++o){var h=i[o];this.IsNumber(h)&&(s.Value>h&&(s={ID:o,Value:h}))}e.Value=s.Value,e.ID=s.ID;var l={Start:{ID:t.ID,Value:t.Value},End:{ID:e.ID,Value:e.Value}},u=this.JSDraw.CalculateDrawLine(l);for(var o in u){var c=u[o];r[c.ID]=c.Value}if(a.ID==i.length-1){l={Start:{ID:e.ID,Value:e.Value},End:{ID:a.ID,Value:a.Value}},u=this.JSDraw.CalculateDrawLine(l);for(var o in u){var c=u[o];r[c.ID]=c.Value}}else t.ID=e.ID,t.Value=e.Value,e.ID=a.ID,e.Value=a.Value,e.Up=t.Value<e.Value},this.TROUGHBARS=function(t,e,a){var i=this.ZIG(t,e),r=[],n=a;if(n<1)return r;for(var s=i.length,o=[],h=0;h<n;++h)o[h]=0;var l=0,h=this.GetFirstVaildIndex(i)+1;for(n--;h<s&&i[h]>i[h-1];++h);for(;h<s&&i[h]<i[h-1];++h);for(o[0]=--h;h<s-1;++h){if(i[h]<i[h+1]){if(l){if(n)for(var u=o.slice(0),c=0;c<n;++c)o[c+1]=u[c];o[l=0]=h}}else l=1;o[n]&&(r[h]=h-o[n])}return o[n]&&(r[h]=h-o[n]),r},this.TROUGH=function(t,e,a){var i=this.ZIG(t,e),r=[],n=a;if(n<1)return r;for(var s=i.length,o=[],h=0;h<n;++h)o[h]=0;var h=1,l=0,h=this.GetFirstVaildIndex(i)+1;for(n--;h<s&&i[h]>i[h-1];++h);for(;h<s&&i[h]<i[h-1];++h);for(o[0]=--h;h<s-1;++h){if(i[h]<i[h+1]){if(l){if(n)for(var u=o.slice(0),c=0;c<n;++c)o[c+1]=u[c];o[l=0]=h}}else l=1;o[n]&&(r[h]=i[o[n]])}return o[n]&&(r[h]=i[o[n]]),r},this.PEAKBARS=function(t,e,a){var i=this.ZIG(t,e),r=[],n=i.length,s=a;if(s<1)return r;for(var o=[],h=0;h<s;++h)o[h]=0;var l=0,h=this.GetFirstVaildIndex(i)+1;for(s--;h<n&&i[h]<i[h-1];++h);for(;h<n&&i[h]>i[h-1];++h);for(o[0]=--h;h<n-1;++h){if(i[h]>i[h+1]){if(l){if(s)for(var u=o.slice(0),c=0;c<s;++c)o[c+1]=u[c];o[l=0]=h}}else l=1;o[s]&&(r[h]=h-o[s])}return o[s]&&(r[h]=h-o[s]),r},this.PEAK=function(t,e,a){var i=this.ZIG(t,e),r=[],n=i.length,s=a;if(s<1)return r;for(var o=0,h=[],l=0;l<s;++l)h[l]=0;var l=this.GetFirstVaildIndex(i)+1;for(s--;l<n&&i[l]<i[l-1];++l);for(;l<n&&i[l]>i[l-1];++l);for(h[0]=--l;l<n-1;++l){if(i[l]>i[l+1]){if(o){if(s)for(var u=h.slice(0),c=0;c<s;++c)h[c+1]=u[c];h[o=0]=l}}else o=1;h[s]&&(r[l]=i[h[s]])}return h[s]&&(r[l]=i[h[s]]),r},this.EVERY=function(t,e){var a=[];if(e<1)return a;for(var i=0;i<t.length&&(a[i]=null,!this.IsNumber(t[i]));++i);for(var r=0;i<t.length;++i)t[i]?r+=1:r=0,r==e?(a[i]=1,--r):a[i]=0;return a},this.COST=function(t,e){var a=[],i=t/100;if(i<1e-6||i>1)return a;var r=this.SymbolData.Data.Data;if(!r||r.length<=0)return a;for(var n=this.SymbolData.GetStockCacheData({FunctionName:"FINANCE",Args:[7],ArgCount:1,Node:e}),s=r[0].High,o=r[0].Low,h=0;h<r.length;++h){var l=r[h];o=Math.min(o,l.Low),s=Math.max(s,l.High)}(o>2e3||o<0||s>2e3||o<0)&&this.ThrowUnexpectedNode(e,"COST() 历史K线最大最小值错误, 超出(0,1000)范围");var u=parseInt(100*s+1),c=parseInt(100*o-1),d=0,f=0,m=0;s=u/100,o=c/100;var C=u-c+1;if(C<1)return a;for(var p=[],D=[],h=0;h<C;++h)p[h]=0,D[h]=0;for(var v=0,g=0,S=0,T=0,h=0;h<r.length;++h)if(!(h>=n.length)){if(n[h]>1){var y=r[h];v=y.Vol/n[h];for(var I=0;I<C;I++)p[I]*=1-v;d=parseInt(Math.min(u,Math.max(c,100*y.Low)))-c,f=parseInt(Math.min(u,Math.max(c,100*y.High)))-c,m=parseInt(Math.min(u,Math.max(c,100*y.Close)))-c;for(var I=0;I<C;++I)D[I]=0;var x=parseInt((d+f+2*m)/4);if(x==f||x==d)D[x]+=y.Vol;else{for(var L=y.Vol/(x-d),M=d;M<x;++M)D[M]+=L/(x-d)*(M-d);for(M;M<=f;++M)D[M]+=L/(x-f)*(M-f)}for(var g=0,I=d;I<=f;I++)p[I]+=D[I];for(var I=0;I<C;I++)g+=p[I];for(I=0,T=S=0;I<C;++I)if((S+=p[I])>=g*i){T=(s-o)*I/C+o;break}}a[h]=T}return a},this.WINNER=function(t,e){var a=[],i=this.SymbolData.Data.Data;if(!i||i.length<=0)return a;for(var r=this.SymbolData.GetStockCacheData({FunctionName:"FINANCE",Args:[7],ArgCount:1,Node:e}),n=i[0].High,s=i[0].Low,o=0;o<i.length;++o){var h=i[o];s=Math.min(s,h.Low),n=Math.max(n,h.High)}(s>5e3||s<0||n>5e3||s<0)&&this.ThrowUnexpectedNode(e,"WINNER() 历史K线最大最小值错误, 超出(0,5000)范围");var l=parseInt(100*n+1),u=parseInt(100*s-1),c=0,d=0,f=0;n=l/100,s=u/100;var m=l-u+1;if(m<1)return a;for(var C=[],p=[],o=0;o<m;++o)C[o]=0,p[o]=0;for(var D=0,v=0,g=0,o=0;o<i.length;++o)if(!(o>=r.length)&&r[o]>1){var S=i[o];D=S.Vol/r[o];for(var T=0;T<m;T++)C[T]*=1-D;c=parseInt(Math.min(l,Math.max(u,100*S.Low)))-u,d=parseInt(Math.min(l,Math.max(u,100*S.High)))-u,f=parseInt(Math.min(l,Math.max(u,100*S.Close)))-u;for(var T=0;T<m;++T)p[T]=0;var y=parseInt((c+d+2*f)/4);if(y==d||y==c)p[y]+=S.Vol;else{for(var I=S.Vol/(y-c),x=c;x<y;++x)p[x]+=I/(y-c)*(x-c);for(x;x<=d;++x)p[x]+=I/(y-d)*(x-d)}for(var v=0,T=c;T<=d;T++)C[T]+=p[T];for(var T=0;T<m;T++)v+=C[T];d=Array.isArray(t)?parseInt(Math.min(100*t[o]-u,m-1)):parseInt(Math.min(100*t-u,m-1));for(var T=0,g=0;T<=d;T++)g+=C[T];v>0?a[o]=g/v:o-1>=0&&(a[o]=a[o-1])}return a},this.COSTEX=function(t,e,a){var i=[],r=this.SymbolData.Data.Data;if(!r||r.length<=0)return i;for(var n=this.SymbolData.GetStockCacheData({FunctionName:"FINANCE",Args:[7],ArgCount:1,Node:a}),s=r[0].High,o=r[0].Low,h=0;h<r.length;++h){var l=r[h];o=Math.min(o,l.Low),s=Math.max(s,l.High)}(o>5e3||o<0||s>5e3||o<0)&&this.ThrowUnexpectedNode(a,"COSTEX() 历史K线最大最小值错误, 超出(0,5000)范围");var u=parseInt(100*s+1),c=parseInt(100*o-1),d=0,f=0,m=0;s=u/100,o=c/100;var C=u-c+1;if(C<1)return i;for(var p=[],D=[],h=0;h<C;++h)p[h]=0,D[h]=0;for(var v=0,g=0,S=0,T=0,y=0,I=0,x=0,h=0,L=0;h<r.length;++h)if(!(h>=n.length)&&n[h]>1){var M=r[h];v=M.Vol/n[h];for(var L=0;L<C;L++)p[L]*=1-v;d=parseInt(Math.min(u,Math.max(c,100*M.Low)))-c,f=parseInt(Math.min(u,Math.max(c,100*M.High)))-c,m=parseInt(Math.min(u,Math.max(c,100*M.Close)))-c;for(var L=0;L<C;++L)D[L]=0;var _=parseInt((d+f+2*m)/4);if(_==f||_==d)D[_]+=M.Vol;else{for(var b=M.Vol/(_-d),w=d;w<_;++w)D[w]+=b/(_-d)*(w-d);for(w;w<=f;++w)D[w]+=b/(_-f)*(w-f)}g=0;for(var L=d;L<=f;L++)p[L]+=D[L];for(var L=0;L<C;L++)g+=p[L];for(f=Array.isArray(t)?parseInt(Math.min(100*t[h]-c,C-1)):parseInt(Math.min(100*t-c,C-1)),L=0,T=0,y=0;L<=f;L++)T+=p[L],y+=.01*(L+c)*p[L];for(f=Array.isArray(e)?parseInt(Math.min(100*e[h]-c,C-1)):parseInt(Math.min(100*e-c,C-1)),L=0,I=0,x=0;L<=f;L++)I+=p[L],x+=.01*(L+c)*p[L];S=T-I,dPerVolRange=y-x,Math.abs(dPerVolRange)>.001&&0!=S?i[h]=dPerVolRange/S:h-1>=0&&(i[h]=i[h-1])}return i},this.PPART=function(t,e){var a=[],i=t;if(i<0)return a;var r=this.SymbolData.Data.Data;if(!r||r.length<=0)return a;for(var n=this.SymbolData.GetStockCacheData({FunctionName:"FINANCE",Args:[7],ArgCount:1,Node:e}),s=i,o=0;s<r.length;++s){var h=s-i;if(!(h<0)){var l=0;for(o=0;o<i;++o){l+=r[o+h].Vol}if(s<n.length&&n[s]>0){var u=1-l/n[s];a[s]=u}}}return a},this.LWINNER=function(t,e,a){var i=t;i<=0&&this.ThrowUnexpectedNode(a,"LWINNER() 第1个参数错误");var r=[],n=this.SymbolData.Data.Data;if(!n||n.length<=0)return r;for(var s=this.SymbolData.GetStockCacheData({FunctionName:"FINANCE",Args:[7],ArgCount:1,Node:a}),o=0,h=0,l=i-1,u=0,c=0;l<n.length;++l){for(var d=l-i+1,f=n[d].High,m=n[d].Low,u=0;u<i;++u){var C=n[d+u];m=Math.min(m,C.Low),f=Math.max(f,C.High)}(m>5e3||m<0||f>5e3||m<0)&&this.ThrowUnexpectedNode(a,"LWINNER() 历史K线最大最小值错误, 超出(0,5000)范围");var p=parseInt(100*f+1),D=parseInt(100*m-1),v=0,g=0,S=0;f=p/100,m=D/100;var T=p-D+1;if(T<1)return r;for(var y=[],I=[],u=0;u<T;++u)y[u]=0,I[u]=0;for(u=0;u<i;++u){var x=s[d+u];if(!(x<1)){var L=n[d+u],M=L.Vol/x;for(c=0;c<T;c++)y[c]*=1-M;v=parseInt(Math.min(p,Math.max(D,100*L.Low)))-D,g=parseInt(Math.min(p,Math.max(D,100*L.High)))-D,S=parseInt(Math.min(p,Math.max(D,100*L.Close)))-D;for(var c=0;c<T;++c)I[c]=0;var _=parseInt((v+g+2*S)/4);if(_==g||_==v)I[_]+=L.Vol;else{for(var b=L.Vol/(_-v),w=v;w<_;++w)I[w]+=b/(_-v)*(w-v);for(var F;F<=g;++F)I[F]+=b/(_-g)*(F-g)}o=0;for(var c=v;c<=g;c++)y[c]+=I[c]}}for(var u=0;u<T;u++)o+=y[u];for(g=Array.isArray(e)?parseInt(Math.min(100*e[l]-D,T-1)):parseInt(Math.min(100*e-D,T-1)),h=0,c=0;c<=g;c++)h+=y[c];o>0&&h>0&&h<=o?r[l]=h/o:l-1>=0&&(r[l]=r[l-1])}return r},this.PWINNER=function(t,e,a){return[]},this.CalculateChip=function(t,e,a,i){for(var r={Min:null,Max:null,Data:[]},n=1,s=null,o=null,h=t;h>=0;--h){var l={},u=a[h];l.Vol=h==t?u.Vol*e[h]:u.Vol*n,l.Date=u.Date,l.High=u.High,l.Low=u.Low,null==s?s=l.High:s<l.High&&(s=l.High),null==o?o=l.Low:o<l.Low&&(o=l.Low),r.Data[h]=l,n*=1-e[h]/100*i}return r.Max=s,r.Min=o,r},this.UPNDAY=function(t,e){var a=[];if(e<1)return a;if(null==t||e>t.length)return a;for(var i=0,r=0;r<t.length;++r)a[r]=0,r-1<0||(this.IsNumber(t[r])&&this.IsNumber(t[r-1])?(t[r]>t[r-1]?++i:i=0,i==e&&(a[r]=1,--i)):i=0);return a},this.DOWNNDAY=function(t,e){var a=[];if(e<1)return a;if(null==t||e>t.length)return a;for(var i=0,r=0;r<t.length;++r)a[r]=0,r-1<0||(this.IsNumber(t[r])&&this.IsNumber(t[r-1])?(t[r]<t[r-1]?++i:i=0,i==e&&(a[r]=1,--i)):i=0);return a},this.NDAY=function(t,e,a){var i=[];if(a<1)return i;if(!Array.isArray(t)&&!Array.isArray(e))return i;if(null==t||null==e)return i;if(Array.isArray(t)&&Array.isArray(e)){if(a>=t.length||a>=e.length)return i;for(var r=Math.max(t.length,e.length),n=0,s=0;s<r;++s)i[s]=0,s>=t.length||s>=e.length||(this.IsNumber(t[s])&&this.IsNumber(e[s])?(t[s]>e[s]?++n:n=0,n==a&&(i[s]=1,--n)):n=0)}else if(Array.isArray(t)&&!Array.isArray(e)){if(a>=t.length||!this.IsNumber(e))return;var n=0;for(var o in t)i[o]=0,this.IsNumber(t[o])?(t[o]>e?++n:n=0,n==a&&(i[o]=1,--n)):n=0}else if(!Array.isArray(t)&&Array.isArray(e)){if(a>=e.length||!this.IsNumber(t))return;var n=0;for(var h in e)i[h]=0,this.IsNumber(e[h])?(t>e[h]?++n:n=0,n==a&&(i[h]=1,--n)):n=0}return i},this.LONGCROSS=function(t,e,a){for(var i=[],r=Math.max(t.length,e.length),n=0;n<r;++n)i[n]=0,n-1<0||n>=t.length||n>=e.length||this.IsNumber(t[n])&&this.IsNumber(e[n])&&this.IsNumber(t[n-1])&&this.IsNumber(e[n-1])&&t[n]>e[n]&&t[n-1]<e[n-1]&&(i[n]=1);for(var s=0,o=0;s<r;++s)if(i[s])for(o=1;o<=a&&s-o>=0;++o)if(t[s-o]>=e[s-o]){i[s]=0;break}return i},this.EXISTR=function(t,e,a){var i=[];if(!Array.isArray(t))return i;if(e=parseInt(e),a=parseInt(a),e<=0&&(e=t.length),a<=0&&(a=1),a>e)return i;for(var r,i=[],n=0,s=0;n<t.length;++n)if(i[n]=null,!(n-e<0||n-a<0))for(i[n]=0,s=e;s>=a;--s){var r=t[n-s];if(this.IsNumber(r)&&r){i[n]=1;break}}return i},this.RELATE=function(t,e,a){var i=[];if(a<1&&(a=1),!Array.isArray(t)||!Array.isArray(e))return i;for(var r=this.CalculateAverage(t,a),n=this.CalculateAverage(e,a),s=Math.max(t.length,e.length),o=0,h=0;o<s;++o)if(i[o]=null,!(o>=t.length||o>=e.length||o>=r.length||o>=n.length)){var l=r[o],u=n[o],c=0,d=0,f=0;for(h=o-a+1;h<=o;++h)c+=(t[h]-l)*(e[h]-u),d+=Math.pow(t[h]-l,2),f+=Math.pow(e[h]-u,2);i[o]=c/a/(Math.sqrt(d/a)*Math.sqrt(f/a))}return i},this.CalculateAverage=function(t,e){var a=[];if(e<1)return a;for(var i=0,r=0;r<t.length&&!this.IsNumber(t[r]);++r);for(;r<t.length&&r<e;++r){a[r]=null;var n=t[r];this.IsNumber(n)&&(i+=n)}for(a[r-1]=i/e;r<t.length;++r){var n=t[r],s=t[r-e];this.IsNumber(n)||(n=0),this.IsNumber(s)||(s=0),i=i-s+n,a[r]=i/e}return a},this.COVAR=function(t,e,a){if(this.IsNumber(t)||this.IsNumber(e))return 0;var i=[];if(a<1&&(a=1),!Array.isArray(t)||!Array.isArray(e))return i;for(var r=this.CalculateAverage(t,a),n=this.CalculateAverage(e,a),s=Math.max(t.length,e.length),s=Math.max(t.length,e.length),o=0,h=0;o<s;++o)if(i[o]=null,!(o>=t.length||o>=e.length||o>=r.length||o>=n.length)){var l=r[o],u=n[o],c=0;for(h=o-a+1;h<=o;++h)c+=(t[h]-l)*(e[h]-u);i[o]=c/a}return i},this.HHVBARS=function(t,e){var a=[];if(!Array.isArray(t))return a;if(Array.isArray(e))for(var i=0;i<e.length;++i){a[i]=null;var r=e[i];if(this.IsNumber(r)){var n=i-r;n<0&&(n=0);for(var s=null,o=n;o<t.length;++o)if(this.IsNumber(t[o])){s=o;break}for(var h=0;o<t.length&&h<r;++h,++o)t[o]>=t[s]&&(s=o);null!=s&&(a[i]=i-s)}}else{e<1&&(e=t.length);for(var s=null,i=0;i<t.length;++i)if(a[i]=null,this.IsNumber(t[i])){s=i;break}var o=0;for(i=s+1;i<t.length&&o<e;++i,++o)t[i]>=t[s]&&(s=i),e==t.length&&(a[i]=i-s);for(;i<t.length;++i){if(i-s<e)t[i]>=t[s]&&(s=i);else for(s=i-e+1,o=s;o<=i;++o)t[o]>=t[s]&&(s=o);a[i]=i-s}}return a},this.LLVBARS=function(t,e){var a=[];if(!Array.isArray(t))return a;if(Array.isArray(e))for(var i=0;i<e.length;++i){a[i]=null;var r=e[i];if(this.IsNumber(r)){var n=i-r;n<0&&(n=0);for(var s=null,o=n;o<t.length;++o)if(this.IsNumber(t[o])){s=o;break}for(var h=0;o<t.length&&h<r;++h,++o)t[o]<=t[s]&&(s=o);null!=s&&(a[i]=i-s)}}else{e<1&&(e=t.length);for(var s=null,i=0;i<t.length;++i)if(a[i]=null,this.IsNumber(t[i])){s=i;break}var o=0;for(i=s+1;i<t.length&&o<e;++i,++o)t[i]<=t[s]&&(s=i),e==t.length&&(a[i]=i-s);for(;i<t.length;++i){if(i-s<e)t[i]<=t[s]&&(s=i);else for(s=i-e+1,o=s;o<=i;++o)t[o]<=t[s]&&(s=o);a[i]=i-s}}return a},this.BETA=function(t){var e=[],a=this.SymbolData.Data,i=this.SymbolData.IndexData;t<=0&&(t=1);for(var r=[],n=[],s=0;s<a.Data.length;++s){r[s]=0,n[s]=0;var o=a.Data[s],h=i.Data[s];o.Close>0&&o.YClose>0&&(r[s]=(o.Close-o.YClose)/o.YClose),h.Close>0&&h.YClose>0&&(n[s]=(h.Close-h.YClose)/h.YClose)}for(var l=this.CalculateAverage(r,t),u=this.CalculateAverage(n,t),c=0,d=0;c<a.Data.length;++c)if(e[c]=null,!(c>=r.length||c>=n.length||c>=l.length||c>=u.length)){var f=l[c],m=u[c],C=0,p=0;for(d=c-t+1;d<=c;++d){var D=n[d]-m,v=r[d]-f;C+=D*v,p+=D*D}this.IsDivideNumber(p)&&this.IsNumber(C)&&(e[c]=C/p)}return e},this.BETA2=function(t,e,a){var i=[];a<=0&&(a=1);for(var r=[null],n=[null],s=Math.max(t.length,e.length),o={X:t[0],Y:e[0]},h=1;h<s;++h){r[h]=0,n[h]=0;var l=t[h],u=e[h];o.X>0&&(r[h]=(l-o.X)/o.X),o.Y>0&&(n[h]=(u-o.Y)/o.Y),o={X:l,Y:u}}for(var c=this.CalculateAverage(r,a),d=this.CalculateAverage(n,a),h=0,f=0;h<s;++h)if(i[h]=null,!(h>=r.length||h>=n.length||h>=c.length||h>=d.length)){var m=c[h],C=d[h],p=0,D=0;for(f=h-a+1;f<=h;++f){var v=r[f]-m,g=n[f]-C;p+=v*g,D+=v*v}this.IsDivideNumber(D)&&this.IsNumber(p)&&(i[h]=p/D)}return i},this.SAR=function(t,e,a){var i=[],r=this.SymbolData.Data;if(t>=r.Data.length)return i;for(var n=null,s=null,o=0;o<t;++o){var h=r.Data[o];null==n?n=h.High:n<h.High&&(n=h.High),null==s?s=h.Low:s>h.Low&&(s=h.Low)}var l=0;i[t-1]=s;for(var u=s,c=r.Data[0].High,d=e/100,o=t;o<r.Data.length;++o){var f=c,h=r.Data[o],m=r.Data[o-1];0==l?h.Low<i[o-1]?(l=1,c=h.Low,d=e/100,u=Math.max(h.High,m.High),u=Math.max(u,f+d*(c-f))):(l=0,h.High>f&&(c=h.High,d=Math.min(d+e/100,a/100)),u=Math.min(h.Low,m.Low),u=Math.min(u,i[o-1]+d*(c-i[o-1]))):1==l&&(h.High>i[o-1]?(l=0,c=h.High,d=e/100,u=Math.min(h.Low,m.Low),u=Math.min(u,i[o-1]+d*(c-f))):(l=1,h.Low<f&&(c=h.Low,d=Math.min(d+e/100,a/100)),u=Math.max(h.High,m.High),u=Math.max(u,i[o-1]+d*(c-i[o-1])))),i[o]=u}return i},this.SARTURN=function(t,e,a){var i=[],r=this.SAR(t,e,a),n=this.SymbolData.Data,s=0;for(s=0;s<r.length&&!this.IsNumber(r[s]);++s);var o=0;s<n.Data.length&&(o=n.Data[s].Close>r[s]);for(var h=s+1;h<n.Data.length;++h){var l=n.Data[h];l.Close<r[h]&&o?i[h]=-1:i[h]=l.Close>r[h]&&!o?1:0,o=l.Close>r[h]}return i},this.BACKSET=function(t,e){var a=[];if(!t)return a;var i=t.length;if(!this.IsNumber(i)||i<=0)return a;if(Array.isArray(e)){for(var r=0;r<i;++r)a[r]=0;for(var r=0;r<i;++r){var n=t[r],s=e[r];if(this.IsNumber(n)&&n&&this.IsNumber(s))for(var o=r,h=0;o>=0&&h<s;--o,++h)a[o]=1}}else{for(var r=0;r<i;++r)a[r]=0;for(var l=0;l<i&&!this.IsNumber(t[l]);++l);if(l==i)return a;for(var u=Math.min(i-l,Math.max(e,1)),r=i-1,o=0;r>=0;--r){var n=t[r];if(this.IsNumber(n)&&n)for(o=r;o>r-u;--o)a[o]=1}if(t[r])for(o=r;o>=l;--o)a[o]=1}return a},this.BETWEEN=function(t,e,a){var i=[],r="number"==typeof t,n="number"==typeof e,s="number"==typeof a;if(r&&n&&s)return t>=e&&t<=a?1:0;for(var o in t){i[o]=0;var h=t[o],l=null,u=null;n?l=e:o<e.length-1&&(l=e[o]),s?u=a:o<a.length-1&&(u=a[o]),null!=l&&null!=u&&(l>u?h>=u&&h<=l&&(i[o]=1):h<=u&&h>=l&&(i[o]=1))}return i},this.STRCAT=function(t,e){var a=[];return he.IsString(t)&&he.IsString(e)&&(a=t+e),a},this.VARCAT=function(t,e){var a=[];if(Array.isArray(t)&&Array.isArray(e))for(var i=Math.max(t.length,e.length),r="",n=0;n<i;++n){if(a[n]=null,r="",n<t.length){var s=t[n];he.IsString(s)&&(r+=s)}if(n<e.length){var s=e[n];he.IsString(s)&&(r+=s)}""!=r&&(a[n]=r)}else if(he.IsString(t)&&Array.isArray(e))for(var n=0;n<e.length;++n){a[n]=null;var s=e[n];he.IsString(s)&&(a[n]=t+s)}else if(Array.isArray(t)&&he.IsString(e))for(var n=0;n<t.length;++n){a[n]=null;var s=t[n];he.IsString(s)&&(a[n]=s+e)}else he.IsString(t)&&he.IsString(e)&&(a=t+e);return a},this.FINDSTR=function(t,e){var a,i,r=[];if(a=he.IsNumber(t)?t.toString():t,i=he.IsNumber(e)?e.toString():e,he.IsString(a)&&he.IsString(i))return a.indexOf(i)>=0?1:0;if(Array.isArray(t)&&he.IsString(i))for(var n=0;n<t.length;++n){var s=t[n];he.IsString(s)?r[n]=s.indexOf(i)>=0?1:0:he.IsNumber(s)?(a=s.toString(),r[n]=a.indexOf(i)>=0?1:0):r[n]=0}return r},this.STRSPACE=function(t){var e=[];if(Array.isArray(t))for(var a=0;a<t.length;++a){e[a]=null;var i=t[a];he.IsString(i)&&(e[a]=i+" ")}else he.IsString(t)&&(e=t+" ");return e},this.CON2STR=function(t,e){var a=[];if(Array.isArray(t))for(var i=t.length-1;i>=0;--i){var r=t[i];if(this.IsNumber(r))return a=r.toFixed(e)}else this.IsNumber(t)&&(a=t.toFixed(e));return a},this.VAR2STR=function(t,e){var a=[];if(Array.isArray(t))for(var i=0;i<t.length;++i){a[i]=null;var r=t[i];this.IsNumber(r)&&(a[i]=r.toFixed(e))}else this.IsNumber(t)&&(a=t.toFixed(e));return a},this.MOD=function(t,e){var a=[],i="number"==typeof t,r="number"==typeof e;if(i&&r)return Gi.MOD(t,e);if(!i&&!r){for(var n=Math.max(t.length,e.length),s=0;s<n;++s)a[s]=null,s<t.length&&s<e.length&&this.IsNumber(t[s])&&this.IsNumber(e[s])&&(a[s]=Gi.MOD(t[s],e[s]));return a}if(i&&!r){for(var o in e)a[o]=null,this.IsNumber(t)&&this.IsNumber(e[o])&&(a[o]=Gi.MOD(t,e[o]));return a}if(!i&&r){for(var o in t)a[o]=null,this.IsNumber(t[o])&&this.IsNumber(e)&&(a[o]=Gi.MOD(t[o],e));return a}return a},this.POW=function(t,e){var a=[];if(Array.isArray(t)&&Array.isArray(e))for(var i=0;i<t.length;++i){var r=t[i],n=e[i];this.IsNumber(r)&&this.IsNumber(n)?a[i]=Math.pow(r,n):a[i]=null}else if(he.IsNumber(t)&&Array.isArray(e))for(var i=0;i<e.length;++i){var s=e[i];this.IsNumber(s)?a[i]=Math.pow(t,s):a[i]=null}else{if(he.IsNumber(t)&&he.IsNumber(e))return Math.pow(t,e);if(Array.isArray(t)&&he.IsNumber(e))for(var i=0;i<t.length;++i){var s=t[i];this.IsNumber(s)?a[i]=Math.pow(s,e):a[i]=null}}return a},this.CEILING=function(t){if("number"==typeof t)return parseInt(t);var e=[];for(var a in t){var i=t[a];this.IsNumber(i)?e[a]=parseInt(i):e[a]=null}return e},this.FLOOR=function(t){if("number"==typeof t)return parseInt(t-1);var e=[];for(var a in t){var i=t[a];this.IsNumber(i)?e[a]=parseInt(i-1):e[a]=null}return e},this.ZTPRICE=function(t,e){if(!this.IsNumber(e))return null;if(Array.isArray(t)){var a=[];for(var i in t){var r=t[i];this.IsNumber(r)?a[i]=(1+e)*r:a[i]=null}return a}if(this.IsNumber(t)){var a=(1+e)*t;return a}},this.DTPRICE=function(t,e){if(!this.IsNumber(e))return null;if(Array.isArray(t)){var a=[];for(var i in t){var r=t[i];this.IsNumber(r)?a[i]=(1-e)*r:a[i]=null}return a}if(this.IsNumber(t)){var a=(1-e)*t;return a}},this.FRACPART=function(t){if(Array.isArray(t)){var e=[],a=0;for(var i in t){var r=t[i];this.IsNumber(r)?(a=parseInt(r),e[i]=r-a):e[i]=null}return e}if(this.IsNumber(t)){a=parseInt(t);var e=t-a;return e}},this.BARSLASTCOUNT=function(t){var e=null;if(Array.isArray(t)){if(e=[],t.length>0)for(var a=0,i=t.length-1;i>=0;--i){a=0;for(var r=i;r>=0&&t[r];--r)++a;e[i]=a}}else e=t?1:0;return e},this.INTPART=function(t){var e=null;if(Array.isArray(t)){e=[];for(var a in t){var i=t[a];this.IsNumber(i)?e[a]=parseInt(i):e[a]=null}}else this.IsNumber(t)&&(e=parseInt(t));return e},this.CONST=function(t){if(Array.isArray(t)){var e=t.length;return e>0?t[e-1]:null}return t},this.TOPRANGE=function(t){if(this.IsNumber(t))return 0;var e=[];if(Array.isArray(t))for(var a=t.length,i=a-1;i>=0;--i){e[i]=0;var r=t[i];if(this.IsNumber(r)){for(var n=0,s=i-1;s>=0&&!(t[s]>r);--s)++n;e[i]=n}}return e},this.LOWRANGE=function(t){if(this.IsNumber(t))return 0;var e=[];if(Array.isArray(t))for(var a=t.length,i=a-1;i>=0;--i){e[i]=0;var r=t[i];if(this.IsNumber(r)){for(var n=0,s=i-1;s>=0&&!(t[s]<r);--s)++n;e[i]=n}}return e},this.FINDLOW=function(t,e,a,i){if(this.IsNumber(t))return t;var r=[];if(Array.isArray(t))for(var n=t.length,s=n-1;s>=0;--s){r[s]=null;for(var o=[],h=e;h<a;++h){var l=s-h;if(l<0)break;var u=t[l];this.IsNumber(u)&&o.push(u)}if(o.length>0){o.sort(function(t,e){return t-e});var l=i-1;l<0?l=0:l>=o.length&&(l=o.length-1),r[s]=o[l]}}return r},this.FINDHIGH=function(t,e,a,i){if(this.IsNumber(t))return t;var r=[];if(Array.isArray(t))for(var n=t.length,s=n-1;s>=0;--s){r[s]=null;for(var o=[],h=e;h<a;++h){var l=s-h;if(l<0)break;var u=t[l];this.IsNumber(u)&&o.push(u)}if(o.length>0){o.sort(function(t,e){return e-t});var l=i-1;l<0?l=0:l>=o.length&&(l=o.length-1),r[s]=o[l]}}return r},this.FINDHIGHBARS=function(t,e,a,i){if(this.IsNumber(t))return a-e-i;var r=[];if(Array.isArray(t))for(var n=t.length,s=n-1;s>=0;--s){r[s]=null;for(var o=[],h=e;h<a;++h){var l=s-h;if(l<0)break;var u=t[l];this.IsNumber(u)&&o.push({Value:u,Period:h})}if(o.length>0){o.sort(function(t,e){return e.Value-t.Value});var l=i-1;l<0?l=0:l>=o.length&&(l=o.length-1),r[s]=o[l].Period}}return r},this.FINDLOWBARS=function(t,e,a,i){if(this.IsNumber(t))return a-e-i;var r=[];if(Array.isArray(t))for(var n=t.length,s=n-1;s>=0;--s){r[s]=null;for(var o=[],h=e;h<a;++h){var l=s-h;if(l<0)break;var u=t[l];this.IsNumber(u)&&o.push({Value:u,Period:h})}if(o.length>0){o.sort(function(t,e){return t.Value-e.Value});var l=i-1;l<0?l=0:l>=o.length&&(l=o.length-1),r[s]=o[l].Period}}return r},this.HOD=function(t,e){var a=[];if(he.IsNumber(t))return 1;if(Array.isArray(t))for(var i=t.length,r=i-1;r>=0;--r){var n=t[r];if(he.IsNumber(n)){if(Array.isArray(e))var s=parseInt(e[r]);else var s=parseInt(e);e<=0&&(s=r);for(var o=1,h=r-1,l=1;h>=0&&l<s;--h,++l){var u=t[h];he.IsNumber(u)&&u>n&&++o}a[r]=o}}return a},this.LOD=function(t,e){var a=[];if(he.IsNumber(t))return 1;if(Array.isArray(t))for(var i=t.length,r=i-1;r>=0;--r){var n=t[r];if(he.IsNumber(n)){if(Array.isArray(e))var s=parseInt(e[r]);else var s=parseInt(e);e<=0&&(s=r);for(var o=1,h=r-1,l=1;h>=0&&l<s;--h,++l){var u=t[h];he.IsNumber(u)&&u<n&&++o}a[r]=o}}return a},this.BARSNEXT=function(t){if(!Array.isArray(t))return 0;for(var e=[],a=0;a<t.length;++a){e[a]=0;for(var i=a,r=0;i<t.length;++i,++r){if(t[i]>0){e[a]=r;break}}}return e},this.RAND=function(t){if(Array.isArray(t)){var e=[];for(var a in t){e[a]=null;var i=t[a],r=parseInt(i);r<=0||(e[a]=Math.ceil(Math.random()*r))}return e}var r=parseInt(t);if(r<=0)return null;for(var n=this.SymbolData.Data,s=n.Data.length,e=[],a=0;a<s;++a)e[a]=Math.ceil(Math.random()*r);return e},this.AMA=function(t,e){var a,i=[];if(Array.isArray(e)){for(var r=t.length-1;r>=0;--r)if(this.IsNumber(e[r])){a=e[r];break}}else a=e;if(this.IsNumber(a)){if(a>1)return i;var n=0,s=0;for(n;n<t.length;++n)if(i[n]=null,this.IsNumber(t[n])){s=t[n],i[n]=s;break}for(var r=n+1;r<t.length;++r){var o=t[r];i[r]=i[r-1]+a*(o-i[r-1])}}return i},this.TMA=function(t,e,a){var i=[];if(this.IsNumber(e)&&e<=1&&this.IsNumber(a)&&a<1){var r=!1;for(var n in t)if(i[n]=null,0==r){var s=t[n];this.IsNumber(s)&&(i[n]=s,i[n],r=!0)}else{var s=t[n];if(!this.IsNumber(s))continue;i[n]=e*i[n-1]+a*s,i[n]}}return i},this.ROUND=function(t){if(this.IsNumber(t))return Math.round(t);var e=[];if(Array.isArray(t))for(var a in t){var i=t[a];this.IsNumber(i)?e[a]=Math.round(i):e[a]=null}return e},this.ROUND2=function(t,e){var a=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12],i=0;if(this.IsNumber(e)&&(i=parseInt(e)),e<0?i=0:e>=a.length&&(i=a.length-1),this.IsNumber(t))return Math.round(t*a[i])/a[i];var r=[];if(Array.isArray(t))for(var n in t){var s=t[n];this.IsNumber(s)?r[n]=Math.round(s*a[i])/a[i]:r[n]=null}return r},this.TRMA=function(t,e){if(!this.IsNumber(e)||e<=0)return[];e=parseInt(e);var a=0,i=0;e%2==0?(a=parseInt(e/2),i=a+1):(a=parseInt((e+1)/2),i=a);var r=this.MA(t,a);return this.MA(r,i)},this.VALUEWHEN=function(t,e){if(Array.isArray(t)){var a=[];if(Array.isArray(e)){var i=null;for(var r in t)if(r>=e.length)a[r]=i;else{var n=e[r];t[r]?(a[r]=n,i=n):a[r]=i}}else{var i=null;for(var r in t)t[r]?(a[r]=e,i=e):a[r]=i}return a}return t?1:0},this.HARMEAN=function(t,e){var a=[];if(Array.isArray(t))if(Array.isArray(e))for(var i=0;i<t.length;++i)if(i>=e.length)a[i]=null;else{var r=parseInt(e[i]);if(r<=0||r>i)a[i]=null;else{for(var n=0,s=0;s<r;++s){var o=t[i-s];if(!this.IsNumber(o)||0==o){n=null;break}n+=1/o}a[i]=null==n?null:1/(n/r)}}else if(this.IsNumber(e)){if((e=parseInt(e))<=0)return a;for(var i=0;i<t.length;++i)if(e>i)a[i]=null;else{for(var n=0,s=0;s<e;++s){var o=t[i-s];if(!this.IsNumber(o)||0==o){n=null;break}n+=1/o}a[i]=null==n?null:1/(n/e)}}return a},this.DATETODAY=function(t){var e=[],a=new Date("1990-12-19");if(Array.isArray(t))for(var i in t){e[i]=null;var r=t[i];if(this.IsNumber(r)){var n=r+19e6;if(!(n<19901219)){var s=parseInt(n/1e4),o=parseInt(n%1e4/100),h=parseInt(n%100),l=new Date(s+"-"+o+"-"+h);e[i]=Math.round((l-a)/864e5)}}}else if(this.IsNumber(t)){var n=t+19e6;if(n>=19901219){var s=parseInt(n/1e4),o=parseInt(n%1e4/100),h=parseInt(n%100),l=new Date(s+"-"+o+"-"+h);return Math.round((l-l)/864e5)}}return e},this.DAYTODATE=function(t){var e=new Date("1990-12-19"),a=[];if(Array.isArray(t))for(var i in t){a[i]=null;var r=t[i];if(this.IsNumber(r)){e.setDate(e.getDate()+r);var n=1e4*e.getFullYear()+100*(e.getMonth()+1)+e.getDate();n-=19e6,a[i]=n,e.setDate(e.getDate()-r)}}else if(this.IsNumber(t)){e.setDate(e.getDate()+t);var n=1e4*e.getFullYear()+100*(e.getMonth()+1)+e.getDate();return n-=19e6}return a},this.ANY=function(t,e){e<=0&&(e=1);var a=[];if(Array.isArray(t)){if(e>=t.length)return 0;for(var i=e,r=0;i<t.length;++i){var n=0;for(r=0;r<e;++r){if(t[i-r]>0){n=1;break}}a[i]=n}return a}if(he.IsNumber(t)){if(t<=0)return 0;if(e>=this.SymbolData.Data.Data.length)return 0;for(var i=e;i<this.SymbolData.Data.Data.length;++i)a[i]=1;return a}return 0},this.ALL=function(t,e){e<=0&&(e=1);var a=[];if(Array.isArray(t)){if(e>=t.length)return 0;for(var i=e,r=0;i<t.length;++i){var n=1;for(r=0;r<e;++r){if(!(t[i-r]>0)){n=0;break}}a[i]=n}return a}if(he.IsNumber(t)){if(t<=0)return 0;if(e>=this.SymbolData.Data.Data.length)return 0;for(var i=e;i<this.SymbolData.Data.Data.length;++i)a[i]=1;return a}return 0},this.CallFunction=function(t,e,a,i){switch(t){case"MAX":case"MAX6":return this.MAX(e,a);case"MIN":case"MIN6":return this.MIN(e,a);case"REF":return this.REF(e[0],e[1]);case"REFV":return this.REFV(e[0],e[1]);case"REFX":return this.REFX(e[0],e[1]);case"REFXV":return this.REFXV(e[0],e[1]);case"REFX1":return this.REFX(e[0],e[1]);case"ABS":return this.ABS(e[0]);case"MA":return this.MA(e[0],e[1]);case"EMA":return this.EMA(e[0],e[1]);case"SMA":return this.SMA(e[0],e[1],e[2]);case"DMA":return this.DMA(e[0],e[1]);case"XMA":return this.XMA(e[0],e[1]);case"EXPMA":return this.EXPMA(e[0],e[1]);case"EXPMEMA":return this.EXPMEMA(e[0],e[1]);case"COUNT":return this.COUNT(e[0],e[1]);case"LLV":return this.LLV(e[0],e[1]);case"LV":return this.LV(e[0],e[1]);case"LLVBARS":return this.LLVBARS(e[0],e[1]);case"HHV":return this.HHV(e[0],e[1]);case"HV":return this.HV(e[0],e[1]);case"HHVBARS":return this.HHVBARS(e[0],e[1]);case"MULAR":return this.MULAR(e[0],e[1]);case"CROSS":return this.CROSS(e[0],e[1]);case"LONGCROSS":return this.LONGCROSS(e[0],e[1],e[2]);case"CROSSDOWN":return this.CROSSDOWN(e[0],e[1]);case"CROSSUP":return this.CROSSUP(e[0],e[1]);case"AVEDEV":return this.AVEDEV(e[0],e[1]);case"STD":return this.STD(e[0],e[1]);case"IF":case"IFF":case"IFELSE":return this.IF(e[0],e[1],e[2]);case"IFN":return this.IFN(e[0],e[1],e[2]);case"NOT":return this.NOT(e[0]);case"SUM":return this.SUM(e[0],e[1]);case"RANGE":return this.RANGE(e[0],e[1],e[2]);case"EXIST":return this.EXIST(e[0],e[1]);case"EXISTR":return this.EXISTR(e[0],e[1],e[2]);case"FILTER":return this.FILTER(e[0],e[1]);case"TFILTER":return this.TFILTER(e[0],e[1],e[2]);case"SLOPE":return this.SLOPE(e[0],e[1]);case"BARSLAST":return this.BARSLAST(e[0]);case"BARSCOUNT":return this.BARSCOUNT(e[0]);case"BARSSINCEN":return this.BARSSINCEN(e[0],e[1]);case"BARSSINCE":return this.BARSSINCE(e[0]);case"LAST":return this.LAST(e[0],e[1],e[2]);case"EVERY":return this.EVERY(e[0],e[1]);case"DEVSQ":return this.DEVSQ(e[0],e[1]);case"ZIG":return this.ZIG(e[0],e[1]);case"TROUGHBARS":return this.TROUGHBARS(e[0],e[1],e[2]);case"TROUGH":return this.TROUGH(e[0],e[1],e[2]);case"PEAKBARS":return this.PEAKBARS(e[0],e[1],e[2]);case"PEAK":return this.PEAK(e[0],e[1],e[2]);case"COST":return this.COST(e[0]);case"WINNER":return this.WINNER(e[0],a);case"PPART":return this.PPART(e[0],a);case"COSTEX":return this.COSTEX(e[0],e[1],a);case"LWINNER":return this.LWINNER(e[0],e[1],a);case"PWINNER":return this.PWINNER(e[0],e[1],a);case"FORCAST":return this.FORCAST(e[0],e[1]);case"TSMA":return this.TSMA(e[0],e[1]);case"STDP":return this.STDP(e[0],e[1]);case"VAR":return this.VAR(e[0],e[1]);case"VARP":return this.VARP(e[0],e[1]);case"UPNDAY":return this.UPNDAY(e[0],e[1]);case"DOWNNDAY":return this.DOWNNDAY(e[0],e[1]);case"NDAY":return this.NDAY(e[0],e[1],e[2]);case"RELATE":return this.RELATE(e[0],e[1],e[2]);case"COVAR":return this.COVAR(e[0],e[1],e[2]);case"BETA":return this.BETA(e[0]);case"BETA2":return this.BETA2(e[0],e[1],e[2]);case"WMA":return this.WMA(e[0],e[1]);case"MEMA":return this.MEMA(e[0],e[1]);case"SUMBARS":return this.SUMBARS(e[0],e[1]);case"REVERSE":return this.REVERSE(e[0]);case"SAR":return this.SAR(e[0],e[1],e[2]);case"SARTURN":return this.SARTURN(e[0],e[1],e[2]);case"BACKSET":return this.BACKSET(e[0],e[1]);case"BETWEEN":return this.BETWEEN(e[0],e[1],e[2]);case"STRCAT":return this.STRCAT(e[0],e[1]);case"CON2STR":return this.CON2STR(e[0],e[1]);case"VAR2STR":return this.VAR2STR(e[0],e[1]);case"VARCAT":return this.VARCAT(e[0],e[1]);case"STRSPACE":return this.STRSPACE(e[0]);case"FINDSTR":return this.FINDSTR(e[0],e[1]);case"DTPRICE":return this.DTPRICE(e[0],e[1]);case"ZTPRICE":return this.ZTPRICE(e[0],e[1]);case"MOD":return this.MOD(e[0],e[1]);case"POW":return this.POW(e[0],e[1]);case"CEILING":return this.CEILING(e[0]);case"FLOOR":return this.FLOOR(e[0]);case"FRACPART":return this.FRACPART(e[0]);case"BARSLASTCOUNT":return this.BARSLASTCOUNT(e[0]);case"INTPART":return this.INTPART(e[0]);case"CONST":return this.CONST(e[0]);case"TOPRANGE":return this.TOPRANGE(e[0]);case"LOWRANGE":return this.LOWRANGE(e[0]);case"FINDLOW":return this.FINDLOW(e[0],e[1],e[2],e[3]);case"FINDLOWBARS":return this.FINDLOWBARS(e[0],e[1],e[2],e[3]);case"FINDHIGH":return this.FINDHIGH(e[0],e[1],e[2],e[3]);case"FINDHIGHBARS":return this.FINDHIGHBARS(e[0],e[1],e[2],e[3]);case"BARSNEXT":return this.BARSNEXT(e[0]);case"HOD":return this.HOD(e[0],e[1]);case"LOD":return this.LOD(e[0],e[1]);case"AMA":return this.AMA(e[0],e[1]);case"TMA":return this.TMA(e[0],e[1],e[2]);case"ROUND":return this.ROUND(e[0]);case"ROUND2":return this.ROUND2(e[0],e[1]);case"TRMA":return this.TRMA(e[0],e[1]);case"VALUEWHEN":return this.VALUEWHEN(e[0],e[1]);case"HARMEAN":return this.HARMEAN(e[0],e[1]);case"DATETODAY":return this.DATETODAY(e[0]);case"DAYTODATE":return this.DAYTODATE(e[0]);case"ANY":return this.ANY(e[0],e[1]);case"ALL":return this.ALL(e[0],e[1]);case"ATAN":return this.Trigonometric(e[0],Math.atan);case"ACOS":return this.ACOS(e[0]);case"ASIN":return this.ASIN(e[0]);case"COS":return this.Trigonometric(e[0],Math.cos);case"SIN":return this.Trigonometric(e[0],Math.sin);case"TAN":return this.Trigonometric(e[0],Math.tan);case"LN":return this.Trigonometric(e[0],Math.log);case"LOG":return this.Trigonometric(e[0],cr.default);case"EXP":return this.Trigonometric(e[0],Math.exp);case"SQRT":return this.Trigonometric(e[0],Math.sqrt);case"RAND":return this.RAND(e[0]);default:this.ThrowUnexpectedNode(a,"函数"+t+"不存在",t)}},this.CallCustomFunction=function(t,e,a,i){var r=mn.CustomFunction.Data.get(t),n=a.GetStockCacheData({CustomName:t,Node:i});if(!r.Invoke)return{Out:n};Fr.Complier.Log("[JSAlgorithm::CallCustomFunction] call custom function functionInfo=",r);var s=this,o={Name:t,Args:e,Symbol:a.Symbol,Period:a.Period,Right:a.Right,KData:a.Data,DownloadData:n,ThrowError:function(t){s.ThrowUnexpectedNode(i,t)}};return r.Invoke(o)},this.ThrowUnexpectedNode=function(t,e,a){var i=t.Marker,r=e||"执行异常";return this.ErrorHandler.ThrowError(i.Index,i.Line,i.Column,r,a)}}function Wi(t,e){this.ErrorHandler=t,this.SymbolData=e,this.DRAWTEXT=function(t,e,a){var i=[],r={DrawData:i,DrawType:"DRAWTEXT",Text:a};if(Array.isArray(t)){if(t.length<=0)return r;var n=this.IsNumber(e);for(var s in t)i[s]=null,!isNaN(t[s])&&t[s]&&(n?i[s]=e:this.IsNumber(e[s])&&(i[s]=e[s]))}else if(this.IsNumber(t)&&t)for(var n=this.IsNumber(e),s=0;s<this.SymbolData.Data.Data.length;++s)n?i[s]=e:this.IsNumber(e[s])&&(i[s]=e[s]);return r},this.DRAWTEXT_FIX=function(t,e,a,i,r){var n={Value:[],Text:[]},s={DrawData:n,DrawType:"DRAWTEXT_FIX",Text:null,Position:{X:e,Y:a,Type:i}};if(t.length<=0)return s;if(Array.isArray(t))for(var o in t)n.Text[o]=null,n.Value[o]=0,!isNaN(t[o])&&t[o]&&(n.Value[o]=1,n.Text[o]=r);else if(t)for(var o=0;o<this.SymbolData.Data.Data.length;++o)n.Text[o]=r,n.Value[o]=1;return s},this.SUPERDRAWTEXT=function(t,e,a,i,r){var n=[],s={DrawData:n,DrawType:"SUPERDRAWTEXT",Text:a,YOffset:r,Direction:i,TextAlign:"center"};if(t.length<=0)return s;var o="number"==typeof e;for(var h in t)n[h]=null,!isNaN(t[h])&&t[h]&&(o?n[h]=e:this.IsNumber(e[h])&&(n[h]=e[h]));return s},this.STICKLINE=function(t,e,a,i,r){var n=[],s={DrawData:n,DrawType:"STICKLINE",Width:i,Type:r};s.Width<0&&(s.Width=3);var o="number"==typeof e,h="number"==typeof a;if(Array.isArray(t)){if(t.length<=0)return s;for(var l in t)if(n[l]=null,!isNaN(t[l])&&t[l])if(o&&h)n[l]={Value:e,Value2:a};else if(o&&!h){if(isNaN(a[l]))continue;n[l]={Value:e,Value2:a[l]}}else if(!o&&h){if(isNaN(e[l]))continue;n[l]={Value:e[l],Value2:a}}else{if(isNaN(e[l])||isNaN(a[l]))continue;n[l]={Value:e[l],Value2:a[l]}}}else{if(!t)return s;for(var l=0;l<this.SymbolData.Data.Data.length;++l)if(n[l]=null,o&&h)n[l]={Value:e,Value2:a};else if(o&&!h){if(!he.IsNumber(a[l]))continue;n[l]={Value:e,Value2:a[l]}}else if(!o&&h){if(!he.IsNumber(e[l]))continue;n[l]={Value:e[l],Value2:a}}else{if(!he.IsNumber(e[l])||!he.IsNumber(a[l]))continue;n[l]={Value:e[l],Value2:a[l]}}}return s},this.DRAWLINE=function(t,e,a,i,r){var n=[],s={DrawData:n,DrawType:"DRAWLINE",Expand:r};if(t.length<=0)return s;for(var o=Math.max(t.length,a.length),h=!1,l=!1,u={Start:{},End:{},List:new Array},c=0;c<o;++c){if(n[c]=null,c<t.length&&c<a.length)if(0==h&&0==l){if(null==t[c]||!t[c])continue;h=!0,u.Start={ID:c,Value:e[c]}}else if(1==h&&0==l){var d=null!=a[c]&&a[c];if(!d){t[c]&&(u.Start={ID:c,Value:e[c]});continue}d&&(l=!0,u.End={ID:c,Value:i[c]})}else if(1==h&&1==l){var d=null!=a[c]&&a[c];if(d)u.End={ID:c,Value:i[c]};else if(t[c]){var f=this.CalculateDrawLine(u);for(var m in f){var C=f[m];n[C.ID]=C.Value}1==r&&this.CalculateDrawDataExtendLine(n,u.Start.ID-2),h=l=!1,u={Start:{},End:{}},h=!0,l=!1,u.Start={ID:c,Value:e[c]}}}if(1==h&&1==l){var p=this.CalculateDrawLine(u);for(var D in p){var v=p[D];n[v.ID]=v.Value}}}return 1==r&&this.CalculateDrawDataExtendLine(n),s},this.DRAWBAND=function(t,e,a,i){var r=[],n={DrawData:r,DrawType:"DRAWBAND",Color:[e.toLowerCase(),i.toLowerCase()]},s=he.IsNumber(t),o=he.IsNumber(a);if(s||o){if(s&&!o)for(var h=a.length,l=0;l<h;++l){var u={Value:t,Value2:null};l<a.length&&(u.Value2=a[l]),r.push(u)}else if(!s&&o)for(var h=t.length,l=0;l<h;++l){var u={Value:null,Value2:a};l<t.length&&(u.Value=t[l]),r.push(u)}else if(s&&o)for(var h=this.SymbolData.Data.Data.length,l=0;l<h;++l){var u={Value:t,Value2:a};r.push(u)}}else for(var h=Math.max(t.length,a.length),l=0;l<h;++l){var u={Value:null,Value2:null};l<t.length&&(u.Value=t[l]),l<a.length&&(u.Value2=a[l]),r.push(u)}return n},this.GetDataByIndex=function(t,e){var a={Result:!1,Data:null};return this.IsNumber(t)?(a.Result=!0,a.Data=t):e<t.length?(a.Result=!0,a.Data=t[e]):a.Result=!1,a},this.FILLRGN=function(t,e,a){var i=[],r={DrawData:i,DrawType:"FILLRGN"};this.IsNumber(e),this.IsNumber(a);if(Array.isArray(t))for(var n in t){i[n]=null;var s=t[n];if(s){var o=this.GetDataByIndex(e,n);if(o.Result){var h=this.GetDataByIndex(a,n);if(h.Result){var l={Value:o.Data,Value2:h.Data};i[n]=l}}}}else if(t)for(var n=0;n<this.SymbolData.Data.Data.length;++n){i[n]=null;var o=this.GetDataByIndex(e,n);if(o.Result){var h=this.GetDataByIndex(a,n);if(h.Result){var l={Value:o.Data,Value2:h.Data};i[n]=l}}}return r},this.DRAWKLINE=function(t,e,a,i){for(var r=[],n={DrawData:r,DrawType:"DRAWKLINE"},s=Math.max(t.length,e.length,a.length,i.length),o=0;o<s;++o){var h={Open:null,High:null,Low:null,Close:null};o<t.length&&o<e.length&&o<a.length&&o<i.length&&(h.Open=e[o],h.High=t[o],h.Low=a[o],h.Close=i[o]),r[o]=h}return n},this.DRAWKLINE_IF=function(t,e,a,i,r){for(var n=[],s={DrawData:n,DrawType:"DRAWKLINE_IF"},o=Math.max(t.length,e.length,a.length,i.length,r.length),h=0;h<o;++h){var l={Open:null,High:null,Low:null,Close:null};h<e.length&&h<a.length&&h<i.length&&h<r.length&&h<t.length&&t[h]&&(l.Open=a[h],l.High=e[h],l.Low=i[h],l.Close=r[h]),n[h]=l}return s},this.DRAWCOLORKLINE=function(t,e,a){var i=[],r={DrawData:i,DrawType:"DRAWCOLORKLINE",IsEmptyBar:!(0==a),Color:e};if(Array.isArray(t))for(var n=0;n<t.length&&n<this.SymbolData.Data.Data.length;++n){i[n]=null;var s=t[n];if(s){var o=this.SymbolData.Data.Data[n];o&&(i[n]={Open:o.Open,High:o.High,Low:o.Low,Close:o.Close})}}else if(t)for(var n=0;n<this.SymbolData.Data.Data.length;++n){i[n]=null;var o=this.SymbolData.Data.Data[n];o&&(i[n]={Open:o.Open,High:o.High,Low:o.Low,Close:o.Close})}return r},this.POLYLINE=function(t,e){var a=[],i={DrawData:a,DrawType:"POLYLINE"},r="number"==typeof e,n=!1;if(r)if(this.IsNumber(t)){if(t)for(var s=this.SymbolData.Data.Data.length,o=0;o<s;++o)a[o]=e}else{var h=!1;for(var o in t)if(a[o]=null,h)a[o]=e;else{if(!t[o])continue;h=!0,a[o]=e}}else{var l={Start:{},End:{},List:new Array};for(var u in t)if(a[u]=null,0==n){if(null==t[u]||!t[u])continue;if(u>=e.length||!this.IsNumber(e[u]))continue;n=!0,l.Start={ID:parseInt(u),Value:e[u]}}else if(1==n){if(null==t[u]||!t[u])continue;if(u>=e.length||!this.IsNumber(e[u]))continue;l.End={ID:parseInt(u),Value:e[u]};var c=this.CalculateDrawLine(l);for(var d in c){var f=c[d];a[f.ID]=f.Value}var m={ID:l.End.ID,Value:l.End.Value};l={Start:m,End:{}}}this.CalculateDrawDataExtendLine(a)}return i},this.CalculateDrawDataExtendLine=function(t,e){if(!(e<0)){var a=null,i=t.length;this.IsNumber(e)&&e<i&&(i=e);for(var r=i-1;r>=0;--r)if(this.IsNumber(t[r])){a=r;break}if(null!=a&&a-1>=0)for(var n=a-1,r=a+1;r<i;++r){var s=t[n],o=t[a],h=(s-o)*(r-n)/(a-n);if(s-h<0)break;t[r]=s-h}}},this.DRAWNUMBER=function(t,e,a){var i={Value:new Array,Text:new Array},r={DrawData:i,DrawType:"DRAWNUMBER"},n="number"==typeof a,s=Array.isArray(e),o=void 0;n&&(o=he.IsInteger(a)?a.toString():a.toFixed(2));for(var h in t)if(i.Value[h]=null,t[h])if(s){if(h>=e.length||!this.IsNumber(e[h]))continue;if(n)i.Value[h]=e[h],i.Text[h]=o;else{if(h>=a.length||!a[h])continue;i.Value[h]=e[h],this.IsNumber(a[h])?he.IsInteger(a[h])?i.Text[h]=a[h].toString():i.Text[h]=a[h].toFixed(2):i.Text[h]=a[h].toString()}}else if(this.IsNumber(e))if(n)i.Value[h]=e,i.Text[h]=o;else{if(h>=a.length||!a[h])continue;i.Value[h]=e,this.IsNumber(a[h])?he.IsInteger(a[h])?i.Text[h]=a[h].toString():i.Text[h]=a[h].toFixed(2):i.Text[h]=a[h].toString()}return r},this.DRAWNUMBER_FIX=function(t,e,a,i,r){var n={Value:[],Text:[]},s={DrawData:n,DrawType:"DRAWNUMBER_FIX",Position:{X:e,Y:a,Type:i}},o=he.IsNumber(r);if(Array.isArray(t)){for(var h in t)if(n.Text[h]=null,n.Value[h]=null,t[h])if(o)n.Text[h]=this.RemoveZero(r.toFixed(2)),n.Value[h]=r;else{if(h>=r.length||!he.IsNumber(r[h]))continue;var l=r[h];n.Text[h]=this.RemoveZero(l.toFixed(2)),n.Value[h]=l}}else if(t)for(var h=0;h<this.SymbolData.Data.Data.length;++h)if(o)n.Text[h]=this.RemoveZero(r.toFixed(2)),n.Value[h]=r;else{if(h>=r.length||!he.IsNumber(r[h]))continue;var l=r[h];n.Text[h]=this.RemoveZero(l.toFixed(2)),n.Value[h]=l}else;return s},this.DRAWICON=function(t,e,a){if(he.IsString(a)){var i=a.replace("ICO","");a=parseInt(i)}var r=mn.GetDrawIcon(a);r||mn.GetDrawTextIcon(a),r||(r={Symbol:"🚩"});var n=[],s={DrawData:n,DrawType:"DRAWICON",Icon:r};if(t.length<=0)return s;var o="number"==typeof e;if("number"==typeof t){if(!t)return s;for(var h=0;h<this.SymbolData.Data.Data.length;++h)o?n[h]=e:h<e.length&&this.IsNumber(e[h])?n[h]=e[h]:n[h]=null;return s}for(var h in t)n[h]=null,t[h]&&(o?n[h]=e:this.IsNumber(e[h])&&(n[h]=e[h]));return s},this.ICON=function(t,e){if(he.IsString(e)){var a=e.replace("ICO","");e=parseInt(a)}var i=mn.GetDrawIcon(e);i||mn.GetDrawTextIcon(e),i||(i={Symbol:"🚩"});for(var r=[],n={DrawData:r,DrawType:"ICON",Icon:i},s=0;s<this.SymbolData.Data.Data.length;++s){var o=this.SymbolData.Data.Data[s];o&&(0==t?r[s]=o.Low:1==t&&(r[s]=o.High))}return n},this.DRAWCHANNEL=function(t,e,a,i,r,n,s){var o=[],h={DrawData:o,DrawType:"DRAWCHANNEL",Border:{}};if(t.length<=0)return h;if(i&&(h.Border.Color=i),s&&(h.AreaColor=s),r>0&&(h.Border.Width=r),n){var l=n.split(",");h.Border.Dotted=[];for(var u in l){if(l[u]){var c=parseInt(l[u]);c<=0||h.Border.Dotted.push(c)}}h.Border.Dotted.length<=0&&(h.Border.Dotted=null)}var d="number"==typeof e,f="number"==typeof a;if("number"==typeof t){if(!t)return h;for(var u=0;u<this.SymbolData.Data.Data.length;++u)if(o[u]=null,d&&f)o[u]={Value:e,Value2:a};else if(d&&!f){if(isNaN(a[u]))continue;o[u]={Value:e,Value2:a[u]}}else if(!d&&f){if(isNaN(e[u]))continue;o[u]={Value:e[u],Value2:a}}else{if(isNaN(e[u])||isNaN(a[u]))continue;o[u]={Value:e[u],Value2:a[u]}}}else for(var u=0;u<t.length;++u)if(o[u]=null,!isNaN(t[u])&&t[u])if(d&&f)o[u]={Value:e,Value2:a};else if(d&&!f){if(isNaN(a[u]))continue;o[u]={Value:e,Value2:a[u]}}else if(!d&&f){if(isNaN(e[u]))continue;o[u]={Value:e[u],Value2:a}}else{if(isNaN(e[u])||isNaN(a[u]))continue;o[u]={Value:e[u],Value2:a[u]}}return h},this.RGB=function(t,e,a){return"RGB("+t+","+e+","+a+")"},this.RGBA=function(t,e,a,i){return"RGB("+t+","+e+","+a+","+i+")"},this.SOUND=function(t){return{Name:"SOUND",Value:t}},this.PLAYSOUND=function(t,e){return null},this.PARTLINE=function(t){var e=[],a={DrawData:e,DrawType:"PARTLINE"};if(t.length<3)return a;for(var i=t[0],r=[],n=1;n<t.length&&n+1<t.length;n+=2)r.push({Cond:t[n],RGB:t[n+1]});for(var n in i){var s={Value:null,RGB:null};e[n]=s;var o=i[n];if(this.IsNumber(o)){var h=null;for(var l in r){var u=r[l];if(Array.isArray(u.Cond)){if(n<u.Cond.length&&u.Cond[n]){h=u.RGB;break}}else if(this.IsNumber(u.Cond)&&u.Cond){h=u.RGB;break}}h&&(s.Value=o,s.RGB=h)}}return a},this.FILLRGN2=function(t){var e=[],a={DrawData:e,DrawType:"FILLRGN2"};if(t.length<4)return a;for(var i=t[0],r=t[1],n=[],s=2;s<t.length&&s+1<t.length;s+=2)n.push({Cond:t[s],Color:t[s+1]});for(var s=0;s<this.SymbolData.Data.Data.length;++s){e[s]=null;var o={Value:null,Value2:null,Color:null};for(var h in n){var l=n[h];if(Array.isArray(l.Cond)){if(s<l.Cond.length&&l.Cond[s]){o.Color=l.Color;break}}else if(this.IsNumber(l.Cond)&&l.Cond){o.Color=l.Color;break}}if(o.Color){if(Array.isArray(i)){if(s>=i.length)continue;if(!this.IsNumber(i[s]))continue;o.Value=i[s]}else{if(!this.IsNumber(i))continue;o.Value=i}if(Array.isArray(r)){if(s>=r.length)continue;if(!this.IsNumber(r[s]))continue;o.Value2=r[s]}else{if(!this.IsNumber(r))continue;o.Value2=r}e[s]=o}}return a},this.FLOATRGN=function(t){var e=[],a={DrawData:e,DrawType:"FLOATRGN"};if(t.length<4)return a;for(var i=t[0],r=t[1],n=[],s=2;s<t.length&&s+1<t.length;s+=2)n.push({Cond:t[s],Color:t[s+1]});for(var s=0;s<this.SymbolData.Data.Data.length;++s){e[s]=null;var o={Value:null,Value2:null,Color:null};for(var h in n){var l=n[h];if(Array.isArray(l.Cond)){if(s<l.Cond.length&&l.Cond[s]){o.Color=l.Color;break}}else if(this.IsNumber(l.Cond)&&l.Cond){o.Color=l.Color;break}}if(o.Color){if(Array.isArray(i)){if(s>=i.length)continue;if(!this.IsNumber(i[s]))continue;o.Value=i[s]}else{if(!this.IsNumber(i))continue;o.Value=i}if(Array.isArray(r)){if(s>=r.length)continue;if(!this.IsNumber(r[s]))continue;o.Value2=r[s]}else{if(!this.IsNumber(r))continue;o.Value2=r}e[s]=o}}return a},this.FILLBGRGN=function(t,e){var a=[],i={DrawData:a,DrawType:1==t?"FILLTOPRGN":"FILLBOTTOMRGN"};if(e.length<3)return i;for(var r=e[0],n=[],s=1;s<e.length&&s+1<e.length;s+=2)n.push({Cond:e[s],Color:e[s+1]});for(var s=0;s<this.SymbolData.Data.Data.length;++s){a[s]=null;var o={Value:null,Color:null};for(var h in n){var l=n[h];if(Array.isArray(l.Cond)){if(s<l.Cond.length&&l.Cond[s]){o.Color=l.Color;break}}else if(this.IsNumber(l.Cond)&&l.Cond){o.Color=l.Color;break}}if(o.Color){if(Array.isArray(r)){if(s>=r.length)continue;if(!this.IsNumber(r[s]))continue;o.Value=r[s]}else{if(!this.IsNumber(r))continue;o.Value=r}a[s]=o}}return i},this.FILLVERTICALRGN=function(t){var e=[],a={DrawData:e,DrawType:"FILLVERTICALRGN"};if(t.length<2)return a;for(var i=[],r=0;r<t.length&&r+1<t.length;r+=2)i.push({Cond:t[r],Color:t[r+1]});for(var r=0;r<this.SymbolData.Data.Data.length;++r){e[r]=null;var n={Color:null};for(var s in i){var o=i[s];if(Array.isArray(o.Cond)){if(r<o.Cond.length&&o.Cond[r]){n.Color=o.Color;break}}else if(this.IsNumber(o.Cond)&&o.Cond){n.Color=o.Color;break}}n.Color&&(e[r]=n)}return a},this.DRAWGBK=function(t,e,a,i){var r={Color:[],Angle:i};e&&r.Color.push(e),a&&r.Color.push(a);var n={DrawData:null,DrawType:"DRAWGBK"};if(Array.isArray(t))for(var s in t){var o=t[s];if(o){n.DrawData=r;break}}else t&&(n.DrawData=r);return n},this.DRAWGBK2=function(t,e,a,i){var r={Color:[],Angle:i};e&&r.Color.push(e),a&&r.Color.push(a);var n={DrawData:null,DrawType:"DRAWGBK2"};if(Array.isArray(t)){r.Data=[];for(var s in t){var o=t[s];r.Data[s]=o?1:0}n.DrawData=r}else t&&(n.DrawData=r,n.DrawType="DRAWGBK");return n},this.DRAWTEXT_LINE=function(t,e,a,i,r,n,s){var o={Text:{Title:a,Color:i},Line:{Type:n,Color:s}};r<=0&&(r=12),o.Text.Font=r*c()+"px 微软雅黑";var h={DrawData:null,DrawType:"DRAWTEXT_LINE"};if(Array.isArray(t))for(var l in t){var u=t[l];if(u){Array.isArray(e)?o.Price=e[l]:o.Price=e,h.DrawData=o;break}}else t&&(Array.isArray(e)?o.Price=e[0]:o.Price=e,h.DrawData=o);return h},this.DRAWRECTREL=function(t,e,a,i,r){var n={Rect:{Left:Math.min(t,a),Top:Math.min(e,i),Right:Math.max(a,t),Bottom:Math.max(i,e)},Color:r};return 0==r&&(n.Color=null),{DrawData:n,DrawType:"DRAWRECTREL"}},this.DRAWTEXTREL=function(t,e,a){var i={Point:{X:t,Y:e}};return he.IsString(a)?i.Text=a:he.IsNonEmptyArray(a)&&(i.Text=a[0]),{DrawData:i,DrawType:"DRAWTEXTREL"}},this.DRAWTEXTABS=function(t,e,a){var i={Point:{X:t,Y:e}};return he.IsString(a)?i.Text=a:he.IsNonEmptyArray(a)&&(i.Text=a[0]),{DrawData:i,DrawType:"DRAWTEXTABS"}},this.DRAWOVERLAYLINE=function(t,e,a){var i={Data:t,MainData:e};return a&&"string"==typeof a&&(i.Title=a),{DrawData:i,DrawType:"DRAWOVERLAYLINE"}},this.DRAWSL=function(t,e,a,i,r){var n={Data:[],Option:[]},s={DrawData:n,DrawType:"DRAWSL"},o=this.IsNumber(e);if(Array.isArray(t))for(var h in t)n[h]=null,t[h]&&(o?(n.Data[h]=e,n.Option[h]={Slope:a,Length:i,Direct:r}):h<e.length&&this.IsNumber(e[h])&&(n.Data[h]=e[h],n.Option[h]={Slope:a,Length:i,Direct:r}));else if(t)for(var l=this.SymbolData.Data.Data.length,h=0;h<l;++h)n[h]=null,o?(n.Data[h]=e,n.Option[h]={Slope:a,Length:i,Direct:r}):h<e.length&&this.IsNumber(e[h])&&(n.Data[h]=e[h],n.Option[h]={Slope:a,Length:i,Direct:r});return s},this.VERTLINE=function(t,e){var a={Data:[],LineType:e},i={DrawData:a,DrawType:"VERTLINE"};if(Array.isArray(t))for(var r=0;r<t.length;++r){var n=t[r];a.Data[r]=n?1:0}return i},this.HORLINE=function(t,e,a,i){var r={Data:[],LineType:a,Extend:i},n={DrawData:r,DrawType:"HORLINE"};if(Array.isArray(t)&&Array.isArray(e))for(var s=0;s<t.length;++s){var o=t[s];if(r.Data[s]=null,o&&!(s>=e.length)){var h=e[s];he.IsNumber(h)&&(r.Data[s]=h)}}else if(Array.isArray(t)&&he.IsNumber(e))for(var s=0;s<t.length;++s){var o=t[s];r.Data[s]=null,o&&(r.Data[s]=e)}else if(he.IsNumber(t)&&t&&this.SymbolData&&this.SymbolData.Data&&this.SymbolData.Data.Data)if(Array.isArray(e)){for(var l=this.SymbolData.Data.Data.length,s=0;s<l;++s)if(r.Data[s]=null,!(s>=e.length)){var h=e[s];he.IsNumber(h)&&(r.Data[s]=h)}}else if(he.IsNumber(e))for(var l=this.SymbolData.Data.Data.length,s=0;s<l;++s)r.Data[s]=e;return n},this.BACKGROUND=function(t,e,a,i,r,n){var s={Margin:[0,1,1,1]};return t&&(s.Color=t),e&&(s.Border=e),he.IsNumber(a)&&(s.Margin[2]=a),he.IsNumber(i)&&(s.Margin[3]=i),he.IsNumber(r)&&(s.Margin[0]=r),he.IsNumber(n)&&(s.Margin[1]=n),s}}function Xi(t,e,a){this.AST=t,this.Execute=a,this.Symbol="600000.sh",this.Name,this.Data=null,this.PeriodData=new _r.default,this.IsApiPeriod=!1,this.SourceData=null,this.MarketValue=null,this.Period=0,this.Right=0,this.DataType=0,this.IsBeforeData=!1,this.DayCount,this.Arguments=[],this.KLineApiUrl=mn.Domain+"/API/KLine2",this.MinuteKLineApiUrl=mn.Domain+"/API/KLine3",this.RealtimeApiUrl=mn.Domain+"/API/stock",this.HistoryMinuteApiUrl=$r.Domain+"/API/StockMinuteData",this.StockHistoryDayApiUrl=mn.Domain+"/API/StockHistoryDay",this.StockHistoryDay3ApiUrl=mn.Domain+"/API/StockHistoryDay3",this.StockHistoryDay2ApiUrl=mn.Domain+"/API/StockHistoryDay2",this.StockNewsAnalysisApiUrl=mn.CacheDomain+"/cache/newsanalyze",this.HKToSHSZApiUrl=[mn.CacheDomain+"/cache/historyday/all/hk2shsz.json",mn.CacheDomain+"/cache/analyze/hk2shsz/hk2shsz.json",mn.Domain+"/API/HKToSHSZMinuteData",mn.CacheDomain+"/cache/analyze/hk2szshanalyze"],this.MaxRequestDataCount=1e3,this.MaxRequestMinuteDayCount=5,this.KLineDateTimeRange,this.LatestData=new _r.default,this.IndexData,this.LatestIndexData,this.MarginData=new _r.default,this.HKToSHSZData=new _r.default,this.NewsAnalysisData=new _r.default,this.ExtendData=new _r.default,this.UserData=new _r.default,this.CustomAPIData=new _r.default,this.ScriptIndexOutData=new _r.default,this.OtherSymbolData=new _r.default,this.StockData=new _r.default,this.SectionFinanceData=new _r.default,this.ThrowSFPeirod=new Ir.default,this.NetworkFilter,this.DrawInfo,e&&(e.HQDataType&&(this.DataType=e.HQDataType),e.Data&&(this.Data=e.Data,this.DataType!=In.MINUTE_ID&&this.DataType!=In.MULTIDAY_MINUTE_ID&&this.DataType!=In.HISTORY_MINUTE_ID&&(this.Period=e.Data.Period,this.Right=e.Data.Right)),e.SourceData&&(this.SourceData=e.SourceData),e.Symbol&&(this.Symbol=e.Symbol),e.Name&&(this.Name=e.Name),e.MaxRequestDataCount>0&&(this.MaxRequestDataCount=e.MaxRequestDataCount),e.MaxRequestMinuteDayCount>0&&(this.MaxRequestMinuteDayCount=e.MaxRequestMinuteDayCount),e.KLineApiUrl&&(this.KLineApiUrl=e.KLineApiUrl),e.Right&&(this.Right=e.Right),e.Period&&(this.Period=e.Period),!0===e.IsBeforeData&&(this.IsBeforeData=e.IsBeforeData),e.NetworkFilter&&(this.NetworkFilter=e.NetworkFilter),e.DayCount>0&&(this.DayCount=e.DayCount),e.Arguments&&(this.Arguments=e.Arguments),e.KLineRange&&(this.KLineDateTimeRange=e.KLineRange),e.IsApiPeriod&&(this.IsApiPeriod=e.IsApiPeriod),e.DrawInfo&&(this.DrawInfo=e.DrawInfo)),this.RecvError=function(t){throw Fr.Complier.Log("[JSSymbolData::RecvError] ajax error.",t.status),{FunctionName:"RecvError",Request:t}},this.GetLatestDataKey=function(t){var t="DYNAINFO-"+t;return t},this.GetLatestData=function(t){var e=this.JobArgumentsToArray(t,1),a=e[0],i=this.GetLatestDataKey(a);if(this.LatestData.has(i))return this.Execute.RunNextJob();var r=this;if(this.NetworkFilter){var s={Name:"JSSymbolData::GetLatestData",Explain:"DYNAINFO()",Args:e,Request:{Url:r.RealtimeApiUrl,Type:"POST",Data:{symbol:[this.Symbol],field:["name","symbol","yclose","open","price","high","low","vol","amount","date","time","increase","exchangerate","amplitude"]}},Self:this,PreventDefault:!1};if(this.NetworkFilter(s,function(t){r.RecvLatestData(t),r.Execute.RunNextJob()}),1==s.PreventDefault)return}n.HttpRequest({url:r.RealtimeApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol","amount","date","time","increase","exchangerate","amplitude"],symbol:[this.Symbol]},type:"post",dataType:"json",async:!0,success:function(t){r.RecvLatestData(t),r.Execute.RunNextJob()},error:function(t){r.RecvError(t)}})},this.RecvLatestData=function(t){if(2==t.ver)return void this.RecvLatestDataVer2(t);if(t.stock&&1==t.stock.length){var e=t.stock[0];e&&(he.IsNumber(e.yclose)&&this.LatestData.set(Sn.YCLOSE,e.yclose),he.IsNumber(e.open)&&this.LatestData.set(Sn.OPEN,e.open),he.IsNumber(e.high)&&this.LatestData.set(Sn.HIGH,e.high),he.IsNumber(e.low)&&this.LatestData.set(Sn.LOW,e.low),he.IsNumber(e.price)&&this.LatestData.set(Sn.CLOSE,e.price),he.IsNumber(e.vol)&&this.LatestData.set(Sn.VOL,e.vol),he.IsNumber(e.amount)&&this.LatestData.set(Sn.AMOUNT,e.amount),he.IsNumber(e.increase)&&this.LatestData.set(Sn.INCREASE,e.increase),he.IsNumber(e.exchangerate)&&this.LatestData.set(Sn.EXCHANGERATE,e.exchangerate),he.IsNumber(e.amplitude)&&this.LatestData.set(Sn.AMPLITUDE,e.amplitude),Fr.Complier.Log("[JSSymbolData::RecvLatestData] symbol, LatestData",e.symbol,this.LatestData))}},this.RecvLatestDataVer2=function(t){if(he.IsNonEmptyArray(t.data)){for(var e=t.symbol,a=0;a<t.data.length;++a){var i=t.data[a];i&&(he.IsNumber(i.id)&&(he.IsNumber(i.value)||he.IsString(i.value))&&(Fr.Complier.Log("[JSSymbolData::RecvLatestDataVer2] symbol="+e+" DYNAINFO("+i.id+")="+i.value+"."),this.LatestData.set(i.id,i.value)))}Fr.Complier.Log("[JSSymbolData::RecvLatestDataVer2]",this.LatestData)}},this.GetLatestCacheData=function(t){return this.LatestData.has(t)?this.LatestData.get(t):null},this.GetLatestIndexData=function(){if(this.LatestIndexData)return this.Execute.RunNextJob();var t=this;if(this.NetworkFilter){var e={Name:"JSSymbolData::GetLatestIndexData",Explain:"最新大盘数据",Request:{Url:t.RealtimeApiUrl,Type:"POST",Data:{symbol:["000001.sh"],field:["name","symbol","yclose","open","price","high","low","vol","amount","date","time","increase","amplitude"]}},Self:this,PreventDefault:!1};if(this.NetworkFilter(e,function(e){t.RecvLatestIndexData(e),t.Execute.RunNextJob()}),1==e.PreventDefault)return}n.HttpRequest({url:t.RealtimeApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol","amount","date","time","increase","amplitude"],symbol:["000001.sh"]},type:"post",dataType:"json",async:!0,success:function(e){t.RecvLatestIndexData(e),t.Execute.RunNextJob()},error:function(e){t.RecvError(e)}})},this.RecvLatestIndexData=function(t){if(t.stock&&1==t.stock.length){var e=t.stock[0];this.LatestIndexData={Symbol:e.symbol,Name:e.name,Date:e.date,Time:e.time,YClose:e.yclose,Price:e.price,Open:e.open,High:e.high,Low:e.low,Vol:e.vol,Amount:e.amount,Increase:e.increase,Amplitude:e.amplitude},Fr.Complier.Log("[JSSymbolData::RecvLatestIndexData]",this.LatestIndexData)}},this.GetLatestIndexCacheData=function(t){if(!this.LatestIndexData)return null;switch(t){case"FROMOPEN":var e=parseInt(this.LatestIndexData.Time/100),a=60*parseInt(e/100)+e%100;return a<=565?0:a<570?1:a<=690?a-570+1:a<780?121:a<=900?122+a-780:242;default:return null}},this.GetVolRateData=function(t,e){var a=t.ID.toString()+"-VolRate-"+this.Symbol;if(this.ExtendData.has(a))return this.Execute.RunNextJob();var i=this;n.HttpRequest({url:i.RealtimeApiUrl,data:{field:["name","symbol","avgvol5","date"],symbol:[this.Symbol]},type:"post",dataType:"json",async:!0,success:function(t){i.RecvVolRateData(t,a),i.Execute.RunNextJob()},error:function(t){i.RecvError(t)}})},this.RecvVolRateData=function(t,e){if(t.stock&&1==t.stock.length){var a=t.stock[0].avgvol5,i=t.stock[0].date,r={AvgVol5:a,Date:i};this.ExtendData.set(e,r),Fr.Complier.Log("[JSSymbolData::RecvVolRateData]",r)}},this.GetVolRateCacheData=function(t){var e=yn.JOB_DOWNLOAD_VOLR_DATA.toString()+"-VolRate-"+this.Symbol;e&&this.ExtendData.has(e)||this.Execute.ThrowUnexpectedNode(t,"不支持VOLR");for(var a=[],i=this.ExtendData.get(e),r=i.AvgVol5/241,n=0,s=0,o=0;s<this.Data.Data.length;++s){a[s]=null;var h=this.Data.Data[s],l=h.DateTime;if(l){var u=l.split(" ");if(2==u.length){parseInt(u[0])==i.Date&&(n+=h.Vol,r>0&&(a[s]=n/(o+1)/r*100),++o)}}}return a},this.GetIndexData=function(){if(this.IndexData)return this.Execute.RunNextJob();var t=this;if(Z.IsDayPeriod(this.Period,!0)){if(this.NetworkFilter){var e=this.Data.GetDateRange(),a={Name:"JSSymbolData::GetIndexData",Explain:"大盘数据",Period:t.Period,Request:{Url:t.KLineApiUrl,Type:"POST",Data:{field:["name","symbol","yclose","open","price","high","low","vol","up","down","stop","unchanged"],indexSymbol:"000001.sh",symbol:this.Symbol,period:this.Period,dateRange:e}},Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(e){t.RecvIndexHistroyData(e),t.Execute.RunNextJob()}),1==a.PreventDefault)return}n.HttpRequest({url:t.KLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol","up","down","stop","unchanged"],symbol:"000001.sh",start:-1,count:t.MaxRequestDataCount+500},type:"post",dataType:"json",async:!0,success:function(e){t.RecvIndexHistroyData(e),t.Execute.RunNextJob()},error:function(e){t.RecvError(e)}})}else if(Z.IsMinutePeriod(this.Period,!0)){if(this.NetworkFilter){var e=this.Data.GetDateRange(),a={Name:"JSSymbolData::GetIndexData",Explain:"大盘数据",Period:t.Period,Request:{Url:t.MinuteKLineApiUrl,Type:"POST",Data:{field:["name","symbol","yclose","open","price","high","low","vol"],indexSymbol:"000001.sh",symbol:this.Symbol,period:this.Period,dateRange:e}},Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(e){t.RecvIndexMinuteHistroyData(e),t.Execute.RunNextJob()}),1==a.PreventDefault)return}n.HttpRequest({url:t.MinuteKLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:"000001.sh",start:-1,count:t.MaxRequestMinuteDayCount+5},type:"post",dataType:"json",async:!0,success:function(e){t.RecvIndexMinuteHistroyData(e),t.Execute.RunNextJob()},error:function(e){t.RecvError(e)}})}},this.RecvIndexHistroyData=function(t){Fr.Complier.Log("[JSSymbolData::RecvIndexHistroyData] recv data",t);var e=this.JsonDataToHistoryData(t);if(this.IndexData=new Z,this.IndexData.DataType=0,this.IndexData.Data=e,1==this.IsApiPeriod)this.IndexData.Period=this.Period,this.IndexData.Data=this.Data.FixKData(e,this.Period);else{var a=this.SourceData.GetOverlayData(this.IndexData.Data);if(this.IndexData.Data=a,Z.IsDayPeriod(this.Period,!1)){var i=this.IndexData.GetPeriodData(this.Period);this.IndexData.Data=i}}},this.RecvIndexMinuteHistroyData=function(t){Fr.Complier.Log("[JSSymbolData::RecvIndexMinuteHistroyData] recv data",t);var e=this.JsonDataToMinuteHistoryData(t);if(this.IndexData=new Z,this.IndexData.DataType=1,this.IndexData.Data=e,1==this.IsApiPeriod)this.IndexData.Period=this.Period,this.IndexData.Data=this.Data.FixKData(e,this.Period);else if(Z.IsMinutePeriod(this.Period,!1)){var a=this.IndexData.GetPeriodData(this.Period);this.IndexData.Data=a}},this.GetOtherSymbolParam=function(t){var e=t.split("$");if(!new Ir.default(["CLOSE","C","VOL","V","OPEN","O","HIGH","H","LOW","L","AMOUNT","AMO","VOLINSTK"]).has(e[1]))return null;var a=e[0];if(6==a.length)"6"==a[0]||"5"==a[0]||"8"==a[0]||"9"==a[0]?a+=".SH":"0"!=a[0]&&"1"!=a[0]&&"2"!=a[0]&&"3"!=a[0]||(a+=".SZ");else if(0==a.indexOf("SZ"))a=a.substr(2)+".SZ";else if(0==a.indexOf("SH"))a=a.substr(2)+".SH";else{if(!(a.indexOf("_")>0))return null;var i=a.split("_");a=i[1]+"."+i[0]}return{Symbol:a.toLowerCase(),DataName:e[1]}},this.GetOtherSymbolData=function(t){var e=this.Symbol;if(t.Literal){var a=this.GetOtherSymbolParam(t.Literal.toUpperCase());if(!a){var i=t.Token;this.Execute.ErrorHandler.ThrowError(i.Index,i.Line,0,t.Literal+" Error.")}e=a.Symbol}else{var a=t.Args;if(a.length>0){var r=a[0];if(r.Type==gn.Literal)e=r.Value;else if(r.Type==gn.Identifier){var s=!1;for(var o in this.Arguments){var h=this.Arguments[o];if(h.Name==r.Name){e=h.Value,s=!0;break}}if(!s){var i=t.Token;this.Execute.ErrorHandler.ThrowError(i.Index,i.Line,0,t.FunctionName+"() Error: can't read "+r.Name)}}}}if(t.Symbol=e.toLowerCase(),t.Symbol==this.Symbol)return this.Execute.RunNextJob();if(this.OtherSymbolData.has(t.Symbol))return this.Execute.RunNextJob();var l=this;if(this.DataType==In.KLINE_ID&&Z.IsDayPeriod(this.Period,!0)){if(this.NetworkFilter){var u=this.Data.GetDateRange(),c={Name:"JSSymbolData::GetOtherSymbolData",Explain:"指定个股数据",Request:{Data:{symbol:t.Symbol,right:l.Right,period:l.Period,dateRange:u}},Self:this,PreventDefault:!1};if(this.NetworkFilter(c,function(e){l.RecvOtherSymbolKData(e,t),l.Execute.RunNextJob()}),1==c.PreventDefault)return}n.HttpRequest({url:l.KLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:l.MaxRequestDataCount+500},type:"post",dataType:"json",async:!0,success:function(e){l.RecvOtherSymbolKDayData(e,t),l.Execute.RunNextJob()},error:function(t){l.RecvError(t)}})}else if(Z.IsMinutePeriod(this.Period,!0)||this.DataType==In.MINUTE_ID||this.DataType==In.MULTIDAY_MINUTE_ID){if(this.NetworkFilter){var u=this.Data.GetDateRange(),c={Name:"JSSymbolData::GetOtherSymbolData",Explain:"指定个股数据",Request:{Data:{symbol:t.Symbol,right:l.Right,period:l.Period,dateRange:u}},Self:this,PreventDefault:!1};if(this.NetworkFilter(c,function(e){l.RecvOtherSymbolKData(e,t),l.Execute.RunNextJob()}),1==c.PreventDefault)return}n.HttpRequest({url:l.MinuteKLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:l.MaxRequestMinuteDayCount+5},type:"post",dataType:"json",async:!0,success:function(e){l.RecvOtherSymbolKMinuteData(e,t),l.Execute.RunNextJob()},error:function(t){l.RecvError(t)}})}},this.RecvOtherSymbolKData=function(t,e){Fr.Complier.Log("[JSSymbolData::RecvOtherSymbolKData] recv data",t);var a=new Z,i=null,r=this.Period;this.DataType==In.KLINE_ID&&Z.IsDayPeriod(this.Period,!0)?(i=this.JsonDataToHistoryData(t),a.DataType=0):(i=this.JsonDataToMinuteHistoryData(t),a.DataType=1,this.DataType!=In.MINUTE_ID&&this.DataType!=In.MULTIDAY_MINUTE_ID||(r=4)),a.Period=this.Period,a.Right=this.Right,a.Data=this.Data.FixKData(i,r),this.OtherSymbolData.set(e.Symbol,a)},this.RecvOtherSymbolKDayData=function(t,e){Fr.Complier.Log("[JSSymbolData::RecvOtherSymbolKDayData] recv data",t);var a=this.JsonDataToHistoryData(t),i=new Z;i.DataType=0,i.Data=a;var r=this.SourceData.GetOverlayData(i.Data);if(i.Data=r,Z.IsDayPeriod(this.Period,!1)){var n=i.GetPeriodData(this.Period);i.Data=n}this.OtherSymbolData.set(e.Symbol,i)},this.RecvOtherSymbolKMinuteData=function(t,e){Fr.Complier.Log("[JSSymbolData::RecvOtherSymbolKMinuteData] recv data",t);var a=this.JsonDataToMinuteHistoryData(t),i=new Z;if(i.DataType=1,i.Data=a,Z.IsMinutePeriod(this.Period,!1)){var r=i.GetPeriodData(this.Period);i.Data=r}this.OtherSymbolData.set(e.Symbol,i)},this.GetOtherSymolCacheData=function(t){var e,a;if(t.FunctionName){a=t.FunctionName;var i=t.Args;if(i.length<=0)return this.GetSymbolCacheData(a);e=i[0].toString().toLowerCase()}else if(t.Literal){var i=this.GetOtherSymbolParam(t.Literal.toUpperCase());if(!i)return[];e=i.Symbol,a=i.DataName}if(e==this.Symbol)return this.GetSymbolCacheData(a);if(!this.OtherSymbolData.has(e))return[];var r=this.OtherSymbolData.get(e),n=e.toUpperCase();switch(a){case"CLOSE":case"C":return r.GetClose();case"VOL":case"V":return an.IsSHSZ(n)?r.GetVol(100):r.GetVol();case"OPEN":case"O":return r.GetOpen();case"HIGH":case"H":return r.GetHigh();case"LOW":case"L":return r.GetLow();case"AMOUNT":case"AMO":return r.GetAmount();case"VOLINSTK":return r.GetPosition()}},this.GetIndexCacheData=function(t){if(!this.IndexData)return new Array;switch(t){case"INDEXA":return this.IndexData.GetAmount();case"INDEXC":return this.IndexData.GetClose();case"INDEXH":return this.IndexData.GetHigh();case"INDEXL":return this.IndexData.GetLow();case"INDEXO":return this.IndexData.GetOpen();case"INDEXV":return this.IndexData.GetVol();case"INDEXADV":return this.IndexData.GetUp();case"INDEXDEC":return this.IndexData.GetDown()}},this.GetBlockSymbol=function(t){var e=new _r.default([["沪深A股","CNA.ci"],["创业板","GEM.ci"],["沪市A股","SHA.ci"],["中小板","SME.ci"],["深市A股","SZA.ci"]]);if(e.has(t))return e.get(t);if(!t)return null;var a=null,i=t.toUpperCase();if(i.indexOf(".SH")>0||i.indexOf(".SZ")>0){if(!new Ir.default(["000001.SH","000003.SH","000016.SH","000300.SH","000905.SH","399001.SZ"," 399005.SZ","399006.SZ"]).has(i))return null;a=t.replace(".SH",".sh"),a=t.replace(".SZ",".sz")}else t.indexOf(".CI")>0&&(a=t.replace(".CI",".ci"));return a},this.GetIndexIncreaseData=function(t){var e=null;if(t.IsSelfSymbol)e=this.Symbol;else{if(!t.Args||t.Args.length<=0){var a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,t.FunctionName+" Error: 参数不能为空")}e=t.Args[0].Value}var i=this.GetBlockSymbol(e);if(!i){var a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,t.FunctionName+" Error: can't support "+e)}var r=t.ID.toString()+"-UpCount-"+i,s=t.ID.toString()+"-DownCount-"+i;if(this.ExtendData.has(r)&&this.ExtendData.has(s))return this.Execute.RunNextJob();var o=this;if(this.NetworkFilter){var h={Type:this.DataType};this.DataType===In.KLINE_ID&&(h.Period=this.Period);var l=this.Data.GetDateRange(),u={Name:"JSSymbolData::GetIndexIncreaseData",Explain:"涨停家数统计",DateRange:l,DataType:h,Request:{Url:"www.121287.com",Type:"POST",Data:{symbol:this.Symbol,blocksymbol:i,field:["up","down"]}},Self:this,PreventDefault:!1};if(this.NetworkFilter(u,function(t){this.DataType===In.KLINE_ID?this.RecvHistoryIncreaseDataV2(t,{UpKey:r,DownKey:s}):this.RecvMinuteIncreaseDataV2(t,{UpKey:r,DownKey:s}),o.Execute.RunNextJob()}),1==u.PreventDefault)return}if(this.DataType===In.MINUTE_ID||this.DataType===In.MULTIDAY_MINUTE_ID){var c=mn.CacheDomain+"/cache/analyze/increaseanalyze/"+i+".json";Fr.Complier.Log("[JSSymbolData::GetIndexIncreaseData] minute Get url=",c),n.HttpRequest({url:c,type:"get",dataType:"json",async:!0,success:function(t){o.RecvMinuteIncreaseData(t,{UpKey:r,DownKey:s}),o.Execute.RunNextJob()},error:function(t){o.RecvError(t)}})}else this.DataType===In.KLINE_ID&&Z.IsDayPeriod(this.Period,!0)?(Fr.Complier.Log("[JSSymbolData::GetIndexIncreaseData] K day Get url=",o.KLineApiUrl),n.HttpRequest({url:o.KLineApiUrl,data:{symbol:i,start:-1,count:o.MaxRequestDataCount,field:["up","down"]},type:"post",dataType:"json",async:!0,success:function(t){o.RecvHistoryIncreaseData(t,{UpKey:r,DownKey:s}),o.Execute.RunNextJob()},error:function(t){o.RecvError(t)}})):this.Execute.RunNextJob()},this.RecvHistoryIncreaseDataV2=function(t,e){Fr.Complier.Log("[JSSymbolData::RecvHistoryIncreaseData] recv data, key",t,e);var a=[],i=[];for(var r in t.data){var n=t.data[r],s=new z,o=new z,h=n[0],l=null;s.Date=h,o.Date=h,Z.IsMinutePeriod(this.Period,!0)&&he.IsNumber(n[1])&&(l=n[1],s.Time=l,o.Time=l),s.Value=n[2],a[r]=s,o.Value=n[3],i[r]=o}var u=this.Data.GetFittingData2(a,0),c=this.Data.GetFittingData2(i,0);this.ExtendData.set(e.UpKey,u),this.ExtendData.set(e.DownKey,c)},this.RecvHistoryIncreaseData=function(t,e){Fr.Complier.Log("[JSSymbolData::RecvHistoryIncreaseData] recv data",t);var a=[],i=[];for(var r in t.data){var n=t.data[r],s=new z,o=new z;s.Date=n[0],s.Value=n[8],a[r]=s,o.Date=n[0],o.Value=n[9],i[r]=o}var h,l;h=this.SourceData?this.SourceData.GetFittingData(a):this.Data.GetFittingData(aryData),l=this.SourceData?this.SourceData.GetFittingData(i):this.Data.GetFittingData(aryData),this.ExtendData.set(e.UpKey,h),this.ExtendData.set(e.DownKey,l)},this.RecvMinuteIncreaseDataV2=function(t,e){Fr.Complier.Log("[JSSymbolData::RecvMinuteIncreaseDataV2] recv data, key",t,e)},this.RecvMinuteIncreaseData=function(t,e){if(Fr.Complier.Log("[JSSymbolData::RecvMinuteIncreaseData] recv data",t),t.minute){var a=t.minute;if(a.time&&a.up&&a.down){var i=[],r=[];if(this.IsBeforeData)for(var n=0,s=0;n<this.Data.Data.length;++n){i[n]=null,r[n]=null;var o=this.Data.Data[n];if(!o.Before){var h=o.DateTime;if(h){var l=h.split(" ");if(2==l.length){var u=parseInt(l[0]);u==t.date&&(i[n]=a.up[s],r[n]=a.down[s],++s)}}}}else for(var n=0,s=0;n<this.Data.Data.length;++n){i[n]=null,r[n]=null;var o=this.Data.Data[n],h=o.DateTime;if(h){var l=h.split(" ");if(2==l.length){var u=parseInt(l[0]);u==t.date&&(i[n]=a.up[s],r[n]=a.down[s],++s)}}}this.ExtendData.set(e.UpKey,i),this.ExtendData.set(e.DownKey,r)}}},this.GetIndexIncreaseCacheData=function(t,e,a){var i=this.GetBlockSymbol(e);i||this.Execute.ThrowUnexpectedNode(a,"不支持函数"+t+"("+e+")");var r;if("UPCOUNT"==t||"ADVANCE"==t?r=yn.JOB_DOWNLOAD_INDEX_INCREASE_DATA.toString()+"-UpCount-"+i:"DOWNCOUNT"!=t&&"DECLINE"!=t||(r=yn.JOB_DOWNLOAD_INDEX_INCREASE_DATA.toString()+"-DownCount-"+i),r&&this.ExtendData.has(r)||this.Execute.ThrowUnexpectedNode(a,"不支持函数"+t+"("+e+")"),this.DataType===In.MINUTE_ID||this.DataType===In.MULTIDAY_MINUTE_ID)return this.ExtendData.get(r);if(this.DataType===In.KLINE_ID&&Z.IsDayPeriod(this.Period,!0)){var n=this.ExtendData.get(r),s=new Z;if(s.Data=n,s.Period=this.Period,s.Period>0){var o=s.GetPeriodSingleData(s.Period);s.Data=o}return s.GetValue()}return null},this.GetSymbolData=function(){if(this.Data)return this.Execute.RunNextJob();var t=this;if(this.DataType===In.MINUTE_ID)return void n.HttpRequest({url:t.RealtimeApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol","amount","date","minute","time","minutecount"],symbol:[t.Symbol],start:-1},type:"post",dataType:"json",async:!0,success:function(e){t.RecvMinuteData(e),t.Execute.RunNextJob()}});if(this.DataType===In.MULTIDAY_MINUTE_ID)return void n.HttpRequest({url:t.HistoryMinuteApiUrl,data:{symbol:t.Symbol,daycount:t.DayCount},type:"post",dataType:"json",async:!0,success:function(e){t.RecvMultiDayMinuteData(e),t.Execute.RunNextJob()}});if(Z.IsDayPeriod(this.Period,!0)){if(this.NetworkFilter){var e={Name:"JSSymbolData::GetSymbolData",Explain:"日线数据",Request:{Url:t.RealtimeApiUrl,Type:"POST",Data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:t.MaxRequestDataCount}},Self:this,PreventDefault:!1};if(this.KLineDateTimeRange&&(e.Request.KLineDataTimeRange={Start:{Date:this.KLineDateTimeRange.Start.Date},End:{Date:this.KLineDateTimeRange.End.Date}},this.IsNumber(this.KLineDateTimeRange.Start.Time)&&(e.Request.KLineDataTimeRange.Start.Time=this.KLineDateTimeRange.Start.Time),this.IsNumber(this.KLineDateTimeRange.End.Time)&&(e.Request.KLineDataTimeRange.End.Time=this.KLineDateTimeRange.End.Time)),this.NetworkFilter(e,function(e){t.RecvHistroyData(e),t.Execute.RunNextJob()}),1==e.PreventDefault)return}n.HttpRequest({url:t.KLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:t.MaxRequestDataCount},type:"post",dataType:"json",async:!0,success:function(e){t.RecvHistroyData(e),t.Execute.RunNextJob()},error:function(e){t.RecvError(e)}})}else if(Z.IsMinutePeriod(this.Period,!0)){if(this.NetworkFilter){var e={Name:"JSSymbolData::GetSymbolData",Explain:"分钟K线数据",Request:{Url:t.MinuteKLineApiUrl,Type:"POST",Data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:t.MaxRequestMinuteDayCount}},Self:this,PreventDefault:!1};if(this.KLineDateTimeRange&&(e.Request.KLineDataTimeRange={Start:{Date:this.KLineDateTimeRange.Start.Date},End:{Date:this.KLineDateTimeRange.End.Date}},this.IsNumber(this.KLineDateTimeRange.Start.Time)&&(e.Request.KLineDataTimeRange.Start.Time=this.KLineDateTimeRange.Start.Time),this.IsNumber(this.KLineDateTimeRange.End.Time)&&(e.Request.KLineDataTimeRange.End.Time=this.KLineDateTimeRange.End.Time)),this.NetworkFilter(e,function(e){t.RecvMinuteHistroyData(e),t.Execute.RunNextJob()}),1==e.PreventDefault)return}n.HttpRequest({url:this.MinuteKLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:t.MaxRequestMinuteDayCount},type:"post",dataType:"json",async:!0,success:function(e){t.RecvMinuteHistroyData(e),t.Execute.RunNextJob()},error:function(e){t.RecvError(e)}})}},this.RecvHistroyData=function(t){Fr.Complier.Log("[JSSymbolData::RecvHistroyData] recv data",t);var e=this.JsonDataToHistoryData(t);if(this.Data=new Z,this.Data.DataType=0,this.Data.Data=e,this.SourceData=new Z,this.SourceData.Data=e,this.IsApiPeriod);else{if(this.Right>0){var a=this.Data.GetRightData(this.Right);this.Data.Data=a}if(Z.IsDayPeriod(this.Period,!1)){var i=this.Data.GetPeriodData(this.Period);this.Data.Data=i}}this.Data.Right=this.Right,this.Data.Period=this.Period,this.Name=t.name},this.RecvMinuteHistroyData=function(t){Fr.Complier.Log("[JSSymbolData::RecvMinuteHistroyData] recv data",t);var e=this.JsonDataToMinuteHistoryData(t);if(this.Data=new Z,this.Data.DataType=1,this.Data.Data=e,this.SourceData=new Z,this.SourceData.Data=e,this.IsApiPeriod);else if(Z.IsMinutePeriod(this.Period,!1)){var a=this.Data.GetPeriodData(this.Period);this.Data.Data=a}this.Data.Period=this.Period,this.Name=t.name},this.RecvMinuteData=function(t){Fr.Complier.Log("[JSSymbolData::RecvMinuteData] recv data",t);var e=this.JsonDataToMinuteData(t);this.Data=new Z,this.Data.DataType=2,this.Data.Data=e,this.Name=t.stock[0].name},this.RecvMultiDayMinuteData=function(t){var e=this.JsonDataToMultiDayMinuteData(t);this.Data=new Z,this.Data.DataType=2,this.Data.Data=e,this.Name=t.name},this.GetSymbolCacheData=function(t){if(!this.Data)return new Array;var e=this.Symbol.toUpperCase();switch(t){case"CLOSE":case"C":return this.Data.GetClose();case"VOL":case"V":return an.IsSHSZ(e)?this.Data.GetVol(100):this.Data.GetVol();case"OPEN":case"O":return this.Data.GetOpen();case"HIGH":case"H":return this.Data.GetHigh();case"LOW":case"L":return this.Data.GetLow();case"AMOUNT":case"AMO":return this.Data.GetAmount();case"OPI":case"VOLINSTK":return this.Data.GetPosition();case"ZSTJJ":return this.Data.GetAvPrice();case"SETTLE":case"QHJSJ":return this.Data.GetSettlementPrice();case"ISEQUAL":return this.Data.GetIsEqual();case"ISUP":return this.Data.GetIsUp();case"ISDOWN":return this.Data.GetIsDown()}},this.GetSymbolPeriodData=function(t){var e=Ri.GetPeriodInfo({Name:t.PeriodName}).Period,a={PeriodID:e,PeriodName:t.PeriodName};if(e==this.Period&&this.Execute.RunNextJob(),this.IsApiPeriod){if(this.PeriodData.has(t.PeriodName))return this.Execute.RunNextJob()}else if(Z.IsDayPeriod(e,!0)){if(Z.IsDayPeriod(this.Period,!0))return this.Execute.RunNextJob();a={PeriodID:0,PeriodName:"DAY"}}else{if(!Z.IsMinutePeriod(e,!0))return this.Execute.RunNextJob();if(Z.IsMinutePeriod(this.Period,!0))return this.Execute.RunNextJob();a={PeriodID:4,PeriodName:"MIN1"}}var i=this;if(this.NetworkFilter){var r={Name:"JSSymbolData::GetSymbolPeriodData",Explain:"跨周期数据",Request:{Data:{field:["symbol","name",t.ValueName],period:t.PeriodName,symbol:i.Symbol}},Self:this,PreventDefault:!1};if(this.NetworkFilter(r,function(t){i.RecvSymbolPeriodData(t,a),i.Execute.RunNextJob()}),1==r.PreventDefault)return}if(Z.IsMinutePeriod(e,!0))n.HttpRequest({url:this.MinuteKLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:i.Symbol,start:-1,count:i.MaxRequestMinuteDayCount},type:"post",dataType:"json",async:!0,success:function(t){i.RecvSymbolPeriodData(t,a),i.Execute.RunNextJob()},error:function(t){i.RecvError(t)}});else{if(!Z.IsDayPeriod(e,!0))return this.Execute.RunNextJob();n.HttpRequest({url:i.KLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:i.Symbol,start:-1,count:i.MaxRequestDataCount},type:"post",dataType:"json",async:!0,success:function(t){i.RecvSymbolPeriodData(t,a),i.Execute.RunNextJob()},error:function(t){i.RecvError(t)}})}},this.RecvSymbolPeriodData=function(t,e){if(Fr.Complier.Log("[JSSymbolData::RecvSymbolPeriodData] data, periodInfo ",t,e),Z.IsDayPeriod(e.PeriodID,!0)){var a=this.JsonDataToHistoryData(t),i=new Z;i.DataType=0,i.Data=a,i.Right=0,i.Period=e.PeriodID,this.PeriodData.set(e.PeriodName,i)}else if(Z.IsMinutePeriod(e.PeriodID,!0)){var a=this.JsonDataToMinuteHistoryData(t),r=new Z;r.DataType=1,r.Data=a,r.Right=0,r.Period=e.PeriodID,this.PeriodData.set(e.PeriodName,r)}},this.GetSymbolPeriodCacheData=function(t,e){var a=Ri.GetPeriodInfo({Name:e});if(this.Period==a.Period)return this.GetSymbolCacheData(t);var i=null;if(this.IsApiPeriod){var r=Ri.GetPeriodInfo({PeriodID:this.Period});if(!r)return null;if(r.Order>a.Order)return null;if(!this.PeriodData.has(e))return null;i=this.PeriodData.get(e),i=i.Data}else{var r=Ri.GetPeriodInfo({PeriodID:this.Period});if(!r)return null;if(r.Order>a.Order)return null;if(Z.IsDayPeriod(a.Period,!0)&&Z.IsMinutePeriod(this.Period,!0)){var n=this.PeriodData.get("DAY");i=0==a.Period?n.Data:n.GetPeriodData(a.Period)}else{var s=new Z;if(s.Data=this.SourceData.Data,s.Period=this.Period,s.Right=this.Right,Z.IsDayPeriod(a.Period,!0)&&s.Right>0){var o=s.GetRightData(s.Right);s.Data=o}i=s.GetPeriodData(a.Period)}}var h=this.Data.ConverPeriod(i,this.Period,a.Period),l=new Z;l.Data=h;var u=this.Symbol.toUpperCase();switch(t){case"C":case"CLOSE":return l.GetClose();case"O":case"OPEN":return l.GetOpen();case"H":case"HIGH":return l.GetHigh();case"L":case"LOW":return l.GetLow();case"AMO":case"AMOUNT":return l.GetAmount();case"V":case"VOL":return an.IsSHSZ(u)?l.GetVol(100):l.GetVol();case"VOLINSTK":return l.GetPosition();default:return null}},this.GetSymbolPeriodCacheData2=function(t,e,a){var i=Ri.GetPeriodInfo({Name:e});if(!i)return null;var r=Ri.GetPeriodInfo({PeriodID:this.Period});if(!r)return null;if(r.Order>i.Order)return null;var n;if(r.Period==i.Period)n=this.Data;else{var s;if(this.IsApiPeriod){if(!this.PeriodData.has(e))return null;s=this.PeriodData.get(e)}else if(Z.IsMinutePeriod(r.Period,!0)&&Z.IsDayPeriod(i.Period,!0)){var o=this.PeriodData.get("DAY");s=0==i.Period?o:o.GetPeriodData(i.Period)}else{var h=new Z;if(h.Data=this.SourceData.Data,h.Period=this.Period,h.Right=this.Right,Z.IsDayPeriod(i.Period,!0)&&h.Right>0){var l=h.GetRightData(h.Right);h.Data=l}s=h.GetPeriodData(i.Period)}var u=this.Data.ConverPeriod(s,this.Period,i.Period),n=new Z;n.Data=u}if(he.IsPlusNumber(a)){var c=new Z,u=n.GetRef(a);c.Data=u,n=c}var d=this.Symbol.toUpperCase();switch(t){case"C":case"CLOSE":return n.GetClose();case"O":case"OPEN":return n.GetOpen();case"H":case"HIGH":return n.GetHigh();case"L":case"LOW":return n.GetLow();case"AMO":case"AMOUNT":return n.GetAmount();case"V":case"VOL":return an.IsSHSZ(d)?n.GetVol(100):n.GetVol();case"VOLINSTK":return n.GetPosition();default:return null}},this.GetCurrBarsCount=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e=this.Data.Data.length,a=e-1;a>=0;--a)t.push(a+1);return t},this.GetBarPos=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e=this.Data.Data.length,a=0;a<e;++a)t.push(a+1);return t},this.GetTotalTradeMinuteCount=function(){var t=nn.GetCoordinateData(this.Symbol);return t&&t.Count>0?t.Count-1:242},this.GetTotalBarsCount=function(){return this.Data.Data.length},this.GetIsLastBar=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e=this.Data.Data.length,a=0;a<e;++a)a==e-1?t.push(1):t.push(0);return t},this.GetBarStatus=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e=this.Data.Data.length,a=0;a<e;++a)t[a]=0==a?1:a==e-1?2:0;return t},this.GetMarginCacheData=function(t,e){var a=yn.GetMarginJobID(t);return a||this.Execute.ThrowUnexpectedNode(e,"不支持MARGIN("+t+")"),this.MarginData.has(a)?this.MarginData.get(a):[]},this.GetMarginData=function(t){if(this.MarginData.has(t))return this.Execute.RunNextJob();Fr.Complier.Log("[JSSymbolData::GetMarginData] jobID=",t);var e=this,a=["name","date","symbol"];switch(t){case yn.JOB_DOWNLOAD_MARGIN_BALANCE:a.push("margin.balance");break;case yn.JOB_DOWNLOAD_MARGIN_RATE:a.push("margin.rate");break;case yn.JOB_DOWNLOAD_MARGIN_BUY_BALANCE:case yn.JOB_DOWNLOAD_MARGIN_BUY_AMOUNT:case yn.JOB_DOWNLOAD_MARGIN_BUY_REPAY:case yn.JOB_DOWNLOAD_MARGIN_BUY_NET:a.push("margin.buy");break;case yn.JOB_DOWNLOAD_MARGIN_SELL_BALANCE:case yn.JOB_DOWNLOAD_MARGIN_SELL_VOLUME:case yn.JOB_DOWNLOAD_MARGIN_SELL_REPAY:case yn.JOB_DOWNLOAD_MARGIN_SELL_NET:a.push("margin.sell")}n.HttpRequest({url:this.StockHistoryDayApiUrl,data:{field:a,symbol:[this.Symbol],orderfield:"date"},type:"post",dataType:"json",async:!0,success:function(a){e.RecvMarginData(a,t),e.Execute.RunNextJob()}})},this.RecvMarginData=function(t,e){if(Fr.Complier.Log(t),t.stock&&1==t.stock.length){var a=t.stock[0],i=new Array,r=[],n=[],s=[];for(var o in a.stockday){var h=a.stockday[o],l=h.margin;if(l){var u=new z;switch(u.Date=h.date,e){case yn.JOB_DOWNLOAD_MARGIN_BALANCE:if(!this.IsNumber(l.balance))continue;u.Value=l.balance,i.push(u);break;case yn.JOB_DOWNLOAD_MARGIN_RATE:if(!this.IsNumber(l.rate))continue;u.Value=l.rate,i.push(u);break;case yn.JOB_DOWNLOAD_MARGIN_BUY_BALANCE:case yn.JOB_DOWNLOAD_MARGIN_BUY_AMOUNT:case yn.JOB_DOWNLOAD_MARGIN_BUY_REPAY:case yn.JOB_DOWNLOAD_MARGIN_BUY_NET:var c=l.buy;if(!c)continue;if(!(this.IsNumber(c.balance)&&this.IsNumber(c.amount)&&this.IsNumber(c.repay)&&this.IsNumber(c.net)))continue;u.Value=c.balance;var d=new z;d.Date=h.date,d.Value=c.amount;var f=new z;f.Date=h.date,f.Value=c.repay;var m=new z;m.Date=h.date,m.Value=c.net,i.push(u),r.push(d),n.push(f),s.push(m);break;case yn.JOB_DOWNLOAD_MARGIN_SELL_BALANCE:case yn.JOB_DOWNLOAD_MARGIN_SELL_VOLUME:case yn.JOB_DOWNLOAD_MARGIN_SELL_REPAY:case yn.JOB_DOWNLOAD_MARGIN_SELL_NET:var C=l.sell;if(!C)continue;if(!(this.IsNumber(C.balance)&&this.IsNumber(C.volume)&&this.IsNumber(C.repay)&&this.IsNumber(C.net)))continue;u.Value=c.balance;var d=new z;d.Date=h.date,d.Value=c.volume;var f=new z;f.Date=h.date,f.Value=c.repay;var m=new z;m.Date=h.date,m.Value=c.net,i.push(u),r.push(d),n.push(f),s.push(m);break;default:continue}}}var p=[];e===yn.JOB_DOWNLOAD_MARGIN_BALANCE||e===yn.JOB_DOWNLOAD_MARGIN_RATE?p.push({JobID:e,Data:i}):e===yn.JOB_DOWNLOAD_MARGIN_BUY_BALANCE||e===yn.JOB_DOWNLOAD_MARGIN_BUY_AMOUNT||e===yn.JOB_DOWNLOAD_MARGIN_BUY_REPAY||e===yn.JOB_DOWNLOAD_MARGIN_BUY_NET?(p.push({JobID:yn.JOB_DOWNLOAD_MARGIN_BUY_BALANCE,Data:i}),p.push({JobID:yn.JOB_DOWNLOAD_MARGIN_BUY_AMOUNT,Data:r}),p.push({JobID:yn.JOB_DOWNLOAD_MARGIN_BUY_REPAY,Data:n}),p.push({JobID:yn.JOB_DOWNLOAD_MARGIN_BUY_NET,Data:s})):e!==yn.JOB_DOWNLOAD_MARGIN_SELL_BALANCE&&e!==yn.JOB_DOWNLOAD_MARGIN_SELL_VOLUME&&e!==yn.JOB_DOWNLOAD_MARGIN_SELL_REPAY&&e!==yn.JOB_DOWNLOAD_MARGIN_SELL_NET||(p.push({JobID:yn.JOB_DOWNLOAD_MARGIN_SELL_BALANCE,Data:i}),p.push({JobID:yn.JOB_DOWNLOAD_MARGIN_SELL_VOLUME,Data:r}),p.push({JobID:yn.JOB_DOWNLOAD_MARGIN_SELL_REPAY,Data:n}),p.push({JobID:yn.JOB_DOWNLOAD_MARGIN_SELL_NET,Data:s}));for(var D in p){var v=this.SourceData.GetFittingData(p[D].Data),g=new Z;if(g.Data=v,g.Period=this.Period,g.Period>0){var S=g.GetPeriodSingleData(g.Period);g.Data=S}var T=g.GetValue();this.MarginData.set(p[D].JobID,T)}}},this.GetNewsAnalysisCacheData=function(t,e){var a=yn.GetNewsAnalysisID(t);return a||this.Execute.ThrowUnexpectedNode(e,"不支持NEWS("+t+")"),this.NewsAnalysisData.has(a)?this.NewsAnalysisData.get(a):[]},this.GetHKToSHSZData=function(t){var e=t.Args,a=this.Symbol;if(e.length>0){var i=e[0];if(i.Type==gn.Literal)a=i.Value;else if(i.Type==gn.Identifier){var r=!1;for(var n in this.Arguments){var s=this.Arguments[n];if(s.Name==i.Name){a=s.Value,r=!0;break}}if(!r){var o=t.Token;this.Execute.ErrorHandler.ThrowError(o.Index,o.Line,0,"HK2SHSZ() Error: can't read "+i.Name)}}}t.Symbol=a,1==a||2==a||3==a?this.GetHKToSHSZMarketData(a,t):this.GetHKToSHSZStockData(a,t)},this.GetHKToSHSZStockData=function(t,e){if(this.HKToSHSZData.has(t))return this.Execute.RunNextJob();var a=t.toLowerCase(),i=this,r=this.HKToSHSZApiUrl[3]+"/"+a+".json";n.HttpRequest({url:r,type:"get",dataType:"json",async:!0,success:function(t){i.RecvHKToSHSZStockData(t,e),i.Execute.RunNextJob()},error:function(t){console.warn("[JSSymbolData::GetHKToSHSZStockData] request url="+r+" failed. error="+t.status),i.RecvHKToSHSZStockData(null,e),i.Execute.RunNextJob()}})},this.RecvHKToSHSZStockData=function(t,e){if(t){for(var a=t.symbol,i=a.toUpperCase(),r=[],n=0;n<t.date.length;++n){var s=new z;s.Date=t.date[n],s.Value=t.vol[n],r.push(s)}var o=this.Data.GetFittingData(r),h=new Z;if(h.Data=o,h.Period=this.Period,h.Period>0){var l=h.GetPeriodSingleData(h.Period);h.Data=l}var t=h.GetValue();this.HKToSHSZData.set(i,t)}},this.GetHKToSHSZMarketData=function(t,e){if(this.HKToSHSZData.has(t))return this.Execute.RunNextJob();var a,i=0;this.DataType===In.MINUTE_ID?i=1:this.DataType==In.MULTIDAY_MINUTE_ID?i=2:this.Period<=3&&(i=0),a=this.HKToSHSZApiUrl[i];var r=this;Fr.Complier.Log("[JSSymbolData::GetHKToSHSZMarketData] code="+t+" url="+a+", dataType="+i),2===i?n.HttpRequest({url:a,data:{symbol:this.Symbol,daycount:this.MaxRequestMinuteDayCount},type:"post",dataType:"json",async:!0,success:function(t){r.RecvMulitMinuteHKToSHSZData(t,e),r.Execute.RunNextJob()}}):n.HttpRequest({url:a,type:"get",dataType:"json",async:!0,success:function(t){0==i?r.RecvHKToSHSZData(t,e):1==i&&r.RecvMinuteHKToSHSZData(t,e),r.Execute.RunNextJob()}})},this.RecvMinuteHKToSHSZData=function(t,e){var a=[],i=[],r=[];if(this.IsBeforeData){for(s in this.SourceData.Data){var n=this.SourceData.Data[s];if(!n.Before)break;a.push(null),i.push(null),r.push(null)}for(var s=0;s<t.time.length;++s){if(925!==t.time[s]){var o=t.hk2sh[s],h=t.hk2sz[s],l=o+h;a.push(l),i.push(o),r.push(h)}}}else for(var s=0;s<t.time.length;++s){var o=(t.time[s],t.hk2sh[s]),h=t.hk2sz[s],l=o+h;a.push(l),i.push(o),r.push(h)}var u=[{Data:a,ID:1},{Data:i,ID:2},{Data:r,ID:3}];for(var s in u){var n=u[s];this.HKToSHSZData.set(n.ID,n.Data)}},this.RecvHKToSHSZData=function(t,e){for(var a=[],i=[],r=[],n=0;n<t.date.length;++n){var s=t.date[n],o=1e6*t.hk2sh[n],h=1e6*t.hk2sz[n],l=o+h,u=new z;u.Date=s,u.Value=l;var c=new z;c.Date=s,c.Value=o;var d=new z;d.Date=s,d.Value=h,a.push(u),i.push(c),r.push(d)}var f=[{Data:a,ID:1},{Data:i,ID:2},{Data:r,ID:3}];for(var m in f){var C=this.Data.GetFittingData(f[m].Data),p=new Z;if(p.Data=C,p.Period=this.Period,p.Period>0){var D=p.GetPeriodSingleData(p.Period);p.Data=D}var v=p.GetValue();this.HKToSHSZData.set(f[m].ID,v)}},this.RecvMulitMinuteHKToSHSZData=function(t,e){if(t.data&&!(t.data.length<=0)){for(var a=[],i=[],r=[],n=0,s=0;n<this.Data.Data.length&&s<t.data.length;){a[n]=null,i[n]=null,r[n]=null;var o=this.Data.Data[n],h=o.DateTime;if(h){var l=h.split(" ");if(2==l.length){var u=parseInt(l[0]),c=t.data[s];if(!c.minute||c.minute.length<=0)++s;else if(c.date>u)++n;else if(c.date<u)++s;else{for(var d in c.minute){var f=c.minute[d],m=f[1],C=f[2],p=m+C;a[n]=p,i[n]=m,r[n]=C,++n}++s}}else++n}else++n}var D=[{Data:a,ID:1},{Data:i,ID:2},{Data:r,ID:3}];for(var n in D){var o=D[n];this.HKToSHSZData.set(o.ID,o.Data)}}},this.GetHKToSHSZCacheData=function(t,e){return t||(t=this.Symbol),"string"==typeof t&&(t=t.toUpperCase()),this.HKToSHSZData.has(t)?this.HKToSHSZData.get(t):[]},this.GetNewsAnalysisData=function(t){if(this.NewsAnalysisData.has(t))return this.Execute.RunNextJob();var e=this,a=new _r.default([[yn.JOB_DOWNLOAD_NEWS_ANALYSIS_NEGATIVE,"negative"],[yn.JOB_DOWNLOAD_NEWS_ANALYSIS_RESEARCH,"research"],[yn.JOB_DOWNLOAD_NEWS_ANALYSIS_INTERACT,"interact"],[yn.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE,"holderchange"],[yn.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE2,"holderchange"],[yn.JOB_DOWNLOAD_NEWS_ANALYSIS_TRUSTHOLDER,"trustholder"],[yn.JOB_DOWNLOAD_NEWS_ANALYSIS_BLOCKTRADING,"Blocktrading"],[yn.JOB_DOWNLOAD_NEWS_ANALYSIS_COMPANYNEWS,"companynews"],[yn.JOB_DOWNLOAD_NEWS_ANALYSIS_TOPMANAGERS,"topmanagers"],[yn.JOB_DOWNLOAD_NEWS_ANALYSIS_PLEDGE,"Pledge"]]);if(!a.has(t))return void this.Execute.RunNextJob();var i=a.get(t),r=this.StockNewsAnalysisApiUrl+"/"+i+"/"+this.Symbol+".json";n.HttpRequest({url:r,type:"get",dataType:"json",async:!0,success:function(a){e.RecvNewsAnalysisData(a,t),e.Execute.RunNextJob()},error:function(a,i){e.RecvNewsAnalysisDataError(a,i,t),e.Execute.RunNextJob()}})},this.RecvNewsAnalysisDataError=function(t,e,a){Fr.Complier.Log("[JSSymbolData::RecvNewsAnalysisDataError] ajax error.",t.status);for(var i=[],r=0;r<this.Data.Data.length;++r){var n=new z;n.Date=this.Data.Data[r].Date,n.Value=0,i.push(n)}var s=new Z;s.Data=i,this.NewsAnalysisData.set(a,s.GetValue())},this.RecvNewsAnalysisData=function(t,e){if(t.data&&t.date&&!(t.data.length<=0||t.data.length!=t.date.length))if(Fr.Complier.Log("[JSSymbolData::RecvNewsAnalysisData] jobID",e,t.update),e==yn.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE||e==yn.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE2){for(var a=[],i=[],r=0;r<t.data.length;++r){var n=new z;n.Date=t.date[r],n.Value=t.data[r],this.IsNumber(n.Value)&&a.push(n),r<t.data2.length&&(n=new z,n.Date=t.date[r],n.Value=t.data2[r],this.IsNumber(n.Value)&&i.push(n))}var s=this.Data.GetFittingData2(a,0),o=new Z;o.Data=s,this.NewsAnalysisData.set(yn.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE,o.GetValue()),s=this.Data.GetFittingData2(i,0),o=new Z,o.Data=s,this.NewsAnalysisData.set(yn.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE2,o.GetValue())}else{for(var a=[],r=0;r<t.data.length;++r){var n=new z;n.Date=t.date[r],n.Value=t.data[r],a.push(n)}var h=this.Data.GetFittingData2(a,0),o=new Z;o.Data=h,this.NewsAnalysisData.set(e,o.GetValue())}},this.GetSectionFinanceData=function(t){var e=t.SF[0],a=t.SF[1].Period;if(this.SectionFinanceData.has(e))return this.Execute.RunNextJob();Fr.Complier.Log("[JSSymbolData::GetSectionFinanceData] "+a.Year+"-"+a.Quarter);var i="announcement"+a.Quarter,r=this,s=["name","date","symbol",i,"finance"+a.Quarter],o=[i+".year","int32","eq",a.Year.toString()];n.HttpRequest({url:this.StockHistoryDayApiUrl,data:{field:s,symbol:[this.Symbol],condition:[{item:o}]},type:"post",dataType:"json",async:!0,success:function(e){r.RecvSectionFinanceData(e,t),r.Execute.RunNextJob()}})},this.RecvSectionFinanceData=function(t,e){if(t.stock&&1==t.stock.length){var a=t.stock[0];if(a.stockday&&!(a.stockday.length<=0)){var i=a.stockday[0],r=e.SF[1].Period,n=null;if(1===r.Quarter?n=i.finance1:2===r.Quarter?n=i.finance2:3===r.Quarter?n=i.finance3:4===r.Quarter&&(n=i.finance4),n){var t=new _r.default([[yn.JOB_DOWNLOAD_SECTION_F_01,n.currentassets],[yn.JOB_DOWNLOAD_SECTION_F_02,n.monetaryfunds],[yn.JOB_DOWNLOAD_SECTION_F_03,n.inventory],[yn.JOB_DOWNLOAD_SECTION_F_04,n.currentliabilities],[yn.JOB_DOWNLOAD_SECTION_F_05,n.ncurrentliabilities],[yn.JOB_DOWNLOAD_SECTION_F_06,n.expenses3],[yn.JOB_DOWNLOAD_SECTION_F_07,n.investmentincome],[yn.JOB_DOWNLOAD_SECTION_F_08,n.pcnprofit],[yn.JOB_DOWNLOAD_SECTION_F_09,n.nnetprofit],[yn.JOB_DOWNLOAD_SECTION_F_10,n.npersearning],[yn.JOB_DOWNLOAD_SECTION_F_11,n.woewa],[yn.JOB_DOWNLOAD_SECTION_F_12,n.inprocess],[yn.JOB_DOWNLOAD_SECTION_F_13,n.accdepreciation],[yn.JOB_DOWNLOAD_SECTION_F_14,n.mholderprofit],[yn.JOB_DOWNLOAD_SECTION_F_15,n.lossexchange],[yn.JOB_DOWNLOAD_SECTION_F_16,n.baddebts],[yn.JOB_DOWNLOAD_SECTION_F_17,n.fixedassets],[yn.JOB_DOWNLOAD_SECTION_F_18,n.curdepreciation],[yn.JOB_DOWNLOAD_SECTION_F_19,n.orevenues],[yn.JOB_DOWNLOAD_SECTION_F_20,n.moprofit],[yn.JOB_DOWNLOAD_SECTION_F_21,n.oprofit],[yn.JOB_DOWNLOAD_SECTION_F_22,n.nprofit],[yn.JOB_DOWNLOAD_SECTION_F_23,n.areceivable],[yn.JOB_DOWNLOAD_SECTION_F_24,n.financialcost],[yn.JOB_DOWNLOAD_SECTION_F_25,n.ccfo],[yn.JOB_DOWNLOAD_SECTION_F_26,n.totalassets],[yn.JOB_DOWNLOAD_SECTION_F_27,n.totalliabilities],[yn.JOB_DOWNLOAD_SECTION_F_28,n.totalownersequity],[yn.JOB_DOWNLOAD_SECTION_F_29,n.grossmargin],[yn.JOB_DOWNLOAD_SECTION_F_30,n.percreserve],[yn.JOB_DOWNLOAD_SECTION_F_31,n.peruprofit],[yn.JOB_DOWNLOAD_SECTION_F_32,n.persearning],[yn.JOB_DOWNLOAD_SECTION_F_33,n.pernetasset],[yn.JOB_DOWNLOAD_SECTION_F_34,n.perccfo],[yn.JOB_DOWNLOAD_SECTION_F_38,n.alratio],[yn.JOB_DOWNLOAD_SECTION_F_39,n.profityoy]]);4===r.Quarter&&(t.set(yn.JOB_DOWNLOAD_SECTION_F_35,n.nnprofitincrease),t.set(yn.JOB_DOWNLOAD_SECTION_F_36,n.nnprofitspeed),t.set(yn.JOB_DOWNLOAD_SECTION_F_37,n.nprofitincrease));var s=e.SF[0];this.SectionFinanceData.set(s,t)}}}},this.GetSectionFinanceCacheData=function(t,e,a,i){var r=yn.GetSectionReportPeriod(t,e);r||this.Execute.ThrowUnexpectedNode(i,"不支持FS("+t+", "+e+", '"+a+"') 报告期错误");var n=yn.GetSectionFinanceID(a);n||this.Execute.ThrowUnexpectedNode(i,"不支持FS("+t+", "+e+",'"+a+"') 财务数据字段名称错误");var s=r.Year+"-"+r.Quarter;if(!this.SectionFinanceData.has(s)&&!this.ThrowSFPeirod.has(s)){this.ThrowSFPeirod.add(s);var o={ID:yn.JOB_DOWNLOAD_SECTION_SF,SF:[s,{Period:r,Fields:new Ir.default([n])}]};this.Execute.ThrowDownloadSF(i,o,"FS("+t+", "+e+", '"+a+"') 动态下载")}if(!this.SectionFinanceData.has(s))return this.Execute.ThrowUnexpectedNode(i,"不支持FS("+t+", "+e+", '"+a+"') 没有这期财务数据");var h=this.SectionFinanceData.get(s);return h.has(n)||this.Execute.ThrowUnexpectedNode(i,"不支持FS("+t+", "+e+", '"+a+"') 没有这期财务数据字段"),h.get(n)},this.GetFinOne=function(t){var e=this.JobArgumentsToArray(t,3),a=this.GetStockDataKey(t,e);if(this.StockData.has(a))return this.Execute.RunNextJob();var i=this;if(this.NetworkFilter){var r=this.Data.GetDateRange(),n={Name:"JSSymbolData::GetFinOne",Explain:"财务数据FINONE(ID,Y,MMDD)",JobID:t.ID,Request:{Url:i.StockHistoryDayApiUrl,Type:"POST",Data:{Args:e,symbol:this.Symbol,daterange:r}},Self:this,PreventDefault:!1};if(this.NetworkFilter(n,function(e){i.RecvStockValue(e,t,a,1),i.Execute.RunNextJob()}),1==n.PreventDefault)return}new tr({Job:t,Symbol:this.Symbol,Url:this.StockHistoryDayApiUrl,Args:e,DataKey:a,Callback:function(t,e,a){i.RecvStockValue(t,e,a,1),i.Execute.RunNextJob()},ErrorCallback:function(t){i.AddStockValueError(a,t)}}).Download()},this.GetStockDataKey=function(t,e){var a=t.FunctionName;if(e.length>0){a+="(";for(var i=0;i<e.length;++i)i>0&&(a+=","),a+=e[i].toString();a+=")"}return a},this.GetFinValue=function(t){var e=this.JobArgumentsToArray(t,1),a=e[0],i=this.GetStockDataKey(t,e);if(this.StockData.has(i))return this.Execute.RunNextJob();var r=this;if(this.NetworkFilter){var n=this.Data.GetDateRange(),s={Name:"JSSymbolData::GetFinValue",Explain:"财务数据FINVALUE(ID)",JobID:t.ID,Request:{Url:r.StockHistoryDayApiUrl,Type:"POST",Data:{id:a,symbol:this.Symbol,daterange:n}},Self:this,PreventDefault:!1};if(this.NetworkFilter(s,function(e){r.RecvStockValue(e,t,i,0),r.Execute.RunNextJob()}),1==s.PreventDefault)return}new $i({Job:t,Symbol:this.Symbol,Url:this.StockHistoryDayApiUrl,Args:e,DataKey:i,Callback:function(t,e,a){r.RecvStockValue(t,e,a,0),r.Execute.RunNextJob()},ErrorCallback:function(t){r.AddStockValueError(i,t)}}).Download()},this.GetFinance=function(t){var e=this.JobArgumentsToArray(t,1),a=e[0],i=this.GetStockDataKey(t,e);if(this.StockData.has(i))return this.Execute.RunNextJob();var r=this;if(this.NetworkFilter){var n=this.Data.GetDateRange(),s={Name:"JSSymbolData::GetFinance",Explain:"财务数据FINANCE(ID)",JobID:t.ID,Request:{Url:r.RealtimeApiUrl,Type:"POST",Data:{id:a,symbol:this.Symbol,daterange:n}},Self:this,PreventDefault:!1};if(this.NetworkFilter(s,function(e){r.RecvStockValue(e,t,i,0),r.Execute.RunNextJob()}),1==s.PreventDefault)return}new er({Job:t,Symbol:this.Symbol,Url:this.StockHistoryDayApiUrl,RealtimeUrl:this.RealtimeApiUrl,Args:e,DataKey:i,Callback:function(t,e,a){r.RecvStockValue(t,e,a,0),r.Execute.RunNextJob()},ErrorCallback:function(t){r.AddStockValueError(i,t)}}).Download()},this.GetGPJYValue=function(t){var e=this.JobArgumentsToArray(t,3),a=this.GetStockDataKey(t,e);if(this.StockData.has(a))return this.Execute.RunNextJob();var i=this,r=1==e[2]?0:2;if(this.NetworkFilter){var n=this.Data.GetDateRange(),s={Name:"JSSymbolData::GetGPJYValue",Explain:"股票交易类数据GPJYVALUE(ID,N,TYPE)",JobID:t.ID,Request:{Url:i.StockHistoryDayApiUrl,Type:"POST",Data:{Args:e,symbol:this.Symbol,daterange:n}},Self:this,PreventDefault:!1};if(this.NetworkFilter(s,function(e){i.RecvStockValue(e,t,a,r),i.Execute.RunNextJob()}),1==s.PreventDefault)return}new ar({Job:t,Symbol:this.Symbol,Url:this.StockHistoryDayApiUrl,Args:e,DataKey:a,Callback:function(t,e,a){i.RecvStockValue(t,e,a,r),i.Execute.RunNextJob()},ErrorCallback:function(t){i.AddStockValueError(a,t)}}).Download()},this.GetSCJYValue=function(t){var e=this.JobArgumentsToArray(t,3),a=this.GetStockDataKey(t,e);if(this.StockData.has(a))return this.Execute.RunNextJob();var i=this,r=1==e[2]?0:2;if(this.NetworkFilter){var n=this.Data.GetDateRange(),s={Name:"JSSymbolData::GetSCJYValue",Explain:"股票交易类数据SCJYVALUE(ID,N,TYPE)",JobID:t.ID,Request:{Url:i.StockHistoryDayApiUrl,Type:"POST",Data:{Args:e,symbol:this.Symbol,daterange:n}},Self:this,PreventDefault:!1};if(this.NetworkFilter(s,function(e){i.RecvStockValue(e,t,a,r),i.Execute.RunNextJob()}),1==s.PreventDefault)return}new ir({Job:t,Symbol:this.Symbol,Url:this.StockHistoryDayApiUrl,Args:e,DataKey:a,Callback:function(t,e,a){i.RecvStockValue(t,e,a,r),i.Execute.RunNextJob()},ErrorCallback:function(t){i.AddStockValueError(a,t)}}).Download()},this.GetVariantData=function(t){var e=t.VariantName;if(this.StockData.has(e))return this.Execute.RunNextJob();var a=this;if(this.NetworkFilter){var i=this.Data.GetDateRange(),r={Name:"JSSymbolData::GetVariantData",Explain:"变量数据下载",JobID:t.ID,Request:{Url:"www.121287.com",Type:"POST",Data:{VariantName:t.VariantName,symbol:this.Symbol,daterange:i}},Self:this,PreventDefault:!1};if(this.NetworkFilter(r,function(i){if(i.Error)a.AddStockValueError(e,i.Error);else{var r=0;he.IsNumber(i.DataType)&&(r=i.DataType),a.RecvStockValue(i.Data,t,e,r)}a.Execute.RunNextJob()}),1==r.PreventDefault)return}var n,s=function(t){a.AddStockValueError(e,t)};if("CAPITAL"==t.VariantName||"TOTALCAPITAL"==t.VariantName||"EXCHANGE"==t.VariantName){var o=function(t,e,i){a.RecvStockValue(t,e,i,0),a.Execute.RunNextJob()};n=new er({Job:t,Symbol:this.Symbol,Url:this.StockHistoryDayApiUrl,RealtimeUrl:this.RealtimeApiUrl,Args:[t.VariantName],DataKey:e,Callback:o,ErrorCallback:s})}else{if("HYBLOCK"!=t.VariantName&&"DYBLOCK"!=t.VariantName&&"GNBLOCK"!=t.VariantName){if("INBLOCK"==t.VariantName){var h=t.VariantName+", 请对接外部数据.";return this.AddStockValueError(e,h),void this.Execute.RunNextJob()}var h="不支持变量"+t.VariantName+", 请对接外部数据.";return this.AddStockValueError(e,h),void this.Execute.RunNextJob()}var o=function(t,e,i,r){a.RecvStockValue(t,e,i,r),a.Execute.RunNextJob()};n=new rr({Job:t,Symbol:this.Symbol,Url:this.StockHistoryDayApiUrl,RealtimeUrl:this.RealtimeApiUrl,Args:[t.VariantName],DataKey:e,Callback:o,ErrorCallback:s})}n.Download()},this.GetCustomVariantData=function(t){var e=t.VariantName;if(this.StockData.has(e))return this.Execute.RunNextJob();var a=mn.CustomVariant.Data.get(e),i=this;if(this.NetworkFilter){var r=this.Data.GetDateRange(),n={Name:"JSSymbolData::GetCustomVariantData",Explain:"自定义变量数据下载",JobID:t.ID,Request:{Url:"www.121287.com",Type:"POST",Data:{VariantName:t.VariantName,symbol:this.Symbol,daterange:r,period:this.Period}},Self:this,VariantInfo:a,PreventDefault:!1};this.NetworkFilter(n,function(a){a.Error?i.AddStockValueError(e,a.Error):i.RecvStockValue(a.Data,t,e,a.DataType),i.Execute.RunNextJob()})}else this.AddStockValueError(e,"自定义变量"+e+"下载失败"),this.Execute.RunNextJob()},this.GetCustomFunctionData=function(t){var e=t.FunctionName,a=mn.CustomFunction.Data.get(e);if(!a.IsDownload)return this.Execute.RunNextJob();if(this.StockData.has(e))return this.Execute.RunNextJob();var i=this;if(this.NetworkFilter){var r=this.Data.GetDateRange(),n={Name:"JSSymbolData::GetCustomFunctionData",Explain:"自定义函数数据下载",JobID:t.ID,Request:{Url:"www.121287.com",Type:"POST",Data:{FunctionName:t.FunctionName,symbol:this.Symbol,daterange:r,JobItem:t}},Self:this,FunctionInfo:a,PreventDefault:!1};this.NetworkFilter(n,function(a){a.Error?i.AddStockValueError(e,a.Error):i.RecvStockValue(a.Data,t,e,a.DataType),i.Execute.RunNextJob()})}else this.AddStockValueError(e,"自定义函数"+e+"下载失败"),this.Execute.RunNextJob()},this.RecvStockValue=function(t,e,a,i){if(!t)return void Fr.Complier.Log("[JSSymbolData::RecvStockValue] key="+a+" data is null");if(0==i)if(Array.isArray(t)){var r,n=this.Data;if(Z.IsDayPeriod(this.Period,!0))r=n.GetFittingFinanceData(t);else{if(!Z.IsMinutePeriod(this.Period,!0))return;r=n.GetMinuteFittingFinanceData(t)}var s=new Z;s.Data=r;var o=s.GetValue();if("EXCHANGE"==a)for(var h in o){var l=n.Data[h];he.IsPlusNumber(o[h])&&(o[h]=l.Vol/o[h]*100)}this.StockData.set(a,{Data:o})}else this.StockData.set(a,{Data:t.Value});else if(1==i)this.StockData.set(a,{Data:t.Value});else if(2==i){var r,n=this.Data;if(Z.IsDayPeriod(this.Period,!0))r=n.GetFittingTradeData(t,0);else if(Z.IsMinutePeriod(this.Period,!0))r=n.GetMinuteFittingTradeData(t,0);else{if(!Z.IsTickPeriod(this.Period))return;r=n.GetMinuteFittingTradeData(t,0)}var s=new Z;s.Data=r;var o=s.GetValue();this.StockData.set(a,{Data:o})}},this.AddStockValueError=function(t,e){this.StockData.set(t,{Error:e})},this.GetStockCacheData=function(t){var e;if(t.FunctionName)e=this.GetStockDataKey({FunctionName:t.FunctionName},t.Args);else if(t.VariantName)e=t.VariantName;else{if(!t.CustomName)return null;e=t.CustomName}if(!this.StockData.has(e))return null;var a=this.StockData.get(e);return a.Error&&this.Execute.ThrowUnexpectedNode(t.Node,a.Error),a.Data},this.IsInBlock=function(t,e){var a=this.GetStockCacheData({VariantName:"INBLOCK",Node:e});if(!a)return 0;for(var i=a.split("|"),r=0;r<i.length;++r){if(i[r]==t)return 1}return 0},this.JobArgumentsToArray=function(t,e){var a=t.Args;if(a.length!=e){var i=t.Token;this.Execute.ErrorHandler.ThrowError(i.Index,i.Line,0,t.FunctionName+"() Error: argument count error.")}for(var r=[],n=0;n<a.length;++n){var s=a[n];if(he.IsNumber(s))r.push(s);else if(s.Type==gn.Literal)r.push(s.Value);else if(s.Type==gn.Identifier){var o=!1;for(var h in this.Arguments){var l=this.Arguments[h];if(l.Name==s.Name){r.push(l.Value),o=!0;break}}if(!o){var i=t.Token;this.Execute.ErrorHandler.ThrowError(i.Index,i.Line,0,t.FunctionName+"() Error: can't read "+s.Name)}}}return r},this.DownloadCustomAPIData=function(t){if(!this.NetworkFilter)return this.Execute.RunNextJob();var e=[];for(var a in t.Args){var i=t.Args[a];if(i.Type==gn.Literal)e.push(i.Value);else{if(i.Type!=gn.Identifier)return this.Execute.RunNextJob();var r=!1;for(var n in this.Arguments){var s=this.Arguments[n];if(s.Name==i.Name){e.push(s.Value),r=!0;break}}if(!r){var o=t.Token;this.Execute.ErrorHandler.ThrowError(o.Index,o.Line,0,"LoadAPIData() Error: can't read "+i.Name)}}}var h=this,l={Name:"JSSymbolData::DownloadCustomAPIData",Explain:"下载自定义api数据",Period:this.Period,Right:this.Right,Symbol:this.Symbol,KData:this.Data,Cache:this.CustomAPIData,Args:e,Self:this,PreventDefault:!1};this.NetworkFilter(l,function(t){h.RecvCustomAPIData(t,e),h.Execute.RunNextJob()}),1!=l.PreventDefault&&this.Execute.RunNextJob()},this.RecvCustomAPIData=function(t,e){t&&(1==t.Type?this.RecvCustomAPISingleData(t,e):this.RecvCustomAPIGroupData(t,e))},this.RecvCustomAPIGroupData=function(t,e){if(t&&t.data){var a=t.data,i=this.GenerateCustomAPIKey(e);if(Z.IsMinutePeriod(this.Period,!0)){if(!a.date||!a.time)return;var r=a.date;a.time;for(var n in a)if("date"!=n&&"time"!=n)var s=a[n]}else if(Z.IsDayPeriod(this.Period,!0)){if(!a.date)return;var r=a.date,o={__Type__:"Object"};for(var n in a)if("date"!=n){var s=a[n];if(Array.isArray(s)){var h=this.FittingCustomAPIArray(s,r);o[n]=h}else this.IsNumber(s)&&(o[n]=s)}this.CustomAPIData.set(i,o)}}},this.RecvCustomAPISingleData=function(t,e){var a=t.data,i=this.GenerateCustomAPIKey(e);if(Z.IsMinutePeriod(this.Period,!0)){if(!a.date||!a.time)return;var r=a.date;a.time;for(var n in a)if("date"!=n&&"time"!=n){a[n]}}else if(Z.IsDayPeriod(this.Period,!0)){if(!a.date)return;var r=a.date,s=a.value,o=null;o=Array.isArray(s)?1==t.DataType?this.FittingCustomAPIFinanceArray(s,r):this.FittingCustomAPIArray(s,r):s,this.CustomAPIData.set(i,o)}},this.FittingCustomAPIFinanceArray=function(t,e,a){var i=this.Data,r=[];for(var n in t){var s=t[n],o=new z;o.Date=e[n],a&&n<a.length&&(o.Time=a[n]),o.Value=s,r.push(o)}var h;if(Z.IsDayPeriod(this.Period,!0))h=i.GetFittingFinanceData(r);else{if(!Z.IsMinutePeriod(this.Period,!0))return null;h=i.GetMinuteFittingFinanceData(r)}var l=new Z;return l.Data=h,l.GetValue()},this.FittingCustomAPIArray=function(t,e,a){var i=this.Data,r=[];for(var n in t){var s=t[n],o=new z;o.Date=e[n],a&&n<a.length&&(o.Time=a[n]),o.Value=s,r.push(o)}var h;if(Z.IsDayPeriod(this.Period,!0))h=i.GetFittingData(r);else{if(!Z.IsMinutePeriod(this.Period,!0))return null;h=i.GetMinuteFittingData(r)}var l=new Z;return l.Data=h,l.GetValue()},this.GenerateCustomAPIKey=function(t){if(t.length<=0)return"__12_EMPTY_ARGS__";var e="";for(var a in t)e.length>0&&(e+=","),e+=t[a];return e},this.GetCustomApiData=function(t){var e=this.GenerateCustomAPIKey(t);return this.CustomAPIData.has(e)?this.CustomAPIData.get(e):(Fr.Complier.Log("[JSSymbolData::GetCustomApiData] can't find api data key=["+e+"]"),null)},this.ReadArgumentValue=function(t,e){if(e.Name=t.Name,t.Type==gn.Literal)return e.Value=t.Value,!0;if(t.Type==gn.Identifier){var a=!1;for(var i in this.Arguments){var r=this.Arguments[i];if(r.Name==t.Name)return e.Value=r.Value,a=!0,!0}if(!a)return e.Error="can't read "+t.Name,!1}return e.Error="can't read "+t.Name+", type error.",!1},this.ReadIndexFunctionValue=function(t,e){var a={};if("object"===(void 0===t?"undefined":(0,gr.default)(t))){if(!this.ReadArgumentValue(t,a))return e.Error=a.Error,!1}else a.Value=t;var i=a.Value.indexOf(".");if(-1!=i){e.Name=a.Value.slice(0,i);var r=a.Value.indexOf("#",i+1);-1!=r?(e.Out=a.Value.slice(i+1,r),e.Period=a.Value.slice(r+1)):e.Out=a.Value.slice(i+1)}else{var r=a.Value.indexOf("#");-1!=r?(e.Name=a.Value.slice(0,r),e.Period=a.Value.slice(r+1)):e.Name=a.Value}var n=new _r.default([["DAY",0],["WEEK",1],["MONTH",2],["SEASON",9],["YEAR",3],["HALFYEAR",22],["WEEK2",21],["MIN1",4],["MIN5",5],["MIN15",6],["MIN30",7],["MIN60",8],["DAY2",40002],["MULTIDAY",40002],["DAY3",40003],["DAY4",40004],["DAY5",40005],["DAY6",40006],["DAY7",40007],["DAY8",40008],["DAY9",40009],["DAY10",40010],["DAY11",40011],["DAY12",40012],["DAY13",40013],["DAY14",40014],["DAY15",40015]]);if(e.Period){if(!n.has(e.Period))return e.Error=e.Period+", 周期错误",!1;e.PeriodID=n.get(e.Period)}return!0},this.ReadSymbolArgumentValue=function(t,e){var a={};if("object"===(void 0===t?"undefined":(0,gr.default)(t))){if(!this.ReadArgumentValue(t,a))return e.Error=a.Error,!1}else a.Value=t;return""==a.Value&&(a.Value=this.Symbol),a.Value.indexOf(".SH")>0?e.Symbol=a.Value.replace(".SH",".sh"):a.Value.indexOf(".SZ")>0?e.Symbol=a.Value.replace(".SZ",".sz"):e.Symbol=a.Value,!0},this.ReadIndexArgumentValue=function(t,e){e.Args=[];for(var a in e.SytemIndex.Args){var i=e.SytemIndex.Args[a];e.Args.push({Value:i.Value,Name:i.Name})}if(t.length>2&&e.SytemIndex.Args&&e.SytemIndex.Args.length>0)for(var a=2,r=0;a<t.length&&r<e.SytemIndex.Args.length;++a,++r){var n={},i=t[a];if("object"===(void 0===i?"undefined":(0,gr.default)(i))){if(!this.ReadArgumentValue(i,n))return e.Error=n.Error,!1}else n.Value=i;e.Args[r].Value=n.Value}return!0},this.GenerateScriptIndexKey=function(t){var e="",a=t.Args;for(var i in a){e.length>0&&(e+=",");e+=a[i].Value.toString()}var r=t.Out?t.Out:"ALL";return"("+t.Symbol+","+t.PeriodID+"), "+t.Name+"("+e+")=>"+r},this.CallMemberScriptIndex=function(t){var e=this;if(t.Member.Object.Type!=gn.Identifier||t.Member.Property.Type!=gn.Identifier){var a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallMemberScriptIndex() Error: 参数错误")}var i=t.Member.Object.Name,r=t.Member.Property.Name;if(""==r||null==r){var a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallMemberScriptIndex() Error: "+i+"."+r+" 指标输出变量错误")}if(this.Execute.VarTable.has(i)){if(this.Execute.VarTable.get(i).hasOwnProperty(r))return Fr.Complier.Log("[JSSymbolData::CallMemberScriptIndex] index data "+i+"."+r+" in cache."),this.Execute.RunNextJob()}var n=i+"."+r,s={Job:t,PeriodID:this.Period,Symbol:this.Symbol};if(!this.ReadIndexFunctionValue(n,s)){var a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallMemberScriptIndex() Error: '"+n+"' "+s.Error)}var h=new o,l=h.Get(s.Name);if(!l){var a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallMemberScriptIndex() Error: '"+n+"' "+s.Name+" 指标不存在")}if(Array.isArray(l.Args)&&l.Args.length>0){s.Args=[];for(var u in l.Args){var c=l.Args[u];s.Args.push({Value:c.Value,Name:c.Name})}}Fr.Complier.Log("[JSSymbolData::CallMemberScriptIndex] call script index",s);var d=this.Data.GetDateRange(),f={HQDataType:this.DataType,Symbol:s.Symbol,Name:"",Right:this.Right,Period:s.PeriodID,Data:null,SourceData:null,Callback:function(t,a,i){e.RecvMemberScriptIndexData(t,a,i),e.Execute.RunNextJob()},CallbackParam:s,Async:!0,MaxRequestDataCount:this.MaxRequestDataCount+60,MaxRequestMinuteDayCount:this.MaxRequestMinuteDayCount+2,Arguments:s.Args,IsBeforeData:this.IsBeforeData,NetworkFilter:this.NetworkFilter,KLineRange:d};ji.Execute(l.Script,f,function(t,a){e.ExecuteScriptIndexError(t,a)})},this.CallScriptIndex=function(t){var e=this;if(t.Member)return this.CallMemberScriptIndex(t);if(!(t.Args&&t.Args.length>=2)){var a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallScriptIndex() Error: "+t.FunctionName+" 参数错误")}var i={Job:t,PeriodID:this.Period};if(!this.ReadSymbolArgumentValue(t.Args[0],i)){var a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallScriptIndex() Error: "+i.Error)}if(!this.ReadIndexFunctionValue(t.Args[1],i)){var a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallScriptIndex() Error: "+i.Error)}var r=new o,n=r.Get(i.Name);if(!n){var a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallScriptIndex() "+i.Name+" 指标不存在")}if(i.SytemIndex=n,!this.ReadIndexArgumentValue(t.Args,i)){var a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallScriptIndex() "+i.Name+" 指标参数错误 : "+i.Error+" ")}Fr.Complier.Log("[JSSymbolData::CallScriptIndex] call script index",i);var s=null;if(this.Data&&this.Data.Data.length>0){var h=this.Data.Data[0],l=this.Data.Data[this.Data.Data.length-1];s={Start:{Date:h.Date,Time:h.Time},End:{Date:l.Date,Time:l.Time}}}var u={HQDataType:this.DataType,Symbol:i.Symbol,Name:"",Right:this.Right,Period:i.PeriodID,Data:null,SourceData:null,Callback:function(t,a,i){e.RecvScriptIndexData(t,a,i),e.Execute.RunNextJob()},CallbackParam:i,Async:!0,MaxRequestDataCount:this.MaxRequestDataCount+60,MaxRequestMinuteDayCount:this.MaxRequestMinuteDayCount+2,Arguments:i.Args,IsBeforeData:this.IsBeforeData,NetworkFilter:this.NetworkFilter,KLineRange:s};ji.Execute(i.SytemIndex.Script,u,function(t,a){e.ExecuteScriptIndexError(t,a)})},this.RecvMemberScriptIndexData=function(t,e,a){Fr.Complier.Log("[JSSymbolData::RecvMemberScriptIndexData] ",t,e,a);var i=a.Data.Data,r=t,n=this.Data.FitKLineIndex(i,r,this.Period,e.PeriodID),s=e.Job.Member,o=s.Object.Name,h=(s.Property.Name,{});this.Execute.VarTable.has(o)?h=this.Execute.VarTable.get(o):this.Execute.VarTable.set(o,h);for(var l in n){var u=t[l].Name;e.Period&&(u+="#"+e.Period),h[u]=n[l].Data}},this.RecvScriptIndexData=function(t,e,a){var i=this.GenerateScriptIndexKey(e);Fr.Complier.Log("[JSSymbolData::RecvScriptIndexData] ",t,e,a,i);var r=a.Data.Data,n=t;if(e.Out){for(var s in t){var o=t[s];if(o.Name==e.Out){n=[o];break}}var h=this.Data.FitKLineIndex(r,n,this.Period,e.PeriodID);this.ScriptIndexOutData.set(i,h[0].Data)}else{var h=this.Data.FitKLineIndex(r,n,this.Period,e.PeriodID),l={__Type__:"Object"};for(var s in h){var o=h[s];l[o.Name]=o.Data}this.ScriptIndexOutData.set(i,l)}},this.ExecuteScriptIndexError=function(t,e){var a=e.Job.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallScriptIndex() "+e.Name+" 指标执行错误 : "+t+" ")},this.GetScriptIndexOutData=function(t,e){var a={PeriodID:this.Period};this.ReadSymbolArgumentValue(t[0],a)||this.Execute.ThrowUnexpectedNode(e,"STKINDI() 股票代码错误: "+a.Error),this.ReadIndexFunctionValue(t[1],a)||this.Execute.ThrowUnexpectedNode(e,"STKINDI() 指标错误: "+a.Error);var i=new o,r=i.Get(a.Name);r||this.Execute.ThrowUnexpectedNode(e,"STKINDI() 指标错误: "+a.Name+" 指标不存在"),a.SytemIndex=r,this.ReadIndexArgumentValue(t,a)||this.Execute.ThrowUnexpectedNode(e,"STKINDI()  指标参数错误: "+a.Error);var n=this.GenerateScriptIndexKey(a);return this.ScriptIndexOutData.has(n)?this.ScriptIndexOutData.get(n):null},this.JsonDataToHistoryData=function(t){for(var e=t.data,a=new Array,i=0;i<e.length;++i){var r=new W;r.Date=e[i][0],r.Open=e[i][2],r.YClose=e[i][1],r.Close=e[i][5],r.High=e[i][3],r.Low=e[i][4],r.Vol=e[i][6],r.Amount=e[i][7],e[i].length>8&&(r.Up=e[i][8]),e[i].length>9&&(r.Down=e[i][9]),e[i].length>10&&(r.Stop=e[i][10]),e[i].length>11&&(r.Unchanged=e[i][11]),isNaN(r.Open)||r.Open<=0||a.push(r)}return a},this.JsonDataToMinuteHistoryData=function(t){for(var e=t.data,a=new Array,i=0;i<e.length;++i){var r=new W;r.Date=e[i][0],r.Open=e[i][2],r.YClose=e[i][1],r.Close=e[i][5],r.High=e[i][3],r.Low=e[i][4],r.Vol=e[i][6],r.Amount=e[i][7],r.Time=e[i][8],a.push(r)}for(var n=0;n<a.length;++n){var s=a[n];if(null==s&&coninue,isNaN(s.Open)||s.Open<=0||isNaN(s.High)||s.High<=0||isNaN(s.Low)||s.Low<=0||isNaN(s.Close)||s.Close<=0||isNaN(s.YClose)||s.YClose<=0)if(0==n)s.YClose>0&&(s.Open=s.YClose,s.High=s.YClose,s.Low=s.YClose,s.Close=s.YClose);else for(var o=n-1;o>=0;--o){var h=a[o];if(null==h&&coninue,h.Open>0&&h.High>0&&h.Low>0&&h.Close>0){s.YClose<=0&&(s.YClose=h.Close),s.Open=h.Open,s.High=h.High,s.Low=h.Low,s.Close=h.Close;break}}}return a},this.JsonDataToMinuteData=function(t){var e=new Array;for(var a in t.stock[0].minute){var i=t.stock[0].minute[a],r=new X;r.Close=i.price,r.Open=i.open,r.High=i.high,r.Low=i.low,r.Vol=i.vol,r.Amount=i.amount,r.DateTime=0==a?t.stock[0].date.toString()+" 0925":t.stock[0].date.toString()+" "+i.time.toString(),r.Date=t.stock[0].date,r.Time=i.time,r.Increase=i.increase,r.Risefall=i.risefall,r.AvPrice=i.avprice,e[a]=r}return e},this.JsonDataToMultiDayMinuteData=function(t){var e=t.symbol,a=e.toUpperCase(),i=an.IsSHSZ(a),r=(an.IsChinaFutures(a),[]);for(var n in t.data){var s=[],o=t.data[n],h=o.date,l=o.yclose,u=l,c=null;for(var d in o.minute){var f=o.minute[d];f[2]&&(u=f[2]);var m=new X;m.Close=f[2],m.Open=f[1],m.High=f[3],m.Low=f[4],m.Vol=f[5]/100,m.Amount=f[6],7<f.length&&f[7]>0&&(m.AvPrice=f[7],c=f[7]),m.DateTime=h.toString()+" "+f[0].toString(),m.Date=h,m.Time=f[0],m.Close||(m.Close=u,m.Open=m.High=m.Low=m.Close),!m.AvPrice&&c&&(m.AvPrice=c),m.Close&&l?m.Increase=(m.Close-l)/l*100:m.Increase=null,0==d&&(i&&(m.DateTime=h.toString()+" 0925"),m.IsFristData=!0),m.Open<=0&&(m.Open=null),m.Close<=0&&(m.Close=null),m.AvPrice<=0&&(m.AvPrice=null),m.High<=0&&(m.High=null),m.Low<=0&&(m.Low=null),m.AvPrice<=0&&(m.AvPrice=null),s[d]=m}var C=new Z;C.Data=s,C.YClose=l,C.Close=o.close,C.Date=h,r.push(C)}for(var s=[],n=r.length-1;n>=0;--n){var m=r[n];for(var d in m.Data)s.push(m.Data[d])}return s},this.CODELIKE=function(t){return this.Symbol&&0==this.Symbol.indexOf(t)?1:0},this.NAMELIKE=function(t){return this.Name&&0==this.Name.indexOf(t)?1:0},this.SETCODE=function(){return this.Symbol.indexOf(".sh")?1:(this.Symbol.indexOf(".sz"),0)},this.GetSymbol=function(){return this.Symbol},this.GetName=function(){return this.Name},this.DATE=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e in this.Data.Data){var a=this.Data.Data[e];t[e]=a.Date-19e6}return t},this.YEAR=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e in this.Data.Data){var a=this.Data.Data[e];this.IsNumber(a.Date)?t[e]=parseInt(a.Date/1e4):t[e]=null}return t},this.DAY=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e in this.Data.Data){var a=this.Data.Data[e];this.IsNumber(a.Date)?t[e]=parseInt(a.Date%100):t[e]=null}return t},this.MONTH=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e in this.Data.Data){var a=this.Data.Data[e];this.IsNumber(a.Date)?t[e]=parseInt(a.Date%1e4/100):t[e]=null}return t},this.TIME=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e in this.Data.Data){var a=this.Data.Data[e];this.IsNumber(a.Time)?t[e]=a.Time:t[e]=0}return t},this.WEEK=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;var e=new Date;for(var a in this.Data.Data){var i=this.Data.Data[a];if(t[a]=null,this.IsNumber(i.Date)){var r=parseInt(i.Date/1e4),n=parseInt(i.Date%1e4/100),s=i.Date%100;e.setFullYear(r),e.setMonth(n-1),e.setDate(s),t[a]=e.getDay()}}return t},this.REFDATE=function(t,e){var a=null;if(Array.isArray(e)?e.length>0&&(a=e[e.length-1]):this.IsNumber(e)&&(a=e),null==a)return null;a<5e6&&(a+=19e6);var i=null;for(var r in this.Data.Data)if(this.Data.Data[r].Date==a){i=parseInt(r);break}return null==i||i>=t.length?null:t[i]},this.PERIOD=function(){var t=[5,6,7,11,0,1,2,3,4,5,9];return this.Period>=0&&this.Period<=t.length-1?t[this.Period]:this.Period},this.GetDrawNull=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e in this.Data.Data)t[e]=null;return t},this.SysParam=function(t,e){if(!this.DrawInfo)return[];if(2==t){if(e.IsUsePageData=!0,he.IsNumber(this.DrawInfo.Start))return this.DrawInfo.Start+1}else if(3==t){if(e.IsUsePageData=!0,he.IsNumber(this.DrawInfo.End))return this.DrawInfo.End+1}else{if(4==t){if(e.IsUsePageData=!0,!he.IsNumber(this.DrawInfo.End)||!he.IsNumber(this.DrawInfo.Start))return[];if(!this.Data||!he.IsNonEmptyArray(this.Data.Data))return[];for(var a=null,i=this.DrawInfo.Start;i<=this.DrawInfo.End&&i<this.Data.Data.length;++i){var r=this.Data.Data[i];he.IsNumber(r.High)&&(null==a?a=r.High:a<r.High&&(a=r.High))}return a}if(5==t){if(e.IsUsePageData=!0,!he.IsNumber(this.DrawInfo.End)||!he.IsNumber(this.DrawInfo.Start))return[];if(!this.Data||!he.IsNonEmptyArray(this.Data.Data))return[];for(var n=null,i=this.DrawInfo.Start;i<=this.DrawInfo.End&&i<this.Data.Data.length;++i){var r=this.Data.Data[i];he.IsNumber(r.Low)&&(null==n?n=r.Low:n>r.Low&&(n=r.Low))}return n}}return[]}}function Ui(t,e){var a=this;this.AST=t,this.ErrorHandler=new ki,this.VarTable=new _r.default,this.OutVarTable=[],this.Arguments=[],this.ErrorCallback,this.GetEventCallback,this.IsUsePageData=!1,this.IndexCtrl,this.ConstVarTable=new _r.default([["CLOSE",null],["VOL",null],["OPEN",null],["HIGH",null],["LOW",null],["AMOUNT",null],["C",null],["V",null],["O",null],["H",null],["L",null],["AMO",null],["VOLR",null],["VOLINSTK",null],["OPI",null],["QHJSJ",null],["SETTLE",null],["ZSTJJ",null],["ISEQUAL",null],["ISUP",null],["ISDOWN"],["DATE",null],["YEAR",null],["MONTH",null],["PERIOD",null],["WEEK",null],["TIME",null],["DAY",null],["INDEXA",null],["INDEXC",null],["INDEXH",null],["INDEXL",null],["INDEXO",null],["INDEXV",null],["INDEXADV",null],["INDEXDEC",null],["ADVANCE",null],["DECLINE",null],["FROMOPEN",null],["TOTALFZNUM",null],["CURRBARSCOUNT",null],["TOTALBARSCOUNT",null],["ISLASTBAR",null],["BARSTATUS",null],["BARPOS",null],["CAPITAL",null],["TOTALCAPITAL",null],["EXCHANGE",null],["SETCODE",null],["CODE",null],["STKNAME",null],["TQFLAG",null],["HYBLOCK",null],["DYBLOCK",null],["GNBLOCK",null],["FGBLOCK",null],["ZSBLOCK",null],["ZHBLOCK",null],["ZDBLOCK",null],["HYZSCODE",null],["GNBLOCKNUM",null],["FGBLOCKNUM",null],["ZSBLOCKNUM",null],["ZHBLOCKNUM",null],["ZDBLOCKNUM",null],["HYSYL",null],["HYSJL",null],["DRAWNULL",null],["NULL",null],["MACHINEDATE",null],["MACHINETIME",null],["MACHINEWEEK",null]]),this.SymbolData=new Xi(this.AST,e,this),this.Algorithm=new Gi(this.ErrorHandler,this.SymbolData),this.Draw=new Wi(this.ErrorHandler,this.SymbolData),this.JobList=[],this.UpdateUICallback=null,this.CallbackParam=null,this.IsSectionMode=!1,e&&(e.Callback&&(this.UpdateUICallback=e.Callback),e.CallbackParam&&(this.CallbackParam=e.CallbackParam,this.CallbackParam.HQChart&&(this.GetEventCallback=function(t){return a.CallbackParam.HQChart.GetEventCallback(t)})),e.Arguments&&(this.Arguments=e.Arguments),e.IsSectionMode&&(this.IsSectionMode=e.IsSectionMode),e.Self&&(this.IndexCtrl=e.Self)),this.Execute=function(){this.OutVarTable=[],this.VarTable=new _r.default,Fr.Complier.Log("[JSExecute::Execute] Load Arguments",this.Arguments);for(var t in this.Arguments){var e=this.Arguments[t];this.VarTable.set(e.Name,e.Value)}this.RunNextJob()},this.RunNextJob=function(){if(!(this.JobList.length<=0)){Fr.Complier.Log("[JSExecute::Execute] JobList",this.JobList);var t=this.JobList.shift();switch(t.ID){case yn.JOB_DOWNLOAD_SYMBOL_DATA:return this.SymbolData.GetSymbolData();case yn.JOB_DOWNLOAD_SYMBOL_PERIOD_DATA:return this.SymbolData.GetSymbolPeriodData(t);case yn.JOB_DOWNLOAD_INDEX_DATA:return this.SymbolData.GetIndexData();case yn.JOB_DOWNLOAD_LATEST_INDEX_DATA:return this.SymbolData.GetLatestIndexData();case yn.JOB_DOWNLOAD_INDEX_INCREASE_DATA:return this.SymbolData.GetIndexIncreaseData(t);case yn.JOB_DOWNLOAD_SYMBOL_LATEST_DATA:return this.SymbolData.GetLatestData(t);case yn.JOB_DOWNLOAD_VOLR_DATA:return this.SymbolData.GetVolRateData(t);case yn.JOB_DOWNLOAD_OTHER_SYMBOL_DATA:return this.SymbolData.GetOtherSymbolData(t);case yn.JOB_DOWNLOAD_RELEASE_DATE_DATA:return this.SymbolData.GetCompanyReleaseDate(t.ID);case yn.JOB_DOWNLOAD_MARGIN_BALANCE:case yn.JOB_DOWNLOAD_MARGIN_RATE:case yn.JOB_DOWNLOAD_MARGIN_BUY_BALANCE:case yn.JOB_DOWNLOAD_MARGIN_BUY_AMOUNT:case yn.JOB_DOWNLOAD_MARGIN_BUY_REPAY:case yn.JOB_DOWNLOAD_MARGIN_BUY_NET:case yn.JOB_DOWNLOAD_MARGIN_SELL_BALANCE:case yn.JOB_DOWNLOAD_MARGIN_SELL_VOLUME:case yn.JOB_DOWNLOAD_MARGIN_SELL_REPAY:case yn.JOB_DOWNLOAD_MARGIN_SELL_NET:return this.SymbolData.GetMarginData(t.ID);case yn.JOB_DOWNLOAD_NEWS_ANALYSIS_NEGATIVE:case yn.JOB_DOWNLOAD_NEWS_ANALYSIS_RESEARCH:case yn.JOB_DOWNLOAD_NEWS_ANALYSIS_INTERACT:case yn.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE:case yn.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE2:case yn.JOB_DOWNLOAD_NEWS_ANALYSIS_TRUSTHOLDER:case yn.JOB_DOWNLOAD_NEWS_ANALYSIS_BLOCKTRADING:case yn.JOB_DOWNLOAD_NEWS_ANALYSIS_COMPANYNEWS:case yn.JOB_DOWNLOAD_NEWS_ANALYSIS_TOPMANAGERS:case yn.JOB_DOWNLOAD_NEWS_ANALYSIS_PLEDGE:return this.SymbolData.GetNewsAnalysisData(t.ID);case yn.JOB_DOWNLOAD_HK_TO_SHSZ:return this.SymbolData.GetHKToSHSZData(t);case yn.JOB_DOWNLOAD_SECTION_SF:return this.SymbolData.GetSectionFinanceData(t);case yn.JOB_DOWNLOAD_FINONE:return this.SymbolData.GetFinOne(t);case yn.JOB_DOWNLOAD_FINVALUE:return this.SymbolData.GetFinValue(t);case yn.JOB_DOWNLOAD_FINANCE:return this.SymbolData.GetFinance(t);case yn.JOB_DOWNLOAD_GPJYVALUE:return this.SymbolData.GetGPJYValue(t);case yn.JOB_DOWNLOAD_SCJYVALUE:return this.SymbolData.GetSCJYValue(t);case yn.JOB_DOWNLOAD_VARIANT:return this.SymbolData.GetVariantData(t);case yn.JOB_CUSTOM_VARIANT_DATA:return this.SymbolData.GetCustomVariantData(t);case yn.JOB_CUSTOM_FUNCTION_DATA:return this.SymbolData.GetCustomFunctionData(t);case yn.JOB_DOWNLOAD_CUSTOM_API_DATA:return this.SymbolData.DownloadCustomAPIData(t);case yn.JOB_EXECUTE_INDEX:return this.SymbolData.CallScriptIndex(t);case yn.JOB_RUN_SCRIPT:return this.Run()}}},this.ReadSymbolData=function(t,e){switch(t){case"CLOSE":case"C":case"VOL":case"V":case"OPEN":case"O":case"HIGH":case"H":case"LOW":case"L":case"AMOUNT":case"AMO":case"OPI":case"VOLINSTK":case"SETTLE":case"QHJSJ":case"ZSTJJ":case"ISEQUAL":case"ISUP":case"ISDOWN":return this.SymbolData.GetSymbolCacheData(t);case"VOLR":return this.SymbolData.GetVolRateCacheData(e);case"INDEXA":case"INDEXC":case"INDEXH":case"INDEXH":case"INDEXO":case"INDEXV":case"INDEXL":case"INDEXADV":case"INDEXDEC":return this.SymbolData.GetIndexCacheData(t);case"CURRBARSCOUNT":return this.SymbolData.GetCurrBarsCount();case"BARPOS":return this.SymbolData.GetBarPos();case"TOTALBARSCOUNT":return this.SymbolData.GetTotalBarsCount();case"TOTALFZNUM":return this.SymbolData.GetTotalTradeMinuteCount();case"ISLASTBAR":return this.SymbolData.GetIsLastBar();case"BARSTATUS":return this.SymbolData.GetBarStatus();case"TOTALCAPITAL":case"CAPITAL":case"EXCHANGE":case"HYBLOCK":case"DYBLOCK":case"GNBLOCK":case"FGBLOCK":case"ZSBLOCK":case"ZHBLOCK":case"ZDBLOCK":case"HYZSCODE":case"GNBLOCKNUM":case"FGBLOCKNUM":case"ZSBLOCKNUM":case"ZHBLOCKNUM":case"ZDBLOCKNUM":case"HYSYL":case"HYSJL":return this.SymbolData.GetStockCacheData({VariantName:t,Node:e});case"SETCODE":return this.SymbolData.SETCODE();case"CODE":return this.SymbolData.GetSymbol();case"STKNAME":return this.SymbolData.GetName();case"TIME":return this.SymbolData.TIME();case"DATE":return this.SymbolData.DATE();case"YEAR":return this.SymbolData.YEAR();case"MONTH":return this.SymbolData.MONTH();case"WEEK":return this.SymbolData.WEEK();case"DAY":return this.SymbolData.DAY();case"PERIOD":return this.SymbolData.PERIOD();case"FROMOPEN":return this.SymbolData.GetLatestIndexCacheData("FROMOPEN");case"DRAWNULL":case"NULL":return this.SymbolData.GetDrawNull();case"ADVANCE":case"DECLINE":return this.SymbolData.GetIndexIncreaseCacheData(t,this.SymbolData.Symbol,e);case"TQFLAG":return this.SymbolData.Right;case"MACHINEDATE":var a=new Date;return 1e4*a.getFullYear()+1*a.getMonth()*100+a.getDate()-19e6;case"MACHINETIME":var a=new Date;return 1e4*a.getHours()+1*a.getMinutes()*100+a.getSeconds();case"MACHINEWEEK":var a=new Date;return a.getDay()}},this.ReadCustomVariant=function(t,e){return this.SymbolData.GetStockCacheData({VariantName:t,Node:e})},this.ReadVariable=function(t,e){if(this.ConstVarTable.has(t)){var a=this.ConstVarTable.get(t);return null==a&&(a=this.ReadSymbolData(t,e),this.ConstVarTable.set(t,a)),a}if(mn.IsCustomVariant(t))return this.ReadCustomVariant(t,e);if(this.VarTable.has(t))return this.VarTable.get(t);if(t.indexOf("#")>0){var i=t.split("#");return this.SymbolData.GetSymbolPeriodCacheData(i[0],i[1])}if(0==t.indexOf("COLOR")){var r=ji.ColorVarToRGB(t);if(r)return r}return this.ThrowUnexpectedNode(e,"变量"+t+"不存在",t),null},this.ReadMemberVariable=function(t){var e=t.Object,a=t.Property,i=void 0;if(!(i=e.Type==gn.BinaryExpression||e.Type==gn.LogicalExpression?this.VisitBinaryExpression(e):e.Type==gn.CallExpression?this.VisitCallExpression(e):this.GetNodeValue(e)))return null;var r=i[a.Name];return r||null},this.SingleDataToArrayData=function(t){for(var e=this.SymbolData.Data.Data.length,a=[],i=0;i<e;++i)a[i]=t;return a},this.RunAST=function(){this.AST||this.ThrowError(),this.AST.Body||this.ThrowError();for(var t=0;t<this.AST.Body.length;++t){var e=this.AST.Body[t];if(this.VisitNode(e),e.Type==gn.ExpressionStatement&&e.Expression)if(e.Expression.Type==gn.AssignmentExpression){if(":"==e.Expression.Operator&&e.Expression.Left){var a=e.Expression,i=a.Left.Name,r=this.VarTable.get(i),n=0;if(r&&"object"==(void 0===r?"undefined":(0,gr.default)(r))&&"Object"==r.__Type__)n=1e3;else if(!this.IsSectionMode&&!Array.isArray(r))if("string"==typeof r){var s=parseFloat(r);he.IsNumber(s)?r=this.SingleDataToArrayData(s):(r=this.SingleDataToArrayData(r),n=1001)}else r=this.SingleDataToArrayData(r);this.OutVarTable.push({Name:i,Data:r,Type:n})}}else if(e.Expression.Type==gn.CallExpression){var o=e.Expression;if(this.Draw.IsDrawFunction(o.Callee.Name)){var h=o.Draw;h.Name=o.Callee.Name,this.OutVarTable.push({Name:h.Name,Draw:h,Type:1})}else{var l=o.Out;f="__temp_c_"+o.Callee.Name+"_"+t+"__";var n=0;Array.isArray(l)||(l=this.SingleDataToArrayData(l)),this.OutVarTable.push({Name:f,Data:l,Type:n,NoneName:!0})}}else if(e.Expression.Type==gn.Identifier){var u=e.Expression.Name,c=this.ReadVariable(u,e.Expression),n=0;c&&"object"==(void 0===c?"undefined":(0,gr.default)(c))&&"Object"==c.__Type__?n=1e3:this.IsSectionMode||Array.isArray(c)||(c="string"==typeof c?this.SingleDataToArrayData(parseFloat(c)):this.SingleDataToArrayData(c)),u="__temp_i_"+t+"__",this.OutVarTable.push({Name:u,Data:c,Type:n,NoneName:!0})}else if(e.Expression.Type==gn.Literal){var d=e.Expression.Value;he.IsString(d)&&d.indexOf("$")>0&&(d=this.SymbolData.GetOtherSymolCacheData({Literal:d})),f="__temp_li_"+t+"__";var n=0;this.OutVarTable.push({Name:f,Data:d,Type:n,NoneName:!0})}else if(e.Expression.Type==gn.BinaryExpression){var f="__temp_b_"+t+"__",m=e.Expression.Out,n=0;Array.isArray(m)||(m=this.SingleDataToArrayData(m)),this.OutVarTable.push({Name:f,Data:m,Type:n,NoneName:!0})}else if(e.Expression.Type==gn.LogicalExpression){var f="__temp_l_"+t+"__",C=e.Expression.Out,n=0;Array.isArray(C)||(C=this.SingleDataToArrayData(C)),this.OutVarTable.push({Name:f,Data:C,Type:n,NoneName:!0})}else if(e.Expression.Type==gn.SequenceExpression){for(var p=void 0,D=void 0,v=void 0,g=void 0,S=!1,T=!1,y=!1,I=!1,x=!1,L=!1,M=!0,_=!1,b=!1,w=!1,F=!1,E=!0,A=!1,N=!1,O=!1,P=-1,R=-1,k=-1,B=null,Y=0;Y<e.Expression.Expression.length;++Y){var H=e.Expression.Expression[Y];if(H.Type==gn.AssignmentExpression&&":"==H.Operator&&H.Left){if(0==Y){p=H.Left.Name;var V=this.VarTable.get(p);Array.isArray(V)||(V=this.SingleDataToArrayData(V),this.VarTable.set(p,V))}}else if(H.Type==gn.Identifier){var G=H.Name;if("COLORSTICK"===G)S=!0;else if("POINTDOT"===G)T=!0;else if("CIRCLEDOT"===G)y=!0;else if("DOTLINE"===G)b=!0;else if("LINESTICK"===G)I=!0;else if("STICK"===G)x=!0;else if("VOLSTICK"===G)L=!0;else if("DRAWABOVE"===G)A=!0;else if("DRAWCENTER"===G)N=!0;else if("DRAWBELOW"==G)O=!0;else if(0==G.indexOf("COLOR"))v=G;else if(0==G.indexOf("LINETHICK"))g=G;else if("ALIGN0"==G)P=0;else if("ALIGN1"==G)P=1;else if("ALIGN2"==G)P=2;else if("VALIGN0"==G)R=0;else if("VALIGN1"==G)R=1;else if("VALIGN2"==G)R=2;else if(0==G.indexOf("NODRAW"))M=!1;else if(0==G.indexOf("EXDATA"))_=!0;else if(0==G.indexOf("LINEOVERLAY"))w=!0;else if(0==G.indexOf("NOTEXT")||0==G.indexOf("NOTITLE"))E=!1;else if(0==G.indexOf("FONTSIZE")){var W=G.replace("FONTSIZE","");k=parseInt(W)}else if(0==Y){p=H.Name;var X=this.ReadVariable(p,H);Array.isArray(X)||(X=this.SingleDataToArrayData(X)),p="__temp_si_"+t+"__",F=!0,this.VarTable.set(p,X)}}else if(H.Type==gn.Literal){if(0==Y){var U=this.SingleDataToArrayData(H.Value);p=H.Value.toString(),this.VarTable.set(p,U)}}else if(H.Type==gn.CallExpression)if(0==Y)if(this.Draw.IsDrawFunction(H.Callee.Name))D=H.Draw,D.Name=H.Callee.Name;else{var K=H.Out;p="__temp_sc_"+H.Callee.Name+"_"+t+"__",F=!0,this.VarTable.set(p,K)}else if("RGB"==H.Callee.Name||"RGBA"==H.Callee.Name)v=H.Out;else if("SOUND"==H.Callee.Name){this.GetSoundEvent();p=null}else if("ICON"==H.Callee.Name){var j=this.VarTable.get(p);j&&(D=this.GetOutIconData(j,H.Draw))&&(D.Name=H.Callee.Name),p=null}else"BACKGROUND"==H.Callee.Name&&(B=H.Draw,p=null);else if(H.Type==gn.BinaryExpression&&0==Y){p="__temp_sb_"+t+"__";var z=H.Out;F=!0,this.VarTable.set(p,z)}}if(T&&p){var J=this.VarTable.get(p);Array.isArray(J)||(J=this.SingleDataToArrayData(J));var q={Name:p,Data:J,Radius:$r.POINTDOT.Radius,Type:3};v&&(q.Color=v),g&&(q.LineWidth=g),this.OutVarTable.push(q)}else if(y&&p){var Z=this.VarTable.get(p);Array.isArray(Z)||(Z=this.SingleDataToArrayData(Z));var Q={Name:p,Data:Z,Radius:$r.CIRCLEDOT.Radius,Type:3};v&&(Q.Color=v),g&&(Q.LineWidth=g),this.OutVarTable.push(Q)}else if(I&&p){var $=this.VarTable.get(p),tt={Name:p,Data:$,Type:4};v&&(tt.Color=v),g&&(tt.LineWidth=g),this.OutVarTable.push(tt)}else if(x&&p){var et=this.VarTable.get(p),at={Name:p,Data:et,Type:5};v&&(at.Color=v),g&&(at.LineWidth=g),this.OutVarTable.push(at)}else if(L&&p){var it=this.VarTable.get(p),rt={Name:p,Data:it,Type:6};v&&(rt.Color=v),this.OutVarTable.push(rt)}else if(S&&p){var nt=this.VarTable.get(p),st={Name:p,Data:nt,Color:v,Type:2};g&&(st.LineWidth=g),v&&(st.Color=v),this.OutVarTable.push(st)}else if(p&&v){var ot=this.VarTable.get(p);Array.isArray(ot)||(ot=this.SingleDataToArrayData(ot));var ht={Name:p,Data:ot,Color:v,Type:0};g&&(ht.LineWidth=g),0==M&&(ht.IsShow=!1),1==_&&(ht.IsExData=!0),1==b&&(ht.IsDotLine=!0),1==w&&(ht.IsOverlayLine=!0),1==F&&(ht.NoneName=!0),0==E&&(ht.IsShowTitle=!1),this.OutVarTable.push(ht)}else if(D){var lt={Name:D.Name,Draw:D,Type:1};v&&(lt.Color=v),1==b&&(lt.IsDotLine=!0),g&&(lt.LineWidth=g),A&&(lt.IsDrawAbove=!0),N&&(lt.IsDrawCenter=!0),O&&(lt.IsDrawBelow=!0),P>=0&&(lt.DrawAlign=P),R>=0&&(lt.DrawVAlign=R),k>0&&(lt.DrawFontSize=k),B&&(lt.Background=B),this.OutVarTable.push(lt)}else if(p){var ut=this.VarTable.get(p),ct={Name:p,Data:ut,Type:0};v&&(ct.Color=v),g&&(ct.LineWidth=g),0==M&&(ct.IsShow=!1),1==_&&(ct.IsExData=!0),1==b&&(ct.IsDotLine=!0),1==w&&(ct.IsOverlayLine=!0),0==E&&(ct.IsShowTitle=!1),this.OutVarTable.push(ct)}}}return Fr.Complier.Log("[JSExecute::Run]",this.VarTable),this.OutVarTable},this.GetOutIconData=function(t,e){if(Array.isArray(t)){for(var a=0;a<t.length&&a<e.DrawData.length;++a){t[a]<=0&&(e.DrawData[a]=null)}return e}return t?e:null},this.GetSoundEvent=function(){return this.GetEventCallback?this.GetEventCallback(Nr.ON_PLAY_SOUND):null},this.Run=function(){try{var t=this.RunAST();Fr.Complier.Log("[JSComplier.Run] execute finish",t),this.IndexCtrl&&(this.IndexCtrl.Status=0),this.UpdateUICallback&&(Fr.Complier.Log("[JSComplier.Run] invoke UpdateUICallback."),this.CallbackParam&&this.CallbackParam.Job&&this.CallbackParam.Job.ID==yn.JOB_EXECUTE_INDEX?this.UpdateUICallback(t,this.CallbackParam,this.SymbolData):(this.CallbackParam&&this.CallbackParam.Self&&"ScriptIndexConsole"===this.CallbackParam.Self.ClassName&&(this.CallbackParam.JSExecute=this),1==this.IsUsePageData&&(this.CallbackParam.Self.IsUsePageData=!0),this.UpdateUICallback(t,this.CallbackParam)))}catch(t){Fr.Complier.Log(t),t.Job?(Fr.Complier.Log("[JSComplier.Run] download job and reexectue",t.Job),this.JobList.push(t.Job),this.JobList.push({ID:yn.JOB_RUN_SCRIPT}),this.Execute()):this.ErrorCallback&&(this.IndexCtrl&&(this.IndexCtrl.Status=0),this.ErrorCallback(t,this.CallbackParam))}},this.VisitNode=function(t){switch(t.Type){case gn.SequenceExpression:this.VisitSequenceExpression(t);break;case gn.ExpressionStatement:this.VisitNode(t.Expression);break;case gn.AssignmentExpression:this.VisitAssignmentExpression(t);break;case gn.BinaryExpression:case gn.LogicalExpression:this.VisitBinaryExpression(t);break;case gn.CallExpression:this.VisitCallExpression(t)}},this.VisitSequenceExpression=function(t){for(var e in t.Expression){var a=t.Expression[e];this.VisitNode(a)}},this.VisitCallExpression=function(t){var e=t.Callee.Name,a=[];for(var i in t.Arguments){var r=t.Arguments[i],n=void 0;n=r.Type==gn.BinaryExpression||r.Type==gn.LogicalExpression?this.VisitBinaryExpression(r):r.Type==gn.CallExpression?this.VisitCallExpression(r):this.GetNodeValue(r),a.push(n)}if(mn.IsCustomFunction(e)){var s=this.Algorithm.CallCustomFunction(e,a,this.SymbolData,t);return t.Out=[],t.Draw=null,s&&(s.Out&&(t.Out=s.Out),s.Draw&&(t.Draw=s.Draw)),t.Out}switch(e){case"DYNAINFO":t.Out=this.SymbolData.GetLatestCacheData(a[0]);break;case"STICKLINE":t.Draw=this.Draw.STICKLINE(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"DRAWTEXT":t.Draw=this.Draw.DRAWTEXT(a[0],a[1],a[2]),t.Out=[];break;case"DRAWTEXT_FIX":t.Draw=this.Draw.DRAWTEXT_FIX(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"SUPERDRAWTEXT":t.Draw=this.Draw.SUPERDRAWTEXT(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"DRAWICON":t.Draw=this.Draw.DRAWICON(a[0],a[1],a[2]),t.Out=[];break;case"ICON":t.Draw=this.Draw.ICON(a[0],a[1]),t.Out=[];break;case"BACKGROUND":t.Draw=this.Draw.BACKGROUND(a[0],a[1],a[2],a[3],a[4],a[5]),t.Out=[];break;case"DRAWLINE":t.Draw=this.Draw.DRAWLINE(a[0],a[1],a[2],a[3],a[4]),t.Out=t.Draw.DrawData;break;case"DRAWBAND":t.Draw=this.Draw.DRAWBAND(a[0],a[1],a[2],a[3]),t.Out=[];break;case"FILLRGN":a.length>=4?t.Draw=this.Draw.FILLRGN2(a):t.Draw=this.Draw.FILLRGN(a[0],a[1],a[2]),t.Out=[];break;case"FLOATRGN":t.Draw=this.Draw.FLOATRGN(a),t.Out=[];break;case"FILLTOPRGN":t.Draw=this.Draw.FILLBGRGN(1,a),t.Out=[];break;case"FILLBOTTOMRGN":t.Draw=this.Draw.FILLBGRGN(0,a),t.Out=[];break;case"FILLVERTICALRGN":t.Draw=this.Draw.FILLVERTICALRGN(a),t.Out=[];break;case"DRAWKLINE":case"DRAWKLINE1":t.Draw=this.Draw.DRAWKLINE(a[0],a[1],a[2],a[3]),t.Out=[];break;case"DRAWKLINE_IF":t.Draw=this.Draw.DRAWKLINE_IF(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"DRAWCOLORKLINE":t.Draw=this.Draw.DRAWCOLORKLINE(a[0],a[1],a[2]),t.Out=[];break;case"PLOYLINE":case"POLYLINE":t.Draw=this.Draw.POLYLINE(a[0],a[1]),t.Out=t.Draw.DrawData;break;case"DRAWNUMBER":t.Draw=this.Draw.DRAWNUMBER(a[0],a[1],a[2]),t.Out=t.Draw.DrawData.Value;break;case"DRAWNUMBER_FIX":t.Draw=this.Draw.DRAWNUMBER_FIX(a[0],a[1],a[2],a[3],a[4]),t.Out=t.Draw.DrawData.Value;break;case"DRAWCHANNEL":t.Draw=this.Draw.DRAWCHANNEL(a[0],a[1],a[2],a[3],a[4],a[5],a[6]),t.Out=[];break;case"RGB":t.Out=this.Draw.RGB(a[0],a[1],a[2]);break;case"RGBA":t.Out=this.Draw.RGBA(a[0],a[1],a[2],a[3]);break;case"PARTLINE":t.Draw=this.Draw.PARTLINE(a),t.Out=[];break;case"DRAWGBK":t.Draw=this.Draw.DRAWGBK(a[0],a[1],a[2],a[3]),t.Out=[];break;case"DRAWGBK2":t.Draw=this.Draw.DRAWGBK2(a[0],a[1],a[2],a[3]),t.Out=[];break;case"DRAWTEXT_LINE":t.Draw=this.Draw.DRAWTEXT_LINE(a[0],a[1],a[2],a[3],a[4],a[5],a[6]),t.Out=[];break;case"DRAWRECTREL":t.Draw=this.Draw.DRAWRECTREL(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"DRAWTEXTREL":t.Draw=this.Draw.DRAWTEXTREL(a[0],a[1],a[2]),t.Out=[];break;case"DRAWTEXTABS":t.Draw=this.Draw.DRAWTEXTABS(a[0],a[1],a[2]),t.Out=[];break;case"DRAWOVERLAYLINE":t.Draw=this.Draw.DRAWOVERLAYLINE(a[0],a[1],a[2]),t.Out=t.Draw.DrawData.Data;break;case"DRAWSL":t.Draw=this.Draw.DRAWSL(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"VERTLINE":t.Draw=this.Draw.VERTLINE(a[0],a[1]),t.Out=t.Draw.DrawData.Data;break;case"HORLINE":t.Draw=this.Draw.HORLINE(a[0],a[1],a[2],a[3]),t.Out=t.Draw.DrawData.Data;break;case"CODELIKE":t.Out=this.SymbolData.CODELIKE(a[0]);break;case"NAMELIKE":case"NAMEINCLUDE":t.Out=this.SymbolData.NAMELIKE(a[1]);break;case"REFDATE":t.Out=this.SymbolData.REFDATE(a[0],a[1]);break;case"FINANCE":case"FINVALUE":t.Out=this.SymbolData.GetStockCacheData({FunctionName:e,Args:a,ArgCount:1,Node:t});break;case"FINONE":case"GPJYVALUE":case"SCJYVALUE":t.Out=this.SymbolData.GetStockCacheData({FunctionName:e,Args:a,ArgCount:3,Node:t});break;case"MARGIN":t.Out=this.SymbolData.GetMarginCacheData(a[0],t);break;case"HK2SHSZ":t.Out=this.SymbolData.GetHKToSHSZCacheData(a[0],t);break;case"NEWS":t.Out=this.SymbolData.GetNewsAnalysisCacheData(a[0],t);break;case"UPCOUNT":case"DOWNCOUNT":t.Out=this.SymbolData.GetIndexIncreaseCacheData(e,a[0],t);break;case"SF":t.Out=this.SymbolData.GetSectionFinanceCacheData(a[0],a[1],a[2],t);break;case"LOADAPIDATA":t.Out=this.SymbolData.GetCustomApiData(a);break;case"STKINDI":t.Out=this.SymbolData.GetScriptIndexOutData(a,t);break;case"SOUND":t.Draw=this.Draw.SOUND(a[0]),t.Out=[];break;case"PLAYSOUND":t.Draw=this.Draw.PLAYSOUND(a[0],a[1]),t.Out=[];break;case"CLOSE":case"C":case"VOL":case"V":case"OPEN":case"O":case"HIGH":case"H":case"LOW":case"L":case"AMOUNT":case"AMO":t.Out=this.SymbolData.GetOtherSymolCacheData({FunctionName:e,Args:a});break;case"INBLOCK":t.Out=this.SymbolData.IsInBlock(a[0],t);break;case"COVER_C":case"COVER_O":case"COVER_H":case"COVER_L":case"COVER_A":case"COVER_V":return 2==a.length?this.SymbolData.GetSymbolPeriodCacheData2(Ri.GetConvertValueName(e),a[0],a[1]):this.SymbolData.GetSymbolPeriodCacheData(Ri.GetConvertValueName(e),a[0]);case"SYSPARAM":return this.SymbolData.SysParam(a[0],this);default:t.Out=this.Algorithm.CallFunction(e,a,t,this.SymbolData)}return t.Out},this.VisitAssignmentExpression=function(t){var e=t.Left;e.Type!=gn.Identifier&&this.ThrowUnexpectedNode(t);var a=e.Name,i=t.Right,r=null;if(i.Type==gn.BinaryExpression||i.Type==gn.LogicalExpression)r=this.VisitBinaryExpression(i);else if(i.Type==gn.CallExpression)r=this.VisitCallExpression(i);else if(i.Type==gn.Literal)r=i.Value,he.IsString(r)&&i.Value.indexOf("$")>0&&(r=this.SymbolData.GetOtherSymolCacheData({Literal:r}));else if(i.Type==gn.Identifier)r=this.ReadVariable(i.Name,i);else if(i.Type==gn.MemberExpression)r=this.ReadMemberVariable(i);else if(i.Type==gn.UnaryExpression)if("-"==i.Operator){var n=this.GetNodeValue(i.Argument);r=this.Algorithm.Subtract(0,n)}else r=i.Argument.Value;Tn&&Fr.Complier.Log("[JSExecute::VisitAssignmentExpression]",a," = ",r),this.VarTable.set(a,r)},this.VisitBinaryExpression=function(t){var e=[];e.push(t);for(var a=null;0!=e.length;)if(a=e[e.length-1],a.Left&&t!=a.Left&&t!=a.Right)e.push(a.Left);else if(a.Right&&t!=a.Right)e.push(a.Right);else{var i=e.pop();if(i.Type==gn.BinaryExpression){var r=this.GetNodeValue(i.Left),n=this.GetNodeValue(i.Right);switch(Tn&&Fr.Complier.Log("[JSExecute::VisitBinaryExpression] BinaryExpression",i,r,n),i.Out=null,i.Operator){case"-":i.Out=this.Algorithm.Subtract(r,n);break;case"*":i.Out=this.Algorithm.Multiply(r,n);break;case"/":i.Out=this.Algorithm.Divide(r,n);break;case"+":i.Out=this.Algorithm.Add(r,n);break;case">":i.Out=this.Algorithm.GT(r,n);break;case">=":i.Out=this.Algorithm.GTE(r,n);break;case"<":i.Out=this.Algorithm.LT(r,n);break;case"<=":i.Out=this.Algorithm.LTE(r,n);break;case"==":case"=":i.Out=this.Algorithm.EQ(r,n);break;case"!=":case"<>":i.Out=this.Algorithm.NEQ(r,n)}Tn&&Fr.Complier.Log("[JSExecute::VisitBinaryExpression] BinaryExpression",i)}else if(i.Type==gn.LogicalExpression){var s=this.GetNodeValue(i.Left),o=this.GetNodeValue(i.Right);switch(Tn&&Fr.Complier.Log("[JSExecute::VisitBinaryExpression] LogicalExpression",i,s,o),i.Out=null,i.Operator){case"&&":case"AND":i.Out=this.Algorithm.And(s,o);break;case"||":case"OR":i.Out=this.Algorithm.Or(s,o)}Tn&&Fr.Complier.Log("[JSExecute::VisitBinaryExpression] LogicalExpression",i)}t=a}return t.Out},this.GetNodeValue=function(t){switch(t.Type){case gn.Literal:return t.Value;case gn.UnaryExpression:if("-"==t.Operator){var e=this.GetNodeValue(t.Argument);return this.Algorithm.Subtract(0,e)}return t.Argument.Value;case gn.Identifier:return this.ReadVariable(t.Name,t);case gn.BinaryExpression:case gn.LogicalExpression:return t.Out;case gn.CallExpression:return this.VisitCallExpression(t);case gn.MemberExpression:return this.ReadMemberVariable(t);default:this.ThrowUnexpectedNode(t)}},this.ThrowUnexpectedNode=function(t,e,a){var i=t.Marker,r=e||"执行异常";return this.ErrorHandler.ThrowError(i.Index,i.Line,i.Column,r,a)},this.ThrowDownloadSF=function(t,e,a){var i=t.Marker,r=a;return this.ErrorHandler.ThrowDownloadJob(i.Index,i.Line,i.Column,r,e)},this.ThrowError=function(){}}function Ki(t,e){this.AST=t,this.ErrorHandler=new ki,this.ErrorCallback,this.UpdateUICallback,this.CallbackParam,this.JobList=[],this.VarTable=new _r.default,this.OutVarTable=[],this.ConstVarTable=new _r.default([["CLOSE","收盘价"],["VOL","成交量"],["OPEN","开盘价"],["HIGH","最高价"],["LOW","最低价"],["AMOUNT","成交量"],["C","收盘价"],["V","成交量"],["O","开盘价"],["H","最高价"],["L","最低价"],["AMO","成交量"],["VOLR","量比"],["VOLINSTK","持仓量"],["OPI","持仓量"],["ZSTJJ","均价"],["QHJSJ","结算价"],["SETTLE","结算价"],["DATE","日期"],["YEAR","年份"],["MONTH","月份"],["PERIOD","周期"],["WEEK","星期"],["TIME","时间"],["INDEXA","大盘成交额"],["INDEXC","大盘收盘价"],["INDEXH","大盘最高价"],["INDEXL","大盘最低价"],["INDEXO","大盘开盘价"],["INDEXV","大盘成交量"],["INDEXADV","大盘上涨家数"],["INDEXDEC","´大盘下跌家数"],["ADVANCE","上涨家数"],["DECLINE","下跌家数"],["FROMOPEN","当前离开盘分钟数"],["TOTALFZNUM","总分钟数"],["CURRBARSCOUNT","到最后交易的周期"],["TOTALBARSCOUNT","总的周期数"],["ISLASTBAR","是否是最后一个周期"],["BARSTATUS","数据位置状态"],["CAPITAL","当前流通股本(手)"],["TOTALCAPITAL","当前总股本(手)"],["EXCHANGE","换手率"],["SETCODE","市场类型"],["CODE","品种代码"],["STKNAME","品种名称"],["TQFLAG","当前复权状态"],["HYBLOCK","所属行业"],["DYBLOCK","所属地域"],["GNBLOCK","所属概念"],["FGBLOCK","所属风格板块"],["ZSBLOCK","所属指数板块"],["ZHBLOCK","所属组合板块"],["ZDBLOCK","所属自定义板块"],["HYZSCODE","所属行业的板块指数代码"],["GNBLOCKNUM","所属概念板块的个数"],["FGBLOCKNUM","所属风格板块的个数"],["ZSBLOCKNUM","所属指数板块的个数"],["ZHBLOCKNUM","所属组合板块的个数"],["ZDBLOCKNUM","所属自定义板块的个数"],["HYSYL","指数市盈率或个股所属行业的市盈率"],["HYSJL","指数市净率或个股所属行业的市净率"],["DRAWNULL","无效数据"]]),e&&(e.Callback&&(this.UpdateUICallback=e.Callback),e.CallbackParam&&(this.CallbackParam=e.CallbackParam),e.Arguments&&(this.Arguments=e.Arguments)),this.Run=function(){try{this.OutVarTable=[],this.VarTable=new _r.default,Fr.Complier.Log("[JSExecute::JSExplainer] Load Arguments",this.Arguments);for(var t in this.Arguments){var e=this.Arguments[t];this.VarTable.set(e.Name,e.Value)}var a=this.RunAST();Fr.Complier.Log("[JSExplainer.Run] explain finish",a),this.UpdateUICallback&&(Fr.Complier.Log("[JSExplainer.Run] invoke UpdateUICallback."),this.UpdateUICallback(a))}catch(t){Fr.Complier.Log("[JSExplainer.Run] throw error ",t),this.ErrorCallback&&this.ErrorCallback(t,this.OutVarTable)}},this.RunAST=function(){this.AST||this.ThrowError(),this.AST.Body||this.ThrowError();for(var t in this.AST.Body){var e=this.AST.Body[t];if(this.VisitNode(e),e.Type==gn.ExpressionStatement&&e.Expression)if(e.Expression.Type==gn.AssignmentExpression){if(":"==e.Expression.Operator&&e.Expression.Left){var a=e.Expression,i=a.Left.Name,r="输出"+i+": "+this.VarTable.get(i);this.OutVarTable.push({Name:i,Data:r,Type:0})}else if(":="==e.Expression.Operator&&e.Expression.Left){var n=e.Expression,s=n.Left.Name,o="赋值"+s+": "+this.VarTable.get(s);this.OutVarTable.push({Name:s,Data:o,Type:0,IsOut:!1})}}else if(e.Expression.Type==gn.CallExpression){var h=e.Expression;if(this.IsDrawFunction(h.Callee.Name)){var l=h.Out,u=h.Callee.Name;this.OutVarTable.push({Name:u,Draw:"输出: "+l,Type:1})}else{var c=h.Out;C="__temp_c_"+h.Callee.Name+"_"+t+"__",this.OutVarTable.push({Name:C,Data:"输出: "+c,Type:0,NoneName:!0})}}else if(e.Expression.Type==gn.Identifier){var d=e.Expression.Name,f=this.ReadVariable(d,e.Expression);d="__temp_i_"+t+"__",this.OutVarTable.push({Name:d,Data:"输出: "+f,Type:0,NoneName:!0})}else if(e.Expression.Type==gn.Literal){var m=e.Expression.Value;he.IsString(m)&&m.indexOf("$")>0&&(m=this.GetOtherSymbolExplain({Literal:m},e)),C="__temp_li_"+t+"__";this.OutVarTable.push({Name:C,Data:"输出: "+m,Type:0,NoneName:!0})}else if(e.Expression.Type==gn.BinaryExpression){var C="__temp_b_"+t+"__",p=e.Expression.Out;this.OutVarTable.push({Name:C,Data:"输出: "+p,Type:0,NoneName:!0})}else if(e.Expression.Type==gn.LogicalExpression){var C="__temp_l_"+t+"__",D=e.Expression.Out;this.OutVarTable.push({Name:C,Data:"输出: "+D,Type:0,NoneName:!0})}else if(e.Expression.Type==gn.SequenceExpression){var v=void 0,g=void 0,S=void 0,T=void 0,y=void 0,I=!1,x=!1,L=!1,M=!1,_=!1,b=!1,w=!0,F=!1,E=!1,A=!1;for(var N in e.Expression.Expression){var O=e.Expression.Expression[N];if(O.Type==gn.AssignmentExpression&&":"==O.Operator&&O.Left){v=O.Left.Name;var P=this.VarTable.get(v);this.VarTable.set(v,P)}else if(O.Type==gn.Identifier){var R=O.Name;if("COLORSTICK"===R)I=!0;else if("POINTDOT"===R)x=!0;else if("CIRCLEDOT"===R)L=!0;else if("DOTLINE"===R)F=!0;else if("LINESTICK"===R)M=!0;else if("STICK"===R)_=!0;else if("VOLSTICK"===R)b=!0;else if("DRAWABOVE"===R)A=!0;else if(0==R.indexOf("COLOR"))T=R;else if(0==R.indexOf("LINETHICK"))y=R;else if(0==R.indexOf("NODRAW"))w=!1;else if(0==R.indexOf("EXDATA"))!0;else if(0==R.indexOf("LINEOVERLAY"))!0;else{v=O.Name;var k=this.ReadVariable(v,O);v="__temp_si_"+t+"__",E=!0,this.VarTable.set(v,k)}}else if(O.Type==gn.Literal){var B=O.Value;v=O.Value.toString(),E=!0,this.VarTable.set(v,B)}else if(O.Type==gn.CallExpression)if(this.IsDrawFunction(O.Callee.Name))S=O.Out,g=O.Callee.Name;else{var Y=O.Out;v="__temp_sc_"+O.Callee.Name+"_"+t+"__",E=!0,this.VarTable.set(v,Y)}else if(O.Type==gn.BinaryExpression){v="__temp_sb_"+t+"__";var H=O.Out;E=!0,this.VarTable.set(v,H)}}var V;if(V=S?"输出: "+S:E?"输出: "+this.VarTable.get(v):"输出"+v+": "+this.VarTable.get(v),T&&(V+=",颜色"+this.GetColorExplain(T)),y&&(V+=",线段粗细"+this.GetLineWidthExplain(y)),0==w&&(V+=",不显示"),1==F&&(V+=",画虚线"),1==A&&(V+=",显示在位置之上"),x&&v){V+=",画小圆点线";var G={Name:v,Data:V,Radius:$r.POINTDOT.Radius,Type:3};this.OutVarTable.push(G)}else if(L&&v){V+=",画小圆圈线";var W={Name:v,Data:V,Radius:$r.CIRCLEDOT.Radius,Type:3};this.OutVarTable.push(W)}else if(M&&v){V+=",画出柱状线和指标线";var X={Name:v,Data:V,Type:4};this.OutVarTable.push(X)}else if(_&&v){V+=",画柱状线";var U={Name:v,Data:V,Type:5};this.OutVarTable.push(U)}else if(b&&v){V+=",画成交量柱状线";var K={Name:v,Data:V,Type:6};this.OutVarTable.push(K)}else if(v&&T){var j={Name:v,Data:V,Color:T,Type:0};this.OutVarTable.push(j)}else if(S){var z={Name:g,Data:V,Type:1};this.OutVarTable.push(z)}else if(I&&v){V+=",画彩色柱状线";var J={Name:v,Data:V,Color:T,Type:2};this.OutVarTable.push(J)}else if(v){var q={Name:v,Data:V,Type:0};this.OutVarTable.push(q)}}}return Fr.Complier.Log("[JSExplainer::Run]",this.VarTable),this.OutVarTable},this.VisitNode=function(t){switch(t.Type){case gn.SequenceExpression:this.VisitSequenceExpression(t);break;case gn.ExpressionStatement:this.VisitNode(t.Expression);break;case gn.AssignmentExpression:this.VisitAssignmentExpression(t);break;case gn.BinaryExpression:case gn.LogicalExpression:this.VisitBinaryExpression(t);break;case gn.CallExpression:this.VisitCallExpression(t)}},this.VisitSequenceExpression=function(t){for(var e in t.Expression){var a=t.Expression[e];this.VisitNode(a)}},this.VisitCallExpression=function(t){var e=t.Callee.Name,a=[];for(var i in t.Arguments){var r=t.Arguments[i],n=void 0;n=r.Type==gn.BinaryExpression||r.Type==gn.LogicalExpression?this.VisitBinaryExpression(r):r.Type==gn.CallExpression?this.VisitCallExpression(r):this.GetNodeValue(r),a.push(n)}if(Fr.Complier.Log("[JSExplainer::VisitCallExpression]",e,"(",a.toString(),")"),mn.IsCustomFunction(e)){var s=this.Algorithm.CallCustomFunction(e,a,this.SymbolData,t);return t.Out=[],t.Draw=null,s&&(s.Out&&(t.Out=s.Out),s.Draw&&(t.Draw=s.Draw)),t.Out}return t.Out=this.CallFunctionExplain(e,a,t),t.Out},this.FUNCTION_INFO_LIST=new _r.default([["REF",{Name:"REF",Param:{Count:2},ToString:function(t){return t[1]+"日前的"+t[0]}}],["REFX",{Name:"REFX",Param:{Count:2},ToString:function(t){return t[1]+"日后的"+t[0]}}],["REFV",{Name:"REFV",Param:{Count:2},ToString:function(t){return t[1]+"日前的(未作平滑处理)"+t[0]}}],["REFXV",{Name:"REFXV",Param:{Count:2},ToString:function(t){return t[1]+"日后的(未作平滑处理)"+t[0]}}],["REFDATE",{Name:"REFDATE",Param:{Count:2},ToString:function(t){return t[1]+"日"+t[0]}}],["COUNT",{Name:"COUNT",Param:{Count:2},ToString:function(t){return"统计"+t[1]+"日中满足"+t[0]+"的天数"}}],["BARSLASTCOUNT",{Name:"BARSLASTCOUNT",Param:{Count:1},ToString:function(t){return"条件"+t[0]+"连续成立次数"}}],["BARSCOUNT",{Name:"BARSCOUNT",Param:{Count:1},ToString:function(t){return t[0]+"有效数据周期数"}}],["BARSLAST",{Name:"BARSLAST",Param:{Count:1},ToString:function(t){return"上次"+t[0]+"不为0距今天数"}}],["BARSNEXT",{Name:"BARSNEXT",Param:{Count:1},ToString:function(t){return"下次"+t[0]+"不为0距今天数"}}],["BARSSINCEN",{Name:"BARSSINCEN",Param:{Count:2},ToString:function(t){return"在"+t[1]+"周期内首次"+t[0]+"距今天数"}}],["BARSSINCE",{Name:"BARSSINCE",Param:{Count:1},ToString:function(t){return"首次"+t[0]+"距今天数"}}],["HHV",{Name:"HHV",Param:{Count:2},ToString:function(t){return t[1]+"日内"+t[0]+"的最高值"}}],["LLV",{Name:"LLV",Param:{Count:2},ToString:function(t){return t[1]+"日内"+t[0]+"的最低值"}}],["HOD",{Name:"HOD",Param:{Count:2},ToString:function(t){return t[1]+"日内"+t[0]+"的高值名次"}}],["LOD",{Name:"LOD",Param:{Count:2},ToString:function(t){return t[1]+"日内"+t[0]+"的低值名次"}}],["REVERSE",{Name:"REVERSE",Param:{Count:1},ToString:function(t){return t[0]+"的相反数"}}],["FILTER",{Name:"FILTER",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日过滤"}}],["FILTERX",{Name:"FILTERX",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日反向过滤"}}],["SUMBARS",{Name:"SUMBARS",Param:{Count:2},ToString:function(t){return t[0]+"累加至"+t[1]+"的天数"}}],["MA",{Name:"MA",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日简单移动平均"}}],["SMA",{Name:"SMA",Param:{Count:3},ToString:function(t){return t[0]+"的"+t[1]+"日["+t[2]+"日权重]移动平均"}}],["MEMA",{Name:"MEMA",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日平滑移动平均"}}],["EMA",{Name:"EMA",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日指数移动平均"}}],["EXPMA",{Name:"EXPMA",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日指数移动平均"}}],["EXPMEMA",{Name:"EXPMEMA",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日指数平滑移动平均"}}],["WMA",{Name:"WMA",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日加权移动平均"}}],["DMA",{Name:"DMA",Param:{Count:2},ToString:function(t){return"以"+t[1]+"为权重"+t[0]+"的动态移动平均"}}],["XMA",{Name:"XMA",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日偏移移动平均"}}],["RANGE",{Name:"RANGE",Param:{Count:3},ToString:function(t){return t[0]+"位于"+t[1]+"和"+t[2]+"之间"}}],["CONST",{Name:"CONST",Param:{Count:1},ToString:function(t){return t[0]+"的最后一日值"}}],["TOPRANGE",{Name:"TOPRANGE",Param:{Count:1},ToString:function(t){return"当前值是近"+t[0]+"周期的最大值"}}],["LOWRANGE",{Name:"LOWRANGE",Param:{Count:1},ToString:function(t){return"当前值是近"+t[0]+"周期的最小值"}}],["FINDHIGH",{Name:"FINDHIGH",Param:{Count:4},ToString:function(t){return t[0]+"在"+t[1]+"日前的"+t[2]+"天内第"+t[3]+"个最高价"}}],["FINDHIGHBARS",{Name:"FINDHIGHBARS",Param:{Count:4},ToString:function(t){return t[0]+"在"+t[1]+"日前的"+t[2]+"天内第"+t[3]+"个最高价到当前周期的周期数"}}],["FINDLOW",{Name:"FINDLOW",Param:{Count:4},ToString:function(t){return t[0]+"在"+t[1]+"日前的"+t[2]+"天内第"+t[3]+"个最低价"}}],["FINDLOWBARS",{Name:"FINDLOWBARS",Param:{Count:2},ToString:function(t){return t[0]+"在"+t[1]+"日前的"+t[2]+"天内第"+t[3]+"个最低价到当前周期的周期数"}}],["SUM",{Name:"SUM",Param:{Count:2},ToString:function(t){return""+t[0]+t[1]+"日累加"}}],["MULAR",{Name:"MULAR",Param:{Count:2},ToString:function(t){return t[0]+"和"+t[1]+"日累乘"}}],["AMA",{Name:"AMA",Param:{Count:2},ToString:function(t){return"以"+t[1]+"为权重"+t[0]+"的自适应均线"}}],["TMA",{Name:"TMA",Param:{Count:3},ToString:function(t){return t[0]+"的"+t[1]+"日["+t[2]+"日权重]移动平均"}}],["CROSS",{Name:"CROSS",Param:{Count:2},ToString:function(t){return t[0]+"上穿"+t[1]}}],["LONGCROSS",{Name:"LONGCROSS",Param:{Count:3},ToString:function(t){return t[0]+"小于"+t[1]+"保持"+t[2]+"个交易日后交叉上穿"}}],["UPNDAY",{Name:"UPNDAY",Param:{Count:2},ToString:function(t){return"最近"+t[1]+"日"+t[0]+"连涨"}}],["DOWNNDAY",{Name:"DOWNNDAY",Param:{Count:2},ToString:function(t){return"最近"+t[1]+"日"+t[0]+"连跌"}}],["NDAY",{Name:"NDAY",Param:{Count:3},ToString:function(t){return"最近"+t[2]+"日"+t[0]+"一直大于"+t[1]}}],["EXIST",{Name:"EXIST",Param:{Count:2},ToString:function(t){return"最近"+t[1]+"日存在"+t[0]}}],["EXISTR",{Name:"EXISTR",Param:{Count:3},ToString:function(t){return"从前"+t[1]+"日到前"+t[2]+"日存在"+t[0]}}],["EVERY",{Name:"EVERY",Param:{Count:2},ToString:function(t){return"最近"+t[1]+"日一直存在"+t[0]}}],["LAST",{Name:"LAST",Param:{Count:3},ToString:function(t){return"从前"+t[1]+"日到前"+t[2]+"日持续"+t[0]}}],["NOT",{Name:"NOT",Param:{Count:1},ToString:function(t){return t[0]+"取反"}}],["IF",{Name:"IF",Param:{Count:3},ToString:function(t){return"如果"+t[0]+",返回"+t[1]+",否则返回"+t[2]}}],["IFF",{Name:"IFF",Param:{Count:3},ToString:function(t){return"如果"+t[0]+",返回"+t[1]+",否则返回"+t[2]}}],["IFN",{Name:"IFN",Param:{Count:3},ToString:function(t){return"如果"+t[0]+",返回"+t[1]+",否则返回"+t[2]}}],["MAX",{Name:"MAX",Param:{Count:2},ToString:function(t){return t[0]+"和"+t[1]+"的较大值"}}],["MIN",{Name:"MIN",Param:{Count:2},ToString:function(t){return t[0]+"和"+t[1]+"的较小值"}}],["ACOS",{Name:"ACOS",Param:{Count:1},ToString:function(t){return t[0]+"的反余弦"}}],["ASIN",{Name:"ASIN",Param:{Count:1},ToString:function(t){return t[0]+"的反正弦"}}],["ATAN",{Name:"ATAN",Param:{Count:1},ToString:function(t){return t[0]+"的反正切"}}],["COS",{Name:"COS",Param:{Count:1},ToString:function(t){return t[0]+"的余弦"}}],["SIN",{Name:"SIN",Param:{Count:1},ToString:function(t){return t[0]+"的正弦"}}],["TAN",{Name:"TAN",Param:{Count:1},ToString:function(t){return t[0]+"的正切"}}],["EXP",{Name:"EXP",Param:{Count:1},ToString:function(t){return t[0]+"的指数"}}],["LN",{Name:"LN",Param:{Count:1},ToString:function(t){return t[0]+"的自然对数"}}],["LOG",{Name:"LOG",Param:{Count:1},ToString:function(t){return t[0]+"的对数"}}],["SQRT",{Name:"SQRT",Param:{Count:1},ToString:function(t){return t[0]+"的开方"}}],["ABS",{Name:"ABS",Param:{Count:1},ToString:function(t){return t[0]+"的绝对值"}}],["POW",{Name:"POW",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"乘幂"}}],["CEILING",{Name:"CEILING",Param:{Count:1},ToString:function(t){return t[0]+"的向上舍入"}}],["FLOOR",{Name:"FLOOR",Param:{Count:1},ToString:function(t){return t[0]+"的向上舍入"}}],["INTPART",{Name:"INTPART",Param:{Count:1},ToString:function(t){return t[0]+"的整数部分"}}],["BETWEEN",{Name:"BETWEEN",Param:{Count:3},ToString:function(t){return t[0]+"位于"+t[1]+"和"+t[2]+"之间"}}],["FRACPART",{Name:"FRACPART",Param:{Count:1},ToString:function(t){return t[0]+"的小数部分"}}],["ROUND",{Name:"ROUND",Param:{Count:1},ToString:function(t){return"对"+t[0]+"(进行)四舍五入"}}],["ROUND2",{Name:"ROUND2",Param:{Count:2},ToString:function(t){return"对"+t[0]+"(进行)四舍五入"}}],["SIGN",{Name:"SIGN",Param:{Count:1},ToString:function(t){return t[0]+"的符号"}}],["MOD",{Name:"MOD",Param:{Count:2},ToString:function(t){return t[0]+"关于"+t[1]+"的模"}}],["RAND",{Name:"RAND",Param:{Count:1},ToString:function(t){return"随机正整数"}}],["AVEDEV",{Name:"AVEDEV",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日平均绝对偏差"}}],["DEVSQ",{Name:"DEVSQ",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日数据偏差平方和"}}],["FORCAST",{Name:"FORCAST",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日线性回归预测值"}}],["TSMA",{Name:"TSMA",Param:{Count:2},ToString:function(t){return t[0]+"在"+t[1]+"个周期内的时间序列三角移动平均"}}],["SLOPE",{Name:"SLOPE",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日线性回归斜率"}}],["STD",{Name:"STD",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日估算标准差"}}],["STDP",{Name:"STDP",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日总体标准差"}}],["STDDEV",{Name:"STDDEV",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日标准偏差"}}],["VAR",{Name:"VAR",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日估算样本方差"}}],["VARP",{Name:"VARP",Param:{Count:2},ToString:function(t){return t[0]+"的"+t[1]+"日总体样本方差"}}],["COVAR",{Name:"COVAR",Param:{Count:3},ToString:function(t){return t[0]+"和"+t[1]+"的"+t[2]+"周期的协方差"}}],["RELATE",{Name:"RELATE",Param:{Count:3},ToString:function(t){return t[0]+"和"+t[1]+"的"+t[0]+"周期的相关系数"}}],["BETA",{Name:"BETA",Param:{Count:1},ToString:function(t){return"β(Beta)系数"}}],["BETAEX",{Name:"BETAEX",Param:{Count:3},ToString:function(t){return t[0]+"和"+t[1]+"的"+t[2]+"周期的相关放大系数"}}],["COST",{Name:"COST",Param:{Count:1},ToString:function(t){return"获利盘为"+t[0]+"%的成本分布"}}],["WINNER",{Name:"WINNER",Param:{Count:1},ToString:function(t){return"以"+t[0]+"计算的获利盘比例"}}],["LWINNER",{Name:"LWINNER",Param:{Count:2},ToString:function(t){return"最近"+t[0]+"日那部分成本以"+t[1]+"价格卖出的获利盘比例"}}],["PWINNER",{Name:"PWINNER",Param:{Count:2},ToString:function(t){return t[0]+"日前那部分成本以"+t[1]+"价格卖出的获利盘比例"}}],["COSTEX",{Name:"COSTEX",Param:{Count:2},ToString:function(t){return"位于价格"+t[0]+"和"+t[1]+"间的成本"}}],["PPART",{Name:"PPART",Param:{Count:2},ToString:function(t){return t[0]+"日前那部分成本占总成本的比例"}}],["SAR",{Name:"SAR",Param:{Count:3},ToString:function(t){return"步长为"+t[1]+"极限值为"+t[0]+"的"+t[2]+"日抛物转向"}}],["SARTURN",{Name:"SARTURN",Param:{Count:3},ToString:function(t){return"步长为"+t[1]+"极限值为"+t[0]+"的"+t[2]+"日抛物转向点"}}],["CON2STR",{Name:"CON2STR",Param:{Count:2},ToString:function(t){return t[0]+"转为字符串"}}],["VAR2STR",{Name:"VAR2STR",Param:{Count:2},ToString:function(t){return t[0]+"转为字符串"}}],["STR2CON",{Name:"STR2CON",Param:{Count:1},ToString:function(t){return t[0]+"转为数字"}}],["STRLEN",{Name:"STRLEN",Param:{Count:1},ToString:function(t){return"得到"+t[0]+"字符串长度"}}],["STRCAT",{Name:"STRCAT",Param:{Count:2},ToString:function(t){return"字符串相加"}}],["VARCAT",{Name:"VARCAT",Param:{Count:2},ToString:function(t){return"字符串相加"}}],["STRSPACE",{Name:"STRSPACE",Param:{Count:1},ToString:function(t){return"字符串"+t[0]+"加一空格"}}],["SUBSTR",{Name:"SUBSTR",Param:{Count:3},ToString:function(t){return"字符串"+t[0]+"中取一部分"}}],["STRCMP",{Name:"STRCMP",Param:{Count:2},ToString:function(t){return"字符串"+t[0]+"和字符串"+t[1]+"比较"}}],["FINDSTR",{Name:"FINDSTR",Param:{Count:2},ToString:function(t){return"字符串"+t[0]+"中查找字符串"+t[1]}}],["NAMEINCLUD",{Name:"NAMEINCLUD",Param:{Count:1},ToString:function(t){return"查找品种名称中包含"+t[0]}}],["CODELIKE",{Name:"CODELIKE",Param:{Count:1},ToString:function(t){return"查找品种名称中包含"+t[0]}}],["INBLOCK",{Name:"AVEDEV",Param:{Count:1},ToString:function(t){return"属于"+t[0]+"板块"}}],["HHVBARS",{Name:"HHVBARS",Param:{Count:2},ToString:function(t){return 0==t[1]?"历史"+t[0]+"新高距今天数":t[1]+"日内"+t[0]+"新高距今天数"}}],["LLVBARS",{Name:"LLVBARS",Param:{Count:2},ToString:function(t){return 0==t[1]?"历史"+t[0]+"新低距今天数":t[1]+"日内"+t[0]+"新低距今天数"}}]]),this.CallFunctionExplain=function(t,e,a){if(this.FUNCTION_INFO_LIST.has(t)){var i=this.FUNCTION_INFO_LIST.get(t);return i.Param.Count!=e.length&&this.ThrowUnexpectedNode(a,"函数"+t+"参数个数不正确. 需要"+i.Param.Count+"个参数"),i.ToString(e)}switch(t){case"CALCSTOCKINDEX":return"引用"+e[0]+"的"+e[1]+"指标第"+e[2]+"个输出值";case"PEAK":case"PEAKBARS":case"ZIG":case"ZIGA":case"TROUGH":case"TROUGHBARS":return this.GetZIGExplain(t,e);case"FINANCE":return this.GetFinanceExplain(e);case"DYNAINFO":return this.GetDynainfoExplain(e);case"CLOSE":case"C":case"VOL":case"V":case"OPEN":case"O":case"HIGH":case"H":case"LOW":case"L":case"AMOUNT":case"AMO":return this.GetOtherSymbolExplain({FunctionName:t,Args:e},a);case"PLOYLINE":return"当满足条件"+e[0]+"时以"+e[1]+"位置为顶点画折线连接";case"DRAWLINE":return"当满足条件"+e[0]+"时,在"+e[1]+"位置画直线起点，当满足条件"+e[2]+"时,在"+e[3]+"位置画直线终点,"+e[4]+"表示是否延长";case"DRAWSL":return"当满足条件"+e[0]+"时,在"+e[1]+"位置画斜线线性回归,"+e[2]+"斜率,"+e[3]+"长度,"+e[4]+"方向";case"DRAWKLINE":case"DRAWKLINE1":return"K线";case"DRAWICON":return"当满足条件"+e[0]+"时,在"+e[1]+"位置画"+e[2]+"号图标";case"DRAWTEXT":return"当满足条件"+e[0]+"时,在"+e[1]+"位置书写文字";case"DRAWTEXT_FIX":return"当满足条件"+e[0]+"时,在横轴"+e[1]+"纵轴"+e[2]+"位置书写文字";case"DRAWNUMBER":return"当满足条件"+e[0]+"时,在"+e[1]+"位置书写数字";case"DRAWNUMBER_FIX":return"当满足条件"+e[0]+"时,在横轴"+e[1]+"纵轴"+e[2]+"位置书写数字";case"RGB":return"自定色["+e[0]+","+e[1]+","+e[2]+"]";case"DRAWBAND":return"画带状线";case"DRAWRECTREL":return"相对位置上画矩形.";case"DRAWGBK":return"填充背景";case"STICKLINE":var r="";return r=-1==e[4]?"虚线空心柱":0==e[4]?"实心柱":"实线空心柱","当满足条件"+e[0]+"时, 在"+e[1]+"和"+e[2]+"位置之间画柱状线,宽度为"+e[3]+","+r;default:this.ThrowUnexpectedNode(a,"函数"+t+"不存在")}},this.GetDynainfoExplain=function(t){var e=new _r.default([[3,"前收盘价"],[4,"开盘价"],[5,"最高价"],[6,"最低价"],[7,"现价"],[8,"总量"],[9,"现量"],[10,"总金额"],[11,"均价"],[12,"日涨跌"],[13,"振幅"],[14,"涨幅"],[15,"开盘时的成交金额"],[16,"前5日每分钟均量"],[17,"量比"],[18,"上涨家数"],[19,"下跌家数"]]),a=t[0];return e.has(a)?e.get(a):"即时行情["+a+"]"},this.GetFinanceExplain=function(t){var e=new _r.default([[1,"总股本"],[2,"市场类型"],[3,"沪深品种类型"],[4,"沪深行业代码"],[5,"B股"],[6,"H股"],[7,"流通股本[股]"],[8,"股东人数[户]"],[9,"资产负债率%"],[10,"总资产"],[11,"流动资产"],[12,"固定资产"],[13,"无形资产"],[15,"流动负债"],[16,"少数股东权益"]]),a=t[0];return e.has(a)?e.get(a):"财务数据["+a+"]"},this.GetZIGExplain=function(t,e){var a=e[0];switch(0==a?a="开盘价":1==a?a="最高价":2==a?a="最低价":3==a&&(a="收盘价"),t){case"PEAK":return a+"的"+e[1]+"%之字转向的前"+e[2]+"个波峰值";case"PEAKBARS":return a+"的"+e[1]+"5%之字转向的前"+e[2]+"个波峰位置";case"ZIG":return a+"的"+e[1]+"的之字转向";case"ZIGA":return a+"变化"+e[1]+"的之字转向";case"TROUGH":return a+"的"+e[1]+"%之字转向的前"+e[2]+"个波谷值";case"TROUGHBARS":return a+"的"+e[1]+"%之字转向的前"+e[2]+"个波谷位置"}},this.GetColorExplain=function(t){var e=new _r.default([["COLORBLACK","黑色"],["COLORBLUE","蓝色"],["COLORGREEN","绿色"],["COLORCYAN","青色"],["COLORRED","红色"],["COLORMAGENTA","洋红色"],["COLORBROWN","棕色"],["COLORLIGRAY","淡灰色"],["COLORGRAY","深灰色"],["COLORLIBLUE","淡蓝色"],["COLORLIGREEN","淡绿色"],["COLORLICYAN","淡青色"],["COLORLIRED","淡红色"],["COLORLIMAGENTA","淡洋红色"],["COLORWHITE","白色"],["COLORYELLOW","黄色"]]);return e.has(t)?e.get(t):0==t.indexOf("COLOR")?"#"+t.substr(5):"rgb(30,144,255)"},this.GetLineWidthExplain=function(t){var e=parseInt(t.replace("LINETHICK",""));return he.IsPlusNumber(e)?e:1},this.SymbolPeriodExplain=function(t,e){var a=new _r.default([["CLOSE","收盘价"],["C","收盘价"],["VOL","成交量"],["V","成交量"],["OPEN","开盘价"],["O","开盘价"],["HIGH","最高价"],["H","最高价"],["LOW","最低价"],["L","最低价"],["AMOUNT","成交金额"],["AMO","成交金额"],["VOLINSTK","持仓量"]]),i=new _r.default([["MIN1","1分钟"],["MIN5","5分钟"],["MIN15","15分钟"],["MIN30","30分钟"],["MIN60","60分钟"],["DAY","日"],["WEEK","周"],["MONTH","月"],["SEASON","季"],["YEAR","年"],["WEEK2","双周"],["HALFYEAR","半年"]]),r=t;a.has(t)&&(r=a.get(t));var n=e;return i.has(e)&&(n=i.get(e)),r+"[取"+n+"数据]"},this.GetOtherSymbolExplain=function(t,e){var a=new _r.default([["CLOSE","收盘价"],["C","收盘价"],["VOL","成交量"],["V","成交量"],["OPEN","开盘价"],["O","开盘价"],["HIGH","最高价"],["H","最高价"],["LOW","最低价"],["L","最低价"],["AMOUNT","成交金额"],["AMO","成交金额"],["VOLINSTK","持仓量"]]);if(t.FunctionName){var i=t.Args,r=a.get(t.FunctionName);return"["+i[0]+"]"+r}if(t.Literal){var n=t.Literal.toUpperCase(),i=n.split("$");if(!a.has(i[1]))return"";var s=i[0],r=a.get(i[1]);return"["+s+"]"+r}},this.IsDrawFunction=function(t){return!!new Ir.default(["STICKLINE","DRAWTEXT","SUPERDRAWTEXT","DRAWLINE","DRAWBAND","DRAWKLINE","DRAWKLINE1","DRAWKLINE_IF","PLOYLINE","POLYLINE","DRAWNUMBER","DRAWNUMBER_FIX","DRAWICON","DRAWCHANNEL","PARTLINE","DRAWTEXT_FIX","DRAWGBK","DRAWTEXT_LINE","DRAWRECTREL","DRAWTEXTABS","DRAWOVERLAYLINE","FILLRGN","FILLRGN2","FILLTOPRGN","FILLBOTTOMRGN","FILLVERTICALRGN","FLOATRGN","DRAWSL","DRAWGBK2"]).has(t)},this.VisitAssignmentExpression=function(t){var e=t.Left;e.Type!=gn.Identifier&&this.ThrowUnexpectedNode(t);var a=e.Name,i=t.Right,r=null;if(i.Type==gn.BinaryExpression||i.Type==gn.LogicalExpression)r=this.VisitBinaryExpression(i);else if(i.Type==gn.CallExpression)r=this.VisitCallExpression(i);else if(i.Type==gn.Literal)r=i.Value,he.IsString(r)&&i.Value.indexOf("$")>0&&(r=this.GetOtherSymbolExplain({Literal:r},t));else if(i.Type==gn.Identifier)r=this.ReadVariable(i.Name,i);else if(i.Type==gn.MemberExpression)r=this.ReadMemberVariable(i);else if(i.Type==gn.UnaryExpression)if("-"==i.Operator){var n=this.GetNodeValue(i.Argument);r="-"+n}else r=i.Argument.Value;Fr.Complier.Log("[JSExplainer::VisitAssignmentExpression]",a," = ",r),this.VarTable.set(a,r)},this.VisitBinaryExpression=function(t){var e=[];e.push(t);for(var a=null;0!=e.length;)if(a=e[e.length-1],a.Left&&t!=a.Left&&t!=a.Right)e.push(a.Left);else if(a.Right&&t!=a.Right)e.push(a.Right);else{var i=e.pop();if(i.Type==gn.BinaryExpression){var r=this.GetNodeValue(i.Left),n=this.GetNodeValue(i.Right);Fr.Complier.Log("[JSExplainer::VisitBinaryExpression] BinaryExpression",i,r,n),i.Out=null,i.Out="("+r+" "+i.Operator+" "+n+")","收盘价"==r&&"开盘价"==n?">"==i.Operator?i.Out="(收阳线)":"<"==i.Operator?i.Out="(收阴线)":"="==i.Operator&&(i.Out="(平盘)"):"开盘价"==r&&"收盘价"==n&&("<"==i.Operator?i.Out="(收阳线)":">"==i.Operator?i.Out="(收阴线)":"="==i.Operator&&(i.Out="(平盘)")),Fr.Complier.Log("[JSExplainer::VisitBinaryExpression] BinaryExpression",i)}else if(i.Type==gn.LogicalExpression){var s=this.GetNodeValue(i.Left),o=this.GetNodeValue(i.Right);switch(Fr.Complier.Log("[JSExecute::VisitBinaryExpression] LogicalExpression",i,s,o),i.Out=null,i.Operator){case"&&":case"AND":i.Out="("+s+" 并且 "+o+")";break;case"||":case"OR":i.Out="("+s+" 或者 "+o+")"}Fr.Complier.Log("[JSExplainer::VisitBinaryExpression] LogicalExpression",i)}t=a}return t.Out},this.GetNodeValue=function(t){switch(t.Type){case gn.Literal:return t.Value;case gn.UnaryExpression:if("-"==t.Operator){return"-"+this.GetNodeValue(t.Argument)}return t.Argument.Value;case gn.Identifier:return this.ReadVariable(t.Name,t);case gn.BinaryExpression:case gn.LogicalExpression:return t.Out;case gn.CallExpression:return this.VisitCallExpression(t);default:this.ThrowUnexpectedNode(t)}},this.ReadVariable=function(t,e){if(this.ConstVarTable.has(t)){return this.ConstVarTable.get(t)}if(mn.IsCustomVariant(t))return this.ReadCustomVariant(t,e);if(this.VarTable.has(t))return this.VarTable.get(t);if(t.indexOf("#")>0){var a=t.split("#");return this.SymbolPeriodExplain(a[0],a[1])}return this.ThrowUnexpectedNode(e,"变量"+t+"不存在"),t},this.ThrowUnexpectedNode=function(t,e){var a=t.Marker,i=e||"执行异常";return this.ErrorHandler.ThrowError(a.Index,a.Line,a.Column,i)},this.ThrowError=function(){}}function ji(){}function zi(t,e,a,i){this.newMethod=Ha,this.newMethod(t),delete this.newMethod,this.ClassName="ScriptIndex",this.Script=e,this.Arguments=[],this.OutVar=[],this.ID,this.FloatPrecision=2,this.StringFormat,this.KLineType=null,this.InstructionType,this.YSpecificMaxMin=null,this.YSplitScale=null,this.Condition=null,this.OutName=null,this.IsLocked=!1,this.LockCallback=null,this.LockID=null,this.LockBG=null,this.LockTextColor=null,this.LockText=null,this.LockFont=null,this.LockCount=20,this.LockMinWidth=null,this.TitleFont=$r.TitleFont,this.IsShortTitle=!1,this.IsUsePageData=!1,i&&(i.FloatPrecision>=0&&(this.FloatPrecision=i.FloatPrecision),i.StringFormat>0&&(this.StringFormat=i.StringFormat),i.ID&&(this.ID=i.ID),(i.KLineType>=0||-1===i.KLineType)&&(this.KLineType=i.KLineType),i.InstructionType&&(this.InstructionType=i.InstructionType),i.YSpecificMaxMin&&(this.YSpecificMaxMin=i.YSpecificMaxMin),i.YSplitScale&&(this.YSplitScale=i.YSplitScale),i.Condition&&(this.Condition=i.Condition),i.TitleFont&&(this.TitleFont=i.TitleFont),i.IsShortTitle&&(this.IsShortTitle=i.IsShortTitle),i.OutName&&(this.OutName=i.OutName)),i&&i.Lock&&(1==i.Lock.IsLocked&&(this.IsLocked=!0),i.Lock.Callback&&(this.LockCallback=i.Lock.Callback),i.Lock.ID&&(this.LockID=i.Lock.ID),i.Lock.BG&&(this.LockBG=i.Lock.BG),i.Lock.TextColor&&(this.LockTextColor=i.Lock.TextColor),i.Lock.Text&&(this.LockText=i.Lock.Text),i.Lock.Font&&(this.LockFont=i.Lock.Font),i.Lock.Count&&(this.LockCount=i.Lock.Count),i.Lock.MinWidth&&(this.LockMinWidth=i.Lock.MinWidth*c())),a&&(this.Arguments=a),this.CopyTo=function(t){t.FloatPrecision=this.FloatPrecision,t.StringFormat=this.StringFormat,t.KLineType=this.KLineType,t.InstructionType=this.InstructionType,t.Condition=this.Condition,t.TitleFont=this.TitleFont,t.IsShortTitle=this.IsShortTitle,t.OutName=this.OutName,t.Arguments=this.Arguments,t.Script=this.Script,t.Name=this.Name},this.SetLock=function(t){1==t.IsLocked?(this.IsLocked=!0,t.Callback&&(this.LockCallback=t.Callback),t.ID&&(this.LockID=t.ID),t.BG&&(this.LockBG=t.BG),t.TextColor&&(this.LockTextColor=t.TextColor),t.Text&&(this.LockText=t.Text),t.Font&&(this.LockFont=t.Font),t.Count&&(this.LockCount=t.Count),t.MinWidth&&(this.LockMinWidth=t.MinWidth*c())):(this.IsLocked=!1,this.LockCallback=null,this.LockID=null,this.LockBG=null,this.LockTextColor=null,this.LockText=null,this.LockFont=null,this.LockCount=20)},this.ExecuteScript=function(t,e,a){this.OutVar=[];var i={HQChart:t,WindowIndex:e,HistoryData:a,Self:this},r=In.KLINE_ID;"MinuteChartContainer"===t.ClassName||"MinuteChartHScreenContainer"===t.ClassName?r=t.DayCount>1?In.MULTIDAY_MINUTE_ID:In.MINUTE_ID:"HistoryMinuteChartContainer"===t.ClassName&&(r=In.HISTORY_MINUTE_ID);var n={HQDataType:r,Symbol:t.Symbol,Name:t.Name,Data:a,SourceData:t.SourceData,Callback:this.RecvResultData,CallbackParam:i,Async:!0,MaxRequestDataCount:t.MaxReqeustDataCount,MaxRequestMinuteDayCount:t.MaxRequestMinuteDayCount,Arguments:this.Arguments,Condition:this.Condition,IsBeforeData:t.IsBeforeData,IsApiPeriod:t.IsApiPeriod,DrawInfo:null,Self:this};if(t&&t.ChartPaint[0]){var s=t.ChartPaint[0];s&&s.DrawKRange&&(n.DrawInfo={Start:s.DrawKRange.Start,End:s.DrawKRange.End})}if(r===In.HISTORY_MINUTE_ID&&(n.TrateDate=t.TradeDate),r===In.MULTIDAY_MINUTE_ID&&(n.DayCount=t.DayCount),t.NetworkFilter&&(n.NetworkFilter=t.NetworkFilter),this.Condition&&!this.IsMeetCondition(i,n))return void this.ShowConditionError(i);var o=this.Script;ji.Execute(o,n,t.ScriptErrorCallback)},this.IsMeetCondition=function(t,e){if(Fr.Complier.Log("[ScriptIndex::IsMeetCondition] ",this.Condition),this.Condition.Period){if(!this.IsMeetPeriodCondition(t,e))return!1;if(!this.IsMeetIncludeCondition(t,e))return!1}return!0},this.IsMeetPeriodCondition=function(t,e){if(!this.Condition.Period)return!0;for(var a in this.Condition.Period){var i=this.Condition.Period[a];switch(i){case Er.MINUTE_ID:if(e.HQDataType==In.MINUTE_ID)return!0;break;case Er.MULTIDAY_MINUTE_ID:if(e.HQDataType==In.MULTIDAY_MINUTE_ID)return!0;break;case Er.KLINE_DAY_ID:case Er.KLINE_WEEK_ID:case Er.KLINE_MONTH_ID:case Er.KLINE_YEAR_ID:case Er.KLINE_TWOWEEK_ID:case Er.KLINE_QUARTER_ID:case Er.KLINE_MINUTE_ID:case Er.KLINE_5_MINUTE_ID:case Er.KLINE_15_MINUTE_ID:case Er.KLINE_30_MINUTE_ID:case Er.KLINE_60_MINUTE_ID:if(t.HQChart.Period==i)return!0}}return!1},this.IsMeetIncludeCondition=function(t,e){if(!this.Condition.Include||this.Condition.Include.length<=0)return!0;var a=t.HQChart.Symbol;a&&(a=a.toUpperCase());for(var i in this.Condition.Include){if(a==this.Condition.Include[i])return!0}return!1},this.ShowConditionError=function(t){var e=t.HQChart,a=t.WindowIndex;e.DeleteIndexPaint(a),0==a&&e.ShowKLine(!0);var i=new st;i.Canvas=e.Canvas,i.ChartBorder=e.Frame.SubFrame[a].Frame.ChartBorder,i.ChartFrame=e.Frame.SubFrame[a].Frame,i.NotSupportMessage="指标不支持当前品种或周期",e.ChartPaint.push(i),e.Draw()},this.RecvResultData=function(t,e){var a=e.HQChart,i=e.WindowIndex,r=e.HistoryData;if(e.Self.OutVar=t,e.Self.BindData(a,i,r),0==e.Self.IsLocked)e.HQChart.Frame.SubFrame[i].Frame.SetLock(null);else{var n={IsLocked:!0,Callback:e.Self.LockCallback,IndexName:e.Self.Name,ID:e.Self.LockID,BG:e.Self.LockBG,Text:e.Self.LockText,TextColor:e.Self.LockTextColor,Font:e.Self.LockFont,Count:e.Self.LockCount,MinWidth:e.Self.LockMinWidth};e.HQChart.Frame.SubFrame[i].Frame.SetLock(n)}if(e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw(),a.GetIndexEvent){var s=a.GetIndexEvent();if(s){var o=e.Self,h={OutVar:o.OutVar,WindowIndex:i,Name:o.Name,Arguments:o.Arguments,HistoryData:r,Stock:{Symbol:a.Symbol,Name:a.Name}};s.Callback(s,h,o)}}},this.CreateLine=function(t,e,a,i){var r=new st;if(r.Canvas=t.Canvas,r.DrawType=1,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}a.IsDotLine&&(r.IsDotLine=!0),0==a.IsShow&&(r.IsShow=!1);var s=e+1;r.Data.Data=a.Data,!1===a.IsShowTitle||he.IsString(a.Name)&&0==a.Name.indexOf("NOTEXT")||(a.NoneName?t.TitlePaint[s].Data[i]=new Oe(r.Data,null,r.Color):t.TitlePaint[s].Data[i]=new Oe(r.Data,a.Name,r.Color)),t.ChartPaint.push(r)},this.CreateOverlayLine=function(t,e,a,i){var r=new ot;if(r.Canvas=t.Canvas,r.DrawType=1,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}a.IsDotLine&&(r.IsDotLine=!0),0==a.IsShow&&(r.IsShow=!1);var s=e+1;r.Data.Data=a.Data,t.TitlePaint[s].Data[i]=new Oe(r.Data,a.Name,r.Color),t.ChartPaint.push(r)},this.CreateBar=function(t,e,a,i){var r=new vt;r.Canvas=t.Canvas,a.Draw.Width>0?r.Width=a.Draw.Width:r.Width=0,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i);r.Data.Data=a.Draw.DrawData,r.BarType=a.Draw.Type,t.ChartPaint.push(r)},this.CreateText=function(t,e,a,i,r){var n=new St;n.Canvas=t.Canvas,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,n.ReloadResource(),a.Color?n.Color=this.GetColor(a.Color):n.Color=this.GetDefaultColor(i),!0===a.IsDrawCenter&&(n.TextAlign="center"),!0===a.IsDrawAbove&&(n.Direction=1),!0===a.IsDrawBelow&&(n.Direction=2);a.Draw.Position&&(n.Position=a.Draw.Position),a.Draw.DrawData&&(n.Data.Data=a.Draw.DrawData),n.Text=a.Draw.Text,a.Draw.Direction>0&&(n.Direction=a.Draw.Direction),a.Draw.YOffset>0&&(n.YOffset=a.Draw.YOffset),a.Draw.TextAlign&&(n.TextAlign=a.Draw.TextAlign),a.DrawVAlign>=0&&(0==a.DrawVAlign?n.Direction=1:1==a.DrawVAlign?n.Direction=0:2==a.DrawVAlign&&(n.Direction=2)),a.DrawAlign>=0&&(0==a.DrawAlign?n.TextAlign="left":1==a.DrawAlign?n.TextAlign="center":2==a.DrawAlign&&(n.TextAlign="right")),a.DrawFontSize>0&&(n.FixedFontSize=a.DrawFontSize),a.Background&&(n.TextBG=a.Background),t.ChartPaint.push(n)},this.CreateMACD=function(t,e,a,i){var r=new Mt;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}var s=e+1;r.Data.Data=a.Data;var o=this.GetDefaultColor(i);a.Color&&(o=this.GetColor(a.Color)),t.TitlePaint[s].Data[i]=new Oe(r.Data,a.Name,o),t.ChartPaint.push(r)},this.CreatePointDot=function(t,e,a,i){var r=new ct;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.Radius&&(r.Radius=a.Radius),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.Radius=n)}var s=e+1;r.Data.Data=a.Data,t.TitlePaint[s].Data[i]=new Oe(r.Data,a.Name,r.Color),t.ChartPaint.push(r)},this.CreateStick=function(t,e,a,i){var r=new dt;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}var s=e+1;r.Data.Data=a.Data,t.TitlePaint[s].Data[i]=new Oe(r.Data,a.Name,r.Color),t.ChartPaint.push(r)},this.CreateLineStick=function(t,e,a,i){var r=new ft;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}var s=e+1;r.Data.Data=a.Data,t.TitlePaint[s].Data[i]=new Oe(r.Data,a.Name,r.Color),t.ChartPaint.push(r)},this.CreateStraightLine=function(t,e,a,i){var r=new st;if(r.DrawType=1,r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}var s=e+1;r.Data.Data=a.Draw.DrawData,"DRAWLINE"==a.Name&&(t.TitlePaint[s].Data[i]=new Oe(r.Data,null,r.Color)),t.ChartPaint.push(r)},this.CreateVolStick=function(t,e,a,i,r){var n=new mt;n.Canvas=t.Canvas,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,n.KLineDrawType=t.KLineDrawType,a.Color?n.Color=this.GetColor(a.Color):n.Color=this.GetDefaultColor(i);var s=e+1;n.Data.Data=a.Data,n.HistoryData=r,t.TitlePaint[s].Data[i]=new Oe(n.Data,a.Name,n.Color),t.ChartPaint.push(n)},this.CreateBand=function(t,e,a,i){var r=new bt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.FirstColor=a.Draw.Color[0],r.SecondColor=a.Draw.Color[1],r.Data.Data=a.Draw.DrawData,t.ChartPaint.push(r)},this.CreateFillRGN=function(t,e,a,i){var r=new wt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data.Data=a.Draw.DrawData,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),t.ChartPaint.push(r)},this.CreateFillRGN2=function(t,e,a,i){var r=new Ft;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data.Data=a.Draw.DrawData,t.ChartPaint.push(r)},this.CreateFillBGRGN=function(t,e,a,i){var r=new At;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data.Data=a.Draw.DrawData,t.ChartPaint.push(r)},this.CreateFLOATRGN=function(t,e,a,i){var r=new Et;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data.Data=a.Draw.DrawData,t.ChartPaint.push(r)},this.CreateKLine=function(t,e,a,i){var r=new et;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data.Data=a.Draw.DrawData,r.IsShowMaxMinPrice=!1,r.IsShowKTooltip=!1,a.Color&&(r.UnchagneColor=r.DownColor=r.UpColor=this.GetColor(a.Color)),t.ChartPaint.push(r)},this.CreateDrawColorKLine=function(t,e,a,i){var r=new at;r.Canvas=t.Canvas,r.Name=a.Name,r.DrawName="DRAWCOLORKLINE",r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data.Data=a.Draw.DrawData,he.IsBool(a.Draw.IsEmptyBar)&&(r.IsEmptyBar=a.Draw.IsEmptyBar),a.Draw.Color&&(r.Color=a.Draw.Color),t.ChartPaint.push(r)},this.CreatePolyLine=function(t,e,a,i){var r=new st;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.IsDotLine&&(r.IsDotLine=!0),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}var s=e+1;r.Data.Data=a.Draw.DrawData,t.TitlePaint[s].Data[i]=new Oe(r.Data," ",r.Color),t.ChartPaint.push(r)},this.CreateChartSlopeLine=function(t,e,a,i){var r=new ut;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.IsDotLine&&(r.IsDotLine=!0),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}var s=e+1;r.Data.Data=a.Draw.DrawData.Data,r.Option=a.Draw.DrawData.Option,t.TitlePaint[s].Data[i]=new Oe(r.Data,null,r.Color),t.ChartPaint.push(r)},this.CreateChartVericaltLine=function(t,e,a,i){var r=new Ct;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}this.SetChartLineDash(r,a.Draw.DrawData),r.Data.Data=a.Draw.DrawData.Data,t.ChartPaint.push(r)},this.SetChartLineDash=function(t,e){if(he.IsNumber(e.LineType)){var a=e.LineType,i=c();switch(a){case 1:t.LineType=[10*i,10*i];break;case 2:t.LineType=[0,10*i],t.LineCap="square";break;case 3:t.LineType=[10*i,3*i,3*i,3*i];break;case 4:t.LineType=[10*i,3*i,3*i,3*i,3*i,3*i]}}else if(he.IsString(e.LineType)){for(var r=e.LineType.split(","),n=[],s=0;s<r.length;++s)n.push(parseInt(r[s]));t.LineType=n}},this.CreateChartHorizontalLine=function(t,e,a,i){var r=new pt;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}this.SetChartLineDash(r,a.Draw.DrawData),r.ExtendType=a.Draw.DrawData.Extend,r.Data.Data=a.Draw.DrawData.Data,t.ChartPaint.push(r)},this.CreateBackgroud=function(t,e,a,i){var r=new Ot;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Draw&&a.Draw.DrawData){var n=a.Draw.DrawData;r.Color=n.Color,r.ColorAngle=n.Angle,n.Data&&(r.Data.Data=n.Data)}t.ChartPaint.push(r)},this.CreateLineMultiData=function(t,e,a,i){var r=new Dt;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Draw&&a.Draw.DrawData){var n=a.Draw.DrawData;r.Color=n.Color,n.PointColor&&(r.PointColor=n.PointColor),he.IsPlusNumber(n.PointRadius)&&(r.PointRadius=n.PointRadius),he.IsPlusNumber(n.LineWidth)&&(r.LineWidth=n.LineWidth),n.Data&&(r.Data.Data=n.Data)}var s=e+1,o=new Oe(r.Data,a.Name,r.Color);o.DataType="MULTI_POINT_LINE",t.TitlePaint[s].Data[i]=o,t.ChartPaint.push(r)},this.CreateTextLine=function(t,e,a,i){var r=new Rt;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Draw&&a.Draw.DrawData){var n=a.Draw.DrawData;r.Text=n.Text,r.Line=n.Line,r.Price=n.Price}t.ChartPaint.push(r)},this.CreateNumberText=function(t,e,a,i){var r=new St;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.ReloadResource(),r.TextAlign="center",a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.IsDrawAbove?r.Direction=1:r.Direction=2,a.Draw.Position&&(r.Position=a.Draw.Position);r.Data.Data=a.Draw.DrawData.Value,r.Text=a.Draw.DrawData.Text,t.ChartPaint.push(r)},this.CreateDrawText=function(t,e,a,i){var r=new St;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.ReloadResource(),a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.IsDrawAbove?r.Direction=1:r.Direction=0;r.DrawData=a.Draw.DrawData,t.ChartPaint.push(r)},this.CreateIcon=function(t,e,a,i){var r=new St;r.Canvas=t.Canvas,r.TextAlign="center",r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Direction=2,a.IsDrawAbove&&(r.Direction=1),a.DrawVAlign>=0&&(0==a.DrawVAlign?r.Direction=1:1==a.DrawVAlign?r.Direction=0:2==a.DrawVAlign&&(r.Direction=2)),a.DrawAlign>=0&&(0==a.DrawAlign?r.TextAlign="left":1==a.DrawAlign?r.TextAlign="center":2==a.DrawAlign&&(r.TextAlign="right"));r.Data.Data=a.Draw.DrawData;var n=a.Draw.Icon;1==n.IconFont?(r.IconFont={Family:n.Family,Text:n.Symbol,Color:n.Color},a.Color&&(r.IconFont.Color=this.GetColor(a.Color))):(r.Text=n.Symbol,a.Color?r.Color=this.GetColor(a.Color):n.Color?r.Color=n.Color:r.Color="rgb(0,0,0)"),a.DrawFontSize>0&&(r.FixedFontSize=a.DrawFontSize),t.ChartPaint.push(r)},this.CreateChannel=function(t,e,a,i){var r=new Nt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Draw.AreaColor?r.AreaColor=a.Draw.AreaColor:a.Color?r.AreaColor=this.GetColor(a.Color):r.AreaColor=this.GetDefaultColor(i),a.Draw.Border.Color?r.LineColor=a.Draw.Border.Color:r.LineColor=null,a.Draw.Border.Dotted&&(r.LineDotted=a.Draw.Border.Dotted),a.Draw.Border.Width>0&&(r.LineWidth=a.Draw.Border.Width),r.Data.Data=a.Draw.DrawData,t.ChartPaint.push(r)},this.CreatePartLine=function(t,e,a,i){var r=new lt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data.Data=a.Draw.DrawData,t.ChartPaint.push(r)},this.CreateMultiLine=function(t,e,a,i){var r=new Bt;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data=t.ChartPaint[0].Data,r.Lines=a.Draw.DrawData,a.Draw.LineDash&&(r.LineDash=a.Draw.LineDash),he.IsNumber(a.Draw.LineWidth)&&(r.LineWidth=a.Draw.LineWidth),a.Draw.Arrow){var n=a.Draw.Arrow;1==n.Start&&(r.Arrow.Start=!0),1==n.End&&(r.Arrow.End=!0),he.IsNumber(n.Angle)&&(r.ArrawAngle=n.Angle),he.IsNumber(n.Length)&&(r.ArrawLength=n.Length),he.IsNumber(n.LineWidth)&&(r.ArrawLineWidth=n.LineWidth)}t.ChartPaint.push(r)},this.CreateMultiBar=function(t,e,a,i){var r=new kt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data=t.ChartPaint[0].Data,r.Bars=a.Draw.DrawData;var n=e+1,s=new Oe({KData:r.Data,BarData:r.Bars},a.Name,null);s.IsShow=!1,s.DataType="MULTI_BAR",t.TitlePaint[n].Data[i]=s,t.ChartPaint.push(r)},this.CreateMultiText=function(t,e,a,i){var r=new Yt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data=t.ChartPaint[0].Data,r.Texts=a.Draw.DrawData,t.ChartPaint.push(r)},this.CreateMultiSVGIcon=function(t,e,a,i){var r=new Ht;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data=t.ChartPaint[0].Data,r.Family=a.Draw.DrawData.Family,r.Icon=a.Draw.DrawData.Icon,t.ChartPaint.push(r)},this.CreateMulitHtmlDom=function(t,e,a,i){var r=new Vt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.HQChart=t,r.Data=t.ChartPaint[0].Data,r.Texts=a.Draw.DrawData,r.DrawCallback=a.Draw.Callback,t.ChartPaint.push(r)},this.CreateColorKLine=function(t,e,a,i){var r=new at;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data=t.ChartPaint[0].Data,r.KLineColor=a.Draw.DrawData.KLine,a.Color&&(r.Color=a.Color),t.ChartPaint.push(r)},this.CreateRectangle=function(t,e,a,i){var r=new Pt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Color=[a.Draw.DrawData.Color],r.Rect=a.Draw.DrawData.Rect,a.Color&&(r.BorderColor=this.GetColor(a.Color)),t.ChartPaint.push(r)},this.CreateScriptOverlayLine=function(t,e,a,i){var r=new ht;if(r.Canvas=t.Canvas,r.DrawType=1,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}a.IsDotLine&&(r.IsDotLine=!0),0==a.IsShow&&(r.IsShow=!1);var s=e+1;r.Data.Data=a.Draw.DrawData.Data,r.MainData.Data=a.Draw.DrawData.MainData,a.Draw.DrawData.Title&&(t.TitlePaint[s].Data[i]=new Oe(r.Data,a.Draw.DrawData.Title,r.Color)),t.ChartPaint.push(r)},this.CreateSelfKLine=function(t,e,a){var i=new et;i.Canvas=t.Canvas,i.Name="Self Kline",i.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,i.ChartFrame=t.Frame.SubFrame[e].Frame,i.Data=a,i.IsShowMaxMinPrice=!1,i.IsShowKTooltip=!1,i.DrawType=this.KLineType,t.ChartPaint.push(i)},this.BindInstructionData=function(t,e,a){if(!(null==this.OutVar||this.OutVar.length<0)){var i="";for(var r in this.Arguments){var n=this.Arguments[r];i.length>0&&(i+=","),i+=n.Value.toString()}if(i.length>0&&(i="("+i+")"),2==this.InstructionType){var s=this.OutVar[this.OutVar.length-1];return t.SetInstructionData(this.InstructionType,{Data:s.Data,Name:this.Name,Param:i,ID:this.ID}),!0}if(1==this.InstructionType){var o,h;for(var l in this.OutVar){var u=this.OutVar[l];"ENTERLONG"==u.Name?o=u.Data:"EXITLONG"==u.Name&&(h=u.Data)}return t.SetInstructionData(this.InstructionType,{Buy:o,Sell:h,Name:this.Name,Param:i,ID:this.ID}),!0}}},this.BindData=function(t,e,a){if(0==e&&this.InstructionType)return void this.BindInstructionData(t,e,a);if(t.DeleteIndexPaint(e),0==e&&t.ShowKLine(!0),!(null==this.OutVar||this.OutVar.length<0)){null!=this.KLineType&&(0===this.KLineType||1===this.KLineType||2===this.KLineType?this.CreateSelfKLine(t,e,a):-1===this.KLineType&&0==e&&t.ShowKLine(!1)),e>=1&&t.Frame&&(t.Frame.SubFrame[e].Frame.YSplitOperator.FloatPrecision=this.FloatPrecision,this.YSpecificMaxMin&&(t.Frame.SubFrame[e].Frame.YSpecificMaxMin=this.YSpecificMaxMin),this.YSplitScale&&(t.Frame.SubFrame[e].Frame.YSplitScale=this.YSplitScale));for(var i in this.OutVar){var r=this.OutVar[i];if(!0!==r.IsExData&&(1e3!=r.Type&&1001!=r.Type)){if(0==r.Type)r.IsOverlayLine?this.CreateOverlayLine(t,e,r,i):this.CreateLine(t,e,r,i);else if(1==r.Type)switch(r.Draw.DrawType){case"STICKLINE":this.CreateBar(t,e,r,i);break;case"DRAWTEXT":case"SUPERDRAWTEXT":this.CreateText(t,e,r,i);break;case"DRAWLINE":this.CreateStraightLine(t,e,r,i);break;case"DRAWBAND":this.CreateBand(t,e,r,i);break;case"FILLRGN":this.CreateFillRGN(t,e,r,i);break;case"FILLRGN2":this.CreateFillRGN2(t,e,r,i);break;case"FILLTOPRGN":case"FILLBOTTOMRGN":case"FILLVERTICALRGN":this.CreateFillBGRGN(t,e,r,i);break;case"FLOATRGN":this.CreateFLOATRGN(t,e,r,i);break;case"DRAWKLINE":case"DRAWKLINE1":this.CreateKLine(t,e,r,i);break;case"DRAWCOLORKLINE":this.CreateDrawColorKLine(t,e,r,i);break;case"DRAWKLINE_IF":this.CreateKLine(t,e,r,i);break;case"POLYLINE":this.CreatePolyLine(t,e,r,i);break;case"DRAWGBK":case"DRAWGBK2":this.CreateBackgroud(t,e,r,i);break;case"DRAWTEXT_LINE":this.CreateTextLine(t,e,r,i);break;case"DRAWNUMBER":case"DRAWNUMBER_FIX":case"DRAWTEXT_FIX":this.CreateNumberText(t,e,r,i);break;case"DRAWICON":case"ICON":this.CreateIcon(t,e,r,i);break;case"DRAWCHANNEL":this.CreateChannel(t,e,r,i);break;case"PARTLINE":this.CreatePartLine(t,e,r,i);break;case"DRAWRECTREL":this.CreateRectangle(t,e,r,i);break;case"DRAWTEXTABS":case"DRAWTEXTREL":this.CreateDrawText(t,e,r,i);break;case"DRAWOVERLAYLINE":this.CreateScriptOverlayLine(t,e,r,i);break;case"DRAWSL":this.CreateChartSlopeLine(t,e,r,i);break;case"VERTLINE":this.CreateChartVericaltLine(t,e,r,i);break;case"HORLINE":this.CreateChartHorizontalLine(t,e,r,i);break;case"MULTI_LINE":this.CreateMultiLine(t,e,r,i);break;case"MULTI_BAR":this.CreateMultiBar(t,e,r,i);break;case"MULTI_TEXT":this.CreateMultiText(t,e,r,i);break;case"MULTI_SVGICON":this.CreateMultiSVGIcon(t,e,r,i);break;case"MULTI_HTMLDOM":this.CreateMulitHtmlDom(t,e,r,i);break;case"COLOR_KLINE":this.CreateColorKLine(t,e,r,i);break;case"KLINE_BG":this.CreateBackgroud(t,e,r,i);break;case"MULTI_POINT_LINE":this.CreateLineMultiData(t,e,r,i)}else 2==r.Type?this.CreateMACD(t,e,r,i):3==r.Type?this.CreatePointDot(t,e,r,i):4==r.Type?this.CreateLineStick(t,e,r,i):5==r.Type?this.CreateStick(t,e,r,i):6==r.Type&&this.CreateVolStick(t,e,r,i,a);var n=t.TitlePaint[e+1];n&&n.Data&&i<n.Data.length&&(this.StringFormat>0&&(n.Data[i].StringFormat=this.StringFormat),this.FloatPrecision>=0&&(n.Data[i].FloatPrecision=this.FloatPrecision),this.OutName&&this.OutName.length>0&&this.Arguments&&this.Arguments.length>0&&n.SetDynamicTitle(this.OutName,this.Arguments))}}var s=e+1;if(t.TitlePaint[s].Title=this.Name,!this.IsShortTitle){var o="";for(var h in this.Arguments){var l=this.Arguments[h];o.length>0&&(o+=","),o+=l.Value.toString()}o.length>0&&(t.TitlePaint[s].Title=this.Name+"("+o+")")}return this.TitleFont&&(t.TitlePaint[s].Font=this.TitleFont),!0}},this.GetDefaultColor=function(t){var e=null;return $r&&$r.Index&&$r.Index.LineColor&&(e=$r.Index.LineColor),e&&Array.isArray(e)||(e=["rgb(255,174,0)","rgb(25,199,255)","rgb(175,95,162)","rgb(236,105,65)","rgb(68,114,196)","rgb(229,0,79)","rgb(0,128,255)","rgb(252,96,154)","rgb(42,230,215)","rgb(24,71,178)"]),e[parseInt(t)%(e.length-1)]},this.GetColor=function(t){if(0==t.indexOf("RGB("))return t.toLowerCase();if(0==t.indexOf("rgb("))return t;if(0==t.indexOf("RGBA("))return t.toLowerCase();if(0==t.indexOf("rgba("))return t;var e=ji.ColorVarToRGB(t);return e||"rgb(30,144,255)"}}function Ji(t,e,a,i){this.newMethod=zi,this.newMethod(t,e,a,i),delete this.newMethod,this.ClassName="OverlayScriptIndex",this.OverlayIndex=null,this.BindData=function(t,e,a){if(this.OverlayIndex&&1==this.OverlayIndex.IsOverlay&&(this.OverlayIndex.Frame.ChartPaint=[],!(null==this.OutVar||this.OutVar.length<0))){var i={Data:[],Title:this.Name},r="";for(var n in this.Arguments){var s=this.Arguments[n];r.length>0&&(r+=","),r+=s.Value.toString()}r.length>0&&(i.Title=this.Name+"("+r+")");var o=e+1,h=t.TitlePaint[o];h.OverlayIndex.set(this.OverlayIndex.Identify,i),this.OverlayIndex.Frame.Frame.Title=i.Title,this.OutName&&this.OutName.length>0&&this.Arguments&&this.Arguments.length>0&&h.SetDynamicTitle(this.OutName,this.Arguments,this.OverlayIndex.Identify);for(var n in this.OutVar){var l=this.OutVar[n];if(!0!==l.IsExData)if(0==l.Type)this.CreateLine(t,e,l,n);else if(1==l.Type)switch(l.Draw.DrawType){case"STICKLINE":this.CreateBar(t,e,l,n);break;case"DRAWTEXT":case"SUPERDRAWTEXT":this.CreateText(t,e,l,n);break;case"DRAWLINE":this.CreateStraightLine(t,e,l,n);break;case"DRAWBAND":this.CreateBand(t,e,l,n);break;case"DRAWKLINE":case"DRAWKLINE_IF":this.CreateKLine(t,e,l,n);break;case"POLYLINE":this.CreatePolyLine(t,e,l,n);break;case"DRAWNUMBER":case"DRAWNUMBER_FIX":case"DRAWTEXT_FIX":this.CreateNumberText(t,e,l,n);break;case"DRAWICON":this.CreateIcon(t,e,l,n);break;case"DRAWCHANNEL":this.CreateChannel(t,e,l,n);break;case"DRAWTEXT_LINE":this.CreateTextLine(t,e,l,n);break;case"VERTLINE":this.CreateChartVericaltLine(t,e,l,n);break;case"HORLINE":this.CreateChartHorizontalLine(t,e,l,n);break;case"MULTI_LINE":this.CreateMultiLine(t,e,l,n);break;case"MULTI_BAR":this.CreateMultiBar(t,e,l,n);break;case"MULTI_TEXT":this.CreateMultiText(t,e,l,n);break;case"MULTI_SVGICON":this.CreateMultiSVGIcon(t,e,l,n);break;case"MULTI_HTMLDOM":this.CreateMulitHtmlDom(t,e,l,n);break;case"KLINE_BG":this.CreateBackgroud(t,e,l,n)}else 2==l.Type?this.CreateMACD(t,e,l,n):3==l.Type?this.CreatePointDot(t,e,l,n):4==l.Type?this.CreateLineStick(t,e,l,n):5==l.Type?this.CreateStick(t,e,l,n):6==l.Type&&this.CreateVolStick(t,e,l,n,a)}return!0}},this.RecvResultData=function(t,e){var a=e.HQChart,i=e.WindowIndex,r=e.HistoryData;e.Self.OutVar=t,e.Self.BindData(a,i,r),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw();var n=a.GetOverlayIndexEvent();if(n){var s=e.Self,o={OutVar:s.OutVar,WindowIndex:i,Name:s.Name,Arguments:s.Arguments,HistoryData:r,Identify:s.OverlayIndex.Identify,Stock:{Symbol:a.Symbol,Name:a.Name}};n.Callback(n,o,s)}},this.CreateLine=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new st;if(s.Canvas=t.Canvas,s.DrawType=1,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i),a.LineWidth){var o=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(o)&&o>0&&(s.LineWidth=o)}0==a.IsShow&&(s.IsShow=!1);var h=e+1;s.Data.Data=a.Data,t.TitlePaint[h].OverlayIndex.get(r.Identify).Data[i]=new Oe(s.Data,a.Name,s.Color),n.ChartPaint.push(s)},this.CreateBar=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new vt;s.Canvas=t.Canvas,a.Draw.Width>0?s.Width=a.Draw.Width:s.Width=1,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i);s.Data.Data=a.Draw.DrawData,n.ChartPaint.push(s)},this.CreateText=function(t,e,a,i,r){var n=this.OverlayIndex,s=n.Frame,o=new St;o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=s.Frame.ChartBorder,o.ChartFrame=s.Frame,o.Identify=n.Identify,o.ReloadResource(),a.Color?o.Color=this.GetColor(a.Color):o.Color=this.GetDefaultColor(i);a.Draw.Position&&(o.Position=a.Draw.Position),a.Draw.DrawData&&(o.Data.Data=a.Draw.DrawData),o.Text=a.Draw.Text,a.Draw.Direction>0&&(o.Direction=a.Draw.Direction),a.Draw.YOffset>0&&(o.YOffset=a.Draw.YOffset),a.Draw.TextAlign&&(o.TextAlign=a.Draw.TextAlign),s.ChartPaint.push(o)},this.CreateMACD=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new Mt;s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify;var o=e+1;s.Data.Data=a.Data;var h=t.TitlePaint[o],l=this.GetDefaultColor(i);a.Color&&(l=this.GetColor(a.Color)),h.OverlayIndex.get(r.Identify).Data[i]=new Oe(s.Data,a.Name,l),n.ChartPaint.push(s)},this.CreatePointDot=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new ct;if(s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i),a.Radius&&(s.Radius=a.Radius),a.LineWidth){var o=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(o)&&o>0&&(s.Radius=o)}var h=e+1;s.Data.Data=a.Data,t.TitlePaint[h].OverlayIndex.get(r.Identify).Data[i]=new Oe(s.Data,a.Name,s.Color),n.ChartPaint.push(s)},this.CreateStick=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new dt;if(s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i),a.LineWidth){var o=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(o)&&o>0&&(s.LineWidth=o)}var h=e+1;s.Data.Data=a.Data,t.TitlePaint[h].OverlayIndex.get(r.Identify).Data[i]=new Oe(s.Data,a.Name,s.Color),n.ChartPaint.push(s)},this.CreateLineStick=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new ft;if(s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i),a.LineWidth){var o=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(o)&&o>0&&(s.LineWidth=o)}var h=e+1;s.Data.Data=a.Data,t.TitlePaint[h].OverlayIndex.get(r.Identify).Data[i]=new Oe(s.Data,a.Name,s.Color),n.ChartPaint.push(s)},this.CreateStraightLine=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new st;if(s.DrawType=1,s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i),a.LineWidth){var o=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(o)&&o>0&&(s.LineWidth=o)}s.Data.Data=a.Draw.DrawData,n.ChartPaint.push(s)},this.CreateVolStick=function(t,e,a,i,r){var n=this.OverlayIndex,s=n.Frame,o=new mt;o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=s.Frame.ChartBorder,o.ChartFrame=s.Frame,o.Identify=n.Identify,o.KLineDrawType=t.KLineDrawType,a.Color?o.Color=this.GetColor(a.Color):o.Color=this.GetDefaultColor(i);var h=e+1;o.Data.Data=a.Data,o.HistoryData=r,t.TitlePaint[h].OverlayIndex.get(n.Identify).Data[i]=new Oe(o.Data,a.Name,o.Color),s.ChartPaint.push(o)},this.CreateBand=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new bt;s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,s.FirstColor=a.Draw.Color[0],s.SecondColor=a.Draw.Color[1],s.Data.Data=a.Draw.DrawData,n.ChartPaint.push(s)},this.CreateKLine=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new et;s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,s.Data.Data=a.Draw.DrawData,s.IsShowMaxMinPrice=!1,s.IsShowKTooltip=!1,a.Color&&(s.UnchagneColor=s.DownColor=s.UpColor=this.GetColor(a.Color)),n.ChartPaint.push(s)},this.CreatePolyLine=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new st;if(s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i),a.LineWidth){var o=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(o)&&o>0&&(s.LineWidth=o)}var h=e+1;s.Data.Data=a.Draw.DrawData,t.TitlePaint[h].OverlayIndex.get(r.Identify).Data[i]=new Oe(line.Data," ",line.Color),n.ChartPaint.push(s)},this.CreateNumberText=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new St;s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,s.ReloadResource(),s.TextAlign="center",a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i),a.IsDrawAbove?s.Direction=1:s.Direction=2,a.Draw.Position&&(s.Position=a.Draw.Position);s.Data.Data=a.Draw.DrawData.Value,s.Text=a.Draw.DrawData.Text,n.ChartPaint.push(s)},this.CreateTextLine=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new Rt;if(s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,a.Draw&&a.Draw.DrawData){var o=a.Draw.DrawData;s.Text=o.Text,s.Line=o.Line,s.Price=o.Price}n.ChartPaint.push(s)},this.CreateIcon=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new St;s.Canvas=t.Canvas,s.TextAlign="center",s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify;s.Data.Data=a.Draw.DrawData;var o=a.Draw.Icon;1==o.IconFont?s.IconFont={Family:o.Family,Text:o.Symbol,Color:o.Color}:(s.Text=o.Symbol,a.Color?s.Color=this.GetColor(a.Color):o.Color?s.Color=o.Color:s.Color="rgb(0,0,0)"),n.ChartPaint.push(s)},this.CreateChannel=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new Nt;s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,a.Draw.AreaColor?s.AreaColor=a.Draw.AreaColor:a.Color?s.AreaColor=this.GetColor(a.Color):s.AreaColor=this.GetDefaultColor(i),a.Draw.Border.Color?s.LineColor=a.Draw.Border.Color:s.LineColor=null,a.Draw.Border.Dotted&&(s.LineDotted=a.Draw.Border.Dotted),a.Draw.Border.Width>0&&(s.LineWidth=a.Draw.Border.Width),s.Data.Data=a.Draw.DrawData,n.ChartPaint.push(s)},this.CreatePartLine=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new lt;s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,s.Data.Data=a.Draw.DrawData,n.ChartPaint.push(s)},this.CreateMultiLine=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new Bt;if(s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,s.Data=t.ChartPaint[0].Data,s.Lines=a.Draw.DrawData,a.Draw.LineDash&&(s.LineDash=a.Draw.LineDash),he.IsNumber(a.Draw.LineWidth)&&(s.LineWidth=a.Draw.LineWidth),a.Draw.Arrow){var o=a.Draw.Arrow;1==o.Start&&(s.Arrow.Start=!0),1==o.End&&(s.Arrow.End=!0),he.IsNumber(o.Angle)&&(s.ArrawAngle=o.Angle),he.IsNumber(o.Length)&&(s.ArrawLength=o.Length),he.IsNumber(o.LineWidth)&&(s.ArrawLineWidth=o.LineWidth)}n.ChartPaint.push(s)},this.CreateBackgroud=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new Ot;if(s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,a.Draw&&a.Draw.DrawData){var o=a.Draw.DrawData;s.Color=o.Color,s.ColorAngle=o.Angle,o.Data&&(s.Data.Data=o.Data)}n.ChartPaint.push(s)},this.CreateMultiBar=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new kt;s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,s.Data=t.ChartPaint[0].Data,s.Bars=a.Draw.DrawData;var o=e+1,h=t.TitlePaint[o],l=new Oe({KData:s.Data,BarData:s.Bars},a.Name,null);l.IsShow=!1,l.DataType="MULTI_BAR",h.OverlayIndex.get(r.Identify).Data[i]=l,n.ChartPaint.push(s)},this.CreateMultiText=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new Yt;s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,s.Data=t.ChartPaint[0].Data,s.Texts=a.Draw.DrawData,n.ChartPaint.push(s)},this.CreateMultiSVGIcon=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new Ht;s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,s.Data=t.ChartPaint[0].Data,s.Family=a.Draw.DrawData.Family,s.Icon=a.Draw.DrawData.Icon,n.ChartPaint.push(s)},this.CreateMulitHtmlDom=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new Vt;s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,s.HQChart=t,s.Data=t.ChartPaint[0].Data,s.Texts=a.Draw.DrawData,s.DrawCallback=a.Draw.Callback,n.ChartPaint.push(s)},this.CreateChartVericaltLine=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new Ct;if(s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,s.HQChart=t,a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i),a.LineWidth){var o=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(o)&&o>0&&(s.LineWidth=o)}this.SetChartLineDash(s,a.Draw.DrawData),s.Data.Data=a.Draw.DrawData.Data,n.ChartPaint.push(s)},this.CreateChartHorizontalLine=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,s=new pt;if(s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=n.Frame.ChartBorder,s.ChartFrame=n.Frame,s.Identify=r.Identify,s.HQChart=t,a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i),a.LineWidth){var o=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(o)&&o>0&&(s.LineWidth=o)}this.SetChartLineDash(s,a.Draw.DrawData),s.ExtendType=a.Draw.DrawData.Extend,s.Data.Data=a.Draw.DrawData.Data,n.ChartPaint.push(s)},this.CreateSelfKLine=function(t,e,a){var i=this.OverlayIndex,r=i.Frame,n=new et;n.Canvas=t.Canvas,n.Name="Self Kline",n.ChartBorder=r.Frame.ChartBorder,n.ChartFrame=r.Frame,n.Identify=i.Identify,n.Data=a,n.IsShowMaxMinPrice=!1,n.IsShowKTooltip=!1,n.DrawType=this.KLineType,r.ChartPaint.push(n)},this.GetDefaultColor=function(t){var e=["rgb(24,71,178)","rgb(42,230,215)","rgb(252,96,154)","rgb(0,128,255)","rgb(229,0,79)","rgb(68,114,196)","rgb(255,174,0)","rgb(25,199,255)","rgb(175,95,162)","rgb(236,105,65)"];return e[parseInt(t)%(e.length-1)]}}function qi(t,e,a,i,r){this.newMethod=r?Ji:zi,this.newMethod(t,e,a,i),delete this.newMethod,this.ClassName="APIScriptIndex",this.IsOverlayIndex=1==r,this.ApiUrl,this.HQDataType,this.Version=1,i&&i.API&&(i.API.Url&&(this.ApiUrl=i.API.Url),i.API.Name&&(this.Name=this.ID=i.API.Name),i.API.ID&&(this.ID=i.API.ID),i.API.Version>0&&(this.Version=i.API.Version),!0===i.API.IsUsePageData&&(this.IsUsePageData=i.API.IsUsePageData)),this.Super_CopyTo=this.CopyTo,this.CopyTo=function(t){this.Super_CopyTo(t),t.ApiUrl=this.ApiUrl,t.Version=this.Version,t.IsOverlayIndex=this.IsOverlayIndex},this.ExecuteScript=function(t,e,a){Fr.Complier.Log("[APIScriptIndex::ExecuteScript] name, Arguments ",this.Name,this.Arguments);var i=In.KLINE_ID,r=null;"MinuteChartContainer"===t.ClassName||"MinuteChartHScreenContainer"===t.ClassName?(i=t.DayCount>1?In.MULTIDAY_MINUTE_ID:In.MINUTE_ID,r=a.GetDateRange()):"HistoryMinuteChartContainer"===t.ClassName?i=In.HISTORY_MINUTE_ID:r=a.GetDateRange();var s=[];if(this.Arguments)for(var o in this.Arguments){var h=this.Arguments[o];s.push({name:h.Name,value:h.Value})}var l;t.GetRequestDataCount&&(l=t.GetRequestDataCount());var u=this,c={indexname:this.ID,symbol:t.Symbol,script:this.Script,args:s,period:t.Period,right:t.Right,hqdatatype:i};if(r&&(c.DateRange=r),l&&(c.maxdatacount=l.MaxRequestDataCount,c.maxminutedaycount=l.MaxRequestMinuteDayCount),i!=In.MULTIDAY_MINUTE_ID&&i!=In.MINUTE_ID||(c.daycount=t.DayCount),this.HQDataType=i,t.NetworkFilter){var d={Name:"APIScriptIndex::ExecuteScript",Explain:"指标计算",Request:{Url:u.ApiUrl,Type:"POST",Data:c},Self:this,HQChart:t,PreventDefault:!1};if(t.NetworkFilter(d,function(i){2==u.Version?u.RecvAPIData2(i,t,e,a):u.RecvAPIData(i,t,e,a)}),1==d.PreventDefault)return}n.HttpRequest({url:u.ApiUrl,data:c,type:"post",dataType:"json",async:!0,success:function(i){u.RecvAPIData(i,t,e,a)},error:function(t){u.RecvError(t)}})},this.RecvAPIData2=function(t,e,a,i){if(Fr.Complier.Log("[APIScriptIndex::RecvAPIData2] recv data ",this.Name,t),this.HQDataType==In.KLINE_ID?(this.OutVar=this.ConvertToLocalData(t,e),Fr.Complier.Log("[APIScriptIndex::RecvAPIData2] conver to OutVar ",this.OutVar)):this.HQDataType==In.MINUTE_ID?(this.OutVar=this.ConvertToLocalData(t,e),Fr.Complier.Log("[APIScriptIndex::RecvAPIData2] conver to OutVar ",this.OutVar)):this.HQDataType==In.MULTIDAY_MINUTE_ID&&(this.OutVar=this.ConvertToLocalData(t,e),Fr.Complier.Log("[APIScriptIndex::RecvAPIData2] conver to OutVar ",this.OutVar)),this.BindData(e,a,i),e.UpdataDataoffset(),e.UpdateFrameMaxMin(),e.Draw(),e.GetIndexEvent){var r=e.GetIndexEvent();if(r){var t={OutVar:this.OutVar,WindowIndex:a,Name:this.Name,Arguments:this.Arguments,HistoryData:i,Stock:{Symbol:e.Symbol,Name:e.Name}};r.Callback(r,t,this)}}},this.ConvertToLocalData=function(t,e){var a=t.OutVar;if("MinuteChartContainer"==e.ClassName||"MinuteChartHScreenContainer"==e.ClassName)var i=e.SourceData,r=i.GetAPIDataIndex(t.Date,t.Time);else{var i=e.ChartPaint[0].Data;if(Z.IsDayPeriod(t.Period,!0))var r=i.GetAPIDataIndex(t.Date);else var r=i.GetAPIDataIndex(t.Date,t.Time)}var n=[];for(var s in a){var o=a[s],h={Type:o.Type,Name:o.Name};if(0==o.Type){h.Data=[];for(var l=0;l<r.length;++l){var u=r[l];u.Index<0?h.Data[l]=null:h.Data[l]=o.Data[u.Index]}h.Name&&h.Name.indexOf("@NODRAW@")>=0&&(h.Name=h.Name.replace("@NODRAW@",""))}else{if(1!=o.Type)continue;h.Name=o.DrawType,h.Draw={DrawType:o.DrawType};var c=o.Draw;switch(o.DrawType){case"STICKLINE":for(var d=[],l=0;l<r.length;++l){d[l]=null;var u=r[l],f=u.Index;if(!(f<0)){var m=c.Price[f],C=c.Price2[f];he.IsNumber(m)&&he.IsNumber(C)&&(d[l]={Value:m,Value2:C})}}h.Draw.DrawData=d,h.Draw.Width=c.Width,h.Draw.Type=c.Empty;break;case"DRAWTEXT":for(var d=[],p=[],l=0;l<r.length;++l){d[l]=null;var u=r[l],f=u.Index;if(!(f<0)){var m=c.Price[f];if(he.IsNumber(m)&&(d[l]=m),Array.isArray(c.Text)){var o=c.Text[f];he.IsString(o)&&(p[l]=o)}}}Array.isArray(c.Text)?h.Draw.Text=p:h.Draw.Text=c.Text,h.Draw.DrawData=d;break;case"DRAWNUMBER":for(var d={Value:[],Text:[]},l=0;l<r.length;++l){d.Value[l]=null,d.Text[l]=null;var u=r[l],f=u.Index;if(!(f<0)){var m=c.Price[f],D=c.Number[f];he.IsNumber(m)&&he.IsNumber(D)&&(d.Value[l]=m,d.Text[l]=D.toFixed(2))}}h.Draw.DrawData=d;break;case"DRAWBAND":for(var d=[],l=0;l<r.length;++l){d[l]=null;var u=r[l],f=u.Index;if(!(f<0)){var m=c.Val1[f],C=c.Val2[f];he.IsNumber(m)&&he.IsNumber(C)&&(d[l]={Value:m,Value2:C})}}h.Draw.DrawData=d,h.Draw.Color=[c.Color1.toLowerCase(),c.Color2.toLowerCase()];break;case"DRAWKLINE":for(var d=[],l=0;l<r.length;++l){var o={Open:null,High:null,Low:null,Close:null};d[l]=o;var u=r[l],f=u.Index;if(!(f<0)){var v=c.High[f],g=c.Low[f],S=c.Open[f],T=c.Close[f];he.IsPlusNumber(v)&&he.IsPlusNumber(g)&&he.IsPlusNumber(S)&&he.IsPlusNumber(T)&&(o.Open=S,o.Close=T,o.High=v,o.Low=g)}}h.Draw.DrawData=d;break;case"DRAWTEXT_FIX":for(var d={Value:[],Text:[]},l=0;l<r.length;++l){d.Value[l]=0,d.Text[l]=null;var u=r[l],f=u.Index;if(!(f<0)){c.Cond[f]&&(d.Value[l]=1,d.Text[l]=c.Text)}}h.Draw.DrawData=d,h.Draw.Position={X:c.X,Y:c.Y,Type:c.Type};break;case"DRAWNUMBER_FIX":for(var d={Value:[],Text:[]},l=0;l<r.length;++l){d.Value[l]=null,d.Text[l]=null;var u=r[l],f=u.Index;if(!(f<0)){var y=c.Number[f];he.IsNumber(y)&&(d.Value[l]=y,d.Text[l]=he.RemoveZero(y.toFixed(2)))}}h.Draw.DrawData=d,h.Draw.Position={X:c.X,Y:c.Y,Type:c.Type};break;case"DRAWICON":var I=mn.GetDrawIcon(c.Type);I||mn.GetDrawTextIcon(c.Type),I||(I={Symbol:"🚩"}),h.Draw.Icon=I;for(var d=[],l=0;l<r.length;++l){d[l]=null;var u=r[l],f=u.Index;if(!(f<0)){var y=c.Price[f];he.IsNumber(y)&&(d[l]=y)}}h.Draw.DrawData=d;break;case"PARTLINE":for(var d=[],l=0;l<r.length;++l){d[l]={Value:null,RGB:null};var u=r[l],f=u.Index;if(!(f<0)){var x=c.Color[f];if(he.IsString(x)){var y=c.Price[f];he.IsNumber(y)&&(d[l].Value=y,d[l].RGB=x)}}}h.Draw.DrawData=d;break;case"FILLRGN":for(var d=[],l=0;l<r.length;++l){d[l]=null;var u=r[l],f=u.Index;if(!(f<0)){var x=c.Color[f];if(he.IsString(x)){var y=c.Price[f];if(he.IsNumber(y)){var L=c.Price2[f];he.IsNumber(L)&&(d[l]={Value:y,Value2:L,Color:x})}}}}h.Draw.DrawData=d,h.Draw.DrawType="FILLRGN2";break;default:continue}}for(var s in o.Attribute){var M=o.Attribute[s];switch(M){case"COLORSTICK":h.Type=2;break;case"POINTDOT":h.Radius=$r.POINTDOT.Radius,h.Type=3;break;case"CIRCLEDOT":h.Radius=$r.CIRCLEDOT.Radius,h.Type=3;break;case"DOTLINE":h.IsDotLine=!0;break;case"DRAWABOVE":h.IsDrawAbove=!0;break;case"LINESTICK":h.Type=4;break;case"STICK":h.Type=5;break;case"VOLSTICK":h.Type=6;break;case"NODRAW":h.IsShow=!1;break;case"NONE_OUT_NAME":h.NoneName=!0;break;case"NOTEXT":h.IsShowTitle=!1}0==M.indexOf("COLOR")?h.Color=M:0==M.indexOf("LINETHICK")&&(h.LineWidth=M)}n.push(h)}return n},this.RecvAPIData=function(t,e,a,i){if(Fr.Complier.Log("[APIScriptIndex::RecvAPIData] recv data ",this.Name,t),0==t.code){if(t.outdata&&t.outdata.name&&(this.Name=t.outdata.name),t.outdata.args){this.Arguments=[];for(var r in t.outdata.args){var n=t.outdata.args[r];this.Arguments.push({Name:n.name,Value:n.value})}}if(this.HQDataType==In.KLINE_ID?(this.OutVar=this.FittingData(t.outdata,e),Fr.Complier.Log("[APIScriptIndex::RecvAPIData] conver to OutVar ",this.OutVar)):this.OutVar=this.FittingMinuteData(t.outdata,e),this.BindData(e,a,i),0==this.IsLocked)e.Frame.SubFrame[a].Frame.SetLock(null);else{var s={IsLocked:!0,Callback:this.LockCallback,IndexName:this.Name,ID:this.LockID,BG:this.LockBG,Text:this.LockText,TextColor:this.LockTextColor,Font:this.LockFont,Count:this.LockCount,MinWidth:this.LockMinWidth};e.Frame.SubFrame[a].Frame.SetLock(s)}if(e.UpdataDataoffset(),e.UpdateFrameMaxMin(),e.Draw(),e.GetIndexEvent){var o=e.GetIndexEvent();if(o){var t={OutVar:this.OutVar,WindowIndex:a,Name:this.Name,Arguments:this.Arguments,HistoryData:i,Stock:{Symbol:e.Symbol,Name:e.Name}};o.Callback(o,t,this)}}}},this.FittingArray=function(t,e,a,i,r){var n=i.ChartPaint[0].Data,s=[];for(var o in t){var h=t[o],l=new z;l.Date=e[o],a&&o<a.length&&(l.Time=a[o]),l.Value=h,s.push(l)}var u;u=Z.IsDayPeriod(i.Period,!0)?n.GetFittingData(s):n.GetMinuteFittingData(s);var c=new Z;c.Data=u;return 1==r?c.GetObject():c.GetValue()},this.FittingMultiLine=function(t,e,a,i){var r=i.ChartPaint[0].Data;if(Z.IsDayPeriod(i.Period,!0)){var r=i.ChartPaint[0].Data,n=[];for(var s in t){var o=t[s];for(var h in o.Point){var l=o.Point[h];n.push(l)}}return n.sort(function(t,e){return t.Date-e.Date}),r.GetDateIndex(n),t}if(Z.IsMinutePeriod(i.Period,!0)||Z.IsTickPeriod(i.Period)){var r=i.ChartPaint[0].Data,n=[];for(var s in t){var o=t[s];for(var h in o.Point){var l=o.Point[h];n.push(l)}}return n.sort(function(t,e){return t.Date==e.Date?t.Time-e.Time:t.Date-e.Date}),r.GetDateTimeIndex(n),t}if(this.HQDataType==In.MINUTE_ID||this.HQDataType==In.MULTIDAY_MINUTE_ID){var u=i.SourceData,n=[];for(var s in t){var o=t[s];for(var h in o.Point){var l=o.Point[h];n.push(l)}}return n.sort(function(t,e){return t.Date==e.Date?t.Time-e.Time:t.Date-e.Date}),u.GetDateTimeIndex(n),t}return null},this.FittingMultiText=function(t,e,a,i){if(Z.IsDayPeriod(i.Period,!0)){var r=i.ChartPaint[0].Data;return t.sort(function(t,e){return t.Date-e.Date}),r.GetDateIndex(t),t}if(Z.IsMinutePeriod(i.Period,!0)||Z.IsTickPeriod(i.Period)){var r=i.ChartPaint[0].Data;return t.sort(function(t,e){return t.Date==e.Date?t.Time-e.Time:t.Date-e.Date}),r.GetDateTimeIndex(t),t}if(this.HQDataType==In.MINUTE_ID||this.HQDataType==In.MULTIDAY_MINUTE_ID){var n=i.SourceData;return t.sort(function(t,e){return t.Date==e.Date?t.Time-e.Time:t.Date-e.Date}),n.GetDateTimeIndex(t),t}return null},this.FittingData=function(t,e){var a=t.outvar,i=t.date,r=t.time,n=(e.ChartPaint[0].Data,[]);for(var s in a){var o=a[s],h={Name:o.name,Type:o.type};if(o.color&&(h.Color=o.color),o.data)h.Data=this.FittingArray(o.data,i,r,e),o.color&&(h.Color=o.color),o.linewidth&&(h.LineWidth=o.linewidth),0==o.isshow&&(h.IsShow=!1),1==o.isexdata&&(h.IsExData=!0),n.push(h);else if(o.Draw){var l=o.Draw,u={};if("DRAWICON"==l.DrawType)u.Icon=l.Icon,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData=this.FittingArray(l.DrawData,i,r,e),h.Draw=u,n.push(h);else if("DRAWTEXT"==l.DrawType)u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData=this.FittingArray(l.DrawData,i,r,e),h.Draw=u,n.push(h);else if("STICKLINE"==l.DrawType)u.Name=l.Name,u.Type=l.Type,u.Width=l.Width,u.DrawType=l.DrawType,u.DrawData=this.FittingArray(l.DrawData,i,r,e,1),h.Draw=u,n.push(h);else if("MULTI_LINE"==l.DrawType){u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData=this.FittingMultiLine(l.DrawData,i,r,e);for(var c in u.DrawData)this.GetKLineData(u.DrawData[c].Point,e);h.Draw=u,l.LineDash&&(u.LineDash=l.LineDash),l.Arrow&&(u.Arrow=l.Arrow),he.IsNumber(l.LineWidth)&&(u.LineWidth=l.LineWidth),n.push(h)}else if("MULTI_BAR"==l.DrawType)u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData=this.FittingMultiLine(l.DrawData,i,r,e),h.Draw=u,n.push(h);else if("MULTI_TEXT"==l.DrawType)u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData=this.FittingMultiText(l.DrawData,i,r,e),this.GetKLineData(u.DrawData,e),h.Draw=u,n.push(h);else if("MULTI_SVGICON"==l.DrawType)u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData={Icon:this.FittingMultiText(l.DrawData.Icon,i,r,e),Family:l.DrawData.Family},this.GetKLineData(u.DrawData.Icon,e),h.Draw=u,n.push(h);else if("MULTI_HTMLDOM"==l.DrawType)u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.Callback=l.Callback,u.DrawData=this.FittingMultiText(l.DrawData,i,r,e),this.GetKLineData(u.DrawData,e),h.Draw=u,n.push(h);else if("COLOR_KLINE"==l.DrawType){u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType;var d=this.FittingMultiText(l.DrawData.KLine,i,r,e),f=new _r.default;for(var s in d){var o=d[s];f.set(o.Index,o)}u.DrawData={KLine:f},l.Color&&(h.Color=l.Color),h.Draw=u,n.push(h)}else"KLINE_BG"==l.DrawType?(u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData={},u.DrawData.Color=l.Color,u.DrawData.Angle=l.Angle,2==l.Ver?u.DrawData.Data=this.FittingKLineBG_V2(l.DrawData,e):u.DrawData.Data=this.FittingKLineBG(l.DrawData,e),h.Draw=u,h.Name=l.DrawType,n.push(h)):"MULTI_POINT_LINE"==l.DrawType&&(u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData={},u.DrawData.Color=l.Color,u.DrawData.PointRadius=l.PointRadius,u.DrawData.PointColor=l.PointColor,u.DrawData.LineWidth=l.LineWidth,u.DrawData.Data=this.FittingMultiPointLine(l.DrawData,e),h.Draw=u,n.push(h))}}return n},this.GetKLineData=function(t,e){if(t&&Array.isArray(t)){if(this.HQDataType==In.MINUTE_ID||this.HQDataType==In.MULTIDAY_MINUTE_ID)var a=e.SourceData;else var a=e.ChartPaint[0].Data;for(var i in t){var r=t[i];if(he.IsString(r.Value)&&(he.IsNumber(r.Index)&&!(r.Index<0||r.Index>=a.Data.length))){var n=r.Value.toUpperCase(),s=a.Data[r.Index];switch(n){case"HIGH":case"H":r.Value=s.High;break;case"L":case"LOW":r.Value=s.Low;break;case"C":case"CLOSE":r.Value=s.Close}}}}},this.FittingKLineBG=function(t,e){var a=e.ChartPaint[0].Data,i=[];if(Z.IsDayPeriod(e.Period,!0)){for(var r=!1,n=0,s=0;n<a.Data.length;){i[n]=0;var o=a.Data[n];if(s>=t.length)++n;else{var h=t[s];h.Date<o.Date?++s:h.Date>o.Date?++n:(r=!0,i[n]=1,++s,++n)}}if(r)return i}else if(Z.IsMinutePeriod(e.Period,!0)){for(var r=!1,n=0,s=0;n<a.Data.length;){i[n]=0;var o=a.Data[n];if(s>=t.length)++n;else{var h=t[s];h.Date<o.Date||h.Date==o.Date&&h.Time<o.Time?++s:h.Date>o.Date||h.Date==o.Date&&h.Time>o.Time?++n:(r=!0,i[n]=1,++s,++n)}}if(r)return i}return null},this.FittingKLineBG_V2=function(t,e){var a=e.ChartPaint[0].Data,i=[];if(Z.IsDayPeriod(e.Period,!0)){for(var r=!1,n=0,s=0;n<a.Data.length;++n){i[n]=0;var o=a.Data[n],h=o.Date;for(s=0;s<t.length;++s){var l=t[s];if(h>=l.Start.Date&&h<=l.End.Date){i[n]=1,r=!0;break}}}if(r)return i}else if(Z.IsMinutePeriod(e.Period,!0)){for(var u=[],n=0;n<t.length;++n){var c=t[n],d=1e4*c.Start.Date;he.IsNumber(c.Start.Time)&&(d+=c.Start.Time);var f=1e4*c.End.Date;he.IsNumber(c.End.Time)&&(f+=c.End.Time),u.push({Start:d,End:f})}for(var r=!1,n=0,s=0;n<a.Data.length;++n){i[n]=0;var o=a.Data[n],h=1e4*o.Date+o.Time;for(s=0;s<u.length;++s){var l=u[s];if(h>=l.Start&&h<=l.End){i[n]=1,r=!0;break}}}if(r)return i}return null},this.FittingMinuteData=function(t,e){var a=t.outvar,i=t.date,r=t.time,n=[];for(var s in a){var o=a[s],h={Name:o.name,Type:o.type};if(o.data)h.Data=this.FittingMinuteArray(o.data,i,r,e),o.color&&(h.Color=o.color),o.linewidth>=1&&(h.LineWidth=o.linewidth),0==o.isshow&&(h.IsShow=!1),1==o.isexdata&&(h.IsExData=!0),n.push(h);else if(o.Draw){var l=o.Draw,u={};if("DRAWICON"==l.DrawType)u.Icon=l.Icon,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData=this.FittingMinuteArray(l.DrawData,i,r,e),h.Draw=u,n.push(h);else if("DRAWTEXT"==l.DrawType)u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData=this.FittingMinuteArray(l.DrawData,i,r,e),h.Draw=u,n.push(h);else if("STICKLINE"==l.DrawType)u.Name=l.Name,u.Type=l.Type,u.Width=l.Width,u.DrawType=l.DrawType,u.DrawData=this.FittingMinuteArray(l.DrawData,i,r,e,1),h.Draw=u,n.push(h);else if("MULTI_LINE"==l.DrawType){u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData=this.FittingMultiLine(l.DrawData,i,r,e);for(var c in u.DrawData)this.GetKLineData(u.DrawData[c].Point,e);h.Draw=u,l.LineDash&&(u.LineDash=l.LineDash),l.Arrow&&(u.Arrow=l.Arrow),n.push(h)}else"MULTI_TEXT"==l.DrawType?(u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData=this.FittingMultiText(l.DrawData,i,r,e),this.GetKLineData(u.DrawData,e),h.Draw=u,n.push(h)):"MULTI_SVGICON"==l.DrawType?(u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.DrawData={Icon:this.FittingMultiText(l.DrawData.Icon,i,r,e),Family:l.DrawData.Family},this.GetKLineData(u.DrawData.Icon,e),h.Draw=u,n.push(h)):"MULTI_HTMLDOM"==l.DrawType&&(u.Text=l.Text,u.Name=l.Name,u.DrawType=l.DrawType,u.Callback=l.Callback,u.DrawData=this.FittingMultiText(l.DrawData,i,r,e),this.GetKLineData(u.DrawData,e),h.Draw=u,n.push(h))}}return n},this.FittingMinuteArray=function(t,e,a,i){var r=i.SourceData,n=[];for(var s in t){var o=t[s],h=new z;h.Date=e[s],a&&s<a.length&&(h.Time=a[s]),h.Value=o,n.push(h)}var l=r.GetMinuteFittingData(n),u=new Z;return u.Data=l,u.GetValue()},this.FittingMultiPointLine=function(t,e){var a=e.Period,i=t.Data,r=[];if(Z.IsDayPeriod(a,!0)){var n=i[0],s=e.ChartPaint[0].Data,o=s.Data[0],h=0,l=0;if(n.Date>o.Date){var u=0;for(h=0;h<s.Data.length;++h){var c=s.Data[h];if(c.Date==n.Date)break;if(c.Date>n.Date){h=u;break}u=h}}else for(l=0;l<i.length;++l){var d=i[l];if(d.Date>=o.Date)break}for(var f=null,m=h,C=l;m<s.Data.length&&C<i.length;){var c=s.Data[m],d=i[C];d.Date<=c.Date?(r[m]||(r[m]=[]),r[m].push({Date:d.Date,Value:d.Value,Data:d.Data,KDate:c.Date,Type:1}),f=d,++C):(f&&!r[m]&&(r[m]={Date:f.Date,Value:f.Value,Type:0}),++m)}if(f)for(;m<s.Data.length;++m)r[m]||(r[m]={Date:f.Date,Value:f.Value,Type:0});return r}if(Z.IsMinutePeriod(a,!0)){var s=e.ChartPaint[0].Data;return r}}}function Zi(t,e,a){this.newMethod=zi,this.newMethod(t,null,e,null),delete this.newMethod,this.JsonData,a.JsonData&&(this.JsonData=a.JsonData),this.RequestData=function(t,e,a){if(!this.JsonData)return console.warn("[LocalJsonDataIndex::RequestData] JsonData is null"),void(param.HQChart.ScriptErrorCallback&&param.HQChart.ScriptErrorCallback("json 数据不能为空"));this.OutVar=this.FittingData(this.JsonData,a),this.BindData(t,e,a)},this.FittingData=function(t,e){outVar=t.OutVar,date=t.Date,time=t.Time,result=[];for(i in outVar)if(item=outVar[i],Fr.Complier.Log("[LocalJsonDataIndex::FittingData] item",item),0==item.Type||3==item.Type){var a=[];outVarItem={Name:item.Name,Type:item.Type};for(j in item.Data){var r=new z;r.Date=date[j],time&&j<time.length&&(r.Time=time[j]),r.Value=item.Data[j],a.push(r)}if(e.Period<4)var n=e.GetFittingData(a);else var n=e.GetMinuteFittingData(a);var s=new Z;s.Data=n,outVarItem.Data=s.GetValue(),result.push(outVarItem)}else console.warn("[LocalJsonDataIndex::FittingData] can't support ",item.Name,item.Type);return result}}function Qi(t){this.ID,this.Name,this.Script,this.Arguments=[],this.ClassName="ScriptIndexConsole",this.ErrorCallback,this.FinishCallback,this.IsSectionMode=!1,this.NetworkFilter,t&&(t.Name&&(this.Name=t.Name),t.Script&&(this.Script=t.Script),t.ID&&(this.ID=t.ID),t.Args&&(this.Arguments=t.Args),t.ErrorCallback&&(this.ErrorCallback=t.ErrorCallback),t.FinishCallback&&(this.FinishCallback=t.FinishCallback),t.IsSectionMode&&(this.IsSectionMode=t.IsSectionMode),t.NetworkFilter&&(this.NetworkFilter=t.NetworkFilter)),this.ExecuteScript=function(t){this.OutVar=[];var e={Self:this},a={HQDataType:t.HQDataType,Symbol:t.Stock.Symbol,Name:t.Stock.Name,Period:t.Period,Right:t.Right,Callback:this.RecvResultData,CallbackParam:e,Async:!0,MaxRequestDataCount:t.Request.MaxDataCount,MaxRequestMinuteDayCount:t.Request.MaxMinuteDayCount,Arguments:this.Arguments,IsSectionMode:this.IsSectionMode,ClassName:"ScriptIndexConsole",NetworkFilter:this.NetworkFilter};t.HQDataType===In.HISTORY_MINUTE_ID&&(a.TrateDate=t.Request.TradeDate),t.HQDataType==In.MULTIDAY_MINUTE_ID&&(a.DayCount=t.DayCount);var i=this.Script;ji.Execute(i,a,this.ErrorCallback)},this.RecvResultData=function(t,e){var a=e.Self,i=e.JSExecute,r=null;i.SymbolData.Data&&(r=i.SymbolData.Data.GetDate());var n={Out:t,Date:r,Stock:{Name:i.SymbolData.Name,Symbol:i.SymbolData.Symbol},Index:{Name:a.Name,ID:a.ID}};i.SymbolData.DataType==In.MULTIDAY_MINUTE_ID||i.SymbolData.DataType==In.MINUTE_ID?n.Time=i.SymbolData.Data.GetTime():i.SymbolData.DataType==In.KLINE_ID&&Z.IsMinutePeriod(i.SymbolData.Period,!0)&&(n.Time=i.SymbolData.Data.GetTime()),a.FinishCallback&&a.FinishCallback(n,e.JSExecute)}}function $i(t){this.Url=t.Url,this.Job=t.Job,this.Symbol=t.Symbol,this.Args=t.Args,this.DataKey=t.DataKey,this.RecvCallback=t.Callback,this.ErrorCallback=t.ErrorCallback,this.Download=function(){var t=this,e=this.GetFieldList();if(!e)return message=this.Job.FunctionName+"("+this.Args[0]+") can't support.",this.ErrorCallback(message),void t.RecvCallback(null,t.Job,t.DataKey);n.HttpRequest({url:this.Url,data:{field:e,symbol:[this.Symbol],condition:[{item:["finance","doc","exists","true"]}],start:0,end:200},type:"post",dataType:"json",async:!0,success:function(e){var a=t.ToHQChartData(e);a&&a.sort(function(t,e){return t.Date-e.Date}),t.RecvCallback(a,t.Job,t.DataKey)}})},this.ToHQChartData=function(t){if(!t.stock||1!=t.stock.length)return null;var e=[],a=new Ir.default,i=t.stock[0];for(var r in i.stockday){var n=i.stockday[r];if(n.announcement1){var s=this.ToHQChartItemData(n.announcement1,n.finance1,n);s&&!a.has(s.Date)&&(e.push(s),a.add(s.Date))}if(n.announcement2){var s=this.ToHQChartItemData(n.announcement2,n.finance2,n);s&&!a.has(s.Date)&&(e.push(s),a.add(s.Date))}if(n.announcement3){var s=this.ToHQChartItemData(n.announcement3,n.finance3,n);s&&!a.has(s.Date)&&(e.push(s),a.add(s.Date))}if(n.announcement4){var s=this.ToHQChartItemData(n.announcement4,n.finance4,n);s&&!a.has(s.Date)&&(e.push(s),a.add(s.Date))}}return e},this.ToHQChartItemData=function(t,e,a){var i=this.Args[0],r=1e4*t.year;switch(t.quarter){case 1:r+=331;break;case 2:r+=630;break;case 3:r+=930;break;case 4:r+=1231;break;default:return null}var n={Date:r,Value:0};switch(i){case 0:n.Value=r%1e6;break;case 1:n.Value=e.persearning;break;case 3:n.Value=e.peruprofit;break;case 4:n.Value=e.pernetasset;break;case 5:n.Value=e.percreserve;break;case 6:n.Value=e.woewa;break;case 7:n.Value=e.perccfo;break;case 8:n.Value=e.monetaryfunds;break;case 11:n.Value=e.areceivable}return n},this.GetFieldList=function(){switch(this.Args[0]){case 0:return["finance.date"];case 1:return["finance.persearning"];case 3:return["finance.peruprofit"];case 4:return["finance.pernetasset"];case 5:return["finance.percreserve"];case 6:return["finance.woewa"];case 7:return["finance.perccfo"];case 8:return["finance.monetaryfunds"];case 11:return["finance.areceivable"];default:return null}}}function tr(t){this.newMethod=$i,this.newMethod(t),delete this.newMethod,this.Download=function(){var t=this,e=this.GetFieldList();if(!e)return message=this.Job.FunctionName+"("+this.Args[0]+", "+this.Args[1]+", "+this.Args[2]+") can't support.",this.ErrorCallback(message),void t.RecvCallback(null,t.Job,t.DataKey);var a=[{item:["finance","doc","exists","true"]}],i=this.Args[1],r=this.Args[2],s=0,o=3,h=null;0==i&&0==r||(0==i&&r<300?(s=r,o=200):0==r&&i<1e3?h=i:i>1909&&(331==r?(a=[{item:["announcement1.year","int32","eq",i]},{item:["finance1","doc","exists","true"]}],e.push("announcement1.year"),e.push("announcement1.quarter")):630==r?(a=[{item:["announcement2.year","int32","eq",i]},{item:["finance2","doc","exists","true"]}],e.push("announcement2.year"),e.push("announcement2.quarter")):930==r?(a=[{item:["announcement3.year","int32","eq",i]},{item:["finance3","doc","exists","true"]}],e.push("announcement4.year"),e.push("announcement4.quarter")):(a=[{item:["announcement4.year","int32","eq",i]},{item:["finance4","doc","exists","true"]}],e.push("announcement4.year"),e.push("announcement4.quarter")))),n.HttpRequest({url:this.Url,data:{field:e,symbol:[this.Symbol],condition:a,start:0,end:o},type:"post",dataType:"json",async:!0,success:function(e){var a=t.ToHQChartData(e),i=null;a&&a.length>0&&(a.sort(function(t,e){return e.Date-t.Date}),i=null==h?a[s]:t.GetPreYearData(a,h)),t.RecvCallback(i,t.Job,t.DataKey)}})},this.GetPreYearData=function(t,e){if(331!=e&&630!=e&&930!=e&&1231!=e){for(var a=t[0].Date%1e3,i=1,r=0;i<t.length;++i){var n=t[i];if(n.Date%1e4==a&&++r==e)return n}return null}for(var i in t){var n=t[i];if(n.Date%1e4==e)return n}}}function er(t){this.Url=t.Url,this.RealtimeUrl=t.RealtimeUrl,this.Job=t.Job,this.Symbol=t.Symbol,this.Args=t.Args,this.DataKey=t.DataKey,this.RecvCallback=t.Callback,this.ErrorCallback=t.ErrorCallback,this.Download=function(){var t=this.Args[0];switch(t){case 1:case 7:case"EXCHANGE":this.DownloadHistoryData(t);break;case 3:this.GetSymbolType(t);break;case 9:case 18:case 30:case 32:case 33:case 34:case 38:case 40:case 41:case 42:case 43:case"CAPITAL":case"TOTALCAPITAL":case 100:default:this.DownloadRealtimeData(t)}},this.GetSymbolType=function(t){var e=1;an.IsSHSZIndex(this.Symbol)&&(e=0);var a={Date:null,Value:e};this.RecvCallback(a,this.Job,this.DataKey)},this.DownloadRealtimeData=function(t){var e=this,a=this.GetFieldList();if(!a)return this.Job.FunctionName2?message=this.Job.FunctionName2+" can't support.":this.Job.FunctionName?message=this.Job.FunctionName+"("+this.Args[0]+") can't support.":message=this.Args[0]+" can't support.",this.ErrorCallback(message),void e.RecvCallback(null,e.Job,e.DataKey);n.HttpRequest({url:this.RealtimeUrl,data:{field:a,symbol:[this.Symbol],condition:[],start:0,end:10},type:"post",dataType:"json",async:!0,success:function(t){var a=e.RealtimeDataToHQChartData(t);e.RecvCallback(a,e.Job,e.DataKey)}})},this.DownloadHistoryData=function(t){var e=this,a=this.GetFieldList();if(!a)return message=this.Job.FunctionName+"("+this.Args[0]+") can't support.",this.ErrorCallback(message),void e.RecvCallback(null,e.Job,e.DataKey);n.HttpRequest({url:this.Url,data:{field:a,symbol:[this.Symbol],condition:[],start:0,end:200},type:"post",dataType:"json",async:!0,success:function(t){var a=e.ToHQChartData(t);a&&a.sort(function(t,e){return t.Date-e.Date}),e.RecvCallback(a,e.Job,e.DataKey)}})},this.GetFieldList=function(){switch(this.Args[0]){case 1:return["capital.total","capital.date"];case 7:case"EXCHANGE":return["capital.a","capital.date"];case 9:return["finance.peruprofit","symbol","date"];case 18:return["finance.percreserve","symbol","date"];case 30:return["finance.nprofit","symbol","date"];case 32:return["finance.peruprofit","symbol","date"];case 33:return["finance.persearning","symbol","date"];case 34:return["finance.pernetasset","symbol","date"];case 38:return["finance.persearning","symbol","date"];case 40:return["capital.a","capital.date","symbol","date","price"];case 41:return["capital.total","capital.date","symbol","date","price"];case"CAPITAL":return["capital.a","capital.date","symbol","date"];case"TOTALCAPITAL":return["capital.total","capital.date","symbol","date"];case 42:return["company.releasedate","symbol","date"];case 43:return["dividendyield","symbol","date"];case 100:return["shareholder","symbol","date"];default:return null}},this.RealtimeDataToHQChartData=function(t,e){if(!t.stock||1!=t.stock.length)return null;var a=t.stock[0],e=this.Args[0],i=a.date;switch(e){case 9:return a.finance?{Date:i,Value:a.finance.peruprofit}:null;case 18:return a.finance?{Date:i,Value:a.finance.percreserve}:null;case 30:return a.finance?{Date:i,Value:a.finance.nprofit}:null;case 32:return a.finance?{Date:i,Value:a.finance.peruprofit}:null;case 33:return a.finance?{Date:i,Value:a.finance.persearning}:null;case 34:return a.finance?{Date:i,Value:a.finance.pernetasset}:null;case 38:return a.finance?{Date:i,Value:a.finance.persearning}:null;case 40:return a.capital?{Date:i,Value:a.capital.a*a.price}:null;case 41:return a.capital?{Date:i,Value:a.capital.total*a.price}:null;case 42:if(!a.company)return null;var r=a.company.releasedate,n=parseInt(r/1e4),s=parseInt(r%1e4/100),o=r%100,h=new Date(n,s-1,o),l=new Date;return{Date:i,Value:parseInt((l.getTime()-h.getTime())/864e5)+1};case 43:return a.dividendyield?{Date:i,Value:a.dividendyield.quarter4}:null;case 100:return a.shareholder?{Date:i,Value:a.shareholder.count}:null;case"CAPITAL":return a.capital?{Date:i,Value:a.capital.a/100}:null;case"TOTALCAPITAL":return a.capital?{Date:i,Value:a.capital.total/100}:null}},this.ToHQChartData=function(t){if(!t.stock||1!=t.stock.length)return null;var e=[],a=new Ir.default,i=t.stock[0],r=this.Args[0];for(var n in i.stockday){var s=i.stockday[n],o=this.ToHQChartItemData(s,r);o&&!a.has(o.Date)&&(e.push(o),a.add(o.Date))}return e},this.ToHQChartItemData=function(t,e){if(!t)return null;var a=t.date;switch(e){case 1:return t.capital?{Date:a,Value:t.capital.total}:null;case 7:case"EXCHANGE":return t.capital?{Date:a,Value:t.capital.a}:null;default:return null}}}function ar(t){this.Url=t.Url,this.RealtimeUrl=t.RealtimeUrl,this.Job=t.Job,this.Symbol=t.Symbol,this.Args=t.Args,this.DataKey=t.DataKey,this.RecvCallback=t.Callback,this.ErrorCallback=t.ErrorCallback,this.Download=function(){var t=this,e=this.GetFieldList();if(!e)return message=this.Job.FunctionName+"("+this.Args[0]+", "+this.Args[1]+", "+this.Args[2]+") can't support.",this.ErrorCallback(message),void t.RecvCallback(null,t.Job,t.DataKey,!0);n.HttpRequest({url:this.Url,data:{field:e,symbol:[this.Symbol],orderfield:"date",order:-1,start:0,end:5},type:"post",dataType:"json",async:!0,success:function(e){var a=t.ToHQChartData(e);a&&a.length>0&&a.sort(function(t,e){return t.Date-e.Date}),t.RecvCallback(a,t.Job,t.DataKey)}})},this.GetFieldList=function(){switch(this.Args[0]){case 1:return["shareholder","date","symbol"];case 2:return["tradedetail.buy","tradedetail.sell","date","symbol"];case 3:return["margin","date","symbol"];case 4:return["blocktrading.amount","blocktrading.price","date","symbol"];default:return null}},this.ToHQChartData=function(t){if(!t.stock||1!=t.stock.length)return null;var e=[],a=new Ir.default,i=t.stock[0],r=this.Args[0],n=this.Args[1];for(var s in i.stockday){var o=i.stockday[s],h=this.ToHQChartItemData(o,r,n);h&&!a.has(h.Date)&&(e.push(h),a.add(h.Date))}return e},this.ToHQChartItemData=function(t,e,a){if(!t)return null;var i=t.date;switch(e){case 1:return t.shareholder?{Date:i,Value:t.shareholder.count}:null;case 2:return!t.tradedetail&&t.tradedetail[0]?null:0==a?{Date:i,Value:t.tradedetail[0].buy}:{Date:i,Value:t.tradedetail[0].sell};case 3:if(!t.margin)return null;if(0==a){if(t.margin.buy)return{Date:i,Value:t.margin.buy.balance}}else if(t.margin.sell)return{Date:i,Value:t.margin.sell.balance};return null;case 4:return t.blocktrading?0==a?{Date:i,Value:t.blocktrading.price}:{Date:i,Value:t.blocktrading.amount}:null;default:return null}}}function ir(t){this.Url=t.Url,this.Job=t.Job,this.Symbol=t.Symbol,this.Args=t.Args,this.DataKey=t.DataKey,this.RecvCallback=t.Callback,this.ErrorCallback=t.ErrorCallback,this.Download=function(){var t=this,e=this.GetQueryCondtion();if(!e)return message=this.Job.FunctionName+"("+this.Args[0]+", "+this.Args[1]+", "+this.Args[2]+") can't support.",this.ErrorCallback(message),void t.RecvCallback(null,t.Job,t.DataKey,!0);n.HttpRequest({url:this.Url,data:{field:e.Field,symbol:e.Symbol,condition:e.Cond,start:0,end:2e3},type:"post",dataType:"json",async:!0,success:function(e){var a=t.ToHQChartData(e);a&&a.sort(function(t,e){return t.Date-e.Date}),t.RecvCallback(a,t.Job,t.DataKey)}})},this.GetQueryCondtion=function(){var t=new Date,e=1e4*t.getFullYear()+100*(t.getMonth()+1)+t.getDate();t.setDate(t.getDate()-100);var a=1e4*t.getFullYear()+100*(t.getMonth()+1)+t.getDate();switch(this.Args[0]){case 1:return{Symbol:["CNA.ci"],Field:["margin"],Cond:[{item:["date","int32","gte",a.toString(),"lte",e.toString()]},{item:["margin","doc","exists","true"]}]}}},this.ToHQChartData=function(t){if(!t.stock||1!=t.stock.length)return null;var e=[],a=new Ir.default,i=t.stock[0],r=this.Args[0],n=this.Args[1];for(var s in i.stockday){var o=i.stockday[s],h=this.ToHQChartItemData(o,r,n);h&&!a.has(h.Date)&&(e.push(h),a.add(h.Date))}return e},this.ToHQChartItemData=function(t,e,a){if(!t)return null;var i=t.date,r=null;switch(e){case 1:return t.margin?(r=t.margin,1==a?r.buy&&he.IsNumber(r.buy.balance)?{Date:i,Value:r.buy.balance}:null:he.IsNumber(r.sell.balance)?{Date:i,Value:r.sell.balance}:null):null;default:return null}}}function rr(t){this.Url=t.Url,this.RealtimeUrl=t.RealtimeUrl,this.Job=t.Job,this.Symbol=t.Symbol,this.Args=t.Args,this.DataKey=t.DataKey,this.RecvCallback=t.Callback,this.ErrorCallback=t.ErrorCallback,this.Download=function(){var t=this.Args[0];switch(t){case"HYBLOCK":case"DYBLOCK":case"GNBLOCK":this.DownloadGroupName(t)}},this.DownloadGroupName=function(t){var e=this,a=["name","symbol"];"HYBLOCK"==t?a.push("industry"):"DYBLOCK"==t?a.push("region"):"GNBLOCK"==t&&a.push("concept"),n.HttpRequest({url:e.RealtimeUrl,data:{field:a,symbol:[this.Symbol]},type:"post",dataType:"json",async:!0,success:function(t){var a=e.RecvGroupName(t);e.RecvCallback(a,e.Job,e.DataKey,1)},error:function(t){e.ErrorCallback(t)}})},this.RecvGroupName=function(t){if(!t.stock||1!=t.stock.length)return null;var e=t.stock[0],a=this.Args[0],i=null;if("HYBLOCK"==a){var r=e.industry;if(!r)return null;var i;for(var n in r){var s=r[n];i=s.name}}else if("DYBLOCK"==a){var o=e.region;if(!o)return null;for(var n in o){var s=o[n];i=s.name}}else if("GNBLOCK"==a){var h=e.concept;if(!h)return null;i="";for(var n in h){var s=h[n];i.length>0&&(i+=" "),i+=s.name}}return{Value:i}}}function nr(){}Object.defineProperty(e,"__esModule",{value:!0});var sr,or=a(151),hr=r(or),lr=a(426),ur=(r(lr),a(434)),cr=r(ur),dr=a(437),fr=r(dr),mr=a(440),Cr=r(mr),pr=a(443),Dr=r(pr),vr=a(47),gr=r(vr),Sr=a(160),Tr=r(Sr),yr=a(161),Ir=r(yr),xr=a(458),Lr=r(xr),Mr=a(120),_r=r(Mr),br=a(121),wr=r(br),Fr={Chart:{Log:console.log,Warn:console.warn},Complier:{Log:console.log,Warn:console.warn},JSTable:{Log:console.log,Warn:console.warn}};n.HttpRequest=function(t){wr.default.ajax({url:t.url,data:t.data,type:t.type,dataType:t.dataType,async:t.async,success:t.success,error:t.error})};var Er={MINUTE_ID:101,MULTIDAY_MINUTE_ID:102,HISTORY_MINUTE_ID:103,KLINE_DAY_ID:0,KLINE_WEEK_ID:1,KLINE_TWOWEEK_ID:21,KLINE_MONTH_ID:2,KLINE_QUARTER_ID:9,KLINE_YEAR_ID:3,KLINE_MINUTE_ID:4,KLINE_5_MINUTE_ID:5,KLINE_15_MINUTE_ID:6,KLINE_30_MINUTE_ID:7,KLINE_60_MINUTE_ID:8},Ar=new s;if(o.AddIndex=function(t){for(var e in t)Ar.Add(t[e])},o.prototype.Get=function(t){var e=Ar.Get(t);if(e)return e;var a=this.DataMap.get(t);return a?a():null},o.prototype.Search=function(t){var e=[],a=new RegExp(t,"i");return this.DataMap.forEach(function(t,i){0!=i.indexOf("交易系统-")&&0!=i.indexOf("五彩K线-")&&i.search(a)>=0&&e.push(i)}),e},o.prototype.MA=function(){return{Name:"MA",Description:"均线",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"}],Script:"MA1:MA(CLOSE,M1);\nMA2:MA(CLOSE,M2);\nMA3:MA(CLOSE,M3);"}},o.prototype.MA4=function(){return{Name:"MA",Description:"均线",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20},{Name:"M4",Value:60}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"},{Name:"MA4",DynamicName:"MA{M4}"}],Script:"MA1:MA(CLOSE,M1);\nMA2:MA(CLOSE,M2);\nMA3:MA(CLOSE,M3);\nMA4:MA(CLOSE,M4);"}},o.prototype.MA5=function(){return{Name:"MA",Description:"均线",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20},{Name:"M4",Value:60},{Name:"M5",Value:0}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"},{Name:"MA4",DynamicName:"MA{M4}"},{Name:"MA5",DynamicName:"MA{M5}"}],Script:"MA1:MA(CLOSE,M1);\nMA2:MA(CLOSE,M2);\nMA3:MA(CLOSE,M3);\nMA4:MA(CLOSE,M4);\nMA5:MA(CLOSE,M5);"}},o.prototype.MA6=function(){return{Name:"MA",Description:"均线",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20},{Name:"M4",Value:60},{Name:"M5",Value:0},{Name:"M6",Value:0}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"},{Name:"MA4",DynamicName:"MA{M4}"},{Name:"MA5",DynamicName:"MA{M5}"},{Name:"MA6",DynamicName:"MA{M6}"}],Script:"MA1:MA(CLOSE,M1);\nMA2:MA(CLOSE,M2);\nMA3:MA(CLOSE,M3);\nMA4:MA(CLOSE,M4);\nMA5:MA(CLOSE,M5);\nMA6:MA(CLOSE,M6);"}},o.prototype.MA7=function(){return{Name:"MA",Description:"均线",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20},{Name:"M4",Value:60},{Name:"M5",Value:0},{Name:"M6",Value:0},{Name:"M7",Value:0}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"},{Name:"MA4",DynamicName:"MA{M4}"},{Name:"MA5",DynamicName:"MA{M5}"},{Name:"MA6",DynamicName:"MA{M6}"},{Name:"MA7",DynamicName:"MA{M7}"}],Script:"MA1:MA(CLOSE,M1);\nMA2:MA(CLOSE,M2);\nMA3:MA(CLOSE,M3);\nMA4:MA(CLOSE,M4);\nMA5:MA(CLOSE,M5);\nMA6:MA(CLOSE,M6);\nMA7:MA(CLOSE,M7);"}},o.prototype.MA8=function(){return{Name:"MA",Description:"均线",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20},{Name:"M4",Value:60},{Name:"M5",Value:0},{Name:"M6",Value:0},{Name:"M7",Value:0},{Name:"M8",Value:0}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"},{Name:"MA4",DynamicName:"MA{M4}"},{Name:"MA5",DynamicName:"MA{M5}"},{Name:"MA6",DynamicName:"MA{M6}"},{Name:"MA7",DynamicName:"MA{M7}"},{Name:"MA8",DynamicName:"MA{M8}"}],Script:"MA1:MA(CLOSE,M1);\nMA2:MA(CLOSE,M2);\nMA3:MA(CLOSE,M3);\nMA4:MA(CLOSE,M4);\nMA5:MA(CLOSE,M5);\nMA6:MA(CLOSE,M6);\nMA7:MA(CLOSE,M7);\nMA8:MA(CLOSE,M8);"}},o.prototype.BOLL=function(){return{Name:"BOLL",Description:"布林线",IsMainIndex:!0,Args:[{Name:"M",Value:20}],Script:"BOLL:MA(CLOSE,M);\nUB:BOLL+2*STD(CLOSE,M);\nLB:BOLL-2*STD(CLOSE,M);"}},o.prototype.BOLL2=function(){return{Name:"BOLL2",Description:"布林线",IsMainIndex:!1,KLineType:0,Args:[{Name:"M",Value:20}],Script:"BOLL:MA(CLOSE,M);\nUB:BOLL+2*STD(CLOSE,M);\nLB:BOLL-2*STD(CLOSE,M);"}},o.prototype.BBI=function(){return{Name:"BBI",Description:"多空均线",IsMainIndex:!0,Args:[{Name:"M1",Value:3},{Name:"M2",Value:6},{Name:"M3",Value:12},{Name:"M4",Value:24}],Script:"BBI:(MA(CLOSE,M1)+MA(CLOSE,M2)+MA(CLOSE,M3)+MA(CLOSE,M4))/4;"}},o.prototype.DKX=function(){return{Name:"DKX",Description:"多空线",IsMainIndex:!1,Args:[{Name:"M",Value:10}],Script:"MID:=(3*CLOSE+LOW+OPEN+HIGH)/6;\nDKX:(20*MID+19*REF(MID,1)+18*REF(MID,2)+17*REF(MID,3)+\n16*REF(MID,4)+15*REF(MID,5)+14*REF(MID,6)+\n13*REF(MID,7)+12*REF(MID,8)+11*REF(MID,9)+\n10*REF(MID,10)+9*REF(MID,11)+8*REF(MID,12)+\n7*REF(MID,13)+6*REF(MID,14)+5*REF(MID,15)+\n4*REF(MID,16)+3*REF(MID,17)+2*REF(MID,18)+REF(MID,20))/210;\nMADKX:MA(DKX,M);"}},o.prototype.MIKE=function(){return{Name:"MIKE",Description:"麦克支撑压力",IsMainIndex:!0,Args:[{Name:"N",Value:10}],Script:"HLC:=REF(MA((HIGH+LOW+CLOSE)/3,N),1);\nHV:=EMA(HHV(HIGH,N),3);\nLV:=EMA(LLV(LOW,N),3);\nSTOR:EMA(2*HV-LV,3);\nMIDR:EMA(HLC+HV-LV,3);\nWEKR:EMA(HLC*2-LV,3);\nWEKS:EMA(HLC*2-HV,3);\nMIDS:EMA(HLC-HV+LV,3);\nSTOS:EMA(2*LV-HV,3);"}},o.prototype.PBX=function(){return{Name:"PBX",Description:"瀑布线",IsMainIndex:!0,Args:[{Name:"M1",Value:4},{Name:"M2",Value:6},{Name:"M3",Value:9},{Name:"M4",Value:13},{Name:"M5",Value:18},{Name:"M6",Value:24}],Script:"PBX1:(EMA(CLOSE,M1)+MA(CLOSE,M1*2)+MA(CLOSE,M1*4))/3;\nPBX2:(EMA(CLOSE,M2)+MA(CLOSE,M2*2)+MA(CLOSE,M2*4))/3;\nPBX3:(EMA(CLOSE,M3)+MA(CLOSE,M3*2)+MA(CLOSE,M3*4))/3;\nPBX4:(EMA(CLOSE,M4)+MA(CLOSE,M4*2)+MA(CLOSE,M4*4))/3;\nPBX5:(EMA(CLOSE,M5)+MA(CLOSE,M5*2)+MA(CLOSE,M5*4))/3;\nPBX6:(EMA(CLOSE,M6)+MA(CLOSE,M6*2)+MA(CLOSE,M6*4))/3;"}},o.prototype.ENE=function(){return{Name:"ENE",Description:"轨道线",IsMainIndex:!0,Args:[{Name:"N",Value:25},{Name:"M1",Value:6},{Name:"M2",Value:6}],Script:"UPPER:(1+M1/100)*MA(CLOSE,N);\nLOWER:(1-M2/100)*MA(CLOSE,N);\nENE:(UPPER+LOWER)/2;"}},o.prototype.MACD=function(){return{Name:"MACD",Description:"平滑异同平均",IsMainIndex:!1,Args:[{Name:"SHORT",Value:12},{Name:"LONG",Value:26},{Name:"MID",Value:9}],Script:"DIF:EMA(CLOSE,SHORT)-EMA(CLOSE,LONG);\nDEA:EMA(DIF,MID);\nMACD:(DIF-DEA)*2,COLORSTICK;"}},o.prototype.MACD2=function(){return{Name:"MACD",Description:"平滑异同平均",IsMainIndex:!1,Args:[{Name:"SHORT",Value:12},{Name:"LONG",Value:26},{Name:"MID",Value:9}],Script:"DIF2:=EMA(CLOSE,SHORT)-EMA(CLOSE,LONG);\nDEA2:=EMA(DIF2,MID);\nMACD:(DIF2-DEA2)*2,COLORSTICK,LINETHICK50;\nDIF:DIF2;\nDEA:DEA2;"}},o.prototype.KDJ=function(){return{Name:"KDJ",Description:"随机指标",IsMainIndex:!1,Args:[{Name:"N",Value:9},{Name:"M1",Value:3},{Name:"M2",Value:3}],Script:"RSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;\nK:SMA(RSV,M1,1);\nD:SMA(K,M2,1);\nJ:3*K-2*D;"}},o.prototype.VOL=function(){return{Name:"VOL",Description:"成交量",IsMainIndex:!1,FloatPrecision:0,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"}],Script:"VOL:VOL,VOLSTICK;\nMA1:MA(VOL,M1);\nMA2:MA(VOL,M2);"}},o.prototype.VOL_TDX=function(){return{Name:"VOL-TDX",Description:"成交量(虚拟)",IsMainIndex:!1,FloatPrecision:0,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10}],Script:"TOTAL:=IF(PERIOD=1,5,IF(PERIOD=2,15,IF(PERIOD=3,30,IF(PERIOD=4,60,IF(PERIOD=5,TOTALFZNUM,1)))));\nMTIME:=MOD(FROMOPEN,TOTAL);\nCTIME:=IF(MTIME<0.5,TOTAL,MTIME);\nVVOL:IF((CURRBARSCOUNT=1 AND DYNAINFO(8)>1),VOL*(TOTAL+3)/(CTIME+3),DRAWNULL),NODRAW;\nSTICKLINE((CURRBARSCOUNT=1 AND DYNAINFO(8)>1),VVOL,0,-1,-1),COLORYELLOW;\nVOLUME:VOL,VOLSTICK;\nMAVOL1:MA(VOLUME,M1);\nMAVOL2:MA(VOLUME,M2);"}},o.prototype.RSI=function(){return{Name:"RSI",Description:"相对强弱指标",IsMainIndex:!1,Args:[{Name:"N1",Value:6},{Name:"N2",Value:12},{Name:"N3",Value:24}],Script:"LC:=REF(CLOSE,1);\nRSI1:SMA(MAX(CLOSE-LC,0),N1,1)/SMA(ABS(CLOSE-LC),N1,1)*100;\nRSI2:SMA(MAX(CLOSE-LC,0),N2,1)/SMA(ABS(CLOSE-LC),N2,1)*100;\nRSI3:SMA(MAX(CLOSE-LC,0),N3,1)/SMA(ABS(CLOSE-LC),N3,1)*100;"}},o.prototype.BRAR=function(){return{Name:"BRAR",Description:"情绪指标",IsMainIndex:!1,Args:[{Name:"N",Value:26}],Script:"BR:SUM(MAX(0,HIGH-REF(CLOSE,1)),N)/SUM(MAX(0,REF(CLOSE,1)-LOW),N)*100;\nAR:SUM(HIGH-OPEN,N)/SUM(OPEN-LOW,N)*100;"}},o.prototype.WR=function(){return{Name:"WR",Description:"威廉指标",IsMainIndex:!1,Args:[{Name:"N",Value:10},{Name:"N1",Value:6}],Script:"WR1:100*(HHV(HIGH,N)-CLOSE)/(HHV(HIGH,N)-LLV(LOW,N));\nWR2:100*(HHV(HIGH,N1)-CLOSE)/(HHV(HIGH,N1)-LLV(LOW,N1));"}},o.prototype.BIAS=function(){return{Name:"BIAS",Description:"乖离率",IsMainIndex:!1,Args:[{Name:"N1",Value:6},{Name:"N2",Value:12},{Name:"N3",Value:24}],Script:"BIAS1 :(CLOSE-MA(CLOSE,N1))/MA(CLOSE,N1)*100;\nBIAS2 :(CLOSE-MA(CLOSE,N2))/MA(CLOSE,N2)*100;\nBIAS3 :(CLOSE-MA(CLOSE,N3))/MA(CLOSE,N3)*100;"}},o.prototype.OBV=function(){return{Name:"OBV",Description:"累积能量线",IsMainIndex:!1,Args:[{Name:"M",Value:30}],Script:"VA:=IF(CLOSE>REF(CLOSE,1),VOL,-VOL);\nOBV:SUM(IF(CLOSE==REF(CLOSE,1),0,VA),0);\nMAOBV:MA(OBV,M);"}},o.prototype.DMI=function(){return{Name:"DMI",Description:"趋向指标",IsMainIndex:!1,Args:[{Name:"N",Value:14},{Name:"MM",Value:6}],Script:"MTR:=EXPMEMA(MAX(MAX(HIGH-LOW,ABS(HIGH-REF(CLOSE,1))),ABS(REF(CLOSE,1)-LOW)),N);\nHD :=HIGH-REF(HIGH,1);\nLD :=REF(LOW,1)-LOW;\nDMP:=EXPMEMA(IF(HD>0&&HD>LD,HD,0),N);\nDMM:=EXPMEMA(IF(LD>0&&LD>HD,LD,0),N);\nPDI: DMP*100/MTR;\nMDI: DMM*100/MTR;\nADX: EXPMEMA(ABS(MDI-PDI)/(MDI+PDI)*100,MM);\nADXR:EXPMEMA(ADX,MM);"}},o.prototype.CR=function(){return{Name:"CR",Description:"带状能量线",IsMainIndex:!1,Args:[{Name:"N",Value:26},{Name:"M1",Value:10},{Name:"M2",Value:20},{Name:"M3",Value:40},{Name:"M4",Value:62}],Script:"MID:=REF(HIGH+LOW,1)/2;\nCR:SUM(MAX(0,HIGH-MID),N)/SUM(MAX(0,MID-LOW),N)*100;\nMA1:REF(MA(CR,M1),M1/2.5+1);\nMA2:REF(MA(CR,M2),M2/2.5+1);\nMA3:REF(MA(CR,M3),M3/2.5+1);\nMA4:REF(MA(CR,M4),M4/2.5+1);"}},o.prototype.PSY=function(){return{Name:"PSY",Description:"心理线",IsMainIndex:!1,Args:[{Name:"N",Value:12},{Name:"M",Value:6}],Script:"PSY:COUNT(CLOSE>REF(CLOSE,1),N)/N*100;\rPSYMA:MA(PSY,M);"}},o.prototype.CCI=function(){return{Name:"CCI",Description:"商品路径指标",IsMainIndex:!1,Args:[{Name:"N",Value:14}],Script:"TYP:=(HIGH+LOW+CLOSE)/3;\nCCI:(TYP-MA(TYP,N))/(0.015*AVEDEV(TYP,N));"}},o.prototype.DMA=function(){return{Name:"DMA",Description:"平均差",IsMainIndex:!1,Args:[{Name:"N1",Value:10},{Name:"N2",Value:50},{Name:"M",Value:10}],Script:"DIF:MA(CLOSE,N1)-MA(CLOSE,N2);\nDIFMA:MA(DIF,M);"}},o.prototype.TRIX=function(){return{Name:"TRIX",Description:"三重指数平均线",IsMainIndex:!1,Args:[{Name:"N",Value:12},{Name:"M",Value:9}],Script:"MTR:=EMA(EMA(EMA(CLOSE,N),N),N);\nTRIX:(MTR-REF(MTR,1))/REF(MTR,1)*100;\nMATRIX:MA(TRIX,M) ;"}},o.prototype.VR=function(){return{Name:"VR",Description:"成交量变异率",IsMainIndex:!1,Args:[{Name:"N",Value:26},{Name:"M",Value:6}],Script:"TH:=SUM(IF(CLOSE>REF(CLOSE,1),VOL,0),N);\nTL:=SUM(IF(CLOSE<REF(CLOSE,1),VOL,0),N);\nTQ:=SUM(IF(CLOSE==REF(CLOSE,1),VOL,0),N);\nVR:100*(TH*2+TQ)/(TL*2+TQ);\nMAVR:MA(VR,M);"}},o.prototype.EMV=function(){return{Name:"EMV",Description:"简易波动指标",IsMainIndex:!1,Args:[{Name:"N",Value:14},{Name:"M",Value:9}],Script:"VOLUME:=MA(VOL,N)/VOL;\nMID:=100*(HIGH+LOW-REF(HIGH+LOW,1))/(HIGH+LOW);\nEMV:MA(MID*VOLUME*(HIGH-LOW)/MA(HIGH-LOW,N),N);\nMAEMV:MA(EMV,M);"}},o.prototype.ROC=function(){return{Name:"ROC",Description:"变动率指标",IsMainIndex:!1,Args:[{Name:"N",Value:12},{Name:"M",Value:6}],Script:"ROC:100*(CLOSE-REF(CLOSE,N))/REF(CLOSE,N);\nMAROC:MA(ROC,M);"}},o.prototype.MTM=function(){return{Name:"MTM",Description:"动量线",IsMainIndex:!1,Args:[{Name:"N",Value:12},{Name:"M",Value:6}],Script:"MTM:CLOSE-REF(CLOSE,N);\nMAMTM:MA(MTM,M);"}},o.prototype.FSL=function(){return{Name:"FSL",Description:"分水岭",IsMainIndex:!1,Args:[],Script:"SWL:(EMA(CLOSE,5)*7+EMA(CLOSE,10)*3)/10;\nSWS:DMA(EMA(CLOSE,12),MAX(1,100*(SUM(VOL,5)/(3*CAPITAL))));"}},o.prototype.CYR=function(){return{Name:"CYR",Description:"市场强弱",IsMainIndex:!1,Args:[{Name:"N",Value:13},{Name:"M",Value:5}],Script:"DIVE:=0.01*EMA(AMOUNT,N)/EMA(VOL,N);\nCYR:(DIVE/REF(DIVE,1)-1)*100;\nMACYR:MA(CYR,M);"}},o.prototype.MASS=function(){return{Name:"MASS",Description:"市场强弱",IsMainIndex:!1,Args:[{Name:"N1",Value:9},{Name:"N2",Value:25},{Name:"M",Value:6}],Script:"MASS:SUM(MA(HIGH-LOW,N1)/MA(MA(HIGH-LOW,N1),N1),N2);\nMAMASS:MA(MASS,M);"}},o.prototype.WAD=function(){return{Name:"WAD",Description:"威廉多空力度线",IsMainIndex:!1,Args:[{Name:"M",Value:30}],Script:"MIDA:=CLOSE-MIN(REF(CLOSE,1),LOW);\nMIDB:=IF(CLOSE<REF(CLOSE,1),CLOSE-MAX(REF(CLOSE,1),HIGH),0);\nWAD:SUM(IF(CLOSE>REF(CLOSE,1),MIDA,MIDB),0);\nMAWAD:MA(WAD,M);"}},o.prototype.CHO=function(){return{Name:"CHO",Description:"佳庆指标",IsMainIndex:!1,Args:[{Name:"N1",Value:10},{Name:"N2",Value:20},{Name:"M",Value:6}],Script:"MID:=SUM(VOL*(2*CLOSE-HIGH-LOW)/(HIGH+LOW),0);\nCHO:MA(MID,N1)-MA(MID,N2);\nMACHO:MA(CHO,M);"}},o.prototype.ADTM=function(){return{Name:"ADTM",Description:"动态买卖气指标",IsMainIndex:!1,Args:[{Name:"N",Value:23},{Name:"M",Value:8}],Script:"DTM:=IF(OPEN<=REF(OPEN,1),0,MAX((HIGH-OPEN),(OPEN-REF(OPEN,1))));\nDBM:=IF(OPEN>=REF(OPEN,1),0,MAX((OPEN-LOW),(OPEN-REF(OPEN,1))));\nSTM:=SUM(DTM,N);\nSBM:=SUM(DBM,N);\nADTM:IF(STM>SBM,(STM-SBM)/STM,IF(STM==SBM,0,(STM-SBM)/SBM));\nMAADTM:MA(ADTM,M);"}},o.prototype.HSL=function(){return{Name:"HSL",Description:"换手线",IsMainIndex:!1,Args:[{Name:"N",Value:5}],Script:"HSL:IF((SETCODE==0||SETCODE==1),100*VOL,VOL)/(FINANCE(7)/100);\nMAHSL:MA(HSL,N);"}},o.prototype.BIAS36=function(){return{Name:"BIAS36",Description:"三六乖离",IsMainIndex:!1,Args:[{Name:"M",Value:6}],Script:"BIAS36:MA(CLOSE,3)-MA(CLOSE,6);\nBIAS612:MA(CLOSE,6)-MA(CLOSE,12);\nMABIAS:MA(BIAS36,M);"}},o.prototype.BIAS_QL=function(){return{Name:"BIAS_QL",Description:"乖离率-传统版",IsMainIndex:!1,Args:[{Name:"N",Value:6},{Name:"M",Value:6}],Script:"BIAS :(CLOSE-MA(CLOSE,N))/MA(CLOSE,N)*100;\nBIASMA :MA(BIAS,M);"}},o.prototype.DPO=function(){return{Name:"DPO",Description:"区间震荡线",IsMainIndex:!1,Args:[{Name:"N",Value:20},{Name:"M",Value:6}],Script:"DPO:CLOSE-REF(MA(CLOSE,N),N/2+1);\nMADPO:MA(DPO,M);"}},o.prototype.OSC=function(){return{Name:"OSC",Description:"变动速率线",IsMainIndex:!1,Args:[{Name:"N",Value:20},{Name:"M",Value:6}],Script:"OSC:100*(CLOSE-MA(CLOSE,N));\nMAOSC:EXPMEMA(OSC,M);"}},o.prototype.ATR=function(){return{Name:"ATR",Description:"真实波幅",IsMainIndex:!1,Args:[{Name:"N",Value:14}],Script:"MTR:MAX(MAX((HIGH-LOW),ABS(REF(CLOSE,1)-HIGH)),ABS(REF(CLOSE,1)-LOW));\nATR:MA(MTR,N);"}},o.prototype.NVI=function(){return{Name:"ATR",Description:"负成交量",IsMainIndex:!1,Args:[{Name:"N",Value:72}],Script:"NVI:100*MULAR(IF(V<REF(V,1),C/REF(C,1),1),0);\nMANVI:MA(NVI,N);"}},o.prototype.PVI=function(){return{Name:"PVI",Description:"正成交量",IsMainIndex:!1,Args:[{Name:"N",Value:72}],Script:"NVI:100*MULAR(IF(V>REF(V,1),C/REF(C,1),1),0);\nMANVI:MA(NVI,N);"}},o.prototype.UOS=function(){return{Name:"UOS",Description:"终极指标",IsMainIndex:!1,Args:[{Name:"N1",Value:7},{Name:"N2",Value:14},{Name:"N3",Value:28},{Name:"M",Value:6}],Script:"TH:=MAX(HIGH,REF(CLOSE,1));\nTL:=MIN(LOW,REF(CLOSE,1));\nACC1:=SUM(CLOSE-TL,N1)/SUM(TH-TL,N1);\nACC2:=SUM(CLOSE-TL,N2)/SUM(TH-TL,N2);\nACC3:=SUM(CLOSE-TL,N3)/SUM(TH-TL,N3);\nUOS:(ACC1*N2*N3+ACC2*N1*N3+ACC3*N1*N2)*100/(N1*N2+N1*N3+N2*N3);\nMAUOS:EXPMEMA(UOS,M);"}},o.prototype.CYW=function(){return{Name:"CYW",Description:"主力控盘",IsMainIndex:!1,Args:[],Script:"VAR1:=CLOSE-LOW;\nVAR2:=HIGH-LOW;\nVAR3:=CLOSE-HIGH;\nVAR4:=IF(HIGH>LOW,(VAR1/VAR2+VAR3/VAR2)*VOL,0);\nCYW: SUM(VAR4,10)/10000, COLORSTICK;"}},o.prototype.LON=function(){return{Name:"LON",Description:"龙系长线",IsMainIndex:!1,Args:[{Name:"N",Value:10}],Script:"LC := REF(CLOSE,1);\nVID := SUM(VOL,2)/(((HHV(HIGH,2)-LLV(LOW,2)))*100);\nRC := (CLOSE-LC)*VID;\nLONG := SUM(RC,0);\nDIFF := SMA(LONG,10,1);\nDEA := SMA(LONG,20,1);\nLON : DIFF-DEA;\nLONMA : MA(LON,10);\nLONT : LON, COLORSTICK;"}},o.prototype.NDB=function(){return{Name:"NDB",Description:"脑电波",IsMainIndex:!1,Args:[{Name:"P1",Value:5},{Name:"P2",Value:10}],Script:"HH:=IF(C/REF(C,1)>1.098 AND L>REF(H,1),2*C-REF(C,1)-H,2*C-H-L);\nV1:= BARSCOUNT(C) - 1;\nV2:= 2 * REF(C, V1) - REF(H, V1) - REF(L, V1);\nDK: SUM(HH, 0) + V2;\nMDK5: MA(DK, P1);\nMDK10: MA(DK, P2);"}},o.prototype.SKDJ=function(){return{Name:"SKDJ",Description:"慢速随机指标",IsMainIndex:!1,Args:[{Name:"N",Value:9},{Name:"M",Value:3}],Script:"LOWV:=LLV(LOW,N);\nHIGHV:=HHV(HIGH,N);\nRSV:=EMA((CLOSE-LOWV)/(HIGHV-LOWV)*100,M);\nK:EMA(RSV,M);\nD:MA(K,M);"}},o.prototype.KD=function(){return{Name:"KD",Description:"随机指标KD",IsMainIndex:!1,Args:[{Name:"N",Value:9},{Name:"M1",Value:3},{Name:"M2",Value:3}],Script:"RSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;\nK:SMA(RSV,M1,1);\nD:SMA(K,M2,1);"}},o.prototype.FKX=function(){return{Name:"FKX",Description:"反K线",IsMainIndex:!0,Args:[],Script:"DRAWKLINE(-LOW, -OPEN, -HIGH, -CLOSE);"}},o.prototype.DKCOL=function(){return{Name:"DKCOL",Description:"多空能量柱(适用于分时主图)",IsMainIndex:!0,Args:[{Name:"N",Value:5}],Script:"FF:=(C-REF(C,N))/REF(C,N);\nSTICKLINE(FF>0,DYNAINFO(3),DYNAINFO(3)*(1+FF),0.5,0),COLORRED;\nSTICKLINE(FF<0,DYNAINFO(3),DYNAINFO(3)*(1+FF),0.5,0),COLORGREEN;"}},o.prototype.UDL=function(){return{Name:"UDL",Description:"引力线",IsMainIndex:!1,Args:[{Name:"N1",Value:3},{Name:"N2",Value:5},{Name:"N3",Value:10},{Name:"N4",Value:20},{Name:"M",Value:6}],Script:"UDL:(MA(CLOSE,N1)+MA(CLOSE,N2)+MA(CLOSE,N3)+MA(CLOSE,N4))/4;\nMAUDL:MA(UDL,M);"}},o.prototype.MFI=function(){return{Name:"MFI",Description:"资金流量指标",IsMainIndex:!1,Args:[{Name:"N",Value:14},{Name:"N2",Value:6}],Script:"TYP := (HIGH + LOW + CLOSE)/3;\nV1:=SUM(IF(TYP>REF(TYP,1),TYP*VOL,0),N)/SUM(IF(TYP<REF(TYP,1),TYP*VOL,0),N);\nMFI:100-(100/(1+V1));"}},o.prototype.LWR=function(){return{Name:"LWR",Description:"LWR威廉指标",IsMainIndex:!1,Args:[{Name:"N",Value:9},{Name:"M1",Value:3},{Name:"M2",Value:3}],Script:"RSV:= (HHV(HIGH,N)-CLOSE)/(HHV(HIGH,N)-LLV(LOW,N))*100;\nLWR1:SMA(RSV,M1,1);\nLWR2:SMA(LWR1,M2,1);"}},o.prototype.MARSI=function(){return{Name:"MARSI",Description:"相对强弱平均线",IsMainIndex:!1,Args:[{Name:"M1",Value:10},{Name:"M2",Value:6}],Script:"DIF:=CLOSE-REF(CLOSE,1);\nVU:=IF(DIF>=0,DIF,0);\nVD:=IF(DIF<0,-DIF,0);\nMAU1:=MEMA(VU,M1);\nMAD1:=MEMA(VD,M1);\nMAU2:=MEMA(VU,M2);\nMAD2:=MEMA(VD,M2);\nRSI10:MA(100*MAU1/(MAU1+MAD1),M1);\nRSI6:MA(100*MAU2/(MAU2+MAD2),M2);"}},o.prototype.CYD=function(){return{Name:"CYD",Description:"承接因子",IsMainIndex:!1,Args:[{Name:"N",Value:21}],Script:"CYDS:WINNER(CLOSE)/(VOL/CAPITAL);\nCYDN:WINNER(CLOSE)/MA(VOL/CAPITAL,N);"}},o.prototype.CYF=function(){return{Name:"CYF",Description:"市场能量",IsMainIndex:!1,Args:[{Name:"N",Value:21}],Script:"CYF:100-100/(1+EMA(HSL,N));"}},o.prototype.TAPI=function(){return{Name:"TAPI",Description:"加权指数成交值",IsMainIndex:!1,Args:[{Name:"M",Value:6}],Script:"TAPI:AMOUNT/INDEXC;\nMATAIP:MA(TAPI,M);"}},o.prototype.VMACD=function(){return{Name:"VMACD",Description:"量平滑异同平均",IsMainIndex:!1,Args:[{Name:"SHORT",Value:12},{Name:"LONG",Value:26},{Name:"MID",Value:9}],Script:"DIF:EMA(VOL,SHORT)-EMA(VOL,LONG);\nDEA:EMA(DIF,MID);\nMACD:DIF-DEA,COLORSTICK;"}},o.prototype.QACD=function(){return{Name:"QACD",Description:"快速异同平均",IsMainIndex:!1,Args:[{Name:"N1",Value:12},{Name:"N2",Value:26},{Name:"M",Value:9}],Script:"DIF:EMA(CLOSE,N1)-EMA(CLOSE,N2);\nMACD:EMA(DIF,M);\nDDIF:DIF-MACD;"}},o.prototype.VPT=function(){return{Name:"VPT",Description:"量价曲线",IsMainIndex:!1,Args:[{Name:"N",Value:51},{Name:"M",Value:6}],Script:"VPT:SUM(VOL*(CLOSE-REF(CLOSE,1))/REF(CLOSE,1),N);\nMAVPT:MA(VPT,M);"}},o.prototype.WVAD=function(){return{Name:"WVAD",Description:"威廉变异离散量",IsMainIndex:!1,Args:[{Name:"N",Value:24},{Name:"M",Value:6}],Script:"WVAD:SUM((CLOSE-OPEN)/(HIGH-LOW)*VOL,N)/10000;\nMAWVAD:MA(WVAD,M);"}},o.prototype.DBQR=function(){return{Name:"WVAD",Description:"对比强弱",IsMainIndex:!1,Args:[{Name:"N",Value:5},{Name:"M1",Value:10},{Name:"M2",Value:20},{Name:"M3",Value:60}],Script:"ZS:(INDEXC-REF(INDEXC,N))/REF(INDEXC,N);\nGG:(CLOSE-REF(CLOSE,N))/REF(CLOSE,N);\nMADBQR1:MA(GG,M1);\nMADBQR2:MA(GG,M2);\nMADBQR3:MA(GG,M3);"}},o.prototype.JS=function(){return{Name:"JS",Description:"加速线",IsMainIndex:!1,Args:[{Name:"N",Value:5},{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20}],Script:"JS:100*(CLOSE-REF(CLOSE,N))/(N*REF(CLOSE,N));\nMAJS1:MA(JS,M1);\nMAJS2:MA(JS,M2);\nMAJS3:MA(JS,M3);"}},o.prototype.CYE=function(){return{Name:"CYE",Description:"市场趋势",IsMainIndex:!1,Args:[],Script:"MAL:=MA(CLOSE,5);\nMAS:=MA(MA(CLOSE,20),5);\nCYEL:(MAL-REF(MAL,1))/REF(MAL,1)*100;\nCYES:(MAS-REF(MAS,1))/REF(MAS,1)*100;"}},o.prototype.QR=function(){return{Name:"QR",Description:"强弱指标",IsMainIndex:!1,Args:[{Name:"N",Value:21}],Script:"个股: (CLOSE-REF(CLOSE,N))/REF(CLOSE,N)*100; \n大盘: (INDEXC-REF(INDEXC,N))/REF(INDEXC,N)*100; \n强弱值:EMA(个股-大盘,2),COLORSTICK;"}},o.prototype.GDX=function(){return{Name:"GDX",Description:"轨道线",IsMainIndex:!1,Args:[{Name:"N",Value:30},{Name:"M",Value:9}],Script:"AA:=ABS((2*CLOSE+HIGH+LOW)/4-MA(CLOSE,N))/MA(CLOSE,N); \n轨道:DMA(CLOSE,AA);\n压力线:(1+M/100)*轨道; \n支撑线:(1-M/100)*轨道;"}},o.prototype.JLHB=function(){return{Name:"JLHB",Description:"绝路航标",IsMainIndex:!1,Args:[{Name:"N",Value:7},{Name:"M",Value:5}],Script:"VAR1:=(CLOSE-LLV(LOW,60))/(HHV(HIGH,60)-LLV(LOW,60))*80; \nB:SMA(VAR1,N,1); \nVAR2:SMA(B,M,1); \n绝路航标:IF(CROSS(B,VAR2) AND B<40,50,0);"}},o.prototype.PCNT=function(){return{Name:"PCNT",Description:"幅度比",IsMainIndex:!1,Args:[{Name:"M",Value:5}],Script:"PCNT:(CLOSE-REF(CLOSE,1))/CLOSE*100;\nMAPCNT:EXPMEMA(PCNT,M);"}},o.prototype.BTX=function(){return{Name:"BTX",Description:"宝塔线",IsMainIndex:!1,Args:[],Script:"B1:=REF(C,1);\nB2:= REF(C, 2);\nSS:= IF(C > REF(C, 1) AND REF(C, 1) >= REF(C, 2), 1, IF(C < REF(C, 1) AND REF(C, 1) <= REF(C, 2), -1, IF(C > REF(C, 2) AND REF(C, 2) > REF(C, 1), 2, IF(C < REF(C, 2) AND REF(C, 2) < REF(C, 1), -2, 0))));\nSM:= IF(REF(SS, 1) <> 0, REF(SS, 1), IF(REF(SS, 2) <> 0, REF(SS, 2), IF(REF(SS, 3) <> 0, REF(SS, 3), IF(REF(SS, 5) <> 0, REF(SS, 5), IF(REF(SS, 6) <> 0, REF(SS, 6), IF(REF(SS, 7) <> 0, REF(SS, 7), 0))))));\nMC:= IF(REF(SS, 1) <> 0, B2, IF(SM > 0, MIN(B1, B2), MAX(B1, B2)));\nTOW1:= IF(C > REF(C, 1), C, REF(C, 1));\nTOW2:= IF((SS == -1 OR SS == -2) AND SM > 0, B2, TOW1);\nTOWER:= IF(TOW1 > TOW2, TOW1, TOW2);\nSTICKLINE(SS == 1 OR SM >= 1 AND SS == 0, B1, C, 10, 1), COLORRED;\nSTICKLINE(SS == -1 OR SM <= -1 AND SS == 0, B1, C, 10, 0), COLORCYAN;\nSTICKLINE(SS == 2, B2, C, 10, 1), COLORRED;\nSTICKLINE(SS == -2, B2, C, 10, 0), COLORCYAN;\nSTICKLINE((SS == -1 OR SS == -2) AND SM > 0, B2, B1, 10, 1), COLORRED;\nSTICKLINE((SS == 1 OR SS == 2) AND SM < 0, B2, B1, 10, 0), COLORCYAN;"}},o.prototype.AMO=function(){return{Name:"AMO",Description:"成交金额",IsMainIndex:!1,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10}],Script:"AMOW:AMOUNT/10000.0,VOLSTICK;\nAMO1:MA(AMOW,M1);\nAMO2:MA(AMOW,M2);"}},o.prototype.VRSI=function(){return{Name:"VRSI",Description:"相对强弱量",IsMainIndex:!1,Args:[{Name:"N1",Value:6},{Name:"N2",Value:12},{Name:"N3",Value:24}],Script:"LC:=REF(VOL,1);\nRSI1:SMA(MAX(VOL-LC,0),N1,1)/SMA(ABS(VOL-LC),N1,1)*100;\nRSI2:SMA(MAX(VOL-LC,0),N2,1)/SMA(ABS(VOL-LC),N2,1)*100;\nRSI3:SMA(MAX(VOL-LC,0),N3,1)/SMA(ABS(VOL-LC),N3,1)*100;"}},o.prototype.HSCOL=function(){return{Name:"HSCOL",Description:"换手柱",IsMainIndex:!1,Args:[{Name:"N",Value:5}],Script:"HSCOL:IF((SETCODE==0||SETCODE==1),100*VOL,VOL)/(FINANCE(7)/100),VOLSTICK;\nMAHSL:MA(HSCOL,N);"}},o.prototype.DBQRV=function(){return{Name:"DBQRV",Description:"对比强弱量(需下载日线)",IsMainIndex:!1,Args:[{Name:"N",Value:5}],Script:"ZS:(INDEXV-REF(INDEXV,N))/REF(INDEXV,N);\nGG:(VOL-REF(VOL,N))/REF(VOL,N);"}},o.prototype.DBLB=function(){return{Name:"DBLB",Description:"对比量比(需下载日线)",IsMainIndex:!1,Args:[{Name:"N",Value:5},{Name:"M",Value:5}],Script:"GG:=VOL/SUM(REF(VOL,1),N);\nZS:=INDEXV/SUM(REF(INDEXV,1),N);\nDBLB:GG/ZS;\nMADBLB:MA(DBLB,M);"}},o.prototype.ACD=function(){return{Name:"ACD",Description:"升降线",IsMainIndex:!1,Args:[{Name:"M",Value:20}],Script:"LC:=REF(CLOSE,1);\nDIF:=CLOSE-IF(CLOSE>LC,MIN(LOW,LC),MAX(HIGH,LC));\nACD:SUM(IF(CLOSE==LC,0,DIF),0);\nMAACD:EXPMEMA(ACD,M);"}},o.prototype.EXPMA=function(){return{Name:"EXPMA",Description:"指数平均线",IsMainIndex:!0,Args:[{Name:"M1",Value:12},{Name:"M2",Value:50}],Script:"EXP1:EMA(CLOSE,M1);\nEXP2:EMA(CLOSE,M2);"}},o.prototype.EXPMA_S=function(){return{Name:"EXPMA_S",Description:"指数平均线-副图",IsMainIndex:!1,Args:[{Name:"M1",Value:12},{Name:"M2",Value:50}],Script:"EXP1:EMA(CLOSE,M1);\nEXP2:EMA(CLOSE,M2);"}},o.prototype.HMA=function(){return{Name:"HMA",Description:"高价平均线",IsMainIndex:!0,Args:[{Name:"M1",Value:6},{Name:"M2",Value:12},{Name:"M3",Value:30},{Name:"M4",Value:72},{Name:"M5",Value:144}],Script:"HMA1:MA(HIGH,M1);\nHMA2:MA(HIGH,M2);\nHMA3:MA(HIGH,M3);\nHMA4:MA(HIGH,M4);\nHMA5:MA(HIGH,M5);"}},o.prototype.LMA=function(){return{Name:"LMA",Description:"低价平均线",IsMainIndex:!0,Args:[{Name:"M1",Value:6},{Name:"M2",Value:12},{Name:"M3",Value:30},{Name:"M4",Value:72},{Name:"M5",Value:144}],Script:"LMA1:MA(LOW,M1);\nLMA2:MA(LOW,M2);\nLMA3:MA(LOW,M3);\nLMA4:MA(LOW,M4);\nLMA5:MA(LOW,M5);"}},o.prototype.VMA=function(){return{Name:"VMA",Description:"变异平均线",IsMainIndex:!0,Args:[{Name:"M1",Value:6},{Name:"M2",Value:12},{Name:"M3",Value:30},{Name:"M4",Value:72},{Name:"M5",Value:144}],Script:"VV:=(HIGH+OPEN+LOW+CLOSE)/4;\nVMA1:MA(VV,M1);\nVMA2:MA(VV,M2);\nVMA3:MA(VV,M3);\nVMA4:MA(VV,M4);\nVMA5:MA(VV,M5);"}},o.prototype.AMV=function(){return{Name:"AMV",Description:"成本价均线",IsMainIndex:!1,Args:[{Name:"M1",Value:6},{Name:"M2",Value:12},{Name:"M3",Value:30},{Name:"M4",Value:72},{Name:"M5",Value:144}],Script:"AMOV:=VOL*(OPEN+CLOSE)/2;\nAMV1:SUM(AMOV,M1)/SUM(VOL,M1);\nAMV2:SUM(AMOV,M2)/SUM(VOL,M2);\nAMV3:SUM(AMOV,M3)/SUM(VOL,M3);\nAMV4:SUM(AMOV,M4)/SUM(VOL,M4);"}},o.prototype.BBIBOLL=function(){return{Name:"BBIBOLL",Description:"多空布林线",IsMainIndex:!0,Args:[{Name:"N",Value:11},{Name:"M",Value:6}],Script:"CV:=CLOSE;\nBBIBOLL:(MA(CV,3)+MA(CV,6)+MA(CV,12)+MA(CV,24))/4;\nUPR:BBIBOLL+M*STD(BBIBOLL,N);\nDWN:BBIBOLL-M*STD(BBIBOLL,N);"}},o.prototype.ALLIGAT=function(){return{Name:"ALLIGAT",Description:"鳄鱼线",IsMainIndex:!0,Args:[],Script:"NN:=(H+L)/2;\n上唇:REF(MA(NN,5),3),COLOR40FF40;\n牙齿:REF(MA(NN,8),5),COLOR0000C0;\n下颚:REF(MA(NN,13),8),COLORFF4040;"}},o.prototype.ZX=function(){return{Name:"ZX",Description:"重心线",IsMainIndex:!1,Args:[],Script:"AV:0.01*AMOUNT/VOL;"}},o.prototype.XS=function(){return{Name:"XS",Description:"薛斯通道",IsMainIndex:!0,Args:[{Name:"N",Value:13}],Script:"VAR2:=CLOSE*VOL;\nVAR3:=EMA((EMA(VAR2,3)/EMA(VOL,3)+EMA(VAR2,6)/EMA(VOL,6)+EMA(VAR2,12)/EMA(VOL,12)+EMA(VAR2,24)/EMA(VOL,24))/4,N);\nSUP:1.06*VAR3;\nSDN:VAR3*0.94;\nVAR4:=EMA(CLOSE,9);\nLUP:EMA(VAR4*1.14,5);\nLDN:EMA(VAR4*0.86,5);"}},o.prototype.XS2=function(){return{Name:"XS2",Description:"薛斯通道II",IsMainIndex:!0,Args:[{Name:"N",Value:102},{Name:"M",Value:7}],Script:"AA:=MA((2*CLOSE+HIGH+LOW)/4,5); \n通道1:AA*N/100; \n通道2:AA*(200-N)/100; \nCC:=ABS((2*CLOSE+HIGH+LOW)/4-MA(CLOSE,20))/MA(CLOSE,20); \nDD:=DMA(CLOSE,CC); \n通道3:(1+M/100)*DD; \n通道4:(1-M/100)*DD;"}},o.prototype.SG_XDT=function(){return{Name:"SG-XDT",Description:"心电图(需下载日线)",IsMainIndex:!1,Args:[{Name:"P1",Value:5},{Name:"P2",Value:10}],Script:"QR:CLOSE/INDEXC*1000;\nMQR1:MA(QR,5);\nMQR2:MA(QR,10);"}},o.prototype.SG_SMX=function(){return{Name:"SG-SMX",Description:"生命线(需下载日线)",IsMainIndex:!1,Args:[{Name:"N",Value:50}],Script:"H1:=HHV(HIGH,N);\nL1:=LLV(LOW,N);\nH2:=HHV(INDEXH,N);\nL2:=LLV(INDEXL,N);\nZY:=CLOSE/INDEXC*2000;\nZY1:EMA(ZY,3);\nZY2:EMA(ZY,17);\nZY3:EMA(ZY,34);"}},o.prototype.SG_LB=function(){return{Name:"SG-LB",Description:"量比(需下载日线)",IsMainIndex:!1,Args:[],Script:"ZY2:=VOL/INDEXV*1000;\n量比:ZY2;\nMA5:MA(ZY2,5);\nMA10:MA(ZY2,10);"}},o.prototype.SG_PF=function(){return{Name:"SG-PF",Description:"强势股评分(需下载日线)",IsMainIndex:!1,Args:[],Script:"ZY1:=CLOSE/INDEXC*1000;\nA1:=IF(ZY1>HHV(ZY1,3),10,0);\nA2:=IF(ZY1>HHV(ZY1,5),15,0);\nA3:=IF(ZY1>HHV(ZY1,10),20,0);\nA4:=IF(ZY1>HHV(ZY1,2),10,0);\nA5:=COUNT(ZY1>REF(ZY1,1) ,9)*5;\n强势股评分:A1+A2+A3+A4+A5;"}},o.prototype.RAD=function(){return{Name:"RAD",Description:"威力雷达(需下载日线)",IsMainIndex:!1,Args:[{Name:"D",Value:3},{Name:"S",Value:30},{Name:"M",Value:30}],Script:"SM:=(OPEN+HIGH+CLOSE+LOW)/4;\nSMID:=MA(SM,D);\nIM:=(INDEXO+INDEXH+INDEXL+INDEXC)/4;\nIMID:=MA(IM,D);\nSI1:=(SMID-REF(SMID,1))/SMID;\nII:=(IMID-REF(IMID,1))/IMID;\nRADER1:SUM((SI1-II)*2,S)*1000;\nRADERMA:SMA(RADER1,M,1);"}},o.prototype.SHT=function(){return{Name:"SHT",Description:"龙系短线",IsMainIndex:!1,Args:[{Name:"N",Value:5}],Script:"VAR1:=MA((VOL-REF(VOL,1))/REF(VOL,1),5);\nVAR2:=(CLOSE-MA(CLOSE,24))/MA(CLOSE,24)*100;\nMY: VAR2*(1+VAR1);\nSHT: MY, COLORSTICK;\nSHTMA: MA(SHT,N);"}},o.prototype.ZLJC=function(){return{Name:"ZLJC",Description:"主力进出",IsMainIndex:!1,Args:[],Script:"VAR1:=(CLOSE+LOW+HIGH)/3; \nVAR2:=SUM(((VAR1-REF(LOW,1))-(HIGH-VAR1))*VOL/100000/(HIGH-LOW),0); \nVAR3:=EMA(VAR2,1); \nJCS:VAR3; \nJCM:MA(VAR3,12); \nJCL:MA(VAR3,26);"}},o.prototype.ZLMM=function(){return{Name:"ZLMM",Description:"主力买卖",IsMainIndex:!1,Args:[],Script:"LC :=REF(CLOSE,1);\nRSI2:=SMA(MAX(CLOSE-LC,0),12,1)/SMA(ABS(CLOSE-LC),12,1)*100;\nRSI3:=SMA(MAX(CLOSE-LC,0),18,1)/SMA(ABS(CLOSE-LC),18,1)*100;\nMMS:MA(3*RSI2-2*SMA(MAX(CLOSE-LC,0),16,1)/SMA(ABS(CLOSE-LC),16,1)*100,3);\nMMM:EMA(MMS,8);\nMML:MA(3*RSI3-2*SMA(MAX(CLOSE-LC,0),12,1)/SMA(ABS(CLOSE-LC),12,1)*100,5);"}},o.prototype.SLZT=function(){return{Name:"SLZT",Description:"神龙在天",IsMainIndex:!1,Args:[],Script:"白龙: MA(CLOSE,125);\n黄龙: 白龙+2*STD(CLOSE,170);\n紫龙: 白龙-2*STD(CLOSE,145);\n青龙: SAR(125,1,7), LINESTICK;\nVAR2:=HHV(HIGH,70);\nVAR3:=HHV(HIGH,20);\n红龙: VAR2*0.83;\n蓝龙: VAR3*0.91;"}},o.prototype.ADVOL=function(){return{Name:"ADVOL",Description:"龙系离散量",IsMainIndex:!1,Args:[],Script:"A:=SUM(((CLOSE-LOW)-(HIGH-CLOSE))*VOL/10000/(HIGH-LOW),0);\nADVOL:A;\nMA1:MA(A,30);\nMA2:MA(MA1,100);"}},o.prototype.CYC=function(){return{Name:"CYC",Description:"成本均线",IsMainIndex:!0,Args:[{Name:"P1",Value:5},{Name:"P2",Value:13},{Name:"P3",Value:34}],Script:"JJJ:=IF(DYNAINFO(8)>0.01,0.01*DYNAINFO(10)/DYNAINFO(8),DYNAINFO(3));\nDDD:=(DYNAINFO(5)<0.01 || DYNAINFO(6)<0.01);\nJJJT:=IF(DDD,1,(JJJ<(DYNAINFO(5)+0.01) && JJJ>(DYNAINFO(6)-0.01)));\nCYC1:IF(JJJT,0.01*EMA(AMOUNT,P1)/EMA(VOL,P1),EMA((HIGH+LOW+CLOSE)/3,P1));\nCYC2:IF(JJJT,0.01*EMA(AMOUNT,P2)/EMA(VOL,P2),EMA((HIGH+LOW+CLOSE)/3,P2));\nCYC3:IF(JJJT,0.01*EMA(AMOUNT,P3)/EMA(VOL,P3),EMA((HIGH+LOW+CLOSE)/3,P3));\nCYC4:IF(JJJT,DMA(AMOUNT/(100*VOL),100*VOL/FINANCE(7)),EMA((HIGH+LOW+CLOSE)/3,120));"}},o.prototype.CYS=function(){return{Name:"CYS",Description:"市场盈亏",IsMainIndex:!1,Args:[],Script:"CYC13:EMA(AMOUNT,13)/EMA(VOL,13);\nCYS:(CLOSE-CYC13)/CYC13*100;"}},o.prototype.CYQKL=function(){return{Name:"CYQKL",Description:"博弈K线长度",IsMainIndex:!1,Args:[],Script:"KL:100*(WINNER(CLOSE)-WINNER(OPEN));"}},o.prototype.SCR=function(){return{Name:"SCR",Description:"筹码集中度",IsMainIndex:!1,Args:[{Name:"P1",Value:90}],Script:"A:=P1+(100-P1)/2;\nB:=(100-P1)/2;\nCC:=COST(A);\nDD:=COST(B);\nSCR:(CC-DD)/(CC+DD)*100/2;"}},o.prototype.ASR=function(){return{Name:"ASR",Description:"浮筹比例",IsMainIndex:!1,Args:[],Script:"ASR:(WINNER(C*1.1)-WINNER(C*0.9))/WINNER(HHV(H,0))*100;"}},o.prototype.SAR=function(){return{Name:"SAR",Description:"抛物转向",IsMainIndex:!0,Args:[{Name:"P",Value:10},{Name:"STEP",Value:2},{Name:"MAXP",Value:20}],Script:"S:SAR(P,STEP,MAXP),CIRCLEDOT;"}},o.prototype.TJCJL=function(){return{Name:"太极成交量",Description:"太极成交量",IsMainIndex:!0,Args:[],Script:'总手:VOL,NODRAW;\nDRAWTEXT_FIX(ISLASTBAR,0,0,0,"说明: 红色柱为吸货量,绿色为出货量,黄色为天量,蓝色为地量"),COLORGRAY;\nZZ:=IF(REF(C,1)>REF(O,1) AND O>REF(C,1)*1.014 AND C<O*1.02,1,3);\nV5:=MA(V,5);\nV12:=MA(V,12);\nV34:=MA(V,34);\nC6:=MA(C,6);\nSTICKLINE(VOL,0,VOL,3,0),COLORLIGRAY;\nSTICKLINE(CROSS(C,C6) AND V>V5*1.2 AND V>V12*1.2 AND ZZ>2 AND C>H*0.975,0,VOL,3,0),COLORRED;\nSTICKLINE(CROSS(C6,C) AND V>V5*1.2 AND V>V12*1.2,0,VOL,3,0),COLORGREEN;\nSTICKLINE(VOL>MA(VOL,5)*2 AND V>V34*3 AND C<REF(C,1)*1.05,0,VOL,3,0),COLORYELLOW;\nSTICKLINE(VOL<MA(VOL,5)/2 AND V<V12/2,0,VOL,3,0),COLORBLUE;\nSTICKLINE(VOL>MA(VOL,5)*2 AND V>V34*3 AND C<REF(C,1)*1.05 AND CROSS(C,C6) AND V>V5*1.2 AND V>V12*1.2 AND ZZ>2 AND C>H*0.975,VOL*0.5,0,3,0),COLORRED;\nSTICKLINE(VOL>MA(VOL,5)*2 AND V>V34*3 AND C<REF(C,1)*1.05 AND CROSS(C6,C) AND V>V5*1.2 AND V>V12*1.2,VOL*0.5,0,3,0),COLORRED;'}},o.prototype.Dragon4_Main=function(){return{Name:"飞龙四式",Description:"飞龙四式",IsMainIndex:!0,Args:[{Name:"N1",Value:5},{Name:"N2",Value:10},{Name:"N3",Value:50},{Name:"N4",Value:60}],Script:"蜻蜓点水:=EMA(CLOSE,N1),COLORGRAY;\n魔界:=EMA(CLOSE,N2),COLORGREEN;\n水:=EMA(CLOSE,N3),COLORRED;\nDRAWKLINE(HIGH,OPEN,LOW,CLOSE);\n生命线:MA(CLOSE,N4),COLORBLUE,LINETHICK2;\nDRAWBAND(魔界,'RGB(186,225,250)',水,'RGB(253,194,124)');\nDRAWBAND(蜻蜓点水,'RGB(128,138,135)',魔界,'RGB(0,0,255)');"}},o.prototype.Dragon4_Fig=function(){return{Name:"飞龙四式",Description:"飞龙四式",IsMainIndex:!1,Args:[],Script:"倍:VOL>=REF(V,1)*1.90 AND C>REF(C,1),COLORYELLOW;\n低:VOL<REF(LLV(VOL,13),1),COLORGREEN;\n地:VOL<REF(LLV(VOL,100),1),COLORMAGENTA; \n平:=ABS(VOL-HHV(REF(VOL,1),5))/HHV(REF(VOL,1),5)<=0.03 OR ABS(VOL-REF(VOL,1))/REF(VOL,1)<=0.03,NODRAW,COLORWHITE;\n倍缩:VOL<=REF(V,1)*0.5,COLORFF8000;\n梯量:COUNT(V>REF(V,1),3)==3 AND COUNT(C>O,3)==3,COLORBROWN;\n缩量涨:COUNT(C>REF(C,1),2)==2 AND COUNT(V<REF(V,1),2)==2,COLORBLUE;\nSTICKLINE(C>=REF(C,1),V,0,2,0),COLORRED;\nSTICKLINE(C<REF(C,1),V,0,2,0),COLORGREEN;\nSTICKLINE(倍,0,V,2,0),COLORYELLOW;\nSTICKLINE(低,0,V,2,0),COLORGREEN;\nSTICKLINE(地,0,V,2,0),COLORLIMAGENTA;\nSTICKLINE(平,0,V,2,0),COLORGRAY;\nSTICKLINE(倍缩,0,V,2,0),COLORFF8000;\nSTICKLINE(梯量,0,V,2,0),COLORBROWN;\nSTICKLINE(缩量涨,0,V,2,0),COLORBLUE;"}},o.prototype.FundsAnalysis=function(){return{Name:"资金分析",Description:"资金分析",IsMainIndex:!1,Args:[{Name:"M",Value:55},{Name:"N",Value:34}],Script:"LC:=REF(CLOSE,1);\nRSI:=((SMA(MAX((CLOSE - LC),0),3,1) / SMA(ABS((CLOSE - LC)),3,1)) * 100);\nFF:=EMA(CLOSE,3);\nMA15:=EMA(CLOSE,21); DRAWTEXT(CROSS(85,RSI),75,'▼'),COLORGREEN;\nVAR1:=IF(YEAR>=2038 AND MONTH>=1,0,1);\nVAR2:=REF(LOW,1)*VAR1;\nVAR3:=SMA(ABS(LOW-VAR2),3,1)/SMA(MAX(LOW-VAR2,0),3,1)*100*VAR1;\nVAR4:=EMA(IF(CLOSE*1.3,VAR3*10,VAR3/10),3)*VAR1;\nVAR5:=LLV(LOW,30)*VAR1;\nVAR6:=HHV(VAR4,30)*VAR1;\nVAR7:=IF(MA(CLOSE,58),1,0)*VAR1;\nVAR8:=EMA(IF(LOW<=VAR5,(VAR4+VAR6*2)/2,0),3)/618*VAR7*VAR1;\n吸筹A:IF(VAR8>100,100,VAR8)*VAR1,COLORFB2F3B;\n{吸筹B}STICKLINE(吸筹A>-150,0,吸筹A,8,0),COLORFB2F3B;\n\n散户线: 100*(HHV(HIGH,M)-CLOSE)/(HHV(HIGH,M)-LLV(LOW,M)),COLORAA89BD,LINETHICK2;\nRSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;\nK:=SMA(RSV,3,1);\nD:=SMA(K,3,1);\nJ:=3*K-2*D;\n主力线:EMA(J,5),COLORF39800,LINETHICK2;\nDRAWICON(CROSS(主力线,散户线),主力线,1);\nDRAWICON(CROSS(散户线,主力线),主力线,2);"}},o.prototype.MarginProportion=function(){return{Name:"融资占比(%)",Description:"融资占比",IsMainIndex:!1,Condition:{Period:[Er.KLINE_DAY_ID]},Args:[],Script:"占比:MARGIN(2);"}},o.prototype.Margin2=function(){return{Name:"两融余额",Description:"融资融券余额",IsMainIndex:!1,Condition:{Period:[Er.KLINE_DAY_ID]},Args:[{Name:"N",Value:5}],Script:"T1:MARGIN(1);\n        T2:MA(MARGIN(1),N);"}},o.prototype.Margin3=function(){return{Name:"两融余额",Description:"融资融券余额",IsMainIndex:!1,Condition:{Period:[Er.KLINE_DAY_ID]},Args:[{Name:"N",Value:5}],Script:"T1:=MARGIN(1);\n        T2:=MA(MARGIN(1),N);\n        STICKLINE(T1-T2>=0,0,T1-T2,50,T1>T2),COLORRED;\n        STICKLINE(T1-T2<0,T1-T2,0,50,T1>T2),COLORGREEN;"}},o.prototype.FXG_BSPoint=function(){return{Name:"操盘BS点",Description:"操盘BS点",IsMainIndex:!0,Args:[],Script:"MA5:MA(CLOSE,5);\n        MA13:MA(CLOSE,13);\n        MA21:MA(CLOSE,21);\n        MA34:MA(CLOSE,34);\n        {MA55:MA(CLOSE,55),COLOR0000FF;}\n        {MA120:=MA(CLOSE,120),COLORFFFF00;}\n        天使:=EMA(C,2),COLOR000000;\n        魔鬼:=EMA(SLOPE(C,21)*20+C,42),COLOR000000;\n        买:=CROSS(天使,魔鬼);\n        卖:=CROSS(魔鬼,天使);\n        DRAWICON(买,L*0.97,13);\n        DRAWICON(卖,H*1.03,14);\n        DRAWKLINE_IF(天使>=魔鬼,HIGH,CLOSE,LOW,OPEN),COLORRED;\n        DRAWKLINE_IF(天使<魔鬼,HIGH,CLOSE,LOW,OPEN),COLORBLUE;\n        DRAWKLINE_IF(CROSS(天使,魔鬼),HIGH,CLOSE,LOW,OPEN),COLORYELLOW;\n        DRAWKLINE_IF(CROSS(魔鬼,天使),HIGH,CLOSE,LOW,OPEN),COLORBLACK;"}},o.prototype.FXG_INDEX=function(){return{Name:"涨停多空线",Description:"涨停多空线",IsMainIndex:!1,Args:[],Script:"做多能量线: SMA((CLOSE-LLV(LOW,9))/(HHV(HIGH,9)-LLV(LOW,9))*100,5,1)-8,COLORRED,LINETHICK3;\n做空能量线: SMA((HHV(HIGH,36)-CLOSE)/(HHV(HIGH,36)-LLV(LOW,36))*100,2,1),COLORGREEN,LINETHICK3;\n20,POINTDOT,COLORF00FF0;\n50,POINTDOT,COLORGREEN;\n80,POINTDOT,COLORLIBLUE;"}},o.prototype.FXG_INDEX2=function(){return{Name:"涨停吸筹区",Description:"涨停吸筹区",IsMainIndex:!1,Args:[],Script:"VAR0:=EMA(HHV(HIGH,500),21); \nVAR1:=EMA(HHV(HIGH,250),21);\nVAR2:=EMA(HHV(HIGH,90),21); \nVAR3:=EMA(LLV(LOW,500),21); \nVAR4:=EMA(LLV(LOW,250),21); \nVAR5:=EMA(LLV(LOW,90),21);\n\nVAR6:=EMA((VAR3*0.96+VAR4*0.96+VAR5*0.96+VAR0*0.558+VAR1*0.558+VAR2*0.558)/6,21); \nVAR7:=EMA((VAR3*1.25+VAR4*1.23+VAR5*1.2+VAR0*0.55+VAR1*0.55+VAR2*0.65)/6,21); \nVAR8:=EMA((VAR3*1.3+VAR4*1.3+VAR5*1.3+VAR0*0.68+VAR1*0.68+VAR2*0.68)/6,21); \nVAR9:=EMA((VAR6*3+VAR7*2+VAR8)/6*1.738,21); \nVAR10:=REF(LOW,1); \nVAR11:=SMA(ABS(LOW-VAR10),3,1)/SMA(MAX(LOW-VAR10,0),3,1)*100; \nVAR12:=EMA(IFF(CLOSE*1.35<=VAR9,VAR11*10,VAR11/10),3); \nVAR13:=LLV(LOW,30); \nVAR14:=HHV(VAR12,30); \nVAR15:=IFF(MA(CLOSE,58),1,0); \nVAR16:=EMA(IFF(LOW<=VAR13,(VAR12+VAR14*2)/2,0),3)/618*VAR15;\n\n资金入场:IFF(VAR16>0,VAR16,0),LINETHICK,LINETHICK2, COLORFF0000; \n\nA1:IFF(资金入场>0,资金入场*1.2,0),STICK,LINETHICK5, COLORFF0000;\nA2:IFF(资金入场>0,资金入场*0.8,0),STICK,LINETHICK5, COLORFF6600;\nA3:IFF(资金入场>0,资金入场*0.6,0),STICK,LINETHICK5, COLORFF9900;\nA4:IFF(资金入场>0,资金入场*0.4,0) ,STICK,LINETHICK5,COLORFFCC00;\nA5:IFF(资金入场>0,资金入场*0.2,0) ,STICK,LINETHICK5,COLORFFFF00;"}},o.prototype.FXG_INDEX3=function(){return{Name:"量能黄金点",Description:"量能黄金点",IsMainIndex:!1,FloatPrecision:0,Args:[],Script:"A:=IFF((CLOSE>126.32),VOL,VOL); \n主力:=MA(A,4),COLORRED;\n游资:=MA(A,8),COLORYELLOW;\n大户:=MA(A,16),COLORF0F000;\n散户:=MA(A,32),COLOR00FF00;\n主比:=ABS(((主力)/(主力 + 游资 + 大户 + 散户))*(100)),LINESTICK,COLORRED;\n游比:=ABS(((游资)/(主力 + 游资 + 大户 + 散户))*(100)),LINESTICK,COLORYELLOW;\n大比:=ABS(((大户)/(主力 + 游资 + 大户 + 散户))*(100)),LINESTICK,COLORF0F000;\n散比:=ABS(((散户)/(主力 + 游资 + 大户 + 散户))*(100)),LINESTICK,COLOR00FF00;\n警戒线:MA(A,180),COLORFF66FF;\nSTICKLINE((主力 > 0),0,主力,2.5,0),COLOR1020BB;\nSTICKLINE((主力 > 0),0,主力,0.7,0),COLORRED;\nSTICKLINE((游资 > 0),0,游资,2.5,0),COLOR009CFF;\nSTICKLINE((游资 > 0),0,游资,0.7,0),COLORYELLOW;\nSTICKLINE((大户 > 0),0,大户,2.5,0),COLORFF8800;\nSTICKLINE((大户 > 0),0,大户,0.7,0),COLORLIBLUE;\nSTICKLINE((散户 > 0),0,散户,2.5,0),COLOR00CA00;\nSTICKLINE((散户 > 0),0,散户,0.7,0),COLORGREEN;"}},o.prototype.NewsNegative=function(){return{Name:"负面新闻",Description:"负面新闻统计",IsMainIndex:!1,FloatPrecision:0,Args:[{Name:"N",Value:5},{Name:"N2",Value:10}],Script:"负面:NEWS(1);\nMA1:MA(负面,N);\nMA2:MA(负面,N2);"}},o.prototype.UpDownAnalyze=function(){return{Name:"涨跌趋势",Description:"涨跌趋势",IsMainIndex:!1,FloatPrecision:0,Condition:{Period:[Er.MINUTE_ID,Er.MULTIDAY_MINUTE_ID,Er.KLINE_DAY_ID]},Args:[],Script:"上涨家数:UPCOUNT('CNA.CI'),COLORRED;\n下跌家数:DOWNCOUNT('CNA.CI'),COLORGREEN;"}},o.prototype.HK2SHSZ=function(){return{Name:"北上资金",Description:"北上资金",IsMainIndex:!1,FloatPrecision:0,Condition:{Period:[Er.MINUTE_ID,Er.MULTIDAY_MINUTE_ID,Er.KLINE_DAY_ID]},Args:[],Script:"净流入:HK2SHSZ(1),COLORSTICK;"}},o.prototype.ShareHolder=function(){return{Name:"股东人数",Description:"股东人数",IsMainIndex:!1,FloatPrecision:0,Condition:{Period:[Er.KLINE_DAY_ID,Er.KLINE_MONTH_ID,Er.KLINE_WEEK_ID,Er.KLINE_YEAR_ID]},Args:[],Script:"人数:FINANCE(100);"}},o.prototype.VOLRate=function(){return{Name:"量比",Description:"量比",IsMainIndex:!1,Condition:{Period:[Er.MINUTE_ID,Er.MULTIDAY_MINUTE_ID]},Args:[],Script:"LIANGBI:VOLR;"}},o.prototype.COLOR_KSTAR1=function(){return{Name:"十字星",Description:"十字星",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:CLOSE==OPEN&&HIGH>LOW;"}},o.prototype.COLOR_KSTAR2=function(){return{Name:"早晨之星",Description:"早晨之星",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:(REF(CLOSE,2)/REF(OPEN,2)<0.95) && (REF(OPEN,1) < REF(CLOSE,2)) && (ABS(REF(OPEN,1)-REF(CLOSE,1))/REF(CLOSE,1)<0.03) && CLOSE/OPEN>1.05 && CLOSE>REF(CLOSE,2);"}},o.prototype.COLOR_KSTAR3=function(){return{Name:"黄昏之星",Description:"黄昏之星",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:REF(CLOSE,2)/REF(OPEN,2)>1.05 && REF(OPEN,1)>REF(CLOSE,2) && ABS(REF(OPEN,1)-REF(CLOSE,1))/REF(CLOSE,1)<0.03 && CLOSE/OPEN<0.95 && CLOSE<REF(CLOSE,2);"}},o.prototype.COLOR_SHI1=function(){return{Name:"长十字",Description:"长十字",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:CLOSE==OPEN&&HIGH/LOW>1.03;"}},o.prototype.COLOR_K220=function(){return{Name:"身怀六甲",Description:"身怀六甲",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:ABS(REF(CLOSE,1)-REF(OPEN,1))/REF(CLOSE,1)>0.04&&\n            ABS(CLOSE-OPEN)/CLOSE<0.005&&\n            MAX(CLOSE,OPEN)<MAX(REF(CLOSE,1),REF(OPEN,1))&&\n            MIN(CLOSE,OPEN)>MIN(REF(CLOSE,1),REF(OPEN,1));"}},o.prototype.COLOR_K300=function(){return{Name:"三个白武士",Description:"三个白武士",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:UPNDAY(CLOSE,3)&&NDAY(CLOSE,OPEN,3);"}},o.prototype.COLOR_K310=function(){return{Name:"三只乌鸦",Description:"三只乌鸦",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:DOWNNDAY(CLOSE,3)&&NDAY(OPEN,CLOSE,3);"}},o.prototype.COLOR_K380=function(){return{Name:"光头阳线",Description:"光头阳线",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:HIGH==CLOSE&&HIGH>LOW;"}},o.prototype.COLOR_K390=function(){return{Name:"光脚阴线",Description:"光脚阴线",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:LOW==CLOSE&&HIGH>LOW;"}},o.prototype.COLOR_K134=function(){return{Name:"垂死十字",Description:"垂死十字",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:CLOSE==OPEN&&CLOSE==LOW&&CLOSE<HIGH;"}},o.prototype.COLOR_K140=function(){return{Name:"早晨十字星",Description:"早晨十字星",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:REF(CLOSE,2)/REF(OPEN,2)<0.95&&\nREF(OPEN,1)<REF(CLOSE,2)&&\nREF(OPEN,1)==REF(CLOSE,1)&&\nCLOSE/OPEN>1.05&&CLOSE>REF(CLOSE,2);"}},o.prototype.COLOR_K150=function(){return{Name:"黄昏十字星",Description:"黄昏十字星",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:REF(CLOSE,2)/REF(OPEN,2)>1.05&&\nREF(OPEN,1)>REF(CLOSE,2)&&\nREF(OPEN,1)=REF(CLOSE,1)&&\nCLOSE/OPEN<0.95&&CLOSE<REF(CLOSE,2);"}},o.prototype.COLOR_K160=function(){return{Name:"射击之星",Description:"射击之星",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:MIN(OPEN,CLOSE)==LOW&&\nHIGH-LOW>3*(MAX(OPEN,CLOSE)-LOW)&&\nCLOSE>MA(CLOSE,5);"}},o.prototype.COLOR_K165=function(){return{Name:"倒转锤头",Description:"倒转锤头",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:MIN(OPEN,CLOSE)==LOW&&\nHIGH-LOW>3*(MAX(OPEN,CLOSE)-LOW)&&\nCLOSE<MA(CLOSE,5);"}},o.prototype.COLOR_K170=function(){return{Name:"锤头",Description:"锤头",IsMainIndex:!0,InstructionType:2,Script:"OUT:HIGH==MAX(OPEN,CLOSE)&&\nHIGH-LOW>3*(HIGH-MIN(OPEN,CLOSE))&&\nCLOSE<MA(CLOSE,5);"}},o.prototype.COLOR_K180=function(){return{Name:"吊颈",Description:"吊颈",IsMainIndex:!0,InstructionType:2,Script:"OUT:HIGH==MAX(OPEN,CLOSE)&&\nHIGH-LOW>3*(HIGH-MIN(OPEN,CLOSE))&&\nCLOSE>MA(CLOSE,5);"}},o.prototype.COLOR_K190=function(){return{Name:"穿头破脚",Description:"穿头破脚",IsMainIndex:!0,InstructionType:2,Script:"OUT:(REF(CLOSE,1)/REF(OPEN,1)>1.03&&\nCLOSE/OPEN<0.96&&\nCLOSE<REF(OPEN,1)&&OPEN>REF(CLOSE,1))||\n(REF(CLOSE,1)/REF(OPEN,1)<0.97&&\nCLOSE/OPEN>1.04&&\nCLOSE>REF(OPEN,1)&&OPEN<REF(CLOSE,1));"}},o.prototype.COLOR_SWORD=function(){return{Name:"剑",Description:"剑",IsMainIndex:!0,InstructionType:2,Script:"AA:=VOL>REF(VOL,1)||VOL>(CAPITAL*0.1);\nBB:=OPEN>=(REF(HIGH,1))&&REF(HIGH,1)>(REF(HIGH,2)*1.06);\nCC:=CLOSE>(REF(CLOSE,1))-(REF(CLOSE,1)*0.01);\nDD:=CLOSE<(HIGH*0.965) && HIGH>(OPEN*1.05);\nEE:=LOW<OPEN && LOW<CLOSE&&HIGH>(REF(CLOSE,1)*1.06);\nFF:=(HIGH-(MAX(OPEN,CLOSE)))/2>(MIN(OPEN,CLOSE))-LOW;\nGG:=(ABS(OPEN-CLOSE))/2<(MIN(OPEN,CLOSE)-LOW);\nSWORDO:AA&&BB&&CC&&DD&&EE&&FF&&GG;"}},o.prototype.COLOR_CSFR=function(){return{Name:"出水芙蓉",Description:"出水芙蓉",IsMainIndex:!0,InstructionType:2,Script:"A:=CLOSE>OPEN;\nB:=A&&CLOSE>MA(CLOSE,S)&&CLOSE>MA(CLOSE,M)&&CLOSE>MA(CLOSE,LL);\nCC:=B&&OPEN<MA(CLOSE,M)&&OPEN<MA(CLOSE,LL);\nCSFRO:CC&&(CLOSE-OPEN)>0.0618*CLOSE;"}},o.prototype.COLOR_WYGD=function(){return{Name:"乌云盖顶",Description:"乌云盖顶",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( \nREF(CLOSE,1)/REF(OPEN,1)>1.03 AND \nCLOSE/OPEN<0.97 AND \nOPEN>REF(CLOSE,1) AND CLOSE<REF(CLOSE,1), 3);"}},o.prototype.COLOR_SGCJ=function(){return{Name:"曙光初现",Description:"曙光初现",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( \nREF(CLOSE,1)/REF(OPEN,1)<0.97 AND \nCLOSE/OPEN>1.03 AND \nOPEN<REF(CLOSE,1) AND CLOSE>REF(CLOSE,1), 3);"}},o.prototype.COLOR_SZTAI=function(){return{Name:"十字胎",Description:"十字胎",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( ABS(REF(CLOSE,1)-REF(OPEN,1))/REF(CLOSE,1) > 0.04 AND \nCLOSE==OPEN AND CLOSE < MAX(REF(CLOSE,1),REF(OPEN,1)) AND \nCLOSE > MIN(REF(CLOSE,1),REF(OPEN,1)), 2);"}},o.prototype.COLOR_PINGDING=function(){return{Name:"平顶",Description:"平顶",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET(ABS(HIGH-REF(HIGH,1))/HIGH<0.001,2);"}},o.prototype.COLOR_PINGDI=function(){return{Name:"平底",Description:"平底",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET((ABS(LOW-REF(LOW,1))/LOW<0.001 AND \nABS(REF(LOW,1)-REF(LOW,2))/REF(LOW,1)<=0.001),2);"}},o.prototype.COLOR_DAYANZHU=function(){return{Name:"大阳烛",Description:"大阳烛",IsMainIndex:!0,InstructionType:2,Script:"VAR1:CLOSE/OPEN>1.05 AND HIGH/LOW < CLOSE/OPEN+0.018;"}},o.prototype.COLOR_DAYINGZHU=function(){return{Name:"大阴烛",Description:"大阴烛",IsMainIndex:!0,InstructionType:2,Script:"VAR1:OPEN/CLOSE > 1.05 AND HIGH/LOW < OPEN/CLOSE+0.018;"}},o.prototype.COLOR_HYFG=function(){return{Name:"好友反攻",Description:"好友反攻",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( (REF(CLOSE,1)<REF(OPEN,1) AND \nCLOSE>OPEN AND ABS(CLOSE-REF(CLOSE,1))/CLOSE<0.002),2);"}},o.prototype.COLOR_TKQK=function(){return{Name:"跳空缺口",Description:"跳空缺口",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( HIGH<REF(LOW,1) OR LOW>REF(HIGH,1),2);"}},o.prototype.COLOR_SFWY=function(){return{Name:"双飞乌鸦",Description:"双飞乌鸦",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( REF(CLOSE,1)<REF(OPEN,1) AND CLOSE<OPEN AND CLOSE/OPEN<0.98,1);"}},o.prototype.COLOR_SSSBQ=function(){return{Name:"上升三部曲",Description:"上升三部曲",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( \nREF(CLOSE,4)/REF(OPEN,4)>1.03 AND \nREF(CLOSE,3)<REF(OPEN,3) AND \nREF(CLOSE,2)<REF(OPEN,2) AND \nREF(CLOSE,1)<REF(OPEN,1) AND \nREF(LOW,4)<REF(LOW,3) AND \nREF(LOW,4)<REF(LOW,2) AND \nREF(LOW,4)<REF(LOW,1) AND \nREF(HIGH,4)>REF(HIGH,3) AND \nREF(HIGH,4)>REF(HIGH,2) AND \nREF(HIGH,4)>REF(HIGH,1) AND \nCLOSE/OPEN>1.03 AND \nCLOSE>REF(CLOSE,4), 5);"}},o.prototype.COLOR_XDSBQ=function(){return{Name:"下跌三部曲",Description:"下跌三部曲",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( \nREF(CLOSE,4)/REF(OPEN,4)<0.97 AND \nREF(CLOSE,3)>REF(OPEN,3) AND \nREF(CLOSE,2)>REF(OPEN,2) AND \nREF(CLOSE,1)>REF(OPEN,1) AND \nREF(LOW,4)<REF(LOW,3) AND \nREF(LOW,4)<REF(LOW,2) AND \nREF(LOW,4)<REF(LOW,1) AND \nREF(HIGH,4)>REF(HIGH,3) AND \nREF(HIGH,4)>REF(HIGH,2) AND \nREF(HIGH,4)>REF(HIGH,1) AND \nCLOSE/OPEN<0.97 AND \nCLOSE<REF(CLOSE,4), 5);"}},o.prototype.COLOR_CHXY=function(){return{Name:"长下影",Description:"长下影",IsMainIndex:!0,InstructionType:2,Script:"VAR2:(MIN(CLOSE,OPEN)-LOW)/(HIGH-LOW)>0.667;"}},o.prototype.COLOR_CHSY=function(){return{Name:"长上影",Description:"长上影",IsMainIndex:!0,InstructionType:2,Script:"VAR2:(HIGH-MAX(CLOSE,OPEN))/(HIGH-LOW)>0.667,COLORBLUE;"}},o.prototype.COLOR_FENLI=function(){return{Name:"分离",Description:"分离",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( OPEN==REF(OPEN,1) AND (CLOSE-OPEN)*(REF(CLOSE,1)-REF(OPEN,1))<0,2);"}},o.prototype.TRADE_BIAS=function(){return{Name:"BIAS",Description:"乖离率专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:12},{Name:"LL",Value:6},{Name:"LH",Value:6}],Script:"BIAS:=(CLOSE-MA(CLOSE,N))/MA(CLOSE,N)*100;\nENTERLONG:CROSS(-LL,BIAS);\nEXITLONG:CROSS(BIAS,LH);"}},o.prototype.TRADE_CCI=function(){return{Name:"CCI",Description:"CCI专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:14}],Script:"TYP:=(HIGH+LOW+CLOSE)/3;\nCCI:=(TYP-MA(TYP,N))/(0.015*AVEDEV(TYP,N));\nINDEX:=CCI;\nENTERLONG:CROSS(INDEX,-100);\nEXITLONG:CROSS(100,INDEX);"}},o.prototype.TRADE_DMI=function(){return{Name:"DMI",Description:"趋向专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:14}],Script:"MTR:=SUM(MAX(MAX(HIGH-LOW,ABS(HIGH-REF(CLOSE,1))),ABS(LOW-REF(CLOSE,1))),N);\nHD :=HIGH-REF(HIGH,1);\nLD :=REF(LOW,1)-LOW;\nPDM:=SUM(IF(HD>0&&HD>LD,HD,0),N);\nMDM:=SUM(IF(LD>0&&LD>HD,LD,0),N);\nPDI:=PDM*100/MTR;\nMDI:=MDM*100/MTR;\nENTERLONG:CROSS(PDI,MDI);\nEXITLONG:CROSS(MDI,PDI);"}},o.prototype.TRADE_KD=function(){return{Name:"KD",Description:"KD指标专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:9},{Name:"M1",Value:3},{Name:"M2",Value:3}],Script:"WRSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;\nWK:=SMA(WRSV,M1,1);\nD:=SMA(WK,M2,1);\nENTERLONG:CROSS(WK,D)&&WK<20;\nEXITLONG:CROSS(D,WK)&&WK>80;"}},o.prototype.TRADE_BOLL=function(){return{Name:"BOLL",Description:"布林带专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:20}],Script:"MID :=MA(CLOSE,N);\nUPPER:=MID+2*STD(CLOSE,N);\nLOWER:=MID-2*STD(CLOSE,N);\nENTERLONG:CROSS(CLOSE,LOWER);\nEXITLONG:CROSS(CLOSE,UPPER);"}},o.prototype.TRADE_KDJ=function(){return{Name:"KDJ",Description:"KDJ专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:9},{Name:"M1",Value:3}],Script:"RSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;\nK:=SMA(RSV,M1,1);\nD:=SMA(K,M1,1);\nJ:=3*K-2*D;\nENTERLONG:CROSS(J,0);\nEXITLONG:CROSS(100,J);"}},o.prototype.TRADE_MA=function(){return{Name:"MA",Description:"均线专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"SHORT",Value:5},{Name:"LONG",Value:20}],Script:"ENTERLONG:CROSS(MA(CLOSE,SHORT),MA(CLOSE,LONG));\nEXITLONG:CROSS(MA(CLOSE,LONG),MA(CLOSE,SHORT));"}},o.prototype.TRADE_MACD=function(){return{Name:"MACD",Description:"MACD专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"LONG",Value:26},{Name:"SHORT",Value:12},{Name:"M",Value:9}],Script:"DIFF:=EMA(CLOSE,SHORT) - EMA(CLOSE,LONG);\nDEA  := EMA(DIFF,M);\nMACD := 2*(DIFF-DEA);\nENTERLONG:CROSS(MACD,0);\nEXITLONG:CROSS(0,MACD);"}},o.prototype.TRADE_MTM=function(){return{Name:"MTM",Description:"动力指标专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:6}],Script:"WMTM:=C-REF(C,N);\nENTERLONG:CROSS(WMTM,0);\nEXITLONG:CROSS(0,WMTM);"}},o.prototype.TRADE_PSY=function(){return{Name:"PSY",Description:"PSY心理线专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:12},{Name:"LL",Value:10},{Name:"LH",Value:85}],Script:"MYPSY:=COUNT(CLOSE>REF(CLOSE,1),N)/N*100;\nENTERLONG:CROSS(LL,MYPSY);\nEXITLONG:CROSS(MYPSY,LH);"}},o.prototype.TRADE_ROC=function(){return{Name:"ROC",Description:"变动速率专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:12},{Name:"M",Value:6}],Script:"WROC:=MA(100*(CLOSE-REF(CLOSE,N))/REF(CLOSE,N),M);\nENTERLONG:CROSS(WROC,0);\nEXITLONG:CROSS(0,WROC);"}},o.prototype.TRADE_RSI=function(){return{Name:"RSI",Description:"相对强弱专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:6},{Name:"LL",Value:20},{Name:"LH",Value:80}],Script:"LC:=REF(CLOSE,1);\nWRSI:=SMA(MAX(CLOSE-LC,0),N,1)/SMA(ABS(CLOSE-LC),N,1)*100;\nENTERLONG:CROSS(WRSI,LL);\nEXITLONG:CROSS(LH,WRSI);"}},o.prototype.TRADE_VR=function(){return{Name:"VR",Description:"VR容量比率专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:26},{Name:"LL",Value:70},{Name:"LH",Value:250}],Script:"WVR := SUM((IF(CLOSE>OPEN,VOL,0)+IF(CLOSE=OPEN,VOL/2,0)),N)/SUM((IF(CLOSE<OPEN,VOL,0)+IF(CLOSE=OPEN,VOL/2,0)),N)*100;\nENTERLONG:CROSS(LL,WVR);\nEXITLONG:CROSS(WVR,LH);"}},o.prototype.TRADE_DPSJ=function(){return{Name:"DPSJ",Description:"大盘随机专家系统",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N1",Value:18},{Name:"N2",Value:12}],Script:"RSV:=(INDEXC-LLV(INDEXL,N1))/(HHV(INDEXH,N1)-LLV(INDEXL,N1))*100;\nK:=SMA(RSV,N2,1);\nHSL:VOL/100/(FINANCE(7));\nENTERLONG: CROSS(K,20);\nEXITLONG: (CROSS(HSL,5) OR CROSS(K,80));"}},o.prototype.Zealink_Index1=function(){return{Name:"资金吸筹",Description:"资金吸筹",IsMainIndex:!1,Args:[],Script:"VAR1:=REF((LOW+OPEN+CLOSE+HIGH)/4,1);  \nVAR2:= SMA(ABS(LOW - VAR1), 13, 1) / SMA(MAX(LOW - VAR1, 0), 10, 1);\nVAR3:= EMA(VAR2, 10);\nVAR4:= LLV(LOW, 33);\nVAR5:= EMA(IF(LOW <= VAR4, VAR3, 0), 3) * 0.2;\n主力进场: IF(VAR5 > REF(VAR5, 1), VAR5,0), COLORRED, NODRAW;\n洗盘: IF(VAR5 < REF(VAR5, 1),  VAR5,0), COLORYELLOW, NODRAW;\nSTICKLINE(VAR5> REF(VAR5, 1),0, VAR5, 20, 0), COLORRED;\nSTICKLINE(VAR5 < REF(VAR5, 1), 0, VAR5, 20, 0), COLORYELLOW;"}},o.prototype.Zealink_Index2=function(){return{Name:"牛熊区间",Description:"牛熊区间",IsMainIndex:!1,YSpecificMaxMin:{Max:100,Min:1,Count:4},YSplitScale:[1,50,100],Args:[],Script:"短高H:=(20*H+19*REF(H,1)+18*REF(H,2)+17*REF(H,3)+16*REF(H,4)+15*REF(H,5)+14*REF(H,6)\n+ 13 * REF(H, 7) + 12 * REF(H, 8) + 11 * REF(H, 9) + 10 * REF(H, 10) + 9 * REF(H, 11) + 8 * REF(H, 12)\n+ 7 * REF(H, 13) + 6 * REF(H, 14) + 5 * REF(H, 15) + 4 * REF(H, 16) + 3 * REF(H, 17) + 2 * REF(H, 18) +\nREF(H, 20))/ 210, COLORBLUE, LINETHICK1;\n短低L:= (20 * L + 19 * REF(L, 1) + 18 * REF(L, 2) + 17 * REF(L, 3) + 16 * REF(L, 4) + 15 * REF(L, 5) + 14 * REF(L, 6)\n+ 13 * REF(L, 7) + 12 * REF(L, 8) + 11 * REF(L, 9) + 10 * REF(L, 10) + 9 * REF(L, 11) + 8 * REF(L, 12)\n+ 7 * REF(L, 13) + 6 * REF(L, 14) + 5 * REF(L, 15) + 4 * REF(L, 16) + 3 * REF(L, 17) + 2 * REF(L, 18) +\nREF(L, 20)) / 210, COLORBLUE, LINETHICK1;\nD90H:= EMA(短高H, 90), COLORRED, LINETHICK1;\nD90L:= EMA(短低L, 90), COLORRED, LINETHICK1;\nD90差:= D90H - D90L;\nD90顶:= D90H + D90差 * 2, COLORRED, LINETHICK1;\nD90底:= D90L - D90差 * 2, COLORRED, LINETHICK1;\n高0:= (EMA(EMA(H, 25), 25) - EMA(EMA(L, 25), 25)) * 1 + EMA(EMA(H, 25), 25), LINETHICK1, COLORWHITE;\n低0:= EMA(EMA(L, 25), 25) - (EMA(EMA(H, 25), 25) - EMA(EMA(L, 25), 25)) * 1, LINETHICK1, COLORWHITE;\n多头定位:= 低0 >= D90底 AND 高0 >= D90顶;\n空头定位:= 高0 <= D90顶 AND 低0 <= D90底;\n震荡定位:= 低0 >= D90底 AND 高0 <= D90顶;\n牛市: IF(多头定位 == 1, 100, 1), COLORRED, NODRAW;\n熊市: IF(空头定位 == 1, 100, 1), COLORGREEN, NODRAW;\n震荡: IF(震荡定位 == 1, 100, 1), COLORGRAY, NODRAW;\nSTICKLINE(多头定位 == 1, 100, 1, 100, 0), COLORRED;\nSTICKLINE(空头定位 == 1, 100, 1, 100, 0), COLORGREEN;\nSTICKLINE(震荡定位 == 1, 100, 1, 100, 0), COLORGRAY;"}},o.prototype.Zealink_Index3=function(){return{Name:"持仓信号",Description:"持仓信号",IsMainIndex:!0,Args:[],Script:'买线:=EMA(C,2);\n卖线:=EMA(SLOPE(C,30)*5+C,20); \nBU:=CROSS(买线,卖线);\nSEL:=CROSS(卖线,买线);\n\nSTICKLINE(买线>=卖线 AND CLOSE>OPEN,LOW,HIGH,0,1),COLORRED;\nSTICKLINE(买线>=卖线 AND CLOSE<OPEN,LOW,HIGH,0,1),COLORRED;\nSTICKLINE(买线>=卖线 AND CLOSE>OPEN,CLOSE,OPEN,50,1),COLORRED;\nSTICKLINE(买线>=卖线 AND CLOSE<OPEN,CLOSE,OPEN,50,0),COLORRED;\nSTICKLINE(买线<卖线 AND CLOSE<OPEN,LOW,HIGH,0,1),COLORGREEN;\nSTICKLINE(买线<卖线 AND CLOSE>OPEN,LOW,HIGH,0,1),COLORGREEN;\nSTICKLINE(买线<卖线 AND CLOSE<OPEN,CLOSE,OPEN,50,0),COLORGREEN;\nSTICKLINE(买线<卖线 AND CLOSE>OPEN,CLOSE,OPEN,50,1),COLORGREEN;\n\nHHJSJDA:=(3*CLOSE+OPEN+LOW+HIGH)/6;\nHHJSJDB:(19*HHJSJDA+19*REF(HHJSJDA,1)+18*REF(HHJSJDA,2)+17*REF(HHJSJDA,3)+16*REF(HHJSJDA,4)+15*REF(HHJSJDA,5)+14*REF(HHJSJDA,6)\n+13*REF(HHJSJDA,7)+12*REF(HHJSJDA,8)+11*REF(HHJSJDA,9)+10*REF(HHJSJDA,10)+9*REF(HHJSJDA,11)+8*REF(HHJSJDA,12)+7*REF(HHJSJDA,13)+6*REF(HHJSJDA,14)+5*REF(HHJSJDA,15)+4*REF(HHJSJDA,16)+3*REF(HHJSJDA,17)+2*REF\n(HHJSJDA,20)+REF(HHJSJDA,19))/210,COLORYELLOW;\nHHJSJDC:MA(HHJSJDB,5),COLORRED;\n\nSVAR11:=HHV(HIGH,34);\nSVAR14:=CLOSE-REF(CLOSE,1);\nSVAR15:=MAX(SVAR14,0);\nSVAR16:=ABS(SVAR14);\nSVAR17:=SMA(SVAR15,7,1)/SMA(SVAR16,7,1)*100;\nSVAR18:=SMA(SVAR15,13,1)/SMA(SVAR16,13,1)*100;\nSVAR19:=BARSCOUNT(CLOSE);\nSVAR20:=SMA(MAX(SVAR14,0),6,1)/SMA(ABS(SVAR14),6,1)*100;\nSVAR21:=(-200)*(HHV(HIGH,60)-CLOSE)/(HHV(HIGH,60)-LLV(LOW,60))+100;\nSVAR1A:=(CLOSE-LLV(LOW,15))/(HHV(HIGH,15)-LLV(LOW,15))*100;\nSVAR1B:=SMA((SMA(SVAR1A,4,1)-50)*2,3,1);\nSVAR1C:=(INDEXC-LLV(INDEXL,14))/(HHV(INDEXH,14)-LLV(INDEXL,14))*100;\nSVAR1D:=SMA(SVAR1C,4,1);\nSVAR1E:=SMA(SVAR1D,3,1);\nSVAR1F:=(HHV(HIGH,30)-CLOSE)/CLOSE*100;\nSVAR22:=SVAR20<=25 AND SVAR21<-95 AND SVAR1F>20 AND SVAR1B<-30 AND SVAR1E<30 AND SVAR11-CLOSE>=-0.25 AND SVAR17<22 AND SVAR18<28 AND SVAR19>50;\nBUY3:=CROSS(SVAR22,0.5) AND COUNT(SVAR22==1,10)==1;\n\nSVARF:=LOW*0.9;\nSVAR10X:=100-3*SMA((OPEN-LLV(LOW,75))/(HHV(HIGH,75)-LLV(LOW,75))*100,20,1)+2*SMA(SMA((OPEN-LLV(LOW,75))/(HHV(HIGH,75)-LLV(LOW,75))*100,20,1),15,1);\nSVAR11X:=SVARF<REF(SVAR10X,1) AND VOL>REF(VOL,1) AND CLOSE>REF(CLOSE,1);\nBUY2:=SVAR11X AND COUNT(SVAR11X,30)==1;\n\nVAR1:=(CLOSE+HIGH+LOW+OPEN)/4;\nVAR2:=SUMBARS(VOL,CAPITAL);\nVAR3:=HHV(VAR1,VAR2);\nVAR4:=LLV(VAR1,VAR2);\nVAR5:=(2*VAR1-VAR4-REF(VAR4,1))/(VAR3-VAR4);\nVAR6:=(VAR1-VAR4)/(VAR3-VAR4);\nVAR7:=IF(VAR1<=VAR4,VAR5*60,VAR6*60);\nVAR8:=600*(EMA(CLOSE,3)-EMA(LOW,30))/EMA(LOW,30);\nVAR9:=EMA(VAR8,7);\nVARC:=HHV(HIGH,9)-LLV(LOW,9);\nVARD:=HHV(HIGH,9)-CLOSE;\nVARE:=CLOSE-LLV(LOW,9);\nVARF:=VARD/VARC*100-70;\nVAR10:=(CLOSE-LLV(LOW,60))/(HHV(HIGH,60)-LLV(LOW,60))*100;\nVAR11:=(2*CLOSE+HIGH+LOW)/4;\nVAR12:=SMA(VARE/VARC*100,3,1);\nVAR13:=LLV(LOW,34);\nVAR14:=SMA(VAR12,3,1)-SMA(VARF,9,1);\nVAR15:=IF(VAR14>100,VAR14-100,0);\nVAR16:=HHV(HIGH,34);\nVAR17:=EMA((VAR11-VAR13)/(VAR16-VAR13)*100,8);\nVAR18:=EMA(VAR17,5);\nBUY:=STICKLINE(VAR17-VAR18>0,VAR17,VAR18,8,1),COLORRED;\nSELL:=STICKLINE(VAR17-VAR18<0,VAR17,VAR18,8,1),COLORGREEN;\nBUY1:=VAR17>VAR18 AND REF(VAR17,1)<REF(VAR18,1);\nSELL1:=VAR17<VAR18 AND REF(VAR17,1)>REF(VAR18,1);\n\n短高H:=(20*H+19*REF(H,1)+18*REF(H,2)+17*REF(H,3)+16*REF(H,4)+15*REF(H,5)+14*REF(H,6)\n+13*REF(H,7)+12*REF(H,8)+11*REF(H,9)+10*REF(H,10)+9*REF(H,11)+8*REF(H,12)\n+7*REF(H,13)+6*REF(H,14)+5*REF(H,15)+4*REF(H,16)+3*REF(H,17)+2*REF(H,18)+\nREF(H,20))/210,COLORBLUE,LINETHICK1;\n短低L:=(20*L+19*REF(L,1)+18*REF(L,2)+17*REF(L,3)+16*REF(L,4)+15*REF(L,5)+14*REF(L,6)\n+13*REF(L,7)+12*REF(L,8)+11*REF(L,9)+10*REF(L,10)+9*REF(L,11)+8*REF(L,12)\n+7*REF(L,13)+6*REF(L,14)+5*REF(L,15)+4*REF(L,16)+3*REF(L,17)+2*REF(L,18)+\nREF(L,20))/210,COLORBLUE,LINETHICK1;\nD90H:=EMA(短高H,90),COLORRED,LINETHICK1;\nD90L:=EMA(短低L,90),COLORRED,LINETHICK1;\nD90差:=D90H-D90L;\nD90顶:=D90H+D90差*2,COLORRED,LINETHICK1;\nD90底:=D90L-D90差*2,COLORRED,LINETHICK1;\n高0:=(EMA(EMA(H,25),25)-EMA(EMA(L,25),25))*1+EMA(EMA(H,25),25),LINETHICK1,COLORWHITE;\n低0:=EMA(EMA(L,25),25)-(EMA(EMA(H,25),25)-EMA(EMA(L,25),25))*1,LINETHICK1,COLORWHITE;\n多头定位:=低0>=D90底 AND 高0>=D90顶;\n空头定位:=高0<=D90顶 AND 低0<=D90底;\n震荡定位:=低0>=D90底 AND 高0<=D90顶;\n\n牛市:=多头定位==1;\n熊市:=空头定位==1;\n震荡:=震荡定位==1;\n\n非牛市:=熊市 OR 震荡;\n非熊市:=牛市 OR 震荡;\n\nBUY11:=BUY1 AND 非熊市;\nSELL11:=SELL1 AND 震荡定位==0;\n\nBUY111:=BUY11 AND COUNT(BUY11,10)<2;\nBUY0:=BUY111 AND COUNT(BUY111,21)==1;\nSELL111:=SELL11 AND COUNT(SELL11,10)<2;\nSELL0:=SELL111 AND COUNT(SELL111,10)==1;\n\nXK1:=EMA(100*(CLOSE-LLV(LOW,34))/(HHV(HIGH,34)-LLV(LOW,34)),3)/4;\n上穿:=REF(XK1,1)<5 AND XK1>=5;\nBUY4:=上穿 AND COUNT(XK1<2,12)<1;\n\nSELL2:=REF(XK1,1)<=22.5 AND XK1>22.5 AND COUNT(REF(XK1,1)>=22.5 AND XK1<22.5,5)>0;\nSELL3:=REF(XK1,1)>=21.5 AND XK1<21.5 AND COUNT(REF(XK1,1)>=22.5 AND XK1<22.5,12)>1;\nSELL4:=SELL2 OR SELL3 AND COUNT((SELL2 OR SELL3)==1,5)==1;\n\nSUPERDRAWTEXT(BUY0,L,"机会",2,10),COLORRED;\nSUPERDRAWTEXT(SELL0,H,"风险",1,10),COLORGREEN;\nSUPERDRAWTEXT(BUY2,L,"机会",2,10),COLORRED;\nSUPERDRAWTEXT(BUY4,L,"机会",2,10),COLORRED;\nSUPERDRAWTEXT(SELL4,H,"风险",1,10),COLORGREEN;'}},o.prototype.Zealink_Index4=function(){return{Name:"股东实际增减持",Description:"股东实际增减持",IsMainIndex:!1,FloatPrecision:0,Args:[],Script:"增持:NEWS(4),NODRAW,COLORRED;\n减持:NEWS(5),NODRAW,COLORGREEN;\nSTICKLINE(增持>0,0,增持,1,0),COLORRED;\nSTICKLINE(减持<0,0,减持,1,0),COLORGREEN;"}},o.prototype.Zealink_Index5=function(){return{Name:"大宗交易",Description:"大宗交易",IsMainIndex:!1,FloatPrecision:0,Args:[],Script:"交易次数:NEWS(7);"}},o.prototype.Zealink_Index6=function(){return{Name:"信托持股",Description:"信托持股",IsMainIndex:!1,FloatPrecision:0,Args:[],Script:"家数:NEWS(6);"}},o.prototype.Zealink_Index7=function(){return{Name:"官网新闻",Description:"官网新闻",IsMainIndex:!1,FloatPrecision:0,Args:[],Script:"个数:NEWS(8);"}},o.prototype.Zealink_Index8=function(){return{Name:"高管要闻",Description:"高管要闻",IsMainIndex:!1,FloatPrecision:0,Args:[],Script:"个数:NEWS(9);"}},o.prototype.Zealink_Index9=function(){return{Name:"股权质押",Description:"股权质押",IsMainIndex:!1,FloatPrecision:0,Args:[],Script:"次数:NEWS(10);"}},o.prototype.Zealink_Index10=function(){return{Name:"操盘BS点",Description:"操盘BS点",IsMainIndex:!0,FloatPrecision:0,Args:[],Script:"JJ:=(CLOSE+HIGH+LOW)/3; \nA:=EMA(JJ,10); \nB:=REF(A,1);\nM1:=EMA(CLOSE,3);\nM2:=EMA(CLOSE,8); \nM3:=EMA(M2,13); \nM4:=EMA(M2,55); \nB1:=A>B AND REF(A,1)<REF(B,1);\nS1:=A<B AND REF(A,1)>REF(B,1);\nINDEXCLOSE:INDEXC,EXDATA;\nINDEXOPEN:INDEXO,EXDATA;\nDRAWICON(REF(B1,1),L*0.97,13);\nDRAWICON(REF(S1,1),H*1.03,14);"}},o.prototype.Zealink_Index11=function(){return{Name:"操盘BS点",Description:"操盘BS点",IsMainIndex:!0,FloatPrecision:0,Args:[],Script:"JJ:=(CLOSE+HIGH+LOW)/3;\nA:=EMA(JJ,10);\nB:=REF(A,1);\nM1:=EMA(CLOSE,3);\nM2:=EMA(CLOSE,8); \nM3:=EMA(M2,13);\nM4:=EMA(M2,55);\n持股区域:=STICKLINE(A>B,A,B,2,0),COLORYELLOW; \n持币区域:=STICKLINE(A<B,A,B,2,0),COLORBLUE;\n\nVR1:=(C+O+REF(C,1))/3;\nVR3:=HHV(VR1,21);\nVR4:=LLV(VR1,21);\nVR5:=(2*VR1-VR4-REF(VR4,1))/(VR3-VR4);\nVR6:=(VR1-VR4)/(VR3-VR4);\nVR7:=IF(VR1<=VR4,VR5*60,VR6*60);\nVR8:=600*(EMA(C,3)-EMA(L,30))/EMA(L,30);\nVR9:=EMA(VR8,7);\nVRA:=(WINNER(120*C/100)-WINNER(100*C/100))*100;\nVRB:=(-100)*(WINNER(120*C/100)-WINNER(100*C/100))+5;\nVRC:=HHV(H,9)-LLV(L,9);\nVRD:=HHV(H,9)-C;\nVRE:=C-LLV(L,9);\nVRF:=VRD/VRC*100-70;\nVR10:=(C-LLV(L,60))/(HHV(H,60)-LLV(L,60))*100;\nVR11:=(2*C+H+L)/4;\nVR12:=SMA(VRE/VRC*100,3,1);\nVR13:=LLV(L,34);\nVR14:=SMA(VR12,3,1)-SMA(VRF,9,1);\nVR15:=IF(VR14>100,VR14-100,0);\nVR16:=HHV(H,34);\nVR17:=EMA((VR11-VR13)/(VR16-VR13)*100,8);\nVR18:=EMA(VR17,5);\n\nB1:=A>B AND REF(A,1)<REF(B,1);\nS1:=A<B AND REF(A,1)>REF(B,1);\n\nB9:=BARSLAST(REF(B1,1) AND (REF(VR17>VR18,1) OR MIN(VR17,VR18)>REF(MAX(VR17,VR18),1)));\nS9:=BARSLAST(REF(S1,1) AND (REF(VR17<VR18,1) OR MAX(VR17,VR18)<REF(MIN(VR17,VR18),1)));\n\nDRAWICON(REF(B1,1) AND (REF(VR17>VR18,1) OR MIN(VR17,VR18)>REF(MAX(VR17,VR18),1)) AND REF(B9,2)>=S9,L*0.97,13);\nDRAWICON(REF(S1,1) AND (REF(VR17<VR18,1) OR MAX(VR17,VR18)<REF(MIN(VR17,VR18),1)) AND REF(S9,1)>=B9,H*1.03,14);\n\nDRAWKLINE_IF(VR17>VR18,HIGH,CLOSE,LOW,OPEN),COLORRED;\nDRAWKLINE_IF(VR17<VR18,HIGH,CLOSE,LOW,OPEN),COLORBLUE;\n\nINDEXCLOSE:INDEXC,EXDATA;\t\t//取指数的收盘价 回测的时候计算BATE系数用 "}},o.prototype.HeikinAshi=function(){return{Name:"平均K线",Description:"Heikin-Ashi 平均K线",IsMainIndex:!0,KLineType:-1,Args:[],Script:"HCLOSE:(OPEN+HIGH+LOW+CLOSE)/4, NODRAW;\nHOPEN:(REF(OPEN,1)+REF(CLOSE,1))/2,NODRAW;\nHHIGH:MAX(HIGH,MAX(HOPEN,HCLOSE)),NODRAW;\nHLOW:MIN(LOW,MIN(HOPEN,HCLOSE)),NODRAW;\nDRAWKLINE(HHIGH,HOPEN,HLOW,HCLOSE);"}},o.prototype.ADL=function(){return{Name:"腾落指标",Description:"腾落指标",IsMainIndex:!1,StringFormat:2,Condition:{Period:[Er.KLINE_DAY_ID,Er.KLINE_WEEK_ID,Er.KLINE_TWOWEEK_ID,Er.KLINE_MONTH_ID,Er.KLINE_QUARTER_ID,Er.KLINE_YEAR_ID],Include:["000001.SH","000003.SH","000016.SH","000300.SH","000905.SH","399001.SZ"," 399005.SZ","399006.SZ"]},Args:[{Name:"M",Value:7}],Script:"ADL:SUM(ADVANCE-DECLINE,0);\nMAADL:MA(ADL,M);"}},o.prototype.EMPTY=function(){return{Name:"",Description:"空指标",IsMainIndex:!0,Args:[],Script:"VAR2:=C;"}},o.prototype.CJL=function(){return{Name:"CJL",Description:"期货持仓量",IsMainIndex:!1,Args:[],Script:"成交量:VOL,VOLSTICK;\n持仓量:VOLINSTK,LINEOVERLAY;"}},o.prototype.ASI=function(){return{Name:"ASI",Description:"振动升降指标",IsMainIndex:!1,Args:[{Name:"N1",Value:6}],Script:"X_1:=REF(CLOSE,1);\nX_2:=ABS(HIGH-X_1);\nX_3:=ABS(LOW-X_1);\nX_4:=ABS(HIGH-REF(LOW,1));\nX_5:=ABS(X_1-REF(OPEN,1));\nX_6:=IF(X_2>X_3 AND X_2>X_4,X_2+X_3/2+X_5/4,IF(X_3>X_4 AND X_3>X_2,X_3+X_2/2+X_5/4,X_4+X_5/4));\nX_7:=CLOSE-X_1+(CLOSE-OPEN)/2+X_1-REF(OPEN,1);\nX_8:=8*X_7/X_6*MAX(X_2,X_3);\nASI:SUM(X_8,0),LINETHICK2;\nMASI:MA(ASI,N1),LINETHICK2;"}},o.prototype.DC=function(){return{Name:"DC",Description:"唐奇安通道",IsMainIndex:!0,Args:[{Name:"N1",Value:20}],Script:"UPPER:HHV(H,N1),COLORBLUE,LINETHICK2;\nLOWER:LLV(L,N1),COLORBLUE,LINETHICK2;\nMIDDLE:(UPPER+LOWER)/2,COLORRED,LINETHICK3;"}},o.prototype.DEMA=function(){return{Name:"DEMA",Description:"双重指数移动均线",IsMainIndex:!0,Args:[{Name:"N1",Value:10}],Script:"ERR:=C-EMA(C,N1);\nDEMA:EMA(C,10)+EMA(ERR,N1);"}},o.prototype.VWAP=function(){return{Name:"VWAP",Description:"成交量加权平均价",IsMainIndex:!0,Args:[{Name:"N1",Value:10}],Script:"PRICE:=(H+L+C)/3;\nT2:=VOL*PRICE;\nVWAP:SUM(T2,0)/SUM(VOL,0);"}},o.prototype.SQJZ=function(){return{Name:"SQJZ",Description:"神奇九转",IsMainIndex:!0,Script:"B:=C<REF(C,4);\nN:=CURRBARSCOUNT;\nB1:=(N=6 AND REFXV(COUNT(B,6),5)=6) OR (N=7 AND REFXV(COUNT(B,7),6)=7) OR (N=8 AND REFXV(COUNT(B,8),7)=8) OR (N>=9 AND REFXV(COUNT(B,9),8)=9);\nDRAWNUMBER(B1 AND REF(B,1)=0,L,1),COLORMAGENTA;\nB2:=(N=5 AND REFXV(COUNT(B,6),4)=6) OR (N=6 AND REFXV(COUNT(B,7),5)=7) OR (N=7 AND REFXV(COUNT(B,8),6)=8) OR (N>=8 AND REFXV(COUNT(B,9),7)=9);\nDRAWNUMBER(B2 AND REF(B,2)=0,L,2),COLORMAGENTA;\nB8:=(N=1 AND COUNT(B,8)=8) OR (N>=2 AND REFXV(COUNT(B,9),1)=9);\nDRAWNUMBER(B8 AND REF(B,8)=0,L,8),COLORMAGENTA;\nB9:=(N>=1 AND COUNT(B,9)=9);\nDRAWNUMBER(B9 AND REF(B,9)=0,L,9),COLORBROWN;\nS:=C>REF(C,4);\nS1:=(N=6 AND REFXV(COUNT(S,6),5)=6) OR (N=7 AND REFXV(COUNT(S,7),6)=7) OR (N=8 AND REFXV(COUNT(S,8),7)=8) OR (N>=9 AND REFXV(COUNT(S,9),8)=9);\nDRAWNUMBER(S1 AND REF(S,1)=0,H,1),COLORMAGENTA,DRAWABOVE;\nS2:=(N=5 AND REFXV(COUNT(S,6),4)=6) OR (N=6 AND REFXV(COUNT(S,7),5)=7) OR (N=7 AND REFXV(COUNT(S,8),6)=8) OR (N>=8 AND REFXV(COUNT(S,9),7)=9);\nDRAWNUMBER(S2 AND REF(S,2)=0,H,2),COLORMAGENTA,DRAWABOVE;\nS8:=(N=1 AND COUNT(S,8)=8) OR (N>=2 AND REFXV(COUNT(S,9),1)=9);\nDRAWNUMBER(S8 AND REF(S,8)=0,H,8),COLORMAGENTA,DRAWABOVE;\nS9:=(N>=1 AND COUNT(S,9)=9);\nDRAWNUMBER(S9 AND REF(S,9)=0,H,9),COLORGREEN,DRAWABOVE;"}},o.prototype.XT=function(){return{Name:"XT",Description:"箱体",IsMainIndex:!0,Args:[{Name:"N",Value:10}],Script:"【箱顶】:PEAK(CLOSE,N,1)*0.98;\n【箱底】:TROUGH(CLOSE,N,1)*1.02;\n【箱高】:100*(【箱顶】-【箱底】)/【箱底】,NODRAW;"}},o.prototype.CFJT=function(){return{Name:"CFJT",Description:"财富阶梯",IsMainIndex:!0,Script:"突破:=REF(EMA(C,14),1);\nA1X:=(EMA(C,10)-突破)/突破*100;\n多方:=IF(A1X>=0,REF(EMA(C,10),BARSLAST(CROSS(A1X,0))+1),DRAWNULL);\n空方:=IF(A1X<0,REF(EMA(C,10),BARSLAST(CROSS(0,A1X))+1),DRAWNULL);\nSTICKLINE(A1X>=0,多方,突破,110,0),COLORRED;\nSTICKLINE(A1X<0,空方,突破,110,0),COLORGREEN;"}},o.prototype.CYX=function(){return{Name:"CYX",Description:"撑压线",IsMainIndex:!0,Args:[{Name:"N",Value:7}],Script:"Z1:=STRCAT(HYBLOCK,' ');\nZ2:=STRCAT(Z1,DYBLOCK);\nZ3:=STRCAT(Z2,' ');\nDRAWTEXT_FIX(ISLASTBAR,0,0,0,STRCAT(Z3,GNBLOCK)),COLOR00C0C0;\nA1:=REF(H,N)=HHV(H,2*N+1);\nB1:=FILTER(A1,N);\nC1:=BACKSET(B1,N+1);\nD1:=FILTER(C1,N);\nA2:=REF(L,N)=LLV(L,2*N+1);\nB2:=FILTER(A2,N);\nC2:=BACKSET(B2,N+1);\nD2:=FILTER(C2,N);\nE1:=(REF(LLV(L,2*N),1)+REF(HHV(H,2*N),1))/2;\nE2:=(H+L)/2;\nH1:=(D1 AND NOT(D2 AND E1>=E2)) OR ISLASTBAR OR BARSCOUNT(C)=1;\nL1:=(D2 AND NOT(D1 AND E1<E2));\nH2:=D1 AND NOT(D2 AND E1>=E2);\nX1:=REF(BARSLAST(H1),1)+1;\nF1:=BACKSET(H1 AND COUNT(L1,X1)>0,LLVBARS(IF(L1,L,10000),X1));\nG1:=F1>REF(F1,1);\nI1:=BACKSET(G1,2);\nLD:=I1>REF(I1,1);\nL2:=LD OR ISLASTBAR OR BARSCOUNT(C)=1;\nX2:=REF(BARSLAST(L2),1)+1;\nF2:=BACKSET(L2 AND COUNT(H2,X2)>0,HHVBARS(IF(H2,H,0),X2));\nG2:=F2>REF(F2,1);\nI2:=BACKSET(G2,2);\nHD:=I2>REF(I2,1);\nR1:=BACKSET(ISLASTBAR,BARSLAST(HD)+1);\nS1:=R1>REF(R1,1);\nT1:=BACKSET(ISLASTBAR,BARSLAST(LD)+1);\nU1:=T1>REF(T1,1);\nR2:=BACKSET(S1,REF(BARSLAST(HD),1)+2);\nS2:=R2>REF(R2,1);\nT2:=BACKSET(U1,REF(BARSLAST(LD),1)+2);\nU2:=T2>REF(T2,1);\nDRAWLINE(S2,H,S1,H,1),LINETHICK2,COLORRED;\nDRAWLINE(U2,L,U1,L,1),LINETHICK2,COLORGREEN;"}},o.prototype.WAVE=function(){return{Name:"WAVE",Description:"波浪分析",IsMainIndex:!0,Args:[{Name:"N",Value:5}],Script:"ZIG(3,N);"}},o.prototype.ShareholderCount=function(){return{Name:"散户线",Description:"散户线",IsMainIndex:!1,Script:"GPJYVALUE(1,1,1);"}},o.prototype.NXTS=function(){return{Name:"NXTS",Description:"牛熊天数",IsMainIndex:!1,Args:[{Name:"N",Value:20}],Script:"Z:=ZIG(C,N);\n高点:=Z>REF(Z,1) AND Z>REFX(Z,1);\n低点:=Z<REF(Z,1) AND Z<REFX(Z,1);\nNG:=BARSLAST(高点);\nND:=BARSLAST(低点);\nD0:=DATETODAY(DATE)-DATETODAY(REF(DATE,BARSSINCE(C)));\nDG:=DATETODAY(DATE)-DATETODAY(REF(DATE,NG));\nDD:=DATETODAY(DATE)-DATETODAY(REF(DATE,ND));\nN1:=(NG>ND OR COUNT(高点,0)=0) AND ND>0 AND (HHV(C,ND)-REF(C,ND))/REF(C,ND)>(N/100);\nN2:=NG<ND AND NG>0 AND (LLV(C,NG)-REF(C,NG))/REF(C,NG)>=-(N/100);\nN3:=NG<ND AND NG=0;\nN4:=COUNT(低点 OR 高点,0)=0 AND (HHV(C,0)-REF(C,BARSSINCE(C)))/REF(C,BARSSINCE(C))>(N/100);\nN5:=COUNT(低点,0)=0 AND NG>0 AND (LLV(C,NG)-REF(C,NG))/REF(C,NG)>=-(N/100);\nN6:=COUNT(低点,0)=0 AND NG=0;\nX1:=(NG<ND OR COUNT(低点,0)=0) AND NG>0 AND (LLV(C,NG)-REF(C,NG))/REF(C,NG)<-(N/100);\nX2:=NG>ND AND ND>0 AND (HHV(C,ND)-REF(C,ND))/REF(C,ND)<=(N/100);\nX3:=NG>ND AND ND=0;\nX4:=COUNT(高点 OR 低点,0)=0 AND (LLV(C,0)-REF(C,BARSSINCE(C)))/REF(C,BARSSINCE(C))<-(N/100);\nX5:=COUNT(高点,0)=0 AND ND>0 AND (HHV(C,ND)-REF(C,ND))/REF(C,ND)<=(N/100);\nX6:=COUNT(高点,0)=0 AND ND=0;\n牛市天数:IF(N4 OR N5 OR N6,D0,IF(N1 OR N2 OR N3,DD,0)),COLORRED;\n熊市天数:IF(X4 OR X5 OR X6,D0,IF(X1 OR X2 OR X3,DG,0)),COLORGREEN;"}},o.prototype.FKX=function(){return{Name:"FKX",Description:"反K线",IsMainIndex:!1,Script:"DRAWKLINE(-LOW, -OPEN, -HIGH, -CLOSE);"}},o.prototype.Margin4=function(){return{Name:"两融资金",Description:"两融资金",IsMainIndex:!1,Script:"TMPV:=IF(FINANCE(3)==0,REF(SCJYVALUE(1,1,1),1),REF(GPJYVALUE(3,1,1),1));\nTMPV1:=IF(FINANCE(3)==0,SCJYVALUE(1,1,0),GPJYVALUE(3,1,0));\n两融:IF(TMPV==0 OR TMPV1==0,DRAWNULL,IF(FINANCE(3)==0,(SCJYVALUE(1,1,1)-REF(SCJYVALUE(1,1,1),1))/10000-(SCJYVALUE(1,2,1)-REF(SCJYVALUE(1,2,1),1))/10000,((GPJYVALUE(3,1,1)-REF(GPJYVALUE(3,1,1),1))-((GPJYVALUE(3,2,1)*C/10000-(REF(GPJYVALUE(3,2,1),1)*REF(C,1)/10000)))))),NODRAW;\nSTICKLINE(两融>0,0,两融,2,0),COLORRED;\nSTICKLINE(两融<0,0,两融,2,0),COLORCYAN;"}},o.prototype.ZSDB=function(){return{Name:"ZSDB",Description:"指数对比(副图,需下载日线)",IsMainIndex:!1,Script:"A:=REF(INDEXC,1);\n指数涨幅:IF(A>0,(INDEXC-A)*100/A,0),NODRAW;\nDRAWKLINE(INDEXH,INDEXO,INDEXL,INDEXC);"}},o.prototype.NineTurns=function(){return{Name:"神奇九转",Description:"九转指标",IsMainIndex:!0,Script:"A1:=C>REF(C,4);\nA2:=C<REF(C,4);\nT1:=A2 AND REF(A1,1);\nT2:=A2 AND REF(T1,1);\nT3:=A2 AND REF(T2,1);\nT4:=A2 AND REF(T3,1);\nT5:=A2 AND REF(T4,1);\nT6:=A2 AND REF(T5,1);\nT7:=A2 AND REF(T6,1);\nT8:=A2 AND REF(T7,1);\nT9:=A2 AND REF(T8,1);\nT10:=A2 AND REF(T9,1);\nT11:=A2 AND REF(T10,1);\nT12:=A2 AND REF(T11,1);\nT13:=A2 AND REF(T12,1);\nT14:=A2 AND REF(T13,1);\nDRAWTEXT(T1,L*0.98,'1'),COLORGREEN;\nDRAWTEXT(T2,L*0.98,'2'),COLORGREEN;\nDRAWTEXT(T3,L*0.98,'3'),COLORGREEN;\nDRAWTEXT(T4,L*0.98,'4'),COLORGREEN;\nDRAWTEXT(T5,L*0.98,'5'),COLORGREEN;\nDRAWTEXT(T6,L*0.98,'6'),COLORGREEN;\nDRAWTEXT(T7,L*0.98,'7'),COLORGREEN;\nDRAWTEXT(T8,L*0.98,'8'),COLORGREEN;\nDRAWTEXT(T9,L*0.98,'9'),COLORBLUE;\nB1:=C<REF(C,4);\nB2:=C>REF(C,4);\nD1:=B2 AND REF(B1,1);\nD2:=B2 AND REF(D1,1);\nD3:=B2 AND REF(D2,1);\nD4:=B2 AND REF(D3,1);\nD5:=B2 AND REF(D4,1);\nD6:=B2 AND REF(D5,1);\nD7:=B2 AND REF(D6,1);\nD8:=B2 AND REF(D7,1);\nD9:=B2 AND REF(D8,1);\nD10:=B2 AND REF(D9,1);\nD11:=B2 AND REF(D10,1);\nD12:=B2 AND REF(D11,1);\nD13:=B2 AND REF(D12,1);\nD14:=B2 AND REF(D13,1);\nDRAWTEXT(D1,H*1.010,'1'),COLORBLUE;\nDRAWTEXT(D2,H*1.010,'2'),COLORBLUE;\nDRAWTEXT(D3,H*1.010,'3'),COLORBLUE;\nDRAWTEXT(D4,H*1.010,'4'),COLORBLUE;\nDRAWTEXT(D5,H*1.010,'5'),COLORBLUE;\nDRAWTEXT(D6,H*1.010,'6'),COLORBLUE;\nDRAWTEXT(D7,H*1.010,'7'),COLORBLUE;\nDRAWTEXT(D8,H*1.010,'8'),COLORBLUE;\nDRAWTEXT(D9,H*1.010,'9'),COLORGREEN;"}},o.prototype.TEST=function(){return{Name:"TEST",Description:"测试脚本",IsMainIndex:!1,Args:[{Name:"N",Value:10}],Script:"DRAWCHANNEL(OPEN>C,H,L, 'RGB(255,94,102)', 2 ,'5,5','RGBA(58,20,62,0.3)' );"}},!Fr)var Fr={Chart:{Log:console.log,Warn:console.warn},Complier:{Log:console.log,Warn:console.warn}};h.LastVersion=null,h.Init=function(t){var e=new h(t);return e.OnSize(),e},h.SetDomain=function(t,e){t&&($r.Domain=t),e&&($r.CacheDomain=e)},h.SetPyIndexDomain=function(t){t&&($r.PyIndexDomain=t)},h.SetStyle=function(t){t&&$r.SetStyle(t)},h.SetTextResource=function(t,e){en.SetTextResource(t,e)},h.GetLocalization=function(){return en},h.GetDevicePixelRatio=function(){return c()},h.CreateGuid=function(){return C()},h.GetResource=function(){return $r},h.GetMinuteTimeStringData=function(){return rn},h.GetMinuteCoordinateData=function(){return nn},h.GetKLineZoom=function(){return Ur},h.GetDivTooltipDataFormat=function(){return qr},h.SetUSATimeType=function(t){on.TimeType=t,hn.TimeType=t,ln.TimeType=t,un.TimeType=t},h.GetChinaFuturesTimeData=function(){return sn},h.AddPeriodCallback=function(t){Br.AddPeriodCallback(t)},h.RemovePeriodCallback=function(t){Br.RemovePeriodCallback(t)},h.RegisterDrawPicture=function(t){return Re.RegisterDrawPicture(t)},h.RegisterDrawPictureIonFont=function(t){return Re.RegisterIonFont(t)},h.GetInternalTimeData=function(t){switch(t){case"NYMEXTimeData":return on;case"COMEXTimeData":return hn;case"NYBOTTimeData":return ln;case"CBOTTimeData":return un;case"LMETimeData":return cn;case"FuturesTimeData":return sn;case"TOCOMTimeData":return dn;case"IPETimeData":return fn;default:return null}},h.RegisterExtendChartClass=function(t,e){jr.Add(t,e)};var Nr={RECV_KLINE_MATCH:1,RECV_INDEX_DATA:2,RECV_HISTROY_DATA:3,RECV_TRAIN_MOVE_STEP:4,CHART_STATUS:5,BARRAGE_PLAY_END:6,RECV_OVERLAY_INDEX_DATA:7,DBCLICK_KLINE:8,RECV_START_AUTOUPDATE:9,RECV_STOP_AUTOUPDATE:10,ON_CONTEXT_MENU:11,ON_TITLE_DRAW:12,ON_SELECT_RECT:13,RECV_MINUTE_DATA:14,ON_CLICK_INDEXTITLE:15,RECV_KLINE_UPDATE_DATA:16,ON_CLICK_DRAWPICTURE:17,ON_FINISH_DRAWPICTURE:18,ON_INDEXTITLE_DRAW:19,ON_CUSTOM_VERTICAL_DRAW:20,RECV_KLINE_MANUAL_UPDATE_DATA:21,ON_ENABLE_SPLASH_DRAW:22,ON_CLICK_CHART_PAINT:23,ON_DRAW_MINUTE_LAST_POINT:24,ON_DRAW_DEPTH_TOOLTIP:25,ON_CLICK:26,ON_PHONE_TOUCH:27,ON_CLICKUP_CHART_PAINT:28,ON_SPLIT_YCOORDINATE:29,ON_DBCLICK:30,ON_SPLIT_XCOORDINATE:31,ON_KEYDOWN_SELECT_RECT:32,ON_DRAG_SELECT_RECT:33,ON_DRAG_SELECT_RECT_MOUSEUP:34,ON_DRAW_KLINE_LAST_POINT:35,ON_CLICK_CROSSCURSOR_RIGHT:36,ON_PLAY_SOUND:37,ON_CALCULATE_INDEX_OX:38},Or={OP_SCROLL_LEFT:1,OP_SCROLL_RIGHT:2,OP_ZOOM_OUT:3,OP_ZOOM_IN:4,OP_GOTO_HOME:5,OP_GOTO_END:6,OP_LEFT_ZOOM_OUT:7,OP_LEFT_ZOOM_IN:8,OP_RIGHT_ZOOM_OUT:9,OP_RIGHT_ZOOM_IN:10},Pr={DISABLE_DRAG_ID:0,CLICK_TOUCH_MODE_ID:3},Rr={CLOSE_BEFOREOPEN_ID:1};Number.prototype.toFixed2=Number.prototype.toFixed,Number.prototype.toFixed=function(t){return m(this,t)},W.Copy=function(t){var e=new W;return e.Date=t.Date,he.IsNumber(t.Time)&&(e.Time=t.Time),e.YClose=t.YClose,e.Open=t.Open,e.Close=t.Close,e.High=t.High,e.Low=t.Low,e.Vol=t.Vol,e.Amount=t.Amount,he.IsNumber(t.FlowCapital)&&(e.FlowCapital=t.FlowCapital),he.IsNumber(t.Position)&&(e.Position=t.Position),he.IsNumber(t.YFClose)&&(e.YFClose=t.YFClose),he.IsNumber(t.FClose)&&(e.FClose=t.FClose),he.IsNumber(t.Stop)&&(e.Stop=t.Stop),he.IsNumber(t.Up)&&(e.Up=t.Up),he.IsNumber(t.Down)&&(e.Down=t.Down),he.IsNumber(t.Unchanged)&&(e.Unchanged=t.Unchanged),he.IsNumber(t.BFactor)&&(e.BFactor=t.BFactor),he.IsNumber(t.AFactor)&&(e.AFactor=t.AFactor),t.OrderFlow&&(e.OrderFlow=t.OrderFlow),e},W.CopyTo=function(t,e){t.Date=e.Date,he.IsNumber(e.Time)&&(t.Time=e.Time),t.YClose=e.YClose,t.Open=e.Open,t.Close=e.Close,t.High=e.High,t.Low=e.Low,t.Vol=e.Vol,t.Amount=e.Amount,he.IsNumber(e.FlowCapital)&&(t.FlowCapital=e.FlowCapital),he.IsNumber(e.Position)&&(t.Position=e.Position),he.IsNumber(e.YFClose)&&(t.YFClose=e.YFClose),he.IsNumber(e.FClose)&&(t.FClose=e.FClose),he.IsNumber(e.Stop)&&(t.Stop=e.Stop),he.IsNumber(e.Up)&&(t.Up=e.Up),he.IsNumber(e.Down)&&(t.Down=e.Down),he.IsNumber(e.Unchanged)&&(t.Unchanged=e.Unchanged),he.IsNumber(e.BFactor)&&(t.BFactor=e.BFactor),he.IsNumber(e.AFactor)&&(t.AFactor=e.AFactor)},W.CopyRight=function(t,e){var a=new W;return a.Date=t.Date,a.YClose=t.YClose*e,a.Open=t.Open*e,a.Close=t.Close*e,a.High=t.High*e,a.Low=t.Low*e,a.Vol=t.Vol,a.Amount=t.Amount,a.FlowCapital=t.FlowCapital,a.Position=t.Position,a.YFClose=t.YFClose,a.FClose=t.FClose,a};var kr={INVESTOR:1,ANNOUNCEMENT:2,PFORECAST:3,ANNOUNCEMENT_QUARTER_1:4,ANNOUNCEMENT_QUARTER_2:5,ANNOUNCEMENT_QUARTER_3:6,ANNOUNCEMENT_QUARTER_4:7,RESEARCH:8,BLOCKTRADING:9,TRADEDETAIL:10,ANNOUNCEMENT_EX_START:100,ANNOUNCEMENT_EX_END:200};q.GetMinutePeriodData=null;var Br=new q;Z.DateTimeToNumber=function(t){return 1e4*t.Date+t.Time},Z.GetKLineDataTime=function(t){var e={Date:t.Date,Time:0};return he.IsNumber(t.Time)&&(e.Time=t.Time),e},Z.GetFirday=function(t){var e=new Date(parseInt(t/1e4),t/100%100-1,t%100),a=e.getDay();if(5==a)return t;var i=e.getTime();if(a<5){var r=864e5*(5-a);i+=r}else{var r=864e5*(a-5);i-=r}e.setTime(i);var n=1e4*e.getFullYear()+100*(e.getMonth()+1)+e.getDate();e.getDay();return n},Z.GetSunday=function(t){var e=new Date(parseInt(t/1e4),t/100%100-1,t%100),a=e.getDay();if(0==a)return t;var i=e.getTime();if(a>0){i+=864e5*(7-a)}e.setTime(i);var r=1e4*e.getFullYear()+100*(e.getMonth()+1)+e.getDate();e.getDay();return r},Z.GetQuarter=function(t){var e=parseInt(t%1e4/100);return 1==e||2==e||3==e?1:4==e||5==e||6==e?2:7==e||8==e||9==e?3:10==e||11==e||12==e?4:0},Z.GetHalfYear=function(t){var e=parseInt(t/1e4);return t%1e4<=630?1e4*e+630:1e4*e+1231};var Yr=4e4,Hr=49999;Z.IsDayPeriod=function(t,e){return 1==t||2==t||3==t||9==t||21==t||22==t||(t>Yr&&t<=Hr||0==t&&1==e)};var Vr=2e4,Gr=29999;Z.IsMinutePeriod=function(t,e){return 5==t||6==t||7==t||8==t||11==t||12==t||(t>Vr&&t<=Gr||4==t&&1==e)};var Wr=3e4,Xr=32e3;Z.IsSecondPeriod=function(t){return t>Wr&&t<=Xr},Z.IsTickPeriod=function(t){return 10==t},Z.GetPeriodName=function(t){var e=new _r.default([[0,"日线"],[1,"周线"],[2,"月线"],[3,"年线"],[9,"季线"],[21,"双周"],[22,"半年"],[4,"1分"],[5,"5分"],[6,"15分"],[7,"30分"],[8,"60分"],[11,"2小时"],[12,"4小时"],[10,"分笔"]]);return e.has(t)?e.get(t):""};var Ur=[[48,10],[44,10],[40,9],[36,9],[32,8],[28,8],[24,7],[20,7],[18,6],[16,6],[15,5],[13,5],[9,4],[7,4],[5,4],[3,3],[3,1],[2,1],[1,1],[1,0]],Kr={STATUS_NONE_ID:0,STATUS_REQUESTDATA_ID:1,STATUS_RECVDATA_ID:2,STATUS_FINISHED_ID:3},jr=new Jt;he.FormatValueThousandsString=function(t,e){if(null==t||isNaN(t)){if(e>0){for(var a="-.",i=0;i<e;++i)a+="-";return a}return"--"}var r="",n=t.toFixed(e);if(e>0){for(var s=n.split(".")[1],o=n.split(".")[0];o.length>3;)r=","+o.slice(-3)+r,o=o.slice(0,o.length-3);o&&(r=o+r+"."+s)}else{for(;n.length>3;)r=","+n.slice(-3)+r,n=n.slice(0,n.length-3);n&&(r=n+r)}return r},he.FormatValueString=function(t,e,a){if(null==t||isNaN(t)){if(e>0){for(var i="-.",r=0;r<e;++r)i+="-";return i}return"--"}if(t<1e-11&&t>-1e-11)return"0";var n=Math.abs(t);return a===tn.LANGUAGE_ENGLISH_ID?n<1e4?t.toFixed(e):n<1e6?(t/1e3).toFixed(e)+"K":n<1e9?(t/1e6).toFixed(e)+"M":n<1e12?(t/1e9).toFixed(e)+"B":(t/1e12).toFixed(e)+"T":a===tn.LANGUAGE_TRADITIONAL_CHINESE_ID?n<1e4?t.toFixed(e):n<1e8?(t/1e4).toFixed(e)+"萬":n<1e12?(t/1e8).toFixed(e)+"億":(t/1e12).toFixed(e)+"萬億":n<1e4?t.toFixed(e):n<1e8?(t/1e4).toFixed(e)+"万":n<1e12?(t/1e8).toFixed(e)+"亿":(t/1e12).toFixed(e)+"万亿"},he.FromatIntegerString=function(t,e,a){return t<1e4&&he.IsInteger(t)&&(e=0),he.FormatValueString(t,e,a)},he.NumberToString=function(t){return t<10?"0"+t.toString():t.toString()},he.FormatDateString=function(t,e,a){var i=parseInt(t/1e4),r=parseInt(t/100)%100,n=t%100;switch(e){case"MM-DD":return he.NumberToString(r)+"-"+he.NumberToString(n);case"YYYY/MM/DD":return i.toString()+"/"+he.NumberToString(r)+"/"+he.NumberToString(n);case"YYYY/MM/DD/W":var s=new Date(i,r-1,n),o=en.GetText(Jr[s.getDay()],a);return i.toString()+"/"+he.NumberToString(r)+"/"+he.NumberToString(n)+"/"+o.toString();case"DD/MM/YYYY":return he.NumberToString(n)+"/"+he.NumberToString(r)+"/"+i.toString();default:return i.toString()+"-"+he.NumberToString(r)+"-"+he.NumberToString(n)}},he.FormatTimeString=function(t,e){if("HH:MM:SS"==e){var a=parseInt(t/1e4),i=parseInt(t%1e4/100),r=t%100;return he.NumberToString(a)+":"+he.NumberToString(i)+":"+he.NumberToString(r)}if("HH:MM"==e){var a=parseInt(t/100),i=t%100;return he.NumberToString(a)+":"+he.NumberToString(i)}if(t<1e4){var a=parseInt(t/100),i=t%100;return he.NumberToString(a)+":"+he.NumberToString(i)}var a=parseInt(t/1e4),i=parseInt(t%1e4/100),r=t%100;return he.NumberToString(a)+":"+he.NumberToString(i)+":"+he.NumberToString(r)},he.FormatReportDateString=function(t){var e,a=parseInt(t/1e4),i=parseInt(t/100)%100;switch(i){case 3:e="一季度报";break;case 6:e="半年报";break;case 9:e="三季度报";break;case 12:e="年报"}return a.toString()+e},he.FormatDateTimeString=function(t,e,a){var i=t.split(" ");if(i.length<2)return"";var r="";if(e){var n=parseInt(i[0]),s=parseInt(n/1e4),o=parseInt(n%1e4/100),h=n%100,l=s.toString()+"-"+(o<10?"0"+o.toString():o.toString())+"-"+(h<10?"0"+h.toString():h.toString());r+=l}if(a){var u=parseInt(i[1]),c=u%100,d=parseInt(u/100),l=(d<10?"0"+d.toString():d.toString())+":"+(c<10?"0"+c.toString():c.toString());r.length>0&&(r+=" "),r+=l}return r},he.FormatValueColor=function(t,e){return null!=t&&null==e?0==t?"PriceNull":t>0?"PriceUp":"PriceDown":null==t||null==e?"PriceNull":t==e?"PriceNull":t>e?"PriceUp":"PriceDown"},he.IsNumber=function(t){return null!=t&&!isNaN(t)},he.IsPlusNumber=function(t){return null!=t&&(!isNaN(t)&&t>0)},he.IsInteger=function(t){return"number"==typeof t&&t%1==0},he.IsObjectExist=function(t){return void 0!==t&&null!=t},he.IsBool=function(t){return!0===t||!1===t},he.IsString=function(t){return"string"==(void 0===t?"undefined":(0,gr.default)(t))},he.IsNonEmptyArray=function(t){if(t&&Array.isArray(t))return t.length>0},he.IsFloat=function(t){return void 0!==t&&(null!=t&&(!isNaN(t)&&t!=parseInt(t)))},he.RemoveZero=function(t){for(;t.length>0;){var e=t.length-1,a=t[e];if("0"!=a){if("."==a){t=t.substr(0,e);break}break}t=t.substr(0,e)}return t};var zr=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10],Jr=["日","一","二","三","四","五","六"],qr=new Fe,Zr=["不复权","前复权","后复权"],Qr={DEFAULT:1,ORIGINAL:2,INTEGER:3,THOUSANDS:21};Re.ColorToRGBA=function(t,e){if(/^(rgb|RGB)/.test(t)){for(var a="#",i=t.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),r=0;r<i.length;r++){var n=Number(i[r]).toString(16);"0"===n&&(n+=n),a+=n}t=a}return"rgba("+parseInt("0x"+t.slice(1,3))+","+parseInt("0x"+t.slice(3,5))+","+parseInt("0x"+t.slice(5,7))+","+e+")"},Re.RGBToHex=function(t){var e=t.indexOf(",")>-1?",":" ";t=t.substr(4).split(")")[0].split(e);var a=(+t[0]).toString(16),i=(+t[1]).toString(16),r=(+t[2]).toString(16);return 1==a.length&&(a="0"+a),1==i.length&&(i="0"+i),1==r.length&&(r="0"+r),"#"+a+i+r},Re.ArrayDrawPricture=[{Name:"线段",ClassName:"ChartDrawPictureLine",Create:function(){return new ke}},{Name:"射线",ClassName:"ChartDrawPictureHaflLine",Create:function(){return new He}},{Name:"箭头",ClassName:"ChartDrawArrowLine",Create:function(){return new Ye}},{Name:"水平线",ClassName:"ChartDrawPictureHorizontalLine",Create:function(){return new Ve}},{Name:"趋势线",ClassName:"ChartDrawPictureTrendLine",Create:function(){return new Ge}},{Name:"矩形",ClassName:"ChartDrawPictureRect",Create:function(){return new We}},{Name:"圆弧线",ClassName:"ChartDrawPictureArc",Create:function(){return new Xe}},{Name:"M头W底",ClassName:"ChartDrawPictureWaveMW",Create:function(){return new Ue}},{Name:"头肩型",ClassName:"ChartDrawHeadShouldersBT",Create:function(){return new Ke}},{Name:"平行线",ClassName:"ChartDrawPictureParallelLines",Create:function(){return new je}},{Name:"平行通道",ClassName:"ChartDrawPictureParallelChannel",Create:function(){return new qe}},{Name:"价格通道线",ClassName:"ChartDrawPicturePriceChannel",Create:function(){return new Je}},{Name:"文本",ClassName:"ChartDrawPictureText",Create:function(){return new Ze}},{Name:"江恩角度线",ClassName:"ChartDrawPictureGannFan",Create:function(){return new $e}},{Name:"阻速线",ClassName:"ChartDrawPictureResistanceLine",Create:function(){return new ta}},{Name:"黄金分割",ClassName:"ChartDrawPictureGoldenSection",Create:function(){return new ea}},{Name:"百分比线",ClassName:"ChartDrawPicturePercentage",Create:function(){return new aa}},{Name:"波段线",ClassName:"ChartDrawPictureWaveBand",Create:function(){return new ia}},{Name:"三角形",ClassName:"ChartDrawPictureTriangle",Create:function(){return new ra}},{Name:"对称角度",ClassName:"ChartDrawPictureSymmetryAngle",Create:function(){return new na}},{Name:"圆",ClassName:"ChartDrawPictureCircle",Create:function(){return new sa}},{Name:"平行四边形",ClassName:"ChartDrawPictureQuadrangle",Create:function(){return new oa}},{Name:"斐波那契周期线",ClassName:"ChartDrawPictureFibonacci",Create:function(){return new ha}},{Name:"线形回归线",ClassName:"ChartDrawLinearRegression",Create:function(){return new la}},{Name:"线形回归带",ClassName:"ChartDrawLinearRegression",Create:function(){return new la({IsShowMaxMinLine:!0})}},{Name:"延长线形回归带",ClassName:"ChartDrawLinearRegression",Create:function(){return new la({IsShowMaxMinLine:!0,IsShowExtendLine:!0})}},{Name:"尺子",ClassName:"ChartDrawRuler",Create:function(){return new ua}},{Name:"标价线",ClassName:"ChartDrawPriceLine",Create:function(){return new ca}},{Name:"标价线2",ClassName:"ChartDrawPriceLineV2",Create:function(){return new da}},{Name:"垂直线",ClassName:"ChartDrawVerticalLine",Create:function(){return new fa}},{Name:"波浪尺",ClassName:"ChartDrawWaveRuler",Create:function(){return new ma}},{Name:"AB波浪尺",ClassName:"ChartDrawWaveRuler2Point",Create:function(){return new Ca}},{Name:"箱型线",ClassName:"ChartDrawBox",Create:function(){return new pa}},{Name:"2点画图例子",ClassName:"ChartDrawTwoPointDemo",Create:function(){return new Da}},{Name:"3点画图例子",ClassName:"ChartDrawThreePointDemo",Create:function(){return new va}},{Name:"水平线段",ClassName:"ChartDrawHLineSegment",Create:function(){return new ga}},{Name:"平行射线",ClassName:"ChartDrawParallelRaysLines",Create:function(){return new ze}},{ClassName:"ChartDrawPictureIconFont",Create:function(){return new Qe}},{Name:"涂鸦线段",ClassName:"ChartDrawGraffitiLine",Create:function(){return new Be}}],Re.MapIonFont=new _r.default([["icon-arrow_up",{Text:"",Color:"#318757",Family:"iconfont"}],["icon-arrow_down",{Text:"",Color:"#db563e",Family:"iconfont"}],["icon-arrow_right",{Text:"",Color:"#318757",Family:"iconfont"}],["icon-arrow_left",{Text:"",Color:"#318757",Family:"iconfont"}]]),Re.GetDrawPictureByName=function(t){for(var e in Re.ArrayDrawPricture){var a=Re.ArrayDrawPricture[e];if(a.Name==t)return a}return null},Re.GetDrawPictureByClassName=function(t){for(var e in Re.ArrayDrawPricture){var a=Re.ArrayDrawPricture[e];if(a.ClassName==t)return a}return null},Re.RegisterDrawPicture=function(t){if(!t.Name||!t.ClassName||!t.Create)return!1;var e={Name:t.Name,ClassName:t.ClassName,Create:t.Create};return Re.ArrayDrawPricture.push(e),Fr.Chart.Log("[IChartDrawPicture.RegisterDrawPicture] registered new draw picture class. item=",e),!0},Re.RegisterIonFont=function(t){if(!t.Name||!t.Text||!t.Family)return!1;var e=Re.MapIonFont.has(t.Name);return Re.MapIonFont.set(t.Name,t),Fr.Chart.Log("[IChartDrawPicture.RegisterIonFont] registered new icon font, obj=, isOverwirte=",t,e),!0},Re.CreateChartDrawPicture=function(t){var e=Re.GetDrawPictureByClassName(t.ClassName);if(!e)return null;var a=e.Create();return t.Period>=0&&(a.Period=t.Period),t.Right>=0&&(a.Right=t.Right),t.Guid&&(a.Guid=t.Guid),t.Symbol&&(a.Symbol=t.Symbol),t.Value&&(a.Value=t.Value),t.Text&&(a.Text=t.Text),t.LineColor&&(a.LineColor=t.LineColor),t.AreaColor&&(a.AreaColor=t.AreaColor),t.FontOption&&(a.FontOption=t.FontOption),t.Label&&(a.Label=t.Label),t.LineWidth>0&&(a.LineWidth=t.LineWidth),!1===t.EnableMove&&(a.EnableMove=t.EnableMove),a};var $r=new Ia,tn={LANGUAGE_CHINESE_ID:0,LANGUAGE_ENGLISH_ID:1,LANGUAGE_TRADITIONAL_CHINESE_ID:2},en=new xa;La.Get=function(t){return new _r.default([["市场多空",{IsMainIndex:!1,Create:function(){return new Wa}}],["市场择时",{IsMainIndex:!1,Create:function(){return new Xa}}],["市场关注度",{IsMainIndex:!1,Create:function(){return new Ua}}],["指数热度",{IsMainIndex:!1,Create:function(){return new Ka}}],["财务粉饰",{IsMainIndex:!1,Create:function(){return new za}}],["自定义指数热度",{IsMainIndex:!1,Create:function(){return new ja},Name:"自定义指数热度"}],["能图-趋势",{IsMainIndex:!1,Create:function(){return new Ja},Name:"大盘/个股趋势"}],["能图-位置研判",{IsMainIndex:!1,Create:function(){return new qa},Name:"位置研判"}],["能图-点位研判",{IsMainIndex:!1,Create:function(){return new $a},Name:"点位研判"}],["CJL",{IsMainIndex:!1,Create:function(){return new Ga}}],["OX",{IsMainIndex:!1,Create:function(){return new Va}}]]).get(t)},Ma.EMA=function(t,e){var a=[],i=0;if(i>=t.length)return a;for(;i<t.length&&(null==t[i]||isNaN(t[i]));++i);var r=i,n=i+1;a[r]=t[r];for(var s=i+1;s<t.length;++s,++r,++n)a[n]=(2*t[n]+(e-1)*a[r])/(e+1);return a},Ma.SMA=function(t,e,a){for(var i=[],r=0,n=null;r<t.length;++r)if(null!=t[r]&&!isNaN(t[r])){n=t[r],i[r]=n;break}for(++r;r<t.length;++r)i[r]=(a*t[r]+(e-a)*n)/e,n=i[r];return i},Ma.DMA=function(t,e){var a=[];if(t.length<0||t.length!=e.length)return a;for(var i=0;i<t.length;++i)if(null!=t[i]&&!isNaN(t[i])&&null!=e[i]&&!isNaN(e[i])){a[i]=t[i];break}for(i+=1;i<t.length;++i)null==t[i]||null==e[i]?a[i]=null:t[i]<1?a[i]=e[i]*t[i]+(1-e[i])*a[i-1]:a[i]=t[i];return a},Ma.HHV=function(t,e){var a=[];if(e>t.length)return a;for(var i=-1e4,r=e,n=0;r<t.length;++r,++n){if(r<e+i)i=t[r]<t[i]?i:r;else for(n=1+(i=r-e+1);n<=r;++n)t[n]>t[i]&&(i=n);a[r]=t[i]}return a},Ma.LLV=function(t,e){var a=[];if(e>t.length)return a;for(var i=-1e4,r=e;r<t.length;++r,++n){if(r<e+i)i=t[r]>t[i]?i:r;else for(var n=1+(i=r-e+1);n<=r;++n)t[n]<t[i]&&(i=n);a[r]=t[i]}return a},Ma.REF=function(t,e){var a=[];if(t.length<=0)return a;if(e>=t.length)return a;a=t.slice(0,t.length-e);for(var i=0;i<e;++i)a.unshift(null);return a},Ma.REFDATE=function(t,e){var a=[];if(t.length<=0)return a;e=t.length-1;for(var i in t)a[i]=t[e];return a},Ma.SUM=function(t,e){var a=[];if(0==e){a[0]=t[0];for(var i=1;i<t.length;++i)a[i]=a[i-1]+t[i]}else for(var i=e-1,r=0;i<t.length;++i,++r)for(var n=0;n<e;++n)0==n?a[i]=t[n+r]:a[i]+=t[n+r];return a},Ma.ARRAY_SUBTRACT=function(t,e){var a=[];if("number"==typeof e)for(var i in t)null==t[i]||isNaN(t[i])?a[i]=null:a[i]=t[i]-e;else for(var r=Math.max(t.length,e.length),i=0;i<r;++i)i<t.length&&i<e.length?null==t[i]||null==e[i]?a[i]=null:a[i]=t[i]-e[i]:a[i]=null;return a},Ma.ARRAY_GT=function(t,e){var a=[];if("number"==typeof e)for(var i in t)a[i]=t[i]>e?1:0;else for(var r=Math.max(t.length,e.length),i=0;i<r;++i)i<t.length&&i<e.length?a[i]=t[i]>e[i]?1:0:a[i]=null;return a},Ma.ARRAY_GTE=function(t,e){var a=[];if("number"==typeof e)for(var i in t)a[i]=t[i]>=e?1:0;else for(var r=Math.max(t.length,e.length),i=0;i<r;++i)i<t.length&&i<e.length?a[i]=t[i]>=e[i]?1:0:a[i]=null;return a},Ma.ARRAY_LT=function(t,e){var a=[];if("number"==typeof e)for(var i in t)a[i]=t[i]<e?1:0;else for(var r=Math.max(t.length,e.length),i=0;i<r;++i)i<t.length&&i<e.length?a[i]=t[i]<e[i]?1:0:a[i]=null;return a},Ma.ARRAY_LTE=function(t,e){var a=[];if("number"==typeof e)for(var i in t)a[i]=t[i]<=e?1:0;else for(var r=Math.max(t.length,e.length),i=0;i<r;++i)i<t.length&&i<e.length?a[i]=t[i]<=e[i]?1:0:a[i]=null;return a},Ma.ARRAY_EQ=function(t,e){var a=[];if("number"==typeof e)for(var i in t)a[i]=t[i]==e?1:0;else for(var r=Math.max(t.length,e.length),i=0;i<r;++i)i<t.length&&i<e.length?a[i]=t[i]==e[i]?1:0:a[i]=null;return a},Ma.ARRAY_IF=function(t,e,a){var i=[],r=["number"==typeof e,"number"==typeof a];for(var n in t)t[n]?i[n]=r[0]?e:e[n]:i[n]=r[1]?a:a[n];return i},Ma.ARRAY_AND=function(t,e){var a=[];if("number"==typeof e)for(var i in t)a[i]=t[i]&&e?1:0;else for(var r=Math.max(t.length,e.length),i=0;i<r;++i)i<t.length&&i<e.length?a[i]=t[i]&&e[i]?1:0:a[i]=0;return a},Ma.ARRAY_OR=function(t,e){var a=[];if("number"==typeof e)for(var i in t)a[i]=t[i]||e?1:0;else for(var r=Math.max(t.length,e.length),i=0;i<r;++i)i<t.length&&t[i]?a[i]=1:i<e.length&&e[i]?a[i]=1:a[i]=0;return a},Ma.ARRAY_MULTIPLY=function(t,e){if(2==arguments.length){var a=[];if("number"==typeof e)for(var i in t)null==t[i]||isNaN(t[i])?a[i]=null:a[i]=t[i]*e;else for(var r=Math.max(t.length,e.length),i=0;i<r;++i)i<t.length&&i<e.length?a[i]=t[i]*e[i]:a[i]=null;return a}for(var a=Ma.ARRAY_MULTIPLY(arguments[0],arguments[1]),i=2;i<arguments.length;++i)a=Ma.ARRAY_MULTIPLY(a,arguments[i]);return a},Ma.ARRAY_DIVIDE=function(t,e){var a=[];if("number"==typeof e)for(var i in t)a[i]=t[i]/e;else for(var r=Math.max(t.length,e.length),i=0;i<r;++i)i<t.length&&i<e.length?null==t[i]||null==e[i]||isNaN(t[i])||isNaN(e[i])?a[i]=null:0==e[i]?a[i]=null:a[i]=t[i]/e[i]:a[i]=null;return a},Ma.ARRAY_ADD=function(t,e){if(2==arguments.length){var a=[];if("number"==typeof e)for(var i in t)a[i]=t[i]+e;else for(var r=Math.max(t.length,e.length),i=0;i<r;++i)i<t.length&&i<e.length?null==t[i]||null==e[i]||isNaN(t[i])||isNaN(e[i])?a[i]=null:a[i]=t[i]+e[i]:a[i]=null;return a}for(var a=Ma.ARRAY_ADD(arguments[0],arguments[1]),i=2;i<arguments.length;++i)a=Ma.ARRAY_ADD(a,arguments[i]);return a},Ma.MAX=function(t,e){var a=[];if("number"==typeof e)for(var i in t)null==t[i]?a[i]=null:a[i]=Math.max(t[i],e);else for(var r=Math.max(t.length,e.length),i=0;i<r;++i)i<t.length&&i<e.length?null==t[i]||null==e[i]?a[i]=null:a[i]=Math.max(t[i],e[i]):a[i]=null;return a},Ma.MIN=function(t,e){var a=[];if("number"==typeof e)for(var i in t)null==t[i]?a[i]=null:a[i]=Math.min(t[i],e);else for(var r=Math.max(t.length,e.length),i=0;i<r;++i)i<t.length&&i<e.length?null==t[i]||null==e[i]?a[i]=null:a[i]=Math.min(t[i],e[i]):a[i]=null;return a},Ma.ABS=function(t){var e=[];for(var a in t)null==t[a]?e[a]=null:e[a]=Math.abs(t[a]);return e},Ma.MA=function(t,e){for(var a=[],i=0,r=t.length;i<r;i++)if(i<e)a[i]=null;else{for(var n=0,s=0;s<e;s++)n+=t[i-s];a[i]=n/e}return a},Ma.EXPMA=function(t,e){var a=[];if(e>=t.length)return a;for(var i=e;i<t.length;++i)if(null!=t[i]){a[i]=t[i];break}for(i+=1;i<t.length;++i)null!=a[i-1]&&null!=t[i]?a[i]=(2*t[i]+(e-1)*a[i-1])/(e+1):null!=a[i-1]&&(a[i]=a[i-1]);return a},Ma.EXPMEMA=function(t,e){var a=[];if(e>=t.length)return a;for(var i=0;i<t.length&&(!t[i]||isNaN(t[i]));++i);for(var r=0,n=0;i<t.length&&n<e;++n,++i)t[i]&&!isNaN(t[i])?r+=t[i]:r+=t[i-1];for(a[i-1]=r/e;i<t.length;++i)null!=a[i-1]&&null!=t[i]?a[i]=(2*t[i]+(e-1)*a[i-1])/(e+1):null!=a[i-1]&&(a[i]=a[i-1]);return a},Ma.STD=function(t,e){for(var a=[],i=0,r=[],n=e-1;n<t.length;++n){i=0;for(var s=0;s<e;++s)i+=t[n-s];r[n]=i/e}for(var n=e-1;n<t.length;++n){i=0;for(var s=0;s<e;++s)i+=Math.pow(t[n-s]-r[n],2);a[n]=Math.sqrt(i/e)}return a},Ma.AVEDEV=function(t,e){for(var a=[],i=0,r=[],n=e-1;n<t.length;++n){i=0;for(var s=0;s<e;++s)i+=t[n-s];r[n]=i/e}for(var n=e-1;n<t.length;++n){i=0;for(var s=0;s<e;++s)i+=Math.abs(t[n-s]-r[n]);a[n]=i/e}return a},Ma.COUNT=function(t,e){for(var a=[],i=e-1;i<t.length;++i){for(var r=0,n=0;n<e;++n)t[i-n]&&++r;a[i]=r}return a},Ma.CROSS=function(t,e){var a=[];if(t.length!=e.length)return a=[];for(var i=0;i<t.length&&(null==t[i]||isNaN(t[i])||null==e[i]||!isNaN(e[i]));++i);for(++i;i<t.length;++i)a[i]=t[i]>e[i]&&t[i-1]<e[i-1]?1:0;return a},Ma.MULAR=function(t,e){var a=[];if(t.length<e)return a;for(var i=e;i<t.length;++i)if(null!=t[i]&&!isNaN(t[i])){a[i]=t[i];break}for(++i;i<t.length;++i)a[i]=a[i-1]*t[i];return a},Ma.STICKLINE=function(t,e,a){var i=[];if(t.length<=0)return i;var r="number"==typeof e,n="number"==typeof a;for(var s in t)if(i[s]=null,!isNaN(t[s])&&t[s])if(r&&n)i[s]={Value:e,Value2:a};else if(r&&!n){if(isNaN(a[s]))continue;i[s]={Value:e,Value2:a[s]}}else if(!r&&n){if(isNaN(e[s]))continue;i[s]={Value:e[s],Value2:a}}else{if(isNaN(e[s])||isNaN(a[s]))continue;i[s]={Value:e[s],Value2:a[s]}}return i},_a.JsonDataToHistoryData=function(t){var e=[];if(!t.data)return e;var a=null;t.symbol&&(a=t.symbol.toUpperCase());a&&an.IsFutures(a);for(var i=t.data,r=0;r<i.length;++r){var n=new W,s=i[r];n.Date=s[0],n.Open=s[2],n.YClose=s[1],n.Close=s[5],n.High=s[3],n.Low=s[4],n.Vol=s[6],n.Amount=s[7],he.IsNumber(s[8])&&(n.Position=s[8]),he.IsNumber(s[9])&&(n.FClose=s[9]),he.IsNumber(s[10])&&(n.YFClose=s[10]),he.IsNumber(s[11])&&(n.BFactor=s[11]),he.IsNumber(s[12])&&(n.AFactor=s[12]),he.IsNumber(n.Open)&&(s[20]&&(n.OrderFlow=s[20]),e.push(n))}return e},_a.JsonDataToRealtimeData=function(t,e){if(!t.stock)return null;var a;for(var i in t.stock){var r=t.stock[i];if(r&&r.symbol==e){a=r;break}}if(!a)return null;var n=e.toUpperCase(),s=(an.IsSHSZ(n),new W);return s.Date=a.date,s.Open=a.open,s.YClose=a.yclose,s.High=a.high,s.Low=a.low,s.Vol=a.vol,s.Amount=a.amount,s.Close=a.price,he.IsNumber(a.position)&&(s.Position=a.position),he.IsNumber(a.bfactor)&&(s.BFactor=a.bfactor),he.IsNumber(a.afactor)&&(s.AFactor=a.afactor),s},_a.JsonDataToMinuteRealtimeData=function(t,e){if(!t.stock)return null;var a;for(var i in t.stock){var r=t.stock[i];if(r&&r.symbol==e){a=r;break}}if(!a)return null;var n=e.toUpperCase(),s=(an.IsSHSZ(n),an.IsFutures(n)),o=new Array,h=a.yclose,l=a.date;s&&a.yclearing&&(h=a.yclearing);for(var i in a.minute){var u=a.minute[i],c=new W;c.Close=u.price,c.Open=u.open,c.High=u.high,c.Low=u.low,c.Vol=u.vol,c.Amount=u.amount,u.date>0?c.Date=u.date:c.Date=l,c.Time=u.time,c.YClose=h,he.IsNumber(u.position)&&(c.Position=u.position),he.IsNumber(c.Close)||(c.Close=h,c.Open=c.High=c.Low=c.Close),he.IsNumber(c.Open)||(c.Open=null),he.IsNumber(c.Close)||(c.Close=null),he.IsNumber(c.High)||(c.High=null),he.IsNumber(c.Low)||(c.Low=null),he.IsNumber(u.price)&&(h=u.price),o[i]=c}return o},_a.JsonDataToMinuteRealtimeDataV2=function(t,e){if(!t||!t.overlay||!e)return null;for(var a=null,i=0;i<t.overlay.length;++i){var r=t.overlay[i];if(r.symbol==e){a=r;break}}if(!a)return null;for(var n=e.toUpperCase(),s=(an.IsSHSZ(n),an.IsFutures(n),null),i=0;i<a.data.length;++i){var r=new W,o=a.data[i];r.Date=o[0],r.Open=o[2],r.YClose=o[1],r.Close=o[5],r.High=o[3],r.Low=o[4],r.Vol=o[6],r.Amount=o[7],r.Time=o[8],he.IsNumber(o[9])&&(r.Position=o[9]),he.IsNumber(r.YClose)||he.IsNumber(s)&&(r.YClose=s),he.IsNumber(r.Close)&&(s=r.Close),o[20]&&(r.OrderFlow=o[20]),aryMinuteData.push(r)}return aryMinuteData},_a.JsonDataToMinuteHistoryData=function(t){var e=null;t.symbol&&(e=t.symbol.toUpperCase());e&&an.IsSHSZ(e);e&&an.IsFutures(e);for(var a=t.data,i=new Array,r=null,n=0;n<a.length;++n){var s=new W,o=a[n];s.Date=o[0],s.Open=o[2],s.YClose=o[1],s.Close=o[5],s.High=o[3],s.Low=o[4],s.Vol=o[6],s.Amount=o[7],s.Time=o[8],he.IsNumber(o[9])&&(s.Position=o[9]),he.IsNumber(s.YClose)||he.IsNumber(r)&&(s.YClose=r),he.IsNumber(s.Close)&&(r=s.Close),o[20]&&(s.OrderFlow=o[20]),i.push(s)}return i},_a.JsonDataToTickData=function(t){var e=[];if(!t.detail)return e;var a=t.date,i=t.yclose;for(var r in t.detail){var n=new W,s=t.detail[r];s&&(n.Date=a,n.Time=s[0],n.Low=n.High=n.Close=n.Open=s[1],n.YClose=i,n.Vol=s[2],n.Amount=s[3],n.Flag=s[4],he.IsNumber(n.Open)&&e.push(n))}return e},_a.JsonDataToTickDataV2=function(t){var e=[];if(!he.IsNonEmptyArray(t.data))return e;for(var a=0;a<t.data.length;++a){var i=new W,r=t.data[a];r&&(i.Date=r[0],i.Time=r[1],i.YClose=r[2],i.Low=i.High=i.Close=i.Open=r[3],e.push(i),r[4]&&(i.ExtendData=r[4]))}return e},ba.JsonDataToBeforeOpenData=function(t){var e=t.stock[0].yclose,a=t.stock[0],i=a.date,r={Data:[],TotalCount:15,Ver:1,Date:i};if(a.beforeinfo&&(he.IsNumber(a.beforeinfo.totalcount)&&(r.TotalCount=a.beforeinfo.totalcount),he.IsNumber(a.beforeinfo.ver)&&(r.Ver=a.beforeinfo.ver)),1==r.Ver)for(var n in a.before){var s=new U,o=a.before[n];s.Time=o[0],s.Date=i,s.Price=o[1],s.Price?e=s.Price:s.Price=e,s.Vol[0]=o[2]/100,s.Amount=o[3],s.DateTime=i.toString()+" "+s.Time.toString(),r.Data.push(s)}else if(2==r.Ver){var h=0;for(var n in a.before){var s=new U,o=a.before[n];s.Time=o[0],s.Date=i,s.Price=o[1],s.Vol[0]=o[2],s.Vol[1]=o[3],s.ColorID=o[4],s.DateTime=i.toString()+" "+s.Time.toString();var l=s.Vol[0]+s.Vol[1];he.IsNumber(o[5])&&(l=o[5]),l>h&&(h=l),r.Data.push(s)}r.VolMax=h,r.VolMin=0}else if(3==r.Ver){var h=0;for(var n in a.before){var s=new U,o=a.before[n];s.Time=o[0],s.Date=i,s.Price=o[1],s.AvPrice=o[2],s.Vol[0]=o[3],s.ColorID=o[4],s.DateTime=i.toString()+" "+s.Time.toString();var l=s.Vol[0];he.IsNumber(o[5])&&(l=o[5]),l>h&&(h=l),r.Data.push(s)}r.VolMax=h,r.VolMin=0}return r},ba.JsonDataToAfterCloseData=function(t){var e=(t.stock[0].yclose,t.stock[0]),a=e.date;if(!e.afterinfo)return null;var i={Data:[],TotalCount:180,Ver:2,Date:a},r=e.afterinfo;if(he.IsNumber(r.totalcount)&&(i.TotalCount=r.totalcount),he.IsNumber(r.ver)&&(i.Ver=r.ver),2==i.Ver){var n=0;for(var s in e.after){var r=new K,o=e.after[s];r.Time=o[0],r.Date=a,r.Price=o[1],r.Vol[0]=o[2],r.Vol[1]=o[3],r.ColorID=o[4],r.DateTime=a.toString()+" "+r.Time.toString();var h=r.Vol[0]+r.Vol[1];he.IsNumber(o[5])&&(h=o[5]),h>n&&(n=h),i.Data.push(r)}i.VolMax=n,i.VolMin=0}else if(3==i.Ver){var n=0;for(var s in e.after){var r=new K,o=e.after[s];r.Time=o[0],r.Date=a,r.Price=o[1],r.AvPrice=o[2],r.Vol[0]=o[3],r.ColorID=o[4],r.DateTime=a.toString()+" "+r.Time.toString();var h=r.Vol[0];he.IsNumber(o[5])&&(h=o[5]),h>n&&(n=h),i.Data.push(r)}i.VolMax=n,i.VolMin=0}return i},ba.JsonDataToMinuteData=function(t,e){var a=t.stock[0].symbol,i=a.toUpperCase(),r=an.IsSHSZ(i),n=an.IsFutures(i),s=an.IsSHO(i),o=an.IsSZO(i),h=new Array,l=t.stock[0].yclose,u=t.stock[0].yclose,c=t.stock[0].yclose;n&&t.stock[0].yclearing&&(c=l=u=t.stock[0].yclearing);var d=t.stock[0].date;for(var f in t.stock[0].minute){var m=t.stock[0].minute[f],C=new X;C.Close=m.price,C.Open=m.open,C.High=m.high,C.Low=m.low,C.Vol=r?m.vol/100:m.vol,C.Amount=m.amount,m.date>0&&(d=m.date),C.DateTime=d.toString()+" "+m.time.toString(),C.Date=d,C.Time=m.time,(n||s||o)&&(C.Position=m.position),8<m.length&&m[8]>0&&(C.Date=m[8],C.DateTime=C.Date.toString()+" "+m[0].toString()),C.Increase=m.increase,C.Risefall=m.risefall,C.AvPrice=m.avprice,he.IsNumber(m.lead)&&(C.Lead=m.lead),C.Close||(C.Close=l,C.Open=C.High=C.Low=C.Close),C.AvPrice||(C.AvPrice=u),C.Open<=0&&(C.Open=null),C.Close<=0&&(C.Close=null),C.AvPrice<=0&&(C.AvPrice=null),C.High<=0&&(C.High=null),C.Low<=0&&(C.Low=null),c&&C.Close&&(C.Increase=(C.Close-c)/c*100);var p=Math.abs(C.AvPrice-C.Close);r&&p>.13*C.Close&&(C.AvPrice=u),m.price>0&&(l=m.price),m.avprice>0&&C.AvPrice===m.avprice&&(u=m.avprice),h[f]=C}return h},ba.JsonDataToMinuteLineColorData=function(t){if(!t||!t.stock[0])return null;var e=t.stock[0];if(!e.linecolor||!he.IsNonEmptyArray(e.linecolor.data))return null;var a=[];for(var i in e.linecolor.data){var r=e.linecolor.data[i];if(he.IsNumber(r.type)&&he.IsNumber(r.date)&&he.IsNumber(r.start)&&he.IsNumber(r.end)&&r.color&&!(r.start>=r.end)){var n={Type:r.type,Date:r.date,Start:r.start,End:r.end,Color:r.color};he.IsPlusNumber(r.linewidth)&&(n.LineWidth=r.linewidth),a.push(n)}}return a},ba.JsonDataToMinuteLastUpdateTime=function(t){if(!t||!t.stock[0])return null;var e=t.stock[0];return he.IsNumber(e.date)&&he.IsNumber(e.time)?{Date:e.date,Time:e.time}:null},ba.JsonDataToHistoryMinuteLastUpdateTime=function(t){if(!t||!t.updatetime)return null;var e=t.updatetime;return he.IsNumber(e.date)&&he.IsNumber(e.time)?{Date:e.date,Time:e.time}:null},ba.JsonDataToMinuteDataArray=function(t){var e=t.symbol,a=e.toUpperCase(),i=an.IsSHSZ(a),r=an.IsSHO(a),n=an.IsSZO(a),s=an.IsFutures(a),o=[];for(var h in t.data){var l=[],u=t.data[h],c=u.date,d=u.yclose,f=d,m=null,C=u.yclearing;for(var p in u.minute){var D=u.minute[p];D[2]&&(f=D[2]);var v=new X;if(v.Close=D[2],v.Open=D[1],v.High=D[3],v.Low=D[4],v.Vol=i?D[5]/100:D[5],v.Amount=D[6],7<D.length&&D[7]>0&&(v.AvPrice=D[7]),v.DateTime=c.toString()+" "+D[0].toString(),v.Date=c,v.Time=D[0],8<D.length&&D[8]>0&&(v.Date=D[8],v.DateTime=v.Date.toString()+" "+D[0].toString()),(s||r||n)&&9<D.length&&(v.Position=D[9]),v.Close||(v.Close=f,v.Open=v.High=v.Low=v.Close),!v.AvPrice&&m&&(v.AvPrice=m),v.Close&&d?v.Increase=(v.Close-d)/d*100:v.Increase=null,v.Open<=0&&(v.Open=null),v.Close<=0&&(v.Close=null),v.AvPrice<=0&&(v.AvPrice=null),v.High<=0&&(v.High=null),v.Low<=0&&(v.Low=null),v.AvPrice<=0&&(v.AvPrice=null),v.AvPrice&&i){Math.abs(v.AvPrice-v.Close)>.13*v.Close&&(v.AvPrice=m)}D.length>7&&D[7]>0&&v.AvPrice===D[7]&&(m=D[7]),l[p]=v}var g=new Z;g.Data=l,g.YClose=d,g.Close=u.close,g.Date=c,he.IsNumber(C)&&(g.YClearing=C),o.push(g)}return o},ba.JsonDataToHistoryMinuteLineColorData=function(t){if(!t)return null;var e=[];for(var a in t.data){var i=t.data[a];if(i.linecolor)for(var r in i.linecolor.data){var n=i.linecolor.data[r];if(he.IsNumber(n.type)&&he.IsNumber(n.date)&&he.IsNumber(n.start)&&he.IsNumber(n.end)&&n.color&&!(n.start>=n.end)){var s={Type:n.type,Date:n.date,Start:n.start,End:n.end,Color:n.color};he.IsPlusNumber(n.linewidth)&&(s.LineWidth=n.linewidth),e.push(s)}}}return e.length>0?e:null},ba.JsonDataToCallAuctionItem=function(t,e,a){var i=e.Date;if(1==e.Ver)for(var r in t){var n=a?new U:new K,s=t[r];n.Time=s[0],n.Date=i,n.Price=s[1],n.Price?preClose=n.Price:n.Price=preClose,n.Vol[0]=s[2]/100,n.Amount=s[3],n.DateTime=i.toString()+" "+n.Time.toString(),e.Data.push(n)}else if(2==e.Ver){var o=0;for(var r in t){var n=a?new U:new K,s=t[r];n.Time=s[0],n.Date=i,n.Price=s[1],n.Vol[0]=s[2],n.Vol[1]=s[3],n.ColorID=s[4],n.DateTime=i.toString()+" "+n.Time.toString();var h=n.Vol[0]+n.Vol[1];he.IsNumber(s[5])&&(h=s[5]),h>o&&(o=h),e.Data.push(n)}e.VolMax=o,e.VolMin=0}else if(3==beforeOpenData.Ver){var o=0;for(var r in t){var n=a?new U:new K,s=t[r];n.Time=s[0],n.Date=i,n.Price=s[1],n.AvPrice=s[2],n.Vol[0]=s[3],n.ColorID=s[4],n.DateTime=i.toString()+" "+n.Time.toString();var h=n.Vol[0];he.IsNumber(s[5])&&(h=s[5]),h>o&&(o=h),e.Data.push(n)}e.VolMax=o,e.VolMin=0}},ba.JosnDataToBeforeOpenDataArray=function(t){if(!t||!t.data)return null;var e=[];for(var a in t.data){var i=t.data[a],r={Data:[],TotalCount:15,Ver:1,Date:i.date};i.beforeinfo&&(he.IsNumber(i.beforeinfo.totalcount)&&(r.TotalCount=i.beforeinfo.totalcount),he.IsNumber(i.beforeinfo.ver)&&(r.Ver=i.beforeinfo.ver)),ba.JsonDataToCallAuctionItem(i.before,r,!0),e.push(r)}return e.sort(function(t,e){return t.Date-e.Date}),e},ba.JosnDataToAfterCloseDataArray=function(t){if(!t||!t.data)return null;var e=[];for(var a in t.data){var i=t.data[a],r={Data:[],TotalCount:15,Ver:1,Date:i.date};i.afterinfo&&(he.IsNumber(i.afterinfo.totalcount)&&(r.TotalCount=i.afterinfo.totalcount),he.IsNumber(i.afterinfo.ver)&&(r.Ver=i.afterinfo.ver)),ba.JsonDataToCallAuctionItem(i.after,r,!1),e.push(r)}return e.sort(function(t,e){return t.Date-e.Date}),e},wa.JsonDataToMinuteData=function(t){var e=[];for(var a in t.minute.time){var i=new X;t.minute.price[a]<=0&&a>0?(i.Close=e[a-1].Close,i.Open=e[a-1].Close,i.High=i.Close,i.Low=i.Close,i.Vol=t.minute.vol[a],i.Amount=t.minute.amount[a],i.DateTime=t.date.toString()+" "+t.minute.time[a].toString(),i.AvPrice=e[a-1].AvPrice):(i.Close=t.minute.price[a],i.Open=t.minute.open[a],i.High=t.minute.high[a],i.Low=t.minute.low[a],i.Vol=t.minute.vol[a],i.Amount=t.minute.amount[a],i.DateTime=t.date.toString()+" "+t.minute.time[a].toString(),i.AvPrice=t.minute.avprice[a]),i.Open<=0&&(i.Open=null),i.Close<=0&&(i.Close=null),i.AvPrice<=0&&(i.AvPrice=null),i.High<=0&&(i.High=null),i.Low<=0&&(i.Low=null),e[a]=i}return e},Za.prototype.GetDefaultColor=function(t){var e=["rgb(255,174,0)","rgb(25,199,255)","rgb(175,95,162)","rgb(236,105,65)","rgb(68,114,196)","rgb(229,0,79)","rgb(0,128,255)","rgb(252,96,154)","rgb(42,230,215)","rgb(24,71,178)"];return e[parseInt(t)%(e.length-1)]},ti.Get=function(t){return new _r.default([["互动易",{Create:function(){return new ai}}],["公告",{Create:function(){return new ii}}],["业绩预告",{Create:function(){return new ri}}],["调研",{Create:function(){return new ni}}],["大宗交易",{Create:function(){return new si}}],["龙虎榜",{Create:function(){return new oi}}]]).get(t)},ti.GetClassInfo=function(t){return new _r.default([["互动易",{ClassName:"InvestorInfo"}],["公告",{ClassName:"AnnouncementInfo"}],["业绩预告",{ClassName:"PforecastInfo"}],["调研",{ClassName:"ResearchInfo"}],["大宗交易",{ClassName:"BlockTrading"}],["龙虎榜",{ClassName:"TradeDetail"}]]).get(t)},ti.GetIconUrl=function(t){switch(t){case kr.INVESTOR:return $r.KLine.Info.Investor.Icon;case kr.PFORECAST:return $r.KLine.Info.Pforecast.Icon;case kr.ANNOUNCEMENT:return $r.KLine.Info.Announcement.Icon;case kr.ANNOUNCEMENT_QUARTER_1:case kr.ANNOUNCEMENT_QUARTER_2:case kr.ANNOUNCEMENT_QUARTER_3:case kr.ANNOUNCEMENT_QUARTER_4:return $r.KLine.Info.Announcement.IconQuarter;case kr.RESEARCH:return $r.KLine.Info.Research.Icon;case kr.BLOCKTRADING:return $r.KLine.Info.BlockTrading.Icon;case kr.TRADEDETAIL:return $r.KLine.Info.TradeDetail.Icon;default:return $r.KLine.Info.Announcement.Icon}},ti.GetIconLibrary=function(t){var e=$r.KLine.Info.IconLibrary;if(!e||!e.Icon)return $r.KLine.Info.Announcement.IconFont;if(t>=0&&t<e.Icon.length){var a=e.Icon[t];return{Text:a.Text,HScreenText:a.HScreenText,Color:a.Color,Family:e.Family}}return $r.KLine.Info.Announcement.IconFont},ti.GetIconFont=function(t){if(t>=kr.ANNOUNCEMENT_EX_START&&t<=kr.ANNOUNCEMENT_EX_END){var e=t-kr.ANNOUNCEMENT_EX_START;return ti.GetIconLibrary(e)}switch(t){case kr.INVESTOR:return $r.KLine.Info.Investor.IconFont;case kr.PFORECAST:return $r.KLine.Info.Pforecast.IconFont;case kr.ANNOUNCEMENT:return $r.KLine.Info.Announcement.IconFont;case kr.ANNOUNCEMENT_QUARTER_1:case kr.ANNOUNCEMENT_QUARTER_2:case kr.ANNOUNCEMENT_QUARTER_3:case kr.ANNOUNCEMENT_QUARTER_4:return $r.KLine.Info.Announcement.IconFont2;case kr.RESEARCH:return $r.KLine.Info.Research.IconFont;case kr.BLOCKTRADING:return $r.KLine.Info.BlockTrading.IconFont;case kr.TRADEDETAIL:return $r.KLine.Info.TradeDetail.IconFont;default:return $r.KLine.Info.Announcement.IconFont}},hi.InfoMap=new _r.default([["大盘异动",{Create:function(){return new ui}}]]),hi.Get=function(t){return hi.InfoMap.get(t)};var an={SH:".SH",SZ:".SZ",SHSZ_C_Index:".CI",BJ:".BJ",SHO:".SHO",SZO:".SZO",HK:".HK",FHK:".FHK",SHFE:".SHF",SHFE2:".SHFE",CFFEX:".CFE",DCE:".DCE",CZCE:".CZC",USA:".USA",FTSE:".FTSE",BIT:".BIT",BIZ:".BIZ",FOREX:".FOREX",NYMEX:".NYMEX",COMEX:".COMEX",NYBOT:".NYBOT",CBOT:".CBOT",LME:".LME",TOCOM:".TOCOM",IPE:".IPE",ET:".ET",IsET:function(t){return!!t&&t.indexOf(this.ET)>0},IsETShowAvPrice:function(t){return!1},IsNYMEX:function(t){return!!t&&t.indexOf(this.NYMEX)>0},IsCOMEX:function(t){return!!t&&t.indexOf(this.COMEX)>0},IsNYBOT:function(t){return!!t&&t.indexOf(this.NYBOT)>0},IsCBOT:function(t){return!!t&&t.indexOf(this.CBOT)>0},IsLME:function(t){return!!t&&t.indexOf(this.LME)>0},IsTOCOM:function(t){return!!t&&t.indexOf(this.TOCOM)>0},IsIPE:function(t){return!!t&&t.indexOf(this.IPE)>0},IsForeignExchange:function(t){return!!t&&t.indexOf(this.FOREX)>0},IsFTSE:function(t){return!!t&&t.indexOf(this.FTSE)>0},IsFHK:function(t){return!!t&&t.indexOf(this.FHK)>0},IsBIT:function(t){return!!t&&(t.indexOf(this.BIT)>0||t.indexOf(this.BIZ)>0)},IsUSA:function(t){return!!t&&t.indexOf(this.USA)>0},IsSH:function(t){var e=t.length-this.SH.length;return t.indexOf(this.SH)==e},IsSZ:function(t){var e=t.length-this.SZ.length;return t.indexOf(this.SZ)==e},IsBJ:function(t){var e=t.length-this.BJ.length;return t.indexOf(this.BJ)==e},IsSHSZCustomIndex:function(t){var e=t.length-this.SHSZ_C_Index.length;return t.indexOf(this.SHSZ_C_Index)==e},IsSHO:function(t){var e=t.length-this.SHO.length;return t.indexOf(this.SHO)==e},IsSZO:function(t){var e=t.length-this.SZO.length;return t.indexOf(this.SZO)==e},IsHK:function(t){var e=t.length-this.HK.length;return t.indexOf(this.HK)==e},IsSHFE:function(t){return!!t&&(t.indexOf(this.SHFE)>0||t.indexOf(this.SHFE2)>0)},IsCFFEX:function(t){return!!t&&t.indexOf(this.CFFEX)>0},IsDCE:function(t){return!!t&&t.indexOf(this.DCE)>0},IsCZCE:function(t){return!!t&&t.indexOf(this.CZCE)>0},IsChinaFutures:function(t){return this.IsSHO(t)||this.IsSZO(t)||this.IsCFFEX(t)||this.IsCZCE(t)||this.IsDCE(t)||this.IsSHFE(t)},IsFutures:function(t){return this.IsChinaFutures(t)||this.IsNYMEX(t)||this.IsCOMEX(t)||this.IsNYBOT(t)||this.IsCBOT(t)||this.IsLME(t)||this.IsTOCOM(t)},IsSHSZ:function(t){return this.IsSZ(t)||this.IsSH(t)||this.IsSHSZCustomIndex(t)},IsSHSZFund:function(t){if(!t)return!1;if(this.IsSH(t)){if("5"==t.charAt(0)&&"1"==t.charAt(1))return!0}else if(this.IsSZ(t)&&"1"==t.charAt(0)&&("5"==t.charAt(1)||"6"==t.charAt(1)||"7"==t.charAt(1)||"8"==t.charAt(1)))return!0;return!1},IsSHSZIndex:function(t){if(!t)return!1;var e=t.toUpperCase();if(this.IsSH(e)){var a=e.replace(".SH","");if("0"==e.charAt(0)&&parseInt(a)<=3e3)return!0}else if(this.IsSZ(e)){if("3"==e.charAt(0)&&"9"==e.charAt(1))return!0}else if(this.IsSHSZCustomIndex(e))return!0;return!1},IsSHSZStockA:function(t){if(!t)return!1;var e=t.toUpperCase();if(this.IsSH(e)){e.replace(".SH","");if("6"==e.charAt(0))return!0}else if(this.IsSZ(e))if("0"==e.charAt(0)){if("0"==e.charAt(1)&&"2"==e.charAt(2))return!0;if("7"!=e.charAt(1)&&"8"!=e.charAt(1))return!0}else if("3"==e.charAt(0)&&"0"==e.charAt(1)&&"0"==e.charAt(2))return!0;return!1},IsBJStock:function(t){if(!t)return!1;var e=t.toUpperCase();if(!this.IsBJ(e))return!1;var a=e.charAt(0);return"4"==a||"8"==a},IsSHStockSTAR:function(t){if(!t)return!1;var e=t.toUpperCase();return!!this.IsSH(e)&&("6"==e.charAt(0)&&"8"==e.charAt(1)&&"8"==e.charAt(2))},GetMarketStatus:function(t){if(!t)return 0;var e=t.toUpperCase(),a=new Date,i=a.getDay(),r=100*a.getHours()+a.getMinutes();if(this.IsUSA(e)){var n=Pi(-4),i=n.getDay(),r=100*n.getHours()+n.getMinutes();return 6==i||0==i?0:r>1730?3:r<930?1:2}return this.IsBIT(e)?2:this.IsForeignExchange(e)?2:this.IsFTSE(e)?6==i||0==i?0:r>=830&&r<=2359?2:r>=0&&r<=500?2:0:this.IsFHK(e)?6==i||0==i?0:r>=900&&r<=2359?2:r>=0&&r<=320?2:0:this.IsET(e)?this.GetETMarketStatus(t):this.IsHK(e)?6==i||0==i?0:r>1630?3:r<925?1:2:this.IsNYMEX(e)?this.GetNYMEXMarketStatus(e):this.IsCOMEX(e)?this.GetCOMEXMarketStatus(e):this.IsNYBOT(e)?this.GetNYBOTMarketStatus(e):this.IsCBOT(e)?this.GetCBOTMarketStatus(e):this.IsLME(e)?this.GetLMEMarketStatus(e):this.IsTOCOM(e)?this.GetTOCOMMarketStatus(e):this.IsChinaFutures(e)?6==i||0==i?0:r>=2100?2:r<=240?2:r>=830&&r<=1510?2:1:6==i||0==i?0:r>1540?3:r<925?1:2},GetLimitPriceRange:function(t,e){return this.IsSHSZStockA(t)?this.IsSHStockSTAR(t)?{Max:.2,Min:-.2}:e?e.indexOf("ST")>=0?{Max:.05,Min:-.05}:{Max:.1,Min:-.1}:null:null},GetDefaultDecimal:function(t){return 2},GetFHKDecimal:function(t){return 0},GetFTSEDecimal:function(t){return 0},GetBITDecimal:function(t){return 2},GetSHODecimal:function(t){return 4},GetETDecimal:function(t){return 2},GetForeignExchangeDecimal:function(t){return 4},GetNYMEXDecimal:function(t){return on.GetDecimal(t)},GetCOMEXDecimal:function(t){return hn.GetDecimal(t)},GetNYBOTDecimal:function(t){return ln.GetDecimal(t)},GetCBOTDecimal:function(t){return un.GetDecimal(t)},GetLMEDecimal:function(t){return cn.GetDecimal(t)},GetTOCOMDecimal:function(t){return dn.GetDecimal(t)},GetIPEDecimal:function(t){return fn.GetDecimal(t)},GetETMarketStatus:function(t){return 2},GetNYMEXMarketStatus:function(t){return on.GetMarketStatus(t)},GetCOMEXMarketStatus:function(t){return hn.GetMarketStatus(t)},GetNYBOTMarketStatus:function(t){return ln.GetMarketStatus(t)},GetCBOTMarketStatus:function(t){return un.GetMarketStatus(t)},GetLMEMarketStatus:function(t){return cn.GetMarketStatus(t)},GetTOCOMMarketStatus:function(t){return dn.GetMarketStatus(t)},GetIPEMarketStatus:function(t){return fn.GetMarketStatus(t)},IsShowMinuteVolTitle:function(t){if(!t)return!1;t.toUpperCase();return!1},IsShowMinutePostionLine:function(t){return!!(an.IsFutures(t)||an.IsSHO(t)||an.IsSZO(t))},IsShowMinuteColorVolBar:function(t){return!!$r.Minute.VolBarColor},IsEnableRight:function(t,e){return!(!an.IsSHSZStockA(e)&&!an.IsBJStock(e))&&(!Z.IsTickPeriod(t)&&!Z.IsMinutePeriod(t,!0))}},rn=new xi,nn=new Li,sn=new Mi,on=new _i,hn=new bi,ln=new wi,un=new Fi,cn=new Ei,dn=new Ai,fn=new Ni;if(!Fr)var Fr={Chart:{Log:console.log,Warn:console.warn},Complier:{Log:console.log,Warn:console.warn}};var mn={Domain:"https://opensource.zealink.com",CacheDomain:"https://opensourcecache.zealink.com",DrawIcon:{Family:"iconfont",Data:new _r.default([[1,{Text:"",Color:"rgb(243,28,15)"}],[2,{Text:"",Color:"rgb(87,247,41)"}],[3,{Text:"",Color:"rgb(237,153,0)"}],[4,{Text:"",Color:"rgb(237,153,0)"}],[5,{Text:"",Color:"rgb(237,153,0)"}],[6,{Text:"",Color:"rgb(140,57,208)"}],[7,{Text:"",Color:"rgb(246,135,37)"}],[8,{Text:"",Color:"rgb(85,231,56)"}],[9,{Text:"",Color:"rgb(227,61,41)"}],[10,{Text:"",Color:"rgb(216,78,48)"}],[11,{Text:"",Color:"rgb(249,187,0)"}],[12,{Text:"",Color:"rgb(249,187,0)"}],[13,{Text:"",Color:"rgb(216,42,0)"}],[14,{Text:"",Color:"rgb(58,90,236)"}],[15,{Text:"",Color:"rgb(227,149,0)"}],[16,{Text:"",Color:"rgb(208,82,78)"}],[17,{Text:"",Color:"rgb(234,114,26)"}],[18,{Text:"",Color:"rgb(116,25,255)"}],[19,{Text:"",Color:"rgb(102,9,11)"}],[20,{Text:"",Color:"rgb(127,125,137)"}],[21,{Text:"",Color:"rgb(110,188,255)"}],[22,{Text:"",Color:"rgb(238,79,51)"}],[23,{Text:"",Color:"rgb(244,71,0)"}],[24,{Text:"",Color:"rgb(102,183,248)"}],[25,{Text:"",Color:"rgb(234,88,231)"}],[26,{Text:"",Color:"rgb(242,171,0)"}],[27,{Text:"",Color:"rgb(87,247,168)"}],[28,{Text:"",Color:"rgb(97,204,113)"}],[29,{Text:"",Color:"rgb(84,115,193)"}],[30,{Text:"",Color:"rgb(141,51,255)"}],[31,{Text:"",Color:"rgb(200,126,24)"}],[32,{Text:"",Color:"rgb(195,41,32)"}],[33,{Text:"",Color:"rgb(215,85,194)"}],[34,{Text:"",Color:"rgb(250,222,105)"}],[35,{Text:"",Color:"rgb(112,249,224)"}],[36,{Text:"",Color:"rgb(217,107,98)"}],[37,{Text:"",Color:"rgb(114,231,17)"}],[38,{Text:"",Color:"rgb(238,31,25)"}],[39,{Text:"",Color:"rgb(92,247,113)"}],[40,{Text:"",Color:"rgb(175,175,175)"}],[41,{Text:"",Color:"rgb(252,228,23)"}],[42,{Text:"",Color:"rgb(88,195,235)"}],[43,{Text:"",Color:"rgb(55,74,94)"}],[44,{Text:"",Color:"rgb(248,175,33)"}],[45,{Text:"",Color:"rgb(194,180,112)"}],[46,{Text:"",Color:"rgb(50,153,28)"}],[47,{Text:"",Color:"rgb(17,65,152)"}],[48,{Text:"",Color:"rgb(194,55,26)"}],[49,{Text:"",Color:"rgb(243,0,0)"}]])},CustomDrawIcon:{Data:new _r.default},CustomFunction:{Data:new _r.default},CustomVariant:{Data:new _r.default},GetDrawIcon:function(t){if(mn.CustomDrawIcon.Data.has(t)){var e=mn.CustomDrawIcon.Data.get(t);return e.Symbol?{Symbol:e.Symbol,Color:e.Color,IconFont:!1,ID:t}:{Symbol:e.Text,Color:e.Color,Family:e.Family,IconFont:!0,ID:t}}if(mn.DrawIcon.Data.has(t)){var a=mn.DrawIcon.Data.get(t);return{Symbol:a.Text,Color:a.Color,Family:mn.DrawIcon.Family,IconFont:!0,ID:t}}return null},GetDrawTextIcon:function(t){return new _r.default([[1,{Symbol:"↑",Color:"rgb(238,44,44)"}],[2,{Symbol:"↓",Color:"rgb(0,139,69)"}],[3,{Symbol:"😧"}],[4,{Symbol:"😨"}],[5,{Symbol:"😁"}],[6,{Symbol:"😱"}],[7,{Symbol:"B",Color:"rgb(238,44,44)"}],[8,{Symbol:"S",Color:"rgb(0,139,69)"}],[9,{Symbol:"💰"}],[10,{Symbol:"📪"}],[11,{Symbol:"👆"}],[12,{Symbol:"👇"}],[13,{Symbol:"B",Color:"rgb(178,34,34)"}],[14,{Symbol:"S",Color:"rgb(0,139,69)"}],[36,{Symbol:"Χ",Color:"rgb(238,44,44)"}],[37,{Symbol:"X",Color:"rgb(0,139,69)"}],[38,{Symbol:"▲",Color:"rgb(238,44,44)"}],[39,{Symbol:"▼",Color:"rgb(0,139,69)"}],[40,{Symbol:"◉",Color:"rgb(238,44,44)"}],[41,{Symbol:"◈",Color:"rgb(238,44,44)"}],[42,{Symbol:"📌"}],[43,{Symbol:"💎"}],[44,{Symbol:"🥇"}],[45,{Symbol:"🥈"}],[46,{Symbol:"🥉"}],[47,{Symbol:"🏅"}]]).get(t)},IsCustomFunction:function(t){return!!mn.CustomFunction.Data.has(t)},IsCustomVariant:function(t){return!!mn.CustomVariant.Data.has(t)}},Cn={BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token =",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"},pn={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},Dn={FromCodePoint:function(t){return t<65536?String.fromCharCode(t):String.fromCharCode(55296+(t-65536>>10))+String.fromCharCode(56320+(t-65536&1023))},IsWhiteSpace:function(t){return 32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0},IsLineTerminator:function(t){return 10===t||13===t||8232===t||8233===t},IsIdentifierStart:function(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||92===t||12304===t||12305===t||9650===t||9660===t||t>=128&&pn.NonAsciiIdentifierStart.test(Dn.FromCodePoint(t))},IsIdentifierPart:function(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||92===t||35===t||12304===t||12305===t||9650===t||9660===t||t>=128&&pn.NonAsciiIdentifierPart.test(Dn.FromCodePoint(t))},IsDecimalDigit:function(t){return t>=48&&t<=57},IsHexDigit:function(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102},isOctalDigit:function(t){return t>=48&&t<=55}},vn={};vn[1]="Boolean",vn[2]="<end>",vn[3]="Identifier",vn[4]="Keyword",vn[5]="Null",vn[6]="Numeric",vn[7]="Punctuator",vn[8]="String",vn[9]="RegularExpression",vn[10]="Template",Ri.GetPeriodInfo=function(t){var e=[{Name:"MIN1",Period:4,Order:1},{Name:"MIN5",Period:5,Order:2},{Name:"MIN15",Period:6,Order:3},{Name:"MIN30",Period:7,Order:4},{Name:"MIN60",Period:8,Order:5},{Name:"DAY",Period:0,Order:1e3},{Name:"MULTIDAY",Period:40002,Order:1002},{Name:"DAY2",Period:40002,Order:1002},{Name:"DAY3",Period:40003,Order:1003},{Name:"DAY4",Period:40004,Order:1004},{Name:"DAY5",Period:40005,Order:1005},{Name:"WEEK",Period:1,Order:1005},{Name:"DAY6",Period:40006,Order:1006},{Name:"DAY7",Period:40007,Order:1007},{Name:"DAY8",Period:40008,Order:1008},{Name:"DAY9",Period:40009,Order:1009},{Name:"DAY10",Period:40009,Order:1010},{Name:"WEEK2",Period:21,Order:1010},{Name:"DAY11",Period:40011,Order:1011},{Name:"DAY12",Period:40012,Order:1012},{Name:"DAY13",Period:40013,Order:1013},{Name:"DAY14",Period:40014,Order:1014},{Name:"MONTH",Period:2,Order:1030},{Name:"SEASON",Period:9,Order:1090},{Name:"HALFYEAR",Period:22,Order:1180},{Name:"YEAR",Period:3,Order:1365}];if(t.Name){for(var a in e)if(t.Name&&e[a].Name==t.Name)return e[a];return null}if(he.IsNumber(t.PeriodID)){for(var a in e)if(e[a].Period==t.PeriodID)return e[a];return null}return null},Ri.GetConvertValueName=function(t){var e;return"COVER_C"==t?e="CLOSE":"COVER_O"==t?e="OPEN":"COVER_H"==t?e="HIGH":"COVER_L"==t?e="LOW":"COVER_A"==t?e="AMOUNT":"COVER_V"==t&&(e="VOL"),e};var gn={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};Gi.prototype.IsNumber=function(t){return null!=t&&!isNaN(t)},Gi.prototype.IsDivideNumber=function(t){return null!=t&&(!isNaN(t)&&0!=t)},Gi.MOD=function(t,e){if(t<0&&e<0||t>=0&&e>=0){if(parseInt(t)==t&&parseInt(e)==e)return t%e;var a=parseFloat((t-Math.floor(t/e)*e).toFixed(1));return a}var i=Math.abs(t),r=Math.abs(e),a=Math.abs(Math.abs(e)*(Math.floor(i/r)+1)-Math.abs(t));return e<0&&(a=-a),a},Wi.prototype.CalculateDrawLine=function(t){t.List=[];for(var e=t.Start.ID;e<=t.End.ID;++e)t.List.push(e);var a=Math.abs(t.Start.Value-t.End.Value),i=t.List.length-1,r=[];if(r.push({ID:t.Start.ID,Value:t.Start.Value}),t.Start.Value>t.End.Value)for(var n=1;n<t.List.length-1;++n){var s=a*(t.List.length-1-n)/i+t.End.Value;r.push({ID:t.List[n],Value:s})}else for(var o=1;o<t.List.length-1;++o){var s=a*o/i+t.Start.Value;r.push({ID:t.List[o],Value:s})}return r.push({ID:t.End.ID,Value:t.End.Value}),r},Wi.prototype.IsNumber=function(t){return null!=t&&!isNaN(t)},Wi.prototype.IsDrawFunction=function(t){return!!new Ir.default(["STICKLINE","DRAWTEXT","SUPERDRAWTEXT","DRAWLINE","DRAWBAND","DRAWKLINE","DRAWKLINE1","DRAWKLINE_IF","DRAWCOLORKLINE","PLOYLINE","POLYLINE","DRAWNUMBER","DRAWNUMBER_FIX","DRAWICON","DRAWCHANNEL","PARTLINE","DRAWTEXT_FIX","DRAWGBK","DRAWTEXT_LINE","DRAWRECTREL","DRAWTEXTABS","DRAWTEXTREL","DRAWOVERLAYLINE","FILLRGN","FILLRGN2","FILLTOPRGN","FILLBOTTOMRGN","FILLVERTICALRGN","FLOATRGN","DRAWSL","DRAWGBK2","VERTLINE","HORLINE"]).has(t)},Wi.prototype.RemoveZero=function(t){for(;t.length>0;){var e=t.length-1,a=t[e];if("0"!=a){if("."==a){t=t.substr(0,e);break}break}t=t.substr(0,e)}return t};var Sn={YCLOSE:3,OPEN:4,HIGH:5,LOW:6,CLOSE:7,VOL:8,AMOUNT:10,AMPLITUDE:13,INCREASE:14,EXCHANGERATE:37};Xi.prototype.IsNumber=function(t){return null!=t&&!isNaN(t)},Xi.prototype.IsDivideNumber=function(t){return null!=t&&(!isNaN(t)&&0!=t)},Xi.prototype.JsonDataToFinance=function(t){for(var e,a=1;a<=4;++a){switch(a){case 1:var i=t.finance1,r=t.announcement1;break;case 2:var i=t.finance2,r=t.announcement2;break;case 3:var i=t.finance3,r=t.announcement3;break;case 4:var i=t.finance4,r=t.announcement4}i&&r&&this.IsNumber(r.year)&&this.IsNumber(r.quarter)&&(e?e.Announcement.year<r.year&&(e={Date:t.date,Finance:i,Announcement:r}):e={Date:t.date,Finance:i,Announcement:r})}return e};var Tn=!1,yn={JOB_DOWNLOAD_SYMBOL_DATA:1,JOB_DOWNLOAD_INDEX_DATA:2,JOB_DOWNLOAD_SYMBOL_LATEST_DATA:3,JOB_DOWNLOAD_INDEX_INCREASE_DATA:4,JOB_DOWNLOAD_VOLR_DATA:5,JOB_DOWNLOAD_LATEST_INDEX_DATA:8,JOB_DOWNLOAD_OTHER_SYMBOL_DATA:9,JOB_DOWNLOAD_SYMBOL_PERIOD_DATA:10,JOB_DOWNLOAD_FINVALUE:301,JOB_DOWNLOAD_FINONE:302,JOB_DOWNLOAD_FINANCE:303,JOB_DOWNLOAD_GPJYVALUE:304,JOB_DOWNLOAD_VARIANT:305,JOB_DOWNLOAD_SCJYVALUE:306,JOB_DOWNLOAD_MARGIN_BALANCE:1e3,JOB_DOWNLOAD_MARGIN_RATE:1001,JOB_DOWNLOAD_MARGIN_BUY_BALANCE:1010,JOB_DOWNLOAD_MARGIN_BUY_AMOUNT:1011,JOB_DOWNLOAD_MARGIN_BUY_REPAY:1012,JOB_DOWNLOAD_MARGIN_BUY_NET:1013,JOB_DOWNLOAD_MARGIN_SELL_BALANCE:1020,JOB_DOWNLOAD_MARGIN_SELL_VOLUME:1021,JOB_DOWNLOAD_MARGIN_SELL_REPAY:1022,JOB_DOWNLOAD_MARGIN_SELL_NET:1023,JOB_DOWNLOAD_NEWS_ANALYSIS_NEGATIVE:2e3,JOB_DOWNLOAD_NEWS_ANALYSIS_RESEARCH:2001,JOB_DOWNLOAD_NEWS_ANALYSIS_INTERACT:2002,JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE:2003,JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE2:2004,JOB_DOWNLOAD_NEWS_ANALYSIS_TRUSTHOLDER:2005,JOB_DOWNLOAD_NEWS_ANALYSIS_BLOCKTRADING:2006,JOB_DOWNLOAD_NEWS_ANALYSIS_COMPANYNEWS:2007,JOB_DOWNLOAD_NEWS_ANALYSIS_TOPMANAGERS:2008,JOB_DOWNLOAD_NEWS_ANALYSIS_PLEDGE:2009,JOB_DOWNLOAD_HK_TO_SH:2050,JOB_DOWNLOAD_HK_TO_SZ:2051,JOB_DOWNLOAD_HK_TO_SH_SZ:2052,JOB_DOWNLOAD_HK_TO_SHSZ:2053,JOB_CUSTOM_FUNCTION_DATA:6e3,JOB_CUSTOM_VARIANT_DATA:6001,JOB_DOWNLOAD_SECTION_SF:2e4,JOB_DOWNLOAD_SECTION_F_01:20001,JOB_DOWNLOAD_SECTION_F_02:20002,JOB_DOWNLOAD_SECTION_F_03:20003,JOB_DOWNLOAD_SECTION_F_04:20004,JOB_DOWNLOAD_SECTION_F_05:20005,JOB_DOWNLOAD_SECTION_F_06:20006,JOB_DOWNLOAD_SECTION_F_07:20007,JOB_DOWNLOAD_SECTION_F_08:20008,JOB_DOWNLOAD_SECTION_F_09:20009,JOB_DOWNLOAD_SECTION_F_10:20010,JOB_DOWNLOAD_SECTION_F_11:20011,JOB_DOWNLOAD_SECTION_F_12:20012,JOB_DOWNLOAD_SECTION_F_13:20013,JOB_DOWNLOAD_SECTION_F_14:20014,JOB_DOWNLOAD_SECTION_F_15:20015,JOB_DOWNLOAD_SECTION_F_16:20016,JOB_DOWNLOAD_SECTION_F_17:20017,JOB_DOWNLOAD_SECTION_F_18:20018,JOB_DOWNLOAD_SECTION_F_19:20019,JOB_DOWNLOAD_SECTION_F_20:20020,JOB_DOWNLOAD_SECTION_F_21:20021,JOB_DOWNLOAD_SECTION_F_22:20022,JOB_DOWNLOAD_SECTION_F_23:20023,JOB_DOWNLOAD_SECTION_F_24:20024,JOB_DOWNLOAD_SECTION_F_25:20025,JOB_DOWNLOAD_SECTION_F_26:20026,JOB_DOWNLOAD_SECTION_F_27:20027,JOB_DOWNLOAD_SECTION_F_28:20028,JOB_DOWNLOAD_SECTION_F_29:20029,JOB_DOWNLOAD_SECTION_F_30:20030,JOB_DOWNLOAD_SECTION_F_31:20031,JOB_DOWNLOAD_SECTION_F_32:20032,JOB_DOWNLOAD_SECTION_F_33:20033,JOB_DOWNLOAD_SECTION_F_34:20034,JOB_DOWNLOAD_SECTION_F_35:20035,JOB_DOWNLOAD_SECTION_F_36:20036,JOB_DOWNLOAD_SECTION_F_37:20037,JOB_DOWNLOAD_SECTION_F_38:20038,JOB_DOWNLOAD_SECTION_F_39:20039,JOB_DOWNLOAD_CUSTOM_API_DATA:3e4,JOB_EXECUTE_INDEX:30010,JOB_RUN_SCRIPT:1e4,GetMarginJobID:function(t){var e=new _r.default([[1,yn.JOB_DOWNLOAD_MARGIN_BALANCE],[2,yn.JOB_DOWNLOAD_MARGIN_RATE],[3,yn.JOB_DOWNLOAD_MARGIN_BUY_BALANCE],[4,yn.JOB_DOWNLOAD_MARGIN_BUY_AMOUNT],[5,yn.JOB_DOWNLOAD_MARGIN_BUY_REPAY],[6,yn.JOB_DOWNLOAD_MARGIN_BUY_NET],[7,yn.JOB_DOWNLOAD_MARGIN_SELL_BALANCE],[8,yn.JOB_DOWNLOAD_MARGIN_SELL_VOLUME],[9,yn.JOB_DOWNLOAD_MARGIN_SELL_REPAY],[10,yn.JOB_DOWNLOAD_MARGIN_SELL_NET]]);return e.has(t)?e.get(t):null},GetNewsAnalysisID:function(t){var e=new _r.default([[1,yn.JOB_DOWNLOAD_NEWS_ANALYSIS_NEGATIVE],[2,yn.JOB_DOWNLOAD_NEWS_ANALYSIS_RESEARCH],[3,yn.JOB_DOWNLOAD_NEWS_ANALYSIS_INTERACT],[4,yn.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE],[5,yn.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE2],[6,yn.JOB_DOWNLOAD_NEWS_ANALYSIS_TRUSTHOLDER],[7,yn.JOB_DOWNLOAD_NEWS_ANALYSIS_BLOCKTRADING],[8,yn.JOB_DOWNLOAD_NEWS_ANALYSIS_COMPANYNEWS],[9,yn.JOB_DOWNLOAD_NEWS_ANALYSIS_TOPMANAGERS],[10,yn.JOB_DOWNLOAD_NEWS_ANALYSIS_PLEDGE]]);return e.has(t)?e.get(t):null},GetSectionFinanceID:function(t){var e=new _r.default([["流动资产",yn.JOB_DOWNLOAD_SECTION_F_01],["货币资金",yn.JOB_DOWNLOAD_SECTION_F_02],["存货",yn.JOB_DOWNLOAD_SECTION_F_03],["流动负债",yn.JOB_DOWNLOAD_SECTION_F_04],["非流动负债",yn.JOB_DOWNLOAD_SECTION_F_05],["三项费用",yn.JOB_DOWNLOAD_SECTION_F_06],["投资收益",yn.JOB_DOWNLOAD_SECTION_F_07],["归母净利润",yn.JOB_DOWNLOAD_SECTION_F_08],["扣非净利润",yn.JOB_DOWNLOAD_SECTION_F_09],["扣非每股收益",yn.JOB_DOWNLOAD_SECTION_F_10],["加权平均净资产收益",yn.JOB_DOWNLOAD_SECTION_F_11],["在建工程",yn.JOB_DOWNLOAD_SECTION_F_12],["累计折旧",yn.JOB_DOWNLOAD_SECTION_F_13],["少数股东利润",yn.JOB_DOWNLOAD_SECTION_F_14],["汇兑损益",yn.JOB_DOWNLOAD_SECTION_F_15],["坏账计提",yn.JOB_DOWNLOAD_SECTION_F_16],["固定资产",yn.JOB_DOWNLOAD_SECTION_F_17],["当期折旧",yn.JOB_DOWNLOAD_SECTION_F_18],["营业总收入",yn.JOB_DOWNLOAD_SECTION_F_19],["主营业务利润",yn.JOB_DOWNLOAD_SECTION_F_20],["营业利润",yn.JOB_DOWNLOAD_SECTION_F_21],["净利润",yn.JOB_DOWNLOAD_SECTION_F_22],["应收账款",yn.JOB_DOWNLOAD_SECTION_F_23],["财务费用",yn.JOB_DOWNLOAD_SECTION_F_24],["经营性现金流",yn.JOB_DOWNLOAD_SECTION_F_25],["资产总计",yn.JOB_DOWNLOAD_SECTION_F_26],["负债总计",yn.JOB_DOWNLOAD_SECTION_F_27],["所有者权益总计",yn.JOB_DOWNLOAD_SECTION_F_28],["毛利率",yn.JOB_DOWNLOAD_SECTION_F_29],["每股资本公积金",yn.JOB_DOWNLOAD_SECTION_F_30],["每股未分配利润",yn.JOB_DOWNLOAD_SECTION_F_31],["每股收益",yn.JOB_DOWNLOAD_SECTION_F_32],["每股净资产",yn.JOB_DOWNLOAD_SECTION_F_33],["每股经营性现金流",yn.JOB_DOWNLOAD_SECTION_F_34],["扣非净利润涨幅",yn.JOB_DOWNLOAD_SECTION_F_35],["扣非净利润涨速",yn.JOB_DOWNLOAD_SECTION_F_36],["净利润涨幅",yn.JOB_DOWNLOAD_SECTION_F_37],["资产负债率",yn.JOB_DOWNLOAD_SECTION_F_38],["利润同比",yn.JOB_DOWNLOAD_SECTION_F_39]]);return e.has(t)?e.get(t):null},GetSectionReportPeriod:function(t,e){return t>=2e3&&e>=1&&e<=4?{Year:t,Quarter:e}:null}};ji.Tokenize=function(t){Fr.Complier.Log("[JSComplier.Tokenize]",t);var e=new Yi(t),a=[];try{for(;;){var i=e.GetNextToken();if(!i)break;a.push(i)}}catch(t){}return a},ji.Parse=function(t){Fr.Complier.Log("[JSComplier.Parse]",t);var e=new Vi(t);return e.Initialize(),e.ParseScript()},ji.Execute=function(t,e,a){!function(){try{e.Self&&(e.Self.Status=1),Fr.Complier.Log("[JSComplier.Execute]",t,e),Fr.Complier.Log("[JSComplier.Execute] parser .....");var i=new Vi(t);i.Initialize();var r=i.ParseScript(),n=r;Fr.Complier.Log("[JSComplier.Execute] parser finish.",n),e.Self&&(e.Self.Status=2),Fr.Complier.Log("[JSComplier.Execute] execute .....");var s=new Ui(n,e);s.ErrorCallback=a,s.JobList=i.Node.GetDataJobList(),"ScriptIndexConsole"==e.ClassName&&s.JobList.unshift({ID:yn.JOB_DOWNLOAD_SYMBOL_DATA}),s.JobList.push({ID:yn.JOB_RUN_SCRIPT}),e.Self&&(e.Self.Status=3);s.Execute()}catch(t){Fr.Complier.Log(t),a&&a(t,e.CallbackParam),e.Self&&(e.Self.Status=0)}}(),Fr.Complier.Log("[JSComplier.Execute] async execute.")},ji.Explain=function(t,e,a){!function(){try{Fr.Complier.Log("[JSComplier.Explain]",t,e),Fr.Complier.Log("[JSComplier.Explain] parser .....");var i=new Vi(t);i.Initialize();var r=i.ParseScript(),n=r;Fr.Complier.Log("[JSComplier.Explain] parser finish.",n),Fr.Complier.Log("[JSComplier.Explain] explain .....");var s=new Ki(n,e);s.ErrorCallback=a,s.JobList=i.Node.GetDataJobList(),s.JobList.push({ID:yn.JOB_RUN_SCRIPT});s.Run()}catch(t){Fr.Complier.Log(t),a&&a(t,e.CallbackParam)}}(),Fr.Complier.Log("[JSComplier.Explain] async explain.")},ji.SetDomain=function(t,e){t&&(mn.Domain=t),e&&(mn.CacheDomain=e)},ji.AddIcon=function(t){mn.CustomDrawIcon.Data.set(t.ID,t)},ji.AddFunction=function(t){if(t&&t.Name){var e=t.Name.toUpperCase();mn.CustomFunction.Data.set(e,t)}},ji.AddVariant=function(t){if(t&&t.Name){var e=t.Name.toUpperCase();mn.CustomVariant.Data.set(e,t)}},ji.ColorVarToRGB=function(t){var e=new _r.default([["COLORBLACK","rgb(0,0,0)"],["COLORBLUE","rgb(18,95,216)"],["COLORGREEN","rgb(25,158,0)"],["COLORCYAN","rgb(0,255,198)"],["COLORRED","rgb(238,21,21)"],["COLORMAGENTA","rgb(255,0,222)"],["COLORBROWN","rgb(149,94,15)"],["COLORLIGRAY","rgb(218,218,218)"],["COLORGRAY","rgb(133,133,133)"],["COLORLIBLUE","rgb(94,204,255)"],["COLORLIGREEN","rgb(183,255,190)"],["COLORLICYAN","rgb(154,255,242)"],["COLORLIRED","rgb(255,172,172)"],["COLORLIMAGENTA","rgb(255,145,241)"],["COLORWHITE","rgb(255,255,255)"],["COLORYELLOW","rgb(255,198,0)"]]);if(e.has(t))return e.get(t);if(0!=t.indexOf("COLOR"))return null;var a=t.substr(5);if(6!=a.length)return null;var i=a.substr(0,2),r=parseInt(i,16);i=a.substr(2,2);var n=parseInt(i,16);return i=a.substr(4,2),"rgb("+parseInt(i,16)+","+n+","+r+")"};var In={KLINE_ID:0,MINUTE_ID:2,HISTORY_MINUTE_ID:3,MULTIDAY_MINUTE_ID:4};Qi.SetDomain=function(t,e){ji.SetDomain(t,e)};var xn={BGColor:"rgb(0,0,0)",TooltipBGColor:"rgb(255, 255, 255)",TooltipAlpha:.92,SelectRectBGColor:"rgba(1,130,212,0.06)",UpBarColor:"rgb(238,21,21)",DownBarColor:"rgb(25,158,0)",UnchagneBarColor:"rgb(228,228,228)",EmptyBarBGColor:"rgb(0,0,0)",Minute:{VolBarColor:null,PriceColor:"rgb(25,180,231)",AreaPriceColor:"rgba(63,158,255,.3)",AvPriceColor:"rgb(255,236,0)",PositionColor:"rgb(218,165,32)",VolTitleColor:"rgb(190,190,190)",Before:{BGColor:"rgba(105,105,105,0.5)",AvPriceColor:"rgb(248,248,255)"}},DefaultTextColor:"rgb(101,104,112)",DefaultTextFont:14*c()+"px 微软雅黑",TitleFont:13*c()+"px 微软雅黑",IndexTitleColor:"rgb(101,104,112)",UpTextColor:"rgb(238,21,21)",DownTextColor:"rgb(25,158,0)",UnchagneTextColor:"rgb(101,104,112)",CloseLineColor:"rgb(178,34,34)",Title:{TradeIndexColor:"rgb(105,105,105)",ColorIndexColor:"rgb(112,128,144)",VolColor:"rgb(101,104,112)",AmountColor:"rgb(101,104,112)",DateTimeColor:"rgb(101,104,112)",SettingColor:"rgb(101,104,112)",NameColor:"rgb(101,104,112)",TurnoverRateColor:"rgb(101,104,112)",PositionColor:"rgb(101,104,112)"},FrameBorderPen:"rgba(236,236,236,0.13)",FrameSplitPen:"rgba(236,236,236,0.13)",FrameSplitTextColor:"rgb(101,104,112)",FrameSplitTextFont:12*c()+"px 微软雅黑",FrameTitleBGColor:"rgb(0,0,0)",OverlayIndexTitleBGColor:"rgba(0,0,0,0.7)",Frame:{XBottomOffset:1*c(),PercentageText:{PriceColor:"rgb(101,104,112)",PercentageColor:"rgb(101,104,112)",SplitColor:"rgb(101,104,112)",Font:14*c()+"px 微软雅黑"}},FrameLatestPrice:{TextColor:"rgb(255,255,255)",UpBarColor:"rgb(238,21,21)",DownBarColor:"rgb(25,158,0)",UnchagneBarColor:"rgb(190,190,190)",BGAlpha:.6},CorssCursorBGColor:"rgb(43,54,69)",CorssCursorTextColor:"rgb(255,255,255)",CorssCursorTextFont:12*c()+"px 微软雅黑",CorssCursorHPenColor:"rgb(130,130,130)",CorssCursorVPenColor:"rgb(130,130,130)",CorssCursor:{RightButton:{BGColor:"rgb(43,54,69)",PenColor:"rgb(255,255,255)",Icon:{Text:"",Color:"rgb(255,255,255)",Family:"iconfont",Size:18}}},OrderFlow:{UpColor:{BG:"rgb(223,191,180)",Border:"rgb(196,84,86)"},DownColor:{BG:"rgb(176,212,184)",Border:"rgb(66,94,74)"},UnchagneColor:{BG:"rgb(216,221,177)",Border:"rgb(209,172,129)"},Text:{Color:"rgb(248,248,255)",Family:"Arial",FontMaxSize:16,MaxValue:"8888"},Line:{UpDownColor:"rgb(220,220,220)",MiddleColor:"rgb(211,211,211)"}},KLine:{MaxMin:{Font:12*c()+"px 微软雅黑",Color:"rgb(255,250,240)",RightArrow:"→",LeftArrow:"←",HighYOffset:0,LowYOffset:0},Info:{Investor:{ApiUrl:"/API/NewsInteract",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#1c65db"}},Announcement:{ApiUrl:"/API/ReportList",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#f5a521"},IconFont2:{Family:"iconfont",Text:"",HScreenText:"",Color:"#ed7520"}},Pforecast:{ApiUrl:"/API/StockHistoryDay",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#986cad"}},Research:{ApiUrl:"/API/InvestorRelationsList",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#19b1b7"}},BlockTrading:{ApiUrl:"/API/StockHistoryDay",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#f39f7c"}},TradeDetail:{ApiUrl:"/API/StockHistoryDay",IconFont:{Family:"iconfont",Text:"",HScreenText:"",Color:"#b22626"}}},NumIcon:{Color:"rgb(251,80,80)",Family:"iconfont",Text:["","","","","","","","","","","","","","","","","","","","",""]},TradeIcon:{Family:"iconfont",Buy:{Color:"rgb(255,15,4)",Text:"",HScreenText:""},Sell:{Color:"rgb(64,122,22)",Text:"",HScreenText:""}}},Index:{LineColor:["rgb(255,189,09)","rgb(22,198,255)","rgb(174,35,161)","rgb(236,105,65)","rgb(68,114,196)","rgb(229,0,79)","rgb(0,128,255)","rgb(252,96,154)","rgb(42,230,215)","rgb(24,71,178)"],NotSupport:{Font:"14px 微软雅黑",TextColor:"rgb(52,52,52)"}},ColorArray:["rgb(255,174,0)","rgb(25,199,255)","rgb(175,95,162)","rgb(236,105,65)","rgb(68,114,196)","rgb(229,0,79)","rgb(0,128,255)","rgb(252,96,154)","rgb(42,230,215)","rgb(24,71,178)"],DrawPicture:{LineColor:["rgb(255,255,0)"],PointColor:["rgb(228,228,228)","rgb(192,192,192)"]},TooltipPaint:{BGColor:"rgba(20,20,20,0.8)",BorderColor:"rgb(210,210,210)",TitleColor:"rgb(210,210,210)",TitleFont:13*c()+"px 微软雅黑",DateTimeColor:"rgb(210,210,210)",VolColor:"rgb(210,210,210)",AmountColor:"rgb(210,210,210)"},MinuteInfo:{TextColor:"rgb(84,143,255)",Font:14*c()+"px 微软雅黑",PointColor:"rgb(38,113,254)",LineColor:"rgb(120,167,255)",TextBGColor:"rgba(255,255,255,1)"},StockChip:{InfoColor:"rgb(255,255,255)",DayInfoColor:"rgb(0,0,0)"},DepthChart:{BidColor:{Line:"rgb(82,176,123)",Area:"rgba(82,176,123,0.5)"},AskColor:{Line:"rgb(207,76,89)",Area:"rgba(207,76,89, 0.5)"},LineWidth:4},DepthCorss:{BidColor:{Line:"rgb(82,176,123)"},AskColor:{Line:"rgb(207,76,89)"},LineWidth:2,LineDash:[3,3],Tooltip:{BGColor:"rgba(54,54,54, 0.8)",TextColor:"rgb(203,215,224)",Border:{Top:5,Left:20,Bottom:5,Center:5},Font:14*c()+"px 微软雅黑",LineHeight:16}},RectSelect:{LineColor:"rgb(115,83,64)",LineWidth:1*c(),LineDotted:[3,3],AreaColor:"rgba(26,13,7,0.5)"}},Ln={BLACK_ID:1};nr.GetStyleConfig=function(t){switch(t){case Ln.BLACK_ID:return xn;default:return null}},e.default=(sr={jsChartInit:h.Init,jsChartStyle:h.SetStyle,JSChart:h,ChartData:Z,HistoryData:W,MARKET_SUFFIX_NAME:an,IFrameSplitOperator:he,FrameSplitKLinePriceY:le,FrameSplitKLineX:ce,JSKLineInfoMap:ti,JSCHART_EVENT_ID:Nr,JSCHART_OPERATOR_ID:Or,JSAlgorithm:Gi,JSComplier:ji,JSIndexScript:o,GetDevicePixelRatio:c},(0,hr.default)(sr,"GetDevicePixelRatio",c),(0,hr.default)(sr,"ScriptIndexConsole",Qi),(0,hr.default)(sr,"STYLE_TYPE_ID",Ln),(0,hr.default)(sr,"HQChartStyle",nr),(0,hr.default)(sr,"JSConsole",Fr),(0,hr.default)(sr,"KLineTooltipPaint",Zt),(0,hr.default)(sr,"MinuteTooltipPaint",Qt),(0,hr.default)(sr,"ChartDrawTwoPointDemo",Da),(0,hr.default)(sr,"ChartDrawThreePointDemo",va),(0,hr.default)(sr,"CoordinateInfo",I),sr)},function(t,e,a){t.exports={default:a(424),__esModule:!0}},function(t,e,a){a(425);var i=a(6).Object;t.exports=function(t,e,a){return i.defineProperty(t,e,a)}},function(t,e,a){var i=a(9);i(i.S+i.F*!a(13),"Object",{defineProperty:a(15).f})},function(t,e,a){t.exports={default:a(427),__esModule:!0}},function(t,e,a){a(63),a(31),a(50),a(428),a(432),a(433),t.exports=a(6).Promise},function(t,e,a){"use strict";var i,r,n,s,o=a(45),h=a(10),l=a(20),u=a(114),c=a(9),d=a(17),f=a(42),m=a(115),C=a(51),p=a(154),D=a(155).set,v=a(430)(),g=a(117),S=a(156),T=a(431),y=a(157),I=h.TypeError,x=h.process,L=x&&x.versions,M=L&&L.v8||"",_=h.Promise,b="process"==u(x),w=function(){},F=r=g.f,E=!!function(){try{var t=_.resolve(1),e=(t.constructor={})[a(11)("species")]=function(t){t(w,w)};return(b||"function"==typeof PromiseRejectionEvent)&&t.then(w)instanceof e&&0!==M.indexOf("6.6")&&-1===T.indexOf("Chrome/66")}catch(t){}}(),A=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},N=function(t,e){if(!t._n){t._n=!0;var a=t._c;v(function(){for(var i=t._v,r=1==t._s,n=0;a.length>n;)!function(e){var a,n,s,o=r?e.ok:e.fail,h=e.resolve,l=e.reject,u=e.domain;try{o?(r||(2==t._h&&R(t),t._h=1),!0===o?a=i:(u&&u.enter(),a=o(i),u&&(u.exit(),s=!0)),a===e.promise?l(I("Promise-chain cycle")):(n=A(a))?n.call(a,h,l):h(a)):l(i)}catch(t){u&&!s&&u.exit(),l(t)}}(a[n++]);t._c=[],t._n=!1,e&&!t._h&&O(t)})}},O=function(t){D.call(h,function(){var e,a,i,r=t._v,n=P(t);if(n&&(e=S(function(){b?x.emit("unhandledRejection",r,t):(a=h.onunhandledrejection)?a({promise:t,reason:r}):(i=h.console)&&i.error&&i.error("Unhandled promise rejection",r)}),t._h=b||P(t)?2:1),t._a=void 0,n&&e.e)throw e.v})},P=function(t){return 1!==t._h&&0===(t._a||t._c).length},R=function(t){D.call(h,function(){var e;b?x.emit("rejectionHandled",t):(e=h.onrejectionhandled)&&e({promise:t,reason:t._v})})},k=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),N(e,!0))},B=function(t){var e,a=this;if(!a._d){a._d=!0,a=a._w||a;try{if(a===t)throw I("Promise can't be resolved itself");(e=A(t))?v(function(){var i={_w:a,_d:!1};try{e.call(t,l(B,i,1),l(k,i,1))}catch(t){k.call(i,t)}}):(a._v=t,a._s=1,N(a,!1))}catch(t){k.call({_w:a,_d:!1},t)}}};E||(_=function(t){m(this,_,"Promise","_h"),f(t),i.call(this);try{t(l(B,this,1),l(k,this,1))}catch(t){k.call(this,t)}},i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=a(118)(_.prototype,{then:function(t,e){var a=F(p(this,_));return a.ok="function"!=typeof t||t,a.fail="function"==typeof e&&e,a.domain=b?x.domain:void 0,this._c.push(a),this._a&&this._a.push(a),this._s&&N(this,!1),a.promise},catch:function(t){return this.then(void 0,t)}}),n=function(){var t=new i;this.promise=t,this.resolve=l(B,t,1),this.reject=l(k,t,1)},g.f=F=function(t){return t===_||t===s?new n(t):r(t)}),c(c.G+c.W+c.F*!E,{Promise:_}),a(49)(_,"Promise"),a(158)("Promise"),s=a(6).Promise,c(c.S+c.F*!E,"Promise",{reject:function(t){var e=F(this);return(0,e.reject)(t),e.promise}}),c(c.S+c.F*(o||!E),"Promise",{resolve:function(t){return y(o&&this===s?_:this,t)}}),c(c.S+c.F*!(E&&a(159)(function(t){_.all(t).catch(w)})),"Promise",{all:function(t){var e=this,a=F(e),i=a.resolve,r=a.reject,n=S(function(){var a=[],n=0,s=1;C(t,!1,function(t){var o=n++,h=!1;a.push(void 0),s++,e.resolve(t).then(function(t){h||(h=!0,a[o]=t,--s||i(a))},r)}),--s||i(a)});return n.e&&r(n.v),a.promise},race:function(t){var e=this,a=F(e),i=a.reject,r=S(function(){C(t,!1,function(t){e.resolve(t).then(a.resolve,i)})});return r.e&&i(r.v),a.promise}})},function(t,e){t.exports=function(t,e,a){var i=void 0===a;switch(e.length){case 0:return i?t():t.call(a);case 1:return i?t(e[0]):t.call(a,e[0]);case 2:return i?t(e[0],e[1]):t.call(a,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(a,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(a,e[0],e[1],e[2],e[3])}return t.apply(a,e)}},function(t,e,a){var i=a(10),r=a(155).set,n=i.MutationObserver||i.WebKitMutationObserver,s=i.process,o=i.Promise,h="process"==a(44)(s);t.exports=function(){var t,e,a,l=function(){var i,r;for(h&&(i=s.domain)&&i.exit();t;){r=t.fn,t=t.next;try{r()}catch(i){throw t?a():e=void 0,i}}e=void 0,i&&i.enter()};if(h)a=function(){s.nextTick(l)};else if(!n||i.navigator&&i.navigator.standalone)if(o&&o.resolve){var u=o.resolve(void 0);a=function(){u.then(l)}}else a=function(){r.call(i,l)};else{var c=!0,d=document.createTextNode("");new n(l).observe(d,{characterData:!0}),a=function(){d.data=c=!c}}return function(i){var r={fn:i,next:void 0};e&&(e.next=r),t||(t=r,a()),e=r}}},function(t,e,a){var i=a(10),r=i.navigator;t.exports=r&&r.userAgent||""},function(t,e,a){"use strict";var i=a(9),r=a(6),n=a(10),s=a(154),o=a(157);i(i.P+i.R,"Promise",{finally:function(t){var e=s(this,r.Promise||n.Promise),a="function"==typeof t;return this.then(a?function(a){return o(e,t()).then(function(){return a})}:t,a?function(a){return o(e,t()).then(function(){throw a})}:t)}})},function(t,e,a){"use strict";var i=a(9),r=a(117),n=a(156);i(i.S,"Promise",{try:function(t){var e=r.f(this),a=n(t);return(a.e?e.reject:e.resolve)(a.v),e.promise}})},function(t,e,a){t.exports={default:a(435),__esModule:!0}},function(t,e,a){a(436),t.exports=a(6).Math.log10},function(t,e,a){var i=a(9);i(i.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,e,a){t.exports={default:a(438),__esModule:!0}},function(t,e,a){a(439);var i=a(6).Object;t.exports=function(t,e){return i.defineProperties(t,e)}},function(t,e,a){var i=a(9);i(i.S+i.F*!a(13),"Object",{defineProperties:a(137)})},function(t,e,a){t.exports={default:a(441),__esModule:!0}},function(t,e,a){a(442);var i=a(6).Object;t.exports=function(t,e){return i.create(t,e)}},function(t,e,a){var i=a(9);i(i.S,"Object",{create:a(62)})},function(t,e,a){t.exports={default:a(444),__esModule:!0}},function(t,e,a){a(31),a(445),t.exports=a(6).Array.from},function(t,e,a){"use strict";var i=a(20),r=a(9),n=a(46),s=a(152),o=a(153),h=a(59),l=a(446),u=a(116);r(r.S+r.F*!a(159)(function(t){Array.from(t)}),"Array",{from:function(t){var e,a,r,c,d=n(t),f="function"==typeof this?this:Array,m=arguments.length,C=m>1?arguments[1]:void 0,p=void 0!==C,D=0,v=u(d);if(p&&(C=i(C,m>2?arguments[2]:void 0,2)),void 0==v||f==Array&&o(v))for(e=h(d.length),a=new f(e);e>D;D++)l(a,D,p?C(d[D],D):d[D]);else for(c=v.call(d),a=new f;!(r=c.next()).done;D++)l(a,D,p?s(c,C,[r.value,D],!0):r.value);return a.length=D,a}})},function(t,e,a){"use strict";var i=a(15),r=a(43);t.exports=function(t,e,a){e in t?i.f(t,e,r(0,a)):t[e]=a}},function(t,e,a){a(50),a(31),t.exports=a(448)},function(t,e,a){var i=a(19),r=a(116);t.exports=a(6).getIterator=function(t){var e=r(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return i(e.call(t))}},function(t,e,a){a(63),a(31),a(50),a(450),a(454),a(456),a(457),t.exports=a(6).Set},function(t,e,a){"use strict";var i=a(162),r=a(119);t.exports=a(163)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(r(this,"Set"),t=0===t?0:t,t)}},i)},function(t,e,a){var i=a(20),r=a(102),n=a(46),s=a(59),o=a(452);t.exports=function(t,e){var a=1==t,h=2==t,l=3==t,u=4==t,c=6==t,d=5==t||c,f=e||o;return function(e,o,m){for(var C,p,D=n(e),v=r(D),g=i(o,m,3),S=s(v.length),T=0,y=a?f(e,S):h?f(e,0):void 0;S>T;T++)if((d||T in v)&&(C=v[T],p=g(C,T,D),t))if(a)y[T]=p;else if(p)switch(t){case 3:return!0;case 5:return C;case 6:return T;case 2:y.push(C)}else if(u)return!1;return c?-1:l||u?u:y}}},function(t,e,a){var i=a(453);t.exports=function(t,e){return new(i(t))(e)}},function(t,e,a){var i=a(17),r=a(140),n=a(11)("species");t.exports=function(t){var e;return r(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!r(e.prototype)||(e=void 0),i(e)&&null===(e=e[n])&&(e=void 0)),void 0===e?Array:e}},function(t,e,a){var i=a(9);i(i.P+i.R,"Set",{toJSON:a(164)("Set")})},function(t,e,a){var i=a(51);t.exports=function(t,e){var a=[];return i(t,!1,a.push,a,e),a}},function(t,e,a){a(165)("Set")},function(t,e,a){a(166)("Set")},function(t,e,a){t.exports={default:a(459),__esModule:!0}},function(t,e,a){var i=a(6),r=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},function(t,e,a){a(63),a(31),a(50),a(461),a(462),a(463),a(464),t.exports=a(6).Map},function(t,e,a){"use strict";var i=a(162),r=a(119);t.exports=a(163)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=i.getEntry(r(this,"Map"),t);return e&&e.v},set:function(t,e){return i.def(r(this,"Map"),0===t?0:t,e)}},i,!0)},function(t,e,a){var i=a(9);i(i.P+i.R,"Map",{toJSON:a(164)("Map")})},function(t,e,a){a(165)("Map")},function(t,e,a){a(166)("Map")},function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(){this.Domain="https://opensource.zealink.com",this.CacheDomain="https://opensourcecache.zealink.com"}function n(){this.Stop,this.Down,this.Up,this.Unchanged,this.UpStock={Symbol:null,Name:null},this.DownStock={Symbol:null,Name:null}}function s(){this.Good,this.GoodIncrease={Day1:null,Week1:null,Week4:null}}function o(t,e,a){this.arySymbol=new Array,this.SortField=t,this.Order=e,this.TagID=new H.default([a])}function h(){this.ROE,this.Date,this.PerSEarning,this.EPS,this.PerNetAsset,this.NProfit,this.NProfitIncrease,this.NnetProfit,this.NnProfitIncrease,this.NnProfitSpeed,this.Benford,this.SetData=function(t){isNaN(t.roe)||(this.ROE=t.roe),isNaN(t.finance.date)||(this.Date=t.finance.date),isNaN(t.finance.persearning)||(this.PerSEarning=t.finance.persearning),isNaN(t.finance.eps)||(this.EPS=t.finance.eps),isNaN(t.finance.pernetasset)||(this.PerNetAsset=t.finance.pernetasset),isNaN(t.finance.nprofit)||(this.NProfit=t.finance.nprofit),isNaN(t.finance.nprofitincrease)||(this.NProfitIncrease=t.finance.nprofitincrease),isNaN(t.finance.nnetprofit)||(this.NnetProfit=t.finance.nnetprofit),isNaN(t.finance.nnprofitincrease)||(this.NnProfitIncrease=t.finance.nnprofitincrease),isNaN(t.finance.nnprofitspeed)||(this.NnProfitSpeed=t.finance.nnprofitspeed),isNaN(t.finance.benford)||(this.Benford=t.finance.benford)}}function l(){this.Date,this.A,this.Total,this.ARate,this.SetData=function(t){isNaN(t.capital.date)||(this.Date=t.capital.date),isNaN(t.capital.a)||(this.A=t.capital.a),isNaN(t.capital.total)||(this.Total=t.capital.total),isNaN(t.capital.arate)||(this.ARate=t.capital.arate)}}function u(){this.SuperIn,this.SuperOut,this.BigIn,this.BigOut,this.MidIn,this.MidOut,this.SmallIn,this.SmallOut,this.MainIn,this.MainOut,this.MainNetIn,this.SetData=function(t){this.SuperIn=t.superin,this.SuperOut=t.superout,this.BigIn=t.bigin,this.BigOut=t.bigout,this.MidIn=t.midin,this.MidOut=t.midout,this.SmallIn=t.smallin,this.SmallOut=t.smallout,this.MainIn=t.mainin,this.MainOut=t.mainout,this.MainNetIn=t.mainnetin}}function c(){this.SuperIn,this.SuperOut,this.BigIn,this.BigOut,this.MidIn,this.MidOut,this.SmallIn,this.SmallOut,this.MainIn,this.MainOut,this.MainNetIn,this.MainNetInRatio,this.SetData=function(t){this.SuperIn=t.superin,this.SuperOut=t.superout,this.BigIn=t.bigin,this.BigOut=t.bigout,this.MidIn=t.midin,this.MidOut=t.midout,this.SmallIn=t.smallin,this.SmallOut=t.smallout,this.MainIn=t.mainin,this.MainOut=t.mainout,this.MainNetIn=t.mainnetin,this.MainNetInRatio=t.mainnetinratio}}function d(){this.DDX,this.DDY,this.DDZ,this.SetData=function(t){this.DDX=t.ddx,this.DDY=t.ddy,this.DDZ=t.ddz}}function f(){this.Name,this.Business,this.Vol,this.Price,this.ReleaseDate,this.Competence,this.SetData=function(t){t.company&&(this.Name=t.company.name,this.Business=t.company.business,this.Vol=t.company.vol,this.Price=t.company.price,this.ReleaseDate=t.company.releasedate,this.Competence=t.company.corecompetence)}}function m(){this.Industry,this.Region,this.Concept,this.SetData=function(t){this.SetIndustryData(t),this.SetRegionData(t),this.SetConceptData(t)},this.SetIndustryData=function(t){if(t.industry){this.Industry=[];for(var e in t.industry){var a=t.industry[e];this.Industry.push({Name:a.name,Symbol:a.symbol})}}},this.SetRegionData=function(t){if(t.region){this.Region=[];for(var e in t.region){var a=t.region[e];this.Region.push({Name:a.name,Symbol:a.symbol})}}},this.SetConceptData=function(t){if(t.concept){this.Concept=[];for(var e in t.concept){var a=t.concept[e];this.Concept.push({Name:a.name,Symbol:a.symbol})}}}}function C(){this.IsMargin=!1,this.IsHK=!1,this.IsSHHK=!1,this.IsSZHK=!1,this.STType=0,this.HK,this.SetData=function(t){t.events&&(isNaN(t.events.margin)||(this.IsMargin=1==t.events.margin),isNaN(t.events.hk)||(this.IsHK=1==t.events.hk),isNaN(t.events.shhk)||(this.IsSHHK=1==t.events.shhk),isNaN(t.events.szhk)||(this.IsSZHK=1==t.events.szhk),isNaN(t.events.st)||(this.STType=t.events.st),this.IsHK&&t.events.hksymbol&&t.events.hkname&&(this.HK={Symbol:t.events.hksymbol,Name:t.events.hkname}))}}function p(t){var e=t.toUpperCase();if(e.indexOf(".SH")>0){if(e=e.replace(".SH",""),"0"==e.charAt(0)&&parseInt(e)<=3e3)return!0}else if(e.indexOf(".SZ")>0){if(e=e.replace(".SZ",""),"3"==e.charAt(0)&&"9"==e.charAt(1))return!0}else if(e.indexOf(".CI")>0)return!0;return!1}function D(t){this.Symbol=t,this.Name,this.Open,this.Price,this.High,this.Low,this.YClose,this.Vol,this.Amount,this.Date,this.Time,this.ExchangeRate,this.Amplitude,this.VolRatio,this.Increase,this.MaxPrice,this.MinPrice,this.RFPrice,this.IndexTop,this.Week,this.MinuteAmplitude={},this.RiseFallSpeed={},this.MAmount={},this.GetBaseData=function(t,e){switch(this.BaseDataTagID.add(t),e){case X.SYMBOL:return this.Symbol;case X.NAME:return this.Name;case X.OPEN:return this.Open;case X.PRICE:return this.Price;case X.YCLOSE:return this.YClose;case X.HIGH:return this.High;case X.LOW:return this.Low;case X.VOL:return this.Vol;case X.AMOUNT:return this.Amount;case X.DATE:return this.Date;case X.TIME:return this.Time;case X.INCREASE:return this.Increase;case X.EXCHANGE_RATE:return this.ExchangeRate;case X.AMPLITUDE:return this.Amplitude;case X.MAX_PRICE:return this.MaxPrice;case X.MIN_PRICE:return this.MinPrice;case X.RISE_FALL_PRICE:return this.RFPrice;case X.VOLRATIO:return this.VolRatio;case X.INDEXTOP:return this.IndexTop;case X.WEEK:return this.Week}},this.Heat,this.GetHeatData=function(t){return this.HeatTagID.add(t),this.Heat},this.Sort=new B.default,this.GetSortData=function(t,e,a){var i=e.toString()+"-"+a.toString();if(!this.Sort.has(i)){var r=new o(e,a,t);return this.Sort.set(i,r),r}var r=this.Sort.get(i);return r.TagID.add(t),r},this.Buy5,this.GetBuy5=function(t){return this.BuySellTagID.add(t),this.Buy5},this.Sell5,this.GetSell5=function(t){return this.BuySellTagID.add(t),this.Sell5},this.Deal,this.GetDeal=function(t){return this.DealTagID.add(t),this.Deal},this.MarketValue,this.FlowMarketValue,this.Bookrate,this.Bookdiffer,this.PE,this.PE2,this.PE3,this.PB,this.GetDerivative=function(t,e){switch(this.DerivativeTagID.add(t),e){case X.MARKET_VALUE:return this.MarketValue;case X.FLOW_MARKET_VALUE:return this.FlowMarketValue;case X.BOOK_RATE:return this.Bookrate;case X.BOOK_DIFFER:return this.Bookdiffer;case X.PE:return this.PE;case X.PE2:return this.PE2;case X.PE3:return this.PE3;case X.PB:return this.PB}},this.Finance,this.GetFinance=function(t,e){if(!this.Finance)return this.FinanceTagID.add(t),null;switch(e){case X.ROE:return this.Finance.ROE;case X.FINANCE_DATE:return this.Finance.Date;case X.FINANCE_PERSEARNING:return this.Finance.PerSEarning;case X.FINANCE_PERNETASSET:return this.Finance.PerNetAsset;case X.FINANCE_NPROFIT:return this.Finance.NProfit;case X.FINANCE_NPROFITINCREASE:return this.Finance.NProfitIncrease;case X.FINANCE_NNETPROFIT:return this.Finance.NnetProfit;case X.FINANCE_NNPROFITINCREASE:return this.Finance.NnProfitIncrease;case X.FINANCE_NNPROFITSPEED:return this.Finance.NnProfitSpeed;case X.FINANCE_EPS:return this.Finance.EPS;case X.FINANCE_BENFORD:return this.Finance.Benford}},this.Capital,this.GetCapital=function(t,e){if(!this.Capital)return this.CapitalTagID.add(t),null;switch(e){case X.CAPITAL_TOTAL:return this.Capital.Total;case X.CAPITAL_A:return this.Capital.A;case X.CAPTIAL_ARATE:return this.Capital.ARate}},this.CapitalFlowDay,this.CapitalFlowDay3,this.CapitalFlowDay5,this.CapitalFlowDay10,this.GetCapitalFlowDay=function(t,e){var a=null;switch(e){case X.CAPITAL_FLOW_DAY:this.CapitalFlowDayID.add(t),this.CapitalFlowDay&&(a=this.CapitalFlowDay);break;case X.CAPITAL_FLOW_DAY3:this.CapitalFlowDay3ID.add(t),this.CapitalFlowDay3&&(a=this.CapitalFlowDay3);break;case X.CAPITAL_FLOW_DAY5:this.CapitalFlowDay5ID.add(t),this.CapitalFlowDay5&&(a=this.CapitalFlowDay5);break;case X.CAPITAL_FLOW_DAY10:this.CapitalFlowDay10ID.add(t),this.CapitalFlowDay10&&(a=this.CapitalFlowDay10)}return a},this.DDE,this.DDE3,this.DDE5,this.DDE10,this.GetDDE=function(t,e){var a=null;switch(e){case X.DDE:this.DDEID.add(t),this.DDE&&(a=this.DDE);break;case X.DDE3:this.DDE3ID.add(t),this.DDE3&&(a=this.DDE3);break;case X.DDE5:this.DDE5ID.add(t),this.DDE5&&(a=this.DDE5);break;case X.DDE10:this.DDE10ID.add(t),this.DDE10&&(a=this.DDE10)}return a},this.Event,this.GetEvent=function(t,e){return this.Event?this.Event:(this.EventTagID.add(t),null)},this.Company,this.GetCompany=function(t,e){if(!this.Company)return this.CompanyTagID.add(t),null;switch(e){case X.COMPANY_NAME:return this.Company.Name;case X.COMPANY_BUSINESS:return this.Company.Business;case X.COMPANY_VOL:return this.Company.Vol;case X.COMPANY_PRICE:return this.Company.Price;case X.COMPANY_RELEASEDATE:return this.Company.ReleaseDate;case X.COMPANY_COMPETENCE:return this.Company.Competence}},this.Plate,this.GetPlate=function(t,e){if(!this.Plate)return this.PlateTagID.add(t),null;switch(e){case X.PLATE_INDUSTRY:return this.Plate.Industry;case X.PLATE_CONCEPT:return this.Plate.Concept;case X.PLATE_REGION:return this.Plate.Region}},this.TagID=new H.default,this.BaseDataTagID=new H.default,this.HeatTagID=new H.default,this.BuySellTagID=new H.default,this.DealTagID=new H.default,this.DerivativeTagID=new H.default,this.FinanceTagID=new H.default,this.CapitalTagID=new H.default,this.CapitalFlowDayID=new H.default,this.CapitalFlowDay3ID=new H.default,this.CapitalFlowDay5ID=new H.default,this.CapitalFlowDay10ID=new H.default,this.DDEID=new H.default,this.DDE3ID=new H.default,this.DDE5ID=new H.default,this.DDE10ID=new H.default,this.EventTagID=new H.default,this.CompanyTagID=new H.default,this.PlateTagID=new H.default,this.AttachTagID=function(t){this.TagID.add(t)},this.ClearTagID=function(){this.TagID.clear(),this.BaseDataTagID.clear(),this.HeatTagID.clear(),this.BuySellTagID.clear(),this.DealTagID.clear(),this.DerivativeTagID.clear(),this.FinanceTagID.clear(),this.CapitalTagID.clear(),this.CapitalFlowDayID.clear(),this.CapitalFlowDay3ID.clear(),this.CapitalFlowDay5ID.clear(),this.CapitalFlowDay10ID.clear(),this.DDEID.clear(),this.DDE3ID.clear(),this.DDE5ID.clear(),this.DDE10ID.clear(),this.EventTagID.clear(),this.CompanyTagID.clear();var t=!0,e=!1,a=void 0;try{for(var i,r=(0,R.default)(this.Sort);!(t=(i=r.next()).done);t=!0){i.value[1].TagID.clear()}}catch(t){e=!0,a=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw a}}},this.RemoveTagID=function(t){this.TagID.delete(t),this.BaseDataTagID.delete(t),this.HeatTagID.delete(t),this.BuySellTagID.delete(t),this.DealTagID.delete(t),this.DerivativeTagID.delete(t),this.FinanceTagID.delete(t),this.CapitalTagID.delete(t),this.CapitalFlowDayID.delete(t),this.CapitalFlowDay3ID.delete(t),this.CapitalFlowDay5ID.delete(t),this.CapitalFlowDay10ID.delete(t),this.DDEID.delete(t),this.DDE3ID.delete(t),this.DDE5ID.delete(t),this.DDE10ID.delete(t),this.EventTagID.delete(t),this.CompanyTagID.delete(t);var e=!0,a=!1,i=void 0;try{for(var r,n=(0,R.default)(this.Sort);!(e=(r=n.next()).done);e=!0){r.value[1].TagID.delete(t)}}catch(t){a=!0,i=t}finally{try{!e&&n.return&&n.return()}finally{if(a)throw i}}},this.SetBaseData=function(t){this.Name=t.name,this.YClose=t.yclose,this.Price=t.price,this.High=t.high,this.Low=t.low,this.Open=t.open,this.Vol=t.vol,this.Amount=t.amount,this.Date=t.date,this.Time=t.time,this.Increase=t.increase,isNaN(t.exchangerate)||(this.ExchangeRate=t.exchangerate),isNaN(t.amplitude)||(this.Amplitude=t.amplitude),isNaN(t.volratio)||(this.VolRatio=t.volratio),this.Name.indexOf("ST")>=0?(this.MaxPrice=1.05*this.Open,this.MinPrice=.95*this.Open):(this.MaxPrice=1.1*this.Open,this.MinPrice=.9*this.Open),this.Price&&this.YClose&&(this.RFPrice=this.Price-this.YClose),t.week&&(this.Week={},this.Week.Week1=t.week.week1,this.Week.Week4=t.week.week4,this.Week.Week13=t.week.week13,this.Week.Week26=t.week.week26,this.Week.Week52=t.week.week52)},this.SetDerivativeData=function(t){this.MarketValue=t.marketvalue,this.FlowMarketValue=t.flowmarketvalue,this.Bookrate=t.bookrate,this.Bookdiffer=t.bookdiffer,this.PE=t.pe,this.PE2=t.pe2,this.PE3=t.pe3,this.PB=t.pb},this.SetFinanceData=function(t){console.log(t),t.finance&&(this.Finance=new h,this.Finance.SetData(t))},this.SetCapitalData=function(t){t.capital&&(this.Capital=new l,this.Capital.SetData(t))},this.SetIndexBaseData=function(t){this.SetBaseData(t);var e=new n;t.indextop&&(e.Up=t.indextop.up,e.Down=t.indextop.down,e.Unchanged=t.indextop.unchanged,e.Stop=t.indextop.stop,e.UpStock.Symbol=t.indextop.upstock.symbol,e.UpStock.Name=t.indextop.upstock.name,e.DownStock.Symbol=t.indextop.downstock.symbol,e.DownStock.Name=t.indextop.downstock.name),this.IndexTop=e},this.SetBuySellData=function(t){this.SetBaseData(t),this.Buy5=new Array,this.Sell5=new Array;for(var e in t.buy){var a=t.buy[e];this.Buy5.push({Price:a.price,Vol:a.vol})}for(var e in t.sell){var a=t.sell[e];this.Sell5.push({Price:a.price,Vol:a.vol})}},this.SetDealData=function(t){this.Price=t.price,this.High=t.high,this.Low=t.low,this.Vol=t.vol,this.Amount=t.amount,this.Date=t.date,this.Time=t.time,this.Increase=t.increase,this.Deal=new Array;for(var e in t.deal){var a=t.deal[e];if(!isNaN(a.price)&&!isNaN(a.time)){var i="";0===a.bs?i="B":1===a.bs&&(i="S"),this.Deal.push({Price:a.price,Amount:a.amount,Vol:a.vol,Time:a.time,BS:i})}}},this.SetHeatData=function(t){var e=new s;e.Good=t.quadrant.good,e.GoodIncrease.Day1=t.quadrant.gincrease.day1,e.GoodIncrease.Week1=t.quadrant.gincrease.week1,e.GoodIncrease.Week4=t.quadrant.gincrease.week4,this.Heat=e},this.SetCapitalFlowDayData=function(t,e){if(t)switch(e){case K.CAPITAL_FLOW_DAY_DATA:this.CapitalFlowDay=new u,this.CapitalFlowDay.SetData(t);break;case K.CAPITAL_FLOW_DAY3_DATA:this.CapitalFlowDay3=new c,this.CapitalFlowDay3.SetData(t);break;case K.CAPITAL_FLOW_DAY5_DATA:this.CapitalFlowDay5=new c,this.CapitalFlowDay5.SetData(t);break;case K.CAPITAL_FLOW_DAY10_DATA:this.CapitalFlowDay10=new c,this.CapitalFlowDay10.SetData(t)}},this.SetDDE=function(t,e){if(t){switch(e){case K.DDE_DAY_DATA:this.DDE=new d,this.DDE.SetData(t);break;case K.DDE_DAY3_DATA:this.DDE3=new d,this.DDE3.SetData(t);break;case K.DDE_DAY5_DATA:this.DDE5=new d,this.DDE5.SetData(t);break;case K.DDE_DAY10_DATA:this.DDE10=new d,this.DDE10.SetData(t)}return t}},this.SetEventData=function(t){t.events&&(this.Event=new C,this.Event.SetData(t))},this.SetCompanyData=function(t){t.company&&(this.Company=new f,this.Company.SetData(t))},this.SetPlateData=function(t){(t.industry||t.region||t.concept)&&(this.Plate=new m,this.Plate.SetData(t))},this.SetData=function(t){t.name&&(this.Name=t.name),isNaN(t.yclose)||(this.YClose=t.yclose),isNaN(t.price)||(this.Price=t.price),isNaN(t.high)||(this.High=t.high),isNaN(t.low)||(this.Low=t.low),isNaN(t.vol)||(this.Vol=t.vol),isNaN(t.amount)||(this.Amount=t.amount),isNaN(t.date)||(this.Date=t.date),isNaN(t.time)||(this.Time=t.time),isNaN(t.increase)||(this.Increase=t.increase),isNaN(t.marketvalue)||(this.MarketValue=t.marketvalue),isNaN(t.flowmarketvalue)||(this.FlowMarketValue=t.flowmarketvalue),isNaN(t.bookrate)||(this.Bookrate=t.bookrate),isNaN(t.bookdiffer)||(this.Bookdiffer=t.bookdiffer),isNaN(t.pe)||(this.PE=t.pe),isNaN(t.pb)||(this.PB=t.pb),t.finance&&this.SetFinanceData(t),t.finance&&this.SetFinanceDetailData(t),t.capital&&this.SetCapitalData(t),t.mamplitude&&(isNaN(t.mamplitude[1])||(this.MinuteAmplitude.M1=t.mamplitude[1]),isNaN(t.mamplitude[3])||(this.MinuteAmplitude.M3=t.mamplitude[3]),isNaN(t.mamplitude[5])||(this.MinuteAmplitude.M5=t.mamplitude[5]),isNaN(t.mamplitude[10])||(this.MinuteAmplitude.M10=t.mamplitude[10]),isNaN(t.mamplitude[15])||(this.MinuteAmplitude.M15=t.mamplitude[15])),t.risefallspeed&&(isNaN(t.risefallspeed[1])||(this.RiseFallSpeed.M1=t.risefallspeed[1]),isNaN(t.risefallspeed[3])||(this.RiseFallSpeed.M3=t.risefallspeed[3]),isNaN(t.risefallspeed[5])||(this.RiseFallSpeed.M5=t.risefallspeed[5]),isNaN(t.risefallspeed[10])||(this.RiseFallSpeed.M10=t.risefallspeed[10]),isNaN(t.risefallspeed[15])||(this.RiseFallSpeed.M15=t.risefallspeed[15])),t.mamount&&(isNaN(t.mamount[1])||(this.MAmount.M1=t.mamount[1]),isNaN(t.mamount[3])||(this.MAmount.M5=t.mamount[3]),isNaN(t.mamount[5])||(this.MAmount.M5=t.mamount[5]),isNaN(t.mamount[10])||(this.MAmount.M10=t.mamount[10]),isNaN(t.mamount[15])||(this.MAmount.M15=t.mamount[15]))}}function v(t,e){this.JSStock=t,this.TagID=e,this.Get=function(e,a){var i=t.Get(e,this.TagID);if(!i)return null;switch(a){case X.SYMBOL:case X.NAME:case X.OPEN:case X.PRICE:case X.YCLOSE:case X.HIGH:case X.LOW:case X.VOL:case X.AMOUNT:case X.DATE:case X.TIME:case X.INCREASE:case X.EXCHANGE_RATE:case X.AMPLITUDE:case X.MAX_PRICE:case X.MIN_PRICE:case X.RISE_FALL_PRICE:case X.INDEXTOP:case X.WEEK:case X.VOLRATIO:return i.GetBaseData(this.TagID,a);case X.HEAT:return i.GetHeatData(this.TagID);case X.BUY5:return i.GetBuy5(this.TagID);case X.SELL5:return i.GetSell5(this.TagID);case X.DEAL:return i.GetDeal(this.TagID);case X.MARKET_VALUE:case X.FLOW_MARKET_VALUE:case X.BOOK_RATE:case X.BOOK_DIFFER:case X.PE:case X.PE2:case X.PE3:case X.PB:return i.GetDerivative(this.TagID,a);case X.ROE:case X.FINANCE_DATE:case X.FINANCE_PERSEARNING:case X.FINANCE_PERNETASSET:case X.FINANCE_NPROFIT:case X.FINANCE_NPROFITINCREASE:case X.FINANCE_NNETPROFIT:case X.FINANCE_NNPROFITINCREASE:case X.FINANCE_NNPROFITSPEED:case X.FINANCE_EPS:case X.FINANCE_BENFORD:return i.GetFinance(this.TagID,a);case X.PLATE_INDUSTRY:case X.PLATE_CONCEPT:case X.PLATE_REGION:return i.GetPlate(this.TagID,a);case X.CAPITAL_FLOW_DAY:case X.CAPITAL_FLOW_DAY3:case X.CAPITAL_FLOW_DAY5:case X.CAPITAL_FLOW_DAY10:return i.GetCapitalFlowDay(this.TagID,a);case X.DDE:case X.DDE3:case X.DDE5:case X.DDE10:return i.GetDDE(this.TagID,a);case X.EVENTS:return i.GetEvent(this.TagID,a);case X.COMPANY_NAME:case X.COMPANY_BUSINESS:case X.COMPANY_VOL:case X.COMPANY_PRICE:case X.COMPANY_RELEASEDATE:case X.COMPANY_COMPETENCE:return i.GetCompany(this.TagID,a);case X.CAPITAL_A:case X.CAPTIAL_ARATE:case X.CAPITAL_TOTAL:return i.GetCapital(this.TagID,a);default:return null}},this.GetSort=function(e,a,i){var r=t.Get(e,this.TagID);return null==r?r:r.GetSortData(this.TagID,a,i)},this.EndRead=function(t){1==t&&this.JSStock.ReqeustData()},this.SetQueryField=function(t,e){for(var a in e)this.Get(t,e[a])}}function g(){this.Symbol,this.Callback,this.Order=-1,this.SortField,this.Field,this.Plate,this.Data=new B.default,this.ApiUrl=W.Domain+"/API/StockHistoryDay",this.PageSize=20,this.PageIndex=1,this.Count,this.currentData=null,this.RequsetData=function(t,e){var a=this,i="string"==typeof a.Symbol?[this.Symbol]:this.Symbol,r=i?i.length:0;this.Plate?this.currentData={plate:this.Plate,symbol:i,start:0,end:this.PageSize,field:this.Field,orderfield:this.SortField,order:this.Order,condition:t.GetQuery(),condition2:e?e.GetQuery():[]}:this.currentData={symbol:i,start:0,end:r,field:this.Field,orderfield:this.SortField,order:this.Order,condition:t.GetQuery(),condition2:e?e.GetQuery():[]},G.default.ajax({url:this.ApiUrl,data:a.currentData,method:"POST",dataType:"json",success:function(e){a.Count=e.data.count,a.RecvData(e,t)},fail:function(e){a.RecvError(e,t)}})},this.GetNextPage=function(){var t=this;this.PageSize*this.PageIndex<this.Count?(this.currentData.start=this.PageSize*this.PageIndex,this.PageIndex++,this.currentData.end=this.PageSize*this.PageIndex,G.default.ajax({url:this.ApiUrl,data:t.currentData,method:"POST",dataType:"json",success:function(e){t.RecvData(e)},fail:function(e){t.RecvError(e)}})):alert("数据已全部加载")},this.RecvData=function(t,e){var a=t.data;for(var i in a.stock){var r=a.stock[i],n=r.symbol,s={};this.Data.has(n)?s=this.Data.get(n):(s={Symbol:r.symbol,Name:r.name,Data:new B.default},this.Data.set(n,s)),this.SetStockData(r,s)}this.Callback&&this.Callback(this,e)},this.SetStockData=function(t,e){for(var a in t.stockday){var i=t.stockday[a],r=i.date,n=new B.default;this.SetFinanceData(i,n),this.SetBlocktradingData(i,n),this.SetChangesData(i,n),this.SetLiftingData(i,n),this.SetPforecastData(i,n),this.SetShortIndicatorsData(i,n),e.Data.set(r,n)}return e},this.SetFinanceData=function(t,e){var a=t.finance1;a&&(isNaN(a.nprofitincrease)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE1_NPROFITINCREASE,a.nprofitincrease),isNaN(a.nnprofitincrease)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE1_NNPROFITINCREASE,a.nnprofitincrease),isNaN(a.nnprofitspeed)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE1_NNPROFITSPEED,a.nnprofitspeed),isNaN(a.benford)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE1_BENFORD,a.benford));var i=t.announcement1;i&&(isNaN(i.year)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE1_YEAR,i.year),isNaN(i.quarter)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE1_QUARTER,i.quarter));var a=t.finance2;a&&(isNaN(a.nprofitincrease)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE2_NPROFITINCREASE,a.nprofitincrease),isNaN(a.nnprofitincrease)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE2_NNPROFITINCREASE,a.nnprofitincrease),isNaN(a.nnprofitspeed)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE2_NNPROFITSPEED,a.nnprofitspeed),isNaN(a.benford)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE2_BENFORD,a.benford));var i=t.announcement2;i&&(isNaN(i.year)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE2_YEAR,i.year),isNaN(i.quarter)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE2_QUARTER,i.quarter));var a=t.finance3;a&&(isNaN(a.nprofitincrease)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE3_NPROFITINCREASE,a.nprofitincrease),isNaN(a.nnprofitincrease)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE3_NNPROFITINCREASE,a.nnprofitincrease),isNaN(a.nnprofitspeed)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE3_NNPROFITSPEED,a.nnprofitspeed),isNaN(a.benford)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE3_BENFORD,a.benford));var i=t.announcement3;i&&(isNaN(i.year)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE3_YEAR,i.year),isNaN(i.quarter)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE3_QUARTER,i.quarter));var a=t.finance4;a&&(isNaN(a.nprofitincrease)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE4_NPROFITINCREASE,a.nprofitincrease),isNaN(a.nnprofitincrease)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE4_NNPROFITINCREASE,a.nnprofitincrease),isNaN(a.nnprofitspeed)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE4_NNPROFITSPEED,a.nnprofitspeed),isNaN(a.benford)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE4_BENFORD,a.benford));var i=t.announcement4;i&&(isNaN(i.year)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE4_YEAR,i.year),isNaN(i.quarter)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE4_QUARTER,i.quarter))},this.SetBlocktradingData=function(t,e){var a=t.blocktrading;a&&e.set(STOCK_HISTORY_FIELD_NAME.BLOCK_TRADING,{Premium:a.premium,Price:a.price,Vol:a.vol,Amount:a.amount})},this.SetChangesData=function(t,e){var a=t.changes;a&&e.set(STOCK_HISTORY_FIELD_NAME.HOLDERS_CHANGES,{List:a.list})},this.SetLiftingData=function(t,e){var a=t.lifting;a&&e.set(STOCK_HISTORY_FIELD_NAME.LIFTING,{Lifting:a})},this.SetPforecastData=function(t,e){var a=t.pforecast;a&&e.set(STOCK_HISTORY_FIELD_NAME.PFORECAST,{Lowprofit:a[0].lowprofit,Highprofit:a[0].highprofit,Lowchange:a[0].lowchange,Highchange:a[0].highchange,Reportdate:a[0].reportdate})},this.SetShortIndicatorsData=function(t,e){var a=t.policy;if(a){var i=["三只乌鸦","乌云盖顶","黄昏之星","巨量阴线","头肩顶","射击之星","倾盆大雨","断头铡刀","淡友反攻","空方炮","连续1周空头排列"],r=0,n=[],s=0,o="";a.forEach(function(t){i.some(function(e){return e===t.name})&&(r++,n.push(t.time))}),r?(s=Math.max.apply(n,n),o=a.find(function(t){return t.time===s}).name):o="",console.log(o,r,"latestName-targetedCount"),e.set(STOCK_HISTORY_FIELD_NAME.SHORTIND_ICATORS,{latestIndicatorName:o,indicatorCount:r})}},this.RecvError=function(t,e){},this.CreateCondition=function(t){return new QueryCondition(t)}}function S(){this.MapStock=new B.default,this.MapTagCallback=new B.default,this.RequestVersion=new Array([100,100,100]),this.RealtimeApiUrl=W.Domain+"/API/Stock",this.PlateQuadrantApiUrl=W.Domain+"/API/StockPlateQuadrant",this.IsAutoUpdate=!0,this.AutoUpateTimeout=15e3,this.Timeout,this.NetworkFilter,this.GetStockRead=function(t,e){var a=!0,i=!1,r=void 0;try{for(var n,s=(0,R.default)(this.MapStock);!(a=(n=s.next()).done);a=!0){n.value[1].RemoveTagID(t)}}catch(t){i=!0,r=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw r}}return this.MapTagCallback.set(t,e),new v(this,t)},this.Unsubscribe=function(t){var e=!0,a=!1,i=void 0;try{for(var r,n=(0,R.default)(this.MapStock);!(e=(r=n.next()).done);e=!0){r.value[1].RemoveTagID(t)}}catch(t){a=!0,i=t}finally{try{!e&&n.return&&n.return()}finally{if(a)throw i}}},this.UnsubscribeStock=function(t,e){var a=!0,i=!1,r=void 0;try{for(var n,s=(0,R.default)(this.MapStock);!(a=(n=s.next()).done);a=!0){var o=n.value;if(o[0]===t){e?o[1].RemoveTagID(e):o[1].ClearTagID(),console.log("[JSStock::UnsubscribeStock] symbol="+t+", tagID="+e);break}}}catch(t){i=!0,r=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw r}}},this.Get=function(t,e){this.MapStock.has(t)||this.MapStock.set(t,new D(t));var a=this.MapStock.get(t);return e&&a.AttachTagID(e),a},this.RequestData=function(){this.ClearTimer();var t=new Array,e=new Array,a=new Array,i=new Array,r=new Array,n=new Array,s=new Array,o=[],h=[],l=[],u=[],c=[],d=[],f=[],m=[],C=new Array,D=new Array,v=new Array,g=new Array,S=!0,T=!1,y=void 0;try{for(var I,x=(0,R.default)(this.MapStock);!(S=(I=x.next()).done);S=!0){var L=I.value,M=L[1],_=L[0];M.BaseDataTagID.size>0&&(p(_)?e.push(_):t.push(_)),M.BuySellTagID.size>0&&i.push(_),M.CapitalFlowDayID.size>0&&o.push(_),M.CapitalFlowDay3ID.size>0&&h.push(_),M.CapitalFlowDay5ID.size>0&&l.push(_),M.CapitalFlowDay10ID.size>0&&u.push(_),M.DDEID.size>0&&c.push(_),M.DDE3ID.size>0&&d.push(_),M.DDE5ID.size>0&&f.push(_),M.DDE10ID.size>0&&m.push(_),M.HeatTagID.size>0&&a.push(_),M.DealTagID.size>0&&r.push(_),M.DerivativeTagID.size>0&&n.push(_),M.FinanceTagID.size>0&&s.push(_),M.CapitalTagID.size>0&&g.push(_),null==M.Event&&M.EventTagID.size>0&&C.push(_),null==M.Company&&M.CompanyTagID.size>0&&D.push(_),null==L[1].Plate&&L[1].PlateTagID.size>0&&v.push(L[0])}}catch(t){T=!0,y=t}finally{try{!S&&x.return&&x.return()}finally{if(T)throw y}}i.length>0&&this.RequestBuySellData(i),t.length>0&&this.RequestBaseData(t),e.length>0&&this.RequestIndexBaseData(e),a.length>0&&this.RequestIndexHeatData(a),r.length>0&&this.RequestDealData(r),n.length>0&&this.RequestDerivativeData(n),s.length>0&&this.RequestFinanceData(s),g.length>0&&this.RequestCapitalData(g),o.length>0&&this.RequestSubDocumentData(o,"flowday"),h.length>0&&this.RequestSubDocumentData(h,"flowday3"),l.length>0&&this.RequestSubDocumentData(l,"flowday5"),u.length>0&&this.RequestSubDocumentData(u,"flowday10"),c.length>0&&this.RequestSubDocumentData(c,"dde"),d.length>0&&this.RequestSubDocumentData(d,"dde3"),f.length>0&&this.RequestSubDocumentData(f,"dde5"),m.length>0&&this.RequestSubDocumentData(m,"dde10"),C.length>0&&this.RequestEventData(C),D.length>0&&this.RequestCompanyData(D),v.length>0&&this.RequestPlateData(v),this.ReqeustAllSortData()},this.ReqeustData=this.RequestData,this.RequestBaseData=function(t){var e=this,a=["name","symbol","yclose","open","price","high","low","vol","amount","date","time","week","increase","exchangerate","amplitude","volratio"];if(this.NetworkFilter){var i={Name:"JSStock::RequestBaseData",Explain:"股票基础数据",ID:K.BASE_DATA,Request:{Url:e.RealtimeApiUrl,Data:{field:a,symbol:t},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(i,function(t){e.RecvData(t,K.BASE_DATA)}),1==i.PreventDefault)return}G.default.ajax({url:this.RealtimeApiUrl,data:{field:a,symbol:t},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,K.BASE_DATA)},error:function(t){e.RecvError(t,K.BASE_DATA)}})},this.RequestDerivativeData=function(t){var e=this,a=["name","symbol","marketvalue","flowmarketvalue","pe","pe2","pe3","pb","bookrate","bookdiffer"];if(this.NetworkFilter){var i={Name:"JSStock::RequestDerivativeData",Explain:"实时衍生数据",ID:K.DERIVATIVE_DATA,Request:{Url:e.RealtimeApiUrl,Data:{field:a,symbol:t},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(i,function(t){e.RecvData(t,K.DERIVATIVE_DATA)}),1==i.PreventDefault)return}G.default.ajax({url:this.RealtimeApiUrl,data:{field:a,symbol:t},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,K.DERIVATIVE_DATA)},error:function(t){e.RecvError(t,K.DERIVATIVE_DATA)}})},this.RequestFinanceData=function(t){var e=this,a=["name","symbol","roe","finance"];if(this.NetworkFilter){var i={Name:"JSStock::RequestFinanceData",Explain:"财务数据",ID:K.FINANCE_DATA,Request:{Url:e.RealtimeApiUrl,Data:{field:a,symbol:t},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(i,function(t){e.RecvData(t,K.FINANCE_DATA)}),1==i.PreventDefault)return}G.default.ajax({url:this.RealtimeApiUrl,data:{field:a,symbol:t},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,K.FINANCE_DATA)},error:function(t){e.RecvError(t,K.FINANCE_DATA)}})},this.RequestCapitalData=function(t){var e=this,a=["name","symbol","capital"];if(this.NetworkFilter){var i={Name:"JSStock::RequestCapitalData",Explain:"股本数据",ID:K.CAPITAL_DATA,Request:{Url:e.RealtimeApiUrl,Data:{field:a,symbol:t},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(i,function(t){e.RecvData(t,K.CAPITAL_DATA)}),1==i.PreventDefault)return}G.default.ajax({url:this.RealtimeApiUrl,data:{field:a,symbol:t},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,K.CAPITAL_DATA)},error:function(t){e.RecvError(t,K.CAPITAL_DATA)}})},this.RequestBuySellData=function(t){var e=this,a=["name","symbol","yclose","open","price","high","low","vol","amount","date","time","week","increase","buy","sell","exchangerate","amplitude"];if(this.NetworkFilter){var i={Name:"JSStock::RequestBuySellData",Explain:"买卖盘数据",ID:K.BUY_SELL_DATA,Request:{Url:e.RealtimeApiUrl,Data:{field:a,symbol:t},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(i,function(t){e.RecvData(t,K.BUY_SELL_DATA)}),1==i.PreventDefault)return}G.default.ajax({url:this.RealtimeApiUrl,data:{field:a,symbol:t},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,K.BUY_SELL_DATA)},error:function(t){e.RecvError(t,K.BUY_SELL_DATA)}})},this.RequestDealData=function(t){var e=this,a=["name","symbol","price","high","low","vol","amount","date","time","increase","deal"];if(this.NetworkFilter){var i={Name:"JSStock::RequestDealData",Explain:"分笔数据",ID:K.DEAL_DATA,Request:{Url:e.RealtimeApiUrl,Data:{field:a,symbol:t},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(i,function(t){e.RecvData(t,K.DEAL_DATA)}),1==i.PreventDefault)return}G.default.ajax({url:this.RealtimeApiUrl,data:{field:a,symbol:t},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,K.DEAL_DATA)},error:function(t){e.RecvError(t,K.DEAL_DATA)}})},this.RequestIndexBaseData=function(t){var e=this,a=["name","symbol","yclose","open","price","high","low","vol","amount","date","time","week","indextop","increase"];if(this.NetworkFilter){var i={Name:"JSStock::RequestIndexBaseData",Explain:"指数基础数据(包含上涨下跌家数)",ID:K.INDEX_BASE_DATA,Request:{Url:e.RealtimeApiUrl,Data:{field:a,symbol:t},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(i,function(t){e.RecvData(t,K.INDEX_BASE_DATA)}),1==i.PreventDefault)return}G.default.ajax({url:this.RealtimeApiUrl,data:{field:a,symbol:t},type:"post",dataType:"json",async:!0,success:function(t){console.log(t),e.RecvData(t,K.INDEX_BASE_DATA)},error:function(t){e.RecvError(t,K.INDEX_BASE_DATA)}})},this.RequestIndexHeatData=function(t){var e=this;G.default.ajax({url:this.PlateQuadrantApiUrl,data:{plate:t},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,K.HEAT_DATA)},error:function(t){e.RecvError(t,K.HEAT_DATA)}})},this.ReqeustAllSortData=function(){var t=new Array,e=!0,a=!1,i=void 0;try{for(var r,n=(0,R.default)(this.MapStock);!(e=(r=n.next()).done);e=!0){var s=r.value;if(p(s[0])&&!(null==s[1].Sort||s[1].Sort.size<=0)){var o=!0,h=!1,l=void 0;try{for(var u,c=(0,R.default)(s[1].Sort);!(o=(u=c.next()).done);o=!0){var d=u.value,f=d[1],m={Plate:s[0],SortField:f.SortField,Order:f.Order,TagID:f.TagID};t.push(m)}}catch(t){h=!0,l=t}finally{try{!o&&c.return&&c.return()}finally{if(h)throw l}}}}}catch(t){a=!0,i=t}finally{try{!e&&n.return&&n.return()}finally{if(a)throw i}}for(var C in t){var d=t[C];this.ReqeustSortData(d)}},this.ReqeustSortData=function(t){var e=this,a=t,i="";switch(a.SortField){case X.INCREASE:i="increase";break;case X.PRICE:i="price";break;default:return}var r=["name","symbol","yclose","open","price","high","low","vol","amount","date","time","week","increase","exchangerate"];if(this.NetworkFilter){var n={Name:"JSStock::ReqeustSortData",Explain:"板块排序数据",ID:K.SORT_DATA,Request:{Url:e.RealtimeApiUrl,Data:{field:r,plate:[t.Plate],orderfield:i,order:t.Order,ordernull:1,filterstop:1},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(n,function(t){e.RecvData(t,K.SORT_DATA,a)}),1==n.PreventDefault)return}G.default.ajax({url:this.RealtimeApiUrl,data:{field:r,plate:[t.Plate],orderfield:i,order:t.Order,ordernull:1,filterstop:1},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,K.SORT_DATA,a)},error:function(t){e.RecvError(t,K.SORT_DATA,a)}})},this.RequestSubDocumentData=function(t,e){var a=this,i=new B.default([["flowday",{Field:"flowday",RecvID:K.CAPITAL_FLOW_DAY_DATA}],["flowday3",{Field:"flowday3",RecvID:K.CAPITAL_FLOW_DAY3_DATA}],["flowday5",{Field:"flowday5",RecvID:K.CAPITAL_FLOW_DAY5_DATA}],["flowday10",{Field:"flowday10",RecvID:K.CAPITAL_FLOW_DAY10_DATA}],["dde",{Field:"dde",RecvID:K.DDE_DAY_DATA}],["dde3",{Field:"dde3",RecvID:K.DDE_DAY3_DATA}],["dde5",{Field:"dde5",RecvID:K.DDE_DAY5_DATA}],["dde10",{Field:"dde10",RecvID:K.DDE_DAY10_DATA}]]);if(i.has(e)){var r=i.get(e);if(this.NetworkFilter){var n={Name:"JSStock::RequestSubDocumentData",Explain:"子文档数据",ID:r.RecvID,Request:{Url:a.RealtimeApiUrl,Data:{field:["symbol",r.Field],symbol:t,start:0,end:50},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(n,function(t){a.RecvData(t,r.RecvID)}),1==n.PreventDefault)return}G.default.ajax({url:this.RealtimeApiUrl,data:{field:["symbol",r.Field],symbol:t,start:0,end:50},type:"post",dataType:"json",success:function(t){a.RecvData(t,r.RecvID)},error:function(t){a.RecvError(t,r.RecvID)}})}},this.RequestEventData=function(t){var e=this;G.default.ajax({url:this.RealtimeApiUrl,data:{field:["symbol","events.margin","events.shhk","events.hk","events.st","events.hksymbol","events.hkname","events.szhk"],symbol:t,start:0,end:50},type:"POST",dataType:"json",success:function(t){e.RecvData(t,K.EVENT_DATA)},error:function(t){e.RecvError(t,K.EVENT_DATA)}})},this.RequestCompanyData=function(t){var e=this;G.default.ajax({url:this.RealtimeApiUrl,data:{field:["name","symbol","company"],symbol:t,start:0,end:50},type:"POST",dataType:"json",success:function(t){e.RecvData(t,K.COMPANY_DATA)},error:function(t){e.RecvError(t,K.COMPANY_DATA)}})},this.RequestPlateData=function(t){var e=this;G.default.ajax({url:this.RealtimeApiUrl,data:{field:["name","symbol","industry","region","concept"],symbol:t,start:0,end:50},type:"POST",dataType:"json",success:function(t){e.RecvData(t,K.PLATE_DATA)},error:function(t){e.RecvError(t,K.PLATE_DATA)}})},this.RecvError=function(t,e,a){console.log("RecvError: datatype="+e.toString()),console.log(t);var i=this;this.Timeout&&clearTimeout(this.Timeout),this.Timeout=setTimeout(function(){i.ReqeustData()},2*this.AutoUpateTimeout)},this.RecvData=function(t,e,a){var i;switch(e){case K.BASE_DATA:case K.INDEX_BASE_DATA:i=this.RecvBaseData(t,e);break;case K.HEAT_DATA:i=this.RecvHeatData(t,e);break;case K.SORT_DATA:i=this.RecvSortData(t,e,a);break;case K.BUY_SELL_DATA:i=this.RecvBuySellData(t,e);break;case K.DEAL_DATA:i=this.RecvDealData(t,e);break;case K.DERIVATIVE_DATA:i=this.RecvDerivativeData(t,e);break;case K.FINANCE_DATA:i=this.RecvFinanceData(t,e);break;case K.CAPITAL_DATA:i=this.RecvCapitalData(t,e);break;case K.CAPITAL_FLOW_DAY_DATA:case K.CAPITAL_FLOW_DAY3_DATA:case K.CAPITAL_FLOW_DAY5_DATA:case K.CAPITAL_FLOW_DAY10_DATA:case K.DDE_DAY_DATA:case K.DDE_DAY3_DATA:case K.DDE_DAY5_DATA:case K.DDE_DAY10_DATA:i=this.RecvSubDocumentData(t,e);break;case K.EVENT_DATA:i=this.RecvEventData(t,e);break;case K.COMPANY_DATA:i=this.RecvCompanyData(t,e);break;case K.PLATE_DATA:i=this.RecvPlateData(t,e)}var r=!0,n=!1,s=void 0;try{for(var o,h=(0,R.default)(i);!(r=(o=h.next()).done);r=!0){var l=o.value;this.MapTagCallback.has(l[0])&&this.MapTagCallback.get(l[0])(l[0],l[1],e,this)}}catch(t){n=!0,s=t}finally{try{!r&&h.return&&h.return()}finally{if(n)throw s}}this.AutoUpdate()},this.ClearTimer=function(){this.Timeout&&(clearTimeout(this.Timeout),this.Timeout=null)},this.AutoUpdate=function(){if(this.ClearTimer(),this.IsAutoUpdate){var t=this,e=!1,a=!0,i=!1,r=void 0;try{for(var n,s=(0,R.default)(this.MapStock);!(a=(n=s.next()).done);a=!0){var o=n.value,h=j.GetMarketStatus(o[0]);if(2==h)return void(this.Timeout=setTimeout(function(){t.ReqeustData()},this.AutoUpateTimeout));1==h&&(e=!0)}}catch(t){i=!0,r=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw r}}e&&(this.Timeout=setTimeout(function(){t.AutoUpdate()},this.AutoUpateTimeout))}},this.RecvBaseData=function(t,e){var a=new B.default;for(var i in t.stock){var r=t.stock[i],n=this.MapStock.get(r.symbol);if(n){switch(e){case K.BASE_DATA:n.SetBaseData(r);break;case K.INDEX_BASE_DATA:n.SetIndexBaseData(r);break;default:continue}if(n.TagID.size>0){var s=!0,o=!1,h=void 0;try{for(var l,u=(0,R.default)(n.TagID);!(s=(l=u.next()).done);s=!0){var c=l.value;a.has(c)?a.get(c).push(n.Symbol):a.set(c,new Array(n.Symbol))}}catch(t){o=!0,h=t}finally{try{!s&&u.return&&u.return()}finally{if(o)throw h}}}}}return a},this.RecvBuySellData=function(t,e){var a=new B.default;for(var i in t.stock){var r=t.stock[i],n=this.MapStock.get(r.symbol);if(n){if(n.SetBuySellData(r),n.TagID.size>0){var s=!0,o=!1,h=void 0;try{for(var l,u=(0,R.default)(n.TagID);!(s=(l=u.next()).done);s=!0){var c=l.value;a.has(c)?a.get(c).push(n.Symbol):a.set(c,new Array(n.Symbol))}}catch(t){o=!0,h=t}finally{try{!s&&u.return&&u.return()}finally{if(o)throw h}}}if(n.BuySellTagID.size>0){var d=!0,f=!1,m=void 0;try{for(var C,p=(0,R.default)(n.BuySellTagID);!(d=(C=p.next()).done);d=!0){var c=C.value;a.has(c)?a.get(c).push(n.Symbol):a.set(c,new Array(n.Symbol))}}catch(t){f=!0,m=t}finally{try{!d&&p.return&&p.return()}finally{if(f)throw m}}}}}return a},this.RecvDerivativeData=function(t,e){var a=new B.default;for(var i in t.stock){var r=t.stock[i],n=this.MapStock.get(r.symbol);if(n&&(n.SetDerivativeData(r),n.DerivativeTagID.size>0)){var s=!0,o=!1,h=void 0;try{for(var l,u=(0,R.default)(n.DerivativeTagID);!(s=(l=u.next()).done);s=!0){var c=l.value;a.has(c)?a.get(c).push(n.Symbol):a.set(c,new Array(n.Symbol))}}catch(t){o=!0,h=t}finally{try{!s&&u.return&&u.return()}finally{if(o)throw h}}}}return a},this.RecvFinanceData=function(t,e){var a=new B.default;for(var i in t.stock){var r=t.stock[i],n=this.MapStock.get(r.symbol);if(n&&(n.SetFinanceData(r),n.FinanceTagID.size>0)){var s=!0,o=!1,h=void 0;try{for(var l,u=(0,R.default)(n.FinanceTagID);!(s=(l=u.next()).done);s=!0){var c=l.value;a.has(c)?a.get(c).push(n.Symbol):a.set(c,new Array(n.Symbol))}}catch(t){o=!0,h=t}finally{try{!s&&u.return&&u.return()}finally{if(o)throw h}}}}return a},this.RecvCapitalData=function(t,e){var a=new B.default;for(var i in t.stock){var r=t.stock[i],n=this.MapStock.get(r.symbol);if(n&&(n.SetCapitalData(r),n.CapitalTagID.size>0)){var s=!0,o=!1,h=void 0;try{for(var l,u=(0,R.default)(n.CapitalTagID);!(s=(l=u.next()).done);s=!0){var c=l.value;a.has(c)?a.get(c).push(n.Symbol):a.set(c,new Array(n.Symbol))}}catch(t){o=!0,h=t}finally{try{!s&&u.return&&u.return()}finally{if(o)throw h}}}}return a},this.RecvDealData=function(t,e){var a=new B.default;for(var i in t.stock){var r=t.stock[i],n=this.MapStock.get(r.symbol);if(n&&(n.SetDealData(r),n.DealTagID.size>0)){var s=!0,o=!1,h=void 0;try{for(var l,u=(0,R.default)(n.DealTagID);!(s=(l=u.next()).done);s=!0){var c=l.value;a.has(c)?a.get(c).push(n.Symbol):a.set(c,new Array(n.Symbol))}}catch(t){o=!0,h=t}finally{try{!s&&u.return&&u.return()}finally{if(o)throw h}}}}return a},this.RecvHeatData=function(t,e){var a=new B.default;for(var i in t.data){var r=t.data[i],n=this.MapStock.get(r.symbol);if(n&&(n.SetHeatData(r),n.HeatTagID.size>0)){var s=!0,o=!1,h=void 0;try{for(var l,u=(0,R.default)(n.HeatTagID);!(s=(l=u.next()).done);s=!0){var c=l.value;a.has(c)?a.get(c).push(n.Symbol):a.set(c,new Array(n.Symbol))}}catch(t){o=!0,h=t}finally{try{!s&&u.return&&u.return()}finally{if(o)throw h}}}}return a},this.RecvSortData=function(t,e,a){var i=new B.default,r=new Array,n=this.MapStock.get(a.Plate);for(var s in t.stock){var o=t.stock[s];if(r.push(o.symbol),this.MapStock.has(o.symbol)){var h=this.MapStock.get(o.symbol);h.SetBaseData(o)}else{var h=new D(o.symbol);h.SetBaseData(o),this.MapStock.set(o.symbol,h)}}var l=a.SortField.toString()+"-"+a.Order.toString();if(!n.Sort.has(l))return i;n.Sort.get(l).arySymbol=r;var u=!0,c=!1,d=void 0;try{for(var f,m=(0,R.default)(a.TagID);!(u=(f=m.next()).done);u=!0){var o=f.value;i.set(o,new Array([n.Symbol]))}}catch(t){c=!0,d=t}finally{try{!u&&m.return&&m.return()}finally{if(c)throw d}}return i},this.RecvSubDocumentData=function(t,e){var a=new B.default;for(var i in t.stock){var r=t.stock[i],n=this.MapStock.get(r.symbol);if(n){var s=null;switch(e){case K.CAPITAL_FLOW_DAY_DATA:n.SetCapitalFlowDayData(r.flowday,e),s=n.CapitalFlowDayID;break;case K.CAPITAL_FLOW_DAY3_DATA:n.SetCapitalFlowDayData(r.flowday3,e),s=n.CapitalFlowDay3ID;break;case K.CAPITAL_FLOW_DAY5_DATA:n.SetCapitalFlowDayData(r.flowday5,e),s=n.CapitalFlowDay5ID;break;case K.CAPITAL_FLOW_DAY10_DATA:n.SetCapitalFlowDayData(r.flowday10,e),s=n.CapitalFlowDay10ID;break;case K.DDE_DAY_DATA:n.SetDDE(r.dde,e),s=n.DDEID;break;case K.DDE_DAY3_DATA:n.SetDDE(r.dde3,e),s=n.DDE3ID;break;case K.DDE_DAY5_DATA:n.SetDDE(r.dde5,e),s=n.DDE5ID;break;case K.DDE_DAY10_DATA:n.SetDDE(r.dde10,e),s=n.DDE10ID}if(s&&s.size>0){var o=!0,h=!1,l=void 0;try{for(var u,c=(0,R.default)(s);!(o=(u=c.next()).done);o=!0){var d=u.value;a.has(d)?a.get(d).push(n.Symbol):a.set(d,new Array(n.Symbol))}}catch(t){h=!0,l=t}finally{try{!o&&c.return&&c.return()}finally{if(h)throw l}}}}}return a},this.RecvEventData=function(t,e){var a=new B.default;for(var i in t.stock){var r=t.stock[i],n=this.MapStock.get(r.symbol);if(n&&(n.SetEventData(r),n.EventTagID.size>0)){var s=!0,o=!1,h=void 0;try{for(var l,u=(0,R.default)(n.EventTagID);!(s=(l=u.next()).done);s=!0){var c=l.value;a.has(c)?a.get(c).push(n.Symbol):a.set(c,new Array(n.Symbol))}}catch(t){o=!0,h=t}finally{try{!s&&u.return&&u.return()}finally{if(o)throw h}}}}return a},this.RecvCompanyData=function(t,e){var a=new B.default;for(var i in t.stock){var r=t.stock[i],n=this.MapStock.get(r.symbol);if(n&&(n.SetCompanyData(r),n.CompanyTagID.size>0)){var s=!0,o=!1,h=void 0;try{for(var l,u=(0,R.default)(n.CompanyTagID);!(s=(l=u.next()).done);s=!0){var c=l.value;a.has(c)?a.get(c).push(n.Symbol):a.set(c,new Array(n.Symbol))}}catch(t){o=!0,h=t}finally{try{!s&&u.return&&u.return()}finally{if(o)throw h}}}}return a},this.RecvPlateData=function(t,e){var a=new B.default;for(var i in t.stock){var r=t.stock[i],n=this.MapStock.get(r.symbol);if(n&&(n.SetPlateData(r),n.PlateTagID.size>0)){var s=!0,o=!1,h=void 0;try{for(var l,u=(0,R.default)(n.PlateTagID);!(s=(l=u.next()).done);s=!0){var c=l.value;a.has(c)?a.get(c).push(n.Symbol):a.set(c,new Array(n.Symbol))}}catch(t){o=!0,h=t}finally{try{!s&&u.return&&u.return()}finally{if(o)throw h}}}}return a}}function T(t){this.SearchStockApiUrl=W.Domain+"/API/StockSpell",this.UpdateUICallback=t,this.PageSize=50,this.Count,this.EndOffset,this.Data=new Array,this.SearchString="",this.SearchType=0,this.Search=function(t,e){if(this.SearchString==t&&this.SearchType==e)"function"==typeof this.UpdateUICallback&&this.UpdateUICallback(this);else{this.SearchString=t,this.SearchType=e,this.Count=0,this.EndOffset=0,this.Data=[];var a=this.PageSize-1;this.ReqeustSearchStock(this.SearchString,this.SearchType,this.EndOffset,a)}},this.IsEndPage=function(){return this.Count<=0||this.EndOffset>this.Count-1},this.NextPage=function(){if(!(this.EndOffset+1>this.Count)){var t=this.EndOffset+this.PageSize;this.ReqeustSearchStock(this.SearchString,this.SearchType,this.EndOffset,t)}},this.ReqeustSearchStock=function(t,e,a,i){var r=this;G.default.ajax({url:this.SearchStockApiUrl,data:{input:t,start:a,end:i,type:e},type:"post",dataType:"json",async:!0,success:function(t){r.RecvSearchStockData(t,K.SEARCH_STOCK_DATA)},error:function(t){r.RecvError(t,K.SEARCH_STOCK_DATA)}})},this.RecvSearchStockData=function(t){for(var e in t.stock){var a=t.stock[e];this.Data.push({Name:a.name,Symbol:a.symbol,Type:a.type})}0==t.count?(this.Count=0,this.EndOffset=0):(0==this.Count&&(this.Count=t.count),this.EndOffset=t.end,this.Count>0&&this.EndOffset>this.Count&&(this.EndOffset=this.Count-1)),"function"==typeof this.UpdateUICallback&&this.UpdateUICallback(this)},this.RecvError=function(t,e){console.log("[SearchStock::RecvError] datatype="+e.toString()),console.log(t),"function"==typeof this.UpdateUICallback&&this.UpdateUICallback(this,"error")}}function y(){this.IsAutoUpdate=!0,this.AutoUpateTimeout=5e3,this.Timeout,this.ApiUrl,this.Data,this.Error,this.UpdateUICallback,this.RequestData=function(){},this.Stop=function(){this.IsAutoUpdate=!1,this.Timeout&&clearTimeout(this.Timeout)},this.AutoUpate=function(){if(this.Timeout&&clearTimeout(this.Timeout),this.IsAutoUpdate&&(this.Timeout&&clearTimeout(this.Timeout),this.IsAutoUpdate)){var t=this;if(this.Symbol){var e=j.GetMarketStatus(this.Symbol);2==e?this.Timeout=setTimeout(function(){t.RequestData()},this.AutoUpateTimeout):1==e&&(this.Timeout=setTimeout(function(){t.AutoUpdate()},this.AutoUpateTimeout))}else{var t=this,a=new Date,i=100*a.getHours()+a.getMinutes();a.getDay()>0&&a.getDay()<6&&i>=930&&i<1530&&(this.Timeout=setTimeout(function(){t.RequestData()},this.AutoUpateTimeout))}}},this.InvokeUpdateUICallback=function(){this.UpdateUICallback&&this.UpdateUICallback(this)}}function I(t){this.newMethod=y,this.newMethod(),delete this.newMethod,this.Symbol=t,this.ApiUrl=W.Domain+"/API/StockShortTerm",this.Count=20,this.RequestData=function(){var t=this,e={count:this.Count};this.Symbol&&(e.symbol=this.Symbol),G.default.ajax({url:this.ApiUrl,data:e,type:"post",dataType:"json",async:!0,success:function(e){t.RecvData(e,K.SHORT_TERM_DATA)},fail:function(e){t.RecvError(e,K.SHORT_TERM_DATA)}})},this.RecvData=function(t,e){this.Data=[];for(var a in t.shortterm){var i=t.shortterm[a];this.Data.push({Date:i.date,Name:i.name,Symbol:i.symbol,Time:i.time,Content:i.content,TypeInfo:i.typeinfo,Type:i.type})}this.UpdateUICallback&&this.UpdateUICallback(this),this.AutoUpate()},this.RecvError=function(t,e){}}function x(t){this.newMethod=y,this.newMethod(),delete this.newMethod,this.Symbol=t,this.Date,this.RequestData=function(){this.Data=null,this.Error=null;var t=this,e=W.CacheDomain+"/cache/dealday/day/"+this.Date+"/"+this.Symbol+".json";console.log("[DealDay::RequestData] cache url ",e),G.default.ajax({url:e,type:"get",dataType:"json",async:!0,success:function(e){t.RecvData(e,K.DEAL_DAY_DATA)},error:function(e){t.RecvError(e,K.DEAL_DAY_DATA)}})},this.RecvData=function(t,e){if(!t.day||!t.deal)return void this.InvokeUpdateUICallback();var a=t.deal.amount,i=t.deal.price,r=t.deal.time,n=t.deal.vol,s=t.deal.flag;if(!(s&&n&&r&&i&&a))return void this.InvokeUpdateUICallback();for(var o={Date:t.date,Open:t.day.open,Close:t.day.price,YClose:t.day.yclose,Symbol:t.symbol,Name:t.name,Deal:[],PriceList:[]},h=new B.default,l=0,u=Math.min(r.length,n.length,s.length,i.length,a.length),c=0;c<u;++c){var d={Time:r[c],Vol:n[c],Flag:"",Price:i[c],Amount:a[c]};0===s[c]?d.Flag="B":1===s[c]&&(d.Flag="S"),d.Time>15e4&&(d.Time=15e4),o.Deal.push(d);var f;h.has(d.Price)?(f=h.get(d.Price),f.Vol+=d.Vol):(f={Vol:d.Vol,Price:d.Price,BuyVol:0,SellVol:0,NoneVol:0},h.set(d.Price,f)),0===s[c]?f.BuyVol+=d.Vol:1===s[c]?f.SellVol+=d.Vol:f.NoneVol+=d.Vol,l+=d.Vol}var m=!0,C=!1,p=void 0;try{for(var D,v=(0,R.default)(h);!(m=(D=v.next()).done);m=!0){var g=D.value,S=g[1];l>0&&(S.Proportion=S.Vol/l),o.PriceList.push(S)}}catch(t){C=!0,p=t}finally{try{!m&&v.return&&v.return()}finally{if(C)throw p}}o.PriceList.sort(function(t,e){return e.Price-t.Price}),this.Data=o,this.InvokeUpdateUICallback()},this.RecvError=function(t,e){console.log("[DealDay::RecvError] status="+t.status+" statusText="+t.statusText+" responseText="+t.responseText),this.Error={Status:t.status,Message:t.responseText},this.InvokeUpdateUICallback()}}function L(t){this.newMethod=y,this.newMethod(),delete this.newMethod,this.ApiUrl=W.Domain+"/API/StockBlockMember",this.PageSize=10,this.Start=0,this.OrderField,this.Order,this.Symbol=t,this.OrderNull=0,this.Field=new Array,this.Data=new Array,this.PageInfo,this.SetField=function(t){this.Field=new Array;for(var e in t){var a=t[e],i=U.GetFieldName(a);null!=i&&this.Field.push(i)}return this.Field.length>0},this.SetOrder=function(t,e){this.Order=null,this.OrderField=null;var a=U.GetFieldName(t);return null!=a&&(this.OrderField=a,this.Order=e,!0)},this.RequestData=function(){this.Data=[];var t=this;G.default.ajax({url:this.ApiUrl,data:{symbol:this.Symbol,field:this.Field,order:this.Order,orderfield:this.OrderField,start:this.Start,end:this.Start+this.PageSize,ordernull:this.OrderNull},type:"post",dataType:"json",success:function(e){t.RecvData(e,K.BLOCK_MEMBER_DATA)},error:function(e){t.RecvError(e,K.BLOCK_MEMBER_DATA)}})},this.RecvData=function(t,e){for(var a in t.stock){var i=t.stock[a];if(null!=i.symbol){var r=new D(i.symbol);r.SetData(i),this.Data.push(r)}}this.PageInfo={Count:t.count,Start:t.start,End:t.end},"function"==typeof this.UpdateUICallback&&this.UpdateUICallback(this),this.AutoUpate()},this.RecvError=function(t,e){}}function M(){this.newMethod=y,this.newMethod(),delete this.newMethod,this.BlockType=1,this.Count=20,this.OrderField="increase",this.Order=-1,this.Field=["symbol","price","name","vol","increase","indextop","risefall"],this.ApiUrl=W.Domain+"/API/StockBlockTop",this.SetField=function(t){},this.ReqeustData=function(){var t=this;G.default.ajax({url:this.ApiUrl,data:{blocktype:this.BlockType,start:0,end:this.Count,field:this.Field,orderfield:this.OrderField,order:this.Order},type:"post",dataType:"json",async:!0,success:function(e){t.RecvData(e,K.BLOCK_TOP_DATA)},fail:function(e){t.RecvError(e,K.BLOCK_TOP_DATA)}})},this.RecvData=function(t,e){var a=t;this.Data=[],this.resCount=a.count;for(var i in a.stock){var r=a.stock[i];if(null!=r.indextop)var n={Down:r.indextop.down,Stop:r.indextop.stop,Up:r.indextop.up,Unchanged:r.indextop.unchanged,DownStock:{Name:r.indextop.downstock.name,Symbol:r.indextop.downstock.symbol},UpStock:{Name:r.indextop.upstock.name,Symbol:r.indextop.upstock.symbol}};this.Data.push({Name:r.name,Symbol:r.symbol,Increase:r.increase,Risefall:r.risefall,IndexTop:n})}this.UpdateUICallback&&this.UpdateUICallback(this),this.AutoUpate()},this.RecvError=function(t,e){}}function _(t){this.newMethod=y,this.newMethod(),delete this.newMethod,this.ApiUrl=W.Domain+"/API/StockMinuteImage",this.Symbol=[t],this.Data=[],this.RequestData=function(){this.Data=[];var t=this;G.default.ajax({url:this.ApiUrl,data:{symbol:this.Symbol},type:"post",dataType:"json",success:function(e){t.RecvData(e,K.IMAGE_MINUTE_DATA)},error:function(e){t.RecvError(e,K.IMAGE_MINUTE_DATA)}})},this.RecvData=function(t,e){for(var a in t.symbol){var i={Symbol:t.symbol[a],Image:t.imagerelative[a]};this.Data.push(i)}"function"==typeof this.UpdateUICallback&&this.UpdateUICallback(this)},this.RecvError=function(t,e){}}function b(t){this.newMethod=y,this.newMethod(),delete this.newMethod,this.Symbol=t,this.RequestData=function(){this.Data=null,this.Error=null;var t=this,e=W.CacheDomain+"/cache/historyday/all/"+this.Symbol+".json";console.log("[HistoryDayData::RequestData] cache url ",e),G.default.ajax({url:e,type:"get",dataType:"json",async:!0,success:function(e){t.RecvData(e,K.HISTORY_DAY_DATA)},error:function(e){t.RecvError(e,K.HISTORY_DAY_DATA)}})},this.RecvData=function(t,e){if(!t.symbol||!t.name)return void this.InvokeUpdateUICallback();var a=t.amount,i=t.close,r=t.date,n=t.high,s=t.low,o=t.open,h=t.vol,l=t.yclose;if(!(a&&i&&r&&n&&s&&o&&h&&l))return void this.InvokeUpdateUICallback();for(var u={UpdateDate:t.update,Symbol:t.symbol,Name:t.name,KLine:[]},c=0;c<r.length;++c){var d={Date:r[c],YClose:l[c],Open:o[c],High:n[c],Low:s[c],Close:i[c],Vol:h[c],Amount:a[c]};u.KLine.push(d)}this.Data=u,this.InvokeUpdateUICallback()},this.RecvError=function(t,e){console.log("[HistoryDayData::RecvError] status="+t.status+" statusText="+t.statusText+" responseText="+t.responseText),this.Error={Status:t.status,Message:t.responseText},this.InvokeUpdateUICallback()},this.GetWeekData=function(){return this.Data&&this.Data.KLine?this.GetDayPeriodData(1):[]},this.GetMonthData=function(){return this.Data&&this.Data.KLine?this.GetDayPeriodData(2):[]},this.GetDayPeriodData=function(t){var e=new Array,a=0,i=null;for(var r in this.Data.KLine){var n=!1,s=this.Data.KLine[r];switch(t){case 1:var o=this.GetFirday(s.Date);o!=a&&(n=!0,a=o);break;case 2:parseInt(s.Date/100)!=parseInt(a/100)&&(n=!0,a=s.Date);break;case 3:parseInt(s.Date/1e4)!=parseInt(a/1e4)&&(n=!0,a=s.Date)}if(n){if(i={},i.Date=s.Date,e.push(i),null==s.Open||null==s.Close)continue;i.Open=s.Open,i.High=s.High,i.Low=s.Low,i.YClose=s.YClose,i.Close=s.Close,i.Vol=s.Vol,i.Amount=s.Amount}else{if(null==i)continue;if(null==s.Open||null==s.Close)continue;null==i.Open||null==i.Close?(i.Open=s.Open,i.High=s.High,i.Low=s.Low,i.YClose=s.YClose,i.Close=s.Close,i.Vol=s.Vol,i.Amount=s.Amount):(i.High<s.High&&(i.High=s.High),i.Low>s.Low&&(i.Low=s.Low),i.Close=s.Close,i.Vol+=s.Vol,i.Amount+=s.Amount,i.Date=s.Date)}}return e},this.GetFirday=function(t){var e=new Date(parseInt(t/1e4),t/100%100-1,t%100),a=e.getDay();if(5==a)return t;var i=e.getTime();if(a<5){var r=864e5*(5-a);i+=r}else{var r=864e5*(a-5);i-=r}e.setTime(i);var n=1e4*e.getFullYear()+100*(e.getMonth()+1)+e.getDate();e.getDay();return n}}function w(t){this.newMethod=y,this.newMethod(),delete this.newMethod,this.Symbol=t,this.ApiUrl=W.Domain+"/API/StockPriceList",this.RequestData=function(){if(this.Symbol){var t=this,e={};Array.isArray(this.Symbol)?e.Symbol=this.Symbol:e.Symbol=[this.Symbol],G.default.ajax({url:this.ApiUrl,data:e,type:"post",dataType:"json",async:!0,success:function(e){t.RecvData(e,K.DEAL_PRICE_LIST_DATA)},fail:function(e){t.RecvError(e,K.DEAL_PRICE_LIST_DATA)}})}},this.RecvData=function(t,e){if(this.Data=null,!(t.statistics.length<=0)){this.Data={Day:{},PriceList:[]};var a=t.data[0];this.Data.Day={Date:a.date,YClose:a.yclose,Price:a.price,Vol:a.vol,Time:a.time},this.Data.Stock={Symbol:a.symbol,Name:a.name};var i=t.statistics[0];for(var r in i.list){var n=i.list[r],s={Price:n[0],Vol:n[1],BuyVol:n[2],SellVol:n[3],NoneVol:n[4]};a.vol>0&&(s.Proportion=s.Vol/a.vol),this.Data.PriceList.push(s)}this.UpdateUICallback&&this.UpdateUICallback(this),this.AutoUpate()}},this.RecvError=function(t,e){}}function F(t){this.newMethod=y,this.newMethod(),delete this.newMethod,this.IsAutoUpdate=!1,this.Symbol=t,this.PageSize=20,this.Request=function(t,e){this.Error=null;var a=this,i=t*e,r=i+e,n=W.Domain+"/API/StockDetail";console.log("[LatestDetailData::RequestData] url="+n+", start="+i+" , end="+r),G.default.ajax({url:n,data:{symbol:this.Symbol,start:i,end:r},type:"post",dataType:"json",async:!0,success:function(t){a.RecvData(t,K.LATEST_DETAIL_DATA)},error:function(t){a.RecvError(t,K.LATEST_DETAIL_DATA)}})},this.RequestData=function(){this.Data={Deal:[],Count:0,Reqeust:{PageIndex:0},Response:{}},this.Request(0,this.PageSize)},this.RequestPage=function(t){this.Data||(this.Data={Deal:[],Count:0}),this.Data.Reqeust={PageIndex:t},this.Data.Response={};for(var e=t*this.PageSize,a=e+this.PageSize,i=!0,r=e;r<a;++r)if(!this.Data.Deal[r]){i=!1;break}i?(this.Data.Response={Start:e,End:a},this.InvokeUpdateUICallback()):this.Request(t,this.PageSize)},this.RecvData=function(t,e){if(this.Data.Count=t.count,!t.detail)return void this.InvokeUpdateUICallback();this.Data.Day={YClose:t.yclose,Open:t.open,Close:t.price,Date:t.date},this.Data.Stock={Symbol:t.symbol,Name:t.name};for(var a=t.start,i=0,r=a;i<t.detail.length;++i,++r){var n=t.detail[i],s={Time:n[0],Price:n[1],Vol:n[2],Amount:n[3],Flag:""};0===n[4]?s.Flag="B":1===n[4]&&(s.Flag="S"),this.Data.Deal[r]=s}this.Data.Response={Start:t.start,End:t.end},this.InvokeUpdateUICallback()},this.RecvError=function(t,e){console.log("[LatestDetailData::RecvError] status="+t.status+" statusText="+t.statusText+" responseText="+t.responseText),this.Error={Status:t.status,Message:t.responseText},this.InvokeUpdateUICallback()}}function E(){this.newMethod=y,this.newMethod(),delete this.newMethod,this.ApiUrl=W.Domain+"/api/StockListAnalyze",this.PolicyGuid,this.Plate="",this.SymbolList=[],this.RequestData=function(){var t=this;G.default.ajax({url:t.ApiUrl,data:{PolicyGuid:t.PolicyGuid,Plate:t.Plate,Symbol:t.SymbolList},type:"post",dataType:"json",async:!0,success:function(e){t.RecvData(e)},error:function(e){t.RecvError(e)}})},this.RecvData=function(t){this.Data={};var e=t;if(0!=e.count){if(e.concept){var a=[];for(var i in e.concept.data){var r=e.concept.data[i],n={};n.Name=r[0],n.Symbol=r[1],n.Ratio=r[2],n.Count=r[3],n.Increase=r[4],n.Price=r[5],n.Week1=r[6],n.Week4=r[7],a.push(n)}this.Data.Concept=a}e.distributed&&(this.Data.Distributed=e.distributed),e.industry&&(this.Data.Industry=e.industry),e.quadrant&&(this.Data.Quadrant=e.quadrant),e.region&&(this.Data.Region=e.region),this.UpdateUICallback&&this.UpdateUICallback(this)}},this.RecvError=function(t){console.log(t)}}Object.defineProperty(e,"__esModule",{value:!0});var A,N=a(151),O=i(N),P=a(160),R=i(P),k=a(120),B=i(k),Y=a(161),H=i(Y),V=a(121),G=i(V),W=new r,X={SYMBOL:0,NAME:1,OPEN:2,PRICE:3,HIGH:4,LOW:5,YCLOSE:6,VOL:7,AMOUNT:8,DATE:9,TIME:10,INCREASE:11,BUY5:12,SELL5:13,DEAL:14,AMPLITUDE:15,MARKET_VALUE:16,FLOW_MARKET_VALUE:17,BOOK_RATE:18,BOOK_DIFFER:19,PE:20,PB:21,EXCHANGE_RATE:23,ROE:24,FINANCE_DATE:25,FINANCE_PERSEARNING:26,FINANCE_PERNETASSET:27,FINANCE_NPROFIT:28,FINANCE_NPROFITINCREASE:29,FINANCE_NNETPROFIT:30,FINANCE_NNPROFITINCREASE:31,FINANCE_NNPROFITSPEED:32,FINANCE_EPS:33,MAX_PRICE:34,MIN_PRICE:35,RISE_FALL_PRICE:36,FINANCE_BENFORD:37,RISEFALLSPEED_1:38,RISEFALLSPEED_3:39,RISEFALLSPEED_5:40,RISEFALLSPEED_10:41,RISEFALLSPEED_15:42,MINUTE_AMPLITUDE_1:43,MINUTE_AMPLITUDE_3:44,MINUTE_AMPLITUDE_5:45,MINUTE_AMPLITUDE_10:46,MINUTE_AMPLITUDE_15:47,MINUTE_AMOUNT_1:48,MINUTE_AMOUNT_3:49,MINUTE_AMOUNT_5:50,MINUTE_AMOUNT_10:51,MINUTE_AMOUNT_15:52,COMPANY_NAME:53,PLATE_INDUSTRY:54,PLATE_CONCEPT:55,PLATE_REGION:56,COMPANY_BUSINESS:57,COMPANY_VOL:58,COMPANY_PRICE:59,COMPANY_RELEASEDATE:60,COMPANY_COMPETENCE:61,CAPITAL_FLOW_DAY:67,CAPITAL_FLOW_DAY3:68,CAPITAL_FLOW_DAY5:69,CAPITAL_FLOW_DAY10:70,DDE:71,DDE3:72,DDE5:73,DDE10:74,EVENTS:75,CAPITAL_A:76,CAPITAL_TOTAL:77,CAPTIAL_ARATE:78,VOLRATIO:79,PE2:80,PE3:81,INDEXTOP:100,WEEK:101,HEAT:102},U={m_mapFiled:new B.default([[X.NAME,"name"],[X.SYMBOL,"symbol"],[X.PRICE,"price"],[X.INCREASE,"increase"],[X.PE,"pe"],[X.FINANCE_BENFORD,"finance.benford"],[X.YCLOSE,"yclose"],[X.RISEFALLSPEED_1,"risefallspeed.1"],[X.RISEFALLSPEED_3,"risefallspeed.3"],[X.RISEFALLSPEED_5,"risefallspeed.5"],[X.RISEFALLSPEED_10,"risefallspeed.10"],[X.RISEFALLSPEED_15,"risefallspeed.15"],[X.MINUTE_AMPLITUDE_1,"mamplitude.1"],[X.MINUTE_AMPLITUDE_3,"mamplitude.3"],[X.MINUTE_AMPLITUDE_5,"mamplitude.5"],[X.MINUTE_AMPLITUDE_10,"mamplitude.10"],[X.MINUTE_AMPLITUDE_15,"mamplitude.15"],[X.MINUTE_AMOUNT_1,"mamount.1"],[X.MINUTE_AMOUNT_3,"mamount.3"],[X.MINUTE_AMOUNT_5,"mamount.5"],[X.MINUTE_AMOUNT_10,"mamount.10"],[X.MINUTE_AMOUNT_15,"mamount.15"]]),GetFieldName:function(t){return this.m_mapFiled.has(t)?this.m_mapFiled.get(t):null}};S.Init=function(){return new S},S.SetDomain=function(t,e){t&&(W.Domain=t),e&&(W.CacheDomain=e)},S.GetSearchStock=function(t){return new T(t)},S.GetShortTerm=function(t){return new I(t)},S.GetDealDay=function(t){return new x(t)},S.GetBlockMember=function(t){return new L(t)},S.GetBlockTop=function(){return new M},S.GetMinuteImage=function(t){return new _(t)},S.GetHistoryDayData=function(t){return new b(t)},S.GetDealPriceListData=function(t){return new w(t)},S.GetLatestDetailData=function(t){return new F(t)},S.GetAnalylisPlate=function(){return new E},S.GetStockHistory=function(){return new g};var K={BASE_DATA:1,INDEX_BASE_DATA:2,HEAT_DATA:3,SORT_DATA:4,BUY_SELL_DATA:5,DEAL_DATA:6,DERIVATIVE_DATA:7,FINANCE_DATA:8,SEARCH_STOCK_DATA:9,SELF_STOCK_DATA:10,LOGON_DATA:11,BLOCK_MEMBER_DATA:13,SHORT_TERM_DATA:14,COMPANY_DATA:15,PLATE_DATA:16,CAPITAL_DATA:17,CAPITAL_FLOW_DAY_DATA:23,CAPITAL_FLOW_DAY3_DATA:24,CAPITAL_FLOW_DAY5_DATA:25,CAPITAL_FLOW_DAY10_DATA:26,DDE_DAY_DATA:27,DDE_DAY3_DATA:28,DDE_DAY5_DATA:29,DDE_DAY10_DATA:30,DEAL_DAY_DATA:105,EVENT_DATA:106,IMAGE_MINUTE_DATA:107,HISTORY_DAY_DATA:108,DEAL_PRICE_LIST_DATA:109,LATEST_DETAIL_DATA:110},j={SH:".SH",SZ:".SZ",HK:".HK",SHFE:".SHF",CFFEX:".CFE",DCE:".DCE",CZCE:".CZC",USA:".USA",IsUSA:function(t){return!!t&&t.indexOf(this.USA)>0},IsSH:function(t){var e=t.length-this.SH.length;return t.indexOf(this.SH)==e},IsSZ:function(t){var e=t.length-this.SZ.length;return t.indexOf(this.SZ)==e},IsHK:function(t){var e=t.length-this.HK.length;return t.indexOf(this.HK)==e},IsSHFE:function(t){return t.indexOf(this.SHFE)>0},IsCFFEX:function(t){return t.indexOf(this.CFFEX)>0},IsDCE:function(t){return t.indexOf(this.DCE)>0},IsCZCE:function(t){return t.indexOf(this.CZCE)>0},IsChinaFutures:function(t){return this.IsCFFEX(t)||this.IsCZCE(t)||this.IsDCE(t)||this.IsSHFE(t)},IsSHSZ:function(t){return this.IsSZ(t)||this.IsSH(t)},IsSHSZFund:function(t){if(!t)return!1;if(this.IsSH(t)){if("5"==t.charAt(0)&&"1"==t.charAt(1))return!0}else if(this.IsSZ(t)&&"1"==t.charAt(0)&&("5"==t.charAt(1)||"6"==t.charAt(1)||"7"==t.charAt(1)||"8"==t.charAt(1)))return!0;return!1},IsSHSZIndex:function(t){if(!t)return!1;var e=t.toUpperCase();if(this.IsSH(e)){var a=e.replace(".SH","");if("0"==e.charAt(0)&&parseInt(a)<=3e3)return!0}else if(this.IsSZ(e)){if("3"==e.charAt(0)&&"9"==e.charAt(1))return!0}else if(e.indexOf(".CI")>0)return!0;return!1},IsSHSZStockA:function(t){if(!t)return!1;var e=t.toUpperCase();if(this.IsSH(e)){e.replace(".SH","");if("6"==e.charAt(0))return!0}else if(this.IsSZ(e)&&"0"==e.charAt(0)){if("0"==e.charAt(1)&&"2"==e.charAt(1))return!0;if("7"!=e.charAt(1)&&"8"!=e.charAt(1))return!0}return!1},IsSHStockSTAR:function(t){if(!t)return!1;var e=t.toUpperCase();return!!this.IsSH(e)&&("6"==e.charAt(0)&&"8"==e.charAt(1)&&"8"==e.charAt(2))},GetMarketStatus:function(t){if(!t)return 0;var e=t.toUpperCase();if(this.IsUSA(e)){var a=GetLocalTime(-4);return r=a.getDay(),n=100*a.getHours()+a.getMinutes(),6==r||0==r?0:n>1730?3:n<930?1:2}var i=new Date,r=i.getDay(),n=100*i.getHours()+i.getMinutes();return 6==r||0==r?0:n>1540?3:n<925?1:2}};e.default=(A={JSStockInit:S.Init,STOCK_FIELD_NAME:X,JSStock:S,StockRead:v},(0,O.default)(A,"STOCK_FIELD_NAME",X),(0,O.default)(A,"RECV_DATA_TYPE",K),A)},function(t,e,a){"use strict";function i(){this.HistoryData,this.BuyData,this.SellData,this.IndexClose,this.NetCalculateModel=0,this.InitialCapital=1e4,this.Data=new n.default,this.SetPolicyData=function(t){this.HistoryData=t.KLineData,this.BuyData=t.BuyData,this.SellData=t.SellData,t.IndexClose&&(this.IndexClose=t.IndexClose)},this.ClearData=function(){this.Data=new n.default},this.GetBSData=function(t){for(var e=null,a=0;a<this.HistoryData.length;++a){if(this.HistoryData[a].Date>=t){e=a;break}}if(null===e)return null;console.log("[RegressionTest::GetBSData] startDate="+t+" index="+e);for(var i=[],r=null,a=e;a<this.HistoryData.length;++a){var n=this.BuyData[a],s=this.SellData[a],o=this.HistoryData[a];if(null===r){if(n>0){var h={Data:o,Count:0};a+1<this.HistoryData.length&&(h.NextOpen=this.HistoryData[a+1].Open),r={B:[h],S:null}}}else{for(var l in r.B)++r.B[l].Count;if(n>0){var h={Data:o,Count:0};a+1<this.HistoryData.length&&(h.NextOpen=this.HistoryData[a+1].Open),r.B.push(h)}else s>0&&(r.S={Data:o},i.push(r),r=null)}}var u={StartDate:this.HistoryData[e].Date,StartIndex:e,Count:this.HistoryData.length-e,BSData:i};return console.log("[RegressionTest::GetBSData] data",u),u},this.Calculate=function(t){var e={Count:t.Count,Max:null,Min:null,Average:null},a={Count:0,Days:0,Success:0,Fail:0,SuccessRate:0};for(var i in t.BSData){var r=t.BSData[i];for(var n in r.B){var s=r.B[n];null===e.Max?e.Max=s.Count:e.Max<s.Count&&(e.Max=s.Count),null===e.Min?e.Min=s.Count:e.Min>s.Count&&(e.Min=s.Count),++a.Count,a.Days+=s.Count,r.S.Data.Close>s.Data.Open?++a.Success:++a.Fail}}a.Count>0&&(e.Average=a.Days/a.Count,a.SuccessRate=a.Success/a.Count);var o,h=1;for(var i in t.BSData){var r=t.BSData[i];o=1===this.NetCalculateModel&&r.B[0].NextOpen>0?r.B[0].NextOpen:r.B[0].Data.Open;h*=(r.S.Data.Close-o)/o+1}h-=1;var l=this.HistoryData[t.StartIndex].Close,u=this.HistoryData[this.HistoryData.length-1].Close,c=(u-l)/l;console.log("[RegressionTest::Calculate] stock profit first["+this.HistoryData[t.StartIndex].Date+", YClose="+this.HistoryData[t.StartIndex].YClose+"] end["+this.HistoryData[this.HistoryData.length-1].Date+", Close="+this.HistoryData[this.HistoryData.length-1].Close+"]");var d=this.CaclulateNetValue(t),f=null,m=null;d&&d.length>0&&(f=this.CaclulateMaxDropdown(d),this.IndexClose&&(m=this.CaclulateBeta(d)));var C={Day:e,Trade:a,Profit:h,StockProfit:c,Excess:h-c,NetValue:d,MaxDropdown:f,Beta:m,BSDataPair:t.BSData};return console.log("[RegressionTest::Calculate] NetCalculateModel, result ",this.NetCalculateModel,C),C},this.CaclulateNetValue=function(t){for(var e,a=t.StartIndex,i=[],r={Position:0,Cache:this.InitialCapital},n=null,s=a;s<this.HistoryData.length;++s){var o=this.BuyData[s],h=this.SellData[s],l=this.HistoryData[s],u={Date:l.Date,Position:r.Position,Cache:r.Cache,Open:l.Open,Close:l.Close};if(u.MarketValue=u.Position*u.Close+u.Cache,null===n){if(o>0){n={B:{Data:l},S:null},e=1===this.NetCalculateModel&&s+1<this.HistoryData.length&&this.HistoryData[s+1].Open>0?this.HistoryData[s+1].Open:u.Open;var c=parseInt(u.Cache/e),d=u.Cache-e*c;u.Position=c,u.Cache=d,u.MarketValue=u.Position*u.Close+u.Cache}}else if(h>0){n.S={Data:l},n=null;var f=u.Position*u.Close;u.Position=0,u.Cache+=f,u.MarketValue=u.Position*u.Close+u.Cache}r.Position=u.Position,r.Cache=u.Cache,u.Net=u.MarketValue/this.InitialCapital,this.IndexClose&&(u.IndexClose=this.IndexClose[s]),i.push(u)}if(i.length<=0)return[];for(var m=[],s=0;s<i.length;++s){var C=i[s],p={Net:C.Net,Date:C.Date,Close:C.Close};C.IndexClose&&(p.IndexClose=C.IndexClose),m.push(p)}return m},this.CaclulateMaxDropdown=function(t){for(var e,a=t[0].Net,i=0,r=1;r<t.length;++r){var n=t[r],s=1-n.Net/a;i<s&&(i=s,e=n),a<n.Net&&(a=n.Net)}return console.log("[RegressionTest::CaclulateMaxDropdown] maxDay",e),i},this.CaclulateBeta=function(t){for(var e=t[0],a=[],i=[],r=0,n=0,s=1;s<t.length;++s){a[s-1]=0,i[s-1]=0;var o=t[s];o.IndexClose>0&&e.IndexClose>0&&(a[s-1]=(o.IndexClose-e.IndexClose)/e.IndexClose),o.Net>0&&e.Net>0&&(i[s-1]=(o.Net-e.Net)/e.Net),r+=a[s-1],n+=i[s-1],e=o}for(var h=r/a.length,l=n/i.length,u=0,s=0;s<a.length;++s)u+=(i[s]-l)*(a[s]-h);for(var c=0,s=0;s<a.length;++s)c+=(a[s]-h)*(a[s]-h);return u/c},this.Execute=function(t){for(var e in t){var a=t[e];if(this.Data.has(a.Name))console.log("[RegressionTest::Execute] id="+e+" Name="+a.Name+" Date:"+a.Date+" is exsit.");else{console.log("[RegressionTest::Execute] id="+e+" Name="+a.Name+" Date:"+a.Date);var i=this.GetBSData(a.Date),r=this.Calculate(i);this.Data.set(a.Name,r)}}}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(120),n=function(t){return t&&t.__esModule?t:{default:t}}(r);i.CaclulateOverlayData=function(t){if(!t.Main||!t.Sub)return null;var e=t.Main.length;for(var a in t.Sub){if(t.Sub[a].length!=e)return console.log("[RegressionTest::OverlayData] id="+a+" data count not match. MainData count="+e),null}var i=[],r={Sub:[]};r.Main=t.Main[0],i.push([]);for(var a=0;a<t.Sub.length;++a){var n=t.Sub[a];r.Sub[a]=n[0],i.push([])}for(var a=0;a<t.Main.length;++a){var s=t.Main[a],o=(s-r.Main)/r.Main;i[0][a]=o;for(var h=0;h<t.Sub.length;++h){var n=t.Sub[h],l=n[a],u=(l-r.Sub[h])/r.Sub[h];i[h+1][a]=u}}return i},i.GetPolicyData=function(t){var e={KLineData:null,IndexClose:null,BuyData:null,SellData:null};e.KLineData=t.HistoryData.Data;for(var a in t.OutVar){var i=t.OutVar[a];"INDEXCLOSE"==i.Name?e.IndexClose=i.Data:"DRAWICON"==i.Name&&i.Draw&&i.Draw.Icon&&(13===i.Draw.Icon.ID?e.BuyData=i.Draw.DrawData:14===i.Draw.Icon.ID&&(e.SellData=i.Draw.DrawData))}return e.KLineData&&e.BuyData&&e.SellData?e:null},e.default={RegressionTest:i}},function(t,e,a){var i=a(468);"string"==typeof i&&(i=[[t.i,i,""]]);a(66)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,a){e=t.exports=a(2)(!1),e.push([t.i,'body,html{height:100%}body{margin:0;font-size:13px}ol li,ul li{list-style:none}*{padding:0;margin:0}a{transition-duration:.4s,.5s;transition-property:background-color,color;transition-timing-function:ease,ease}i{font-style:normal}canvas,input{outline:0}.redColor{color:#ee1515}.greenColor{color:#199e00}::-webkit-scrollbar{width:8px;height:8px}::-webkit-scrollbar-button{display:none}::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:4px}.context-menu-wrapper{position:absolute;z-index:500;overflow:auto;border:1px solid;border-color:#b5b7b9;background-color:#fff;white-space:nowrap}html.theme-dark .context-menu-wrapper{background-color:#1c2030;border-color:#363c4e}.context-menu-wrapper .backlight{background-color:#f2f3f5}html.theme-dark .context-menu-wrapper .backlight{background-color:#2f3241}tr.context-menu.disabled{color:#9d9d9d}tr.context-menu.spinner>td{background:url("/static/images/loading-small.0c15c93a2cb0.gif") 50% no-repeat;cursor:default}.submenu.center{background-color:#fff}.context-menu{font-family:Tahoma,Arial,sans-serif;font-size:11px;white-space:nowrap}tr.context-menu{cursor:pointer;height:29px}tr.context-menu:hover{background:#f2f3f5}html.theme-dark tr.context-menu-hover{background:#2f3241}td.context-menu{opacity:1;cursor:pointer;padding-left:4px}.context-menu-item-separated{border-bottom:1px solid #cecece}.context-menu .text{min-width:100px}.context-menu .spacer{width:18px;text-align:center}.context-menu .icon{height:27px;width:18px}.context-menu .shortcut{text-align:right;color:#aaa;padding:0 2px 0 10px}.submenu-arrow{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAKElEQVR4AWOgExgFo6Cvr+8/1Q0EYaoaCMNUNBCBB68LqRvLIxiMAgAKDyqRblYs2AAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-position:50%;width:20px}.border td{border-bottom:1px solid #b5b7b9}.tools{margin-bottom:8px;height:38px;color:#4c525e;float:left}.tools .txt{height:28px;width:80px;border:none;margin-top:3px;padding-left:5px}.tools .item{float:left;margin-right:1px;padding:0 5px;height:36px;line-height:36px}.button,.tools .item{cursor:pointer;border:1px solid #eceff2}.button{box-shadow:inset 0 0 0 0 #edf0f2;background:linear-gradient(180deg,#fcfffa 5%,#fff);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#fcfffa",endColorstr="#ffffff",GradientType=0);background-color:#fcfffa;display:inline-block;font-family:Arial;font-size:13px;text-decoration:none}.button:hover{background:linear-gradient(180deg,#f2f3f5 5%,#f2f3f5);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#f2f3f5",endColorstr="#f2f3f5",GradientType=0);background-color:#f2f3f5}.button:active{position:relative;top:1px}.dropdownList{width:200px;border:1px solid #eceff2;position:absolute;z-index:500;overflow:auto;padding:5px 0;background-color:#fff;box-shadow:0 1px 3px 0 rgba(0,0,0,.07);border-radius:3px;display:none;color:#4c525e}.dropdownList .item{padding:2px 8px;height:28px;line-height:28px}.dropdownList .item:hover{background-color:#ebf7fc;cursor:pointer}.selected{height:38px;overflow:hidden;text-align:center;float:left}.selected ul li{float:left;margin:0 5px;list-style-type:none}.selected ul a{display:block;background:#ebf7fc;height:38px;text-decoration:none;color:#4c525e;transition:margin .4s ease-in-out;padding:0 8px;line-height:38px}.selected ul a:nth-of-type(2n){background:#fff2f4;color:#4c525e}.drawing{height:36px;float:left;border:1px solid #eceff2}.drawing .lable{background:#eceff2;height:36px;line-height:36px;float:left;margin-right:1px;padding:0 5px}.drawing .item{float:left;margin:1px 1px 1px 0;padding:0 5px;cursor:pointer;border:1px solid #eceff2;height:32px;line-height:32px}.drawing .item.active{background:#1592e6;color:#fff;border-color:#1592e6}.drawtools{border:1px solid #ccc;background:#fff}.drawtools .icon-image{text-align:center;padding:5px 0 5px 10px;height:24px;position:relative}.drawtools .icon-image>i:first-of-type{font-size:24px}.drawtools .icon-image.active>i:first-of-type{color:#0182d4}.drawtools .icon-image .menuTwo{position:absolute;top:0;right:46px;border:1px solid #ccc;background-color:#fff;display:none;text-align:right}.drawtools .icon-image .menuTwo .menuTwoItem{height:24px;line-height:24px;width:125px;font-size:12px;padding:5px 0;display:block;padding-right:10px}.drawtools .icon-image .menuTwo .menuTwoItem:after{content:"";display:block;width:0;height:0;clear:both;overflow:hidden}.drawtools .icon-image .menuTwo .menuTwoItem>i{float:right;margin-left:5px;font-size:24px}.drawtools .icon-image .menuTwo .menuTwoItem:hover{background-color:#ebf7fc}.drawtools .icon-image .menuTwo .menuTwoItem.current{background-color:#37a6ef}.drawtools .icon-image .contentArrow{font-size:12px;position:absolute;top:12px;left:0;transition:transform .2s;display:none}.drawtools .icon-image .contentArrow.trans{transform:rotate(180deg)}.drawtools .icon-image:last-child{border-top:1px solid #ccc}.chartpicture-text-setting{width:400px;background-color:#fff;border:1px solid;border-color:#b5b7b9;box-shadow:0 0 10px 0 rgba(0,0,0,.15)}.titleWrap{width:100%;border-bottom:1px solid;border-color:#dadde0}.titleWrap,.titleWrap .titleName{height:53px;line-height:53px;position:relative}.titleWrap .titleName{display:inline-block;padding:0 2px;font-size:14px;color:#4f5966;margin-left:14px}.titleWrap .titleName:after{content:" ";position:absolute;display:block;left:0;bottom:-1px;width:100%;height:3px;background-color:#5cb888}.titleWrap .closeBtn{font-size:12px;color:#777;position:absolute;top:0;right:0;padding-right:14px;padding-left:14px;cursor:pointer}.contentWrap{padding:15px 27px}.contentWrap .styleOptions{height:27px;margin-bottom:7px}.contentWrap .styleOptions .colorPicker{width:25px;height:25px;cursor:pointer;display:inline-block;border:1px solid;border-color:#1e90ff;background-color:#1e90ff;margin-right:5px;position:relative}.contentWrap .colorPicker #fontColor{position:absolute;top:0;left:0;opacity:0;width:100%;height:100%;display:block}.contentWrap .likeSelect{height:25px;width:50px;background-color:#f1f3f6;line-height:25px;cursor:pointer;display:inline-block;vertical-align:top;font-size:14px;padding:0 20px 0 10px;border:1px solid;border-color:#dadde0;margin-right:5px;position:relative}.contentWrap .fontSelect{font-size:12px}.contentWrap .likeSelect .choicedText{display:inline-block;width:78px;height:100%;overflow:hidden}.contentWrap .likeSelect i{font-size:15px;position:absolute;top:0;right:6px}.contentWrap .likeSelect .selectList{position:absolute;top:27px;left:0;background-color:#fff;border:1px solid #dadde0;display:none}.contentWrap .selectList p{padding:0 15px;height:30px;line-height:30px;cursor:pointer;white-space:nowrap}.contentWrap .selectList p:hover{background-color:#f1f3f6}.contentWrap .selectList p.active{background-color:#f1f3f6;border-left:3px solid #5cb888}.contentWrap .likeBtn{border:1px solid;border-color:#dadde0;text-align:center;cursor:pointer;vertical-align:top;font-size:16px;margin-right:5px;color:#4a4a4a;display:inline-block;width:25px;height:25px;line-height:25px;background-color:#f1f3f6}.contentWrap .strongFont{font-weight:700}.contentWrap .italicsFont{font-style:italic}.contentWrap .tArea{border:1px solid #b5b7b9;background-color:#fff;resize:none;color:#4a4a4a;font-size:12px;line-height:18px;box-sizing:border-box;padding:8px 5px;width:100%;height:200px}.contentWrap .likeBtn:hover,.contentWrap .likeSelect:hover{border-color:#b5b7b9}.contentWrap .likeBtn.hot,.contentWrap .likeSelect.hot{background-color:#fff}.btnsContainer{text-align:right;padding:0 13px 27px}.btnsContainer .btn{width:72px;height:24px;line-height:24px;cursor:pointer;padding-top:4px;text-align:center;font-size:14px;color:#fff;margin-right:10px;display:inline-block}.btnsContainer .okBtn{background-color:#3bb3e4}.btnsContainer .okBtn:hover{background-color:#38acdb}.btnsContainer .cancelBtn{background-color:#9ca0a6;margin-right:0}.btnsContainer .cancelBtn:hover{background-color:#898c91}.jchart-select-statistics-box{position:fixed;width:100%;height:100%;left:0;top:0;background-color:rgba(0,0,0,.01);display:none;z-index:999}.interval .top{padding-left:10px;box-sizing:border-box;height:40px;line-height:40px;text-align:left;border-bottom:1px solid #e1ecf2;font-size:14px;color:#757d81}.interval .top .closeBtn{float:right;margin-right:15px;cursor:pointer;font-weight:600}.interval table{width:100%;height:170px}.changColorR{border-right-color:#1295d9!important}.changColorL{border-left-color:#1295d9!important}.interval table .dateChange1{display:inline-block;cursor:pointer;width:0;height:0;border:6px solid transparent;border-right:6px solid #c8d2db}.interval table .dateChange2{display:inline-block;cursor:pointer;width:0;height:0;border:6px solid transparent;border-left:6px solid #c8d2db}.interval table tr td:nth-child(2),.interval table tr td:nth-child(4),.interval table tr td:nth-child(6){font-weight:700}.interval table td{padding-left:10px;border-bottom:1px solid #eceff2}.interval table td.name{text-align:right}.interval table td:last-child{padding-right:10px}.kLineMatch{position:absolute;z-index:520;width:300px;height:600px;border:1px solid #eceff2;background:#fff;display:none}.kLineMatch .top{height:30px;line-height:30px;background:#ccc;text-align:center}.kLineMatch .top .closeBtn{float:right;margin-right:20px;cursor:pointer}.kLineMatch .title{padding:5px}.kLineMatch .title .name{float:left;width:70px;border-right:1px solid #ccc}.kLineMatch .title .time{width:140px;border-right:1px solid #ccc}.kLineMatch .title .similar,.kLineMatch .title .time{float:left;padding-left:5px}.kLineMatch .list{overflow-y:auto;height:544px;width:290px;padding:5px 5px 0}.kLineMatch .list .item .name{width:70px;float:left;padding-bottom:5px}.kLineMatch .list .item .time{padding:0 0 5px 5px;float:left;width:140px}.kLineMatch .list .item .similar{float:left;padding-left:7px;padding-bottom:5px}.jchart-kline-match-box{font:13px Microsoft Yahei}.jchart-kline-match-box .matchTable{border-collapse:collapse;width:100%}.jchart-kline-match-box .matchTable td,.jchart-kline-match-box .matchTable th{line-height:20px;border:1px solid #ccc;padding:0 10px}.jchart-kline-match-box .matchTable td.red{color:red}.pagination{height:22px;text-align:center;margin-top:10px}.pagination span{display:inline-block;line-height:20px;padding:0 6px;border:1px solid #ccc;margin-right:6px;cursor:pointer}.pagination span.active,.pagination span:hover{color:#ffb400}.spinnerBg{background:#ccc;width:100%;height:100%;opacity:.5}.spinner,.spinnerBg{position:absolute;display:none}.spinner{width:50px;height:60px;font-size:10px;top:50%;left:50%}.spinner>div{background-color:#39adce;height:100%;width:6px;display:inline-block;animation:stretchdelay 1.2s infinite ease-in-out}.spinner .rect2{animation-delay:-1.1s}.spinner .rect3{animation-delay:-1s}.spinner .rect4{animation-delay:-.9s}.spinner .rect5{animation-delay:-.8s}@keyframes stretchdelay{0%,40%,to{transform:scaleY(.4);-webkit-transform:scaleY(.4)}20%{transform:scaleY(1);-webkit-transform:scaleY(1)}}.kline-info{position:absolute;width:16px;height:16px;background-color:#fff;color:#ff3232;text-align:center;cursor:pointer;font:700 12px/1.4 arial}.klineframe-toolbar{position:absolute;text-align:right;line-height:24px;padding-right:5px;box-sizing:border-box}.klineframe-toolbar span:hover{color:#0182d4}.klineframe-button{position:absolute;text-align:right;border:1px solid #ccc;padding:2px}.icon-active{color:#0182d4}.increase{margin-left:3px;margin-right:10px}.rate-discount{font-weight:400;margin-left:90px}.tipBoxTitle{display:inline-block;width:130px}.date-tipbox{margin-right:10px}.jchart-changeindex-box,.jchart-modifyindex-box{position:fixed;display:none;width:100%;height:100%;left:0;top:0;z-index:999;background-color:rgba(0,0,0,.01)}.jchart-kline-minute-box{position:absolute;display:none;width:500px;height:550px!important;padding:0 5px 20px 10px;background-color:hsla(0,0%,100%,.95);border:1px solid rgba(200,210,219,.92);box-shadow:0 1px 4px 0 rgba(0,0,0,.23);z-index:999}.parameter{position:absolute;top:50%;left:50%;transform:translateX(-50%) translateY(-50%);padding:3px;box-sizing:border-box;width:520px;height:421px;background-color:hsla(0,0%,100%,.96);box-shadow:0 4px 17px 0 rgba(0,0,0,.55);border-radius:2px;z-index:999}.parameter-header{position:relative;width:100%;height:42px;line-height:42px;border-bottom:1px solid #c8d2db}.parameter-header span{font-family:微软雅黑;font-size:14px;margin-left:10px}.parameter-header strong{position:absolute;right:10px;top:10px;font-size:14px;font-weight:300}.parameter-content{padding:20px;box-sizing:border-box}.row-line{margin-right:20px;margin-top:10px;padding-left:3px;box-sizing:border-box;width:100px;height:24px;line-height:24px;border:1px solid #ccc}#close,.parameter1{cursor:pointer}.parameter-footer{position:absolute;bottom:20px;left:50%;transform:translateX(-50%)}.parameter-footer button{margin-left:15px;width:78px;height:28px;border:none;border-radius:2px;color:#fff}.submit{background-color:#0182d4}.cancel{background-color:#c8d2db}.target-box{position:absolute;display:none;width:100%;height:100%;background-color:rgba(0,0,0,.01);z-index:999}.target-panel{position:absolute;top:50%;left:50%;transform:translateX(-50%) translateY(-50%);width:800px;height:500px;background-color:hsla(0,0%,100%,.96);box-shadow:0 4px 17px 0 rgba(0,0,0,.55);border-radius:3px}.target-header{position:relative;width:100%;height:42px;line-height:42px;border-bottom:1px solid #c8d2db}.target-header span{font-family:微软雅黑;font-size:14px;margin-left:10px}.target-header strong{position:absolute;right:10px;top:10px;font-size:14px;font-weight:300}#close-tar{cursor:pointer}.target-content{height:100%}.target-left{float:left;width:200px;height:calc(100% - 43px);border-right:1px solid #c8d2db}.target-left input{margin-left:10px;height:40px;line-height:40px;border:none;font-size:14px}.target-left ul{border-top:1px solid #c8d2db;list-style:none;padding:10px;box-sizing:border-box}.target-left ul li{font-size:13px;line-height:30px;color:#757d81;cursor:pointer}.active-list{color:#1295d9!important}.target-right{float:left;width:595px}.target-right ul{width:590px;max-height:450px;overflow:auto;padding-top:10px;padding-left:20px;box-sizing:border-box}.target-right ul li{display:inline-block;margin-top:5px;margin-left:10px;list-style:none;width:175px;line-height:30px;text-align:left;float:left;cursor:pointer}.minute-dialog-title{position:relative;margin-bottom:10px;height:36px;line-height:36px;width:100%;border-bottom:1px solid #ccc}.minute-dialog-title span{margin-left:5px}.minute-dialog-title strong{position:absolute;right:5px;top:0;font-weight:300;font-size:12px}.minute-dialog-title strong:hover,.parameter-header strong:hover{color:#0182d4}.jschart-tooltip{box-shadow:0 1px 4px 0 rgba(0,0,0,.23);border:1px solid rgba(200,210,219,.92);padding:7px 20px 15px 13px;box-sizing:border-box;position:relative;display:none;z-index:9;-webkit-user-select:none;-ms-user-select:none;user-select:none}.tooltip-title{text-align:center;display:block}.tooltip-con,.tooltip-title{color:#2b3645}.tooltip-con,.tooltip-num,.tooltip-title{font-family:微软雅黑;font-size:12px;line-height:24px}.tooltip-num{text-align:right;display:inline-block;width:90px}.jschart-selectrect{border:1px dashed #0f248de0;display:none}.jchart-klineinfo-tooltip{position:absolute;z-index:10;max-height:270px;line-height:28px;box-shadow:0 1px 4px 0 rgba(0,0,0,.23);border:1px solid rgba(200,210,219,.92);padding:15px;background:hsla(0,0%,100%,.92);box-sizing:border-box;display:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.total-list{color:#f39800}.jchart-klineinfo-tooltip span{display:block;vertical-align:bottom}.title-length{max-height:220px;overflow:hidden}.close-munite{cursor:pointer}.jchart-chartox-tooltip,.jchart-iconinfo-tooltip,.jchart-klinetrade-tooltip,.jchart-minuteinfo-tooltip{position:absolute;z-index:10;max-height:270px;line-height:28px;box-shadow:0 1px 4px 0 rgba(0,0,0,.23);border:1px solid rgba(200,210,219,.92);padding:7px;background:hsla(0,0%,100%,.92);box-sizing:border-box;display:none}.trade-detall{margin-left:80px}.reason-list{display:inline-block;width:200px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;vertical-align:bottom}.trade-time{vertical-align:top}.prorecast-week{margin-left:70px}.jchart-select-section{height:340px}.jchart-select-table-right .jchart-select-date{width:100%;margin-bottom:5px}.jchart-select-date span{display:inline-block;width:32%;padding-left:10px;box-sizing:border-box;font-size:13px}.jchart-select-date span i{display:inline-block;width:12px;height:24px;line-height:24px;text-align:center;border:1px solid #ddd;background-color:#f5f5f5;cursor:pointer}.end-date-left,.start-date-left{margin:0 2px 0 5px}.jchart-select-table-right>table{width:100%;border-collapse:collapse}.jchart-select-table-right>table,.jchart-select-table-right>table td,.jchart-select-table-right>table tr{border:1px solid #ddd}.jchart-select-table-right td{padding-left:10px;box-sizing:border-box;width:32%;height:40px;vertical-align:center}.jchart-select-table-right>table td span{margin-left:20px}.jchart-select-table-right>table td strong{display:inline-block;width:50px;font-weight:400}.PriceUp{color:#ee1515!important}.PriceDown{color:#199e00!important}.PriceNull{color:#000}.BtnBackground{background-color:#fff!important;color:#eee}.icon-image{cursor:pointer}.icon-image img{padding:10px 8px;display:block;width:22px;height:22px;border-left:1px solid #ccc;border-right:1px solid #ccc}.icon-image:first-child img{border-top:1px solid #ccc}.icon-image:last-child img{border-bottom:1px solid #ccc}.subTolls{padding:8px 5px 0 8px;border:1px solid #aaa;background-color:#fff;height:26px}.subTolls:after{content:"";display:block;width:0;height:0;clear:both}.subTolls>*{margin:0 3px;cursor:pointer;display:block;width:20px;height:20px;float:left}.subTolls>.subtool-set{vertical-align:top}.change-color{width:24px;height:3px;outline:none;border:0}.change-color,.changes-color{position:relative}.change-image{margin-left:3px;margin-bottom:2px;display:inline-block;width:16px;height:13px}.changes-color input{position:absolute;left:0;bottom:0}input[type=color]{border:0;padding:0;cursor:pointer}::-webkit-color-swatch-wrapper{background-color:#fff}::-webkit-color-swatch{height:4px;width:25px;position:relative;left:0;top:-5px;border:0}.subtool-del{position:relative}',""])},function(t,e,a){var i=a(470);"string"==typeof i&&(i=[[t.i,i,""]]);a(66)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,a){var i=a(32);e=t.exports=a(2)(!1),e.push([t.i,"@font-face{font-family:iconfont;src:url("+i(a(471))+') format("woff2"),url('+i(a(472))+') format("woff"),url('+i(a(473))+') format("truetype")}.iconfont{font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-button_add:before{content:"\\E6A3"}.icon-draw_hlinesegment:before{content:"\\E6A2"}.icon-draw_p_rays_lines:before{content:"\\E6A1"}.icon-draw_head_shoulders_bt:before{content:"\\E6A0"}.icon-drawicon_49:before{content:"\\E69F"}.icon-drawicon_48:before{content:"\\E69E"}.icon-drawicon_47:before{content:"\\E69D"}.icon-drawicon_46:before{content:"\\E69C"}.icon-drawicon_45:before{content:"\\E69B"}.icon-drawicon_44:before{content:"\\E69A"}.icon-drawicon_43:before{content:"\\E699"}.icon-drawicon_42:before{content:"\\E698"}.icon-drawicon_41:before{content:"\\E697"}.icon-drawicon_40:before{content:"\\E696"}.icon-drawicon_39:before{content:"\\E695"}.icon-drawicon_38:before{content:"\\E694"}.icon-drawicon_37:before{content:"\\E693"}.icon-drawicon_36:before{content:"\\E692"}.icon-drawicon_35:before{content:"\\E691"}.icon-drawicon_34:before{content:"\\E690"}.icon-drawicon_33:before{content:"\\E68F"}.icon-drawicon_32:before{content:"\\E67F"}.icon-drawicon_31:before{content:"\\E67E"}.icon-drawicon_30:before{content:"\\E67D"}.icon-drawicon_28:before{content:"\\E67B"}.icon-drawicon_29:before{content:"\\E67C"}.icon-drawicon_27:before{content:"\\E67A"}.icon-drawicon_26:before{content:"\\E679"}.icon-drawicon_25:before{content:"\\E678"}.icon-drawicon_24:before{content:"\\E677"}.icon-drawicon_23:before{content:"\\E676"}.icon-drawicon_22:before{content:"\\E675"}.icon-drawicon_21:before{content:"\\E674"}.icon-drawicon_20:before{content:"\\E673"}.icon-drawicon_19:before{content:"\\E672"}.icon-drawicon_18:before{content:"\\E671"}.icon-drawicon_17:before{content:"\\E670"}.icon-drawicon_16:before{content:"\\E66F"}.icon-drawicon_15:before{content:"\\E66E"}.icon-drawicon_14:before{content:"\\E66D"}.icon-drawicon_13:before{content:"\\E66C"}.icon-drawicon_12:before{content:"\\E66B"}.icon-drawicon_11:before{content:"\\E66A"}.icon-drawicon_10:before{content:"\\E669"}.icon-drawicon_9:before{content:"\\E668"}.icon-drawicon_8:before{content:"\\E667"}.icon-drawicon_7:before{content:"\\E666"}.icon-drawicon_6:before{content:"\\E665"}.icon-drawicon_5:before{content:"\\E664"}.icon-drawicon_4:before{content:"\\E663"}.icon-drawicon_3:before{content:"\\E662"}.icon-drawicon_2:before{content:"\\E661"}.icon-drawicon_1:before{content:"\\E660"}.icon-draw_box:before{content:"\\E65F"}.icon-waveruler:before{content:"\\E65E"}.icon-vertical_line:before{content:"\\E65D"}.icon-price_line:before{content:"\\E65C"}.icon-ruler:before{content:"\\E65B"}.icon-linear_3:before{content:"\\E65A"}.icon-linear_2:before{content:"\\E659"}.icon-linear_1:before{content:"\\E657"}.icon-stockStar:before{content:"\\E658"}.icon-camera:before{content:"\\E654"}.icon-change_index:before{content:"\\E656"}.icon-overlay_index:before{content:"\\E655"}.icon-houtui:before{content:"\\E651"}.icon-qianjin:before{content:"\\E652"}.icon-exit:before{content:"\\E653"}.icon-refresh:before{content:"\\E650"}.icon-sub:before{content:"\\E64E"}.icon-add:before{content:"\\E64F"}.icon-guanbi:before{content:"\\E62B"}.icon-sousuo:before{content:"\\E62A"}.icon-margin:before{content:"\\E629"}.icon-shhk:before{content:"\\E628"}.icon-hk:before{content:"\\E627"}.icon-drawicon_message:before{content:"\\E64D"}.icon-drawicon_s:before{content:"\\E64C"}.icon-drawicon_b:before{content:"\\E70F"}.icon-drawicon_close:before{content:"\\E68C"}.icon-drawicon_dollar:before{content:"\\E626"}.icon-drawicon_up:before{content:"\\E625"}.icon-drawicon_down-copy:before{content:"\\E68B"}.icon-drawicon_bad:before{content:"\\E600"}.icon-drawicon_good:before{content:"\\E624"}.icon-kline_train_buy:before{content:"\\E64A"}.icon-kline_train_sell:before{content:"\\E64B"}.icon-bianji:before{content:"\\E623"}.icon-info_num_more:before{content:"\\E649"}.icon-info_num_11:before{content:"\\E635"}.icon-info_num_10:before{content:"\\E636"}.icon-info_num_12:before{content:"\\E637"}.icon-info_num_13:before{content:"\\E638"}.icon-info_num_14:before{content:"\\E639"}.icon-info_num_15:before{content:"\\E63A"}.icon-info_num_1:before{content:"\\E63B"}.icon-info_num_16:before{content:"\\E63C"}.icon-info_num_3:before{content:"\\E63D"}.icon-info_num_17:before{content:"\\E63E"}.icon-info_num_4:before{content:"\\E63F"}.icon-info_num_2:before{content:"\\E640"}.icon-info_num_6:before{content:"\\E641"}.icon-info_num_18:before{content:"\\E642"}.icon-info_num_20:before{content:"\\E643"}.icon-info_num_19:before{content:"\\E644"}.icon-info_num_5:before{content:"\\E645"}.icon-info_num_9:before{content:"\\E646"}.icon-info_num_7:before{content:"\\E647"}.icon-info_num_8:before{content:"\\E648"}.icon-info_quarter_announcement-copy:before{content:"\\E686"}.icon-info_block_trading:before{content:"\\E630"}.icon-info_investor:before{content:"\\E631"}.icon-info_research:before{content:"\\E632"}.icon-info_announcement:before{content:"\\E633"}.icon-info_quarter_announcement:before{content:"\\E634"}.icon-info_research_hscreen:before{content:"\\E688"}.icon-info_block_trading_hscreen:before{content:"\\E689"}.icon-info_investor_hscreen:before{content:"\\E684"}.icon-info_announcement-copy:before{content:"\\E685"}.icon-info_trade_detail_hscreen:before{content:"\\E68A"}.icon-info_trade_detail:before{content:"\\E62F"}.icon-info_pforecast_hscreen:before{content:"\\E687"}.icon-info_pforecast:before{content:"\\E62E"}.icon-jiacu:before{content:"\\E61F"}.icon-shezhi:before{content:"\\E620"}.icon-qingxieL:before{content:"\\E622"}.icon-xia:before{content:"\\E618"}.icon-shang:before{content:"\\E619"}.icon-drawicon_up2:before{content:"\\E68D"}.icon-drawicon_down2:before{content:"\\E68E"}.icon-menu_arraw_right:before{content:"\\E60B"}.icon-menu_arraw_left:before{content:"\\E60D"}.icon-right:before{content:"\\E601"}.icon-left:before{content:"\\E603"}.icon-draw_fibonacci:before{content:"\\E62D"}.icon-draw_quadrangle:before{content:"\\E62C"}.icon-arrow_down:before{content:"\\E681"}.icon-arrow_left:before{content:"\\E680"}.icon-arrow_right:before{content:"\\E682"}.icon-arrow_up:before{content:"\\E683"}.icon-chip_default:before{content:"\\E621"}.icon-draw_hline:before{content:"\\E61E"}.icon-draw_symangle:before{content:"\\E61D"}.icon-draw_circle:before{content:"\\E61C"}.icon-draw_pricechannel:before{content:"\\E61B"}.icon-draw_triangle:before{content:"\\E61A"}.icon-chip_date:before{content:"\\E617"}.icon-draw_wavemw:before{content:"\\E616"}.icon-draw_parallelchannel:before{content:"\\E615"}.icon-draw_text:before{content:"\\E614"}.icon-draw_resline:before{content:"\\E613"}.icon-draw_waveband:before{content:"\\E612"}.icon-draw_percentage:before{content:"\\E611"}.icon-draw_gannfan:before{content:"\\E610"}.icon-draw_goldensection:before{content:"\\E60F"}.icon-draw_trendline:before{content:"\\E60E"}.icon-close:before{content:"\\E60C"}.icon-recycle_bin:before{content:"\\E60A"}.icon-setting:before{content:"\\E609"}.icon-draw_parallel_lines:before{content:"\\E608"}.icon-rectangle:before{content:"\\E607"}.icon-draw_rays:before{content:"\\E606"}.icon-draw_line:before{content:"\\E605"}.icon-index_param:before{content:"\\E604"}.icon-draw_arc:before{content:"\\E602"}',""])},function(t,e,a){t.exports=a.p+"images/iconfont.87b334fb.woff2"},function(t,e,a){t.exports=a.p+"images/iconfont.26dc39f2.woff"},function(t,e,a){t.exports=a.p+"images/iconfont.f5ba229f.ttf"},function(t,e,a){"use strict";function i(t){a(475)}var r=a(167),n=a(477),s=a(4),o=i,h=s(r.a,n.a,!1,o,null,null);e.a=h.exports},function(t,e,a){var i=a(476);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(3)("06593c7a",i,!0,{})},function(t,e,a){var i=a(32);e=t.exports=a(2)(!1),e.push([t.i,".category-wrap .category-list{padding-top:10px}.category-wrap .noCategory{height:100px;padding:100px 0;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:distribute;justify-content:space-around}.category-wrap .noCategory .el-input{width:80%}.category-wrap .category-list>li{line-height:32px;padding-left:10px}.category-wrap .category-list>li .iconfont{position:relative;display:inline-block;z-index:1;margin-left:1px;margin-right:5px;font-weight:400;color:#333;width:11px;height:11px;vertical-align:middle;margin-top:-3px}.category-wrap .category-list>li .iconfont.icon-m{background-image:url("+i(a(67))+")}.category-wrap .category-list>li .iconfont.icon-p{background-image:url("+i(a(68))+')}.category-wrap .category-list>li .catagory-lv1{cursor:pointer;font-weight:700}.category-wrap .category-list>li .catagory-lv1:before{content:"";position:absolute;width:16px;height:16px;top:4px;left:7px;background-image:url('+i(a(22))+');background-repeat:repeat-x}.category-wrap .category-list>li .catagory-lv1 i{color:#a1a1a1;font-size:12px}.category-wrap .category-list>li .catagory-lv1,.category-wrap .category-list>li ul{position:relative}.category-wrap .category-list>li .catagory-lv1:after,.category-wrap .category-list>li ul:after{content:"";position:absolute;width:10px;top:0;bottom:0;left:-1px;background-image:url('+i(a(69))+');background-repeat:repeat-y}.category-wrap .category-list>li:first-child .catagory-lv1:after{top:10px}.category-wrap .category-list>li:last-child>p:last-child:after{bottom:16px}.category-wrap .category-list>li:last-child>ul:last-child:after{bottom:12px}.category-wrap .category-list li ul>li{position:relative;padding-left:32px;line-height:26px}.category-wrap .category-list li ul>li:before{content:"";position:absolute;width:24px;height:13px;top:2px;left:7px;background-image:url('+i(a(22))+");background-repeat:repeat-x}.category-wrap .category-list li ul>li .catagory-lv2{cursor:pointer}.category-wrap .category-list .isSelected>p{color:#ff7f00}.category-wrap .right-menu{position:absolute;transform:translate(-5px,-5px);width:128px;border:1px solid #a2a2a2;border-radius:3px;z-index:1}.category-wrap .right-menu li{background:hsla(0,0%,100%,.9);padding-left:12px;line-height:34px;cursor:pointer}.category-wrap .right-menu li:hover{background:hsla(0,0%,90%,.9)}",""])},function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"category-wrap",attrs:{id:"categoryWrap"},on:{click:t.hideRightMenu,mouseleave:t.hideRightMenu}},[a("ul",{staticClass:"category-list"},t._l(t.categoryList,function(e){return a("li",{key:e.categoryid,class:{isSelected:e.isSelected},attrs:{onselectstart:"return false"},on:{contextmenu:function(a){return a.stopPropagation(),t.rightMenu(a,[e.categoryid])}}},[e.editing||e.creating?[a("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],attrs:{id:"J-edit-input",type:"text",placeholder:""},domProps:{value:t.text},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit.apply(null,arguments)},input:function(e){e.target.composing||(t.text=e.target.value)}}})]:[a("p",{staticClass:"catagory-lv1",on:{click:function(a){return t.toggleShow(e)}}},[e.opened?a("i",{staticClass:"iconfont icon-p"}):a("i",{staticClass:"iconfont icon-m"}),t._v("\n                    "+t._s(e.name)+"\n                ")])],t._v(" "),e.opened?a("ul",t._l(e.children,function(i){return a("li",{key:i.children,class:{isSelected:i.isSelected},attrs:{onselectstart:"return false"},on:{contextmenu:function(a){return a.stopPropagation(),t.rightMenu(a,[e.categoryid,i.categoryid])}}},[i.editing||i.creating?[a("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],attrs:{id:"J-edit-input",type:"text",placeholder:""},domProps:{value:t.text},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit.apply(null,arguments)},input:function(e){e.target.composing||(t.text=e.target.value)}}})]:[a("p",{staticClass:"catagory-lv2",on:{click:function(a){return t.checkCategory([e.categoryid,i.categoryid])}}},[t._v(t._s(i.name))])]],2)}),0):t._e()],2)}),0),t._v(" "),t.isShowNoCategory?a("div",{staticClass:"noCategory"},[a("el-input",{attrs:{placeholder:"输入分组名称",size:"small"},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addFirstGroup}},[t._v("新增分组")])],1):t._e(),t._v(" "),t.showRightMenu?a("ul",{staticClass:"right-menu",style:{left:t.currentMousePosition.x+"px",top:t.currentMousePosition.y+"px"}},[a("li",{on:{click:function(e){return t.addCategory("brother")}}},[a("i",{staticClass:"iconfont icon-xinjianjiedian"}),t._v(" "+t._s(t.sameLevelChildOprTitle)+"\n        ")]),t._v(" "),a("li",{directives:[{name:"show",rawName:"v-show",value:t.showSubCategory,expression:"showSubCategory"}],on:{click:function(e){return t.addCategory("child")}}},[a("i",{staticClass:"iconfont icon-xinjianjiedian",staticStyle:{visibility:"hidden"}}),t._v(" "+t._s(t.nextLevelChildOprTitle)+"\n        ")]),t._v(" "),a("li",{on:{click:t.editCategory}},[a("i",{staticClass:"iconfont icon-bianjibiaoti"}),t._v(" 编辑\n        ")]),t._v(" "),t.showDelateButton?a("li",{on:{click:t.confirm}},[a("i",{staticClass:"iconfont icon-shanchujiedian"}),t._v(" 删除\n        ")]):t._e()]):t._e()])},r=[],n={render:i,staticRenderFns:r};e.a=n},function(t,e,a){!function(e,i){t.exports=i(a(122))}(0,function(t){return function(t){function e(i){if(a[i])return a[i].exports;var r=a[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var a={};return e.m=t,e.c=a,e.i=function(t){return t},e.d=function(t,a,i){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=3)}([function(e,a){e.exports=t},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(0),r=function(t){return t&&t.__esModule?t:{default:t}}(i),n=window.CodeMirror||r.default;"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(t),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n])}return a},writable:!0,configurable:!0}),e.default={name:"codemirror",data:function(){return{content:"",codemirror:null,cminstance:null}},props:{code:String,value:String,marker:Function,unseenLines:Array,name:{type:String,default:"codemirror"},placeholder:{type:String,default:""},merge:{type:Boolean,default:!1},options:{type:Object,default:function(){return{}}},events:{type:Array,default:function(){return[]}},globalOptions:{type:Object,default:function(){return{}}},globalEvents:{type:Array,default:function(){return[]}}},watch:{options:{deep:!0,handler:function(t){for(var e in t)this.cminstance.setOption(e,t[e])}},merge:function(){this.$nextTick(this.switchMerge)},code:function(t){this.handerCodeChange(t)},value:function(t){this.handerCodeChange(t)}},methods:{initialize:function(){var t=this,e=Object.assign({},this.globalOptions,this.options);this.merge?(this.codemirror=n.MergeView(this.$refs.mergeview,e),this.cminstance=this.codemirror.edit):(this.codemirror=n.fromTextArea(this.$refs.textarea,e),this.cminstance=this.codemirror,this.cminstance.setValue(this.code||this.value||this.content)),this.cminstance.on("change",function(e){t.content=e.getValue(),t.$emit&&t.$emit("input",t.content)});var a={};["scroll","changes","beforeChange","cursorActivity","keyHandled","inputRead","electricInput","beforeSelectionChange","viewportChange","swapDoc","gutterClick","gutterContextMenu","focus","blur","refresh","optionChange","scrollCursorIntoView","update"].concat(this.events).concat(this.globalEvents).filter(function(t){return!a[t]&&(a[t]=!0)}).forEach(function(e){t.cminstance.on(e,function(){for(var a=arguments.length,i=Array(a),r=0;r<a;r++)i[r]=arguments[r];t.$emit.apply(t,[e].concat(i));var n=e.replace(/([A-Z])/g,"-$1").toLowerCase();n!==e&&t.$emit.apply(t,[n].concat(i))})}),this.$emit("ready",this.codemirror),this.unseenLineMarkers(),this.refresh()},refresh:function(){var t=this;this.$nextTick(function(){t.cminstance.refresh()})},destroy:function(){var t=this.cminstance.doc.cm.getWrapperElement();t&&t.remove&&t.remove()},handerCodeChange:function(t){if(t!==this.cminstance.getValue()){var e=this.cminstance.getScrollInfo();this.cminstance.setValue(t),this.content=t,this.cminstance.scrollTo(e.left,e.top)}this.unseenLineMarkers()},unseenLineMarkers:function(){var t=this;void 0!==this.unseenLines&&void 0!==this.marker&&this.unseenLines.forEach(function(e){var a=t.cminstance.lineInfo(e);t.cminstance.setGutterMarker(e,"breakpoints",a.gutterMarkers?null:t.marker())})},switchMerge:function(){var t=this.cminstance.doc.history,e=this.cminstance.doc.cleanGeneration;this.options.value=this.cminstance.getValue(),this.destroy(),this.initialize(),this.cminstance.doc.history=t,this.cminstance.doc.cleanGeneration=e}},mounted:function(){this.initialize()},beforeDestroy:function(){this.destroy()}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(1),r=a.n(i);for(var n in i)["default","default"].indexOf(n)<0&&function(t){a.d(e,t,function(){return i[t]})}(n);var s=a(5),o=a(4),h=o(r.a,s.a,!1,null,null,null);e.default=h.exports},function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.install=e.codemirror=e.CodeMirror=void 0;var r=a(0),n=i(r),s=a(2),o=i(s),h=window.CodeMirror||n.default,l=function(t,e){e&&(e.options&&(o.default.props.globalOptions.default=function(){return e.options}),e.events&&(o.default.props.globalEvents.default=function(){return e.events})),t.component(o.default.name,o.default)},u={CodeMirror:h,codemirror:o.default,install:l};e.default=u,e.CodeMirror=h,e.codemirror=o.default,e.install=l},function(t,e){t.exports=function(t,e,a,i,r,n){var s,o=t=t||{},h=typeof t.default;"object"!==h&&"function"!==h||(s=t,o=t.default);var l="function"==typeof o?o.options:o;e&&(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0),a&&(l.functional=!0),r&&(l._scopeId=r);var u;if(n?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(n)},l._ssrRegister=u):i&&(u=i),u){var c=l.functional,d=c?l.render:l.beforeCreate;c?(l._injectStyles=u,l.render=function(t,e){return u.call(e),d(t,e)}):l.beforeCreate=d?[].concat(d,u):[u]}return{esModule:s,exports:o,options:l}}},function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vue-codemirror",class:{merge:t.merge}},[t.merge?a("div",{ref:"mergeview"}):a("textarea",{ref:"textarea",attrs:{name:t.name,placeholder:t.placeholder}})])},r=[],n={render:i,staticRenderFns:r};e.a=n}])})},function(t,e,a){var i=a(480);"string"==typeof i&&(i=[[t.i,i,""]]);a(66)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,a){e=t.exports=a(2)(!1),e.push([t.i,'.CodeMirror{font-family:monospace;height:300px;color:#000;direction:ltr}.CodeMirror-lines{padding:4px 0}.CodeMirror pre.CodeMirror-line,.CodeMirror pre.CodeMirror-line-like{padding:0 4px}.CodeMirror-gutter-filler,.CodeMirror-scrollbar-filler{background-color:#fff}.CodeMirror-gutters{border-right:1px solid #ddd;background-color:#f7f7f7;white-space:nowrap}.CodeMirror-linenumber{padding:0 3px 0 5px;min-width:20px;text-align:right;color:#999;white-space:nowrap}.CodeMirror-guttermarker{color:#000}.CodeMirror-guttermarker-subtle{color:#999}.CodeMirror-cursor{border-left:1px solid #000;border-right:none;width:0}.CodeMirror div.CodeMirror-secondarycursor{border-left:1px solid silver}.cm-fat-cursor .CodeMirror-cursor{width:auto;border:0!important;background:#7e7}.cm-fat-cursor div.CodeMirror-cursors{z-index:1}.cm-fat-cursor-mark{background-color:rgba(20,255,20,.5);animation:blink 1.06s steps(1) infinite}.cm-animate-fat-cursor{width:auto;animation:blink 1.06s steps(1) infinite;background-color:#7e7}@keyframes blink{50%{background-color:transparent}}.cm-tab{display:inline-block;text-decoration:inherit}.CodeMirror-rulers{position:absolute;left:0;right:0;top:-50px;bottom:0;overflow:hidden}.CodeMirror-ruler{border-left:1px solid #ccc;top:0;bottom:0;position:absolute}.cm-s-default .cm-header{color:blue}.cm-s-default .cm-quote{color:#090}.cm-negative{color:#d44}.cm-positive{color:#292}.cm-header,.cm-strong{font-weight:700}.cm-em{font-style:italic}.cm-link{text-decoration:underline}.cm-strikethrough{text-decoration:line-through}.cm-s-default .cm-keyword{color:#708}.cm-s-default .cm-atom{color:#219}.cm-s-default .cm-number{color:#164}.cm-s-default .cm-def{color:#00f}.cm-s-default .cm-variable-2{color:#05a}.cm-s-default .cm-type,.cm-s-default .cm-variable-3{color:#085}.cm-s-default .cm-comment{color:#a50}.cm-s-default .cm-string{color:#a11}.cm-s-default .cm-string-2{color:#f50}.cm-s-default .cm-meta,.cm-s-default .cm-qualifier{color:#555}.cm-s-default .cm-builtin{color:#30a}.cm-s-default .cm-bracket{color:#997}.cm-s-default .cm-tag{color:#170}.cm-s-default .cm-attribute{color:#00c}.cm-s-default .cm-hr{color:#999}.cm-s-default .cm-link{color:#00c}.cm-invalidchar,.cm-s-default .cm-error{color:red}.CodeMirror-composing{border-bottom:2px solid}div.CodeMirror span.CodeMirror-matchingbracket{color:#0b0}div.CodeMirror span.CodeMirror-nonmatchingbracket{color:#a22}.CodeMirror-matchingtag{background:rgba(255,150,0,.3)}.CodeMirror-activeline-background{background:#e8f2ff}.CodeMirror{position:relative;overflow:hidden;background:#fff}.CodeMirror-scroll{overflow:scroll!important;margin-bottom:-50px;margin-right:-50px;padding-bottom:50px;height:100%;outline:none;position:relative}.CodeMirror-sizer{position:relative;border-right:50px solid transparent}.CodeMirror-gutter-filler,.CodeMirror-hscrollbar,.CodeMirror-scrollbar-filler,.CodeMirror-vscrollbar{position:absolute;z-index:6;display:none;outline:none}.CodeMirror-vscrollbar{right:0;top:0;overflow-x:hidden;overflow-y:scroll}.CodeMirror-hscrollbar{bottom:0;left:0;overflow-y:hidden;overflow-x:scroll}.CodeMirror-scrollbar-filler{right:0;bottom:0}.CodeMirror-gutter-filler{left:0;bottom:0}.CodeMirror-gutters{position:absolute;left:0;top:0;min-height:100%;z-index:3}.CodeMirror-gutter{white-space:normal;height:100%;display:inline-block;vertical-align:top;margin-bottom:-50px}.CodeMirror-gutter-wrapper{position:absolute;z-index:4;background:none!important;border:none!important}.CodeMirror-gutter-background{position:absolute;top:0;bottom:0;z-index:4}.CodeMirror-gutter-elt{position:absolute;cursor:default;z-index:4}.CodeMirror-gutter-wrapper ::selection{background-color:transparent}.CodeMirror-gutter-wrapper ::-moz-selection{background-color:transparent}.CodeMirror-lines{cursor:text;min-height:1px}.CodeMirror pre.CodeMirror-line,.CodeMirror pre.CodeMirror-line-like{border-radius:0;border-width:0;background:transparent;font-family:inherit;font-size:inherit;margin:0;white-space:pre;word-wrap:normal;line-height:inherit;color:inherit;z-index:2;position:relative;overflow:visible;-webkit-tap-highlight-color:transparent;font-variant-ligatures:contextual}.CodeMirror-wrap pre.CodeMirror-line,.CodeMirror-wrap pre.CodeMirror-line-like{word-wrap:break-word;white-space:pre-wrap;word-break:normal}.CodeMirror-linebackground{position:absolute;left:0;right:0;top:0;bottom:0;z-index:0}.CodeMirror-linewidget{position:relative;z-index:2;padding:.1px}.CodeMirror-rtl pre{direction:rtl}.CodeMirror-code{outline:none}.CodeMirror-gutter,.CodeMirror-gutters,.CodeMirror-linenumber,.CodeMirror-scroll,.CodeMirror-sizer{box-sizing:content-box}.CodeMirror-measure{position:absolute;width:100%;height:0;overflow:hidden;visibility:hidden}.CodeMirror-cursor{position:absolute;pointer-events:none}.CodeMirror-measure pre{position:static}div.CodeMirror-cursors{visibility:hidden;position:relative;z-index:3}.CodeMirror-focused div.CodeMirror-cursors,div.CodeMirror-dragcursors{visibility:visible}.CodeMirror-selected{background:#d9d9d9}.CodeMirror-focused .CodeMirror-selected{background:#d7d4f0}.CodeMirror-crosshair{cursor:crosshair}.CodeMirror-line::selection,.CodeMirror-line>span::selection,.CodeMirror-line>span>span::selection{background:#d7d4f0}.CodeMirror-line::-moz-selection,.CodeMirror-line>span::-moz-selection,.CodeMirror-line>span>span::-moz-selection{background:#d7d4f0}.cm-searching{background-color:#ffa;background-color:rgba(255,255,0,.4)}.cm-force-border{padding-right:.1px}@media print{.CodeMirror div.CodeMirror-cursors{visibility:hidden}}.cm-tab-wrap-hack:after{content:""}span.CodeMirror-selectedtext{background:none}',""])},function(t,e,a){!function(t){t(a(122))}(function(t){"use strict";t.defineMode("javascript",function(e,a){function i(t){for(var e,a=!1,i=!1;null!=(e=t.next());){if(!a){if("/"==e&&!i)return;"["==e?i=!0:i&&"]"==e&&(i=!1)}a=!a&&"\\"==e}}function r(t,e,a){return Wt=t,Xt=a,e}function n(t,e){var a=t.next();if('"'==a||"'"==a)return e.tokenize=s(a),e.tokenize(t,e);if("."==a&&t.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return r("number","number");if("."==a&&t.match(".."))return r("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(a))return r(a);if("="==a&&t.eat(">"))return r("=>","operator");if("0"==a&&t.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return r("number","number");if(/\d/.test(a))return t.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),r("number","number");if("/"==a)return t.eat("*")?(e.tokenize=o,o(t,e)):t.eat("/")?(t.skipToEnd(),r("comment","comment")):Gt(t,e,1)?(i(t),t.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),r("regexp","string-2")):(t.eat("="),r("operator","operator",t.current()));if("`"==a)return e.tokenize=h,h(t,e);if("#"==a&&"!"==t.peek())return t.skipToEnd(),r("meta","meta");if("#"==a&&t.eatWhile(Zt))return r("variable","property");if("<"==a&&t.match("!--")||"-"==a&&t.match("->")&&!/\S/.test(t.string.slice(0,t.start)))return t.skipToEnd(),r("comment","comment");if($t.test(a))return">"==a&&e.lexical&&">"==e.lexical.type||(t.eat("=")?"!"!=a&&"="!=a||t.eat("="):/[<>*+\-|&?]/.test(a)&&(t.eat(a),">"==a&&t.eat(a))),"?"==a&&t.eat(".")?r("."):r("operator","operator",t.current());if(Zt.test(a)){t.eatWhile(Zt);var n=t.current();if("."!=e.lastType){if(Qt.propertyIsEnumerable(n)){var l=Qt[n];return r(l.type,l.style,n)}if("async"==n&&t.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return r("async","keyword",n)}return r("variable","variable",n)}}function s(t){return function(e,a){var i,s=!1;if(jt&&"@"==e.peek()&&e.match(te))return a.tokenize=n,r("jsonld-keyword","meta");for(;null!=(i=e.next())&&(i!=t||s);)s=!s&&"\\"==i;return s||(a.tokenize=n),r("string","string")}}function o(t,e){for(var a,i=!1;a=t.next();){if("/"==a&&i){e.tokenize=n;break}i="*"==a}return r("comment","comment")}function h(t,e){for(var a,i=!1;null!=(a=t.next());){if(!i&&("`"==a||"$"==a&&t.eat("{"))){e.tokenize=n;break}i=!i&&"\\"==a}return r("quasi","string-2",t.current())}function l(t,e){e.fatArrowAt&&(e.fatArrowAt=null);var a=t.string.indexOf("=>",t.start);if(!(a<0)){if(qt){var i=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(t.string.slice(t.start,a));i&&(a=i.index)}for(var r=0,n=!1,s=a-1;s>=0;--s){var o=t.string.charAt(s),h=ee.indexOf(o);if(h>=0&&h<3){if(!r){++s;break}if(0==--r){"("==o&&(n=!0);break}}else if(h>=3&&h<6)++r;else if(Zt.test(o))n=!0;else if(/["'\/`]/.test(o))for(;;--s){if(0==s)return;var l=t.string.charAt(s-1);if(l==o&&"\\"!=t.string.charAt(s-2)){s--;break}}else if(n&&!r){++s;break}}n&&!r&&(e.fatArrowAt=s)}}function u(t,e,a,i,r,n){this.indented=t,this.column=e,this.type=a,this.prev=r,this.info=n,null!=i&&(this.align=i)}function c(t,e){if(!Jt)return!1;for(var a=t.localVars;a;a=a.next)if(a.name==e)return!0;for(var i=t.context;i;i=i.prev)for(var a=i.vars;a;a=a.next)if(a.name==e)return!0}function d(t,e,a,i,r){var n=t.cc;for(ie.state=t,ie.stream=r,ie.marked=null,ie.cc=n,ie.style=e,t.lexical.hasOwnProperty("align")||(t.lexical.align=!0);;){if((n.length?n.pop():zt?w:_)(a,i)){for(;n.length&&n[n.length-1].lex;)n.pop()();return ie.marked?ie.marked:"variable"==a&&c(t,i)?"variable-2":e}}}function f(){for(var t=arguments.length-1;t>=0;t--)ie.cc.push(arguments[t])}function m(){return f.apply(null,arguments),!0}function C(t,e){for(var a=e;a;a=a.next)if(a.name==t)return!0;return!1}function p(t){var e=ie.state;if(ie.marked="def",Jt){if(e.context)if("var"==e.lexical.info&&e.context&&e.context.block){var i=D(t,e.context);if(null!=i)return void(e.context=i)}else if(!C(t,e.localVars))return void(e.localVars=new S(t,e.localVars));a.globalVars&&!C(t,e.globalVars)&&(e.globalVars=new S(t,e.globalVars))}}function D(t,e){if(e){if(e.block){var a=D(t,e.prev);return a?a==e.prev?e:new g(a,e.vars,!0):null}return C(t,e.vars)?e:new g(e.prev,new S(t,e.vars),!1)}return null}function v(t){return"public"==t||"private"==t||"protected"==t||"abstract"==t||"readonly"==t}function g(t,e,a){this.prev=t,this.vars=e,this.block=a}function S(t,e){this.name=t,this.next=e}function T(){ie.state.context=new g(ie.state.context,ie.state.localVars,!1),ie.state.localVars=re}function y(){ie.state.context=new g(ie.state.context,ie.state.localVars,!0),ie.state.localVars=null}function I(){ie.state.localVars=ie.state.context.vars,ie.state.context=ie.state.context.prev}function x(t,e){var a=function(){var a=ie.state,i=a.indented;if("stat"==a.lexical.type)i=a.lexical.indented;else for(var r=a.lexical;r&&")"==r.type&&r.align;r=r.prev)i=r.indented;a.lexical=new u(i,ie.stream.column(),t,null,a.lexical,e)};return a.lex=!0,a}function L(){var t=ie.state;t.lexical.prev&&(")"==t.lexical.type&&(t.indented=t.lexical.indented),t.lexical=t.lexical.prev)}function M(t){function e(a){return a==t?m():";"==t||"}"==a||")"==a||"]"==a?f():m(e)}return e}function _(t,e){return"var"==t?m(x("vardef",e),dt,M(";"),L):"keyword a"==t?m(x("form"),E,_,L):"keyword b"==t?m(x("form"),_,L):"keyword d"==t?ie.stream.match(/^\s*$/,!1)?m():m(x("stat"),N,M(";"),L):"debugger"==t?m(M(";")):"{"==t?m(x("}"),y,q,L,I):";"==t?m():"if"==t?("else"==ie.state.lexical.info&&ie.state.cc[ie.state.cc.length-1]==L&&ie.state.cc.pop()(),m(x("form"),E,_,L,vt)):"function"==t?m(yt):"for"==t?m(x("form"),y,gt,_,I,L):"class"==t||qt&&"interface"==e?(ie.marked="keyword",m(x("form","class"==t?t:e),_t,L)):"variable"==t?qt&&"declare"==e?(ie.marked="keyword",m(_)):qt&&("module"==e||"enum"==e||"type"==e)&&ie.stream.match(/^\s*\w/,!1)?(ie.marked="keyword","enum"==e?m(Yt):"type"==e?m(xt,M("operator"),et,M(";")):m(x("form"),ft,M("{"),x("}"),q,L,L)):qt&&"namespace"==e?(ie.marked="keyword",m(x("form"),w,_,L)):qt&&"abstract"==e?(ie.marked="keyword",m(_)):m(x("stat"),W):"switch"==t?m(x("form"),E,M("{"),x("}","switch"),y,q,L,L,I):"case"==t?m(w,M(":")):"default"==t?m(M(":")):"catch"==t?m(x("form"),T,b,_,L,I):"export"==t?m(x("stat"),Et,L):"import"==t?m(x("stat"),Nt,L):"async"==t?m(_):"@"==e?m(w,_):f(x("stat"),w,M(";"),L)}function b(t){if("("==t)return m(Lt,M(")"))}function w(t,e){return A(t,e,!1)}function F(t,e){return A(t,e,!0)}function E(t){return"("!=t?f():m(x(")"),N,M(")"),L)}function A(t,e,a){if(ie.state.fatArrowAt==ie.stream.start){var i=a?Y:B;if("("==t)return m(T,x(")"),z(Lt,")"),L,M("=>"),i,I);if("variable"==t)return f(T,ft,M("=>"),i,I)}var r=a?P:O;return ae.hasOwnProperty(t)?m(r):"function"==t?m(yt,r):"class"==t||qt&&"interface"==e?(ie.marked="keyword",m(x("form"),Mt,L)):"keyword c"==t||"async"==t?m(a?F:w):"("==t?m(x(")"),N,M(")"),L,r):"operator"==t||"spread"==t?m(a?F:w):"["==t?m(x("]"),Bt,L,r):"{"==t?J(U,"}",null,r):"quasi"==t?f(R,r):"new"==t?m(H(a)):m()}function N(t){return t.match(/[;\}\)\],]/)?f():f(w)}function O(t,e){return","==t?m(N):P(t,e,!1)}function P(t,e,a){var i=0==a?O:P,r=0==a?w:F;return"=>"==t?m(T,a?Y:B,I):"operator"==t?/\+\+|--/.test(e)||qt&&"!"==e?m(i):qt&&"<"==e&&ie.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?m(x(">"),z(et,">"),L,i):"?"==e?m(w,M(":"),r):m(r):"quasi"==t?f(R,i):";"!=t?"("==t?J(F,")","call",i):"."==t?m(X,i):"["==t?m(x("]"),N,M("]"),L,i):qt&&"as"==e?(ie.marked="keyword",m(et,i)):"regexp"==t?(ie.state.lastType=ie.marked="operator",ie.stream.backUp(ie.stream.pos-ie.stream.start-1),m(r)):void 0:void 0}function R(t,e){return"quasi"!=t?f():"${"!=e.slice(e.length-2)?m(R):m(N,k)}function k(t){if("}"==t)return ie.marked="string-2",ie.state.tokenize=h,m(R)}function B(t){return l(ie.stream,ie.state),f("{"==t?_:w)}function Y(t){return l(ie.stream,ie.state),f("{"==t?_:F)}function H(t){return function(e){return"."==e?m(t?G:V):"variable"==e&&qt?m(lt,t?P:O):f(t?F:w)}}function V(t,e){if("target"==e)return ie.marked="keyword",m(O)}function G(t,e){if("target"==e)return ie.marked="keyword",m(P)}function W(t){return":"==t?m(L,_):f(O,M(";"),L)}function X(t){if("variable"==t)return ie.marked="property",m()}function U(t,e){if("async"==t)return ie.marked="property",m(U);if("variable"==t||"keyword"==ie.style){if(ie.marked="property","get"==e||"set"==e)return m(K);var a;return qt&&ie.state.fatArrowAt==ie.stream.start&&(a=ie.stream.match(/^\s*:\s*/,!1))&&(ie.state.fatArrowAt=ie.stream.pos+a[0].length),m(j)}return"number"==t||"string"==t?(ie.marked=jt?"property":ie.style+" property",m(j)):"jsonld-keyword"==t?m(j):qt&&v(e)?(ie.marked="keyword",m(U)):"["==t?m(w,Z,M("]"),j):"spread"==t?m(F,j):"*"==e?(ie.marked="keyword",m(U)):":"==t?f(j):void 0}function K(t){return"variable"!=t?f(j):(ie.marked="property",m(yt))}function j(t){return":"==t?m(F):"("==t?f(yt):void 0}function z(t,e,a){function i(r,n){if(a?a.indexOf(r)>-1:","==r){var s=ie.state.lexical;return"call"==s.info&&(s.pos=(s.pos||0)+1),m(function(a,i){return a==e||i==e?f():f(t)},i)}return r==e||n==e?m():a&&a.indexOf(";")>-1?f(t):m(M(e))}return function(a,r){return a==e||r==e?m():f(t,i)}}function J(t,e,a){for(var i=3;i<arguments.length;i++)ie.cc.push(arguments[i]);return m(x(e,a),z(t,e),L)}function q(t){return"}"==t?m():f(_,q)}function Z(t,e){if(qt){if(":"==t)return m(et);if("?"==e)return m(Z)}}function Q(t,e){if(qt&&(":"==t||"in"==e))return m(et)}function $(t){if(qt&&":"==t)return ie.stream.match(/^\s*\w+\s+is\b/,!1)?m(w,tt,et):m(et)}function tt(t,e){if("is"==e)return ie.marked="keyword",m()}function et(t,e){return"keyof"==e||"typeof"==e||"infer"==e||"readonly"==e?(ie.marked="keyword",m("typeof"==e?F:et)):"variable"==t||"void"==e?(ie.marked="type",m(ht)):"|"==e||"&"==e?m(et):"string"==t||"number"==t||"atom"==t?m(ht):"["==t?m(x("]"),z(et,"]",","),L,ht):"{"==t?m(x("}"),it,L,ht):"("==t?m(z(ot,")"),at,ht):"<"==t?m(z(et,">"),et):"quasi"==t?f(nt,ht):void 0}function at(t){if("=>"==t)return m(et)}function it(t){return t.match(/[\}\)\]]/)?m():","==t||";"==t?m(it):f(rt,it)}function rt(t,e){return"variable"==t||"keyword"==ie.style?(ie.marked="property",m(rt)):"?"==e||"number"==t||"string"==t?m(rt):":"==t?m(et):"["==t?m(M("variable"),Q,M("]"),rt):"("==t?f(It,rt):t.match(/[;\}\)\],]/)?void 0:m()}function nt(t,e){return"quasi"!=t?f():"${"!=e.slice(e.length-2)?m(nt):m(et,st)}function st(t){if("}"==t)return ie.marked="string-2",ie.state.tokenize=h,m(nt)}function ot(t,e){return"variable"==t&&ie.stream.match(/^\s*[?:]/,!1)||"?"==e?m(ot):":"==t?m(et):"spread"==t?m(ot):f(et)}function ht(t,e){return"<"==e?m(x(">"),z(et,">"),L,ht):"|"==e||"."==t||"&"==e?m(et):"["==t?m(et,M("]"),ht):"extends"==e||"implements"==e?(ie.marked="keyword",m(et)):"?"==e?m(et,M(":"),et):void 0}function lt(t,e){if("<"==e)return m(x(">"),z(et,">"),L,ht)}function ut(){return f(et,ct)}function ct(t,e){if("="==e)return m(et)}function dt(t,e){return"enum"==e?(ie.marked="keyword",m(Yt)):f(ft,Z,pt,Dt)}function ft(t,e){return qt&&v(e)?(ie.marked="keyword",m(ft)):"variable"==t?(p(e),m()):"spread"==t?m(ft):"["==t?J(Ct,"]"):"{"==t?J(mt,"}"):void 0}function mt(t,e){return"variable"!=t||ie.stream.match(/^\s*:/,!1)?("variable"==t&&(ie.marked="property"),"spread"==t?m(ft):"}"==t?f():"["==t?m(w,M("]"),M(":"),mt):m(M(":"),ft,pt)):(p(e),m(pt))}function Ct(){return f(ft,pt)}function pt(t,e){if("="==e)return m(F)}function Dt(t){if(","==t)return m(dt)}function vt(t,e){if("keyword b"==t&&"else"==e)return m(x("form","else"),_,L)}function gt(t,e){return"await"==e?m(gt):"("==t?m(x(")"),St,L):void 0}function St(t){return"var"==t?m(dt,Tt):"variable"==t?m(Tt):f(Tt)}function Tt(t,e){return")"==t?m():";"==t?m(Tt):"in"==e||"of"==e?(ie.marked="keyword",m(w,Tt)):f(w,Tt)}function yt(t,e){return"*"==e?(ie.marked="keyword",m(yt)):"variable"==t?(p(e),m(yt)):"("==t?m(T,x(")"),z(Lt,")"),L,$,_,I):qt&&"<"==e?m(x(">"),z(ut,">"),L,yt):void 0}function It(t,e){return"*"==e?(ie.marked="keyword",m(It)):"variable"==t?(p(e),m(It)):"("==t?m(T,x(")"),z(Lt,")"),L,$,I):qt&&"<"==e?m(x(">"),z(ut,">"),L,It):void 0}function xt(t,e){return"keyword"==t||"variable"==t?(ie.marked="type",m(xt)):"<"==e?m(x(">"),z(ut,">"),L):void 0}function Lt(t,e){return"@"==e&&m(w,Lt),"spread"==t?m(Lt):qt&&v(e)?(ie.marked="keyword",m(Lt)):qt&&"this"==t?m(Z,pt):f(ft,Z,pt)}function Mt(t,e){return"variable"==t?_t(t,e):bt(t,e)}function _t(t,e){if("variable"==t)return p(e),m(bt)}function bt(t,e){return"<"==e?m(x(">"),z(ut,">"),L,bt):"extends"==e||"implements"==e||qt&&","==t?("implements"==e&&(ie.marked="keyword"),m(qt?et:w,bt)):"{"==t?m(x("}"),wt,L):void 0}function wt(t,e){return"async"==t||"variable"==t&&("static"==e||"get"==e||"set"==e||qt&&v(e))&&ie.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(ie.marked="keyword",m(wt)):"variable"==t||"keyword"==ie.style?(ie.marked="property",m(Ft,wt)):"number"==t||"string"==t?m(Ft,wt):"["==t?m(w,Z,M("]"),Ft,wt):"*"==e?(ie.marked="keyword",m(wt)):qt&&"("==t?f(It,wt):";"==t||","==t?m(wt):"}"==t?m():"@"==e?m(w,wt):void 0}function Ft(t,e){if("!"==e)return m(Ft);if("?"==e)return m(Ft);if(":"==t)return m(et,pt);if("="==e)return m(F);var a=ie.state.lexical.prev;return f(a&&"interface"==a.info?It:yt)}function Et(t,e){return"*"==e?(ie.marked="keyword",m(kt,M(";"))):"default"==e?(ie.marked="keyword",m(w,M(";"))):"{"==t?m(z(At,"}"),kt,M(";")):f(_)}function At(t,e){return"as"==e?(ie.marked="keyword",m(M("variable"))):"variable"==t?f(F,At):void 0}function Nt(t){return"string"==t?m():"("==t?f(w):"."==t?f(O):f(Ot,Pt,kt)}function Ot(t,e){return"{"==t?J(Ot,"}"):("variable"==t&&p(e),"*"==e&&(ie.marked="keyword"),m(Rt))}function Pt(t){if(","==t)return m(Ot,Pt)}function Rt(t,e){if("as"==e)return ie.marked="keyword",m(Ot)}function kt(t,e){if("from"==e)return ie.marked="keyword",m(w)}function Bt(t){return"]"==t?m():f(z(F,"]"))}function Yt(){return f(x("form"),ft,M("{"),x("}"),z(Ht,"}"),L,L)}function Ht(){return f(ft,pt)}function Vt(t,e){return"operator"==t.lastType||","==t.lastType||$t.test(e.charAt(0))||/[,.]/.test(e.charAt(0))}function Gt(t,e,a){return e.tokenize==n&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(e.lastType)||"quasi"==e.lastType&&/\{\s*$/.test(t.string.slice(0,t.pos-(a||0)))}var Wt,Xt,Ut=e.indentUnit,Kt=a.statementIndent,jt=a.jsonld,zt=a.json||jt,Jt=!1!==a.trackScope,qt=a.typescript,Zt=a.wordCharacters||/[\w$\xa1-\uffff]/,Qt=function(){function t(t){return{type:t,style:"keyword"}}var e=t("functionname"),a={type:"dataname",style:"variable-2"},i=t("linewidth"),r=t("drawname"),n={type:"colorname",style:"colorblack"},s={type:"colorname",style:"colorblue"},o={type:"colorname",style:"colorgreen"},h={type:"colorname",style:"colorcyan"},l={type:"colorname",style:"colorred"},u={type:"colorname",style:"colormagenta"},c={type:"colorname",style:"colorbrown"},d={type:"colorname",style:"colorligray"},f={type:"colorname",style:"colorgray"},m={type:"colorname",style:"colorliblue"},C={type:"colorname",style:"colorligreen"},p={type:"colorname",style:"colorlicyan"},D={type:"colorname",style:"colorlired"},v={type:"colorname",style:"colorlimagenta"},g={type:"colorname",style:"colorwhite"},S={type:"colorname",style:"coloryellow"},T={MA:e,MAX:e,REF:e,EXPMEMA:e,IF:e,IFF:e,ABS:e,HHV:e,LLV:e,EMA:e,SUM:e,RANGE:e,EXIST:e,TFILTER:e,CODELIKE:e,BARSLAST:e,SMA:e,BARSCOUNT:e,VOLSTICK:e,CROSS:e,NOT:e,SLOPE:e,NAMELIKE:e,BARSSINCEN:e,BARSSINCE:e,ATAN:e,ACOS:e,ASIN:e,COS:e,SIN:e,TAN:e,LAST:e,LN:e,LOG:e,EXP:e,SQRT:e,REFDATE:e,DEVSQ:e,MIN:e,ZIG:e,TROUGHBARS:e,PEAKBARS:e,EVERY:e,COST:e,WINNER:e,COUNT:e,FORCAST:e,STDP:e,VAR:e,VARP:e,NDAY:e,UPNDAY:e,DOWNNDAY:e,LONGCROSS:e,EXISTR:e,RELATE:e,COVAR:e,HHVBARS:e,LLVBARS:e,BETA:e,DRAWKLINE_IF:e,BACKSET:e,SARTURN:e,SAR:e,REVERSE:e,SUMBARS:e,MEMA:e,WMA:e,DYNAINFO:e,FINANCE:e,MARGIN:e,NEWS:e,DATE:a,MONTH:a,YEAR:a,DRAWTEXT:e,STICKLINE:e,DRAWBAND:e,DRAWKLINE:e,PLOYLINE:e,POLYLINE:e,DRAWNUMBER:e,DRAWICON:e,SUPERDRAWTEXT:e,CLOSE:a,C:a,VOL:a,V:a,OPEN:a,O:a,HIGH:a,H:a,LOW:a,L:a,AMOUNT:a,CURRBARSCOUNT:a,INDEXA:a,INDEXC:a,INDEXH:a,INDEXL:a,INDEXO:a,INDEXV:a,INDEXADV:a,INDEXDEC:a,UPCOUNT:e,DOWNCOUNT:e,LINETHICK1:i,LINETHICK2:i,LINETHICK3:i,LINETHICK4:i,LINETHICK5:i,LINETHICK6:i,LINETHICK7:i,LINETHICK8:i,LINETHICK9:i,LINETHICK10:i,COLORSTICK:r,CIRCLEDOT:r,POINTDOT:r,LINESTICK:r,STICK:r,NODRAW:r,COLORYELLOW:S,COLORBLACK:n,COLORBLUE:s,COLORGREEN:o,COLORCYAN:h,COLORRED:l,COLORMAGENTA:u,COLORBROWN:c,COLORLIGRAY:d,COLORGRAY:f,COLORLIBLUE:m,COLORLIGREEN:C,COLORLICYAN:p,COLORLIRED:D,COLORLIMAGENTA:v,COLORWHITE:g};if(qt){var y={type:"variable",style:"variable-3"},I={interface:t("interface"),extends:t("extends"),constructor:t("constructor"),public:t("public"),private:t("private"),protected:t("protected"),static:t("static"),string:y,number:y,bool:y,any:y};for(var x in I)T[x]=I[x]}return T}(),$t=/[+\-*&%=<>!?|~^@]/,te=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,ee="([{}])",ae={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0},ie={state:null,column:null,marked:null,cc:null},re=new S("this",new S("arguments",null));return I.lex=!0,L.lex=!0,{startState:function(t){var e={tokenize:n,lastType:"sof",cc:[],lexical:new u((t||0)-Ut,0,"block",!1),localVars:a.localVars,context:a.localVars&&new g(null,null,!1),indented:t||0};return a.globalVars&&"object"==typeof a.globalVars&&(e.globalVars=a.globalVars),e},token:function(t,e){if(t.sol()&&(e.lexical.hasOwnProperty("align")||(e.lexical.align=!1),e.indented=t.indentation(),l(t,e)),e.tokenize!=o&&t.eatSpace())return null;var a=e.tokenize(t,e);return"comment"==Wt?a:(e.lastType="operator"!=Wt||"++"!=Xt&&"--"!=Xt?Wt:"incdec",d(e,a,Wt,Xt,t))},indent:function(e,i){if(e.tokenize==o||e.tokenize==h)return t.Pass;if(e.tokenize!=n)return 0;var r,s=i&&i.charAt(0),l=e.lexical;if(!/^\s*else\b/.test(i))for(var u=e.cc.length-1;u>=0;--u){var c=e.cc[u];if(c==L)l=l.prev;else if(c!=vt&&c!=I)break}for(;("stat"==l.type||"form"==l.type)&&("}"==s||(r=e.cc[e.cc.length-1])&&(r==O||r==P)&&!/^[,\.=+\-*:?[\(]/.test(i));)l=l.prev;Kt&&")"==l.type&&"stat"==l.prev.type&&(l=l.prev);var d=l.type,f=s==d;return"vardef"==d?l.indented+("operator"==e.lastType||","==e.lastType?l.info.length+1:0):"form"==d&&"{"==s?l.indented:"form"==d?l.indented+Ut:"stat"==d?l.indented+(Vt(e,i)?Kt||Ut:0):"switch"!=l.info||f||0==a.doubleIndentSwitch?l.align?l.column+(f?0:1):l.indented+(f?0:Ut):l.indented+(/^(?:case|default)\b/.test(i)?Ut:2*Ut)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:zt?null:"/*",blockCommentEnd:zt?null:"*/",blockCommentContinue:zt?null:" * ",lineComment:zt?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:zt?"json":"javascript",jsonldMode:jt,jsonMode:zt,expressionAllowed:Gt,skipExpression:function(e){d(e,"atom","atom","true",new t.StringStream("",2,null))}}}),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/manifest+json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})})},function(t,e,a){!function(t){t(a(122))}(function(t){"use strict";function e(e,i){function r(){e.display.wrapper.offsetHeight?(a(e,i),e.display.lastWrapHeight!=e.display.wrapper.clientHeight&&e.refresh()):i.timeout=setTimeout(r,i.delay)}i.timeout=setTimeout(r,i.delay),i.hurry=function(){clearTimeout(i.timeout),i.timeout=setTimeout(r,50)},t.on(window,"mouseup",i.hurry),t.on(window,"keyup",i.hurry)}function a(e,a){clearTimeout(a.timeout),t.off(window,"mouseup",a.hurry),t.off(window,"keyup",a.hurry)}t.defineOption("autoRefresh",!1,function(t,i){t.state.autoRefresh&&(a(t,t.state.autoRefresh),t.state.autoRefresh=null),i&&0==t.display.wrapper.offsetHeight&&e(t,t.state.autoRefresh={delay:i.delay||250})})})},function(t,e,a){"use strict";function i(){}i.FormatValueThousandsString=function(t,e){if(null==t||isNaN(t)){if(e>0){for(var a="-.",i=0;i<e;++i)a+="-";return a}return"--"}var r="",n=t.toFixed(e);if(e>0){var s=n.split(".")[1],o=n.split(".")[0],h=Number(o),l=null;for(h<0&&(h=Math.abs(h),l=!0),h=h.toString();h.length>3;)r=","+h.slice(-3)+r,h=h.slice(0,h.length-3);h&&(r=null!=l?"-"+h+r+"."+s:h+r+"."+s)}else{var u=Number(n),l=null;for(u<0&&(u=Math.abs(u),l=!0),u=u.toString();u.length>3;)r=","+u.slice(-3)+r,u=u.slice(0,u.length-3);u&&(r=null!=l?"-"+u+r:u+r)}return r},i.FormatValueString=function(t,e){if(null==t||isNaN(t)){if(e>0){for(var a="-.",i=0;i<e;++i)a+="-";return a}return"--"}if(t<1e-11&&t>-1e-11)return"0";var r=Math.abs(t);return r<1e4?t.toFixed(e):r<1e8?(t/1e4).toFixed(e)+"万":r<1e12?(t/1e8).toFixed(e)+"亿":(t/1e12).toFixed(e)+"万亿"},i.NumberToString=function(t){return t<10?"0"+t.toString():t.toString()},i.FormatDateString=function(t,e){var a=parseInt(t/1e4),r=parseInt(t/100)%100,n=t%100;switch(e){case"MM-DD":return i.NumberToString(r)+"-"+i.NumberToString(n);default:return a.toString()+"-"+i.NumberToString(r)+"-"+i.NumberToString(n)}},i.FormatTimeString=function(t){if(t<1e4){var e=parseInt(t/100),a=t%100;return i.NumberToString(e)+":"+i.NumberToString(a)}var e=parseInt(t/1e4),a=parseInt(t%1e4/100),r=t%100;return i.NumberToString(e)+":"+i.NumberToString(a)+":"+i.NumberToString(r)},i.FormatReportDateString=function(t){var e,a=parseInt(t/1e4),i=parseInt(t/100)%100;switch(i){case 3:e="一季度报";break;case 6:e="半年报";break;case 9:e="三季度报";break;case 12:e="年报"}return a.toString()+e},i.FormatDateTimeString=function(t,e){var a=t.split(" ");if(a.length<2)return"";var i=parseInt(a[1]),r=i%100,n=parseInt(i/100),s=(n<10?"0"+n.toString():n.toString())+":"+(r<10?"0"+r.toString():r.toString());if(1==e){var o=parseInt(a[0]),h=parseInt(o/1e4),l=parseInt(o%1e4/100),u=o%100;s=h.toString()+"-"+(l<10?"0"+l.toString():l.toString())+"-"+(u<10?"0"+u.toString():u.toString())+" "+s}return s},i.FormatValueColor=function(t,e){return null!=t&&null==e?0==t?"PriceNull":t>0?"PriceUp":"PriceDown":null==t||null==e?"PriceNull":t==e?"PriceNull":t>e?"PriceUp":"PriceDown"},i.IsNumber=function(t){return null!=t&&!isNaN(t)},i.IsPlusNumber=function(t){return null!=t&&(!isNaN(t)&&t>0)},i.IsObjectExist=function(t){return void 0!==t&&null!=t},i.Guid=function(){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},e.a=i},function(t,e,a){function i(t){return a(r(t))}function r(t){var e=n[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var n={"./af":168,"./af.js":168,"./ar":169,"./ar-dz":170,"./ar-dz.js":170,"./ar-kw":171,"./ar-kw.js":171,"./ar-ly":172,"./ar-ly.js":172,"./ar-ma":173,"./ar-ma.js":173,"./ar-sa":174,"./ar-sa.js":174,"./ar-tn":175,"./ar-tn.js":175,"./ar.js":169,"./az":176,"./az.js":176,"./be":177,"./be.js":177,"./bg":178,"./bg.js":178,"./bm":179,"./bm.js":179,"./bn":180,"./bn-bd":181,"./bn-bd.js":181,"./bn.js":180,"./bo":182,"./bo.js":182,"./br":183,"./br.js":183,"./bs":184,"./bs.js":184,"./ca":185,"./ca.js":185,"./cs":186,"./cs.js":186,"./cv":187,"./cv.js":187,"./cy":188,"./cy.js":188,"./da":189,"./da.js":189,"./de":190,"./de-at":191,"./de-at.js":191,"./de-ch":192,"./de-ch.js":192,"./de.js":190,"./dv":193,"./dv.js":193,"./el":194,"./el.js":194,"./en-au":195,"./en-au.js":195,"./en-ca":196,"./en-ca.js":196,"./en-gb":197,"./en-gb.js":197,"./en-ie":198,"./en-ie.js":198,"./en-il":199,"./en-il.js":199,"./en-in":200,"./en-in.js":200,"./en-nz":201,"./en-nz.js":201,"./en-sg":202,"./en-sg.js":202,"./eo":203,"./eo.js":203,"./es":204,"./es-do":205,"./es-do.js":205,"./es-mx":206,"./es-mx.js":206,"./es-us":207,"./es-us.js":207,"./es.js":204,"./et":208,"./et.js":208,"./eu":209,"./eu.js":209,"./fa":210,"./fa.js":210,"./fi":211,"./fi.js":211,"./fil":212,"./fil.js":212,"./fo":213,"./fo.js":213,"./fr":214,"./fr-ca":215,"./fr-ca.js":215,"./fr-ch":216,"./fr-ch.js":216,"./fr.js":214,"./fy":217,"./fy.js":217,"./ga":218,"./ga.js":218,"./gd":219,"./gd.js":219,"./gl":220,"./gl.js":220,"./gom-deva":221,"./gom-deva.js":221,"./gom-latn":222,"./gom-latn.js":222,"./gu":223,"./gu.js":223,"./he":224,"./he.js":224,"./hi":225,"./hi.js":225,"./hr":226,"./hr.js":226,"./hu":227,"./hu.js":227,"./hy-am":228,"./hy-am.js":228,"./id":229,"./id.js":229,"./is":230,"./is.js":230,"./it":231,"./it-ch":232,"./it-ch.js":232,"./it.js":231,"./ja":233,"./ja.js":233,"./jv":234,"./jv.js":234,"./ka":235,"./ka.js":235,"./kk":236,"./kk.js":236,"./km":237,"./km.js":237,"./kn":238,"./kn.js":238,"./ko":239,"./ko.js":239,"./ku":240,"./ku.js":240,"./ky":241,"./ky.js":241,"./lb":242,"./lb.js":242,"./lo":243,"./lo.js":243,"./lt":244,"./lt.js":244,"./lv":245,"./lv.js":245,"./me":246,"./me.js":246,"./mi":247,"./mi.js":247,"./mk":248,"./mk.js":248,"./ml":249,"./ml.js":249,"./mn":250,"./mn.js":250,"./mr":251,"./mr.js":251,"./ms":252,"./ms-my":253,"./ms-my.js":253,"./ms.js":252,"./mt":254,"./mt.js":254,"./my":255,"./my.js":255,"./nb":256,"./nb.js":256,"./ne":257,"./ne.js":257,"./nl":258,"./nl-be":259,"./nl-be.js":259,"./nl.js":258,"./nn":260,"./nn.js":260,"./oc-lnc":261,"./oc-lnc.js":261,"./pa-in":262,"./pa-in.js":262,"./pl":263,"./pl.js":263,"./pt":264,"./pt-br":265,"./pt-br.js":265,"./pt.js":264,"./ro":266,"./ro.js":266,"./ru":267,"./ru.js":267,"./sd":268,"./sd.js":268,"./se":269,"./se.js":269,"./si":270,"./si.js":270,"./sk":271,"./sk.js":271,"./sl":272,"./sl.js":272,"./sq":273,"./sq.js":273,"./sr":274,"./sr-cyrl":275,"./sr-cyrl.js":275,"./sr.js":274,"./ss":276,"./ss.js":276,"./sv":277,"./sv.js":277,"./sw":278,"./sw.js":278,"./ta":279,"./ta.js":279,"./te":280,"./te.js":280,"./tet":281,"./tet.js":281,"./tg":282,"./tg.js":282,"./th":283,"./th.js":283,"./tk":284,"./tk.js":284,"./tl-ph":285,"./tl-ph.js":285,"./tlh":286,"./tlh.js":286,"./tr":287,"./tr.js":287,"./tzl":288,"./tzl.js":288,"./tzm":289,"./tzm-latn":290,"./tzm-latn.js":290,"./tzm.js":289,"./ug-cn":291,"./ug-cn.js":291,"./uk":292,"./uk.js":292,"./ur":293,"./ur.js":293,"./uz":294,"./uz-latn":295,"./uz-latn.js":295,"./uz.js":294,"./vi":296,"./vi.js":296,"./x-pseudo":297,"./x-pseudo.js":297,"./yo":298,"./yo.js":298,"./zh-cn":299,"./zh-cn.js":299,"./zh-hk":300,"./zh-hk.js":300,"./zh-mo":301,"./zh-mo.js":301,"./zh-tw":302,"./zh-tw.js":302};i.keys=function(){return Object.keys(n)},i.resolve=r,t.exports=i,i.id=484},function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"indexEditWrap",staticClass:"indexEditWrap"},[a("div",{staticClass:"left"},[a("category-list",{ref:"categorylist",on:{changeCategory:t.changeCategory,deleteStrategy:t.deleteStrategy,changeStrategyName:t.changeStrategyName}})],1),t._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"rightContentWrap"},[t.editableTabs.length>0?a("div",{ref:"spaceBox",staticClass:"spaceBox"}):t._e(),t._v(" "),a("el-tabs",{attrs:{type:"card",closable:""},on:{"tab-remove":t.removeTab,"tab-click":t.handleTabClick},model:{value:t.editableTabsValue,callback:function(e){t.editableTabsValue=e},expression:"editableTabsValue"}},t._l(t.editableTabs,function(t){return a("el-tab-pane",{key:t.name,attrs:{label:t.title,name:t.name}})}),1),t._v(" "),t.editableTabs.length>0?a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"commonTabContentWrap"},[a("div",{ref:"editorWrap",staticClass:"editorWrap"},[a("div",{staticClass:"klineConditonWrap"},[a("div",{staticClass:"selectInfoWrap"},[a("div",{staticClass:"oneLineWrap"},[a("span",{staticClass:"labelPeriod"},[t._v("周  期：")]),t._v(" "),a("el-select",{attrs:{"value-key":"Value",placeholder:"请选择",size:"small"},on:{change:t.changePeriod},model:{value:t.kLineChart.Period,callback:function(e){t.$set(t.kLineChart,"Period",e)},expression:"kLineChart.Period"}},t._l(t.PeroidOptions,function(t){return a("el-option",{key:t.Value,attrs:{label:t.Text,value:t}})}),1),t._v(" "),a("span",{staticClass:"timeRange"},[t._v(" K线范围：")]),t._v(" "),a("el-select",{staticClass:"dataNum",attrs:{placeholder:"请选择",size:"small"},model:{value:t.dataNum,callback:function(e){t.dataNum=e},expression:"dataNum"}},t._l(t.filterDataNumOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("div",{staticClass:"oneLineWrap"},[a("span",{staticClass:"labelRight"},[t._v("复权方式：")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择",disabled:t.rightsOptionsDisabled,size:"small"},on:{change:t.changeRight},model:{value:t.kLineChart.Right.Value,callback:function(e){t.$set(t.kLineChart.Right,"Value",e)},expression:"kLineChart.Right.Value"}},t._l(t.RightOptions,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})}),1),t._v(" "),a("span",{staticClass:"labelSymbol"},[t._v("股票代码：")]),t._v(" "),a("el-select",{staticClass:"stockSearchSelect",attrs:{size:"small","value-key":"symbol",filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入股票代码或简称","remote-method":t.remoteMethod,loading:t.searchLoading},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}},t._l(t.resultOptions,function(e){return a("el-option",{key:e.symbol,attrs:{label:e.name,value:e}},[t._v("\n                    "+t._s(e.symbol)+" "+t._s(e.name)+"\n                  ")])}),1)],1)]),t._v(" "),a("div",{staticClass:"paramsEditWrap"},[a("table",{staticClass:"editTable"},[t._m(0),t._v(" "),a("tbody",[t._l(t.filterCurrentList,function(e,i){return a("tr",{key:i},[a("td",[a("div",{staticClass:"box name"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.name.value,expression:"row.name.value"}],attrs:{type:"text"},domProps:{value:e.name.value},on:{input:function(a){a.target.composing||t.$set(e.name,"value",a.target.value)}}})])]),t._v(" "),a("td",[a("div",{staticClass:"box min"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.min.value,expression:"row.min.value"}],attrs:{type:"text"},domProps:{value:e.min.value},on:{input:function(a){a.target.composing||t.$set(e.min,"value",a.target.value)}}})])]),t._v(" "),a("td",[a("div",{staticClass:"box max"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.max.value,expression:"row.max.value"}],attrs:{type:"text"},domProps:{value:e.max.value},on:{input:function(a){a.target.composing||t.$set(e.max,"value",a.target.value)}}})])]),t._v(" "),a("td",[a("div",{staticClass:"box defVale"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.value.value,expression:"row.value.value"}],attrs:{type:"text"},domProps:{value:e.value.value},on:{input:function(a){a.target.composing||t.$set(e.value,"value",a.target.value)}}})])]),t._v(" "),a("td",[a("button",{directives:[{name:"show",rawName:"v-show",value:i===t.filterCurrentList.length-1,expression:"rowIndex === filterCurrentList.length - 1"}],attrs:{type:"default"},on:{click:t.addRow}},[a("i",{staticClass:"el-icon-plus strongFont"})]),t._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:i>2,expression:"rowIndex > 2"}],attrs:{type:"default"}},[a("i",{staticClass:"el-icon-minus strongFont",on:{click:function(e){return t.deleteRow(i)}}})])])])}),t._v(" "),0===t.filterCurrentList.length?a("tr",[a("td",{attrs:{colspan:"5"}},[a("div",{staticClass:"noData"},[a("button",{attrs:{type:"default"},on:{click:t.addRow}},[a("i",{staticClass:"el-icon-plus strongFont"})])])])]):t._e()],2)])])]),t._v(" "),a("div",{staticClass:"paramsBtnsWrap"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.preExecOrSave("exec")}}},[t._v("执行")]),t._v(" "),a("el-button",{attrs:{type:"default",size:"small"},on:{click:function(e){return t.preExecOrSave("save")}}},[t._v("保存")])],1)]),t._v(" "),a("div",{staticClass:"codeWrap"},[a("h3",[t._v("指标编辑")]),t._v(" "),a("div",{staticClass:"code"},[a("codemirror",{ref:"myCm",attrs:{options:t.CMOptions},model:{value:t.CurrentCode,callback:function(e){t.CurrentCode=e},expression:"CurrentCode"}})],1)])]):a("div",{staticClass:"noData"},[t._v("还未选择指标")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"",visible:t.dialogVisible,"close-on-click-modal":!1,width:"60%"},on:{"update:visible":function(e){t.dialogVisible=e},close:t.closeKlineDialog}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.indexDataLoading,expression:"indexDataLoading"}]},[a("el-tabs",{staticClass:"elTabsRun",on:{"tab-click":t.handleResultClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"运行结果",name:"first"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"数据表格",name:"second"}})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"first"===t.activeName,expression:"activeName === 'first'"}],ref:"kline",staticClass:"kline"}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"second"===t.activeName,expression:"activeName === 'second'"}],staticClass:"tableWrapInDialog"},[a("el-table",{ref:"klineDataTable",staticStyle:{width:"100%"},attrs:{data:t.pageTableData,size:"midium",height:"550"}},t._l(t.headerList,function(t,e){return a("el-table-column",{key:e,attrs:{prop:t.prop,label:t.label,width:t.width,align:t.align}})}),1),t._v(" "),a("div",{staticClass:"paginationWrapInDialog"},[a("el-pagination",{attrs:{background:"","page-size":t.paginationObj.PageSize,layout:"prev, pager, next",total:t.paginationObj.total},on:{"current-change":t.currentChange}})],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})])],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("td",[t._v("参数名称")]),t._v(" "),a("td",[t._v("最小")]),t._v(" "),a("td",[t._v("最大")]),t._v(" "),a("td",[t._v("缺省")]),t._v(" "),a("td")])])}],n={render:i,staticRenderFns:r};e.a=n},function(t,e,a){"use strict";function i(t){a(487)}var r=a(303),n=a(497),s=a(4),o=i,h=s(r.a,n.a,!1,o,null,null);e.a=h.exports},function(t,e,a){var i=a(488);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(3)("18bf0246",i,!0,{})},function(t,e,a){e=t.exports=a(2)(!1),e.push([t.i,'.noData{padding-top:30px;text-align:center;color:#666}.elTabsRun{margin-top:-30px}.checkListWrap{width:100%;height:200px;overflow-y:auto}.checkListWrap .checkItem{height:40px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.strategyEditWrap{width:100%;height:100%;position:relative}.strategyEditWrap .blocksWrap{height:600px;overflow-y:auto}.strategyEditWrap .blocksWrap .blocks{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.strategyEditWrap .blocksWrap .blocks .item{padding:0 10px;width:112px;line-height:32px;color:#50555f;cursor:pointer}.strategyEditWrap .blocksWrap .blocks .item.active{color:#eb6100}.strategyEditWrap .left,.strategyEditWrap .right{position:absolute;top:0;height:100%;box-sizing:border-box}.strategyEditWrap .left{left:0;width:240px;border-right:1px solid #d9d9d9;overflow-y:auto;overflow-x:hidden}.strategyEditWrap .left .el-menu{border-right:none;min-height:100%}.strategyEditWrap .left .el-menu .el-menu-item,.strategyEditWrap .left .el-menu .el-submenu__title{height:33px;line-height:33px}.strategyEditWrap .right{left:240px;width:calc(100% - 240px)}.strategyEditWrap .right .rightContentWrap{height:100%}.strategyEditWrap .right .rightContentWrap .spaceBox{width:100%;height:7px;background-color:#f7f8f9}.strategyEditWrap .right .rightContentWrap .el-tabs--card>.el-tabs__header{border-bottom:1px solid #d9d9d9;background-color:#f7f8f9}.strategyEditWrap .right .rightContentWrap .el-tabs--card>.el-tabs__header .el-tabs__item{height:30px;line-height:30px}.strategyEditWrap .right .rightContentWrap .el-tabs--card>.el-tabs__header .el-tabs__item.is-active{border-bottom-color:1px solid #d9d9d9;background-color:#fff}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap{width:100%;height:calc(100% - 7px - 31px - 15px);display:-ms-flexbox;display:flex}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft{width:660px;height:100%;box-sizing:border-box;padding:0 22px;position:relative}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft:after{content:"";position:absolute;top:-15px;right:0;height:calc(100% + 15px);width:1px;background-color:#d9d9d9}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .oprWrap{height:42px;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .oprWrap .poolItem{padding:0 15px 0 5px}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .select-line{height:42px;width:100%;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;box-sizing:border-box;-ms-flex-pack:justify;justify-content:space-between}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .select-line .one-select{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .select-line .one-select:last-child{margin-right:0}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .select-line .one-select .label{color:#000;font-size:14px}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .select-line .one-select .el-select{height:30px}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .select-line .one-select .el-select .el-input__inner{width:80px}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .select-line .one-select .el-select .el-input__icon{width:14px;line-height:32px}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .select-line .one-select .el-select .el-input--suffix .el-input__inner{padding-right:16px}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .select-line .one-select .dataNum{width:80px}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .select-line .one-select .dataNum input{padding:0 0 0 15px}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .descWrap{height:70px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .descWrap .resizeNone .el-textarea__inner{resize:none}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .descWrap .label{height:100%;width:80px;display:-ms-flexbox;display:flex;-ms-flex-align:start;align-items:flex-start;padding-top:8px;box-sizing:border-box}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .descWrap .el-textarea{width:calc(100% - 80px)}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .addIndexBtnWrap{height:52px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .addIndexBtnWrap .statusWrap{margin-left:200px}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList{height:calc(100% - 42px - 42px - 52px - 70px);overflow-y:auto;margin:0 -22px;padding:0 22px}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem{padding-bottom:15px;position:relative}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selctTitle{width:100%;height:24px;background-color:#fdefe5;border-radius:3px 3px 0 0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;color:#eb6100;padding:0 9px;font-size:12px;box-sizing:border-box}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selctTitle .delBtn{cursor:pointer}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selectContent{padding-top:6px;padding-bottom:6px;border:1px solid #ffab70}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selectContent .paramsEditWrap{width:calc(100% - 30px);box-sizing:border-box;background-color:#f7f8f9;overflow-y:auto;border:1px solid #d9d9d9;margin:0 auto;margin-bottom:15px}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selectContent .paramsEditWrap .paramsTitle{height:30px;display:-ms-flexbox;display:flex;box-sizing:border-box;padding:0 10px;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selectContent .paramsEditWrap .editTable{width:100%;border-spacing:0;border:none;border-collapse:collapse}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selectContent .paramsEditWrap .editTable .noData{text-align:center;padding-top:40px}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selectContent .paramsEditWrap .editTable .strongFont{font-weight:700}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selectContent .paramsEditWrap .editTable tr>td:first-child,.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selectContent .paramsEditWrap .editTable tr>td:nth-child(2),.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selectContent .paramsEditWrap .editTable tr>td:nth-child(3),.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selectContent .paramsEditWrap .editTable tr>td:nth-child(4){width:107px}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selectContent .paramsEditWrap .editTable thead td{line-height:32px;text-align:center}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selectContent .paramsEditWrap .editTable .box{padding:5px;height:35px;text-align:center;box-sizing:border-box}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selectContent .paramsEditWrap .editTable .box input[type=number],.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selectContent .paramsEditWrap .editTable .box input[type=text]{width:78px;box-sizing:border-box;height:100%;border:1px solid #d9d9d9;outline:none;text-align:center;vertical-align:top}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selectContent .paramsEditWrap .editTable .box input[type=number]:focus,.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selectContent .paramsEditWrap .editTable .box input[type=text]:focus{border:1px solid #2196f3}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selectContent .paramsEditWrap .addBtn{cursor:pointer;width:26px;height:26px;line-height:26px;text-align:center;background-color:#efefef;border-radius:3px;border:1px solid #dcdcdc;margin-left:10px}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selectContent .paramsEditWrap .addBtn .el-icon-plus{font-weight:700;color:#666;font-size:23px}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selectContent .noData{padding-top:0;padding-bottom:10px}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selectContent .one-select{width:100%;height:32px;margin-bottom:2px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;box-sizing:border-box;padding:0 15px}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selectContent .one-select:last-child{margin-bottom:0}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selectContent .one-select .andText{padding:0 15px}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selectContent .type-name{width:65px;height:32px;text-align:left;line-height:32px;color:#73879c;font-size:14px;overflow:hidden}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selectContent .operator{width:122px;height:32px;background-color:#fff;box-shadow:0 2px 5px 0 rgba(73,74,106,.14);border-radius:3px;border:1px solid #d7d8e0;box-sizing:border-box;font-size:14px;color:#3b3d65}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selectContent .operator input{border:none}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selectContent .operator .el-input__icon{line-height:30px}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selectContent .operator-Value{width:107px;height:32px;background-color:#fafafc;box-shadow:inset 0 5px 0 0 #e7e7e7;border-radius:3px;border:1px solid #c3cad9;box-sizing:border-box;color:#3b3d65;font-size:14px}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selectContent .operator-Value input{border:none;padding-right:0}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selectContent .el-radio{margin:0}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selectContent .el-radio:first-child{margin-right:12px}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selectContent .el-radio__label{padding-left:4px;color:#3b3d65}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selectContent .el-radio__input.is-checked .el-radio__inner{border-color:#125fd9;background:#125fd9}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentLeft .indexDetailList .selectItem .selectContent .el-input__inner{height:29px;line-height:29px}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentRight{width:calc(100% - 660px);height:100%;overflow-y:auto}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentRight .resultTableWrap{width:100%;height:calc(100% - 50px)}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentRight .resultTableWrap .mainContentWrap{height:100%}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentRight .resultTableWrap .mainContentWrap .elTableWrap{width:100%;height:calc(100% - 50px)}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentRight .resultTableWrap .mainContentWrap .paginationWrapInDialog{width:100%;height:50px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentRight .titleCss{width:100%;height:50px;background-color:#fff;padding-left:16px;box-sizing:border-box;color:#666;font-size:14px;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;padding-right:16px}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentRight .titleCss .title-right{display:-ms-flexbox;display:flex}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentRight .titleCss .select-btn.noClick{background:#909399;cursor:not-allowed;border:none;color:#fff}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentRight .titleCss .downloadExcel.noClick{background:#909399;cursor:not-allowed}.strategyEditWrap .right .rightContentWrap .commonTabContentWrap .tabContentRight .nodata{height:40px;color:#666;font-size:14px;text-align:center;width:100%;line-height:40px}',""])},function(t,e,a){"use strict";function i(t){a(490)}var r=a(304),n=a(492),s=a(4),o=i,h=s(r.a,n.a,!1,o,null,null);e.a=h.exports},function(t,e,a){var i=a(491);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(3)("e1d88334",i,!0,{})},function(t,e,a){var i=a(32);e=t.exports=a(2)(!1),e.push([t.i,".category-wrap .category-list{padding-top:10px}.category-wrap .noCategory{height:100px;padding:100px 0;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:distribute;justify-content:space-around}.category-wrap .noCategory .el-input{width:80%}.category-wrap .category-list>li{line-height:32px;padding-left:10px}.category-wrap .category-list>li .iconfont{position:relative;display:inline-block;z-index:1;margin-left:1px;margin-right:5px;font-weight:400;color:#333;width:11px;height:11px;vertical-align:middle;margin-top:-3px}.category-wrap .category-list>li .iconfont.icon-m{background-image:url("+i(a(67))+")}.category-wrap .category-list>li .iconfont.icon-p{background-image:url("+i(a(68))+')}.category-wrap .category-list>li .catagory-lv1{cursor:pointer;font-weight:700}.category-wrap .category-list>li .catagory-lv1:before{content:"";position:absolute;width:16px;height:16px;top:4px;left:7px;background-image:url('+i(a(22))+');background-repeat:repeat-x}.category-wrap .category-list>li .catagory-lv1 i{color:#a1a1a1;font-size:12px}.category-wrap .category-list>li .catagory-lv1,.category-wrap .category-list>li ul{position:relative}.category-wrap .category-list>li .catagory-lv1:after,.category-wrap .category-list>li ul:after{content:"";position:absolute;width:10px;top:0;bottom:0;left:-1px;background-image:url('+i(a(69))+');background-repeat:repeat-y}.category-wrap .category-list>li:first-child .catagory-lv1:after{top:10px}.category-wrap .category-list>li:last-child>p:last-child:after{bottom:16px}.category-wrap .category-list>li:last-child>ul:last-child:after{bottom:12px}.category-wrap .category-list li ul>li{position:relative;padding-left:32px;line-height:26px}.category-wrap .category-list li ul>li:before{content:"";position:absolute;width:24px;height:13px;top:2px;left:7px;background-image:url('+i(a(22))+");background-repeat:repeat-x}.category-wrap .category-list li ul>li .catagory-lv2{cursor:pointer}.category-wrap .category-list .isSelected>p{color:#ff7f00}.category-wrap .right-menu{position:absolute;transform:translate(-5px,-5px);width:128px;border:1px solid #a2a2a2;border-radius:3px;z-index:1}.category-wrap .right-menu li{background:hsla(0,0%,100%,.9);padding-left:12px;line-height:34px;cursor:pointer}.category-wrap .right-menu li:hover{background:hsla(0,0%,90%,.9)}",""])},function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"category-wrap",attrs:{id:"categoryWrap"},on:{click:t.hideRightMenu,mouseleave:t.hideRightMenu}},[a("ul",{staticClass:"category-list"},t._l(t.categoryList,function(e){return a("li",{key:e.categoryid,class:{isSelected:e.isSelected},attrs:{onselectstart:"return false"},on:{contextmenu:function(a){return a.stopPropagation(),t.rightMenu(a,[e.categoryid])}}},[e.editing||e.creating?[a("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],attrs:{id:"J-edit-input",type:"text",placeholder:""},domProps:{value:t.text},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit.apply(null,arguments)},input:function(e){e.target.composing||(t.text=e.target.value)}}})]:[a("p",{staticClass:"catagory-lv1",on:{click:function(a){return t.toggleShow(e)}}},[e.opened?a("i",{staticClass:"iconfont icon-p"}):a("i",{staticClass:"iconfont icon-m"}),t._v("\n                    "+t._s(e.name)+"\n                ")])],t._v(" "),e.opened?a("ul",t._l(e.children,function(i){return a("li",{key:i.children,class:{isSelected:i.isSelected},attrs:{onselectstart:"return false"},on:{contextmenu:function(a){return a.stopPropagation(),t.rightMenu(a,[e.categoryid,i.categoryid])}}},[i.editing||i.creating?[a("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"levelOne",attrs:{id:"J-edit-input",type:"text",placeholder:""},domProps:{value:t.text},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit.apply(null,arguments)},input:function(e){e.target.composing||(t.text=e.target.value)}}})]:[a("p",{staticClass:"catagory-lv2",on:{click:function(a){return t.checkCategory([e.categoryid,i.categoryid])}}},[t._v(t._s(i.name))])]],2)}),0):t._e()],2)}),0),t._v(" "),t.isShowNoCategory?a("div",{staticClass:"noCategory"},[a("el-input",{attrs:{placeholder:"输入分组名称",size:"small"},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addFirstGroup}},[t._v("新增分组")])],1):t._e(),t._v(" "),t.showRightMenu?a("ul",{staticClass:"right-menu",style:{left:t.currentMousePosition.x+"px",top:t.currentMousePosition.y+"px"}},[a("li",{on:{click:function(e){return t.addCategory("brother")}}},[a("i",{staticClass:"iconfont icon-xinjianjiedian"}),t._v(" "+t._s(t.sameLevelChildOprTitle)+"\n        ")]),t._v(" "),a("li",{directives:[{name:"show",rawName:"v-show",value:t.showSubCategory,expression:"showSubCategory"}],on:{click:function(e){return t.addCategory("child")}}},[a("i",{staticClass:"iconfont icon-xinjianjiedian",staticStyle:{visibility:"hidden"}}),t._v(" "+t._s(t.nextLevelChildOprTitle)+"\n        ")]),t._v(" "),a("li",{on:{click:t.editCategory}},[a("i",{staticClass:"iconfont icon-bianjibiaoti"}),t._v(" 编辑\n        ")]),t._v(" "),t.showDelateButton?a("li",{on:{click:t.confirm}},[a("i",{staticClass:"iconfont icon-shanchujiedian"}),t._v(" 删除\n        ")]):t._e()]):t._e()])},r=[],n={render:i,staticRenderFns:r};e.a=n},function(t,e,a){"use strict";function i(t){a(494)}var r=a(305),n=a(496),s=a(4),o=i,h=s(r.a,n.a,!1,o,"data-v-22fa4186",null);e.a=h.exports},function(t,e,a){var i=a(495);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(3)("646f56c9",i,!0,{})},function(t,e,a){e=t.exports=a(2)(!1),e.push([t.i,'.indexSearchWrap[data-v-22fa4186]{width:100%;height:600px;border:1px solid #c8d2db}.indexSearchWrap .target-content[data-v-22fa4186]{height:100%;display:-ms-flexbox;display:flex}.indexSearchWrap .target-left[data-v-22fa4186]{width:200px;height:100%;border-right:1px solid #c8d2db;box-sizing:border-box}.indexSearchWrap .target-left .groupWrap[data-v-22fa4186]{height:calc(100% - 40px);overflow:auto;border-top:1px solid #c8d2db}.indexSearchWrap .target-left input[data-v-22fa4186]{margin-left:10px;height:40px;line-height:40px;border:none;font-size:14px}.indexSearchWrap .target-left ul[data-v-22fa4186]{border-top:none;list-style:none;padding:10px;box-sizing:border-box}.indexSearchWrap .target-left ul li[data-v-22fa4186]{font-size:13px;line-height:30px;color:#757d81;cursor:pointer}.indexSearchWrap .active-list[data-v-22fa4186]{color:#1295d9!important}.indexSearchWrap .target-right[data-v-22fa4186]{width:calc(100% - 200px);height:100%;overflow-y:auto}.indexSearchWrap .target-right .noData[data-v-22fa4186]{width:100%;height:100%;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;box-sizing:border-box}.indexSearchWrap .target-right ul[data-v-22fa4186]{width:100%;max-height:100%;padding-top:10px;padding-left:20px;box-sizing:border-box}.indexSearchWrap .target-right ul[data-v-22fa4186]:after{content:"";width:0;height:0;clear:both}.indexSearchWrap .target-right ul li[data-v-22fa4186]{margin-top:5px;margin-left:10px;list-style:none;width:175px;line-height:30px;text-align:left;float:left;cursor:pointer}',""])},function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"indexSearchWrap"},[a("div",{staticClass:"target-content"},[a("div",{staticClass:"target-left"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.inputValue},on:{input:function(e){e.target.composing||(t.inputValue=e.target.value)}}}),t._v(" "),a("div",{staticClass:"groupWrap"},[a("ul",t._l(t.indexData,function(e,i){return a("li",{key:i,class:{"active-list":i===t.groupIndex},on:{click:function(e){return t.changeGroup(i)}}},[t._v(t._s(e.name))])}),0)])]),t._v(" "),a("div",{staticClass:"target-right"},[t.filterStrategies.length>0?a("ul",t._l(t.filterStrategies,function(e,i){return a("li",{key:i,class:{"active-list":t.activeIndexId===e.id},on:{click:function(a){return t.selectOneIndex(e)}}},[t._v(t._s(e.name))])}),0):a("div",{staticClass:"noData"},[t._v("暂无数据")])])])])},r=[],n={render:i,staticRenderFns:r};e.a=n},function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"strategyEditWrap",staticClass:"strategyEditWrap"},[a("div",{staticClass:"left"},[a("category-list",{ref:"categorylist",attrs:{parentCompName:"strategyEdit"},on:{changeCategory:t.changeCategory,delStockStrategy:t.delStockStrategy,changeStrategyName:t.changeStrategyName,addStockStrategy:t.addStockStrategy,addStockStrategyGroup:t.addStockStrategyGroup,editChildNode:t.editChildNode,editParentNode:t.editParentNode,refreshtablesize:t.refreshtablesize}})],1),t._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"rightContentWrap"},[t.editableTabs.length>0?a("div",{ref:"spaceBox",staticClass:"spaceBox"}):t._e(),t._v(" "),a("el-tabs",{attrs:{type:"card",closable:""},on:{"tab-remove":t.removeTab,"tab-click":t.handleTabClick},model:{value:t.editableTabsValue,callback:function(e){t.editableTabsValue=e},expression:"editableTabsValue"}},t._l(t.editableTabs,function(t){return a("el-tab-pane",{key:t.name,attrs:{label:t.title,name:t.name}})}),1),t._v(" "),t.editableTabs.length>0?a("div",{staticClass:"commonTabContentWrap"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"tabContentLeft"},[a("div",{staticClass:"oprWrap"},[a("div",{staticClass:"selectWrap"},[t._v("\n              股票池："),t._l(t.currentStrategyInfo.pageData.stockPool,function(e,i){return a("span",{key:i,staticClass:"poolItem"},[t._v(t._s(e.name))])}),t._v(" "),a("el-button",{attrs:{type:"default",size:"small"},on:{click:t.goSelectStockPool}},[t._v("选择股票池")])],2),t._v(" "),a("div",{staticClass:"btns"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.saveStrategyFun}},[t._v("保存策略")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.execStrategyFun}},[t._v("执行策略")])],1)]),t._v(" "),a("div",{staticClass:"select-line"},[a("div",{staticClass:"one-select"},[a("div",{staticClass:"label"},[t._v("周期：")]),t._v(" "),a("el-select",{staticClass:"period",attrs:{placeholder:"请选择",size:"small"},on:{change:t.changePeriod},model:{value:t.currentStrategyInfo.pageData.period,callback:function(e){t.$set(t.currentStrategyInfo.pageData,"period",e)},expression:"currentStrategyInfo.pageData.period"}},t._l(t.periodOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("div",{staticClass:"one-select"},[a("div",{staticClass:"label"},[t._v("复权：")]),t._v(" "),a("el-select",{staticClass:"stock-reversion",attrs:{placeholder:"请选择",disabled:t.rightsOptionsDisabled,size:"small"},on:{change:t.changeRight},model:{value:t.currentStrategyInfo.pageData.right,callback:function(e){t.$set(t.currentStrategyInfo.pageData,"right",e)},expression:"currentStrategyInfo.pageData.right"}},t._l(t.rightsOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("div",{staticClass:"one-select"},[a("div",{staticClass:"label"},[t._v("K线范围：")]),t._v(" "),a("el-select",{staticClass:"dataNum",attrs:{placeholder:"请选择",size:"small"},on:{change:t.changeNum},model:{value:t.dataNum,callback:function(e){t.dataNum=e},expression:"dataNum"}},t._l(t.filterDataNumOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)]),t._v(" "),a("div",{staticClass:"descWrap"},[a("div",{staticClass:"label"},[t._v("\n              描述信息：\n            ")]),t._v(" "),a("el-input",{staticClass:"resizeNone",attrs:{type:"textarea",rows:2,placeholder:"请输入描述信息内容",maxlength:255},model:{value:t.currentStrategyInfo.pageData.desc,callback:function(e){t.$set(t.currentStrategyInfo.pageData,"desc",e)},expression:"currentStrategyInfo.pageData.desc"}})],1),t._v(" "),a("div",{staticClass:"addIndexBtnWrap"},[a("el-button",{staticClass:"addIndexBtn",attrs:{type:"primary",size:"small"},on:{click:t.openDialog}},[t._v("+添加指标")]),t._v(" "),a("div",{staticClass:"statusWrap"},[t._v("状态：\n              "),a("el-select",{staticClass:"dataNum",attrs:{placeholder:"请选择",size:"small"},on:{change:t.changeNum},model:{value:t.currentStrategyInfo.pageData.status,callback:function(e){t.$set(t.currentStrategyInfo.pageData,"status",e)},expression:"currentStrategyInfo.pageData.status"}},t._l(t.statusAry,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)],1),t._v(" "),a("div",{staticClass:"indexDetailList"},t._l(t.currentStrategyInfo.pageData.strategies,function(e,i){return a("div",{key:i,staticClass:"selectItem"},[a("div",{staticClass:"selctTitle"},[a("div",{staticClass:"name"},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"delBtn",on:{click:function(e){return t.delOneIndexInStrategy(i)}}},[t._v("删除")])]),t._v(" "),a("div",{staticClass:"selectContent"},[e.args.length>0?a("div",{staticClass:"paramsEditWrap"},[a("div",{staticClass:"paramsTitle"},[t._v("参数"),a("i",{class:e.argsOpend?"el-icon-caret-top":"el-icon-caret-bottom",on:{click:function(a){return t.openArgs(e)}}})]),t._v(" "),a("table",{directives:[{name:"show",rawName:"v-show",value:e.argsOpend,expression:"item.argsOpend"}],staticClass:"editTable"},[t._m(0,!0),t._v(" "),a("tbody",t._l(e.args,function(e,i){return a("tr",{key:i},[a("td",[a("div",{staticClass:"box name"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.Name,expression:"row.Name"}],attrs:{type:"text"},domProps:{value:e.Name},on:{input:function(a){a.target.composing||t.$set(e,"Name",a.target.value)}}})])]),t._v(" "),a("td",[a("div",{staticClass:"box defVale"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.Value,expression:"row.Value"}],attrs:{type:"number"},domProps:{value:e.Value},on:{input:function(a){a.target.composing||t.$set(e,"Value",a.target.value)}}})])])])}),0)])]):t._e(),t._v(" "),t._l(e.outArgs,function(e,i){return a("div",{key:i,staticClass:"one-select"},[a("div",{staticClass:"type-name"},[t._v(t._s(e.Name))]),t._v(" "),a("el-select",{staticClass:"operator",attrs:{placeholder:"请选择"},on:{change:function(a){return t.operatorChange(e,1)}},model:{value:e.Condition1,callback:function(a){t.$set(e,"Condition1",a)},expression:"el.Condition1"}},t._l(t.operatorOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),a("el-input",{staticClass:"operator-Value",attrs:{type:"number",placeholder:"请输入"},model:{value:e.ConditionValue1,callback:function(a){t.$set(e,"ConditionValue1",a)},expression:"el.ConditionValue1"}}),t._v(" "),a("span",{staticClass:"andText"},[t._v("与")]),t._v(" "),a("el-select",{staticClass:"operator",attrs:{placeholder:"请选择"},on:{change:function(a){return t.operatorChange(e,2)}},model:{value:e.Condition2,callback:function(a){t.$set(e,"Condition2",a)},expression:"el.Condition2"}},t._l(t.operatorOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),a("el-input",{staticClass:"operator-Value",attrs:{type:"number",placeholder:"请输入"},model:{value:e.ConditionValue2,callback:function(a){t.$set(e,"ConditionValue2",a)},expression:"el.ConditionValue2"}})],1)}),t._v(" "),0===e.outArgs.length?a("div",{staticClass:"noData"},[t._v("暂无数据")]):t._e()],2)])}),0)]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.execResultLoading,expression:"execResultLoading"}],ref:"tabContentRight",staticClass:"tabContentRight"},[a("div",{staticClass:"titleCss"},[a("div",[t._v("\n              执行结果:\n              "),0!==t.currentStrategyInfo.rightResultData.resultTableData.length?a("span",{},[a("span",[t._v("共"),a("span",{staticClass:"red"},[t._v("【"+t._s(t.currentStrategyInfo.rightResultData.filterResultTableData.length)+"】")]),t._v("只股票，")]),t._v(" "),a("span",[t._v("耗时："),a("span",{staticClass:"green"},[t._v(t._s(t.currentStrategyInfo.rightResultData.totalTime))]),t._v("毫秒,")]),t._v(" "),a("span",[t._v("计算耗时："),a("span",{staticClass:"green"},[t._v(t._s(t.currentStrategyInfo.rightResultData.apiTicket))]),t._v("秒")])]):t._e()]),t._v(" "),a("div",{staticClass:"title-right"},[a("el-checkbox",{model:{value:t.ischeckedResult,callback:function(e){t.ischeckedResult=e},expression:"ischeckedResult"}},[t._v("只显示筛选结果")])],1)]),t._v(" "),a("div",{staticClass:"resultTableWrap"},[0!==t.currentStrategyInfo.rightResultData.resultTableData.length?a("div",{staticClass:"mainContentWrap"},[a("div",{staticClass:"elTableWrap"},[a("el-table",{ref:"resultTable",staticStyle:{width:"100%",height:"100%"},attrs:{data:t.currentStrategyInfo.rightResultData.pageTableData,size:"medium",height:"100%","row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"symbol",label:"代码",sortable:"",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"日期",sortable:"",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"time",label:"时间",width:"120"}}),t._v(" "),t._l(t.currentStrategyInfo.rightResultData.resultTableHeader,function(e,i){return a("el-table-column",{key:i,attrs:{label:e.label,align:"center"}},t._l(e.children,function(t,e){return a("el-table-column",{key:e,attrs:{prop:t.prop,label:t.label,sortable:t.sortable,width:t.width,align:t.align}})}),1)})],2)],1),t._v(" "),a("div",{staticClass:"paginationWrapInDialog"},[a("el-pagination",{attrs:{background:"","page-size":t.currentStrategyInfo.rightResultData.paginationObj.PageSize,layout:"prev, pager, next",total:t.currentStrategyInfo.rightResultData.paginationObj.total},on:{"current-change":t.currentChange}})],1)]):a("div",{staticClass:"noData"},[t._v("暂无数据")])])])]):a("div",{staticClass:"noData"},[t._v("还未选择策略")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"选择指标",visible:t.dialogVisible,width:"700px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("index-search",{on:{selectOneIndex:t.selectOneIndex}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.confirmSelectIndexsFun}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"",visible:t.showDialog,width:"600px"},on:{"update:visible":function(e){t.showDialog=e}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.selectBlockLoading,expression:"selectBlockLoading"}]},[a("el-tabs",{staticClass:"elTabsRun",on:{"tab-click":t.handleResultClick},model:{value:t.blockActiveName,callback:function(e){t.blockActiveName=e},expression:"blockActiveName"}},t._l(t.blockEditableTabs,function(t,e){return a("el-tab-pane",{key:e,attrs:{label:t.title,name:t.name}})}),1),t._v(" "),t.currentBlockData.content?a("div",{staticClass:"blocksWrap"},[a("div",{staticClass:"blocks"},t._l(t.currentBlockData.content,function(e,i){return a("div",{key:i,staticClass:"item",class:{active:t.blockActiveId===e.id},on:{click:function(a){return t.selectOneBlock(e)}}},[t._v(t._s(e.name))])}),0)]):a("div",{staticClass:"noData"},[t._v("暂无数据")])],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.showDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.confirmSelectStockPool}},[t._v("确 定")])],1)])],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("td",[t._v("参数名称")]),t._v(" "),a("td",[t._v("参数值")])])])}],n={render:i,staticRenderFns:r};e.a=n},function(t,e,a){"use strict";function i(t){a(499)}var r=a(306),n=a(505),s=a(4),o=i,h=s(r.a,n.a,!1,o,null,null);e.a=h.exports},function(t,e,a){var i=a(500);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(3)("e665ce5a",i,!0,{})},function(t,e,a){e=t.exports=a(2)(!1),e.push([t.i,".noData{padding-top:30px;text-align:center;color:#666}.elTabsRun{margin-top:-30px}.strategyRunWrap{width:100%;height:100%;position:relative}.strategyRunWrap .left,.strategyRunWrap .right{position:absolute;top:0;height:100%;box-sizing:border-box}.strategyRunWrap .left{left:0;width:240px;border-right:1px solid #d9d9d9;overflow-y:auto;overflow-x:hidden}.strategyRunWrap .left .execAllWrap{height:80px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;padding-left:15px;padding-right:15px;box-sizing:border-box;border-bottom:1px solid #d9d9d9;padding-top:8px}.strategyRunWrap .left .execAllWrap .progressWrap{height:32px;width:100%;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;box-sizing:border-box}.strategyRunWrap .left .execAllWrap .progressWrap .taskname{display:inline-block;width:100px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin-right:10px;box-sizing:border-box}.strategyRunWrap .left .execAllWrap .progressWrap .el-progress{width:calc(100% - 100px)}.strategyRunWrap .left .categorylistWrap{height:calc(100% - 80px)}.strategyRunWrap .right{left:240px;width:calc(100% - 240px)}.strategyRunWrap .right .rightContentWrap{height:100%}.strategyRunWrap .right .rightContentWrap .spaceBox{width:100%;height:7px;background-color:#f7f8f9}.strategyRunWrap .right .rightContentWrap .el-tabs--card>.el-tabs__header{border-bottom:1px solid #d9d9d9;background-color:#f7f8f9}.strategyRunWrap .right .rightContentWrap .el-tabs--card>.el-tabs__header .el-tabs__item{height:30px;line-height:30px}.strategyRunWrap .right .rightContentWrap .el-tabs--card>.el-tabs__header .el-tabs__item.is-active{border-bottom-color:1px solid #d9d9d9;background-color:#fff}.strategyRunWrap .right .rightContentWrap .commonTabContentWrap{width:100%;height:calc(100% - 7px - 31px - 15px)}.strategyRunWrap .right .rightContentWrap .commonTabContentWrap .descTextWrap{line-height:22px;padding:4px 16px;color:#666}.strategyRunWrap .right .rightContentWrap .commonTabContentWrap .resultTableWrap{width:100%;height:calc(100% - 50px - 30px)}.strategyRunWrap .right .rightContentWrap .commonTabContentWrap .resultTableWrap .elTableWrap{width:100%;height:100%}.strategyRunWrap .right .rightContentWrap .commonTabContentWrap .resultTableWrap .paginationWrap{width:100%;height:50px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}.strategyRunWrap .right .rightContentWrap .commonTabContentWrap .titleCss{width:100%;height:50px;background-color:#fff;padding-left:16px;box-sizing:border-box;color:#666;font-size:14px;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;padding-right:16px}.strategyRunWrap .right .rightContentWrap .commonTabContentWrap .titleCss .title-left{display:-ms-flexbox;display:flex;height:100%;-ms-flex-align:center;align-items:center}.strategyRunWrap .right .rightContentWrap .commonTabContentWrap .titleCss .title-left .btnWrap{padding-right:15px}.strategyRunWrap .right .rightContentWrap .commonTabContentWrap .titleCss .title-right{display:-ms-flexbox;display:flex}.strategyRunWrap .right .rightContentWrap .commonTabContentWrap .titleCss .select-btn.noClick{background:#909399;cursor:not-allowed;border:none;color:#fff}.strategyRunWrap .right .rightContentWrap .commonTabContentWrap .titleCss .downloadExcel.noClick{background:#909399;cursor:not-allowed}",""])},function(t,e,a){"use strict";function i(t){a(502)}var r=a(307),n=a(504),s=a(4),o=i,h=s(r.a,n.a,!1,o,null,null);e.a=h.exports},function(t,e,a){var i=a(503);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(3)("7c5d37d7",i,!0,{})},function(t,e,a){var i=a(32);e=t.exports=a(2)(!1),e.push([t.i,".category-wrap .category-list{padding-top:10px}.category-wrap .noCategory{height:100px;padding:100px 0;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:distribute;justify-content:space-around}.category-wrap .noCategory .el-input{width:80%}.category-wrap .category-list>li{line-height:32px;padding-left:10px}.category-wrap .category-list>li .iconfont{position:relative;display:inline-block;z-index:1;margin-left:1px;margin-right:5px;font-weight:400;color:#333;width:11px;height:11px;vertical-align:middle;margin-top:-3px}.category-wrap .category-list>li .iconfont.icon-m{background-image:url("+i(a(67))+")}.category-wrap .category-list>li .iconfont.icon-p{background-image:url("+i(a(68))+')}.category-wrap .category-list>li .catagory-lv1{cursor:pointer;font-weight:700}.category-wrap .category-list>li .catagory-lv1:before{content:"";position:absolute;width:16px;height:16px;top:4px;left:7px;background-image:url('+i(a(22))+');background-repeat:repeat-x}.category-wrap .category-list>li .catagory-lv1 i{color:#a1a1a1;font-size:12px}.category-wrap .category-list>li .catagory-lv1,.category-wrap .category-list>li ul{position:relative}.category-wrap .category-list>li .catagory-lv1:after,.category-wrap .category-list>li ul:after{content:"";position:absolute;width:10px;top:0;bottom:0;left:-1px;background-image:url('+i(a(69))+');background-repeat:repeat-y}.category-wrap .category-list>li:first-child .catagory-lv1:after{top:10px}.category-wrap .category-list>li:last-child>p:last-child:after{bottom:16px}.category-wrap .category-list>li:last-child>ul:last-child:after{bottom:12px}.category-wrap .category-list li ul>li{position:relative;padding-left:32px;line-height:26px}.category-wrap .category-list li ul>li:before{content:"";position:absolute;width:24px;height:13px;top:2px;left:7px;background-image:url('+i(a(22))+");background-repeat:repeat-x}.category-wrap .category-list li ul>li .catagory-lv2{cursor:pointer}.category-wrap .category-list .isSelected>p{color:#ff7f00}.category-wrap .right-menu{position:absolute;transform:translate(-5px,-5px);width:128px;border:1px solid #a2a2a2;border-radius:3px;z-index:1}.category-wrap .right-menu li{background:hsla(0,0%,100%,.9);padding-left:12px;line-height:34px;cursor:pointer}.category-wrap .right-menu li:hover{background:hsla(0,0%,90%,.9)}",""])},function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"category-wrap",attrs:{id:"categoryWrap"},on:{click:t.hideRightMenu,mouseleave:t.hideRightMenu}},[a("ul",{staticClass:"category-list"},t._l(t.categoryList,function(e){return a("li",{key:e.categoryid,class:{isSelected:e.isSelected},attrs:{onselectstart:"return false"},on:{contextmenu:function(a){return a.stopPropagation(),t.rightMenu(a,[e.categoryid])}}},[e.editing||e.creating?[a("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],attrs:{id:"J-edit-input",type:"text",placeholder:""},domProps:{value:t.text},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit.apply(null,arguments)},input:function(e){e.target.composing||(t.text=e.target.value)}}})]:[a("p",{staticClass:"catagory-lv1",on:{click:function(a){return t.toggleShow(e)}}},[e.opened?a("i",{staticClass:"iconfont icon-p"}):a("i",{staticClass:"iconfont icon-m"}),t._v("\n                    "+t._s(e.name)+"\n                ")])],t._v(" "),e.opened?a("ul",t._l(e.children,function(i){return a("li",{key:i.children,class:{isSelected:i.isSelected},attrs:{onselectstart:"return false"},on:{contextmenu:function(a){return a.stopPropagation(),t.rightMenu(a,[e.categoryid,i.categoryid])}}},[i.editing||i.creating?[a("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],attrs:{id:"J-edit-input",type:"text",placeholder:""},domProps:{value:t.text},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit.apply(null,arguments)},input:function(e){e.target.composing||(t.text=e.target.value)}}})]:[a("p",{staticClass:"catagory-lv2",on:{click:function(a){return t.checkCategory([e.categoryid,i.categoryid])}}},[t._v(t._s(i.name))])]],2)}),0):t._e()],2)}),0),t._v(" "),t.isShowNoCategory?a("div",{staticClass:"noCategory"},[a("el-input",{attrs:{placeholder:"输入分组名称",size:"small"},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addFirstGroup}},[t._v("新增分组")])],1):t._e(),t._v(" "),t.showRightMenu?a("ul",{staticClass:"right-menu",style:{left:t.currentMousePosition.x+"px",top:t.currentMousePosition.y+"px"}},[a("li",{directives:[{name:"show",rawName:"v-show",value:t.showGroupCategory,expression:"showGroupCategory"}],on:{click:function(e){return t.addCategory("brother")}}},[a("i",{staticClass:"iconfont icon-xinjianjiedian"}),t._v(" "+t._s(t.sameLevelChildOprTitle)+"\n        ")]),t._v(" "),a("li",{directives:[{name:"show",rawName:"v-show",value:t.showSubCategory,expression:"showSubCategory"}],on:{click:function(e){return t.addCategory("child")}}},[a("i",{staticClass:"iconfont icon-xinjianjiedian",staticStyle:{visibility:"hidden"}}),t._v(" "+t._s(t.nextLevelChildOprTitle)+"\n        ")]),t._v(" "),a("li",{directives:[{name:"show",rawName:"v-show",value:t.showGroupCategory,expression:"showGroupCategory"}],on:{click:t.editCategory}},[a("i",{staticClass:"iconfont icon-bianjibiaoti"}),t._v(" 编辑\n        ")]),t._v(" "),t.showDelateButton?a("li",{on:{click:t.confirm}},[a("i",{staticClass:"iconfont icon-shanchujiedian"}),t._v(" 删除\n        ")]):t._e()]):t._e()])},r=[],n={render:i,staticRenderFns:r};e.a=n},function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"strategyRunWrap"},[a("div",{staticClass:"left"},[a("div",{staticClass:"execAllWrap"},[a("el-button",{attrs:{type:"primary",size:"small",disabled:1===t.execAllObj.status},on:{click:t.execAllFun}},[t._v("执行全部")]),t._v(" "),1===t.execAllObj.status?a("div",{staticClass:"progressWrap"},[a("span",{staticClass:"taskname"},[t._v(t._s(t.execAllObj.taskname))]),t._v(" "),a("el-progress",{attrs:{percentage:t.execAllObj.percent}})],1):t._e()],1),t._v(" "),a("div",{staticClass:"categorylistWrap"},[a("category-list",{ref:"categorylist",on:{changeCategory:t.changeCategory,refreshtablesize:t.OnSize}})],1)]),t._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"rightContentWrap"},[t.editableTabs.length>0?a("div",{ref:"spaceBox",staticClass:"spaceBox"}):t._e(),t._v(" "),a("el-tabs",{attrs:{type:"card",closable:""},on:{"tab-remove":t.removeTab,"tab-click":t.handleTabClick},model:{value:t.editableTabsValue,callback:function(e){t.editableTabsValue=e},expression:"editableTabsValue"}},t._l(t.editableTabs,function(t){return a("el-tab-pane",{key:t.name,attrs:{label:t.title,name:t.name}})}),1),t._v(" "),t.editableTabs.length>0?a("div",{ref:"commonTabContentWrap",staticClass:"commonTabContentWrap"},[null!==t.currentTabData.desc?a("div",{ref:"descTextWrap",staticClass:"descTextWrap"},[t._v(t._s(t.currentTabData.desc))]):t._e(),t._v(" "),a("div",{staticClass:"titleCss"},[a("div",{staticClass:"title-left"},[a("div",{staticClass:"btnWrap"},[a("el-button",{attrs:{type:"default",size:"small"},on:{click:t.reExecute}},[t._v("重新执行")])],1),t._v("\n            执行结果:\n            "),a("span",{},[a("span",[t._v("共"),a("span",{staticClass:"red"},[t._v("【"+t._s(t.currentTabData.resultTableData.length)+"】")]),t._v("只股票，")]),t._v(" "),a("span",[t._v("耗时："),a("span",{staticClass:"green"},[t._v(t._s(t.currentTabData.totalTime))]),t._v("毫秒,")]),t._v(" "),a("span",[t._v("计算耗时："),a("span",{staticClass:"green"},[t._v(t._s(t.currentTabData.apiTicket))]),t._v("秒")])])]),t._v(" "),a("div",{staticClass:"title-right"},[t._v("\n            最后执行时间："+t._s(t.currentTabData.updateTime)+"\n          ")])]),t._v(" "),t.currentTabData.resultTableData.length>0?a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.resultLoading,expression:"resultLoading"}],ref:"resultTableWrap",staticClass:"resultTableWrap"},[a("div",{ref:"elTableWrap",staticClass:"elTableWrap"},[a("el-table",{ref:"resultTable",staticStyle:{width:"100%",height:"100%"},attrs:{data:t.currentTabData.pageTableData,size:"medium",height:"100%"}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"symbol",label:"代码",sortable:"",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"symbolName",label:"名称",sortable:"",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"日期",sortable:"",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"time",label:"时间",width:"120"}}),t._v(" "),t._l(t.currentTabData.resultTableHeader,function(e,i){return a("el-table-column",{key:i,attrs:{label:e.label,align:"center"}},t._l(e.children,function(t,e){return a("el-table-column",{key:e,attrs:{prop:t.prop,label:t.label,sortable:t.sortable,width:t.width,align:t.align}})}),1)})],2)],1),t._v(" "),a("div",{ref:"paginationWrap",staticClass:"paginationWrap"},[a("el-pagination",{attrs:{background:"","page-size":t.currentTabData.paginationObj.PageSize,layout:"prev, pager, next",total:t.currentTabData.paginationObj.total},on:{"current-change":t.currentChange}})],1)]):a("div",{staticClass:"noData"},[t._v("暂无数据")])]):a("div",{staticClass:"noData"},[t._v("还未选择策略")])],1)])])},r=[],n={render:i,staticRenderFns:r};e.a=n},function(t,e,a){"use strict";function i(t){a(507)}var r=a(308),n=a(513),s=a(4),o=i,h=s(r.a,n.a,!1,o,null,null);e.a=h.exports},function(t,e,a){var i=a(508);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(3)("0f3d93ff",i,!0,{})},function(t,e,a){e=t.exports=a(2)(!1),e.push([t.i,".noData{padding-top:30px;text-align:center;color:#666}.elTabsRun{margin-top:-30px}.customStockPoolWrap{width:100%;height:100%;position:relative}.customStockPoolWrap .left,.customStockPoolWrap .right{position:absolute;top:0;height:100%;box-sizing:border-box}.customStockPoolWrap .left{left:0;width:240px;border-right:1px solid #d9d9d9;overflow-y:auto;overflow-x:hidden}.customStockPoolWrap .right{left:240px;width:calc(100% - 240px)}.customStockPoolWrap .right .rightContentWrap{height:100%}.customStockPoolWrap .right .rightContentWrap .spaceBox{width:100%;height:7px;background-color:#f7f8f9}.customStockPoolWrap .right .rightContentWrap .el-tabs--card>.el-tabs__header{border-bottom:1px solid #d9d9d9;background-color:#f7f8f9}.customStockPoolWrap .right .rightContentWrap .el-tabs--card>.el-tabs__header .el-tabs__item{height:30px;line-height:30px}.customStockPoolWrap .right .rightContentWrap .el-tabs--card>.el-tabs__header .el-tabs__item.is-active{border-bottom-color:1px solid #d9d9d9;background-color:#fff}.customStockPoolWrap .right .rightContentWrap .commonTabContentWrap{width:100%;height:calc(100% - 7px - 31px - 15px)}.customStockPoolWrap .right .rightContentWrap .commonTabContentWrap .tableWrap{width:100%;height:calc(100% - 47px);border-top:1px solid #ebeef5;box-sizing:border-box}.customStockPoolWrap .right .rightContentWrap .commonTabContentWrap .tableWrap .el-button--text{color:#eb6100;font-size:14px}",""])},function(t,e,a){"use strict";function i(t){a(510)}var r=a(309),n=a(512),s=a(4),o=i,h=s(r.a,n.a,!1,o,null,null);e.a=h.exports},function(t,e,a){var i=a(511);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(3)("3365841e",i,!0,{})},function(t,e,a){var i=a(32);e=t.exports=a(2)(!1),e.push([t.i,".category-wrap .category-list{padding-top:10px}.category-wrap .noCategory{height:100px;padding:100px 0;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:distribute;justify-content:space-around}.category-wrap .noCategory .el-input{width:80%}.category-wrap .category-list>li{line-height:32px;padding-left:10px}.category-wrap .category-list>li .iconfont{position:relative;display:inline-block;z-index:1;margin-left:1px;margin-right:5px;font-weight:400;color:#333;width:11px;height:11px;vertical-align:middle;margin-top:-3px}.category-wrap .category-list>li .iconfont.icon-m{background-image:url("+i(a(67))+")}.category-wrap .category-list>li .iconfont.icon-p{background-image:url("+i(a(68))+')}.category-wrap .category-list>li .catagory-lv1{cursor:pointer;font-weight:700}.category-wrap .category-list>li .catagory-lv1:before{content:"";position:absolute;width:16px;height:16px;top:4px;left:7px;background-image:url('+i(a(22))+');background-repeat:repeat-x}.category-wrap .category-list>li .catagory-lv1 i{color:#a1a1a1;font-size:12px}.category-wrap .category-list>li .catagory-lv1,.category-wrap .category-list>li ul{position:relative}.category-wrap .category-list>li .catagory-lv1:after,.category-wrap .category-list>li ul:after{content:"";position:absolute;width:10px;top:0;bottom:0;left:-1px;background-image:url('+i(a(69))+');background-repeat:repeat-y}.category-wrap .category-list>li:first-child .catagory-lv1:after{top:10px}.category-wrap .category-list>li:last-child>p:last-child:after{bottom:16px}.category-wrap .category-list>li:last-child>ul:last-child:after{bottom:12px}.category-wrap .category-list li ul>li{position:relative;padding-left:32px;line-height:26px}.category-wrap .category-list li ul>li:before{content:"";position:absolute;width:24px;height:13px;top:2px;left:7px;background-image:url('+i(a(22))+");background-repeat:repeat-x}.category-wrap .category-list li ul>li .catagory-lv2{cursor:pointer}.category-wrap .category-list .isSelected>p{color:#ff7f00}.category-wrap .right-menu{position:absolute;transform:translate(-5px,-5px);width:128px;border:1px solid #a2a2a2;border-radius:3px;z-index:1}.category-wrap .right-menu li{background:hsla(0,0%,100%,.9);padding-left:12px;line-height:34px;cursor:pointer}.category-wrap .right-menu li:hover{background:hsla(0,0%,90%,.9)}",""])},function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"category-wrap",attrs:{id:"categoryWrap"},on:{click:t.hideRightMenu,mouseleave:t.hideRightMenu}},[a("ul",{staticClass:"category-list"},t._l(t.categoryList,function(e){return a("li",{key:e.categoryid,class:{isSelected:e.isSelected},attrs:{onselectstart:"return false"},on:{contextmenu:function(a){return a.stopPropagation(),t.rightMenu(a,[e.categoryid])}}},[e.editing||e.creating?[a("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],attrs:{id:"J-edit-input",type:"text",placeholder:""},domProps:{value:t.text},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit.apply(null,arguments)},input:function(e){e.target.composing||(t.text=e.target.value)}}})]:[a("p",{staticClass:"catagory-lv1",on:{click:function(a){return t.toggleShow(e)}}},[e.opened?a("i",{staticClass:"iconfont icon-p"}):a("i",{staticClass:"iconfont icon-m"}),t._v("\n                    "+t._s(e.name)+"\n                ")])],t._v(" "),e.opened?a("ul",t._l(e.children,function(i){return a("li",{key:i.children,class:{isSelected:i.isSelected},attrs:{onselectstart:"return false"},on:{contextmenu:function(a){return a.stopPropagation(),t.rightMenu(a,[e.categoryid,i.categoryid])}}},[i.editing||i.creating?[a("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],attrs:{id:"J-edit-input",type:"text",placeholder:""},domProps:{value:t.text},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit.apply(null,arguments)},input:function(e){e.target.composing||(t.text=e.target.value)}}})]:[a("p",{staticClass:"catagory-lv2",on:{click:function(a){return t.checkCategory([e.categoryid,i.categoryid])}}},[t._v(t._s(i.name))])]],2)}),0):t._e()],2)}),0),t._v(" "),t.isShowNoCategory?a("div",{staticClass:"noCategory"},[a("el-input",{attrs:{placeholder:"输入分组名称",size:"small"},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addFirstGroup}},[t._v("新增分组")])],1):t._e(),t._v(" "),t.showRightMenu?a("ul",{staticClass:"right-menu",style:{left:t.currentMousePosition.x+"px",top:t.currentMousePosition.y+"px"},attrs:{id:"rightMenu"}},[a("li",{directives:[{name:"show",rawName:"v-show",value:t.showGroupCategory,expression:"showGroupCategory"}],on:{click:function(e){return t.addCategory("brother")}}},[a("i",{staticClass:"iconfont icon-xinjianjiedian"}),t._v(" "+t._s(t.sameLevelChildOprTitle)+"\n        ")]),t._v(" "),a("li",{directives:[{name:"show",rawName:"v-show",value:t.showSubCategory,expression:"showSubCategory"}],on:{click:function(e){return t.addCategory("child")}}},[a("i",{staticClass:"iconfont icon-xinjianjiedian",staticStyle:{visibility:"hidden"}}),t._v(" "+t._s(t.nextLevelChildOprTitle)+"\n        ")]),t._v(" "),a("li",{directives:[{name:"show",rawName:"v-show",value:t.showGroupCategory,expression:"showGroupCategory"}],on:{click:t.editCategory}},[a("i",{staticClass:"iconfont icon-bianjibiaoti"}),t._v(" 编辑\n        ")]),t._v(" "),t.showDelateButton?a("li",{on:{click:t.confirm}},[a("i",{staticClass:"iconfont icon-shanchujiedian"}),t._v(" 删除\n        ")]):t._e()]):t._e()])},r=[],n={render:i,staticRenderFns:r};e.a=n},function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"customStockPoolWrap"},[a("div",{staticClass:"left"},[a("category-list-for-stock-pool",{ref:"categorylist",on:{changeCategory:t.changeCategory,deleteCategory:t.deleteCategory,refreshPoolName:t.refreshPoolName}})],1),t._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"rightContentWrap"},[t.editableTabs.length>0?a("div",{ref:"spaceBox",staticClass:"spaceBox"}):t._e(),t._v(" "),a("el-tabs",{attrs:{type:"card",closable:""},on:{"tab-remove":t.removeTab,"tab-click":t.handleTabClick},model:{value:t.editableTabsValue,callback:function(e){t.editableTabsValue=e},expression:"editableTabsValue"}},t._l(t.editableTabs,function(t){return a("el-tab-pane",{key:t.name,attrs:{label:t.title,name:t.name}})}),1),t._v(" "),t.editableTabs.length>0?a("div",{staticClass:"commonTabContentWrap"},[a("stock-search",{attrs:{isShowBtn:!0},on:{addSymbol:t.addSymbol}}),t._v(" "),a("div",{staticClass:"tableWrap"},[a("el-table",{ref:"resultTable",staticStyle:{width:"100%",height:"100%"},attrs:{data:t.currentTabData.data.tableData,size:"medium",height:"100%"}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"symbol",label:"股票代码",sortable:"",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"股票名称",sortable:"",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"date",sortable:"",label:"日期",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{label:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),t.deleteRow(e.$index,t.currentTabData.data.tableData)}}},[t._v("\n                    移除\n                  ")])]}}],null,!1,799517381)})],1)],1)],1):a("div",{staticClass:"noData"},[t._v("还未选择股票池")])],1)])])},r=[],n={render:i,staticRenderFns:r};e.a=n}],[398]);